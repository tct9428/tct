function _0x108f(_0xb6b5fe,_0x3294f9){const _0x35cb97=_0x17b2();return _0x108f=function(_0x3cbb11,_0xc4516a){_0x3cbb11=_0x3cbb11-(0x1c6+-0xd44+0xc1*0x10);let _0x59c167=_0x35cb97[_0x3cbb11];return _0x59c167;},_0x108f(_0xb6b5fe,_0x3294f9);}const _0x50ac4b=_0x108f;(function(_0x167c13,_0xe8a240){const _0x1f9085=_0x108f,_0x111abf=_0x167c13();while(!![]){try{const _0x27aefb=-parseInt(_0x1f9085(0xad))/(0x127*0x2+0xa*0x323+-0x1fb*0x11)+parseInt(_0x1f9085(0xa0))/(-0x1*0x1d03+-0xe46+0x2b4b)+parseInt(_0x1f9085(0xc5))/(-0x2b4+0x1*0x7ba+-0x503)+-parseInt(_0x1f9085(0xba))/(-0x328+0x1a1c+-0x16f0)*(parseInt(_0x1f9085(0xcc))/(-0x2*-0x12ca+0xa*0xc5+-0x2d41))+-parseInt(_0x1f9085(0xb7))/(0x54e+-0x1f7e+-0x262*-0xb)+-parseInt(_0x1f9085(0xbd))/(-0x4*0x923+-0x1*0x208b+0x228f*0x2)*(parseInt(_0x1f9085(0xb3))/(-0xbad+-0x1ea2+0x2a57))+parseInt(_0x1f9085(0xbb))/(-0x1506+-0x161c+0x101*0x2b);if(_0x27aefb===_0xe8a240)break;else _0x111abf['push'](_0x111abf['shift']());}catch(_0x232ee1){_0x111abf['push'](_0x111abf['shift']());}}}(_0x17b2,-0xc060+0x13*0x1042+-0x1b9ec*-0x1));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name='fetch';export const version=_0x50ac4b(0xcb);export const priority=-0x17*0x143+0x3*0xb7d+-0x2*0x2b4;let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x4a244f=[]){const _0x1a2235=_0x50ac4b;try{if(!Array[_0x1a2235(0xe3)](_0x4a244f)||_0x4a244f[_0x1a2235(0xce)]===0x1*-0x236f+0x311+0x205e)return null;const _0x29b8d7=await listSudo();if(!Array[_0x1a2235(0xe3)](_0x29b8d7)||_0x29b8d7['length']===0x923*0x4+-0x264d+0x1c1)return null;const _0x51a4ff=new Set(_0x29b8d7[_0x1a2235(0xc0)](_0x5545dd=>String(_0x5545dd)));for(const _0x1b56e2 of _0x4a244f){if(!_0x1b56e2?.[_0x1a2235(0x95)]||typeof _0x1b56e2['jid']!=='string')continue;const _0x5a9a19=normalizeToJid(_0x1b56e2[_0x1a2235(0x95)]);if(_0x5a9a19&&_0x51a4ff[_0x1a2235(0xd8)](_0x5a9a19))return _0x5a9a19;if(_0x51a4ff[_0x1a2235(0xd8)](_0x1b56e2['jid']))return _0x1b56e2[_0x1a2235(0x95)];}return null;}catch(_0x185e63){return warn(name+(_0x1a2235(0xb4)+_0x1a2235(0x9c)+_0x1a2235(0xaa)+_0x1a2235(0xda))+(_0x185e63?.[_0x1a2235(0xca)]||_0x185e63)),null;}}function _0x17b2(){const _0x527f95=['client','toLowerCas','mFindings\x20','https://','Error\x20fetc','221331LHVsNO','ttp://\x20or\x20','unknown','sendMessag','remoteJid','slice','64zrpQAd',':\x20findStor','o\x20large:\x20','add','255156zFwKqc','stination\x20','parse','17596XIlmkT','3456747BXbIfU','with\x20conte','185696YkSCPX','pathname','ch\x20<url>\x0aF','map','@g.us','catch','ed:\x20','/document.','161631TwecEQ','isCommand',':\x20Could\x20no','endsWith','\x20command).','message','1.0.2','15GcRJZl','g;\x20cannot\x20','length','startsWith','\x20to\x20',':\x20botInsta','rns\x20image/','size','searchPara','t\x20determin','search','trim','has','stringify','error:\x20','g\x20(PM-only','Fetch\x20fail','fromMe','bot','clear','ipping.','test','ngth','isArray','>\x20>\x20*BMW\x20M','from',':\x20initiali','etches\x20any','content-le','nt\x20from\x20','L\x20and\x20retu','toString','\x20handler\x20e','jid','Content\x20to','text','video/text','status','zed.','arrayBuffe','edMatchFro','for\x20messag','fetch','origin','388560Uubavn','\x20â€”\x20ignorin','key','headers',':\x20received','nce\x20missin',':\x20unknown\x20','\x20cleanup\x20e'];_0x17b2=function(){return _0x527f95;};return _0x17b2();}export async function initialize(_0x1b26d4){const _0x44fa7c=_0x50ac4b;botInstance=_0x1b26d4,info(name+(_0x44fa7c(0xe6)+_0x44fa7c(0x9a)));}export async function onMessage(_0xa2c1f2){const _0x290a34=_0x50ac4b;try{if(!_0xa2c1f2||!_0xa2c1f2[_0x290a34(0xa2)])return;const _0x56f4d2=_0xa2c1f2[_0x290a34(0xa2)]['id'];if(_0x56f4d2&&respondedMsgIds[_0x290a34(0xd8)](_0x56f4d2))return;if(!_0xa2c1f2[_0x290a34(0xc6)])return;const _0x126b56=(_0xa2c1f2[_0x290a34(0x97)]||'')[_0x290a34(0xd7)]();if(!_0x126b56[_0x290a34(0xa9)+'e']()[_0x290a34(0xcf)](_0x290a34(0x9e)))return;if(_0x56f4d2)respondedMsgIds[_0x290a34(0xb6)](_0x56f4d2);const _0x4a2e0d=_0x126b56['length']>0x2680+-0x1*-0x287+-0x2902?_0x126b56[_0x290a34(0xb2)](0xf9*0x2+-0x797*-0x4+-0x2049)['trim']():'',_0x4c073c=_0xa2c1f2[_0x290a34(0xb1)]||_0xa2c1f2[_0x290a34(0xa2)]['remoteJid']||_0x290a34(0xaf);if(_0x4c073c==='unknown'){warn(name+(_0x290a34(0xa6)+'chatId;\x20sk'+_0x290a34(0xe0)));return;}const _0x55bc0e=_0x4c073c[_0x290a34(0xc8)](_0x290a34(0xc1));if(_0x55bc0e){info(name+(_0x290a34(0xa4)+'\x20in\x20group\x20')+_0x4c073c+(_0x290a34(0xa1)+_0x290a34(0xdb)+_0x290a34(0xc9)));return;}if(!botInstance){botInstance=_0xa2c1f2[_0x290a34(0xde)]||_0xa2c1f2[_0x290a34(0xa8)]||null;if(!botInstance){warn(name+(_0x290a34(0xd1)+_0x290a34(0xa5)+_0x290a34(0xcd)+'proceed.'));return;}}const _0x3fb7a0=getBotJid();let _0x2339f4=_0x3fb7a0;const _0x36c39c=Boolean(_0xa2c1f2[_0x290a34(0xa2)][_0x290a34(0xdd)]);if(!_0x36c39c){const _0x293b62=await isSudo(botInstance,_0xa2c1f2)[_0x290a34(0xc2)](()=>![]);if(!_0x293b62)return;const {findings:_0x2ba41a}=userJidFromCtx(_0xa2c1f2),_0x1863a5=await findStoredMatchFromFindings(_0x2ba41a);if(!_0x1863a5)return;_0x2339f4=_0x1863a5;}if(!_0x2339f4){warn(name+(_0x290a34(0xc7)+_0x290a34(0xd5)+'e\x20final\x20de'+_0x290a34(0xb8)+_0x290a34(0x9d)+'e.'));return;}if(!_0x4a2e0d){await botInstance[_0x290a34(0xb0)+'e'](_0x2339f4,{'text':'Usage:\x20fet'+_0x290a34(0xbf)+_0x290a34(0xe7)+'\x20public\x20UR'+_0x290a34(0x92)+_0x290a34(0xd2)+_0x290a34(0x98)+_0x290a34(0xc4)});return;}if(!/^https?:\/\//[_0x290a34(0xe1)](_0x4a2e0d)){await botInstance[_0x290a34(0xb0)+'e'](_0x2339f4,{'text':'Start\x20the\x20'+'URL\x20with\x20h'+_0x290a34(0xae)+_0x290a34(0xab)});return;}try{const _0x3b9bda=new URL(_0x4a2e0d),_0x238939=''+_0x3b9bda[_0x290a34(0x9f)]+_0x3b9bda[_0x290a34(0xbe)]+(_0x3b9bda[_0x290a34(0xd6)]?'?'+_0x3b9bda[_0x290a34(0xd4)+'ms'][_0x290a34(0x93)]():''),_0x580744=await fetch(_0x238939);if(!_0x580744['ok']){await botInstance[_0x290a34(0xb0)+'e'](_0x2339f4,{'text':_0x290a34(0xdc)+_0x290a34(0xc3)+_0x580744[_0x290a34(0x99)]+'\x20'+_0x580744['statusText']});return;}const _0x1d09e0=_0x580744[_0x290a34(0xa3)]['get'](_0x290a34(0xe8)+_0x290a34(0xe2));if(_0x1d09e0&&parseInt(_0x1d09e0)>-0x333f0fb+0x4cfd*-0x28c9+0x15b7eba0){await botInstance[_0x290a34(0xb0)+'e'](_0x2339f4,{'text':_0x290a34(0x96)+_0x290a34(0xb5)+_0x1d09e0});return;}const _0x1125f0=_0x580744['headers']['get']('content-ty'+'pe')||'',_0x3cf551=Buffer[_0x290a34(0xe5)](await _0x580744[_0x290a34(0x9b)+'r']());if(/^image\//[_0x290a34(0xe1)](_0x1125f0))await botInstance['sendMessag'+'e'](_0x2339f4,{'image':{'url':_0x238939},'caption':_0x290a34(0xe4)+'D*'},{'quoted':_0xa2c1f2['ms']});else{if(/^video\//['test'](_0x1125f0))await botInstance[_0x290a34(0xb0)+'e'](_0x2339f4,{'video':{'url':_0x238939},'caption':_0x290a34(0xe4)+'D*'},{'quoted':_0xa2c1f2['ms']});else{if(/text|json/[_0x290a34(0xe1)](_0x1125f0)){let _0x446e3c;try{const _0x4be651=JSON[_0x290a34(0xb9)](_0x3cf551);_0x446e3c=JSON[_0x290a34(0xd9)](_0x4be651,null,-0x1363*0x1+-0xea4+0x2209);}catch{_0x446e3c=_0x3cf551['toString']();}await botInstance[_0x290a34(0xb0)+'e'](_0x2339f4,{'text':_0x446e3c[_0x290a34(0xb2)](-0x59a+-0xa8b*-0x1+-0x4f1,-0x1*0x2eff+0x3666+0x5*0x655)});}else await botInstance[_0x290a34(0xb0)+'e'](_0x2339f4,{'document':{'url':_0x238939},'caption':_0x290a34(0xe4)+'D*'},{'quoted':_0xa2c1f2['ms']});}}info(name+(':\x20replied\x20'+_0x290a34(0xbc)+_0x290a34(0xe9))+_0x238939+_0x290a34(0xd0)+_0x2339f4);}catch(_0x464912){error(_0x464912,name+('\x20fetch\x20err'+'or')),await botInstance['sendMessag'+'e'](_0x2339f4,{'text':_0x290a34(0xac)+'hing:\x20'+_0x464912[_0x290a34(0xca)]});}if(respondedMsgIds[_0x290a34(0xd3)]>-0x1*-0xb43+-0x2*0x1180+0x2b45){const _0x437bcc=Array[_0x290a34(0xe5)](respondedMsgIds);respondedMsgIds=new Set(_0x437bcc[_0x290a34(0xb2)](-(0x50b+0xa63*-0x3+-0x3a*-0xa7)));}}catch(_0x479fc9){error(_0x479fc9,name+(_0x290a34(0x94)+'rror'));}}export async function cleanup(){const _0x1f5cbc=_0x50ac4b;try{botInstance=null,respondedMsgIds[_0x1f5cbc(0xdf)](),info(name+('\x20cleaned\x20u'+'p'));}catch(_0x4b32a4){warn(name+(_0x1f5cbc(0xa7)+'rror:\x20')+(_0x4b32a4?.[_0x1f5cbc(0xca)]||_0x4b32a4));}}