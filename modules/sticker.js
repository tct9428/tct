const _0xfe6ed7=_0x9089;(function(_0x1a6c0a,_0x60e400){const _0x2553ec=_0x9089,_0x3f4535=_0x1a6c0a();while(!![]){try{const _0x2b2d74=-parseInt(_0x2553ec(0x1e2))/(-0x3*0x85d+0xc5a+0xcbe)+-parseInt(_0x2553ec(0x27c))/(-0x5*-0x565+-0x5b*-0x3e+-0x9cd*0x5)*(parseInt(_0x2553ec(0x20a))/(-0x1*-0x1817+0x248b+-0x3c9f))+-parseInt(_0x2553ec(0x296))/(-0x27a+0x1ac8+-0x184a)*(parseInt(_0x2553ec(0x1dd))/(0x21b0+-0x10*-0x36+-0x250b))+-parseInt(_0x2553ec(0x25a))/(-0x250*-0x2+0x8c*-0x4+-0x26a)+-parseInt(_0x2553ec(0x275))/(0x85*0x6+-0x27a+-0x9d*0x1)+-parseInt(_0x2553ec(0x1eb))/(0x1c84+0x16e0+-0x335c)+-parseInt(_0x2553ec(0x1e8))/(0x22ab+0xa*-0x3af+-0x2*-0x11a)*(-parseInt(_0x2553ec(0x245))/(-0x25b9+-0x784+-0x43*-0xad));if(_0x2b2d74===_0x60e400)break;else _0x3f4535['push'](_0x3f4535['shift']());}catch(_0x1624c4){_0x3f4535['push'](_0x3f4535['shift']());}}}(_0x48b6,-0x121a8+0xf4ed*-0x4+0xc9cb*0x9));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';import{Readable}from'stream';import _0x2e235a from'fs/promises';import _0xc8872d from'os';import _0x4de3af from'path';function _0x9089(_0x5d0f08,_0x427332){const _0x25d14a=_0x48b6();return _0x9089=function(_0x1ee471,_0x5cf312){_0x1ee471=_0x1ee471-(0x25b1+0x2377+0x2*-0x23a7);let _0x375f08=_0x25d14a[_0x1ee471];return _0x375f08;},_0x9089(_0x5d0f08,_0x427332);}import _0x54b426 from'crypto';export const name=_0xfe6ed7(0x244);export const version=_0xfe6ed7(0x241);export const priority=-0xb*-0x35f+0x9*0xb3+-0x2b56;export const commands=[_0xfe6ed7(0x244),'s',_0xfe6ed7(0x26a),_0xfe6ed7(0x204)];let botInstance=null,respondedMsgIds=new Set(),_baileysModule=null,_sharp=null,_ffmpegInstaller=null,_fluentFfmpeg=null;async function getBaileysModule(){const _0xd382a=_0xfe6ed7;if(_baileysModule)return _baileysModule;try{return _baileysModule=await import('@whiskeysockets/baileys'),_baileysModule;}catch(_0x4a697d){throw new Error(_0xd382a(0x22e)+_0xd382a(0x26d)+'keysockets'+'/baileys:\x20'+_0x4a697d[_0xd382a(0x20b)]);}}async function getSharp(){const _0x312374=_0xfe6ed7;if(_sharp)return _sharp;try{const _0x5dd1f5=await import('sharp');return _sharp=_0x5dd1f5['default']||_0x5dd1f5,_sharp;}catch(_0x4dfebf){throw new Error(_0x312374(0x22e)+_0x312374(0x1f7)+':\x20'+_0x4dfebf[_0x312374(0x20b)]);}}async function getFfmpeg(){const _0x1a02ee=_0xfe6ed7;if(_ffmpegInstaller&&_fluentFfmpeg)return{'ffmpegPath':_ffmpegInstaller[_0x1a02ee(0x260)],'ffmpegLib':_fluentFfmpeg};try{const _0x3af063=await import('@ffmpeg-installer/ffmpeg'),_0xb4b980=await import('fluent-ffmpeg');_ffmpegInstaller=_0x3af063[_0x1a02ee(0x1f1)]||_0x3af063,_fluentFfmpeg=_0xb4b980[_0x1a02ee(0x1f1)]||_0xb4b980;try{_fluentFfmpeg[_0x1a02ee(0x21e)+_0x1a02ee(0x226)](_ffmpegInstaller[_0x1a02ee(0x260)]);}catch(_0x3dda01){}return{'ffmpegPath':_ffmpegInstaller[_0x1a02ee(0x260)],'ffmpegLib':_fluentFfmpeg};}catch(_0x589d95){throw new Error(_0x1a02ee(0x22e)+_0x1a02ee(0x27e)+'g\x20tools:\x20'+_0x589d95[_0x1a02ee(0x20b)]);}}async function streamToBuffer(_0x3f9f54){const _0x541630=_0xfe6ed7;if(!_0x3f9f54)return Buffer['alloc'](-0xab*-0x25+-0x971+-0x187*0xa);if(typeof _0x3f9f54[Symbol[_0x541630(0x28a)+_0x541630(0x252)]]===_0x541630(0x26f)){const _0x3a00c5=[];for await(const _0x41a5be of _0x3f9f54){_0x3a00c5[_0x541630(0x289)](Buffer[_0x541630(0x1e7)](_0x41a5be)?_0x41a5be:Buffer['from'](_0x41a5be));}return Buffer[_0x541630(0x258)](_0x3a00c5);}if(typeof _0x3f9f54['on']===_0x541630(0x26f))return new Promise((_0x570441,_0x12e202)=>{const _0x36a016=_0x541630,_0x393c9e=[];_0x3f9f54['on'](_0x36a016(0x206),_0x121dc9=>_0x393c9e[_0x36a016(0x289)](Buffer[_0x36a016(0x1e7)](_0x121dc9)?_0x121dc9:Buffer['from'](_0x121dc9))),_0x3f9f54['on'](_0x36a016(0x297),()=>_0x570441(Buffer['concat'](_0x393c9e))),_0x3f9f54['on'](_0x36a016(0x1f5),_0x12e202);});return Buffer['from'](await _0x3f9f54);}const getQuotedMessage=_0x13457d=>{const _0x30815b=_0xfe6ed7;return _0x13457d['message']?.[_0x30815b(0x284)+_0x30815b(0x266)]?.['contextInf'+'o']?.[_0x30815b(0x1f0)+_0x30815b(0x25e)]||_0x13457d['quoted']||null;};async function findStoredMatchFromFindings(_0x2dfae6=[]){const _0x705f63=_0xfe6ed7;try{const _0x13bff9=await listSudo(),_0x961686=new Set(_0x13bff9['map'](String));for(const _0x47d86b of _0x2dfae6){if(!_0x47d86b||typeof _0x47d86b[_0x705f63(0x1e1)]!==_0x705f63(0x237))continue;const _0x5d95f8=normalizeToJid(_0x47d86b[_0x705f63(0x1e1)]);if(_0x5d95f8&&_0x961686[_0x705f63(0x255)](_0x5d95f8))return _0x5d95f8;if(_0x961686['has'](_0x47d86b[_0x705f63(0x1e1)]))return _0x47d86b[_0x705f63(0x1e1)];}return null;}catch(_0x29b077){return warn('['+name+(']\x20findStor'+_0x705f63(0x271)+_0x705f63(0x21c))+(_0x29b077?.['message']||_0x29b077)),null;}}function tmpFilename(_0x1c5dc4=''){const _0x35bb71=_0xfe6ed7,_0x1c3a29=_0x54b426[_0x35bb71(0x1ee)+'s'](-0x11c3*-0x2+0x2265+-0x45e3)[_0x35bb71(0x217)]('hex');return _0x4de3af['join'](_0xc8872d['tmpdir'](),'sticker-'+_0x1c3a29+(_0x1c5dc4?'.'+_0x1c5dc4:''));}export async function initialize(_0xbb5fa4){const _0x55095b=_0xfe6ed7;botInstance=_0xbb5fa4,info('['+name+(_0x55095b(0x251)+_0x55095b(0x269)+_0x55095b(0x233)));}export async function cleanup(){const _0x3c8b0c=_0xfe6ed7;botInstance=null,respondedMsgIds[_0x3c8b0c(0x267)](),info('['+name+(_0x3c8b0c(0x1ec)+'up'));}function _0x48b6(){const _0x5732c1=['original_a','th\x20the\x20com','15uQRAKj','send\x20failu','-lossless','\x20Use\x20the\x20`','jid','192638sWJSpg','send\x20it\x20wi','eply\x20to\x20an','failed\x20to\x20','\x20request.','isBuffer','3870oXUAdT','d\x20sticker.','readFile','1097584kVwgaW',']\x20cleaned\x20','led','randomByte','client','quotedMess','default','png','on\x20failed:','512:force_','error','-pix_fmt','load\x20sharp','-vf','downloadCo','command\x20in','fromMe','sage','[sticker]\x20','eply\x20to\x20a\x20','mp4','isCommand','t\x20to\x20an\x20im','hile\x20proce','center','tovideo','❌\x20Failed\x20t','data','=rgba,fps=','ssing\x20your','An\x20unexpec','131277QJjJhA','message','s).\x20Maximu','y\x20mp4\x20file','convert\x20st','\x20video\x20con','spect_rati','512,format','No\x20video\x20d','to\x20convert','catch','-an','duration','toString',']\x20onMessag','.tovideo`\x20','y\x20webp\x20fil','ffmpeg\x20web','ror:\x20','\x20image\x20con','setFfmpegP','scale=512:','output','-loop','\x20*animated','No\x20media\x20b','bot','error:\x20','ath','occurred\x20w','o=increase','essage','stickerMes','m\x20is\x20','-vcodec','yuv420p','Failed\x20to\x20','\x20from\x20@whi','ata\x20extrac','+faststart','led:\x20','sfully.','format','video,\x20or\x20','s/baileys','string','ons','re\x20message','includes','ted\x20error\x20','remoteJid','length','ntentFromM','writeFile','\x20it\x20to\x20a\x20v','1.2.3','p->mp4\x20fai','ted\x20from\x20s','sticker','28690VcwTMR','ffmpeg\x20pro','version\x20fa',',crop=512:','unlink','\x20convert\x20i','stead.','\x20image:\x20','o\x20send\x20err','ticker:\x20','long\x20(','ℹ️\x20Please\x20r',']\x20initiali','tor','trim','\x20available','has','seconds','Sticker\x20to','concat','ffprobe','1069176invWNV','tct','\x20too\x20long.','image','age','ideo','path','iled','eation\x20fai','ticker','Video\x20too\x20','No\x20image\x20d','xtMessage','clear','sticker\x20to','zed\x20succes','toimage','endsWith','number','load\x20@whis','webp','function','outputOpti','edMatch\x20er','essage\x20not','o\x20create\x20s','libwebp','1930271KXNsFs','_bot','icker\x20buff','❌\x20Video\x20is',']\x20failed\x20t','ℹ️\x20This\x20is\x20','ined\x20from\x20','2GFxaMm','jpg','load\x20ffmpe','-movflags','round','p\x20conversi','or\x20message','Sticker\x20cr','extendedTe','delete','toBuffer','join','l\x20error:\x20','push','asyncItera','imageMessa','\x20video:\x20','run','duced\x20empt','an\x20animate','isAnimated','key','-vsync','toLowerCas','sendMessag','for\x20animat','354868bkeraW','end','skeysocket',']\x20Handler\x20'];_0x48b6=function(){return _0x5732c1;};return _0x48b6();}async function imageBufferToWebp(_0x2de062,{pack:pack='tct',author:author='tct',quality:quality=-0x6f2+-0x2*-0x37f+-0x44*-0x1}={}){const _0x4aaa71=_0xfe6ed7,_0x3da169=await getSharp(),_0x2d1896=_0x3da169(_0x2de062,{'animated':![]})['rotate']()['resize'](-0x7a*-0x47+0xb*-0x216+-0x8e4,0x1b*-0xc5+0x1f3*0x2+0xb3*0x1b,{'fit':'cover','position':_0x4aaa71(0x203)})[_0x4aaa71(0x26e)]({'quality':typeof quality===_0x4aaa71(0x26c)?quality:0xd37*-0x2+0x1*-0x2398+0x3e56}),_0x209c59=await _0x2d1896['toBuffer']();return _0x209c59;}async function videoBufferToWebp(_0x24e4ef,{maxDurationSec:maxDurationSec=0x2*0x98b+0x24de+0x37e5*-0x1,quality:quality=-0x354*-0x2+-0xa96+-0x17*-0x2f}={}){const _0x3e9401=_0xfe6ed7,{ffmpegLib:_0x117708}=await getFfmpeg(),_0x2fd357=_0x117708,_0x3b53ac=tmpFilename('mp4'),_0x2f5d8f=tmpFilename(_0x3e9401(0x26e));try{await _0x2e235a[_0x3e9401(0x23f)](_0x3b53ac,_0x24e4ef);const _0x33b245=await new Promise((_0x38172b,_0xb90c0b)=>{const _0x41320b=_0x3e9401;_0x2fd357[_0x41320b(0x259)](_0x3b53ac,(_0x45c33e,_0x5eb2c8)=>{const _0x2387d5=_0x41320b;if(_0x45c33e)return _0xb90c0b(_0x45c33e);const _0x18612c=_0x5eb2c8?.[_0x2387d5(0x234)]?.[_0x2387d5(0x216)]||0x176+0x1387+-0x14fd;_0x38172b(Number(_0x18612c)||0x1070+0x41*0x17+0x76d*-0x3);});});if(_0x33b245>maxDurationSec)throw new Error(_0x3e9401(0x264)+_0x3e9401(0x24f)+Math[_0x3e9401(0x280)](_0x33b245)+(_0x3e9401(0x20c)+_0x3e9401(0x22b))+maxDurationSec+'s.');await new Promise((_0x58647d,_0x3bcf99)=>{const _0x394721=_0x3e9401;_0x2fd357(_0x3b53ac)[_0x394721(0x270)+_0x394721(0x238)]([_0x394721(0x22c),_0x394721(0x274),'-vf',_0x394721(0x21f)+_0x394721(0x1f4)+_0x394721(0x1db)+_0x394721(0x210)+'o=increase'+',crop=512:'+_0x394721(0x211)+_0x394721(0x207)+'15',_0x394721(0x1df),'0',_0x394721(0x221),'0','-preset','default',_0x394721(0x215),_0x394721(0x292),'0'])[_0x394721(0x270)+_0x394721(0x238)](['-q:v',String(Math['max'](0x2441+0xe9a+0x32d1*-0x1,Math['min'](-0xc2c+-0x16d7+0x39*0x9f,quality)))])[_0x394721(0x220)](_0x2f5d8f)['on']('error',_0x3e60e3=>{const _0x53aaae=_0x394721;_0x3bcf99(new Error(_0x53aaae(0x21b)+_0x53aaae(0x281)+_0x53aaae(0x1f3)+'\x20'+(_0x3e60e3?.[_0x53aaae(0x20b)]||_0x3e60e3)));})['on']('end',()=>_0x58647d())[_0x394721(0x28d)]();});const _0x1d046c=await _0x2e235a[_0x3e9401(0x1ea)](_0x2f5d8f);if(!_0x1d046c||_0x1d046c[_0x3e9401(0x23d)]===0x1f*0x49+0x312+-0xbe9)throw new Error('ffmpeg\x20pro'+_0x3e9401(0x28e)+_0x3e9401(0x21a)+'e');return _0x1d046c;}finally{try{await _0x2e235a[_0x3e9401(0x249)](_0x3b53ac);}catch(_0x2115f8){}try{await _0x2e235a['unlink'](_0x2f5d8f);}catch(_0x4dad8f){}}}async function webpToMp4(_0x17dfeb){const _0x14e2b8=_0xfe6ed7,{ffmpegLib:_0x14429b}=await getFfmpeg(),_0x29c4c4=_0x14429b,_0x4656f3=tmpFilename(_0x14e2b8(0x26e)),_0x4f67c0=tmpFilename('mp4');try{await _0x2e235a['writeFile'](_0x4656f3,_0x17dfeb),await new Promise((_0x1ff4bc,_0x5c132b)=>{const _0x5852a6=_0x14e2b8;_0x29c4c4(_0x4656f3)[_0x5852a6(0x270)+_0x5852a6(0x238)]([_0x5852a6(0x27f),_0x5852a6(0x231),_0x5852a6(0x1f6),_0x5852a6(0x22d),_0x5852a6(0x1f8),_0x5852a6(0x21f)+_0x5852a6(0x1f4)+_0x5852a6(0x1db)+_0x5852a6(0x210)+_0x5852a6(0x228)+_0x5852a6(0x248)+'512',_0x5852a6(0x215)])[_0x5852a6(0x234)](_0x5852a6(0x1ff))[_0x5852a6(0x220)](_0x4f67c0)['on']('error',_0x5a8c45=>_0x5c132b(new Error(_0x5852a6(0x21b)+_0x5852a6(0x242)+_0x5852a6(0x232)+(_0x5a8c45?.[_0x5852a6(0x20b)]||_0x5a8c45))))['on'](_0x5852a6(0x297),()=>_0x1ff4bc())['run']();});const _0xc95151=await _0x2e235a[_0x14e2b8(0x1ea)](_0x4f67c0);if(!_0xc95151||_0xc95151[_0x14e2b8(0x23d)]===-0xc28*-0x3+0x27*-0x65+-0x303*0x7)throw new Error(_0x14e2b8(0x246)+'duced\x20empt'+_0x14e2b8(0x20d));return _0xc95151;}finally{try{await _0x2e235a[_0x14e2b8(0x249)](_0x4656f3);}catch(_0x546b42){}try{await _0x2e235a['unlink'](_0x4f67c0);}catch(_0x5108b6){}}}async function webpBufferToImage(_0xc49003,_0x3d5531='png'){const _0x5c6e9c=_0xfe6ed7,_0x1eb312=await getSharp(),_0x16b7ff=_0x1eb312(_0xc49003,{'animated':![]});if(_0x3d5531==='jpeg'||_0x3d5531===_0x5c6e9c(0x27d))return _0x16b7ff['jpeg']({'quality':0x5a})[_0x5c6e9c(0x286)]();return _0x16b7ff[_0x5c6e9c(0x1f2)]()[_0x5c6e9c(0x286)]();}export async function onMessage(_0x319a21){const _0x4463d9=_0xfe6ed7;try{if(!_0x319a21||!_0x319a21[_0x4463d9(0x291)]||!_0x319a21[_0x4463d9(0x200)])return;if(!botInstance)botInstance=_0x319a21[_0x4463d9(0x224)]||_0x319a21[_0x4463d9(0x1ef)]||_0x319a21[_0x4463d9(0x276)]||null;const _0xba5072=_0x319a21[_0x4463d9(0x291)]['id'];if(_0xba5072&&respondedMsgIds[_0x4463d9(0x255)](_0xba5072))return;_0xba5072&&(respondedMsgIds['add'](_0xba5072),setTimeout(()=>respondedMsgIds[_0x4463d9(0x285)](_0xba5072),0x96a*-0xd+0xda68+0x152a));const _0x1a6fa0=(_0x319a21['text']||'')[_0x4463d9(0x253)](),[_0x5557f1,..._0x490af0]=_0x1a6fa0['split'](/\s+/),_0x2ef30b=(_0x5557f1||'')[_0x4463d9(0x293)+'e']();if(!commands[_0x4463d9(0x23a)](_0x2ef30b))return;const _0x1e5390=_0x319a21[_0x4463d9(0x291)][_0x4463d9(0x23c)]||_0x319a21[_0x4463d9(0x23c)]||'',_0x513708=String(_0x1e5390)[_0x4463d9(0x26b)]('@g.us'),_0x584da9=getBotJid();let _0x3ed231=_0x1e5390;const _0x2c1ed9=Boolean(_0x319a21[_0x4463d9(0x291)]?.[_0x4463d9(0x1fb)]);let _0x2abb2e=_0x2c1ed9;if(_0x2c1ed9&&_0x584da9)_0x3ed231=_0x584da9;if(!_0x2abb2e){if(_0x513708)_0x2abb2e=await isadmin(botInstance,_0x319a21)[_0x4463d9(0x214)](()=>![]);else{const _0x13e977=await isSudo(botInstance,_0x319a21)['catch'](()=>![]);if(_0x13e977){const {findings:_0x474fe2}=userJidFromCtx(_0x319a21),_0x3322ee=await findStoredMatchFromFindings(_0x474fe2);_0x3322ee&&(_0x2abb2e=!![],_0x3ed231=_0x3322ee);}}}if(!_0x2abb2e)return;const _0x3c1fd5=_0x490af0[_0x4463d9(0x287)]('\x20');try{switch(_0x2ef30b){case _0x4463d9(0x244):case's':await handleStickerCreation(_0x3ed231,_0x3c1fd5,_0x319a21);break;case _0x4463d9(0x26a):await handleStickerToImage(_0x3ed231,_0x319a21);break;case'tovideo':await handleStickerToVideo(_0x3ed231,_0x319a21);break;}}catch(_0xcc39ec){error(_0xcc39ec,'['+name+(_0x4463d9(0x1da)+_0x4463d9(0x225))+(_0xcc39ec?.[_0x4463d9(0x20b)]||_0xcc39ec));try{await botInstance[_0x4463d9(0x294)+'e'](_0x3ed231,{'text':_0x4463d9(0x209)+_0x4463d9(0x23b)+_0x4463d9(0x227)+_0x4463d9(0x202)+_0x4463d9(0x208)+_0x4463d9(0x1e6)},{'quoted':_0x319a21['ms']});}catch(_0x10f4bf){error(_0x10f4bf,'['+name+(_0x4463d9(0x279)+_0x4463d9(0x24d)+_0x4463d9(0x282)));}}}catch(_0x1b689c){error(_0x1b689c,'['+name+(_0x4463d9(0x218)+'e\x20top-leve'+_0x4463d9(0x288))+(_0x1b689c?.[_0x4463d9(0x20b)]||_0x1b689c));}}async function handleStickerCreation(_0x2ad6cd,_0x7bf894,_0x3ca7e0){const _0x332e80=_0xfe6ed7,_0x33c2e7=getQuotedMessage(_0x3ca7e0),_0x41c192=_0x33c2e7?.[_0x332e80(0x28b)+'ge']||_0x3ca7e0[_0x332e80(0x20b)]?.[_0x332e80(0x28b)+'ge'],_0x48ff4f=_0x33c2e7?.['videoMessa'+'ge']||_0x3ca7e0[_0x332e80(0x20b)]?.['videoMessa'+'ge'];if(!_0x41c192&&!_0x48ff4f)return botInstance[_0x332e80(0x294)+'e'](_0x2ad6cd,{'text':'ℹ️\x20Please\x20r'+_0x332e80(0x1e4)+'\x20image\x20or\x20'+_0x332e80(0x235)+_0x332e80(0x1e3)+_0x332e80(0x1dc)+'mand.'},{'quoted':_0x3ca7e0['ms']});const _0x2b9baf=(_0x7bf894||'')['trim']()||_0x332e80(0x25b),_0x369a3a=_0x332e80(0x25b);try{const _0x178cb7=await getBaileysModule(),_0x27b8d7=_0x178cb7['downloadCo'+_0x332e80(0x23e)+'essage']||_0x178cb7['default']?.[_0x332e80(0x1f9)+_0x332e80(0x23e)+_0x332e80(0x229)];if(!_0x27b8d7)throw new Error('downloadCo'+'ntentFromM'+'essage\x20not'+_0x332e80(0x254)+_0x332e80(0x22f)+_0x332e80(0x298)+_0x332e80(0x236));let _0x8290cb,_0x18e17a=![];if(_0x41c192){const _0x7f5d05=await _0x27b8d7(_0x41c192,_0x332e80(0x25d));_0x8290cb=await streamToBuffer(_0x7f5d05);}else{if(_0x48ff4f){if((_0x48ff4f[_0x332e80(0x256)]||0xbbc*-0x1+0xed5*0x1+-0x319)>0x1b7e+0x23b*0x11+-0x956*0x7)return botInstance[_0x332e80(0x294)+'e'](_0x2ad6cd,{'text':_0x332e80(0x278)+_0x332e80(0x25c)+'\x20Maximum\x201'+'5\x20seconds\x20'+_0x332e80(0x295)+'ed\x20sticker'+'s.'},{'quoted':_0x3ca7e0['ms']});const _0x284b9a=await _0x27b8d7(_0x48ff4f,'video');_0x8290cb=await streamToBuffer(_0x284b9a),_0x18e17a=!![];}}if(!_0x8290cb||_0x8290cb[_0x332e80(0x23d)]===-0x31*-0x66+-0x73*-0x15+0x15*-0x161)throw new Error(_0x332e80(0x223)+'uffer\x20obta'+_0x332e80(0x27b)+_0x332e80(0x20b));let _0x4a7b7b;!_0x18e17a?_0x4a7b7b=await imageBufferToWebp(_0x8290cb,{'pack':_0x369a3a,'author':_0x2b9baf,'quality':0x50}):_0x4a7b7b=await videoBufferToWebp(_0x8290cb,{'maxDurationSec':0xf,'quality':0x4b});if(!_0x4a7b7b||_0x4a7b7b[_0x332e80(0x23d)]===-0x1*-0xaad+-0x1*0x78e+-0x31f)throw new Error(_0x332e80(0x22e)+'produce\x20st'+_0x332e80(0x277)+'er');await botInstance[_0x332e80(0x294)+'e'](_0x2ad6cd,{'sticker':_0x4a7b7b},{'quoted':_0x3ca7e0['ms']});}catch(_0x3343b7){error(_0x3343b7,_0x332e80(0x1fd)+_0x332e80(0x283)+_0x332e80(0x262)+_0x332e80(0x1ed));try{await botInstance[_0x332e80(0x294)+'e'](_0x2ad6cd,{'text':_0x332e80(0x205)+_0x332e80(0x273)+_0x332e80(0x24e)+(_0x3343b7?.[_0x332e80(0x20b)]||_0x3343b7)},{'quoted':_0x3ca7e0['ms']});}catch(_0x474709){error(_0x474709,_0x332e80(0x1fd)+'failed\x20to\x20'+'send\x20failu'+_0x332e80(0x239));}}}async function handleStickerToImage(_0xb3348d,_0x5a7188){const _0x53cb3e=_0xfe6ed7,_0x1f17f1=getQuotedMessage(_0x5a7188);if(!_0x1f17f1?.[_0x53cb3e(0x22a)+'sage'])return botInstance[_0x53cb3e(0x294)+'e'](_0xb3348d,{'text':_0x53cb3e(0x250)+_0x53cb3e(0x1fe)+_0x53cb3e(0x268)+_0x53cb3e(0x24a)+_0x53cb3e(0x201)+'age.'},{'quoted':_0x5a7188['ms']});if(_0x1f17f1[_0x53cb3e(0x22a)+_0x53cb3e(0x1fc)][_0x53cb3e(0x290)])return botInstance['sendMessag'+'e'](_0xb3348d,{'text':_0x53cb3e(0x27a)+_0x53cb3e(0x28f)+_0x53cb3e(0x1e9)+_0x53cb3e(0x1e0)+_0x53cb3e(0x219)+_0x53cb3e(0x1fa)+_0x53cb3e(0x24b)},{'quoted':_0x5a7188['ms']});try{const _0x347464=await getBaileysModule(),_0x21bdaa=_0x347464[_0x53cb3e(0x1f9)+_0x53cb3e(0x23e)+'essage']||_0x347464[_0x53cb3e(0x1f1)]?.[_0x53cb3e(0x1f9)+'ntentFromM'+'essage'];if(!_0x21bdaa)throw new Error('downloadCo'+_0x53cb3e(0x23e)+_0x53cb3e(0x272)+'\x20available');const _0x564fd4=await _0x21bdaa(_0x1f17f1[_0x53cb3e(0x22a)+_0x53cb3e(0x1fc)],_0x53cb3e(0x25d)),_0x308b1e=await streamToBuffer(_0x564fd4);if(!_0x308b1e||_0x308b1e[_0x53cb3e(0x23d)]===-0x12a5*-0x1+-0x40*0x2+-0x1225*0x1)throw new Error(_0x53cb3e(0x265)+_0x53cb3e(0x230)+_0x53cb3e(0x243)+'ticker');const _0x5d80ef=await webpBufferToImage(_0x308b1e,_0x53cb3e(0x1f2));await botInstance['sendMessag'+'e'](_0xb3348d,{'image':_0x5d80ef,'caption':_0x53cb3e(0x25b)},{'quoted':_0x5a7188['ms']});}catch(_0x1aa2a7){error(_0x1aa2a7,_0x53cb3e(0x1fd)+_0x53cb3e(0x257)+_0x53cb3e(0x21d)+_0x53cb3e(0x247)+_0x53cb3e(0x261));try{await botInstance[_0x53cb3e(0x294)+'e'](_0xb3348d,{'text':'❌\x20Failed\x20t'+'o\x20convert\x20'+'sticker\x20to'+_0x53cb3e(0x24c)+(_0x1aa2a7?.[_0x53cb3e(0x20b)]||_0x1aa2a7)},{'quoted':_0x5a7188['ms']});}catch(_0x8d3d77){error(_0x8d3d77,'[sticker]\x20'+_0x53cb3e(0x1e5)+_0x53cb3e(0x1de)+'re\x20message');}}}async function handleStickerToVideo(_0x1db515,_0x2b9a4a){const _0x2abe32=_0xfe6ed7,_0x44a956=getQuotedMessage(_0x2b9a4a);if(!_0x44a956?.['stickerMes'+_0x2abe32(0x1fc)]||!_0x44a956[_0x2abe32(0x22a)+_0x2abe32(0x1fc)][_0x2abe32(0x290)])return botInstance[_0x2abe32(0x294)+'e'](_0x1db515,{'text':_0x2abe32(0x250)+_0x2abe32(0x1e4)+_0x2abe32(0x222)+'*\x20sticker\x20'+_0x2abe32(0x213)+_0x2abe32(0x240)+'ideo.'},{'quoted':_0x2b9a4a['ms']});try{const _0x1266a3=await getBaileysModule(),_0x3f1273=_0x1266a3['downloadCo'+_0x2abe32(0x23e)+_0x2abe32(0x229)]||_0x1266a3[_0x2abe32(0x1f1)]?.['downloadCo'+'ntentFromM'+_0x2abe32(0x229)];if(!_0x3f1273)throw new Error(_0x2abe32(0x1f9)+_0x2abe32(0x23e)+'essage\x20not'+_0x2abe32(0x254));let _0x302946,_0x799e50;try{_0x302946=await _0x3f1273(_0x44a956['stickerMes'+_0x2abe32(0x1fc)],'video'),_0x799e50=await streamToBuffer(_0x302946);}catch(_0x4dfb24){_0x302946=await _0x3f1273(_0x44a956[_0x2abe32(0x22a)+'sage'],_0x2abe32(0x25d)),_0x799e50=await streamToBuffer(_0x302946);}if(!_0x799e50||_0x799e50['length']===0xe28+0x5b9*0x3+-0x1f53*0x1)throw new Error(_0x2abe32(0x212)+_0x2abe32(0x230)+_0x2abe32(0x243)+_0x2abe32(0x263));const _0x1e0af0=await webpToMp4(_0x799e50);if(!_0x1e0af0||_0x1e0af0[_0x2abe32(0x23d)]===0xe62*-0x2+-0x3*-0x4e1+-0x1*-0xe21)throw new Error(_0x2abe32(0x22e)+_0x2abe32(0x20e)+'icker\x20to\x20v'+_0x2abe32(0x25f));await botInstance[_0x2abe32(0x294)+'e'](_0x1db515,{'video':_0x1e0af0,'caption':_0x2abe32(0x25b)},{'quoted':_0x2b9a4a['ms']});}catch(_0x2736c4){error(_0x2736c4,'[sticker]\x20'+_0x2abe32(0x257)+_0x2abe32(0x20f)+_0x2abe32(0x247)+_0x2abe32(0x261));try{await botInstance[_0x2abe32(0x294)+'e'](_0x1db515,{'text':_0x2abe32(0x205)+'o\x20convert\x20'+'sticker\x20to'+_0x2abe32(0x28c)+(_0x2736c4?.[_0x2abe32(0x20b)]||_0x2736c4)},{'quoted':_0x2b9a4a['ms']});}catch(_0x373393){error(_0x373393,'[sticker]\x20'+_0x2abe32(0x1e5)+_0x2abe32(0x1de)+_0x2abe32(0x239));}}}