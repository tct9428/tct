const _0xfd65ed=_0x4345;(function(_0x96e3,_0x2bf843){const _0x3f4b97=_0x4345,_0x5e2931=_0x96e3();while(!![]){try{const _0x296145=-parseInt(_0x3f4b97(0x183))/(-0xd06*0x1+-0x1dcd+0x2ad4)+-parseInt(_0x3f4b97(0x1ed))/(0x2477+-0x9ee*0x2+-0x1099)+parseInt(_0x3f4b97(0x16c))/(0x2553+0x1b56+0x40a6*-0x1)*(parseInt(_0x3f4b97(0x182))/(-0x1*-0x17d5+-0x741+-0x1090))+-parseInt(_0x3f4b97(0x1da))/(-0x69*0x2a+-0x11*-0xfa+0x3*0x37)*(parseInt(_0x3f4b97(0x1c4))/(0x1*0x270b+0x1b1f+-0x3e4*0x11))+parseInt(_0x3f4b97(0x1e6))/(-0x1*0x176d+-0x6*0x3f9+0x2f4a)+parseInt(_0x3f4b97(0x1a0))/(-0x9ee+0x1f*-0x116+0x1*0x2ba0)+parseInt(_0x3f4b97(0x184))/(0x1055*-0x1+-0xf3c+0x1f9a)*(parseInt(_0x3f4b97(0x190))/(-0xe6e+0x112d+-0x2b5));if(_0x296145===_0x2bf843)break;else _0x5e2931['push'](_0x5e2931['shift']());}catch(_0x1c1eb7){_0x5e2931['push'](_0x5e2931['shift']());}}}(_0xff99,0x837*0xaf+0x18b*-0xdbd+0x1b46f5));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';function _0x4345(_0x19f887,_0x2fea9f){const _0x4fcd27=_0xff99();return _0x4345=function(_0x755978,_0x35b40a){_0x755978=_0x755978-(0x1820+0x54*0x24+0x2*-0x114e);let _0x18033b=_0x4fcd27[_0x755978];return _0x18033b;},_0x4345(_0x19f887,_0x2fea9f);}import{Readable}from'stream';import _0x2826e4 from'fs/promises';import _0x258f6f from'os';import _0x3a16dc from'path';import _0x98e0f3 from'crypto';export const name=_0xfd65ed(0x16e);export const version=_0xfd65ed(0x1d6);export const priority=-0x2110+0x277*0x2+0x1c2c;export const commands=[_0xfd65ed(0x16e),'s','toimage',_0xfd65ed(0x199)];let botInstance=null,respondedMsgIds=new Set(),_baileysModule=null,_sharp=null,_ffmpegInstaller=null,_fluentFfmpeg=null;async function getBaileysModule(){const _0x48c6dc=_0xfd65ed;if(_baileysModule)return _baileysModule;try{return _baileysModule=await import('@whiskeysockets/baileys'),_baileysModule;}catch(_0x12364d){throw new Error(_0x48c6dc(0x1f5)+_0x48c6dc(0x1cf)+_0x48c6dc(0x189)+_0x48c6dc(0x198)+_0x12364d[_0x48c6dc(0x162)]);}}async function getSharp(){const _0x20a8cd=_0xfd65ed;if(_sharp)return _sharp;try{const _0x566c5f=await import('sharp');return _sharp=_0x566c5f[_0x20a8cd(0x1b6)]||_0x566c5f,_sharp;}catch(_0xfa264a){throw new Error(_0x20a8cd(0x1f5)+_0x20a8cd(0x1af)+':\x20'+_0xfa264a[_0x20a8cd(0x162)]);}}async function getFfmpeg(){const _0x1c42fa=_0xfd65ed;if(_ffmpegInstaller&&_fluentFfmpeg)return{'ffmpegPath':_ffmpegInstaller[_0x1c42fa(0x1ac)],'ffmpegLib':_fluentFfmpeg};try{const _0x5d89c4=await import('@ffmpeg-installer/ffmpeg'),_0x2e3141=await import('fluent-ffmpeg');_ffmpegInstaller=_0x5d89c4['default']||_0x5d89c4,_fluentFfmpeg=_0x2e3141[_0x1c42fa(0x1b6)]||_0x2e3141;try{_fluentFfmpeg[_0x1c42fa(0x20d)+_0x1c42fa(0x1f0)](_ffmpegInstaller[_0x1c42fa(0x1ac)]);}catch(_0x1f719a){}return{'ffmpegPath':_ffmpegInstaller['path'],'ffmpegLib':_fluentFfmpeg};}catch(_0x56607b){throw new Error('Failed\x20to\x20'+_0x1c42fa(0x1cd)+'g\x20tools:\x20'+_0x56607b[_0x1c42fa(0x162)]);}}async function streamToBuffer(_0x467ca0){const _0x4cb7db=_0xfd65ed;if(!_0x467ca0)return Buffer[_0x4cb7db(0x1b2)](-0x2070+-0x1*-0x624+-0x462*-0x6);if(typeof _0x467ca0[Symbol[_0x4cb7db(0x172)+_0x4cb7db(0x1aa)]]===_0x4cb7db(0x1f3)){const _0x2b2717=[];for await(const _0xa1f1dd of _0x467ca0){_0x2b2717[_0x4cb7db(0x1e5)](Buffer[_0x4cb7db(0x15f)](_0xa1f1dd)?_0xa1f1dd:Buffer[_0x4cb7db(0x20b)](_0xa1f1dd));}return Buffer[_0x4cb7db(0x1bc)](_0x2b2717);}if(typeof _0x467ca0['on']===_0x4cb7db(0x1f3))return new Promise((_0x249468,_0xaed9ce)=>{const _0x3357d7=_0x4cb7db,_0x5bd172=[];_0x467ca0['on']('data',_0x167b4e=>_0x5bd172['push'](Buffer[_0x3357d7(0x15f)](_0x167b4e)?_0x167b4e:Buffer[_0x3357d7(0x20b)](_0x167b4e))),_0x467ca0['on'](_0x3357d7(0x15d),()=>_0x249468(Buffer['concat'](_0x5bd172))),_0x467ca0['on']('error',_0xaed9ce);});return Buffer['from'](await _0x467ca0);}const getQuotedMessage=_0x512898=>{const _0x1fe96f=_0xfd65ed;return _0x512898[_0x1fe96f(0x162)]?.[_0x1fe96f(0x1f8)+_0x1fe96f(0x1fb)]?.['contextInf'+'o']?.[_0x1fe96f(0x19a)+'age']||_0x512898[_0x1fe96f(0x17e)]||null;};async function findStoredMatchFromFindings(_0x233ff8=[]){const _0xf0c1d4=_0xfd65ed;try{const _0x126a0b=await listSudo(),_0x30f6b8=new Set(_0x126a0b[_0xf0c1d4(0x1e3)](String));for(const _0x248e8c of _0x233ff8){if(!_0x248e8c||typeof _0x248e8c[_0xf0c1d4(0x1ad)]!==_0xf0c1d4(0x1e2))continue;const _0x2920e4=normalizeToJid(_0x248e8c['jid']);if(_0x2920e4&&_0x30f6b8[_0xf0c1d4(0x212)](_0x2920e4))return _0x2920e4;if(_0x30f6b8[_0xf0c1d4(0x212)](_0x248e8c[_0xf0c1d4(0x1ad)]))return _0x248e8c[_0xf0c1d4(0x1ad)];}return null;}catch(_0x3f7179){return warn('['+name+(_0xf0c1d4(0x1ea)+'edMatch\x20er'+'ror:\x20')+(_0x3f7179?.['message']||_0x3f7179)),null;}}function tmpFilename(_0x2b465c=''){const _0x37e3cc=_0xfd65ed,_0x118000=_0x98e0f3['randomByte'+'s'](0x2626+0x3*-0x92c+-0xa9a)[_0x37e3cc(0x1a1)](_0x37e3cc(0x1c5));return _0x3a16dc[_0x37e3cc(0x164)](_0x258f6f[_0x37e3cc(0x1eb)](),'sticker-'+_0x118000+(_0x2b465c?'.'+_0x2b465c:''));}export async function initialize(_0x1f55a0){const _0x6b54c=_0xfd65ed;botInstance=_0x1f55a0,info('['+name+(_0x6b54c(0x20a)+_0x6b54c(0x1c0)+_0x6b54c(0x185)));}export async function cleanup(){const _0x1ee4f9=_0xfd65ed;botInstance=null,respondedMsgIds[_0x1ee4f9(0x1bb)](),info('['+name+(_0x1ee4f9(0x1d1)+'up'));}async function imageBufferToWebp(_0xa456e0,{pack:pack=_0xfd65ed(0x1ec),author:author=_0xfd65ed(0x1ec),quality:quality=0x3ab+-0x1682+0x1*0x1327}={}){const _0xcf7d68=_0xfd65ed,_0x17c856=await getSharp(),_0x1e9d0c=_0x17c856(_0xa456e0,{'animated':![]})['rotate']()['resize'](-0x176e+0x5fc+0x83*0x26,0x15*0x1c1+-0xa*-0x65+0x1*-0x26c7,{'fit':'cover','position':_0xcf7d68(0x186)})[_0xcf7d68(0x1dc)]({'quality':typeof quality===_0xcf7d68(0x16f)?quality:0x42f*-0x1+0x2221*0x1+-0x1da2}),_0xca02d7=await _0x1e9d0c['toBuffer']();return _0xca02d7;}function _0xff99(){const _0x9489b6=['bot','13495JaEDxE','\x20Maximum\x201','webp','image','duced\x20empt','Sticker\x20to','yuv420p','ideo','string','map','min','push','4701039KuxOKt','s/baileys','s).\x20Maximu','ffmpeg\x20web',']\x20findStor','tmpdir','tct','1042994vTGPYI','\x20available','format','ath','o\x20create\x20s','_bot','function','o=increase','Failed\x20to\x20','essage','includes','extendedTe','[sticker]\x20','age.','xtMessage','icker\x20to\x20v','iled','-q:v','output','o\x20convert\x20','occurred\x20w','ticker','@g.us','video,\x20or\x20','-preset','led','-an','No\x20image\x20d','split',']\x20initiali','from','512','setFfmpegP','ined\x20from\x20','essage\x20not','sendMessag','❌\x20Failed\x20t','has','m\x20is\x20','ℹ️\x20This\x20is\x20','\x20too\x20long.','unlink','\x20it\x20to\x20a\x20v','=rgba,fps=','\x20video:\x20','re\x20message','for\x20animat','\x20image:\x20','end','\x20video\x20con','isBuffer','th\x20the\x20com','*\x20sticker\x20','message','libwebp','join','isAnimated','ticker:\x20','downloadCo','duration','Video\x20too\x20','on\x20failed:','\x20from\x20@whi','33051WlbpKp','toBuffer','sticker','number','max','stead.','asyncItera','video','led:\x20','stickerMes','ffprobe','y\x20mp4\x20file','-lossless','mand.','an\x20animate','\x20convert\x20i','+faststart','eply\x20to\x20an','quoted','imageMessa','sticker\x20to','Sticker\x20cr','20yjfOvz','869555RRhYSi','9lXIfzt','sfully.','center','uffer\x20obta','\x20image\x20con','keysockets','ntentFromM','-loop',',crop=512:','scale=512:','l\x20error:\x20','o\x20send\x20err','18982570DJilEf','readFile','\x20image\x20or\x20','convert\x20st','videoMessa','seconds','-vsync','catch','/baileys:\x20','tovideo','quotedMess','endsWith','send\x20failu','mp4','❌\x20Video\x20is','ℹ️\x20Please\x20r','4638336MvdEbT','toString','512:force_','command\x20in','hile\x20proce','toimage','sage','ata\x20extrac','ideo.','p\x20conversi','tor','version\x20fa','path','jid','delete','load\x20sharp','-pix_fmt','spect_rati','alloc','text','jpg','key','default','round','e\x20top-leve','icker\x20buff','long\x20(','clear','concat','toLowerCas','ed\x20sticker','png','zed\x20succes','original_a','run','trim','2328QyuGsg','hex','ons','error','An\x20unexpec','to\x20convert','-movflags','outputOpti','skeysocket','load\x20ffmpe','No\x20media\x20b','load\x20@whis','length',']\x20cleaned\x20','.tovideo`\x20','ted\x20from\x20s','client','isCommand','1.2.3','-vf','ffmpeg\x20pro'];_0xff99=function(){return _0x9489b6;};return _0xff99();}async function videoBufferToWebp(_0xfc9334,{maxDurationSec:maxDurationSec=0x16b5*0x1+-0x1c70+0x5ca,quality:quality=0x1*-0x2626+-0xa38*-0x1+-0x55*-0x55}={}){const _0x1f8752=_0xfd65ed,{ffmpegLib:_0x2401ad}=await getFfmpeg(),_0x3bde8a=_0x2401ad,_0x261561=tmpFilename(_0x1f8752(0x19d)),_0x4b4252=tmpFilename(_0x1f8752(0x1dc));try{await _0x2826e4['writeFile'](_0x261561,_0xfc9334);const _0x581db0=await new Promise((_0x9eabc4,_0x5ba2b5)=>{const _0x3304ae=_0x1f8752;_0x3bde8a[_0x3304ae(0x176)](_0x261561,(_0x2cb5d2,_0x3b3a8e)=>{const _0x2837a6=_0x3304ae;if(_0x2cb5d2)return _0x5ba2b5(_0x2cb5d2);const _0x33b11a=_0x3b3a8e?.[_0x2837a6(0x1ef)]?.[_0x2837a6(0x168)]||0xc89+-0x218d+0x1504;_0x9eabc4(Number(_0x33b11a)||-0x29f+0x1312*-0x1+0x15b1);});});if(_0x581db0>maxDurationSec)throw new Error(_0x1f8752(0x169)+_0x1f8752(0x1ba)+Math[_0x1f8752(0x1b7)](_0x581db0)+(_0x1f8752(0x1e8)+_0x1f8752(0x213))+maxDurationSec+'s.');await new Promise((_0x55cd12,_0x5966b1)=>{const _0x480165=_0x1f8752;_0x3bde8a(_0x261561)[_0x480165(0x1cb)+_0x480165(0x1c6)](['-vcodec',_0x480165(0x163),'-vf',_0x480165(0x18d)+_0x480165(0x1a2)+_0x480165(0x1c1)+_0x480165(0x1b1)+_0x480165(0x1f4)+',crop=512:'+'512,format'+_0x480165(0x158)+'15',_0x480165(0x178),'0',_0x480165(0x18b),'0',_0x480165(0x205),_0x480165(0x1b6),_0x480165(0x207),_0x480165(0x196),'0'])['outputOpti'+_0x480165(0x1c6)]([_0x480165(0x1fe),String(Math[_0x480165(0x170)](0x1*0x25ff+0x35e*0x7+-0x3d87*0x1,Math[_0x480165(0x1e4)](0x124e+-0x4c*-0x42+-0x12c1*0x2,quality)))])[_0x480165(0x1ff)](_0x4b4252)['on'](_0x480165(0x1c7),_0xa3a2e4=>{const _0x3639f=_0x480165;_0x5966b1(new Error(_0x3639f(0x1e9)+_0x3639f(0x1a9)+_0x3639f(0x16a)+'\x20'+(_0xa3a2e4?.[_0x3639f(0x162)]||_0xa3a2e4)));})['on'](_0x480165(0x15d),()=>_0x55cd12())[_0x480165(0x1c2)]();});const _0x3c65bc=await _0x2826e4[_0x1f8752(0x191)](_0x4b4252);if(!_0x3c65bc||_0x3c65bc[_0x1f8752(0x1d0)]===0x1759+0x3*0x9e3+-0x3502)throw new Error(_0x1f8752(0x1d8)+_0x1f8752(0x1de)+'y\x20webp\x20fil'+'e');return _0x3c65bc;}finally{try{await _0x2826e4['unlink'](_0x261561);}catch(_0x1028d6){}try{await _0x2826e4[_0x1f8752(0x156)](_0x4b4252);}catch(_0x1b96cb){}}}async function webpToMp4(_0x3976f1){const _0x4c0700=_0xfd65ed,{ffmpegLib:_0x4c163e}=await getFfmpeg(),_0x879b7e=_0x4c163e,_0x3eb4c4=tmpFilename('webp'),_0x31969c=tmpFilename(_0x4c0700(0x19d));try{await _0x2826e4['writeFile'](_0x3eb4c4,_0x3976f1),await new Promise((_0x1311ed,_0x1c042b)=>{const _0x24d8d0=_0x4c0700;_0x879b7e(_0x3eb4c4)[_0x24d8d0(0x1cb)+_0x24d8d0(0x1c6)]([_0x24d8d0(0x1ca),_0x24d8d0(0x17c),_0x24d8d0(0x1b0),_0x24d8d0(0x1e0),_0x24d8d0(0x1d7),_0x24d8d0(0x18d)+_0x24d8d0(0x1a2)+'original_a'+_0x24d8d0(0x1b1)+_0x24d8d0(0x1f4)+_0x24d8d0(0x18c)+_0x24d8d0(0x20c),'-an'])[_0x24d8d0(0x1ef)]('mp4')[_0x24d8d0(0x1ff)](_0x31969c)['on'](_0x24d8d0(0x1c7),_0x2d7729=>_0x1c042b(new Error(_0x24d8d0(0x1e9)+'p->mp4\x20fai'+_0x24d8d0(0x174)+(_0x2d7729?.[_0x24d8d0(0x162)]||_0x2d7729))))['on']('end',()=>_0x1311ed())['run']();});const _0x4bdba6=await _0x2826e4[_0x4c0700(0x191)](_0x31969c);if(!_0x4bdba6||_0x4bdba6[_0x4c0700(0x1d0)]===0x1f*0x33+-0x9b9*-0x1+-0xfe6)throw new Error('ffmpeg\x20pro'+_0x4c0700(0x1de)+_0x4c0700(0x177));return _0x4bdba6;}finally{try{await _0x2826e4['unlink'](_0x3eb4c4);}catch(_0x1b9cb1){}try{await _0x2826e4[_0x4c0700(0x156)](_0x31969c);}catch(_0x3c73cc){}}}async function webpBufferToImage(_0x5365ce,_0x3ffddf=_0xfd65ed(0x1bf)){const _0x5c8675=_0xfd65ed,_0x5de534=await getSharp(),_0x25f0ae=_0x5de534(_0x5365ce,{'animated':![]});if(_0x3ffddf==='jpeg'||_0x3ffddf===_0x5c8675(0x1b4))return _0x25f0ae['jpeg']({'quality':0x5a})[_0x5c8675(0x16d)]();return _0x25f0ae[_0x5c8675(0x1bf)]()['toBuffer']();}export async function onMessage(_0x118380){const _0x56e021=_0xfd65ed;try{if(!_0x118380||!_0x118380[_0x56e021(0x1b5)]||!_0x118380[_0x56e021(0x1d5)])return;if(!botInstance)botInstance=_0x118380[_0x56e021(0x1d9)]||_0x118380[_0x56e021(0x1d4)]||_0x118380[_0x56e021(0x1f2)]||null;const _0x448370=_0x118380['key']['id'];if(_0x448370&&respondedMsgIds[_0x56e021(0x212)](_0x448370))return;_0x448370&&(respondedMsgIds['add'](_0x448370),setTimeout(()=>respondedMsgIds[_0x56e021(0x1ae)](_0x448370),-0xe24+0x148*0x7c+-0x29*0xac));const _0x29985a=(_0x118380[_0x56e021(0x1b3)]||'')[_0x56e021(0x1c3)](),[_0x5cfd2c,..._0x3e6167]=_0x29985a[_0x56e021(0x209)](/\s+/),_0x3c5c7e=(_0x5cfd2c||'')[_0x56e021(0x1bd)+'e']();if(!commands[_0x56e021(0x1f7)](_0x3c5c7e))return;const _0x1a70c1=_0x118380[_0x56e021(0x1b5)]['remoteJid']||_0x118380['remoteJid']||'',_0x1cbdea=String(_0x1a70c1)[_0x56e021(0x19b)](_0x56e021(0x203)),_0x1a007d=getBotJid();let _0x39d540=_0x1a70c1;const _0x3a3e37=Boolean(_0x118380[_0x56e021(0x1b5)]?.['fromMe']);let _0x336ce6=_0x3a3e37;if(_0x3a3e37&&_0x1a007d)_0x39d540=_0x1a007d;if(!_0x336ce6){if(_0x1cbdea)_0x336ce6=await isadmin(botInstance,_0x118380)[_0x56e021(0x197)](()=>![]);else{const _0x15cc68=await isSudo(botInstance,_0x118380)['catch'](()=>![]);if(_0x15cc68){const {findings:_0x1602a7}=userJidFromCtx(_0x118380),_0x50dbf9=await findStoredMatchFromFindings(_0x1602a7);_0x50dbf9&&(_0x336ce6=!![],_0x39d540=_0x50dbf9);}}}if(!_0x336ce6)return;const _0x141ea6=_0x3e6167['join']('\x20');try{switch(_0x3c5c7e){case _0x56e021(0x16e):case's':await handleStickerCreation(_0x39d540,_0x141ea6,_0x118380);break;case _0x56e021(0x1a5):await handleStickerToImage(_0x39d540,_0x118380);break;case _0x56e021(0x199):await handleStickerToVideo(_0x39d540,_0x118380);break;}}catch(_0x5df633){error(_0x5df633,'['+name+(']\x20Handler\x20'+'error:\x20')+(_0x5df633?.[_0x56e021(0x162)]||_0x5df633));try{await botInstance['sendMessag'+'e'](_0x39d540,{'text':_0x56e021(0x1c8)+'ted\x20error\x20'+_0x56e021(0x201)+_0x56e021(0x1a4)+'ssing\x20your'+'\x20request.'},{'quoted':_0x118380['ms']});}catch(_0x5e4b84){error(_0x5e4b84,'['+name+(']\x20failed\x20t'+_0x56e021(0x18f)+'or\x20message'));}}}catch(_0x5c08ca){error(_0x5c08ca,'['+name+(']\x20onMessag'+_0x56e021(0x1b8)+_0x56e021(0x18e))+(_0x5c08ca?.['message']||_0x5c08ca));}}async function handleStickerCreation(_0x450304,_0x5ceb8e,_0x23dccb){const _0x420176=_0xfd65ed,_0x583d69=getQuotedMessage(_0x23dccb),_0x59ff68=_0x583d69?.[_0x420176(0x17f)+'ge']||_0x23dccb[_0x420176(0x162)]?.[_0x420176(0x17f)+'ge'],_0x255c83=_0x583d69?.[_0x420176(0x194)+'ge']||_0x23dccb['message']?.['videoMessa'+'ge'];if(!_0x59ff68&&!_0x255c83)return botInstance[_0x420176(0x210)+'e'](_0x450304,{'text':_0x420176(0x19f)+_0x420176(0x17d)+_0x420176(0x192)+_0x420176(0x204)+'send\x20it\x20wi'+_0x420176(0x160)+_0x420176(0x179)},{'quoted':_0x23dccb['ms']});const _0x39f8d3=(_0x5ceb8e||'')[_0x420176(0x1c3)]()||_0x420176(0x1ec),_0x59de2f=_0x420176(0x1ec);try{const _0x578ec0=await getBaileysModule(),_0x1da231=_0x578ec0[_0x420176(0x167)+_0x420176(0x18a)+_0x420176(0x1f6)]||_0x578ec0['default']?.[_0x420176(0x167)+_0x420176(0x18a)+_0x420176(0x1f6)];if(!_0x1da231)throw new Error('downloadCo'+'ntentFromM'+_0x420176(0x20f)+'\x20available'+_0x420176(0x16b)+_0x420176(0x1cc)+_0x420176(0x1e7));let _0x54a1ab,_0x3011ae=![];if(_0x59ff68){const _0x280951=await _0x1da231(_0x59ff68,_0x420176(0x1dd));_0x54a1ab=await streamToBuffer(_0x280951);}else{if(_0x255c83){if((_0x255c83[_0x420176(0x195)]||-0xa*-0x20c+-0x133e+-0x1*0x13a)>0x2*-0x10d7+-0xe97+-0x182a*-0x2)return botInstance[_0x420176(0x210)+'e'](_0x450304,{'text':_0x420176(0x19e)+_0x420176(0x155)+_0x420176(0x1db)+'5\x20seconds\x20'+_0x420176(0x15b)+_0x420176(0x1be)+'s.'},{'quoted':_0x23dccb['ms']});const _0x40dc71=await _0x1da231(_0x255c83,_0x420176(0x173));_0x54a1ab=await streamToBuffer(_0x40dc71),_0x3011ae=!![];}}if(!_0x54a1ab||_0x54a1ab[_0x420176(0x1d0)]===0x15b5+0x1918+0x2ecd*-0x1)throw new Error(_0x420176(0x1ce)+_0x420176(0x187)+_0x420176(0x20e)+_0x420176(0x162));let _0x49e288;!_0x3011ae?_0x49e288=await imageBufferToWebp(_0x54a1ab,{'pack':_0x59de2f,'author':_0x39f8d3,'quality':0x50}):_0x49e288=await videoBufferToWebp(_0x54a1ab,{'maxDurationSec':0xf,'quality':0x4b});if(!_0x49e288||_0x49e288['length']===-0x1690+0x1*0xfa5+-0xb*-0xa1)throw new Error(_0x420176(0x1f5)+'produce\x20st'+_0x420176(0x1b9)+'er');await botInstance[_0x420176(0x210)+'e'](_0x450304,{'sticker':_0x49e288},{'quoted':_0x23dccb['ms']});}catch(_0x45fb9d){error(_0x45fb9d,_0x420176(0x1f9)+_0x420176(0x181)+'eation\x20fai'+_0x420176(0x206));try{await botInstance[_0x420176(0x210)+'e'](_0x450304,{'text':_0x420176(0x211)+_0x420176(0x1f1)+_0x420176(0x166)+(_0x45fb9d?.[_0x420176(0x162)]||_0x45fb9d)},{'quoted':_0x23dccb['ms']});}catch(_0x43797b){error(_0x43797b,'[sticker]\x20'+'failed\x20to\x20'+'send\x20failu'+_0x420176(0x15a));}}}async function handleStickerToImage(_0x132895,_0x36ea12){const _0x5e56f4=_0xfd65ed,_0x553c13=getQuotedMessage(_0x36ea12);if(!_0x553c13?.[_0x5e56f4(0x175)+_0x5e56f4(0x1a6)])return botInstance[_0x5e56f4(0x210)+'e'](_0x132895,{'text':_0x5e56f4(0x19f)+'eply\x20to\x20a\x20'+_0x5e56f4(0x180)+_0x5e56f4(0x17b)+'t\x20to\x20an\x20im'+_0x5e56f4(0x1fa)},{'quoted':_0x36ea12['ms']});if(_0x553c13[_0x5e56f4(0x175)+'sage'][_0x5e56f4(0x165)])return botInstance['sendMessag'+'e'](_0x132895,{'text':_0x5e56f4(0x154)+_0x5e56f4(0x17a)+'d\x20sticker.'+'\x20Use\x20the\x20`'+_0x5e56f4(0x1d2)+_0x5e56f4(0x1a3)+_0x5e56f4(0x171)},{'quoted':_0x36ea12['ms']});try{const _0x5b21da=await getBaileysModule(),_0x1dd10c=_0x5b21da['downloadCo'+'ntentFromM'+'essage']||_0x5b21da[_0x5e56f4(0x1b6)]?.[_0x5e56f4(0x167)+'ntentFromM'+'essage'];if(!_0x1dd10c)throw new Error('downloadCo'+_0x5e56f4(0x18a)+'essage\x20not'+_0x5e56f4(0x1ee));const _0x39b2d2=await _0x1dd10c(_0x553c13[_0x5e56f4(0x175)+'sage'],_0x5e56f4(0x1dd)),_0x177985=await streamToBuffer(_0x39b2d2);if(!_0x177985||_0x177985[_0x5e56f4(0x1d0)]===0x1b8b+0x1e3b+-0x3*0x1342)throw new Error(_0x5e56f4(0x208)+_0x5e56f4(0x1a7)+'ted\x20from\x20s'+'ticker');const _0x423405=await webpBufferToImage(_0x177985,_0x5e56f4(0x1bf));await botInstance['sendMessag'+'e'](_0x132895,{'image':_0x423405,'caption':'tct'},{'quoted':_0x36ea12['ms']});}catch(_0x3227f4){error(_0x3227f4,_0x5e56f4(0x1f9)+'Sticker\x20to'+_0x5e56f4(0x188)+_0x5e56f4(0x1ab)+_0x5e56f4(0x1fd));try{await botInstance[_0x5e56f4(0x210)+'e'](_0x132895,{'text':_0x5e56f4(0x211)+_0x5e56f4(0x200)+_0x5e56f4(0x180)+_0x5e56f4(0x15c)+(_0x3227f4?.['message']||_0x3227f4)},{'quoted':_0x36ea12['ms']});}catch(_0x276f0d){error(_0x276f0d,_0x5e56f4(0x1f9)+'failed\x20to\x20'+_0x5e56f4(0x19c)+_0x5e56f4(0x15a));}}}async function handleStickerToVideo(_0x1d6c74,_0x533bdf){const _0xea47eb=_0xfd65ed,_0x387f56=getQuotedMessage(_0x533bdf);if(!_0x387f56?.[_0xea47eb(0x175)+_0xea47eb(0x1a6)]||!_0x387f56[_0xea47eb(0x175)+'sage'][_0xea47eb(0x165)])return botInstance[_0xea47eb(0x210)+'e'](_0x1d6c74,{'text':'ℹ️\x20Please\x20r'+'eply\x20to\x20an'+'\x20*animated'+_0xea47eb(0x161)+_0xea47eb(0x1c9)+_0xea47eb(0x157)+_0xea47eb(0x1a8)},{'quoted':_0x533bdf['ms']});try{const _0x26dd5c=await getBaileysModule(),_0x48e993=_0x26dd5c[_0xea47eb(0x167)+_0xea47eb(0x18a)+'essage']||_0x26dd5c[_0xea47eb(0x1b6)]?.['downloadCo'+_0xea47eb(0x18a)+_0xea47eb(0x1f6)];if(!_0x48e993)throw new Error('downloadCo'+_0xea47eb(0x18a)+_0xea47eb(0x20f)+'\x20available');let _0x4824b1,_0x27d1d4;try{_0x4824b1=await _0x48e993(_0x387f56[_0xea47eb(0x175)+'sage'],_0xea47eb(0x173)),_0x27d1d4=await streamToBuffer(_0x4824b1);}catch(_0x4825ea){_0x4824b1=await _0x48e993(_0x387f56[_0xea47eb(0x175)+_0xea47eb(0x1a6)],_0xea47eb(0x1dd)),_0x27d1d4=await streamToBuffer(_0x4824b1);}if(!_0x27d1d4||_0x27d1d4[_0xea47eb(0x1d0)]===-0x140+0x22*0xfd+-0x205a)throw new Error('No\x20video\x20d'+_0xea47eb(0x1a7)+_0xea47eb(0x1d3)+_0xea47eb(0x202));const _0x282db3=await webpToMp4(_0x27d1d4);if(!_0x282db3||_0x282db3['length']===-0x971*-0x3+-0x127b+-0x9d8)throw new Error(_0xea47eb(0x1f5)+_0xea47eb(0x193)+_0xea47eb(0x1fc)+_0xea47eb(0x1e1));await botInstance['sendMessag'+'e'](_0x1d6c74,{'video':_0x282db3,'caption':_0xea47eb(0x1ec)},{'quoted':_0x533bdf['ms']});}catch(_0x11367e){error(_0x11367e,_0xea47eb(0x1f9)+_0xea47eb(0x1df)+_0xea47eb(0x15e)+'version\x20fa'+'iled');try{await botInstance[_0xea47eb(0x210)+'e'](_0x1d6c74,{'text':_0xea47eb(0x211)+_0xea47eb(0x200)+_0xea47eb(0x180)+_0xea47eb(0x159)+(_0x11367e?.[_0xea47eb(0x162)]||_0x11367e)},{'quoted':_0x533bdf['ms']});}catch(_0x8176d8){error(_0x8176d8,_0xea47eb(0x1f9)+'failed\x20to\x20'+_0xea47eb(0x19c)+'re\x20message');}}}