const _0x2ba0d3=_0x4d19;function _0xd340(){const _0x471939=['-vcodec','p\x20conversi','9539827PKGwMS','age.','ined\x20from\x20','concat','/baileys:\x20','50QsndQw','max','essage','512:force_','y\x20webp\x20fil','p->mp4\x20fai','ℹ️\x20This\x20is\x20','\x20*animated','eply\x20to\x20a\x20','stickerMes','trim','eation\x20fai','end','error','ideo.','readFile','seconds','icker\x20buff','default','toLowerCas','message','unlink','push','downloadCo','failed\x20to\x20','led','\x20from\x20@whi','*\x20sticker\x20','th\x20the\x20com','clear','\x20Use\x20the\x20`',']\x20findStor','video','+faststart','70OUWMUb','-movflags','tct','icker\x20to\x20v','1668723oIhjha','led:\x20','setFfmpegP','run','outputOpti','13TvzVcc','load\x20sharp','produce\x20st','\x20image\x20or\x20','m\x20is\x20','t\x20to\x20an\x20im','\x20it\x20to\x20a\x20v','sfully.','split','Sticker\x20cr','join','\x20request.','iled','ticker','Video\x20too\x20','spect_rati','ata\x20extrac','imageMessa','sage','load\x20ffmpe','68658hZBQuQ','format','xtMessage','image','duced\x20empt','-vsync','ted\x20error\x20','tor','data','includes','s).\x20Maximu','eply\x20to\x20an','endsWith','d\x20sticker.','ffmpeg\x20web','duration','l\x20error:\x20','edMatch\x20er','[sticker]\x20','\x20convert\x20i','1.2.3','\x20Maximum\x201','yuv420p','.tovideo`\x20','an\x20animate','remoteJid','s/baileys','-loop','isBuffer','occurred\x20w','rotate','tmpdir',']\x20initiali','-an','sticker','catch','ons','contextInf','Sticker\x20to','to\x20convert','path','cover','re\x20message','ed\x20sticker','for\x20animat','o\x20create\x20s','jpeg','10quPyIg','An\x20unexpec','number','skeysocket','output','-preset','ror:\x20','ntentFromM','scale=512:','has','No\x20media\x20b','function','isAnimated','\x20video:\x20',']\x20Handler\x20','videoMessa','original_a','version\x20fa','webp','writeFile','sendMessag','min','4174008UcEZHD','libwebp','alloc','@g.us','or\x20message','jpg','❌\x20Failed\x20t','-lossless','\x20image\x20con','ticker:\x20','from','on\x20failed:','617862KtAkzW','add','ideo','e\x20top-leve','=rgba,fps=','load\x20@whis','jid','toimage','Failed\x20to\x20','delete','send\x20failu','fromMe',']\x20onMessag','\x20available','g\x20tools:\x20','512','stead.','ℹ️\x20Please\x20r','512,format','map','hile\x20proce','hex','ffprobe','essage\x20not','key','9396351HuOqFV','8AlITME','-q:v','sticker\x20to','\x20image:\x20','tovideo','length','ffmpeg\x20pro','ath','zed\x20succes','extendedTe','y\x20mp4\x20file','asyncItera','png','o=increase','-pix_fmt','bot','mp4','toBuffer','ted\x20from\x20s','o\x20convert\x20','16808EBugcF','toString','quotedMess'];_0xd340=function(){return _0x471939;};return _0xd340();}(function(_0x26a03,_0x1a9a93){const _0x53e26f=_0x4d19,_0x728b2=_0x26a03();while(!![]){try{const _0x4c25e0=parseInt(_0x53e26f(0x165))/(-0x24f3+-0xc65+0x3159)*(parseInt(_0x53e26f(0x179))/(-0x195c+-0x71*-0x43+-0x435))+-parseInt(_0x53e26f(0x160))/(-0x9*0x61+-0x655*0x1+0x1*0x9c1)+parseInt(_0x53e26f(0x130))/(0xd4a+-0x25*-0x6c+-0xe71*0x2)*(-parseInt(_0x53e26f(0x13a))/(0x14df*-0x1+-0x551+0x1a35))+-parseInt(_0x53e26f(0x1ca))/(-0x24c6+0x2467*0x1+-0x1*-0x65)*(-parseInt(_0x53e26f(0x15c))/(-0xdcb+-0x1faf+0x2d81))+-parseInt(_0x53e26f(0x11c))/(-0x1022+0x1d*-0x2b+0x1509)*(-parseInt(_0x53e26f(0x11b))/(0x1f5+-0x1*0x54b+0x35f))+parseInt(_0x53e26f(0x1a8))/(-0x1*0x212a+-0x1*0x16ff+-0x1*-0x3833)*(-parseInt(_0x53e26f(0x135))/(0x1466+-0x24b1+0x82b*0x2))+-parseInt(_0x53e26f(0x1be))/(0x47*0x17+-0x1b96+-0x1*-0x1541);if(_0x4c25e0===_0x1a9a93)break;else _0x728b2['push'](_0x728b2['shift']());}catch(_0x3f26d5){_0x728b2['push'](_0x728b2['shift']());}}}(_0xd340,-0xc5fe*0x8+-0x1*-0x15438d+0x1*-0x44aef));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';import{Readable}from'stream';import _0x566289 from'fs/promises';import _0x20302a from'os';import _0x5c0b1a from'path';import _0x369bd7 from'crypto';export const name='sticker';export const version=_0x2ba0d3(0x18d);export const priority=0x225*0x9+0xc8c+0x1fcf*-0x1;export const commands=[_0x2ba0d3(0x19b),'s','toimage',_0x2ba0d3(0x120)];let botInstance=null,respondedMsgIds=new Set(),_baileysModule=null,_sharp=null,_ffmpegInstaller=null,_fluentFfmpeg=null;async function getBaileysModule(){const _0x53ad0=_0x2ba0d3;if(_baileysModule)return _baileysModule;try{return _baileysModule=await import('@whiskeysockets/baileys'),_baileysModule;}catch(_0x204cd5){throw new Error(_0x53ad0(0x10a)+_0x53ad0(0x107)+'keysockets'+_0x53ad0(0x139)+_0x204cd5[_0x53ad0(0x14e)]);}}async function getSharp(){const _0x5159fc=_0x2ba0d3;if(_sharp)return _sharp;try{const _0x452cdf=await import('sharp');return _sharp=_0x452cdf['default']||_0x452cdf,_sharp;}catch(_0x5c72ae){throw new Error(_0x5159fc(0x10a)+_0x5159fc(0x166)+':\x20'+_0x5c72ae[_0x5159fc(0x14e)]);}}async function getFfmpeg(){const _0x2cd262=_0x2ba0d3;if(_ffmpegInstaller&&_fluentFfmpeg)return{'ffmpegPath':_ffmpegInstaller[_0x2cd262(0x1a1)],'ffmpegLib':_fluentFfmpeg};try{const _0x5a81a1=await import('@ffmpeg-installer/ffmpeg'),_0x2e87a4=await import('fluent-ffmpeg');_ffmpegInstaller=_0x5a81a1[_0x2cd262(0x14c)]||_0x5a81a1,_fluentFfmpeg=_0x2e87a4[_0x2cd262(0x14c)]||_0x2e87a4;try{_fluentFfmpeg[_0x2cd262(0x162)+_0x2cd262(0x123)](_ffmpegInstaller[_0x2cd262(0x1a1)]);}catch(_0x3f0c60){}return{'ffmpegPath':_ffmpegInstaller[_0x2cd262(0x1a1)],'ffmpegLib':_fluentFfmpeg};}catch(_0x4b4d31){throw new Error(_0x2cd262(0x10a)+_0x2cd262(0x178)+_0x2cd262(0x110)+_0x4b4d31[_0x2cd262(0x14e)]);}}async function streamToBuffer(_0x2823da){const _0x46447d=_0x2ba0d3;if(!_0x2823da)return Buffer[_0x46447d(0x1c0)](0x3*-0x685+-0x2592+0x3921);if(typeof _0x2823da[Symbol[_0x46447d(0x127)+_0x46447d(0x180)]]==='function'){const _0x53fe38=[];for await(const _0x36d0ed of _0x2823da){_0x53fe38[_0x46447d(0x150)](Buffer[_0x46447d(0x195)](_0x36d0ed)?_0x36d0ed:Buffer['from'](_0x36d0ed));}return Buffer['concat'](_0x53fe38);}if(typeof _0x2823da['on']===_0x46447d(0x1b3))return new Promise((_0x35e434,_0x51d3ba)=>{const _0x365c26=_0x46447d,_0x1105c8=[];_0x2823da['on'](_0x365c26(0x181),_0xf35fe3=>_0x1105c8[_0x365c26(0x150)](Buffer['isBuffer'](_0xf35fe3)?_0xf35fe3:Buffer[_0x365c26(0x1c8)](_0xf35fe3))),_0x2823da['on'](_0x365c26(0x146),()=>_0x35e434(Buffer[_0x365c26(0x138)](_0x1105c8))),_0x2823da['on'](_0x365c26(0x147),_0x51d3ba);});return Buffer[_0x46447d(0x1c8)](await _0x2823da);}const getQuotedMessage=_0x24ddb5=>{const _0x133277=_0x2ba0d3;return _0x24ddb5[_0x133277(0x14e)]?.[_0x133277(0x125)+_0x133277(0x17b)]?.[_0x133277(0x19e)+'o']?.[_0x133277(0x132)+'age']||_0x24ddb5['quoted']||null;};async function findStoredMatchFromFindings(_0x1afaf7=[]){const _0x4cf460=_0x2ba0d3;try{const _0x51d0de=await listSudo(),_0x1e1396=new Set(_0x51d0de[_0x4cf460(0x115)](String));for(const _0x1726f8 of _0x1afaf7){if(!_0x1726f8||typeof _0x1726f8[_0x4cf460(0x108)]!=='string')continue;const _0x259566=normalizeToJid(_0x1726f8[_0x4cf460(0x108)]);if(_0x259566&&_0x1e1396[_0x4cf460(0x1b1)](_0x259566))return _0x259566;if(_0x1e1396[_0x4cf460(0x1b1)](_0x1726f8[_0x4cf460(0x108)]))return _0x1726f8[_0x4cf460(0x108)];}return null;}catch(_0x5a12a2){return warn('['+name+(_0x4cf460(0x159)+_0x4cf460(0x18a)+_0x4cf460(0x1ae))+(_0x5a12a2?.[_0x4cf460(0x14e)]||_0x5a12a2)),null;}}function tmpFilename(_0x3f3be7=''){const _0x166363=_0x2ba0d3,_0x4ecc43=_0x369bd7['randomByte'+'s'](-0x256*-0x4+0xc7e+-0x15ce)[_0x166363(0x131)](_0x166363(0x117));return _0x5c0b1a[_0x166363(0x16f)](_0x20302a[_0x166363(0x198)](),'sticker-'+_0x4ecc43+(_0x3f3be7?'.'+_0x3f3be7:''));}export async function initialize(_0x232826){const _0x4d9fc0=_0x2ba0d3;botInstance=_0x232826,info('['+name+(_0x4d9fc0(0x199)+_0x4d9fc0(0x124)+_0x4d9fc0(0x16c)));}export async function cleanup(){const _0x5b9ef0=_0x2ba0d3;botInstance=null,respondedMsgIds[_0x5b9ef0(0x157)](),info('['+name+(']\x20cleaned\x20'+'up'));}async function imageBufferToWebp(_0x5b7ff6,{pack:pack='tct',author:author='tct',quality:quality=0x7f6+-0x8e3*0x4+-0x1*-0x1be6}={}){const _0xa77560=_0x2ba0d3,_0x3f5597=await getSharp(),_0x9afd63=_0x3f5597(_0x5b7ff6,{'animated':![]})[_0xa77560(0x197)]()['resize'](-0x1*-0x42+0x1f9c+-0x1dde,0x683*-0x3+-0x23e+0x17c7,{'fit':_0xa77560(0x1a2),'position':'center'})[_0xa77560(0x1ba)]({'quality':typeof quality===_0xa77560(0x1aa)?quality:0x71*0x20+-0x1*0x1171+0x3a1}),_0xd65ee7=await _0x9afd63[_0xa77560(0x12d)]();return _0xd65ee7;}async function videoBufferToWebp(_0x1ae565,{maxDurationSec:maxDurationSec=0x1e9d+-0x1591*-0x1+-0x341f,quality:quality=-0x96*0x4+-0x1ca7+0x1f4a}={}){const _0x8d0f3=_0x2ba0d3,{ffmpegLib:_0x10cf19}=await getFfmpeg(),_0x587d5c=_0x10cf19,_0x8b56=tmpFilename(_0x8d0f3(0x12c)),_0x2b4436=tmpFilename(_0x8d0f3(0x1ba));try{await _0x566289[_0x8d0f3(0x1bb)](_0x8b56,_0x1ae565);const _0x1c69c9=await new Promise((_0x3560f6,_0x2b33e0)=>{const _0xb713c3=_0x8d0f3;_0x587d5c[_0xb713c3(0x118)](_0x8b56,(_0x3d8324,_0x5c3f5c)=>{const _0x50c075=_0xb713c3;if(_0x3d8324)return _0x2b33e0(_0x3d8324);const _0x33ef62=_0x5c3f5c?.[_0x50c075(0x17a)]?.[_0x50c075(0x188)]||-0x110c*-0x2+-0x2*-0x573+-0x2*0x167f;_0x3560f6(Number(_0x33ef62)||-0x1b*-0xe9+0x28*0x16+0x1c03*-0x1);});});if(_0x1c69c9>maxDurationSec)throw new Error(_0x8d0f3(0x173)+'long\x20('+Math['round'](_0x1c69c9)+(_0x8d0f3(0x183)+_0x8d0f3(0x169))+maxDurationSec+'s.');await new Promise((_0x1fd080,_0x21bdfd)=>{const _0x5d1c9f=_0x8d0f3;_0x587d5c(_0x8b56)[_0x5d1c9f(0x164)+_0x5d1c9f(0x19d)]([_0x5d1c9f(0x133),_0x5d1c9f(0x1bf),'-vf',_0x5d1c9f(0x1b0)+'512:force_'+_0x5d1c9f(0x1b8)+_0x5d1c9f(0x174)+'o=increase'+',crop=512:'+_0x5d1c9f(0x114)+_0x5d1c9f(0x106)+'15',_0x5d1c9f(0x1c5),'0',_0x5d1c9f(0x194),'0',_0x5d1c9f(0x1ad),_0x5d1c9f(0x14c),_0x5d1c9f(0x19a),_0x5d1c9f(0x17e),'0'])[_0x5d1c9f(0x164)+_0x5d1c9f(0x19d)]([_0x5d1c9f(0x11d),String(Math[_0x5d1c9f(0x13b)](-0x765+-0x8*-0x123+-0x1a9,Math[_0x5d1c9f(0x1bd)](0x1464+0x1*-0xef8+0x8*-0xa1,quality)))])[_0x5d1c9f(0x1ac)](_0x2b4436)['on'](_0x5d1c9f(0x147),_0x21d986=>{const _0x308154=_0x5d1c9f;_0x21bdfd(new Error('ffmpeg\x20web'+_0x308154(0x134)+_0x308154(0x1c9)+'\x20'+(_0x21d986?.[_0x308154(0x14e)]||_0x21d986)));})['on'](_0x5d1c9f(0x146),()=>_0x1fd080())[_0x5d1c9f(0x163)]();});const _0xb4e0da=await _0x566289[_0x8d0f3(0x149)](_0x2b4436);if(!_0xb4e0da||_0xb4e0da['length']===-0x46c*0x5+-0x40f*0x9+-0x11*-0x373)throw new Error(_0x8d0f3(0x122)+_0x8d0f3(0x17d)+_0x8d0f3(0x13e)+'e');return _0xb4e0da;}finally{try{await _0x566289['unlink'](_0x8b56);}catch(_0x587e1e){}try{await _0x566289[_0x8d0f3(0x14f)](_0x2b4436);}catch(_0x424c09){}}}function _0x4d19(_0x5cf184,_0x2ff58c){const _0x47382f=_0xd340();return _0x4d19=function(_0x473ef6,_0x3f009f){_0x473ef6=_0x473ef6-(-0x1a76+0x2*-0x113+-0x1*-0x1d9f);let _0x43e7f5=_0x47382f[_0x473ef6];return _0x43e7f5;},_0x4d19(_0x5cf184,_0x2ff58c);}async function webpToMp4(_0x17c1b6){const _0x50ac5a=_0x2ba0d3,{ffmpegLib:_0x3e385e}=await getFfmpeg(),_0x437323=_0x3e385e,_0x12bd71=tmpFilename(_0x50ac5a(0x1ba)),_0x18a621=tmpFilename(_0x50ac5a(0x12c));try{await _0x566289['writeFile'](_0x12bd71,_0x17c1b6),await new Promise((_0x1d30f8,_0x10075e)=>{const _0x323509=_0x50ac5a;_0x437323(_0x12bd71)[_0x323509(0x164)+_0x323509(0x19d)]([_0x323509(0x15d),_0x323509(0x15b),_0x323509(0x12a),_0x323509(0x18f),'-vf',_0x323509(0x1b0)+_0x323509(0x13d)+_0x323509(0x1b8)+'spect_rati'+_0x323509(0x129)+',crop=512:'+_0x323509(0x111),_0x323509(0x19a)])['format']('mp4')[_0x323509(0x1ac)](_0x18a621)['on']('error',_0x6143b4=>_0x10075e(new Error(_0x323509(0x187)+_0x323509(0x13f)+_0x323509(0x161)+(_0x6143b4?.['message']||_0x6143b4))))['on']('end',()=>_0x1d30f8())['run']();});const _0x290499=await _0x566289[_0x50ac5a(0x149)](_0x18a621);if(!_0x290499||_0x290499[_0x50ac5a(0x121)]===0x2082+-0x16e7*0x1+-0x99b*0x1)throw new Error(_0x50ac5a(0x122)+_0x50ac5a(0x17d)+_0x50ac5a(0x126));return _0x290499;}finally{try{await _0x566289[_0x50ac5a(0x14f)](_0x12bd71);}catch(_0xc54ca8){}try{await _0x566289[_0x50ac5a(0x14f)](_0x18a621);}catch(_0x191759){}}}async function webpBufferToImage(_0x1c3494,_0x2e2a54=_0x2ba0d3(0x128)){const _0x26f75c=_0x2ba0d3,_0x5d345e=await getSharp(),_0x20b940=_0x5d345e(_0x1c3494,{'animated':![]});if(_0x2e2a54===_0x26f75c(0x1a7)||_0x2e2a54===_0x26f75c(0x1c3))return _0x20b940['jpeg']({'quality':0x5a})[_0x26f75c(0x12d)]();return _0x20b940[_0x26f75c(0x128)]()[_0x26f75c(0x12d)]();}export async function onMessage(_0x13f20b){const _0x216456=_0x2ba0d3;try{if(!_0x13f20b||!_0x13f20b[_0x216456(0x11a)]||!_0x13f20b['isCommand'])return;if(!botInstance)botInstance=_0x13f20b[_0x216456(0x12b)]||_0x13f20b['client']||_0x13f20b['_bot']||null;const _0x3df0a5=_0x13f20b[_0x216456(0x11a)]['id'];if(_0x3df0a5&&respondedMsgIds['has'](_0x3df0a5))return;_0x3df0a5&&(respondedMsgIds[_0x216456(0x103)](_0x3df0a5),setTimeout(()=>respondedMsgIds[_0x216456(0x10b)](_0x3df0a5),-0x4c99*-0x1+-0x3605+0x5e9c));const _0x5197e1=(_0x13f20b['text']||'')[_0x216456(0x144)](),[_0x124ba0,..._0x83ea29]=_0x5197e1[_0x216456(0x16d)](/\s+/),_0x35e833=(_0x124ba0||'')[_0x216456(0x14d)+'e']();if(!commands[_0x216456(0x182)](_0x35e833))return;const _0x15f790=_0x13f20b[_0x216456(0x11a)][_0x216456(0x192)]||_0x13f20b['remoteJid']||'',_0x2e9807=String(_0x15f790)[_0x216456(0x185)](_0x216456(0x1c1)),_0x38003f=getBotJid();let _0x2dc764=_0x15f790;const _0x337a17=Boolean(_0x13f20b[_0x216456(0x11a)]?.[_0x216456(0x10d)]);let _0xd9a74f=_0x337a17;if(_0x337a17&&_0x38003f)_0x2dc764=_0x38003f;if(!_0xd9a74f){if(_0x2e9807)_0xd9a74f=await isadmin(botInstance,_0x13f20b)[_0x216456(0x19c)](()=>![]);else{const _0x306c11=await isSudo(botInstance,_0x13f20b)[_0x216456(0x19c)](()=>![]);if(_0x306c11){const {findings:_0x283a03}=userJidFromCtx(_0x13f20b),_0x2ef98b=await findStoredMatchFromFindings(_0x283a03);_0x2ef98b&&(_0xd9a74f=!![],_0x2dc764=_0x2ef98b);}}}if(!_0xd9a74f)return;const _0x3c838a=_0x83ea29['join']('\x20');try{switch(_0x35e833){case _0x216456(0x19b):case's':await handleStickerCreation(_0x2dc764,_0x3c838a,_0x13f20b);break;case _0x216456(0x109):await handleStickerToImage(_0x2dc764,_0x13f20b);break;case _0x216456(0x120):await handleStickerToVideo(_0x2dc764,_0x13f20b);break;}}catch(_0x50527a){error(_0x50527a,'['+name+(_0x216456(0x1b6)+'error:\x20')+(_0x50527a?.[_0x216456(0x14e)]||_0x50527a));try{await botInstance['sendMessag'+'e'](_0x2dc764,{'text':_0x216456(0x1a9)+_0x216456(0x17f)+_0x216456(0x196)+_0x216456(0x116)+'ssing\x20your'+_0x216456(0x170)},{'quoted':_0x13f20b['ms']});}catch(_0x3f6fd4){error(_0x3f6fd4,'['+name+(']\x20failed\x20t'+'o\x20send\x20err'+_0x216456(0x1c2)));}}}catch(_0xccc42){error(_0xccc42,'['+name+(_0x216456(0x10e)+_0x216456(0x105)+_0x216456(0x189))+(_0xccc42?.[_0x216456(0x14e)]||_0xccc42));}}async function handleStickerCreation(_0x501ad9,_0xf5f79,_0x1ad8de){const _0x517ab7=_0x2ba0d3,_0x3ffe58=getQuotedMessage(_0x1ad8de),_0x479869=_0x3ffe58?.['imageMessa'+'ge']||_0x1ad8de[_0x517ab7(0x14e)]?.[_0x517ab7(0x176)+'ge'],_0x4a359b=_0x3ffe58?.[_0x517ab7(0x1b7)+'ge']||_0x1ad8de[_0x517ab7(0x14e)]?.[_0x517ab7(0x1b7)+'ge'];if(!_0x479869&&!_0x4a359b)return botInstance[_0x517ab7(0x1bc)+'e'](_0x501ad9,{'text':'ℹ️\x20Please\x20r'+_0x517ab7(0x184)+_0x517ab7(0x168)+'video,\x20or\x20'+'send\x20it\x20wi'+_0x517ab7(0x156)+'mand.'},{'quoted':_0x1ad8de['ms']});const _0x4a442d=(_0xf5f79||'')[_0x517ab7(0x144)]()||_0x517ab7(0x15e),_0x2c0402=_0x517ab7(0x15e);try{const _0x1c711c=await getBaileysModule(),_0x5d183b=_0x1c711c[_0x517ab7(0x151)+_0x517ab7(0x1af)+'essage']||_0x1c711c[_0x517ab7(0x14c)]?.['downloadCo'+_0x517ab7(0x1af)+_0x517ab7(0x13c)];if(!_0x5d183b)throw new Error(_0x517ab7(0x151)+_0x517ab7(0x1af)+_0x517ab7(0x119)+_0x517ab7(0x10f)+_0x517ab7(0x154)+_0x517ab7(0x1ab)+_0x517ab7(0x193));let _0x514187,_0x3e538c=![];if(_0x479869){const _0xdf62ab=await _0x5d183b(_0x479869,_0x517ab7(0x17c));_0x514187=await streamToBuffer(_0xdf62ab);}else{if(_0x4a359b){if((_0x4a359b[_0x517ab7(0x14a)]||-0xc*0x252+-0x3b7+-0x3*-0xa85)>-0x20f8+-0x4a2+0x25a9)return botInstance[_0x517ab7(0x1bc)+'e'](_0x501ad9,{'text':'❌\x20Video\x20is'+'\x20too\x20long.'+_0x517ab7(0x18e)+'5\x20seconds\x20'+_0x517ab7(0x1a5)+_0x517ab7(0x1a4)+'s.'},{'quoted':_0x1ad8de['ms']});const _0x47348d=await _0x5d183b(_0x4a359b,_0x517ab7(0x15a));_0x514187=await streamToBuffer(_0x47348d),_0x3e538c=!![];}}if(!_0x514187||_0x514187[_0x517ab7(0x121)]===0x3*-0x732+0xdf*0x3+0x1*0x12f9)throw new Error(_0x517ab7(0x1b2)+'uffer\x20obta'+_0x517ab7(0x137)+_0x517ab7(0x14e));let _0x533f02;!_0x3e538c?_0x533f02=await imageBufferToWebp(_0x514187,{'pack':_0x2c0402,'author':_0x4a442d,'quality':0x50}):_0x533f02=await videoBufferToWebp(_0x514187,{'maxDurationSec':0xf,'quality':0x4b});if(!_0x533f02||_0x533f02['length']===0x15c1*0x1+0x4c4+0x1f*-0xdb)throw new Error(_0x517ab7(0x10a)+_0x517ab7(0x167)+_0x517ab7(0x14b)+'er');await botInstance[_0x517ab7(0x1bc)+'e'](_0x501ad9,{'sticker':_0x533f02},{'quoted':_0x1ad8de['ms']});}catch(_0x28a92e){error(_0x28a92e,'[sticker]\x20'+_0x517ab7(0x16e)+_0x517ab7(0x145)+_0x517ab7(0x153));try{await botInstance[_0x517ab7(0x1bc)+'e'](_0x501ad9,{'text':_0x517ab7(0x1c4)+_0x517ab7(0x1a6)+_0x517ab7(0x1c7)+(_0x28a92e?.['message']||_0x28a92e)},{'quoted':_0x1ad8de['ms']});}catch(_0x378e22){error(_0x378e22,_0x517ab7(0x18b)+_0x517ab7(0x152)+'send\x20failu'+_0x517ab7(0x1a3));}}}async function handleStickerToImage(_0x16ee4f,_0x584f7f){const _0x2b1707=_0x2ba0d3,_0x59c13f=getQuotedMessage(_0x584f7f);if(!_0x59c13f?.[_0x2b1707(0x143)+_0x2b1707(0x177)])return botInstance[_0x2b1707(0x1bc)+'e'](_0x16ee4f,{'text':_0x2b1707(0x113)+_0x2b1707(0x142)+_0x2b1707(0x11e)+_0x2b1707(0x18c)+_0x2b1707(0x16a)+_0x2b1707(0x136)},{'quoted':_0x584f7f['ms']});if(_0x59c13f[_0x2b1707(0x143)+'sage'][_0x2b1707(0x1b4)])return botInstance[_0x2b1707(0x1bc)+'e'](_0x16ee4f,{'text':_0x2b1707(0x140)+_0x2b1707(0x191)+_0x2b1707(0x186)+_0x2b1707(0x158)+_0x2b1707(0x190)+'command\x20in'+_0x2b1707(0x112)},{'quoted':_0x584f7f['ms']});try{const _0x13c5f4=await getBaileysModule(),_0x3e904c=_0x13c5f4[_0x2b1707(0x151)+_0x2b1707(0x1af)+_0x2b1707(0x13c)]||_0x13c5f4['default']?.[_0x2b1707(0x151)+_0x2b1707(0x1af)+_0x2b1707(0x13c)];if(!_0x3e904c)throw new Error(_0x2b1707(0x151)+_0x2b1707(0x1af)+'essage\x20not'+_0x2b1707(0x10f));const _0x180f91=await _0x3e904c(_0x59c13f[_0x2b1707(0x143)+_0x2b1707(0x177)],_0x2b1707(0x17c)),_0xad7e6f=await streamToBuffer(_0x180f91);if(!_0xad7e6f||_0xad7e6f[_0x2b1707(0x121)]===0x1dd7+-0x1*-0x98f+-0x1*0x2766)throw new Error('No\x20image\x20d'+_0x2b1707(0x175)+_0x2b1707(0x12e)+_0x2b1707(0x172));const _0x4289ba=await webpBufferToImage(_0xad7e6f,_0x2b1707(0x128));await botInstance[_0x2b1707(0x1bc)+'e'](_0x16ee4f,{'image':_0x4289ba,'caption':_0x2b1707(0x15e)},{'quoted':_0x584f7f['ms']});}catch(_0x32e5a0){error(_0x32e5a0,_0x2b1707(0x18b)+_0x2b1707(0x19f)+_0x2b1707(0x1c6)+_0x2b1707(0x1b9)+_0x2b1707(0x171));try{await botInstance[_0x2b1707(0x1bc)+'e'](_0x16ee4f,{'text':_0x2b1707(0x1c4)+_0x2b1707(0x12f)+_0x2b1707(0x11e)+_0x2b1707(0x11f)+(_0x32e5a0?.[_0x2b1707(0x14e)]||_0x32e5a0)},{'quoted':_0x584f7f['ms']});}catch(_0x5d80bf){error(_0x5d80bf,_0x2b1707(0x18b)+'failed\x20to\x20'+_0x2b1707(0x10c)+_0x2b1707(0x1a3));}}}async function handleStickerToVideo(_0x41d09e,_0x2db03){const _0x209d3a=_0x2ba0d3,_0x4f8730=getQuotedMessage(_0x2db03);if(!_0x4f8730?.['stickerMes'+_0x209d3a(0x177)]||!_0x4f8730[_0x209d3a(0x143)+'sage'][_0x209d3a(0x1b4)])return botInstance[_0x209d3a(0x1bc)+'e'](_0x41d09e,{'text':_0x209d3a(0x113)+'eply\x20to\x20an'+_0x209d3a(0x141)+_0x209d3a(0x155)+_0x209d3a(0x1a0)+_0x209d3a(0x16b)+_0x209d3a(0x148)},{'quoted':_0x2db03['ms']});try{const _0x2f7991=await getBaileysModule(),_0x5f4756=_0x2f7991[_0x209d3a(0x151)+_0x209d3a(0x1af)+_0x209d3a(0x13c)]||_0x2f7991[_0x209d3a(0x14c)]?.[_0x209d3a(0x151)+_0x209d3a(0x1af)+_0x209d3a(0x13c)];if(!_0x5f4756)throw new Error(_0x209d3a(0x151)+_0x209d3a(0x1af)+_0x209d3a(0x119)+_0x209d3a(0x10f));let _0x3ba2f9,_0x597739;try{_0x3ba2f9=await _0x5f4756(_0x4f8730[_0x209d3a(0x143)+_0x209d3a(0x177)],_0x209d3a(0x15a)),_0x597739=await streamToBuffer(_0x3ba2f9);}catch(_0x25d10d){_0x3ba2f9=await _0x5f4756(_0x4f8730['stickerMes'+_0x209d3a(0x177)],_0x209d3a(0x17c)),_0x597739=await streamToBuffer(_0x3ba2f9);}if(!_0x597739||_0x597739[_0x209d3a(0x121)]===-0x33*-0x29+0x182c+-0x2057)throw new Error('No\x20video\x20d'+'ata\x20extrac'+_0x209d3a(0x12e)+'ticker');const _0x172e1b=await webpToMp4(_0x597739);if(!_0x172e1b||_0x172e1b[_0x209d3a(0x121)]===-0x8c2*-0x1+0x1ea7+-0x2769)throw new Error(_0x209d3a(0x10a)+'convert\x20st'+_0x209d3a(0x15f)+_0x209d3a(0x104));await botInstance['sendMessag'+'e'](_0x41d09e,{'video':_0x172e1b,'caption':_0x209d3a(0x15e)},{'quoted':_0x2db03['ms']});}catch(_0x5d8d05){error(_0x5d8d05,_0x209d3a(0x18b)+_0x209d3a(0x19f)+'\x20video\x20con'+'version\x20fa'+_0x209d3a(0x171));try{await botInstance[_0x209d3a(0x1bc)+'e'](_0x41d09e,{'text':'❌\x20Failed\x20t'+_0x209d3a(0x12f)+_0x209d3a(0x11e)+_0x209d3a(0x1b5)+(_0x5d8d05?.['message']||_0x5d8d05)},{'quoted':_0x2db03['ms']});}catch(_0x2dc4bf){error(_0x2dc4bf,'[sticker]\x20'+_0x209d3a(0x152)+_0x209d3a(0x10c)+_0x209d3a(0x1a3));}}}