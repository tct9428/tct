const _0x4631de=_0x3161;(function(_0x27dc25,_0x4c26fb){const _0x208b41=_0x3161,_0x43419b=_0x27dc25();while(!![]){try{const _0x5e7dc6=-parseInt(_0x208b41(0x164))/(-0x11c7+-0x1*-0x17bd+0x1*-0x5f5)+-parseInt(_0x208b41(0x1d9))/(0x7d9+0x2658+-0x2e2f)*(parseInt(_0x208b41(0x17a))/(-0x7b5+-0xaba+-0x939*-0x2))+-parseInt(_0x208b41(0x14d))/(-0xad*-0x29+0xa69+-0x261a)*(parseInt(_0x208b41(0x19a))/(-0x1aa8+0xa*0x2ed+-0x295))+parseInt(_0x208b41(0x129))/(0x20c1+0x1*0x11f4+-0x32af)*(-parseInt(_0x208b41(0x1e1))/(0x852+0x1*0x1733+-0x1d*0x116))+parseInt(_0x208b41(0x158))/(0x1b2d+-0xc4e+-0xed7)+-parseInt(_0x208b41(0x15c))/(-0x143a+0x1*0x135b+-0x3a*-0x4)*(-parseInt(_0x208b41(0x163))/(-0x2fb*0x2+0x2647*0x1+-0x2047))+parseInt(_0x208b41(0x147))/(-0xbe7+0x8ed*-0x1+0x14df)*(parseInt(_0x208b41(0x16e))/(-0x1*0xdb2+0xc0b+-0x3*-0x91));if(_0x5e7dc6===_0x4c26fb)break;else _0x43419b['push'](_0x43419b['shift']());}catch(_0x5b5620){_0x43419b['push'](_0x43419b['shift']());}}}(_0x4aad,-0x833*-0x19b+-0xe74aa+0x2511c*0x5));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';import{Readable}from'stream';import _0x4305d8 from'fs/promises';import _0x23bc94 from'os';import _0x55bf81 from'path';import _0x2b3e2d from'crypto';export const name=_0x4631de(0x141);export const version=_0x4631de(0x155);function _0x4aad(){const _0x5bbcf9=[']\x20Handler\x20','o=increase','ticker','tovideo','No\x20media\x20b','png','concat','\x20image\x20con','❌\x20Failed\x20t','path','remoteJid','jid','catch','age','client','stead.',']\x20failed\x20t','original_a','y\x20webp\x20fil','\x20image\x20or\x20','eply\x20to\x20an','ℹ️\x20Please\x20r','ed\x20sticker','end','sticker-','libwebp','-q:v','from','writeFile','\x20request.','\x20video\x20con','ata\x20extrac','zed\x20succes','No\x20video\x20d','mp4','5\x20seconds\x20','ted\x20from\x20s','rotate','video',']\x20initiali','trim','m\x20is\x20','hile\x20proce','on\x20failed:','ticker:\x20','6614xdhIYP','mand.','spect_rati','video,\x20or\x20','edMatch\x20er','seconds','extendedTe','/baileys:\x20','3003301PdDtRT','output','@g.us','round','split','readFile','o\x20convert\x20','long\x20(','failed\x20to\x20','occurred\x20w','randomByte','s).\x20Maximu','for\x20animat','Sticker\x20cr','-loop','run','12Grgfna','send\x20it\x20wi','ted\x20error\x20','isAnimated','error:\x20','\x20video:\x20','max','isCommand','join','add',']\x20findStor','center','p->mp4\x20fai','ffmpeg\x20web','map','toLowerCas','led:\x20','ideo','sage','e\x20top-leve','asyncItera','essage','load\x20@whis','to\x20convert','sticker','*\x20sticker\x20','hex','has',']\x20onMessag','g\x20tools:\x20','11vXSsnC','quoted','or\x20message','fromMe','\x20available','ath','4460tAVgRl','downloadCo','toimage','default','No\x20image\x20d','sendMessag','ℹ️\x20This\x20is\x20','clear','1.2.3','t\x20to\x20an\x20im','message','9411272edEAlV','eply\x20to\x20a\x20','load\x20sharp','th\x20the\x20com','45tUsYtq','\x20convert\x20i','s/baileys','-an','Failed\x20to\x20','resize','function','1492730DkHhKg','612769NAAnrv','format','webp','Sticker\x20to','unlink','videoMessa','=rgba,fps=','essage\x20not','\x20Use\x20the\x20`','y\x20mp4\x20file','21953076iNYuRV','send\x20failu','duced\x20empt','ffmpeg\x20pro','image','toString','includes','-vf','d\x20sticker.','imageMessa','endsWith','512:force_','342NMYVHk','p\x20conversi','\x20Maximum\x201',',crop=512:','key','512','toBuffer','ons','sfully.','[sticker]\x20','-preset','iled','alloc','re\x20message','sticker\x20to','push','data','stickerMes','-vcodec','_bot','tor','yuv420p','o\x20create\x20s','command\x20in','bot','convert\x20st','xtMessage','led','string','outputOpti','jpeg','ffprobe','5515QRPXVG','icker\x20to\x20v','version\x20fa','tct','512,format','ssing\x20your','.tovideo`\x20','setFfmpegP','length','cover','error','ror:\x20','tmpdir','jpg','+faststart','\x20it\x20to\x20a\x20v','-pix_fmt','ntentFromM'];_0x4aad=function(){return _0x5bbcf9;};return _0x4aad();}export const priority=-0x24ca+0x108f+0x1445*0x1;export const commands=['sticker','s',_0x4631de(0x14f),_0x4631de(0x1af)];let botInstance=null,respondedMsgIds=new Set(),_baileysModule=null,_sharp=null,_ffmpegInstaller=null,_fluentFfmpeg=null;async function getBaileysModule(){const _0xefe8d4=_0x4631de;if(_baileysModule)return _baileysModule;try{return _baileysModule=await import('@whiskeysockets/baileys'),_baileysModule;}catch(_0x1238d0){throw new Error('Failed\x20to\x20'+_0xefe8d4(0x13f)+'keysockets'+_0xefe8d4(0x1e0)+_0x1238d0[_0xefe8d4(0x157)]);}}async function getSharp(){const _0x3c7c35=_0x4631de;if(_sharp)return _sharp;try{const _0x5daf3d=await import('sharp');return _sharp=_0x5daf3d[_0x3c7c35(0x150)]||_0x5daf3d,_sharp;}catch(_0x604cd8){throw new Error(_0x3c7c35(0x160)+_0x3c7c35(0x15a)+':\x20'+_0x604cd8['message']);}}async function getFfmpeg(){const _0x362900=_0x4631de;if(_ffmpegInstaller&&_fluentFfmpeg)return{'ffmpegPath':_ffmpegInstaller['path'],'ffmpegLib':_fluentFfmpeg};try{const _0x1deefd=await import('@ffmpeg-installer/ffmpeg'),_0x38fe3e=await import('fluent-ffmpeg');_ffmpegInstaller=_0x1deefd[_0x362900(0x150)]||_0x1deefd,_fluentFfmpeg=_0x38fe3e['default']||_0x38fe3e;try{_fluentFfmpeg[_0x362900(0x1a1)+_0x362900(0x14c)](_ffmpegInstaller[_0x362900(0x1b5)]);}catch(_0x5c725f){}return{'ffmpegPath':_ffmpegInstaller[_0x362900(0x1b5)],'ffmpegLib':_fluentFfmpeg};}catch(_0x564ac7){throw new Error(_0x362900(0x160)+'load\x20ffmpe'+_0x362900(0x146)+_0x564ac7[_0x362900(0x157)]);}}async function streamToBuffer(_0x440bb7){const _0x4231b2=_0x4631de;if(!_0x440bb7)return Buffer[_0x4231b2(0x186)](-0x1d7e+0x1355*-0x1+0x30d3);if(typeof _0x440bb7[Symbol[_0x4231b2(0x13d)+_0x4231b2(0x18e)]]===_0x4231b2(0x162)){const _0xafaebf=[];for await(const _0x50ee79 of _0x440bb7){_0xafaebf[_0x4231b2(0x189)](Buffer['isBuffer'](_0x50ee79)?_0x50ee79:Buffer['from'](_0x50ee79));}return Buffer[_0x4231b2(0x1b2)](_0xafaebf);}if(typeof _0x440bb7['on']===_0x4231b2(0x162))return new Promise((_0x584e90,_0x48d3d2)=>{const _0xa797e9=_0x4231b2,_0x139c59=[];_0x440bb7['on'](_0xa797e9(0x18a),_0x456974=>_0x139c59[_0xa797e9(0x189)](Buffer['isBuffer'](_0x456974)?_0x456974:Buffer[_0xa797e9(0x1c7)](_0x456974))),_0x440bb7['on'](_0xa797e9(0x1c3),()=>_0x584e90(Buffer[_0xa797e9(0x1b2)](_0x139c59))),_0x440bb7['on'](_0xa797e9(0x1a4),_0x48d3d2);});return Buffer[_0x4231b2(0x1c7)](await _0x440bb7);}const getQuotedMessage=_0x490c7b=>{const _0x1fe0f3=_0x4631de;return _0x490c7b[_0x1fe0f3(0x157)]?.[_0x1fe0f3(0x1df)+_0x1fe0f3(0x194)]?.['contextInf'+'o']?.['quotedMess'+_0x1fe0f3(0x1b9)]||_0x490c7b[_0x1fe0f3(0x148)]||null;};async function findStoredMatchFromFindings(_0x6320f8=[]){const _0x2c4a69=_0x4631de;try{const _0x421df0=await listSudo(),_0x4bdbc9=new Set(_0x421df0[_0x2c4a69(0x137)](String));for(const _0x24693f of _0x6320f8){if(!_0x24693f||typeof _0x24693f[_0x2c4a69(0x1b7)]!==_0x2c4a69(0x196))continue;const _0x585800=normalizeToJid(_0x24693f['jid']);if(_0x585800&&_0x4bdbc9[_0x2c4a69(0x144)](_0x585800))return _0x585800;if(_0x4bdbc9['has'](_0x24693f['jid']))return _0x24693f[_0x2c4a69(0x1b7)];}return null;}catch(_0x54abc0){return warn('['+name+(_0x2c4a69(0x133)+_0x2c4a69(0x1dd)+_0x2c4a69(0x1a5))+(_0x54abc0?.[_0x2c4a69(0x157)]||_0x54abc0)),null;}}function tmpFilename(_0x15fe7a=''){const _0x843c62=_0x4631de,_0x2d619f=_0x2b3e2d[_0x843c62(0x123)+'s'](0x1c5c+0x144f+-0x30a3)[_0x843c62(0x173)](_0x843c62(0x143));return _0x55bf81[_0x843c62(0x131)](_0x23bc94[_0x843c62(0x1a6)](),_0x843c62(0x1c4)+_0x2d619f+(_0x15fe7a?'.'+_0x15fe7a:''));}export async function initialize(_0x2970d9){const _0x149527=_0x4631de;botInstance=_0x2970d9,info('['+name+(_0x149527(0x1d3)+_0x149527(0x1cc)+_0x149527(0x182)));}export async function cleanup(){const _0x94a9e0=_0x4631de;botInstance=null,respondedMsgIds[_0x94a9e0(0x154)](),info('['+name+(']\x20cleaned\x20'+'up'));}async function imageBufferToWebp(_0x13e6d9,{pack:pack='tct',author:author=_0x4631de(0x19d),quality:quality=0x5*0xe5+0x24e4+-0x290d}={}){const _0x42e710=_0x4631de,_0x14db4a=await getSharp(),_0x36721b=_0x14db4a(_0x13e6d9,{'animated':![]})[_0x42e710(0x1d1)]()[_0x42e710(0x161)](-0xa2e*-0x1+-0x1*0x692+-0x2*0xce,0x13b3+-0x65a*-0x2+-0x1e67,{'fit':_0x42e710(0x1a3),'position':_0x42e710(0x134)})[_0x42e710(0x166)]({'quality':typeof quality==='number'?quality:0x16*0x26+-0x1ec+-0x108}),_0x1deb28=await _0x36721b[_0x42e710(0x180)]();return _0x1deb28;}function _0x3161(_0x5ac9ed,_0x448ab1){const _0x14e26f=_0x4aad();return _0x3161=function(_0x2c8da7,_0x43e604){_0x2c8da7=_0x2c8da7-(0x1*-0xf87+0x40a*-0x4+0x20d0);let _0x10033f=_0x14e26f[_0x2c8da7];return _0x10033f;},_0x3161(_0x5ac9ed,_0x448ab1);}async function videoBufferToWebp(_0x47d3e1,{maxDurationSec:maxDurationSec=-0x1e71*-0x1+-0x1511+-0x2d*0x35,quality:quality=-0x5*0x6b1+0xd3f+0x1481}={}){const _0x441e18=_0x4631de,{ffmpegLib:_0x2cbf51}=await getFfmpeg(),_0x3e3d98=_0x2cbf51,_0x5aaad6=tmpFilename(_0x441e18(0x1ce)),_0x1b13ba=tmpFilename(_0x441e18(0x166));try{await _0x4305d8[_0x441e18(0x1c8)](_0x5aaad6,_0x47d3e1);const _0x59b792=await new Promise((_0x8e1156,_0x5ce756)=>{const _0x4f9c7d=_0x441e18;_0x3e3d98[_0x4f9c7d(0x199)](_0x5aaad6,(_0x294c4e,_0x276f70)=>{const _0x150dc7=_0x4f9c7d;if(_0x294c4e)return _0x5ce756(_0x294c4e);const _0x4e7441=_0x276f70?.[_0x150dc7(0x165)]?.['duration']||-0xd37+-0x1ee9*0x1+0x2c20;_0x8e1156(Number(_0x4e7441)||-0x18c7+-0xc5d+0x2524);});});if(_0x59b792>maxDurationSec)throw new Error('Video\x20too\x20'+_0x441e18(0x1e8)+Math[_0x441e18(0x1e4)](_0x59b792)+(_0x441e18(0x124)+_0x441e18(0x1d5))+maxDurationSec+'s.');await new Promise((_0x2571ec,_0x53eb4c)=>{const _0x1ea277=_0x441e18;_0x3e3d98(_0x5aaad6)['outputOpti'+_0x1ea277(0x181)]([_0x1ea277(0x18c),_0x1ea277(0x1c5),_0x1ea277(0x175),'scale=512:'+_0x1ea277(0x179)+_0x1ea277(0x1bd)+_0x1ea277(0x1db)+_0x1ea277(0x1ad)+_0x1ea277(0x17d)+_0x1ea277(0x19e)+_0x1ea277(0x16a)+'15','-lossless','0',_0x1ea277(0x127),'0',_0x1ea277(0x184),_0x1ea277(0x150),_0x1ea277(0x15f),'-vsync','0'])[_0x1ea277(0x197)+_0x1ea277(0x181)]([_0x1ea277(0x1c6),String(Math[_0x1ea277(0x12f)](-0x21e+0x1fa9+-0x1d81,Math['min'](-0xd91+0xf86+0x191*-0x1,quality)))])[_0x1ea277(0x1e2)](_0x1b13ba)['on'](_0x1ea277(0x1a4),_0x5c3806=>{const _0x353e1d=_0x1ea277;_0x53eb4c(new Error(_0x353e1d(0x136)+_0x353e1d(0x17b)+_0x353e1d(0x1d7)+'\x20'+(_0x5c3806?.[_0x353e1d(0x157)]||_0x5c3806)));})['on'](_0x1ea277(0x1c3),()=>_0x2571ec())[_0x1ea277(0x128)]();});const _0x110580=await _0x4305d8['readFile'](_0x1b13ba);if(!_0x110580||_0x110580[_0x441e18(0x1a2)]===-0x1*-0xc9d+-0x9a8+-0x2f5*0x1)throw new Error(_0x441e18(0x171)+_0x441e18(0x170)+_0x441e18(0x1be)+'e');return _0x110580;}finally{try{await _0x4305d8['unlink'](_0x5aaad6);}catch(_0x5ed87c){}try{await _0x4305d8[_0x441e18(0x168)](_0x1b13ba);}catch(_0x3ec534){}}}async function webpToMp4(_0x30eb2d){const _0x12ab0a=_0x4631de,{ffmpegLib:_0x130092}=await getFfmpeg(),_0x2b0bb0=_0x130092,_0x146af2=tmpFilename(_0x12ab0a(0x166)),_0x2fd9a8=tmpFilename(_0x12ab0a(0x1ce));try{await _0x4305d8[_0x12ab0a(0x1c8)](_0x146af2,_0x30eb2d),await new Promise((_0x5138e1,_0x52bc86)=>{const _0x4ad660=_0x12ab0a;_0x2b0bb0(_0x146af2)[_0x4ad660(0x197)+'ons'](['-movflags',_0x4ad660(0x1a8),_0x4ad660(0x1aa),_0x4ad660(0x18f),_0x4ad660(0x175),'scale=512:'+_0x4ad660(0x179)+'original_a'+_0x4ad660(0x1db)+'o=increase'+_0x4ad660(0x17d)+_0x4ad660(0x17f),_0x4ad660(0x15f)])[_0x4ad660(0x165)](_0x4ad660(0x1ce))[_0x4ad660(0x1e2)](_0x2fd9a8)['on']('error',_0x457bcc=>_0x52bc86(new Error(_0x4ad660(0x136)+_0x4ad660(0x135)+_0x4ad660(0x139)+(_0x457bcc?.[_0x4ad660(0x157)]||_0x457bcc))))['on'](_0x4ad660(0x1c3),()=>_0x5138e1())['run']();});const _0x2d8cc1=await _0x4305d8[_0x12ab0a(0x1e6)](_0x2fd9a8);if(!_0x2d8cc1||_0x2d8cc1[_0x12ab0a(0x1a2)]===-0x17cc+-0x26fb*0x1+0x3ec7*0x1)throw new Error(_0x12ab0a(0x171)+_0x12ab0a(0x170)+_0x12ab0a(0x16d));return _0x2d8cc1;}finally{try{await _0x4305d8[_0x12ab0a(0x168)](_0x146af2);}catch(_0xb3328d){}try{await _0x4305d8[_0x12ab0a(0x168)](_0x2fd9a8);}catch(_0x457064){}}}async function webpBufferToImage(_0x588ea0,_0x2effa1=_0x4631de(0x1b1)){const _0x11b134=_0x4631de,_0x5882b6=await getSharp(),_0x3ad448=_0x5882b6(_0x588ea0,{'animated':![]});if(_0x2effa1===_0x11b134(0x198)||_0x2effa1===_0x11b134(0x1a7))return _0x3ad448[_0x11b134(0x198)]({'quality':0x5a})[_0x11b134(0x180)]();return _0x3ad448['png']()[_0x11b134(0x180)]();}export async function onMessage(_0x41a9d4){const _0x15a910=_0x4631de;try{if(!_0x41a9d4||!_0x41a9d4[_0x15a910(0x17e)]||!_0x41a9d4[_0x15a910(0x130)])return;if(!botInstance)botInstance=_0x41a9d4[_0x15a910(0x192)]||_0x41a9d4[_0x15a910(0x1ba)]||_0x41a9d4[_0x15a910(0x18d)]||null;const _0x2de72a=_0x41a9d4[_0x15a910(0x17e)]['id'];if(_0x2de72a&&respondedMsgIds[_0x15a910(0x144)](_0x2de72a))return;_0x2de72a&&(respondedMsgIds[_0x15a910(0x132)](_0x2de72a),setTimeout(()=>respondedMsgIds['delete'](_0x2de72a),0x3f8c+0x34c3+0xe1));const _0xc8e70d=(_0x41a9d4['text']||'')[_0x15a910(0x1d4)](),[_0xeb8d17,..._0x4f3054]=_0xc8e70d[_0x15a910(0x1e5)](/\s+/),_0x1ff9be=(_0xeb8d17||'')[_0x15a910(0x138)+'e']();if(!commands[_0x15a910(0x174)](_0x1ff9be))return;const _0x1b341b=_0x41a9d4[_0x15a910(0x17e)][_0x15a910(0x1b6)]||_0x41a9d4[_0x15a910(0x1b6)]||'',_0x5cd154=String(_0x1b341b)[_0x15a910(0x178)](_0x15a910(0x1e3)),_0x4d01d3=getBotJid();let _0x1f5864=_0x1b341b;const _0x5edb6b=Boolean(_0x41a9d4[_0x15a910(0x17e)]?.[_0x15a910(0x14a)]);let _0x31be48=_0x5edb6b;if(_0x5edb6b&&_0x4d01d3)_0x1f5864=_0x4d01d3;if(!_0x31be48){if(_0x5cd154)_0x31be48=await isadmin(botInstance,_0x41a9d4)[_0x15a910(0x1b8)](()=>![]);else{const _0x2c5044=await isSudo(botInstance,_0x41a9d4)[_0x15a910(0x1b8)](()=>![]);if(_0x2c5044){const {findings:_0x3c6f1a}=userJidFromCtx(_0x41a9d4),_0x5d2e3c=await findStoredMatchFromFindings(_0x3c6f1a);_0x5d2e3c&&(_0x31be48=!![],_0x1f5864=_0x5d2e3c);}}}if(!_0x31be48)return;const _0x2bb8e3=_0x4f3054[_0x15a910(0x131)]('\x20');try{switch(_0x1ff9be){case _0x15a910(0x141):case's':await handleStickerCreation(_0x1f5864,_0x2bb8e3,_0x41a9d4);break;case _0x15a910(0x14f):await handleStickerToImage(_0x1f5864,_0x41a9d4);break;case _0x15a910(0x1af):await handleStickerToVideo(_0x1f5864,_0x41a9d4);break;}}catch(_0x45293d){error(_0x45293d,'['+name+(_0x15a910(0x1ac)+_0x15a910(0x12d))+(_0x45293d?.[_0x15a910(0x157)]||_0x45293d));try{await botInstance['sendMessag'+'e'](_0x1f5864,{'text':'An\x20unexpec'+_0x15a910(0x12b)+_0x15a910(0x122)+_0x15a910(0x1d6)+_0x15a910(0x19f)+_0x15a910(0x1c9)},{'quoted':_0x41a9d4['ms']});}catch(_0x4ca881){error(_0x4ca881,'['+name+(_0x15a910(0x1bc)+'o\x20send\x20err'+_0x15a910(0x149)));}}}catch(_0x46847f){error(_0x46847f,'['+name+(_0x15a910(0x145)+_0x15a910(0x13c)+'l\x20error:\x20')+(_0x46847f?.[_0x15a910(0x157)]||_0x46847f));}}async function handleStickerCreation(_0x3a678e,_0x35e475,_0x2360c6){const _0x466a21=_0x4631de,_0x125a45=getQuotedMessage(_0x2360c6),_0x4d06f1=_0x125a45?.[_0x466a21(0x177)+'ge']||_0x2360c6['message']?.[_0x466a21(0x177)+'ge'],_0x5a73bc=_0x125a45?.[_0x466a21(0x169)+'ge']||_0x2360c6[_0x466a21(0x157)]?.[_0x466a21(0x169)+'ge'];if(!_0x4d06f1&&!_0x5a73bc)return botInstance[_0x466a21(0x152)+'e'](_0x3a678e,{'text':_0x466a21(0x1c1)+'eply\x20to\x20an'+_0x466a21(0x1bf)+_0x466a21(0x1dc)+_0x466a21(0x12a)+_0x466a21(0x15b)+_0x466a21(0x1da)},{'quoted':_0x2360c6['ms']});const _0x4523c6=(_0x35e475||'')['trim']()||'tct',_0x45c93c='tct';try{const _0x3d9990=await getBaileysModule(),_0x2b4474=_0x3d9990[_0x466a21(0x14e)+_0x466a21(0x1ab)+_0x466a21(0x13e)]||_0x3d9990[_0x466a21(0x150)]?.[_0x466a21(0x14e)+_0x466a21(0x1ab)+'essage'];if(!_0x2b4474)throw new Error(_0x466a21(0x14e)+_0x466a21(0x1ab)+_0x466a21(0x16b)+'\x20available'+'\x20from\x20@whi'+'skeysocket'+_0x466a21(0x15e));let _0x5f3dcc,_0x1d58b0=![];if(_0x4d06f1){const _0x261038=await _0x2b4474(_0x4d06f1,_0x466a21(0x172));_0x5f3dcc=await streamToBuffer(_0x261038);}else{if(_0x5a73bc){if((_0x5a73bc[_0x466a21(0x1de)]||-0xfee+-0x56*0x56+0x2cd2)>-0x5*-0x47+-0x2093+0x1f3f)return botInstance[_0x466a21(0x152)+'e'](_0x3a678e,{'text':'❌\x20Video\x20is'+'\x20too\x20long.'+_0x466a21(0x17c)+_0x466a21(0x1cf)+_0x466a21(0x125)+_0x466a21(0x1c2)+'s.'},{'quoted':_0x2360c6['ms']});const _0x49fdca=await _0x2b4474(_0x5a73bc,_0x466a21(0x1d2));_0x5f3dcc=await streamToBuffer(_0x49fdca),_0x1d58b0=!![];}}if(!_0x5f3dcc||_0x5f3dcc[_0x466a21(0x1a2)]===-0x1b*0x108+-0x78e+-0x18a*-0x17)throw new Error(_0x466a21(0x1b0)+'uffer\x20obta'+'ined\x20from\x20'+_0x466a21(0x157));let _0x39d40f;!_0x1d58b0?_0x39d40f=await imageBufferToWebp(_0x5f3dcc,{'pack':_0x45c93c,'author':_0x4523c6,'quality':0x50}):_0x39d40f=await videoBufferToWebp(_0x5f3dcc,{'maxDurationSec':0xf,'quality':0x4b});if(!_0x39d40f||_0x39d40f[_0x466a21(0x1a2)]===-0x22b5*-0x1+-0xb98+-0x61*0x3d)throw new Error('Failed\x20to\x20'+'produce\x20st'+'icker\x20buff'+'er');await botInstance[_0x466a21(0x152)+'e'](_0x3a678e,{'sticker':_0x39d40f},{'quoted':_0x2360c6['ms']});}catch(_0x2a0459){error(_0x2a0459,_0x466a21(0x183)+_0x466a21(0x126)+'eation\x20fai'+_0x466a21(0x195));try{await botInstance['sendMessag'+'e'](_0x3a678e,{'text':_0x466a21(0x1b4)+_0x466a21(0x190)+_0x466a21(0x1d8)+(_0x2a0459?.[_0x466a21(0x157)]||_0x2a0459)},{'quoted':_0x2360c6['ms']});}catch(_0x1015a3){error(_0x1015a3,_0x466a21(0x183)+'failed\x20to\x20'+_0x466a21(0x16f)+_0x466a21(0x187));}}}async function handleStickerToImage(_0x454969,_0x4bb8d8){const _0x4c66e5=_0x4631de,_0x254201=getQuotedMessage(_0x4bb8d8);if(!_0x254201?.[_0x4c66e5(0x18b)+'sage'])return botInstance[_0x4c66e5(0x152)+'e'](_0x454969,{'text':_0x4c66e5(0x1c1)+_0x4c66e5(0x159)+_0x4c66e5(0x188)+_0x4c66e5(0x15d)+_0x4c66e5(0x156)+'age.'},{'quoted':_0x4bb8d8['ms']});if(_0x254201[_0x4c66e5(0x18b)+'sage']['isAnimated'])return botInstance['sendMessag'+'e'](_0x454969,{'text':_0x4c66e5(0x153)+'an\x20animate'+_0x4c66e5(0x176)+_0x4c66e5(0x16c)+_0x4c66e5(0x1a0)+_0x4c66e5(0x191)+_0x4c66e5(0x1bb)},{'quoted':_0x4bb8d8['ms']});try{const _0x5f3f85=await getBaileysModule(),_0x5e311d=_0x5f3f85['downloadCo'+'ntentFromM'+_0x4c66e5(0x13e)]||_0x5f3f85[_0x4c66e5(0x150)]?.[_0x4c66e5(0x14e)+_0x4c66e5(0x1ab)+_0x4c66e5(0x13e)];if(!_0x5e311d)throw new Error(_0x4c66e5(0x14e)+_0x4c66e5(0x1ab)+_0x4c66e5(0x16b)+_0x4c66e5(0x14b));const _0x444e35=await _0x5e311d(_0x254201[_0x4c66e5(0x18b)+'sage'],_0x4c66e5(0x172)),_0x1c9b0c=await streamToBuffer(_0x444e35);if(!_0x1c9b0c||_0x1c9b0c[_0x4c66e5(0x1a2)]===-0x1*0x2555+0x393+0x12a*0x1d)throw new Error(_0x4c66e5(0x151)+'ata\x20extrac'+_0x4c66e5(0x1d0)+_0x4c66e5(0x1ae));const _0x7d7897=await webpBufferToImage(_0x1c9b0c,'png');await botInstance[_0x4c66e5(0x152)+'e'](_0x454969,{'image':_0x7d7897,'caption':_0x4c66e5(0x19d)},{'quoted':_0x4bb8d8['ms']});}catch(_0x1d09d7){error(_0x1d09d7,_0x4c66e5(0x183)+'Sticker\x20to'+_0x4c66e5(0x1b3)+_0x4c66e5(0x19c)+_0x4c66e5(0x185));try{await botInstance['sendMessag'+'e'](_0x454969,{'text':_0x4c66e5(0x1b4)+'o\x20convert\x20'+'sticker\x20to'+'\x20image:\x20'+(_0x1d09d7?.['message']||_0x1d09d7)},{'quoted':_0x4bb8d8['ms']});}catch(_0xeb3cb1){error(_0xeb3cb1,'[sticker]\x20'+'failed\x20to\x20'+'send\x20failu'+_0x4c66e5(0x187));}}}async function handleStickerToVideo(_0x5dfdc8,_0x271f86){const _0x1c7135=_0x4631de,_0x2ca5a7=getQuotedMessage(_0x271f86);if(!_0x2ca5a7?.[_0x1c7135(0x18b)+_0x1c7135(0x13b)]||!_0x2ca5a7[_0x1c7135(0x18b)+_0x1c7135(0x13b)][_0x1c7135(0x12c)])return botInstance[_0x1c7135(0x152)+'e'](_0x5dfdc8,{'text':'ℹ️\x20Please\x20r'+_0x1c7135(0x1c0)+'\x20*animated'+_0x1c7135(0x142)+_0x1c7135(0x140)+_0x1c7135(0x1a9)+'ideo.'},{'quoted':_0x271f86['ms']});try{const _0x587f06=await getBaileysModule(),_0x5c8b12=_0x587f06[_0x1c7135(0x14e)+_0x1c7135(0x1ab)+_0x1c7135(0x13e)]||_0x587f06['default']?.[_0x1c7135(0x14e)+'ntentFromM'+_0x1c7135(0x13e)];if(!_0x5c8b12)throw new Error(_0x1c7135(0x14e)+'ntentFromM'+_0x1c7135(0x16b)+'\x20available');let _0x32792c,_0x2aa7f1;try{_0x32792c=await _0x5c8b12(_0x2ca5a7[_0x1c7135(0x18b)+'sage'],_0x1c7135(0x1d2)),_0x2aa7f1=await streamToBuffer(_0x32792c);}catch(_0x364b6b){_0x32792c=await _0x5c8b12(_0x2ca5a7[_0x1c7135(0x18b)+_0x1c7135(0x13b)],_0x1c7135(0x172)),_0x2aa7f1=await streamToBuffer(_0x32792c);}if(!_0x2aa7f1||_0x2aa7f1[_0x1c7135(0x1a2)]===-0x1223+-0x15*0x95+-0x1e5c*-0x1)throw new Error(_0x1c7135(0x1cd)+_0x1c7135(0x1cb)+_0x1c7135(0x1d0)+_0x1c7135(0x1ae));const _0x5d3806=await webpToMp4(_0x2aa7f1);if(!_0x5d3806||_0x5d3806[_0x1c7135(0x1a2)]===0x1*-0xe83+-0x2071*-0x1+-0x11ee)throw new Error(_0x1c7135(0x160)+_0x1c7135(0x193)+_0x1c7135(0x19b)+_0x1c7135(0x13a));await botInstance[_0x1c7135(0x152)+'e'](_0x5dfdc8,{'video':_0x5d3806,'caption':_0x1c7135(0x19d)},{'quoted':_0x271f86['ms']});}catch(_0x572be2){error(_0x572be2,_0x1c7135(0x183)+_0x1c7135(0x167)+_0x1c7135(0x1ca)+_0x1c7135(0x19c)+'iled');try{await botInstance[_0x1c7135(0x152)+'e'](_0x5dfdc8,{'text':'❌\x20Failed\x20t'+_0x1c7135(0x1e7)+_0x1c7135(0x188)+_0x1c7135(0x12e)+(_0x572be2?.['message']||_0x572be2)},{'quoted':_0x271f86['ms']});}catch(_0x16bd5a){error(_0x16bd5a,_0x1c7135(0x183)+_0x1c7135(0x121)+_0x1c7135(0x16f)+'re\x20message');}}}