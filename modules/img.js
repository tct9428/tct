const _0x42abf0=_0x43ac;(function(_0x38c12c,_0xf7b20){const _0x21bdbd=_0x43ac,_0x1b017a=_0x38c12c();while(!![]){try{const _0x8e0551=parseInt(_0x21bdbd(0x1fe))/(0x1dc*0x15+0x54a+-0x2c55)+-parseInt(_0x21bdbd(0x1ed))/(0x9f4+-0x57b+0x1*-0x477)+parseInt(_0x21bdbd(0x1a6))/(-0x7*0x24a+-0x12b*-0x19+-0xd2a)+-parseInt(_0x21bdbd(0x1ea))/(0x199*0x3+0x20*0x3b+0x3*-0x40d)*(parseInt(_0x21bdbd(0x1f8))/(0x459+-0x124c+0xdf8))+-parseInt(_0x21bdbd(0x1db))/(-0x177d+0x124f+0x29a*0x2)+-parseInt(_0x21bdbd(0x1bd))/(-0xea0+0x419*0x5+-0x2eb*0x2)+parseInt(_0x21bdbd(0x1d1))/(0xc11+0x1f21+-0x2b2a);if(_0x8e0551===_0xf7b20)break;else _0x1b017a['push'](_0x1b017a['shift']());}catch(_0x261455){_0x1b017a['push'](_0x1b017a['shift']());}}}(_0x49b6,0x1920e8+0x16c010+-0x2141d1));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x27d670 from'axios';export const name=_0x42abf0(0x1d8);export const version=_0x42abf0(0x203);function _0x49b6(){const _0x4e3577=['ror:\x20','C2&first=1','ch\x20failed\x20','ble;\x20Bot/1','max','your\x20searc','bot','map','slice','fromMe','term.\x20Exam','text','.com)','ch\x20failed:','\x22\x20(sending','thumb','Searching\x20','edMatch\x20er','29900840pkYYvU','right\x20now.','data',':\x20findStor','ples:\x0a•\x20im','message','isNaN','img','http','t\x20determin','10296738EKYyto','arch\x20faile','\x0a•\x20img\x203\x20:','for\x20messag','toLowerCas','exec','://example','\x20cleanup\x20e','murl','Image\x20sear','join','split',':\x20initiali',':\x20sent\x20','has','885232yLzAer','ge\x20error','Found\x20(no\x20','1472530QDvksP','g\x20cats\x0a•\x20i','&form=HDRS','Result:\x20','e\x20final\x20de','No\x20images\x20','\x20handler\x20e','mg\x201\x20trees','Which\x20imag',')...','h\x20term.','10OfhfRm','url','&tsc=Image','get','parse','replace','20923DGMXGd','stination\x20','\x20sunsets','images\x20for','key','1.0.8','\x20cleaned\x20u','zed.','string','length','4321473amOehH','direct\x20URL','trim','/images/se','BasicHover','\x20a\x20search\x20',':\x20send\x20ima',':\x20Could\x20no','\x20images\x20to','push','https://ww',':\x20image\x20se','from',':\x20\x22$1\x22','jid','\x22$2\x22:','Source:\x20','unknown','sourcePage','turl','sendMessag','startsWith','nce\x20missin','9420376hWIngq','clear'];_0x49b6=function(){return _0x4e3577;};return _0x49b6();}function _0x43ac(_0x4bd2a9,_0x5178c1){const _0x4f4f7a=_0x49b6();return _0x43ac=function(_0x2c35de,_0x4b5c21){_0x2c35de=_0x2c35de-(0x5*0x4a3+0x21eb+0xc*-0x49f);let _0x1ec192=_0x4f4f7a[_0x2c35de];return _0x1ec192;},_0x43ac(_0x4bd2a9,_0x5178c1);}export const priority=-0x2da+0x16ac+-0x13c8;let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x54388a=[]){const _0x31a3c6=_0x42abf0;try{const _0x2b9139=await listSudo(),_0xfd120c=new Set(_0x2b9139[_0x31a3c6(0x1c6)](String));for(const _0x243f26 of _0x54388a){if(!_0x243f26||typeof _0x243f26[_0x31a3c6(0x1b4)]!=='string')continue;const _0x1e7cde=normalizeToJid(_0x243f26[_0x31a3c6(0x1b4)]);if(_0x1e7cde&&_0xfd120c[_0x31a3c6(0x1e9)](_0x1e7cde))return _0x1e7cde;if(_0xfd120c['has'](_0x243f26[_0x31a3c6(0x1b4)]))return _0x243f26[_0x31a3c6(0x1b4)];}return null;}catch(_0x3f989a){return warn(name+(_0x31a3c6(0x1d4)+_0x31a3c6(0x1d0)+_0x31a3c6(0x1bf))+(_0x3f989a?.[_0x31a3c6(0x1d6)]||_0x3f989a)),null;}}function htmlUnescape(_0x2d0931){const _0x596c35=_0x42abf0;if(!_0x2d0931||typeof _0x2d0931!==_0x596c35(0x206))return _0x2d0931;return _0x2d0931['replace'](/&quot;/g,'\x22')[_0x596c35(0x1fd)](/&#39;/g,'\x27')['replace'](/&amp;/g,'&')['replace'](/&lt;/g,'<')['replace'](/&gt;/g,'>')[_0x596c35(0x1fd)](/&nbsp;/g,'\x20');}function tryParseJsonSafe(_0xc064){const _0x3b1ae1=_0x42abf0;if(!_0xc064||typeof _0xc064!=='string')return null;try{return JSON[_0x3b1ae1(0x1fc)](_0xc064);}catch(_0x2be4aa){try{const _0x15081d=htmlUnescape(_0xc064);return JSON['parse'](_0x15081d);}catch(_0x41f95c){try{const _0x2b817c=htmlUnescape(_0xc064)[_0x3b1ae1(0x1fd)](/(['"])?([a-zA-Z0-9_]+)\1\s*:/g,_0x3b1ae1(0x1b5))[_0x3b1ae1(0x1fd)](/:\s*'([^']*)'/g,_0x3b1ae1(0x1b3));return JSON['parse'](_0x2b817c);}catch(_0x508a9e){return null;}}}}async function searchBingNoCheerio(_0x2802f5,_0x3f5424=0xc97*-0x3+-0x1d14+0x42e1){const _0x1fcb17=_0x42abf0;try{const _0x208e13=encodeURIComponent(_0x2802f5),_0x2cebf6=_0x1fcb17(0x1b0)+'w.bing.com'+_0x1fcb17(0x1a9)+'arch?q='+_0x208e13+(_0x1fcb17(0x1ef)+_0x1fcb17(0x1c0)+_0x1fcb17(0x1fa)+_0x1fcb17(0x1aa)),_0x4ff801=await _0x27d670[_0x1fcb17(0x1fb)](_0x2cebf6,{'headers':{'User-Agent':'Mozilla/5.'+'0\x20(compati'+_0x1fcb17(0x1c2)+'.0;\x20+https'+_0x1fcb17(0x1e1)+_0x1fcb17(0x1cb)},'responseType':_0x1fcb17(0x1ca),'maxRedirects':0x5}),_0x532606=String(_0x4ff801[_0x1fcb17(0x1d3)]||''),_0x11c746=/ m=(?:"([^"]+)"|'([^']+)')/g,_0x3a42a6=[];let _0x38fc7f;while((_0x38fc7f=_0x11c746[_0x1fcb17(0x1e0)](_0x532606))&&_0x3a42a6[_0x1fcb17(0x207)]<_0x3f5424){const _0x28c87f=_0x38fc7f[0x21d3+-0x90+-0x2142]||_0x38fc7f[-0x431+0x13*0x136+-0x141*0xf];if(!_0x28c87f)continue;const _0x82b87c=htmlUnescape(_0x28c87f),_0xce1fc=tryParseJsonSafe(_0x82b87c);if(!_0xce1fc)continue;const _0x29df80=_0xce1fc[_0x1fcb17(0x1e3)]||_0xce1fc['m']||_0xce1fc[_0x1fcb17(0x1b9)]||_0xce1fc['p']||null;if(!_0x29df80)continue;_0x3a42a6[_0x1fcb17(0x1af)]({'url':_0x29df80,'thumb':_0xce1fc[_0x1fcb17(0x1b9)]||null,'sourcePage':_0xce1fc['p']||null,'title':_0xce1fc['t']||null});}if(_0x3a42a6[_0x1fcb17(0x207)]===0x11*-0x13d+-0x850+-0x1*-0x1d5d){const _0x59d83c=/<img[^>]+(?:data-src|src|data-thumb)=["']([^"']+)["'][^>]*>/g;while((_0x38fc7f=_0x59d83c[_0x1fcb17(0x1e0)](_0x532606))&&_0x3a42a6[_0x1fcb17(0x207)]<_0x3f5424){const _0x53f4ec=_0x38fc7f[-0x24f5+-0x10ea+-0x1af*-0x20];_0x53f4ec&&String(_0x53f4ec)[_0x1fcb17(0x1bb)](_0x1fcb17(0x1d9))&&_0x3a42a6['push']({'url':_0x53f4ec,'thumb':_0x53f4ec,'sourcePage':null,'title':null});}}return _0x3a42a6['slice'](-0x203e+-0x11c9+0x58f*0x9,_0x3f5424);}catch(_0x56df41){throw _0x56df41;}}async function performImageSearch(_0x5e8e3f,_0x85b95b=-0x165+-0x2117+0x2284){const _0x873bbd=_0x42abf0;try{const _0x1c7be0=await searchBingNoCheerio(_0x5e8e3f,_0x85b95b);return _0x1c7be0;}catch(_0x36376b){throw new Error(_0x873bbd(0x1e4)+_0x873bbd(0x1cc)+'\x20'+(_0x36376b?.[_0x873bbd(0x1d6)]||_0x36376b));}}export async function initialize(_0x3866dd){const _0x24c841=_0x42abf0;botInstance=_0x3866dd,info(name+(_0x24c841(0x1e7)+_0x24c841(0x205)));}export async function onMessage(_0x404c38){const _0x23fdbc=_0x42abf0;try{if(!_0x404c38?.['key']||!_0x404c38['isCommand'])return;const _0x55f6f6=_0x404c38[_0x23fdbc(0x202)]['id'];if(_0x55f6f6&&respondedMsgIds[_0x23fdbc(0x1e9)](_0x55f6f6))return;if(_0x55f6f6)respondedMsgIds['add'](_0x55f6f6);const _0x59dfd4=(_0x404c38[_0x23fdbc(0x1ca)]||'')['trim']();if(!_0x59dfd4[_0x23fdbc(0x1df)+'e']()[_0x23fdbc(0x1bb)](_0x23fdbc(0x1d8)))return;const _0x55f24b=_0x59dfd4[_0x23fdbc(0x1e6)](/\s+/),_0xe9ee63=_0x55f24b[-0xa4d+0xdee*-0x2+0x2629][_0x23fdbc(0x1df)+'e']();if(_0xe9ee63!==_0x23fdbc(0x1d8))return;if(!botInstance)botInstance=_0x404c38[_0x23fdbc(0x1c5)]||_0x404c38['client'];if(!botInstance){warn(name+(':\x20botInsta'+_0x23fdbc(0x1bc)+'g'));return;}const _0xf44a22=getBotJid();let _0x1c8109;if(_0x404c38[_0x23fdbc(0x202)][_0x23fdbc(0x1c8)])_0x1c8109=_0xf44a22;else{const _0x3823d4=await isSudo(botInstance,_0x404c38)['catch'](()=>![]);if(!_0x3823d4)return;const {findings:_0x19d49f}=userJidFromCtx(_0x404c38),_0x4475b8=await findStoredMatchFromFindings(_0x19d49f);if(!_0x4475b8)return;_0x1c8109=_0x4475b8;}if(!_0x1c8109){warn(name+(_0x23fdbc(0x1ad)+_0x23fdbc(0x1da)+_0x23fdbc(0x1f1)+_0x23fdbc(0x1ff)+_0x23fdbc(0x1de)+'e.'));return;}let _0xa63ae8=-0x1*-0x197b+-0x7*-0x289+-0x2b34*0x1,_0x1db33f=_0x55f24b['slice'](0xc03+0xb14*0x2+-0x222a)['join']('\x20');if(_0x55f24b['length']>=-0x47a+0x1f98+0x6c7*-0x4){const _0x495e2e=parseInt(_0x55f24b[0x7e0+0x14b*0x1b+-0x2ac8],0x219*0x11+0x163*0x11+0x1*-0x3b32);if(!Number[_0x23fdbc(0x1d7)](_0x495e2e)){_0xa63ae8=Math[_0x23fdbc(0x1c3)](0x2115+-0x1421+-0xdd*0xf,_0x495e2e);if(_0xa63ae8>-0x2b3*-0x7+0x1*0x16db+-0x7*0x5f6)_0xa63ae8=-0xf19+-0x20c8*-0x1+-0x11a9;_0x1db33f=_0x55f24b[_0x23fdbc(0x1c7)](-0x28*0x57+0x16da+-0x1*0x940)[_0x23fdbc(0x1e5)]('\x20');}else _0xa63ae8=-0x4ff+0x1*-0x1166+0x166b,_0x1db33f=_0x55f24b[_0x23fdbc(0x1c7)](-0x105*0x25+0x1e05+0x7b5)[_0x23fdbc(0x1e5)]('\x20');}_0x1db33f=(_0x1db33f||'')[_0x23fdbc(0x1a8)]();if(!_0x1db33f){await botInstance[_0x23fdbc(0x1ba)+'e'](_0x1c8109,{'text':_0x23fdbc(0x1f5)+'e?\x20Provide'+_0x23fdbc(0x1ab)+_0x23fdbc(0x1c9)+_0x23fdbc(0x1d5)+_0x23fdbc(0x1ee)+_0x23fdbc(0x1f4)+_0x23fdbc(0x1dd)+_0x23fdbc(0x200)});return;}try{await botInstance[_0x23fdbc(0x1ba)+'e'](_0x1c8109,{'text':_0x23fdbc(0x1cf)+_0x23fdbc(0x201)+'\x20\x22'+_0x1db33f+(_0x23fdbc(0x1cd)+'\x20')+_0xa63ae8+_0x23fdbc(0x1f6)},{'quoted':_0x404c38['ms']});}catch(_0x9ee247){try{await botInstance[_0x23fdbc(0x1ba)+'e'](_0x1c8109,{'text':_0x23fdbc(0x1cf)+_0x23fdbc(0x201)+'\x20\x22'+_0x1db33f+(_0x23fdbc(0x1cd)+'\x20')+_0xa63ae8+_0x23fdbc(0x1f6)});}catch(_0x5bc0fc){}}let _0x517665;try{_0x517665=await performImageSearch(_0x1db33f,Math['max'](0x20e0+0xfe0+-0x1*0x30bf,_0xa63ae8));}catch(_0x32f323){error(_0x32f323,name+(_0x23fdbc(0x1b1)+_0x23fdbc(0x1dc)+'d')),await botInstance['sendMessag'+'e'](_0x1c8109,{'text':_0x23fdbc(0x1e4)+_0x23fdbc(0x1c1)+_0x23fdbc(0x1d2)});return;}if(!Array['isArray'](_0x517665)||_0x517665[_0x23fdbc(0x207)]===-0x1*0x1f75+0x2667+0x2*-0x379){await botInstance['sendMessag'+'e'](_0x1c8109,{'text':_0x23fdbc(0x1f2)+'found\x20for\x20'+_0x23fdbc(0x1c4)+_0x23fdbc(0x1f7)});return;}const _0x975626=_0x517665['slice'](-0x2231+-0x1f16+0x4147,_0xa63ae8);for(const _0x3663b9 of _0x975626){try{_0x3663b9[_0x23fdbc(0x1f9)]&&String(_0x3663b9[_0x23fdbc(0x1f9)])[_0x23fdbc(0x1bb)](_0x23fdbc(0x1d9))?await botInstance[_0x23fdbc(0x1ba)+'e'](_0x1c8109,{'image':{'url':_0x3663b9[_0x23fdbc(0x1f9)]},'caption':_0x23fdbc(0x1f0)+_0x1db33f},{'quoted':_0x404c38['ms']}):await botInstance[_0x23fdbc(0x1ba)+'e'](_0x1c8109,{'text':_0x23fdbc(0x1ec)+_0x23fdbc(0x1a7)+'):\x20'+(_0x3663b9[_0x23fdbc(0x1b8)]||_0x3663b9[_0x23fdbc(0x1ce)]||_0x23fdbc(0x1b7))});}catch(_0x26907e){error(_0x26907e,name+(_0x23fdbc(0x1ac)+_0x23fdbc(0x1eb)));if(_0x3663b9[_0x23fdbc(0x1b8)])try{await botInstance['sendMessag'+'e'](_0x1c8109,{'text':_0x23fdbc(0x1b6)+_0x3663b9[_0x23fdbc(0x1b8)]});}catch(_0x76dfa3){}}}info(name+_0x23fdbc(0x1e8)+_0x975626[_0x23fdbc(0x207)]+(_0x23fdbc(0x1ae)+'\x20')+_0x1c8109);if(respondedMsgIds['size']>-0x1*-0x227e+-0x9f*-0x3e+-0x3578){const _0x5851bf=Array[_0x23fdbc(0x1b2)](respondedMsgIds);respondedMsgIds=new Set(_0x5851bf[_0x23fdbc(0x1c7)](-(-0x1*-0x70b+0xe6*-0x26+-0x20b*-0x13)));}}catch(_0x14c470){error(_0x14c470,name+(_0x23fdbc(0x1f3)+'rror'));}}export async function cleanup(){const _0x2bf551=_0x42abf0;try{botInstance=null,respondedMsgIds[_0x2bf551(0x1be)](),info(name+(_0x2bf551(0x204)+'p'));}catch(_0x257b2a){warn(name+(_0x2bf551(0x1e2)+'rror:\x20')+(_0x257b2a?.[_0x2bf551(0x1d6)]||_0x257b2a));}}