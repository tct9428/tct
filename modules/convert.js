const _0x453753=_0x3a71;(function(_0x16b2b8,_0x4059a0){const _0x15f26d=_0x3a71,_0x3e98c8=_0x16b2b8();while(!![]){try{const _0x33e9c2=-parseInt(_0x15f26d(0x1cd))/(-0x2d2*0x2+-0xa79*-0x1+0x1*-0x4d4)*(parseInt(_0x15f26d(0x1e7))/(-0x1*0x15e6+0x1d*0x51+0xcbb*0x1))+parseInt(_0x15f26d(0x23f))/(0x13f1+0x2332+-0x3720)+-parseInt(_0x15f26d(0x1ef))/(-0x3*-0x18f+0x13ac+-0x1855)*(parseInt(_0x15f26d(0x23e))/(0x3d*-0xa1+-0xb47+0x31a9))+parseInt(_0x15f26d(0x209))/(-0x5f8*0x5+0x2c*-0x4b+0x2ac2)*(parseInt(_0x15f26d(0x1ea))/(0x3*-0xb9a+-0x1*-0x235f+-0x8a))+-parseInt(_0x15f26d(0x210))/(0x499*0x8+-0x2337+0x1*-0x189)+parseInt(_0x15f26d(0x1de))/(-0x1b72+-0x1d1+-0xc*-0x271)+parseInt(_0x15f26d(0x221))/(-0x9b0+0x4c5*-0x1+0xe7f);if(_0x33e9c2===_0x4059a0)break;else _0x3e98c8['push'](_0x3e98c8['shift']());}catch(_0x227656){_0x3e98c8['push'](_0x3e98c8['shift']());}}}(_0x2e10,-0x57bd*0x18+0x13*0xe806+0x6*0x6217));import{info,warn,error}from'../utils/logger.js';function _0x3a71(_0x3005f3,_0x2caba4){_0x3005f3=_0x3005f3-(-0xae3+-0x16*0x1c3+0x3370);const _0x46288c=_0x2e10();let _0x2af02e=_0x46288c[_0x3005f3];return _0x2af02e;}import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x453753(0x1fa)+'rt';export const version='1.1.1';function _0x2e10(){const _0x217b91=['cutmp3',']\x20botInsta','toLowerCas','5537190zfLQOe','‚ÑπÔ∏è\x20Invalid\x20','üì•\x20Converti','filter','replace','ath','save','8199288bHcNhc','‚ùå\x20Failed\x20t','pendencies','writeFile','`.cutmp3\x20<','ut\x20it.','e\x20or\x20voice','video\x20to\x20c','\x20and\x20use:\x0a',']\x20findStor','setFfmpegP','essage','quotedMess','add','‚ùå\x20Conversi','s>`\x0a','noVideo','28332650fQfIWJ','‚úÇÔ∏è\x20Cutting\x20','endsWith','ds>\x20<endSe','o\x20trim\x20the','text','catch','id\x20audio\x20f',']\x20media\x20de','.ogg','concat',']\x20failed\x20t','ce\x20note.','sendMessag','push','has','message','map',']\x20cutmp3\x20e','\x20note\x20to\x20c','e\x20error','rror','jid','delete','error','format.\x20Re','audioBitra','join','ntentFromM','2958265IzEdhm','526857XMJlCN','downloadCo','ds>`\x0a','ply\x20to\x20a\x20','remoteJid','split',']\x20tomp3\x20er','string','audioMessa','ia\x20depende','end','audio/mpeg','audio_','...','fromMe','1329xqmkxT','o\x20load\x20med','video','videoMessa','audio','age','setDuratio','from','‚ÑπÔ∏è\x20Please\x20r','\x20loaded.','zed.','audioCodec','contextInf','to\x20MP3.','client','ror','duration','1711251TrcAiV',']\x20cleaned\x20','includes','`.cutmp3\x20-','default','.mp3','condsToRem','trim','ffprobe','1766FAQKAu','Make\x20sure\x20','cut_','7BUgTRY','extendedTe',']\x20onMessag','readFile','onvert\x20it\x20','8EEeMvH','quoted','setStartTi','ror:\x20','your\x20','d\x20to\x20a\x20val','tmpdir','\x20audio\x20fil','startSecon','clear','eply\x20to\x20a\x20','mediaconve',']\x20initiali','edMatch\x20er','unlink','ncies','ile\x20or\x20voi','128k','promises','length','now','.mp4','key'];_0x2e10=function(){return _0x217b91;};return _0x2e10();}export const priority=-0xcd4+0xe56+-0x178;export const commands=['tomp3',_0x453753(0x206)];let botInstance=null,respondedMsgIds=new Set(),_mediaDeps=null;async function getMediaDependencies(){const _0x3d2660=_0x453753;if(_mediaDeps)return _mediaDeps;try{const _0x4e9e40=await import('@whiskeysockets/baileys'),_0x2c68df=await import('fluent-ffmpeg'),_0x3f9419=_0x2c68df['default'],_0xd4ba16=(await import('@ffmpeg-installer/ffmpeg'))['path'],_0x3ad74c=(await import('fs'))[_0x3d2660(0x201)],_0x399f60=(await import('os'))[_0x3d2660(0x1e2)],_0x36a355=(await import('path'))[_0x3d2660(0x1e2)];return _0x3f9419[_0x3d2660(0x21a)+_0x3d2660(0x20e)](_0xd4ba16),_mediaDeps={'downloadContentFromMessage':_0x4e9e40[_0x3d2660(0x240)+_0x3d2660(0x23d)+_0x3d2660(0x21b)],'ffmpeg':_0x3f9419,'fs':_0x3ad74c,'os':_0x399f60,'path':_0x36a355},info('['+name+(_0x3d2660(0x229)+_0x3d2660(0x212)+_0x3d2660(0x1d6))),_mediaDeps;}catch(_0x1bca29){error(_0x1bca29,'['+name+(_0x3d2660(0x22c)+_0x3d2660(0x1ce)+_0x3d2660(0x248)+_0x3d2660(0x1fe)));throw _0x1bca29;}}async function streamToBuffer(_0x43a7e0){const _0x4c9f0d=_0x453753,_0x31e888=[];for await(const _0x2b40a2 of _0x43a7e0){_0x31e888[_0x4c9f0d(0x22f)](Buffer['isBuffer'](_0x2b40a2)?_0x2b40a2:Buffer[_0x4c9f0d(0x1d4)](_0x2b40a2));}return Buffer[_0x4c9f0d(0x22b)](_0x31e888);}const getQuotedMessage=_0x2efb27=>{const _0x2fbdf2=_0x453753;return _0x2efb27['message']?.[_0x2fbdf2(0x1eb)+'xtMessage']?.[_0x2fbdf2(0x1d9)+'o']?.[_0x2fbdf2(0x21c)+_0x2fbdf2(0x1d2)]||_0x2efb27[_0x2fbdf2(0x1f0)]||null;};async function findStoredMatchFromFindings(_0x26c5da=[]){const _0xbb9f32=_0x453753;try{const _0x345ac8=await listSudo(),_0x3d6c04=new Set(_0x345ac8[_0xbb9f32(0x232)](String));for(const _0x464d89 of _0x26c5da){if(!_0x464d89?.[_0xbb9f32(0x237)]||typeof _0x464d89[_0xbb9f32(0x237)]!==_0xbb9f32(0x246))continue;const _0xc1ac08=normalizeToJid(_0x464d89[_0xbb9f32(0x237)]);if(_0xc1ac08&&_0x3d6c04[_0xbb9f32(0x230)](_0xc1ac08))return _0xc1ac08;if(_0x3d6c04['has'](_0x464d89[_0xbb9f32(0x237)]))return _0x464d89[_0xbb9f32(0x237)];}return null;}catch(_0x16b89b){return warn('['+name+(_0xbb9f32(0x219)+_0xbb9f32(0x1fc)+_0xbb9f32(0x1f2))+(_0x16b89b?.['message']||_0x16b89b)),null;}}export async function initialize(_0x391447){const _0x5dafa3=_0x453753;botInstance=_0x391447,info('['+name+(_0x5dafa3(0x1fb)+_0x5dafa3(0x1d7)));}export async function cleanup(){const _0x13f903=_0x453753;botInstance=null,respondedMsgIds[_0x13f903(0x1f8)](),info('['+name+(_0x13f903(0x1df)+'up'));}export async function onMessage(_0x5d0d98){const _0x4bffe1=_0x453753;try{if(!_0x5d0d98?.[_0x4bffe1(0x205)]||!_0x5d0d98['isCommand'])return;const _0x4bf505=_0x5d0d98[_0x4bffe1(0x205)]['id'];if(_0x4bf505&&respondedMsgIds['has'](_0x4bf505))return;_0x4bf505&&(respondedMsgIds[_0x4bffe1(0x21d)](_0x4bf505),setTimeout(()=>respondedMsgIds[_0x4bffe1(0x238)](_0x4bf505),-0x821c*-0x1+-0x8a5e+0x7d72*0x1));const _0x31529d=(_0x5d0d98[_0x4bffe1(0x226)]||'')['trim'](),[_0x2c74c6,..._0x2d6568]=_0x31529d[_0x4bffe1(0x244)](/\s+/),_0x9d07af=_0x2c74c6[_0x4bffe1(0x208)+'e']();if(!commands[_0x4bffe1(0x1e0)](_0x9d07af))return;const _0x114e6e=_0x5d0d98[_0x4bffe1(0x243)]||_0x5d0d98[_0x4bffe1(0x205)][_0x4bffe1(0x243)]||'';if(_0x114e6e[_0x4bffe1(0x223)]('@g.us')){info('['+name+(']:\x20ignorin'+'g\x20group\x20')+_0x114e6e);return;}if(!botInstance){botInstance=_0x5d0d98['bot']||_0x5d0d98[_0x4bffe1(0x1db)]||null;if(!botInstance){warn('['+name+(_0x4bffe1(0x207)+'nce\x20missin'+'g.'));return;}}const _0x3a7147=getBotJid();let _0x206c27=_0x3a7147;if(!_0x5d0d98[_0x4bffe1(0x205)][_0x4bffe1(0x1cc)]){const _0x354936=await isSudo(botInstance,_0x5d0d98)[_0x4bffe1(0x227)](()=>![]);if(!_0x354936)return;const {findings:_0x565dd1}=userJidFromCtx(_0x5d0d98),_0x3d59c8=await findStoredMatchFromFindings(_0x565dd1);if(!_0x3d59c8)return;_0x206c27=_0x3d59c8;}switch(_0x9d07af){case'tomp3':await handleVideoToMp3(_0x206c27,_0x2d6568[_0x4bffe1(0x23c)]('\x20'),_0x5d0d98);break;case _0x4bffe1(0x206):await handleCutMp3(_0x206c27,_0x2d6568,_0x5d0d98);break;}}catch(_0x11b1f2){error(_0x11b1f2,'['+name+(_0x4bffe1(0x1ec)+_0x4bffe1(0x235)));}}async function handleVideoToMp3(_0x17ec49,_0x181fd1,_0x3d4886){const _0x31512d=_0x453753,_0x403752=getQuotedMessage(_0x3d4886);if(!_0x403752?.[_0x31512d(0x1d0)+'ge'])return botInstance[_0x31512d(0x22e)+'e'](_0x17ec49,{'text':_0x31512d(0x1d5)+_0x31512d(0x1f9)+_0x31512d(0x217)+_0x31512d(0x1ee)+_0x31512d(0x1da)},{'quoted':_0x3d4886['ms']});const _0x1bcb77=(_0x181fd1||_0x31512d(0x24b)+Date['now']())['replace'](/[^a-z0-9\s-]/gi,'')[_0x31512d(0x1e5)]()+_0x31512d(0x1e3);try{await botInstance[_0x31512d(0x22e)+'e'](_0x17ec49,{'text':_0x31512d(0x20b)+'ng\x20video\x20t'+'o\x20MP3...'},{'quoted':_0x3d4886['ms']});const {downloadContentFromMessage:_0x506326,ffmpeg:_0x3a0364,fs:_0x5e5b2c,os:_0x7b241,path:_0x3eb880}=await getMediaDependencies(),_0xc52fca=await _0x506326(_0x403752[_0x31512d(0x1d0)+'ge'],_0x31512d(0x1cf)),_0xcc768d=await streamToBuffer(_0xc52fca),_0x4c9d7a=_0x3eb880[_0x31512d(0x23c)](_0x7b241['tmpdir'](),'in_'+Date[_0x31512d(0x203)]()+_0x31512d(0x204)),_0x4f58de=_0x3eb880['join'](_0x7b241['tmpdir'](),_0x1bcb77);await _0x5e5b2c['writeFile'](_0x4c9d7a,_0xcc768d),await new Promise((_0x26fcfc,_0x36e6e6)=>{const _0x1f9553=_0x31512d;_0x3a0364(_0x4c9d7a)[_0x1f9553(0x220)]()['audioCodec']('libmp3lame')[_0x1f9553(0x23b)+'te'](_0x1f9553(0x200))[_0x1f9553(0x20f)](_0x4f58de)['on']('end',_0x26fcfc)['on']('error',_0x1b8eb8=>_0x36e6e6(_0x1b8eb8));});const _0xfc51b2=await _0x5e5b2c[_0x31512d(0x1ed)](_0x4f58de);await botInstance[_0x31512d(0x22e)+'e'](_0x17ec49,{'audio':_0xfc51b2,'mimetype':_0x31512d(0x24a),'fileName':_0x1bcb77},{'quoted':_0x3d4886['ms']}),await _0x5e5b2c[_0x31512d(0x1fd)](_0x4c9d7a)['catch'](()=>{}),await _0x5e5b2c['unlink'](_0x4f58de)['catch'](()=>{});}catch(_0x56c380){error(_0x56c380,'['+name+(_0x31512d(0x245)+_0x31512d(0x1dc))),await botInstance[_0x31512d(0x22e)+'e'](_0x17ec49,{'text':_0x31512d(0x21e)+'on\x20failed:'+'\x20'+_0x56c380[_0x31512d(0x231)]},{'quoted':_0x3d4886['ms']});}}async function handleCutMp3(_0x36e85d,_0x50a1f1,_0x184d23){const _0x5ec0c9=_0x453753,_0x48faa4=getQuotedMessage(_0x184d23);if(!_0x48faa4?.[_0x5ec0c9(0x247)+'ge'])return botInstance[_0x5ec0c9(0x22e)+'e'](_0x36e85d,{'text':_0x5ec0c9(0x1d5)+'eply\x20to\x20an'+_0x5ec0c9(0x1f6)+_0x5ec0c9(0x216)+_0x5ec0c9(0x234)+_0x5ec0c9(0x215)},{'quoted':_0x184d23['ms']});const _0x391691=_0x48faa4['audioMessa'+'ge']['ptt']===!![],_0x4cb43f=_0x391691?'voice\x20note':_0x5ec0c9(0x1d1),_0x2038f9=_0x50a1f1[_0x5ec0c9(0x232)](_0x4cdece=>parseFloat(_0x4cdece))[_0x5ec0c9(0x20c)](_0x242f5d=>!isNaN(_0x242f5d)),_0x3d0341=_0x50a1f1[_0x5ec0c9(0x20c)](_0xa5473d=>isNaN(parseFloat(_0xa5473d)))[_0x5ec0c9(0x23c)]('\x20')[_0x5ec0c9(0x1e5)](),_0x1907bd=(_0x3d0341||_0x5ec0c9(0x1e9)+Date['now']())[_0x5ec0c9(0x20d)](/[^a-z0-9\s-]/gi,'')['trim']()+_0x5ec0c9(0x1e3);if(_0x2038f9['length']===-0x10*-0x24d+-0x1*0x265a+0x18a||_0x2038f9[_0x5ec0c9(0x202)]>0x2*-0xc43+-0x1*-0x10c5+-0x7c3*-0x1)return botInstance[_0x5ec0c9(0x22e)+'e'](_0x36e85d,{'text':_0x5ec0c9(0x20a)+_0x5ec0c9(0x23a)+_0x5ec0c9(0x242)+_0x4cb43f+_0x5ec0c9(0x218)+(_0x5ec0c9(0x214)+_0x5ec0c9(0x1f7)+_0x5ec0c9(0x241))+(_0x5ec0c9(0x1e1)+'<endSecond'+_0x5ec0c9(0x21f))+('`.cutmp3\x20<'+'startSecon'+_0x5ec0c9(0x224)+_0x5ec0c9(0x1e4)+'ove>`')},{'quoted':_0x184d23['ms']});try{await botInstance[_0x5ec0c9(0x22e)+'e'](_0x36e85d,{'text':_0x5ec0c9(0x222)+_0x5ec0c9(0x1f3)+_0x4cb43f+_0x5ec0c9(0x1cb)},{'quoted':_0x184d23['ms']});const {downloadContentFromMessage:_0x4b5343,ffmpeg:_0x2599fb,fs:_0x2839f1,os:_0x27866c,path:_0x230714}=await getMediaDependencies(),_0x5158be=await _0x4b5343(_0x48faa4[_0x5ec0c9(0x247)+'ge'],_0x5ec0c9(0x1d1)),_0x142047=await streamToBuffer(_0x5158be),_0x505e7f=_0x391691?_0x5ec0c9(0x22a):_0x5ec0c9(0x1e3),_0x39f802=_0x230714[_0x5ec0c9(0x23c)](_0x27866c[_0x5ec0c9(0x1f5)](),'in_'+Date[_0x5ec0c9(0x203)]()+_0x505e7f),_0x4fdbfe=_0x230714['join'](_0x27866c['tmpdir'](),_0x1907bd);await _0x2839f1[_0x5ec0c9(0x213)](_0x39f802,_0x142047);let _0x431849=0xe63*0x1+0x26e*0xb+-0x291d;await new Promise((_0xbec7c6,_0x554fe8)=>{const _0x97408c=_0x5ec0c9;_0x2599fb[_0x97408c(0x1e6)](_0x39f802,(_0x5cf31b,_0x2f7109)=>{const _0x5061e1=_0x97408c;if(_0x5cf31b)return _0x554fe8(_0x5cf31b);_0x431849=_0x2f7109['format'][_0x5061e1(0x1dd)],_0xbec7c6();});});const _0x7f8cb3=_0x2599fb(_0x39f802)[_0x5ec0c9(0x220)]();if(_0x2038f9[_0x5ec0c9(0x202)]===-0x1161*-0x1+0xdf*0x1b+-0x13*0x227){const _0xc8e57a=_0x2038f9[0x7ca*-0x2+0x2d1*-0xa+0x2bbe];if(_0xc8e57a>-0x9*-0x26d+0x4a*-0x37+-0x5ef)_0x7f8cb3['setStartTi'+'me'](_0xc8e57a);else _0x7f8cb3[_0x5ec0c9(0x1d3)+'n'](_0x431849+_0xc8e57a);}else{const [_0x8b29b2,_0x316355]=_0x2038f9,_0x384b26=_0x431849-_0x316355;_0x7f8cb3[_0x5ec0c9(0x1f1)+'me'](_0x8b29b2)[_0x5ec0c9(0x1d3)+'n'](_0x384b26-_0x8b29b2);}await new Promise((_0x5d9e26,_0x442c32)=>{const _0x3e1fc0=_0x5ec0c9;_0x7f8cb3[_0x3e1fc0(0x1d8)]('libmp3lame')[_0x3e1fc0(0x23b)+'te']('128k')[_0x3e1fc0(0x20f)](_0x4fdbfe)['on'](_0x3e1fc0(0x249),_0x5d9e26)['on'](_0x3e1fc0(0x239),_0x46d38d=>_0x442c32(_0x46d38d));});const _0x5273cf=await _0x2839f1['readFile'](_0x4fdbfe);await botInstance[_0x5ec0c9(0x22e)+'e'](_0x36e85d,{'audio':_0x5273cf,'mimetype':_0x5ec0c9(0x24a),'fileName':_0x1907bd},{'quoted':_0x184d23['ms']}),await _0x2839f1['unlink'](_0x39f802)[_0x5ec0c9(0x227)](()=>{}),await _0x2839f1[_0x5ec0c9(0x1fd)](_0x4fdbfe)[_0x5ec0c9(0x227)](()=>{});}catch(_0x1c5680){error(_0x1c5680,'['+name+(_0x5ec0c9(0x233)+_0x5ec0c9(0x236))),await botInstance[_0x5ec0c9(0x22e)+'e'](_0x36e85d,{'text':_0x5ec0c9(0x211)+_0x5ec0c9(0x225)+'\x20'+_0x4cb43f+':\x20'+_0x1c5680[_0x5ec0c9(0x231)]+'\x0a'+(_0x5ec0c9(0x1e8)+'you\x20replie'+_0x5ec0c9(0x1f4)+_0x5ec0c9(0x228)+_0x5ec0c9(0x1ff)+_0x5ec0c9(0x22d))},{'quoted':_0x184d23['ms']});}}