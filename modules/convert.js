const _0x56689b=_0x251a;(function(_0x27f63d,_0x132307){const _0x11f3c4=_0x251a,_0x47d926=_0x27f63d();while(!![]){try{const _0x158752=parseInt(_0x11f3c4(0x214))/(0x1a58+-0x9e*-0x9+-0x17*0x163)*(parseInt(_0x11f3c4(0x1f1))/(-0x230a+0x1d*0x147+0x1ff*-0x1))+parseInt(_0x11f3c4(0x24f))/(-0x1931+0x1725+0x20f)*(-parseInt(_0x11f3c4(0x239))/(0xc8c+-0x23a4+-0xcc*-0x1d))+-parseInt(_0x11f3c4(0x257))/(0x1cba+0x191d+-0x1ae9*0x2)+-parseInt(_0x11f3c4(0x1e3))/(0xb99+0x167*0x7+0x94*-0x25)+-parseInt(_0x11f3c4(0x212))/(-0x8a1+0x22*0x1b+0x512)*(parseInt(_0x11f3c4(0x204))/(0x244+-0x1c2e+-0x9*-0x2e2))+parseInt(_0x11f3c4(0x202))/(-0x3*-0x96a+0x4e*0x59+-0x3*0x1271)+parseInt(_0x11f3c4(0x210))/(0xf30+0x1b1*-0xd+0x6d7*0x1)*(parseInt(_0x11f3c4(0x21e))/(0x238a+-0x246d+0xee));if(_0x158752===_0x132307)break;else _0x47d926['push'](_0x47d926['shift']());}catch(_0x36fa61){_0x47d926['push'](_0x47d926['shift']());}}}(_0x3952,-0x9ff5*-0x19+0x12*0xacb0+-0x1224d6*0x1));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x56689b(0x20a)+'rt';function _0x251a(_0x1a2c2a,_0x36b92e){const _0x2d3af9=_0x3952();return _0x251a=function(_0x53cab5,_0x3fcacd){_0x53cab5=_0x53cab5-(-0x1*-0x207a+-0x2415+0x57b*0x1);let _0x1db442=_0x2d3af9[_0x53cab5];return _0x1db442;},_0x251a(_0x1a2c2a,_0x36b92e);}export const version=_0x56689b(0x1e9);export const priority=0x1d95+0x699*0x2+0x3*-0xe3f;export const commands=['tomp3',_0x56689b(0x243)];let botInstance=null,respondedMsgIds=new Set(),_mediaDeps=null;async function getMediaDependencies(){const _0x1050cf=_0x56689b;if(_mediaDeps)return _mediaDeps;try{const _0x37b0eb=await import('@whiskeysockets/baileys'),_0x4e772b=await import('fluent-ffmpeg'),_0x27af56=_0x4e772b[_0x1050cf(0x1e0)],_0x528864=(await import('@ffmpeg-installer/ffmpeg'))['path'],_0x203cfe=(await import('fs'))[_0x1050cf(0x1f7)],_0x2289de=(await import('os'))[_0x1050cf(0x1e0)],_0x2eb4d7=(await import('path'))['default'];return _0x27af56[_0x1050cf(0x244)+'ath'](_0x528864),_mediaDeps={'downloadContentFromMessage':_0x37b0eb[_0x1050cf(0x1e8)+_0x1050cf(0x24c)+_0x1050cf(0x1f6)],'ffmpeg':_0x27af56,'fs':_0x203cfe,'os':_0x2289de,'path':_0x2eb4d7},info('['+name+(_0x1050cf(0x1e4)+_0x1050cf(0x208)+_0x1050cf(0x1e2))),_mediaDeps;}catch(_0x42acf7){error(_0x42acf7,'['+name+(']\x20failed\x20t'+_0x1050cf(0x21b)+_0x1050cf(0x245)+_0x1050cf(0x235)));throw _0x42acf7;}}async function streamToBuffer(_0x1bfda8){const _0xe9a5a8=_0x56689b,_0x106b8d=[];for await(const _0x35a4b3 of _0x1bfda8){_0x106b8d['push'](Buffer[_0xe9a5a8(0x22c)](_0x35a4b3)?_0x35a4b3:Buffer[_0xe9a5a8(0x206)](_0x35a4b3));}return Buffer[_0xe9a5a8(0x260)](_0x106b8d);}const getQuotedMessage=_0x156cfb=>{const _0x34b5b1=_0x56689b;return _0x156cfb[_0x34b5b1(0x25e)]?.['extendedTe'+'xtMessage']?.[_0x34b5b1(0x23e)+'o']?.[_0x34b5b1(0x23d)+_0x34b5b1(0x1f9)]||_0x156cfb['quoted']||null;};async function findStoredMatchFromFindings(_0x5314b3=[]){const _0x46e2b7=_0x56689b;try{const _0x234153=await listSudo(),_0x10e3b8=new Set(_0x234153[_0x46e2b7(0x258)](String));for(const _0x5073cd of _0x5314b3){if(!_0x5073cd?.['jid']||typeof _0x5073cd['jid']!==_0x46e2b7(0x24e))continue;const _0x6fd34a=normalizeToJid(_0x5073cd[_0x46e2b7(0x20c)]);if(_0x6fd34a&&_0x10e3b8[_0x46e2b7(0x261)](_0x6fd34a))return _0x6fd34a;if(_0x10e3b8[_0x46e2b7(0x261)](_0x5073cd[_0x46e2b7(0x20c)]))return _0x5073cd[_0x46e2b7(0x20c)];}return null;}catch(_0x15f2db){return warn('['+name+(_0x46e2b7(0x21f)+_0x46e2b7(0x219)+_0x46e2b7(0x254))+(_0x15f2db?.[_0x46e2b7(0x25e)]||_0x15f2db)),null;}}export async function initialize(_0x3d629b){const _0xc21f7b=_0x56689b;botInstance=_0x3d629b,info('['+name+(_0xc21f7b(0x1ff)+_0xc21f7b(0x256)));}export async function cleanup(){const _0x3eed98=_0x56689b;botInstance=null,respondedMsgIds['clear'](),info('['+name+(_0x3eed98(0x25d)+'up'));}export async function onMessage(_0x44f425){const _0x425ef2=_0x56689b;try{if(!_0x44f425?.[_0x425ef2(0x232)]||!_0x44f425[_0x425ef2(0x250)])return;const _0x2cf5c9=_0x44f425[_0x425ef2(0x232)]['id'];if(_0x2cf5c9&&respondedMsgIds[_0x425ef2(0x261)](_0x2cf5c9))return;_0x2cf5c9&&(respondedMsgIds[_0x425ef2(0x1e1)](_0x2cf5c9),setTimeout(()=>respondedMsgIds[_0x425ef2(0x217)](_0x2cf5c9),-0xd7*0x1d+0x6*-0x1b1f+-0x13045*-0x1));const _0x2d851a=(_0x44f425['text']||'')[_0x425ef2(0x228)](),[_0x5b7a06,..._0x2afa14]=_0x2d851a['split'](/\s+/),_0x2e8254=_0x5b7a06[_0x425ef2(0x20e)+'e']();if(!commands[_0x425ef2(0x1fc)](_0x2e8254))return;const _0x35e0bb=_0x44f425[_0x425ef2(0x1f5)]||_0x44f425[_0x425ef2(0x232)]['remoteJid']||'';if(_0x35e0bb['endsWith'](_0x425ef2(0x220))){info('['+name+(_0x425ef2(0x252)+_0x425ef2(0x216))+_0x35e0bb);return;}if(!botInstance){botInstance=_0x44f425[_0x425ef2(0x227)]||_0x44f425[_0x425ef2(0x1ec)]||null;if(!botInstance){warn('['+name+(']\x20botInsta'+_0x425ef2(0x230)+'g.'));return;}}const _0x18f027=getBotJid();let _0x239d87=_0x18f027;if(!_0x44f425[_0x425ef2(0x232)][_0x425ef2(0x201)]){const _0x132f1f=await isSudo(botInstance,_0x44f425)[_0x425ef2(0x1f3)](()=>![]);if(!_0x132f1f)return;const {findings:_0x1f7f18}=userJidFromCtx(_0x44f425),_0x1c715c=await findStoredMatchFromFindings(_0x1f7f18);if(!_0x1c715c)return;_0x239d87=_0x1c715c;}switch(_0x2e8254){case'tomp3':await handleVideoToMp3(_0x239d87,_0x2afa14[_0x425ef2(0x22d)]('\x20'),_0x44f425);break;case _0x425ef2(0x243):await handleCutMp3(_0x239d87,_0x2afa14,_0x44f425);break;}}catch(_0x18e267){error(_0x18e267,'['+name+(_0x425ef2(0x224)+_0x425ef2(0x24a)));}}async function handleVideoToMp3(_0x49fe19,_0x5122d7,_0x20bc72){const _0x107f28=_0x56689b,_0x447993=getQuotedMessage(_0x20bc72);if(!_0x447993?.['videoMessa'+'ge'])return botInstance[_0x107f28(0x1ed)+'e'](_0x49fe19,{'text':_0x107f28(0x213)+'eply\x20to\x20a\x20'+_0x107f28(0x211)+_0x107f28(0x23f)+_0x107f28(0x249)},{'quoted':_0x20bc72['ms']});const _0x1b9f0a=(_0x5122d7||_0x107f28(0x25a)+Date['now']())[_0x107f28(0x1f4)](/[^a-z0-9\s-]/gi,'')[_0x107f28(0x228)]()+_0x107f28(0x253);try{await botInstance[_0x107f28(0x1ed)+'e'](_0x49fe19,{'text':_0x107f28(0x240)+_0x107f28(0x21a)+'o\x20MP3...'},{'quoted':_0x20bc72['ms']});const {downloadContentFromMessage:_0x17f823,ffmpeg:_0x4ebaaf,fs:_0x72cb99,os:_0x413cbc,path:_0x595df1}=await getMediaDependencies(),_0x597c07=await _0x17f823(_0x447993[_0x107f28(0x1fd)+'ge'],_0x107f28(0x1ea)),_0x4d622b=await streamToBuffer(_0x597c07),_0x1d4e08=_0x595df1[_0x107f28(0x22d)](_0x413cbc['tmpdir'](),_0x107f28(0x1e7)+Date[_0x107f28(0x200)]()+_0x107f28(0x1eb)),_0x22b0dd=_0x595df1[_0x107f28(0x22d)](_0x413cbc[_0x107f28(0x242)](),_0x1b9f0a);await _0x72cb99['writeFile'](_0x1d4e08,_0x4d622b),await new Promise((_0x1c1fa8,_0x4f814d)=>{const _0x3cd36a=_0x107f28;_0x4ebaaf(_0x1d4e08)['noVideo']()[_0x3cd36a(0x24d)](_0x3cd36a(0x259))['audioBitra'+'te'](_0x3cd36a(0x223))[_0x3cd36a(0x1f2)](_0x22b0dd)['on'](_0x3cd36a(0x248),_0x1c1fa8)['on']('error',_0x25804d=>_0x4f814d(_0x25804d));});const _0x1800db=await _0x72cb99['readFile'](_0x22b0dd);await botInstance[_0x107f28(0x1ed)+'e'](_0x49fe19,{'audio':_0x1800db,'mimetype':_0x107f28(0x1f0),'fileName':_0x1b9f0a},{'quoted':_0x20bc72['ms']}),await _0x72cb99[_0x107f28(0x247)](_0x1d4e08)[_0x107f28(0x1f3)](()=>{}),await _0x72cb99[_0x107f28(0x247)](_0x22b0dd)[_0x107f28(0x1f3)](()=>{});}catch(_0x3dd916){error(_0x3dd916,'['+name+(_0x107f28(0x22f)+_0x107f28(0x205))),await botInstance[_0x107f28(0x1ed)+'e'](_0x49fe19,{'text':'‚ùå\x20Conversi'+'on\x20failed:'+'\x20'+_0x3dd916[_0x107f28(0x25e)]},{'quoted':_0x20bc72['ms']});}}async function handleCutMp3(_0x291e6b,_0x3a83f4,_0x2533aa){const _0x2263ff=_0x56689b,_0x166411=getQuotedMessage(_0x2533aa);if(!_0x166411?.[_0x2263ff(0x207)+'ge'])return botInstance[_0x2263ff(0x1ed)+'e'](_0x291e6b,{'text':'‚ÑπÔ∏è\x20Please\x20r'+_0x2263ff(0x218)+_0x2263ff(0x246)+_0x2263ff(0x237)+_0x2263ff(0x225)+_0x2263ff(0x20d)},{'quoted':_0x2533aa['ms']});const _0x773ca4=_0x166411['audioMessa'+'ge'][_0x2263ff(0x222)]===!![],_0x5077b5=_0x773ca4?_0x2263ff(0x22b):_0x2263ff(0x215),_0x18067a=_0x3a83f4[_0x2263ff(0x258)](_0x171d0c=>parseFloat(_0x171d0c))[_0x2263ff(0x23a)](_0x574f74=>!isNaN(_0x574f74)),_0x4b973e=_0x3a83f4[_0x2263ff(0x23a)](_0x46a9a8=>isNaN(parseFloat(_0x46a9a8)))[_0x2263ff(0x22d)]('\x20')['trim'](),_0x45624c=(_0x4b973e||_0x2263ff(0x1fa)+Date[_0x2263ff(0x200)]())['replace'](/[^a-z0-9\s-]/gi,'')[_0x2263ff(0x228)]()+_0x2263ff(0x253);if(_0x18067a[_0x2263ff(0x21c)]===-0x262a+0x23e*-0x7+0x35dc||_0x18067a[_0x2263ff(0x21c)]>0x25*0x5e+-0x119b+0x407*0x1)return botInstance[_0x2263ff(0x1ed)+'e'](_0x291e6b,{'text':_0x2263ff(0x21d)+_0x2263ff(0x22e)+'ply\x20to\x20a\x20'+_0x5077b5+_0x2263ff(0x241)+(_0x2263ff(0x1fb)+'startSecon'+_0x2263ff(0x20f))+('`.cutmp3\x20-'+_0x2263ff(0x233)+_0x2263ff(0x25c))+(_0x2263ff(0x1fb)+_0x2263ff(0x1ee)+_0x2263ff(0x24b)+_0x2263ff(0x22a)+_0x2263ff(0x221))},{'quoted':_0x2533aa['ms']});try{await botInstance[_0x2263ff(0x1ed)+'e'](_0x291e6b,{'text':_0x2263ff(0x1ef)+'your\x20'+_0x5077b5+_0x2263ff(0x236)},{'quoted':_0x2533aa['ms']});const {downloadContentFromMessage:_0x35ee94,ffmpeg:_0x58e625,fs:_0x459780,os:_0x3ae132,path:_0xbfa712}=await getMediaDependencies(),_0x10d9b1=await _0x35ee94(_0x166411['audioMessa'+'ge'],_0x2263ff(0x215)),_0x2eda35=await streamToBuffer(_0x10d9b1),_0x4c717a=_0x773ca4?_0x2263ff(0x25b):_0x2263ff(0x253),_0xe0cd1f=_0xbfa712[_0x2263ff(0x22d)](_0x3ae132[_0x2263ff(0x242)](),'in_'+Date[_0x2263ff(0x200)]()+_0x4c717a),_0x2198a8=_0xbfa712[_0x2263ff(0x22d)](_0x3ae132['tmpdir'](),_0x45624c);await _0x459780[_0x2263ff(0x1e6)](_0xe0cd1f,_0x2eda35);let _0x2af9be=-0x2060+0x542*0x2+0x15dc;await new Promise((_0x4f2b4b,_0x52cdf1)=>{const _0x4f6327=_0x2263ff;_0x58e625[_0x4f6327(0x234)](_0xe0cd1f,(_0x5f0080,_0x27869b)=>{const _0x24010f=_0x4f6327;if(_0x5f0080)return _0x52cdf1(_0x5f0080);_0x2af9be=_0x27869b[_0x24010f(0x25f)][_0x24010f(0x20b)],_0x4f2b4b();});});const _0x19bd90=_0x58e625(_0xe0cd1f)[_0x2263ff(0x209)]();if(_0x18067a[_0x2263ff(0x21c)]===-0x1d86+0xe9*0x2+0xad*0x29){const _0x5978dc=_0x18067a[0x866+-0x1d22*-0x1+-0x2588];if(_0x5978dc>-0x26ce+-0x1*0x2467+0xd*0x5c9)_0x19bd90[_0x2263ff(0x203)+'me'](_0x5978dc);else _0x19bd90['setDuratio'+'n'](_0x2af9be+_0x5978dc);}else{const [_0x12625e,_0x5c9542]=_0x18067a,_0x2354b6=_0x2af9be-_0x5c9542;_0x19bd90[_0x2263ff(0x203)+'me'](_0x12625e)['setDuratio'+'n'](_0x2354b6-_0x12625e);}await new Promise((_0x373444,_0x25cce9)=>{const _0x201ffd=_0x2263ff;_0x19bd90[_0x201ffd(0x24d)]('libmp3lame')['audioBitra'+'te'](_0x201ffd(0x223))[_0x201ffd(0x1f2)](_0x2198a8)['on']('end',_0x373444)['on'](_0x201ffd(0x1fe),_0xb5d44c=>_0x25cce9(_0xb5d44c));});const _0x66fca3=await _0x459780['readFile'](_0x2198a8);await botInstance['sendMessag'+'e'](_0x291e6b,{'audio':_0x66fca3,'mimetype':_0x2263ff(0x1f0),'fileName':_0x45624c},{'quoted':_0x2533aa['ms']}),await _0x459780[_0x2263ff(0x247)](_0xe0cd1f)[_0x2263ff(0x1f3)](()=>{}),await _0x459780['unlink'](_0x2198a8)['catch'](()=>{});}catch(_0x471170){error(_0x471170,'['+name+(_0x2263ff(0x229)+_0x2263ff(0x251))),await botInstance[_0x2263ff(0x1ed)+'e'](_0x291e6b,{'text':_0x2263ff(0x238)+_0x2263ff(0x1f8)+'\x20'+_0x5077b5+':\x20'+_0x471170[_0x2263ff(0x25e)]+'\x0a'+(_0x2263ff(0x23c)+_0x2263ff(0x255)+_0x2263ff(0x23b)+_0x2263ff(0x231)+_0x2263ff(0x1e5)+_0x2263ff(0x226))},{'quoted':_0x2533aa['ms']});}}function _0x3952(){const _0x2f3c70=['pendencies','noVideo','mediaconve','duration','jid','ut\x20it.','toLowerCas','ds>`\x0a','45170TxeIxK','video\x20to\x20c','3535QlUJhE','‚ÑπÔ∏è\x20Please\x20r','1NfWtIK','audio','g\x20group\x20','delete','eply\x20to\x20an','edMatch\x20er','ng\x20video\x20t','o\x20load\x20med','length','‚ÑπÔ∏è\x20Invalid\x20','8899OtZfDy',']\x20findStor','@g.us','ove>`','ptt','128k',']\x20onMessag','\x20note\x20to\x20c','ce\x20note.','bot','trim',']\x20cutmp3\x20e','condsToRem','voice\x20note','isBuffer','join','format.\x20Re',']\x20tomp3\x20er','nce\x20missin','id\x20audio\x20f','key','<endSecond','ffprobe','ncies','...','e\x20or\x20voice','‚ùå\x20Failed\x20t','2195012ydiDOS','filter','d\x20to\x20a\x20val','Make\x20sure\x20','quotedMess','contextInf','onvert\x20it\x20','üì•\x20Converti','\x20and\x20use:\x0a','tmpdir','cutmp3','setFfmpegP','ia\x20depende','\x20audio\x20fil','unlink','end','to\x20MP3.','e\x20error','ds>\x20<endSe','ntentFromM','audioCodec','string','3FKqTRK','isCommand','rror',']:\x20ignorin','.mp3','ror:\x20','you\x20replie','zed.','4880985mtMAra','map','libmp3lame','audio_','.ogg','s>`\x0a',']\x20cleaned\x20','message','format','concat','has','default','add','\x20loaded.','4791390BOycRP',']\x20media\x20de','ile\x20or\x20voi','writeFile','in_','downloadCo','1.1.1','video','.mp4','client','sendMessag','startSecon','‚úÇÔ∏è\x20Cutting\x20','audio/mpeg','550904FBmZbk','save','catch','replace','remoteJid','essage','promises','o\x20trim\x20the','age','cut_','`.cutmp3\x20<','includes','videoMessa','error',']\x20initiali','now','fromMe','1434969gaYlxL','setStartTi','17984OmPzSm','ror','from','audioMessa'];_0x3952=function(){return _0x2f3c70;};return _0x3952();}