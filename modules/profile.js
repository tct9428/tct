const _0x124387=_0x366b;(function(_0x748682,_0x3e476f){const _0x213e8b=_0x366b,_0x1e72e8=_0x748682();while(!![]){try{const _0x3c93ae=parseInt(_0x213e8b(0xc9))/(0x1*-0x1a21+0xb77*0x1+-0xeab*-0x1)+-parseInt(_0x213e8b(0xbe))/(-0x1*-0x1853+-0xb*-0x2a1+-0x353c)*(parseInt(_0x213e8b(0x97))/(-0x2508+0x1bfa+0x911))+parseInt(_0x213e8b(0x94))/(0x8*-0x1c5+0xa9*0x2+0xcda)*(parseInt(_0x213e8b(0xed))/(-0x24*-0xea+-0x51e+-0x1bc5))+-parseInt(_0x213e8b(0xaf))/(0x1*0x2111+-0x46*-0x73+0x157f*-0x3)+-parseInt(_0x213e8b(0xb2))/(0x23d9+0x133+0x2d9*-0xd)+-parseInt(_0x213e8b(0xa8))/(0x214+-0x2396+0x9*0x3ba)+parseInt(_0x213e8b(0xae))/(0x1*0xa1d+-0x26ef+0x53*0x59);if(_0x3c93ae===_0x3e476f)break;else _0x1e72e8['push'](_0x1e72e8['shift']());}catch(_0x14ec7e){_0x1e72e8['push'](_0x1e72e8['shift']());}}}(_0x27f8,0x24500+0x2d262+0x35*-0xbe9));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';export const name='profile';function _0x27f8(){const _0x2772ed=['le\x20picture','function','✅\x20Profile\x20','ocket\x20API\x20','imageMessa','default','xtMessage','ID\x20for\x20set',']\x20findStor','essfully!','ully!','o\x20update\x20p','end',']\x20dynamic\x20','feature\x20is','error:\x20','split','quotedMess','472805yovncn','o\x20load\x20med','rofile\x20pic','\x20disabled.','ia\x20helper\x20','concat','d\x20stream\x20t','occurred.',']\x20Could\x20no','❌\x20Failed\x20t','data','catch','key','4FQoBAH','d\x20successf','✅\x20Group\x20pr','19710cHafjV','updateProf','Failed\x20to\x20','ge:\x20','essage','❌\x20Unable\x20t',']\x20cleaned\x20',']\x20Failed\x20t','downloadCo','delete','ser\x20of\x20err','eply\x20to\x20an','essage\x20not','[profile]\x20','e\x20target\x20J','quoted','ype\x20return','2099112BSsipi','\x20available','iled','ror:\x20','process\x20im','endsWith','7126155smzqou','1865916quoRJB','picture\x20up','setpp','1907836jIlggp','remoteJid','fromMe','image','text','loadConten','isBuffer','push','contextInf','sendMessag','clear','An\x20unexpec','52YprAMt','ure.','trim','has','ntentFromM','map','add','\x20missing)','o\x20notify\x20u','age\x20for\x20','eys\x20import','302456ISyjFq','asyncItera','sock','jid',']\x20Handler\x20','message','sfully.','tFromMessa','\x20image\x20to\x20','st.\x20Profil','o\x20read\x20ima','\x20from\x20bail','ofile\x20pict','ble\x20(sock.','zed\x20succes','@g.us','1.0.0','ilePicture'];_0x27f8=function(){return _0x2772ed;};return _0x27f8();}export const version=_0x124387(0xd9);export const priority=0x1d09+0x1258+0x2f57*-0x1;export const commands=[_0x124387(0xb1)];let botInstance=null,respondedMsgIds=new Set(),_baileysHelpers=null;function _0x366b(_0x2fa5f9,_0x5c21db){const _0x508fa1=_0x27f8();return _0x366b=function(_0x532099,_0x461405){_0x532099=_0x532099-(0x1dfc+-0x2487*-0x1+-0x5*0xd31);let _0x2fa085=_0x508fa1[_0x532099];return _0x2fa085;},_0x366b(_0x2fa5f9,_0x5c21db);}async function getBaileysHelpers(){const _0x499eb7=_0x124387;if(_baileysHelpers)return _baileysHelpers;try{const _0x2056b2=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x2056b2['downloadCo'+_0x499eb7(0xc2)+_0x499eb7(0x9b)]||_0x2056b2[_0x499eb7(0xe0)]?.[_0x499eb7(0x9f)+_0x499eb7(0xc2)+'essage']};if(!_baileysHelpers[_0x499eb7(0x9f)+_0x499eb7(0xc2)+'essage'])throw new Error(_0x499eb7(0x9f)+_0x499eb7(0xc2)+_0x499eb7(0xa3)+_0x499eb7(0xa9)+_0x499eb7(0xd4)+_0x499eb7(0xc8));return _baileysHelpers;}catch(_0x5ab8ff){error(_0x5ab8ff,'['+name+(_0x499eb7(0xe8)+'import\x20of\x20'+'baileys\x20fa'+_0x499eb7(0xaa)));throw _0x5ab8ff;}}async function streamToBuffer(_0x2f7425){const _0x3f8bd7=_0x124387;if(!_0x2f7425)throw new Error('No\x20stream\x20'+'provided');if(typeof _0x2f7425[Symbol[_0x3f8bd7(0xca)+'tor']]==='function'){const _0x5b484b=[];for await(const _0x548ad2 of _0x2f7425){_0x5b484b[_0x3f8bd7(0xb9)](Buffer[_0x3f8bd7(0xb8)](_0x548ad2)?_0x548ad2:Buffer['from'](_0x548ad2));}return Buffer[_0x3f8bd7(0xf2)](_0x5b484b);}if(_0x2f7425&&typeof _0x2f7425['on']===_0x3f8bd7(0xdc))return new Promise((_0x51a8b1,_0x417042)=>{const _0x417747=_0x3f8bd7,_0x17545e=[];_0x2f7425['on'](_0x417747(0x91),_0x45cba0=>_0x17545e[_0x417747(0xb9)](Buffer['isBuffer'](_0x45cba0)?_0x45cba0:Buffer['from'](_0x45cba0))),_0x2f7425['on'](_0x417747(0xe7),()=>_0x51a8b1(Buffer[_0x417747(0xf2)](_0x17545e))),_0x2f7425['on']('error',_0x417042);});throw new Error('Unsupporte'+_0x3f8bd7(0xf3)+_0x3f8bd7(0xa7)+'ed\x20by\x20down'+_0x3f8bd7(0xb7)+_0x3f8bd7(0xd0)+'ge');}const getQuotedMessage=_0x83d11b=>{const _0x5b237b=_0x124387;return _0x83d11b[_0x5b237b(0xce)]?.['extendedTe'+_0x5b237b(0xe1)]?.[_0x5b237b(0xba)+'o']?.[_0x5b237b(0xec)+'age']||_0x83d11b[_0x5b237b(0xa6)]||null;};async function findStoredMatchFromFindings(_0x306810=[]){const _0xe21fac=_0x124387;try{const _0x5787ec=await listSudo(),_0x31ed9f=new Set(_0x5787ec[_0xe21fac(0xc3)](String));for(const _0x56b057 of _0x306810){if(!_0x56b057||typeof _0x56b057['jid']!=='string')continue;const _0x2fb58d=normalizeToJid(_0x56b057['jid']);if(_0x2fb58d&&_0x31ed9f['has'](_0x2fb58d))return _0x2fb58d;if(_0x31ed9f['has'](_0x56b057['jid']))return _0x56b057[_0xe21fac(0xcc)];}return null;}catch(_0x40805a){return warn('['+name+(_0xe21fac(0xe3)+'edMatch\x20er'+_0xe21fac(0xab))+(_0x40805a?.[_0xe21fac(0xce)]||_0x40805a)),null;}}export async function initialize(_0x54078f){const _0x171afe=_0x124387;botInstance=_0x54078f,info('['+name+(']\x20initiali'+_0x171afe(0xd7)+_0x171afe(0xcf)));}export async function cleanup(){const _0x4d3af0=_0x124387;botInstance=null,respondedMsgIds[_0x4d3af0(0xbc)](),info('['+name+(_0x4d3af0(0x9d)+'up'));}export async function onMessage(_0x1314a2){const _0x4e45f0=_0x124387;if(!_0x1314a2||!_0x1314a2[_0x4e45f0(0x93)]||!_0x1314a2['isCommand'])return;const _0x51e120=_0x1314a2[_0x4e45f0(0x93)]['id'];if(_0x51e120&&respondedMsgIds[_0x4e45f0(0xc1)](_0x51e120))return;_0x51e120&&(respondedMsgIds[_0x4e45f0(0xc4)](_0x51e120),setTimeout(()=>respondedMsgIds[_0x4e45f0(0xa0)](_0x51e120),0xdb40*-0x1+-0x1155+-0x5*-0x46c1));const _0x40c6c5=(_0x1314a2[_0x4e45f0(0xb6)]||'')[_0x4e45f0(0xc0)](),[_0x239989]=_0x40c6c5[_0x4e45f0(0xeb)](/\s+/);if(!_0x239989||!commands['includes'](_0x239989['toLowerCas'+'e']()))return;const _0x3719f9=_0x1314a2[_0x4e45f0(0x93)][_0x4e45f0(0xb3)],_0x401309=_0x3719f9&&_0x3719f9[_0x4e45f0(0xad)]&&_0x3719f9[_0x4e45f0(0xad)]('@g.us');let _0x455566=_0x3719f9;const _0x496dc5=_0x1314a2[_0x4e45f0(0x93)][_0x4e45f0(0xb4)];let _0x7937ee=_0x496dc5;if(!_0x7937ee){if(_0x401309)_0x7937ee=await isadmin(botInstance,_0x1314a2)['catch'](()=>![]);else{const _0x169fcc=await isSudo(botInstance,_0x1314a2)[_0x4e45f0(0x92)](()=>![]);if(_0x169fcc){const {findings:_0x3cad03}=userJidFromCtx(_0x1314a2),_0x273010=await findStoredMatchFromFindings(_0x3cad03);_0x273010&&(_0x7937ee=!![],_0x455566=_0x273010);}}}if(!_0x7937ee)return;try{await handleSetProfilePicture(_0x455566,_0x1314a2);}catch(_0x1b4a96){error(_0x1b4a96,'['+name+(_0x4e45f0(0xcd)+_0x4e45f0(0xea))+(_0x1b4a96?.[_0x4e45f0(0xce)]||_0x1b4a96));try{await botInstance[_0x4e45f0(0xbb)+'e'](_0x455566,{'text':_0x4e45f0(0xbd)+'ted\x20error\x20'+_0x4e45f0(0x8e)},{'quoted':_0x1314a2['ms']});}catch(_0x2c2446){error(_0x2c2446,'['+name+(_0x4e45f0(0x9e)+_0x4e45f0(0xc6)+_0x4e45f0(0xa1)+'or'));}}}async function handleSetProfilePicture(_0x1d917c,_0x1fb39e){const _0x938877=_0x124387,_0x1b9d2d=_0x1fb39e[_0x938877(0x93)]['remoteJid']&&_0x1fb39e['key'][_0x938877(0xb3)][_0x938877(0xad)]&&_0x1fb39e[_0x938877(0x93)]['remoteJid'][_0x938877(0xad)](_0x938877(0xd8)),_0x5dead8=getBotJid(),_0xa3984c=_0x1b9d2d?_0x1fb39e[_0x938877(0x93)][_0x938877(0xb3)]:_0x5dead8;if(!_0xa3984c){warn('['+name+(_0x938877(0x8f)+'t\x20determin'+_0x938877(0xa5)+_0x938877(0xe2)+'ting\x20profi'+_0x938877(0xdb)+'.'));return;}const _0xef84f1=getQuotedMessage(_0x1fb39e);if(!_0xef84f1?.[_0x938877(0xdf)+'ge'])return botInstance[_0x938877(0xbb)+'e'](_0x1d917c,{'text':'ℹ️\x20Please\x20r'+_0x938877(0xa2)+_0x938877(0xd1)+'set\x20the\x20pr'+_0x938877(0xd5)+_0x938877(0xbf)},{'quoted':_0x1fb39e['ms']});let _0x1b8f03;try{const _0x17a59d=await getBaileysHelpers();_0x1b8f03=_0x17a59d['downloadCo'+'ntentFromM'+_0x938877(0x9b)];}catch(_0xd6499b){await botInstance['sendMessag'+'e'](_0x1d917c,{'text':_0x938877(0x9c)+_0x938877(0xee)+_0x938877(0xf1)+'on\x20this\x20ho'+_0x938877(0xd2)+'e\x20picture\x20'+_0x938877(0xe9)+_0x938877(0xf0)},{'quoted':_0x1fb39e['ms']});return;}try{const _0x4b5f6e=await _0x1b8f03(_0xef84f1[_0x938877(0xdf)+'ge'],_0x938877(0xb5)),_0x10bc71=await streamToBuffer(_0x4b5f6e);try{if(!botInstance||!botInstance[_0x938877(0xcb)]||typeof botInstance['sock']['updateProf'+_0x938877(0xda)]!==_0x938877(0xdc))throw new Error('WhatsApp\x20s'+_0x938877(0xde)+'not\x20availa'+_0x938877(0xd6)+_0x938877(0x98)+_0x938877(0xda)+_0x938877(0xc5));await botInstance[_0x938877(0xcb)][_0x938877(0x98)+_0x938877(0xda)](_0xa3984c,_0x10bc71);const _0x1f43ed=_0x1b9d2d?_0x938877(0x96)+_0x938877(0xd5)+'ure\x20update'+_0x938877(0x95)+_0x938877(0xe5):_0x938877(0xdd)+_0x938877(0xb0)+'dated\x20succ'+_0x938877(0xe4);await botInstance[_0x938877(0xbb)+'e'](_0x1d917c,{'text':_0x1f43ed},{'quoted':_0x1fb39e['ms']});}catch(_0x5972a3){error(_0x5972a3,_0x938877(0xa4)+'updateProf'+_0x938877(0xda)+'\x20failed\x20fo'+'r\x20'+_0xa3984c),await botInstance[_0x938877(0xbb)+'e'](_0x1d917c,{'text':_0x938877(0x90)+_0x938877(0xe6)+_0x938877(0xef)+'ture:\x20'+(_0x5972a3?.[_0x938877(0xce)]||_0x5972a3)},{'quoted':_0x1fb39e['ms']});}}catch(_0x46a768){error(_0x46a768,_0x938877(0xa4)+_0x938877(0x99)+_0x938877(0xac)+_0x938877(0xc7)+_0xa3984c),await botInstance[_0x938877(0xbb)+'e'](_0x1d917c,{'text':_0x938877(0x90)+_0x938877(0xd3)+_0x938877(0x9a)+(_0x46a768?.[_0x938877(0xce)]||_0x46a768)},{'quoted':_0x1fb39e['ms']});}}