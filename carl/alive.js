const _0x9b073a=_0x566b;(function(_0x1c2f97,_0x55ee5c){const _0x2283a9=_0x566b,_0x41f030=_0x1c2f97();while(!![]){try{const _0x2d33ae=-parseInt(_0x2283a9(0x1c6))/(-0x125f+-0xf9a+0x21fa)*(-parseInt(_0x2283a9(0x20f))/(0x1a*0x19+-0x1*0x197+-0xf1*0x1))+-parseInt(_0x2283a9(0x162))/(-0x1*0x2c3+0x6f*-0x1b+0xe7b*0x1)*(-parseInt(_0x2283a9(0xec))/(-0x1*0x2597+-0x2062+0x45fd))+parseInt(_0x2283a9(0xf4))/(0x9d*0x37+0x1c04+0x1*-0x3dba)*(-parseInt(_0x2283a9(0xb1))/(-0x1b3*0x1+-0x1fd7+-0x432*-0x8))+-parseInt(_0x2283a9(0x1cb))/(-0x2*-0x7b9+0x1*0xd36+-0x1*0x1ca1)*(-parseInt(_0x2283a9(0x12b))/(-0x1982*-0x1+0x25*0x69+-0x28a7))+-parseInt(_0x2283a9(0x11c))/(-0x1fe9+0xde*0x10+0x202*0x9)+-parseInt(_0x2283a9(0x1ee))/(0x6ad*-0x2+-0x1d98+0x2afc)*(parseInt(_0x2283a9(0xfe))/(-0x2495*0x1+-0x2ce*0x7+-0x1*-0x3842))+parseInt(_0x2283a9(0x144))/(0xc7f+0x1*-0xd4f+0xdc)*(-parseInt(_0x2283a9(0x1e1))/(0xd*0x1e6+0x1354+-0x2bf5));if(_0x2d33ae===_0x55ee5c)break;else _0x41f030['push'](_0x41f030['shift']());}catch(_0x412e81){_0x41f030['push'](_0x41f030['shift']());}}}(_0x5a40,0xa39a1+-0x2886c+0x14*-0x1f6a));import _0x5a3b41 from'fs';import _0x4100b6 from'path';import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x3e6104 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name='alive';export const version=_0x9b073a(0x15d);export const priority=0x1*-0x1009+0x2d1*0x2+0xae0;export const configKeys=[_0x9b073a(0x22e)];export const commands=[_0x9b073a(0x151),'setalive',_0x9b073a(0x130),'listquote',_0x9b073a(0x1d3)];let botRef=null,sendApi=null,moduleStartTs=Date[_0x9b073a(0x141)]();const DEDUPE_TTL_MS=(-0x10cc+-0x1*0x9c1+0x1aab)*(-0x1b8e+0x1190+0xde6),processedMessageKeys=new Map();function markProcessed(_0x2b77af){const _0x2030cc=_0x9b073a;if(!_0x2b77af)return;if(processedMessageKeys['has'](_0x2b77af))try{clearTimeout(processedMessageKeys['get'](_0x2b77af));}catch(_0x1c1a11){}const _0x5f0d8f=setTimeout(()=>processedMessageKeys[_0x2030cc(0x20a)](_0x2b77af),DEDUPE_TTL_MS);processedMessageKeys[_0x2030cc(0x172)](_0x2b77af,_0x5f0d8f);}function isProcessed(_0x1eab45){return _0x1eab45&&processedMessageKeys['has'](_0x1eab45);}let DEFAULT_TIMEZONE=_0x9b073a(0x16c)+_0x9b073a(0x22a),cardImages=[],baseUrl=_0x9b073a(0x1cc)+'tct.com/me'+_0x9b073a(0x1b8);for(let i=0x52d*-0x4+-0x988+-0x60c*-0x5;i<=0x1*0x647+0x1ebb*0x1+-0x24f7;i++){let suffix=i===-0x21ad+-0x121e+0x33cb?'':i;cardImages[_0x9b073a(0x126)](''+baseUrl+suffix+_0x9b073a(0x17a));}function refreshConfig(){const _0x5a6779=_0x9b073a;try{const _0xe7ebb8=getConfig&&getConfig()?getConfig():{};DEFAULT_TIMEZONE=_0xe7ebb8['TIMEZONE']||_0xe7ebb8[_0x5a6779(0x161)+'AME']||DEFAULT_TIMEZONE,info('['+name+(_0x5a6779(0x237)+'efreshed;\x20'+'timezone=')+DEFAULT_TIMEZONE);}catch(_0x47557a){warn('['+name+(_0x5a6779(0x201)+'onfig\x20erro'+_0x5a6779(0x1e2))+(_0x47557a?.[_0x5a6779(0x228)]||_0x47557a));}}try{typeof hotReloadConfig===_0x9b073a(0x185)&&hotReloadConfig(()=>refreshConfig());}catch(_0x2f02af){warn('['+name+(']\x20hotReloa'+_0x9b073a(0x1e6)+_0x9b073a(0x238)+'\x20failed:\x20')+(_0x2f02af?.[_0x9b073a(0x228)]||_0x2f02af));}refreshConfig();const GLOBAL_QUOTES_TABLE='alive_glob'+_0x9b073a(0xd2),ALIVE_TABLE=_0x9b073a(0x151),ALIVE_QUOTES_TABLE=_0x9b073a(0x17f)+'es',DAILY_TABLE=_0x9b073a(0x1b9)+_0x9b073a(0xde);async function ensureSchema(){const _0x31e157=_0x9b073a;try{await db[_0x31e157(0xc3)]('\x0a\x20\x20\x20\x20\x20\x20CRE'+_0x31e157(0x113)+_0x31e157(0x1a2)+'STS\x20'+ALIVE_TABLE+(_0x31e157(0x1f6)+_0x31e157(0x20e)+_0x31e157(0x1b2)+'ARY\x20KEY,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20mes'+_0x31e157(0xe0)+'NOT\x20NULL,\x0a'+_0x31e157(0xf6)+'dated_at\x20I'+_0x31e157(0x1aa)+_0x31e157(0x1a8)+_0x31e157(0x218)+_0x31e157(0xd6)+'\x20INTEGER\x20D'+_0x31e157(0x13e)+_0x31e157(0x23c)+'\x20\x20')),await db[_0x31e157(0xc3)]('\x0a\x20\x20\x20\x20\x20\x20CRE'+_0x31e157(0x113)+_0x31e157(0x1a2)+'STS\x20'+ALIVE_QUOTES_TABLE+(_0x31e157(0x1f6)+_0x31e157(0x19f)+'R\x20PRIMARY\x20'+'KEY\x20AUTOIN'+'CREMENT,\x0a\x20'+_0x31e157(0x214)+_0x31e157(0xbb)+_0x31e157(0x95)+_0x31e157(0x11d)+_0x31e157(0x1de)+_0x31e157(0x235)+_0x31e157(0x145)+_0x31e157(0x176)+_0x31e157(0xf3)+_0x31e157(0x104)+_0x31e157(0x212)+_0x31e157(0xb3)+_0x31e157(0x1b1)+_0x31e157(0x163)+_0x31e157(0x109)+_0x31e157(0xdd)+_0x31e157(0x1c5)+_0x31e157(0x190)+_0x31e157(0x1e5))),await db[_0x31e157(0xc3)](_0x31e157(0x9b)+'ATE\x20TABLE\x20'+'IF\x20NOT\x20EXI'+_0x31e157(0x135)+GLOBAL_QUOTES_TABLE+(_0x31e157(0x1f6)+_0x31e157(0x19f)+_0x31e157(0x107)+_0x31e157(0xda)+_0x31e157(0x1ab)+_0x31e157(0x1c2)+'te\x20TEXT\x20NO'+_0x31e157(0x1ff)+'QUE,\x0a\x20\x20\x20\x20\x20'+_0x31e157(0xa9)+_0x31e157(0x18b)+_0x31e157(0x206)+_0x31e157(0x101))),await db[_0x31e157(0xc3)](_0x31e157(0x9b)+_0x31e157(0x113)+_0x31e157(0x1a2)+_0x31e157(0x135)+DAILY_TABLE+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x31e157(0x20e)+_0x31e157(0x1b2)+_0x31e157(0x168)+_0x31e157(0x93)+_0x31e157(0xe3)+_0x31e157(0x231)+_0x31e157(0xb5)+'\x20\x20time\x20TEX'+_0x31e157(0xd8)+_0x31e157(0x13c)+'\x20\x20\x20\x20\x20\x20\x20las'+_0x31e157(0x189)+_0x31e157(0x117)+_0x31e157(0x179)+_0x31e157(0xdc))),info('['+name+(_0x31e157(0xe6)+'a\x20ensured'));}catch(_0x2053d9){error(_0x2053d9,'['+name+(_0x31e157(0xe4)+_0x31e157(0x1ca)+'d'));throw _0x2053d9;}}function resolveQuotesFilePath(){const _0x3db713=_0x9b073a;return _0x4100b6[_0x3db713(0x143)](process['cwd'](),_0x3db713(0x221),_0x3db713(0x137),_0x3db713(0x1c3)+'on');}async function loadQuotesFromFileIntoDB(){const _0x681896=_0x9b073a;try{const _0x467464=resolveQuotesFilePath();if(!_0x5a3b41[_0x681896(0x1a9)](_0x467464)){info('['+name+(_0x681896(0x215)+_0x681896(0xa7)+_0x681896(0x20b))+_0x467464+(_0x681896(0x10c)+_0x681896(0xbd)+'d'));return;}const _0x39f9fe=await _0x5a3b41[_0x681896(0x217)]['readFile'](_0x467464,_0x681896(0x1da));let _0x423b3e=[];try{_0x423b3e=JSON[_0x681896(0x1d5)](_0x39f9fe);}catch(_0x235933){warn('['+name+(_0x681896(0x215)+_0x681896(0x207)+_0x681896(0x170)+_0x681896(0x156))+(_0x235933?.['message']||_0x235933));return;}if(!Array[_0x681896(0x106)](_0x423b3e))return;const _0x464bcd=_0x423b3e[_0x681896(0x14e)](_0x17e0e9=>{const _0x55e271=_0x681896;if(!_0x17e0e9)return null;if(typeof _0x17e0e9===_0x55e271(0x1a1))return _0x17e0e9[_0x55e271(0x11b)]();if(typeof _0x17e0e9===_0x55e271(0x197)){if(_0x17e0e9[_0x55e271(0x137)])return String(_0x17e0e9['quote'])['trim']();if(_0x17e0e9[_0x55e271(0x139)])return String(_0x17e0e9[_0x55e271(0x139)])[_0x55e271(0x11b)]();}return null;})[_0x681896(0xb4)](Boolean);if(!_0x464bcd[_0x681896(0xca)])return;const _0x36b1b1=await db[_0x681896(0x97)](_0x681896(0x119)+_0x681896(0xac)+'O\x20'+GLOBAL_QUOTES_TABLE+(_0x681896(0x140)+_0x681896(0x193)+_0x681896(0x196)));try{for(const _0x3c8c74 of _0x464bcd){try{await _0x36b1b1[_0x681896(0xb2)](_0x3c8c74);}catch(_0x5b79b5){}}}finally{try{await _0x36b1b1['finalize']();}catch(_0x21d138){}}info('['+name+']\x20loaded\x20'+_0x464bcd[_0x681896(0xca)]+(_0x681896(0x1ea)+_0x681896(0x184)+'to\x20')+GLOBAL_QUOTES_TABLE+('\x20(duplicat'+'es\x20ignored'+')'));}catch(_0x46561b){warn('['+name+(_0x681896(0xa2)+'esFromFile'+_0x681896(0x134)+'or:\x20')+(_0x46561b?.[_0x681896(0x228)]||_0x46561b));}}async function pickNextGlobalQuote(){const _0x3a02c0=_0x9b073a;try{const _0x5c3723=await db[_0x3a02c0(0xff)](_0x3a02c0(0xd4)+_0x3a02c0(0x1f5)+'M\x20'+GLOBAL_QUOTES_TABLE+(_0x3a02c0(0x105)+_0x3a02c0(0x166)+_0x3a02c0(0x10e)+_0x3a02c0(0x224)));if(_0x5c3723&&_0x5c3723[_0x3a02c0(0x137)])return await db[_0x3a02c0(0xb2)](_0x3a02c0(0x1f0)+GLOBAL_QUOTES_TABLE+(_0x3a02c0(0x13b)+'=\x201\x20WHERE\x20'+'id\x20=\x20?'),[_0x5c3723['id']]),_0x5c3723['quote'];await db[_0x3a02c0(0xb2)](_0x3a02c0(0x1f0)+GLOBAL_QUOTES_TABLE+(_0x3a02c0(0x13b)+_0x3a02c0(0x164)+'used\x20!=\x200'));const _0x326dae=await db[_0x3a02c0(0xff)](_0x3a02c0(0xd4)+_0x3a02c0(0x1f5)+'M\x20'+GLOBAL_QUOTES_TABLE+(_0x3a02c0(0xd1)+_0x3a02c0(0x1cf)));if(_0x326dae&&_0x326dae[_0x3a02c0(0x137)])return await db['run'](_0x3a02c0(0x1f0)+GLOBAL_QUOTES_TABLE+(_0x3a02c0(0x13b)+'=\x201\x20WHERE\x20'+'id\x20=\x20?'),[_0x326dae['id']]),_0x326dae[_0x3a02c0(0x137)];return null;}catch(_0x39804c){return warn('['+name+(']\x20pickNext'+'GlobalQuot'+_0x3a02c0(0x22c))+(_0x39804c?.[_0x3a02c0(0x228)]||_0x39804c)),null;}}async function pickNextQuoteForGroup(_0xe2bccf){const _0x31d3c4=_0x9b073a;try{const _0x567204=await db[_0x31d3c4(0x171)](_0x31d3c4(0xd4)+_0x31d3c4(0x1f5)+'M\x20'+ALIVE_QUOTES_TABLE+(_0x31d3c4(0xa3)+_0x31d3c4(0x223)+_0x31d3c4(0xd1)+'id'),[_0xe2bccf]);if(_0x567204&&_0x567204[_0x31d3c4(0xca)]){const _0x332d5c=await db[_0x31d3c4(0xff)](_0x31d3c4(0x146)+_0x31d3c4(0xc2)+'x\x20FROM\x20'+ALIVE_TABLE+(_0x31d3c4(0xa3)+'up_jid\x20=\x20?'),[_0xe2bccf]);let _0x8ebd0f=0x1*-0x124f+0x4d0+0xd7f;if(_0x332d5c&&Number[_0x31d3c4(0x1f9)](_0x332d5c[_0x31d3c4(0x152)+'ndex']))_0x8ebd0f=Number(_0x332d5c[_0x31d3c4(0x152)+'ndex']||0x2225*-0x1+-0x1274+0x3499);_0x8ebd0f=_0x8ebd0f%_0x567204[_0x31d3c4(0xca)];const _0x4638e2=_0x567204[_0x8ebd0f]['quote'],_0x30b017=(_0x8ebd0f+(0x10e1+0x1*-0x170b+-0x1*-0x62b))%_0x567204[_0x31d3c4(0xca)];try{await db[_0x31d3c4(0xb2)](_0x31d3c4(0xcb)+'O\x20'+ALIVE_TABLE+(_0x31d3c4(0x142)+_0x31d3c4(0x175)+_0x31d3c4(0xce)+_0x31d3c4(0x1b3)+_0x31d3c4(0x1b4)+_0x31d3c4(0x1be)+'VALUES\x20(?,'+_0x31d3c4(0x9a)+_0x31d3c4(0x1be)+'ON\x20CONFLIC'+_0x31d3c4(0x16d)+_0x31d3c4(0x188)+_0x31d3c4(0x13a)+_0x31d3c4(0xc2)+_0x31d3c4(0x17b)+_0x31d3c4(0x1db)+'r_index'),[_0xe2bccf,'',Math['floor'](Date['now']()/(0xd9b+-0xd6*-0x2b+0x1*-0x2da5)),_0x30b017]);}catch(_0x52e29a){}return _0x4638e2;}return await pickNextGlobalQuote();}catch(_0xf46a34){return warn('['+name+(']\x20pickNext'+'QuoteForGr'+_0x31d3c4(0x234)+'\x20')+(_0xf46a34?.[_0x31d3c4(0x228)]||_0xf46a34)),null;}}async function setDailySetting(_0x14294e,_0x5d4941,_0x3e97d1=null){const _0xe3ebac=_0x9b073a;try{const _0x4c2a73=typeof _0x3e97d1===_0xe3ebac(0x1a1)&&/^\d{2}:\d{2}$/[_0xe3ebac(0xa1)](_0x3e97d1)?_0x3e97d1:_0x3e97d1?_0x3e97d1:_0xe3ebac(0x1f3),_0x223aa0=_0x5d4941?0x5d6*-0x1+0x1b7a+0x1*-0x15a3:-0x8a5+-0x2*-0xb27+-0xda9;return await db['run'](_0xe3ebac(0xcb)+'O\x20'+DAILY_TABLE+(_0xe3ebac(0x142)+_0xe3ebac(0x236)+_0xe3ebac(0x21b)+_0xe3ebac(0x19e)+_0xe3ebac(0x9d)+'?,\x20?,\x200)\x0a\x20'+_0xe3ebac(0x203)+_0xe3ebac(0x11f)+'up_jid)\x20DO'+'\x20UPDATE\x20SE'+_0xe3ebac(0x18e)+'=\x20excluded'+'.enabled,\x20'+_0xe3ebac(0x1cd)+_0xe3ebac(0x129)),[_0x14294e,_0x223aa0,_0x4c2a73]),!![];}catch(_0x1961ca){return warn('['+name+(_0xe3ebac(0x204)+_0xe3ebac(0x1e9)+_0xe3ebac(0x157))+(_0x1961ca?.[_0xe3ebac(0x228)]||_0x1961ca)),![];}}async function getDailySetting(_0x4543ab){const _0x123b4c=_0x9b073a;try{const _0x13dbaa=await db[_0x123b4c(0xff)]('SELECT\x20ena'+_0x123b4c(0xcc)+_0x123b4c(0x1af)+_0x123b4c(0xed)+DAILY_TABLE+(_0x123b4c(0xa3)+_0x123b4c(0x223)),[_0x4543ab]);return _0x13dbaa||{'enabled':0x0,'time':_0x123b4c(0x1f3),'last_sent':0x0};}catch(_0x216cc2){return warn('['+name+(_0x123b4c(0xea)+_0x123b4c(0x1e9)+_0x123b4c(0x157))+(_0x216cc2?.[_0x123b4c(0x228)]||_0x216cc2)),{'enabled':0x0,'time':_0x123b4c(0x1f3),'last_sent':0x0};}}async function updateDailyLastSent(_0x5d7e96,_0x1aaa43){const _0x12871a=_0x9b073a;try{await db[_0x12871a(0xb2)]('UPDATE\x20'+DAILY_TABLE+(_0x12871a(0x1bb)+_0x12871a(0xbf)+_0x12871a(0x12e)+_0x12871a(0x10b)),[_0x1aaa43||Math[_0x12871a(0x15e)](Date['now']()/(-0x31*0x64+0x215b+-0xa4f*0x1)),_0x5d7e96]);}catch(_0x521bc1){warn('['+name+(_0x12871a(0x22b)+_0x12871a(0x165)+'t\x20error:\x20')+(_0x521bc1?.[_0x12871a(0x228)]||_0x521bc1));}}function tryBuildSendApiFromBot(_0x3e7663){const _0x39ba8a=_0x9b073a;if(!_0x3e7663)return null;if(typeof _0x3e7663['sendMessag'+'e']==='function')return async(_0x3d6d2e,_0x38377f)=>_0x3e7663['sendMessag'+'e'](_0x3d6d2e,_0x38377f);if(_0x3e7663[_0x39ba8a(0x227)]&&typeof _0x3e7663[_0x39ba8a(0x227)][_0x39ba8a(0x18c)+'e']===_0x39ba8a(0x185))return async(_0x3a092a,_0xfb88a0)=>_0x3e7663['sock'][_0x39ba8a(0x18c)+'e'](_0x3a092a,_0xfb88a0);return null;}function _0x566b(_0xe63f86,_0x1256b3){const _0x255228=_0x5a40();return _0x566b=function(_0x4c6ee0,_0x1c1dbe){_0x4c6ee0=_0x4c6ee0-(0x114*0x4+0x11fa+-0x15b8);let _0x3690c7=_0x255228[_0x4c6ee0];return _0x3690c7;},_0x566b(_0xe63f86,_0x1256b3);}function setupSendApi(_0x2f40b0){const _0x3a6944=_0x9b073a;botRef=_0x2f40b0,sendApi=tryBuildSendApiFromBot(botRef),info('['+name+(_0x3a6944(0x12d)+'\x20')+(sendApi?'available':'not-availa'+'ble'));}async function safeSend(_0x4fd1b0,_0x62d1e4,_0x718d5e=[]){const _0x197297=_0x9b073a;try{if(!_0x4fd1b0||!_0x62d1e4)return![];if(Array[_0x197297(0x106)](_0x718d5e)&&_0x718d5e[_0x197297(0xca)])_0x62d1e4[_0x197297(0x158)]=_0x718d5e;if(sendApi)return await sendApi(_0x4fd1b0,_0x62d1e4),!![];if(botRef&&typeof botRef[_0x197297(0x18c)+'e']===_0x197297(0x185))return await botRef[_0x197297(0x18c)+'e'](_0x4fd1b0,_0x62d1e4),!![];if(botRef&&botRef[_0x197297(0x227)]&&typeof botRef[_0x197297(0x227)][_0x197297(0x18c)+'e']===_0x197297(0x185))return await botRef[_0x197297(0x227)]['sendMessag'+'e'](_0x4fd1b0,_0x62d1e4),!![];return warn('['+name+(']\x20no\x20send\x20'+_0x197297(0x10a)+_0x197297(0x16b))),![];}catch(_0x4c9642){return warn('['+name+(']\x20safeSend'+_0x197297(0x21c))+(_0x4c9642?.[_0x197297(0x228)]||_0x4c9642)),![];}}async function composeAliveMessage(_0x496486){const _0x5572c7=_0x9b073a;try{const _0x382eaa=await pickNextQuoteForGroup(_0x496486),_0x3751fb=_0x5572c7(0x124)+_0x5572c7(0x108),_0x4bba10=[];_0x382eaa&&(_0x4bba10['push'](_0x3751fb),_0x4bba10[_0x5572c7(0x126)](_0x5572c7(0x1bd)+_0x5572c7(0x225)),_0x4bba10[_0x5572c7(0x126)](String(_0x382eaa)[_0x5572c7(0x11b)]()),_0x4bba10[_0x5572c7(0x126)](_0x3751fb));const _0x3ec42b=await db[_0x5572c7(0xff)](_0x5572c7(0x1ef)+_0x5572c7(0x16e)+'OM\x20module_'+_0x5572c7(0xad)+_0x5572c7(0x14f)+_0x5572c7(0x112),[name])[_0x5572c7(0x98)](()=>null),_0x22ddbc=_0x3ec42b&&Number(_0x3ec42b[_0x5572c7(0xd7)])?Number(_0x3ec42b[_0x5572c7(0xd7)]):Math[_0x5572c7(0x15e)](moduleStartTs/(-0x1025+0x3c7+0x1*0x1046)),_0x4811c9=Math[_0x5572c7(0x1f4)](-0x11c*-0x1d+0x1*-0x19d8+0xf*-0x6c,Math[_0x5572c7(0x15e)](Date[_0x5572c7(0x141)]()/(0x1fa2*-0x1+0x1a28+0x962))-_0x22ddbc),_0x3440ad=formatUptimeFromSeconds(_0x4811c9);_0x4bba10[_0x5572c7(0x126)](_0x5572c7(0x21e)+_0x3440ad),_0x4bba10[_0x5572c7(0x126)](_0x3751fb),_0x4bba10['push']('');const _0x3eb51e=await db[_0x5572c7(0xff)](_0x5572c7(0xc4)+_0x5572c7(0xf0)+ALIVE_TABLE+('\x20WHERE\x20gro'+'up_jid\x20=\x20?'),[_0x496486]);if(_0x3eb51e&&_0x3eb51e[_0x5572c7(0x228)])_0x4bba10[_0x5572c7(0x126)](String(_0x3eb51e[_0x5572c7(0x228)])[_0x5572c7(0x11b)]());return _0x4bba10[_0x5572c7(0x143)]('\x0a');}catch(_0x2d4604){return warn('['+name+(_0x5572c7(0x1b0)+_0x5572c7(0x1a7)+_0x5572c7(0x22c))+(_0x2d4604?.[_0x5572c7(0x228)]||_0x2d4604)),'Alive';}}function formatUptimeFromSeconds(_0x44f96e){const _0xea404b=_0x9b073a,_0x465166=Math['floor'](_0x44f96e/((0x182f+-0x4c6+-0x2b*0x73)*(-0xf78*-0x2+0x8e*0x5+-0x13a6))),_0x4c939d=Math[_0xea404b(0x15e)](_0x44f96e%((0x1*0x66+-0x4*0x7b2+-0xa6*-0x2f)*(-0x2*0x125f+0x2079+0xf7*0x13))/(0x17bf+0x3*-0x71f+-0x5d7*-0x2)),_0x33f622=Math['floor'](_0x44f96e%(0x184f*0x1+-0x169b+-0xc5c*-0x1)/(-0x2ca+0x689*-0x1+0x98f)),_0x26a4b4=[];if(_0x465166)_0x26a4b4['push'](_0x465166+_0xea404b(0x1d2)+(_0x465166===0x8a5*0x1+-0x6d*-0x3b+-0x21c3?'':'s'));if(_0x4c939d)_0x26a4b4[_0xea404b(0x126)](_0x4c939d+_0xea404b(0xf5)+(_0x4c939d===0x1*-0x14c2+0x477*0x3+0x75e?'':'s'));if(_0x33f622||_0x26a4b4[_0xea404b(0xca)]===0x4*-0x8bf+0x8d+0x226f)_0x26a4b4[_0xea404b(0x126)](_0x33f622+_0xea404b(0x11a)+(_0x33f622===-0x351+-0x12b0+0x6*0x3ab?'':'s'));return _0x26a4b4[_0xea404b(0x143)]('\x20');}function buildExternalAdReply(_0x1acf05,_0x2f4718=''){const _0x4951ef=_0x9b073a,_0x30b7e2=cardImages[Math['floor'](Math['random']()*cardImages[_0x4951ef(0xca)])],_0x17805b=_0x4951ef(0x1d7)+_0x4951ef(0x216),_0x4f8616=(''+(_0x1acf05||''))[_0x4951ef(0x11b)]()||'Group',_0x32ed44={'title':_0x17805b,'body':_0x4f8616,'thumbnailUrl':_0x30b7e2,'mediaType':0x1,'renderLargerThumbnail':!![]};return _0x32ed44;}async function sendAliveToChat(_0x2f59ac,_0x4ecc42){const _0xdc6fc3=_0x9b073a;try{if(!_0x2f59ac)return![];let _0x5f1024='';try{if(String(_0x2f59ac)[_0xdc6fc3(0x20d)](_0xdc6fc3(0x10d))){const _0x1c4266=await(botRef?.[_0xdc6fc3(0x227)]||botRef)[_0xdc6fc3(0xaa)+_0xdc6fc3(0x21a)](_0x2f59ac)[_0xdc6fc3(0x98)](()=>null);_0x5f1024=_0x1c4266?.[_0xdc6fc3(0x195)]||'';}}catch(_0x5d23e6){_0x5f1024='';}const _0x2f8467=buildExternalAdReply(_0x5f1024),_0x1474a1={'text':_0x4ecc42,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'externalAdReply':_0x2f8467}};return await safeSend(_0x2f59ac,_0x1474a1);}catch(_0x34bc11){return warn('['+name+(_0xdc6fc3(0x1a5)+'eToChat\x20er'+_0xdc6fc3(0x157))+(_0x34bc11?.[_0xdc6fc3(0x228)]||_0x34bc11)),![];}}function splitRestForGp(_0x1b79a2){const _0x5528e4=_0x9b073a;if(!_0x1b79a2)return{'left':'','gp':null};const _0x5477fc=_0x1b79a2[_0x5528e4(0xeb)](/\bgp[:\s]+(\S+)/i);if(_0x5477fc){const _0x4d68d4=_0x1b79a2[_0x5528e4(0x1a4)](0x1567+0xf64*0x1+-0x24cb,_0x5477fc['index'])[_0x5528e4(0x11b)](),_0x5236d2=_0x5477fc[0x1*-0x27+-0x14e*-0x7+-0x8fa][_0x5528e4(0x11b)]();return{'left':_0x4d68d4,'gp':_0x5236d2};}const _0x2922e5=_0x1b79a2[_0x5528e4(0xdb)](/\s+/)[_0x5528e4(0xb4)](Boolean);if(_0x2922e5[_0x5528e4(0xca)]>-0x1f79+-0x107a+0xc*0x3ff){const _0x274faa=_0x2922e5[_0x2922e5[_0x5528e4(0xca)]-(-0x1d3b+-0x98b*-0x2+0xa26)];if(_0x274faa[_0x5528e4(0x153)+'e']()===_0x5528e4(0x171)||_0x274faa[_0x5528e4(0xfc)]('@'))return _0x2922e5['pop'](),{'left':_0x2922e5[_0x5528e4(0x143)]('\x20')[_0x5528e4(0x11b)](),'gp':_0x274faa};}return{'left':_0x1b79a2['trim'](),'gp':null};}async function resolveDefaultGroupJids(_0x262042){const _0x87e094=_0x9b073a;try{if(!_0x262042)return[];const _0x564b58=String(_0x262042)[_0x87e094(0xdb)]('@')[0x26ff+-0x10b1+-0x164e],_0x540ae4=await getDefault(_0x564b58)[_0x87e094(0x98)](()=>null);if(!_0x540ae4)return[];const _0x4e3a7e=Array[_0x87e094(0x106)](_0x540ae4)?_0x540ae4:[_0x540ae4],_0xcd00a8=new Set();for(const _0x1b757d of _0x4e3a7e){if(!_0x1b757d)continue;try{const _0x183979=await getConnection(_0x1b757d)[_0x87e094(0x98)](()=>null);if(Array[_0x87e094(0x106)](_0x183979)){for(const _0x36cb2d of _0x183979)if(_0x36cb2d)_0xcd00a8[_0x87e094(0x18d)](String(_0x36cb2d));else{if(_0x183979)_0xcd00a8['add'](String(_0x183979));}}}catch(_0x37aaf4){warn('['+name+(']\x20failed\x20r'+'esolving\x20d'+_0x87e094(0x1df))+_0x1b757d+':\x20'+(_0x37aaf4?.[_0x87e094(0x228)]||_0x37aaf4));}}return Array[_0x87e094(0x1bc)](_0xcd00a8);}catch(_0x9a854d){return warn('['+name+(_0x87e094(0x154)+_0x87e094(0x19b)+_0x87e094(0x1b6)+_0x87e094(0x13f))+(_0x9a854d?.[_0x87e094(0x228)]||_0x9a854d)),[];}}async function findStoredMatchFromFindings(_0x481f68=[]){const _0x38076d=_0x9b073a;try{const _0x5ec82d=await listSudo();if(!Array[_0x38076d(0x106)](_0x5ec82d)||_0x5ec82d[_0x38076d(0xca)]===0x48a+-0xe7b+-0x1*-0x9f1)return null;const _0x27fb12=new Set(_0x5ec82d[_0x38076d(0x14e)](String));for(const _0x465bfa of _0x481f68||[]){if(!_0x465bfa||typeof _0x465bfa[_0x38076d(0x92)]!==_0x38076d(0x1a1))continue;const _0x4bac84=normalizeToJid(_0x465bfa[_0x38076d(0x92)]);if(_0x4bac84&&_0x27fb12[_0x38076d(0x1ad)](_0x4bac84))return _0x4bac84;if(_0x27fb12[_0x38076d(0x1ad)](_0x465bfa[_0x38076d(0x92)]))return _0x465bfa[_0x38076d(0x92)];const _0xdddeab=String(_0x465bfa[_0x38076d(0x92)])[_0x38076d(0xdb)]('@')[-0x20d1+0x1498+0xc39][_0x38076d(0xdb)](':')[-0xd52+0x14e6+0x1e5*-0x4];if(_0xdddeab)for(const _0x5d0121 of _0x5ec82d){const _0x1cf5ac=String(_0x5d0121)[_0x38076d(0xdb)]('@')[-0x1f*0x4+0x6*0x60+-0x1c4];if(_0x1cf5ac&&_0x1cf5ac===_0xdddeab)return _0x5d0121;}}return null;}catch(_0x2ef178){return warn('['+name+(_0x38076d(0x18f)+_0x38076d(0xfd)+_0x38076d(0x222)+_0x38076d(0x1e8))+(_0x2ef178?.['message']||_0x2ef178)),null;}}let schedulerHandle=null,schedulerRunning=![];function startDailyScheduler(){const _0x53a7ba=_0x9b073a;stopDailyScheduler();const _0x2342a7=-0x13448+0x9ccd+0x1*0x181db-Date[_0x53a7ba(0x141)]()%(0x1*-0x7bd5+-0x1b4b5+-0x31aea*-0x1);setTimeout(()=>{const _0x35cb0f=_0x53a7ba;_dailyTick()[_0x35cb0f(0x98)](_0x1b4e2a=>warn('['+name+(_0x35cb0f(0x14a)+_0x35cb0f(0x213)+_0x35cb0f(0x1c7))+(_0x1b4e2a?.[_0x35cb0f(0x228)]||_0x1b4e2a))),schedulerHandle=setInterval(()=>_dailyTick()[_0x35cb0f(0x98)](_0x4bc8c6=>warn('['+name+(_0x35cb0f(0x133)+_0x35cb0f(0x1ed))+(_0x4bc8c6?.[_0x35cb0f(0x228)]||_0x4bc8c6))),(-0x6b6+-0x222f+0x2921)*(-0xede+-0x87+-0x1*-0x134d)),info('['+name+(_0x35cb0f(0x15f)+'heduler\x20st'+_0x35cb0f(0x181)+'gned)'));},_0x2342a7);}function stopDailyScheduler(){const _0x12c14f=_0x9b073a;schedulerHandle&&(clearInterval(schedulerHandle),schedulerHandle=null,info('['+name+(_0x12c14f(0x15f)+_0x12c14f(0x191)+_0x12c14f(0x220))));}async function _dailyTick(){const _0x16354f=_0x9b073a;if(schedulerRunning)return;schedulerRunning=!![];try{const _0x4dd254=await db['all']('SELECT\x20gro'+'up_jid,\x20en'+_0x16354f(0x10f)+'e,\x20last_se'+_0x16354f(0x12f)+DAILY_TABLE+(_0x16354f(0x21f)+_0x16354f(0x122)));if(!_0x4dd254||!_0x4dd254[_0x16354f(0xca)])return;for(const _0x3d7914 of _0x4dd254){try{const _0x240c73=_0x3d7914['group_jid'],_0x5299cb=_0x3d7914['time']||'08:00',_0x1b0436=DEFAULT_TIMEZONE,_0x1029c=DateTime[_0x16354f(0x141)]()[_0x16354f(0x1fb)](_0x1b0436),_0x54d324=_0x1029c['toFormat'](_0x16354f(0x1c8));if(_0x54d324!==_0x5299cb)continue;const _0x274301=Number(_0x3d7914[_0x16354f(0xd0)]||-0x65d*0x2+-0x1b89+0x2843);if(_0x274301){const _0x11241a=DateTime[_0x16354f(0x1c4)+'s'](_0x274301)[_0x16354f(0x1fb)](_0x1b0436);if(_0x11241a['hasSame'](_0x1029c,_0x16354f(0x1fd)))continue;}const _0x2432ab=await composeAliveMessage(_0x240c73),_0x269472=await sendAliveToChat(_0x240c73,_0x2432ab);_0x269472?(await updateDailyLastSent(_0x240c73,Math['floor'](Date[_0x16354f(0x141)]()/(0x2474+-0x20c4+-0x8*-0x7))),info('['+name+(_0x16354f(0x111)+_0x16354f(0x125)+'o\x20')+_0x240c73+_0x16354f(0x22f)+_0x5299cb)):warn('['+name+(_0x16354f(0x111)+_0x16354f(0x186)+'\x20to\x20send\x20t'+'o\x20')+_0x240c73);}catch(_0x1d6681){warn('['+name+(_0x16354f(0x1f1)+_0x16354f(0xaf)+'error:\x20')+(_0x1d6681?.[_0x16354f(0x228)]||_0x1d6681));}}}catch(_0x448695){warn('['+name+(_0x16354f(0x110)+_0x16354f(0x1ed))+(_0x448695?.['message']||_0x448695));}finally{schedulerRunning=![];}}function extractTextFromMessage(_0x52c9c4){const _0x4962aa=_0x9b073a;if(!_0x52c9c4||!_0x52c9c4[_0x4962aa(0x228)])return'';const _0x4ecb35=_0x52c9c4[_0x4962aa(0x228)];if(_0x4ecb35[_0x4962aa(0xbe)+'on'])return _0x4ecb35['conversati'+'on'];if(_0x4ecb35[_0x4962aa(0x9f)+_0x4962aa(0x1bf)]?.[_0x4962aa(0x139)])return _0x4ecb35[_0x4962aa(0x9f)+_0x4962aa(0x1bf)]['text'];if(_0x4ecb35[_0x4962aa(0x1d8)+'ge']?.[_0x4962aa(0x200)])return _0x4ecb35[_0x4962aa(0x1d8)+'ge'][_0x4962aa(0x200)];if(_0x4ecb35[_0x4962aa(0xc7)+'ge']?.['caption'])return _0x4ecb35[_0x4962aa(0xc7)+'ge'][_0x4962aa(0x200)];if(_0x4ecb35[_0x4962aa(0x14c)+_0x4962aa(0x1e4)+'ge']?.[_0x4962aa(0xc0)+_0x4962aa(0xf7)])return _0x4ecb35['buttonsRes'+_0x4962aa(0x1e4)+'ge']['selectedBu'+'ttonId'];if(_0x4ecb35[_0x4962aa(0x103)+'seMessage']?.[_0x4962aa(0x23b)+_0x4962aa(0xf2)]?.[_0x4962aa(0x127)+_0x4962aa(0x1c1)])return _0x4ecb35[_0x4962aa(0x103)+_0x4962aa(0x14b)][_0x4962aa(0x23b)+_0x4962aa(0xf2)]?.[_0x4962aa(0x127)+_0x4962aa(0x1c1)];return'';}function detectCommandName(_0xd2be6c){const _0x427440=_0x9b073a;if(!_0xd2be6c)return'';return _0xd2be6c[_0x427440(0x11b)]()[_0x427440(0xdb)](/\s+/)[0x1b8a+0x21d*-0x8+-0x1*0xaa2][_0x427440(0x153)+'e']();}export async function initialize(_0x4369a8){const _0xd292d1=_0x9b073a;if(!_0x4369a8)throw new Error(_0xd292d1(0x173)+_0xd292d1(0x15b)+'uires\x20bot\x20'+_0xd292d1(0x239));botRef=_0x4369a8,setupSendApi(botRef),moduleStartTs=Date[_0xd292d1(0x141)](),await ensureSchema()['catch'](_0x55bf77=>{const _0x295014=_0xd292d1;error(_0x55bf77,'['+name+(_0x295014(0x138)+_0x295014(0xc6))+(_0x55bf77?.[_0x295014(0x228)]||_0x55bf77));throw _0x55bf77;}),await loadQuotesFromFileIntoDB()['catch'](_0x451ab4=>warn('['+name+(_0xd292d1(0x226)+_0xd292d1(0x115)+'\x20')+(_0x451ab4?.['message']||_0x451ab4)));try{const _0x1dce90=await db['get'](_0xd292d1(0x1ef)+_0xd292d1(0x16e)+_0xd292d1(0x21d)+_0xd292d1(0xad)+'RE\x20module\x20'+_0xd292d1(0x112),[name]);if(!_0x1dce90){const _0x578725=Math[_0xd292d1(0x15e)](Date[_0xd292d1(0x141)]()/(-0x1c30+0xb*-0x313+0x167*0x2f));await db['run']('INSERT\x20INT'+_0xd292d1(0xae)+_0xd292d1(0xa6)+_0xd292d1(0xc1)+_0xd292d1(0x118)+_0xd292d1(0xb0),[name,_0x578725]);}}catch(_0x4f41e7){}startDailyScheduler(),info('['+name+(']\x20initiali'+'zed\x20v')+version);}function _0x5a40(){const _0x3e8b04=[']\x20DB\x20init\x20','text','TE\x20SET\x20quo','\x20SET\x20used\x20','\x2708:00\x27,\x0a\x20','e\x20DISABLED','EFAULT\x200\x0a\x20','ed:\x20','\x20(quote,\x20u','now','\x20(group_ji','join','492792rHXjDe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20c','SELECT\x20quo','talive\x20(pr','for\x20this\x20g','roup.',']\x20initial\x20','seMessage','buttonsRes','Time\x20must\x20','map','RE\x20module\x20','replace','alive','quote_rr_i','toLowerCas',']\x20resolveD','e\x20ENABLED\x20','d:\x20','ror:\x20','mentions','excluded.m','\x20ON\x20CONFLI','ialize\x20req','d\x20for\x20','3.0.0','floor',']\x20daily\x20sc','p:alias','TIMEZONE_N','339rfgfaS','T\x200,\x0a\x20\x20\x20\x20\x20','=\x200\x20WHERE\x20','ilyLastSen','d\x20=\x200\x20ORDE','alias|gp:a','ARY\x20KEY,\x0a\x20','resolveNam','No\x20quotes\x20','ailable','Africa/Nai','T(group_ji','rted_at\x20FR','e):\x0a','arse\x20faile','all','set','alive.init','Daily\x20aliv','d,\x20message','reated_by\x20','isCommand','ess\x20enter)','LT\x200\x0a\x20\x20\x20\x20\x20','.jpg','x\x20=\x20exclud','lti-line\x20a',']\x20setalive','ted_at\x20=\x20e','alive_quot','group.','arted\x20(ali','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','No\x20default','om\x20file\x20in','function','ive\x20failed','available.','d)\x20DO\x20UPDA','t_sent\x20INT','id\x20LIMIT\x202','TEGER\x20DEFA','sendMessag','add','T\x20enabled\x20',']\x20findStor','0\x0a\x20\x20\x20\x20\x20\x20);','heduler\x20st','\x20excluded.','sed)\x20VALUE','ply\x20the\x20al','subject','S\x20(?,\x200)','object','age>\x20gp:al','on\x2007:30\x20g','participan','efaultGrou','findings','ll\x20|\x20alive','st_sent)\x20V','\x20id\x20INTEGE','\x20\x20\x20ON\x20CONF','string','IF\x20NOT\x20EXI','e\x20message\x20','slice',']\x20sendAliv','Saved\x20aliv','liveMessag','AULT\x200,\x0a\x20\x20','existsSync','NTEGER\x20DEF','CREMENT,\x0a\x20','r\x20replies\x20','has','Global\x20quo',',\x20last_sen',']\x20composeA','GER\x20DEFAUL','\x20TEXT\x20PRIM','at,\x20quote_','rr_index)\x0a','ive\x20all\x22.','pJids\x20fail','sage,\x20upda','dia/alive','alive_dail','Daily\x20sett','\x20SET\x20last_','from','🌍\x20QUOTE\x20OF','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','xtMessage','talive\x20(en','wId','\x20\x20\x20\x20\x20\x20\x20quo','.quotes.js','fromSecond','R\x20DEFAULT\x20','2QCKlBX','\x20error:\x20','HH:mm','cluded.mes','hema\x20faile','3719954JMAStq','https://i-','time\x20=\x20exc','ter)\x20<mess','id\x20LIMIT\x201',']\x20alive\x20al','tes\x20(sampl','\x20day','alivedaily','ias','parse','padStart','✅\x20Bot\x20is\x20A','imageMessa','ine.\x20Examp','utf8','ed.quote_r',':\x20\x22','le:\x0a','quote\x20TEXT','efault\x20','live\x20you\x20c','156crbXGR','r:\x20','\x20HH:mm\x20gp:','ponseMessa','\x0a\x20\x20\x20\x20','dConfig\x20re','\x20to\x20','error:\x20','Setting\x20er','\x20quotes\x20fr','message\x20=\x20','xcluded.up','ck\x20error:\x20','10pSxKzj','SELECT\x20sta','UPDATE\x20',']\x20dailyTic','e(s)\x20for\x20','08:00','max','\x20quote\x20FRO','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','\x20pm\x20failed','getUniqueJ','isInteger','p\x0aFor\x20seta','setZone','key','day','\x20for\x20','T\x20NULL\x20UNI','caption',']\x20refreshC','tiline:\x20se','\x20\x20\x20\x20\x20ON\x20CO',']\x20setDaily','enter)\x20<me','ULT\x200\x0a\x20\x20\x20\x20','ile\x20JSON\x20p','DELETE\x20FRO','\x20for\x20this\x20','delete','und\x20at\x20','ATE\x20SET\x20me','endsWith','\x20group_jid','266542WYjBge','roup\x20at\x20','e:\x20','\x20\x20\x20\x20\x20creat','daily\x20tick','\x20\x20\x20\x20\x20\x20\x20gro',']\x20quotes\x20f','live','promises','\x20\x20\x20\x20\x20\x20quot','Usage:\x20ali','ata',',\x20time,\x20la','\x20failed:\x20','OM\x20module_','Uptime:\x20','\x20WHERE\x20ena','opped','data','mFindings\x20','up_jid\x20=\x20?','MIT\x201','\x20THE\x20DAY\x0a',']\x20quotes\x20l','sock','message','remoteJid','robi',']\x20updateDa','e\x20error:\x20','ved\x20alive\x20','TIMEZONE','\x20at\x20','message\x20fo','ER\x20DEFAULT','values','\x20target(s)','oup\x20error:','\x20NOT\x20NULL,','d,\x20enabled',']\x20config\x20r','gistration','instance','livedaily\x20','singleSele','\x20\x20\x20\x20\x20);\x0a\x20\x20','jid','\x20\x20\x20\x20\x20\x20\x20ena',']\x20isadmin\x20','T\x20NOT\x20NULL','Please\x20sup','prepare','catch','ive\x20messag','\x20?,\x20?,\x20?)\x0a','\x0a\x20\x20\x20\x20\x20\x20CRE','onnection(','ALUES\x20(?,\x20','ailable\x20fo','extendedTe','live\x20messa','test',']\x20loadQuot','\x20WHERE\x20gro','enabled','setalive','ptime\x20(mod','ile\x20not\x20fo','ings:\x0a','\x20\x20\x20used\x20IN','groupMetad','essage,\x20up','IGNORE\x20INT','uptime\x20WHE','O\x20module_u','k\x20per-row\x20','UES\x20(?,\x20?)','29310aLaAmQ','run','ed_at\x20INTE','filter','\x200,\x0a\x20\x20\x20\x20\x20\x20','CT(group_j','\x0a\x20<your\x20mu',']\x20onMessag',']\x20delalive','all\x20or\x20a\x20g','up_jid\x20TEX','alias','g\x20file\x20loa','conversati','sent\x20=\x20?\x20W','selectedBu','ule,\x20start','te_rr_inde','exec','SELECT\x20mes','dated_at\x20=','fatal:\x20','videoMessa','e.\x20Use\x20mul','24-hour).\x20','length','INSERT\x20INT','bled,\x20time','off',',\x20updated_','vedaily\x20on','last_sent','\x20ORDER\x20BY\x20','al_quotes','normalizeT','SELECT\x20id,','at)\x20VALUES','e_rr_index','started_at','T\x20DEFAULT\x20','Could\x20not\x20','KEY\x20AUTOIN','split','\x20);\x0a\x20\x20\x20\x20','_at\x20INTEGE','y_settings','s).','sage\x20TEXT\x20','ge>','\x22.\x20Use\x20gp:','bled\x20INTEG',']\x20ensureSc','time',']\x20DB\x20schem','\x20default\x20c','lti-line:\x20','d|all>\x20inl',']\x20getDaily','match','22060DpqiAL','t\x20FROM\x20','be\x20HH:mm\x20(','for\x20','sage\x20FROM\x20','l\x20->\x20faile','ctReply','TEXT\x20DEFAU','365DrvTLW','\x20hour','\x20\x20\x20\x20\x20\x20\x20\x20up','ttonId','alias,\x20gp:',']\x20PM:\x20bot\x20','ids','resolve\x20gp','includes','edMatchFro','2455387VQgMRg','get','clear','\x20\x20);\x0a\x20\x20\x20\x20','Example:\x20a','listRespon','LT\x20\x27\x27,\x0a\x20\x20\x20','\x20WHERE\x20use','isArray','R\x20PRIMARY\x20','═════⊷','\x20\x20\x20updated','surface\x20av','_jid\x20=\x20?','\x20—\x20skippin','@g.us','R\x20BY\x20id\x20LI','abled,\x20tim',']\x20_dailyTi',']\x20daily\x20al','=\x20?','ATE\x20TABLE\x20','(fromMe)','oad\x20error:','at\x20','EGER\x20DEFAU','ed_at)\x20VAL','INSERT\x20OR\x20','\x20minute','trim','47412SLgNIo',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','gp:alias','NFLICT(gro','o\x20send\x20\x22al','an\x20send\x20mu','bled\x20=\x201','Sent\x20alive','⊷═════════','ive\x20sent\x20t','push','selectedRo','oUserJid','luded.time','listquote','8tTbFOs','fromMe',']\x20send\x20API','HERE\x20group','nt\x20FROM\x20','delalive','\x20(?,\x20?,\x20?)','\x20gp:mygrou',']\x20daily\x20ti','IntoDB\x20err','STS\x20','OFF','quote'];_0x5a40=function(){return _0x3e8b04;};return _0x5a40();}export async function onMessage(_0xd8a3a0){const _0x289f85=_0x9b073a;try{if(!_0xd8a3a0||!_0xd8a3a0[_0x289f85(0x1fc)]||!_0xd8a3a0[_0x289f85(0x228)])return;const _0x9ff12f=String(_0xd8a3a0[_0x289f85(0x1fc)][_0x289f85(0x229)]||'')+'::'+String(_0xd8a3a0[_0x289f85(0x1fc)]['id']||_0xd8a3a0['key'][_0x289f85(0x19a)+'t']||'');if(isProcessed(_0x9ff12f))return;markProcessed(_0x9ff12f);const _0x4a60b6=String(extractTextFromMessage(_0xd8a3a0)||'');if(!_0x4a60b6['trim']())return;let _0x29f266='',_0x254b3f=![];if(_0xd8a3a0[_0x289f85(0x177)]){const _0x17ffda=(_0x4a60b6['trim']()[_0x289f85(0xdb)](/\s+/)[0x8*-0x43f+0xf9f+-0xb*-0x1ab]||'')[_0x289f85(0x153)+'e']();commands[_0x289f85(0xfc)](_0x17ffda)&&(_0x29f266=_0x17ffda,_0x254b3f=!![]);}else{const _0x44eb3a=(_0x4a60b6[_0x289f85(0xdb)](/\r?\n/)[0x163c*-0x1+-0x1299+0x28d5]||'')[_0x289f85(0x11b)](),_0x5b2351=(_0x44eb3a[_0x289f85(0xdb)](/\s+/)[0x5d9+-0x24be+-0x1ee5*-0x1]||'')[_0x289f85(0x153)+'e']();commands[_0x289f85(0xfc)](_0x5b2351)&&(_0x29f266=_0x5b2351,_0x254b3f=!![]);}if(!_0x254b3f)return;const _0x2b9511=_0xd8a3a0[_0x289f85(0x1fc)][_0x289f85(0x229)],_0x5c589a=typeof _0x2b9511==='string'&&_0x2b9511['endsWith'](_0x289f85(0x10d));if(_0x5c589a){let _0x88951a=![];try{_0x88951a=await isadmin(botRef,_0xd8a3a0);}catch(_0x523212){warn('['+name+(_0x289f85(0x94)+'check\x20fail'+'ed')),_0x88951a=![];}if(!_0x88951a)return;const _0x4c20b2=_0xd8a3a0['key'][_0x289f85(0x19a)+'t']||_0xd8a3a0['key'][_0x289f85(0x1bc)]||_0xd8a3a0[_0x289f85(0x1fc)][_0x289f85(0x229)]||'',_0x23d575=_0x4a60b6[_0x289f85(0xdb)](/\r?\n/)[-0x2680+-0x1db9+0x4439]||'',_0x5b7dc7=_0x23d575[_0x289f85(0x11b)]()[_0x289f85(0xdb)](/\s+/)[_0x289f85(0xb4)](Boolean),_0x28e434=(_0x5b7dc7[0x1*0x6bb+0x1db9+0x1*-0x2473]||'')[_0x289f85(0x153)+'e']();if(_0x29f266===_0x289f85(0x151)){if(_0x28e434===_0x289f85(0x171)){const _0x1bdee3=(_0x4c20b2||'')[_0x289f85(0xdb)]('@')[-0xfd4*-0x2+0x1d0c+-0x5*0xc24],_0x41e645=await resolveDefaultGroupJids(_0x1bdee3);if(!_0x41e645||_0x41e645['length']===0x5b3*-0x3+-0x1fbb+0x30d4){await safeSend(_0x2b9511,{'text':_0x289f85(0x183)+'\x20connectio'+'ns\x20found\x20t'+_0x289f85(0x120)+_0x289f85(0x1b5)});return;}let _0x3367bf=0x11*0x10b+0x6*0x33d+-0x1c5*0x15;for(const _0xf51af8 of _0x41e645){try{const _0x413a2c=await composeAliveMessage(_0xf51af8);await sendAliveToChat(_0xf51af8,_0x413a2c),_0x3367bf++;}catch(_0x5df124){warn('['+name+(_0x289f85(0x1d0)+_0x289f85(0xf1)+_0x289f85(0x15c))+_0xf51af8+':\x20'+(_0x5df124?.[_0x289f85(0x228)]||_0x5df124));}}await safeSend(_0x2b9511,{'text':_0x289f85(0x123)+_0x289f85(0x1e7)+_0x3367bf+(_0x289f85(0xe7)+_0x289f85(0x9c)+_0x289f85(0xdf))});return;}const _0x416a41=await composeAliveMessage(_0x2b9511);await sendAliveToChat(_0x2b9511,_0x416a41);return;}if(_0x29f266==='setalive'){const _0x2ed32d=_0x4a60b6[_0x289f85(0xdb)](/\r?\n/),_0x1da0de=(_0x2ed32d[-0x17c6+-0x426+0x1bec]||'')[_0x289f85(0x11b)](),_0x1c7140=_0x1da0de[_0x289f85(0x150)](new RegExp('^'+_0x29f266+'\x5cb','i'),'')[_0x289f85(0x11b)](),_0x281473=[];if(_0x1c7140)_0x281473['push'](_0x1c7140);_0x281473[_0x289f85(0x126)](..._0x2ed32d['slice'](-0x4*0x949+0x1*0x132d+0x11f8));const _0x562105=_0x281473['join']('\x0a')[_0x289f85(0x11b)]();if(!_0x562105){await safeSend(_0x2b9511,{'text':'Usage:\x0a\x20se'+_0x289f85(0x147)+_0x289f85(0x178)+_0x289f85(0xb7)+_0x289f85(0x17c)+_0x289f85(0xa0)+_0x289f85(0xe1)});return;}const _0xbe7b4d=await db['run'](_0x289f85(0xcb)+'O\x20'+ALIVE_TABLE+(_0x289f85(0x142)+_0x289f85(0x175)+_0x289f85(0xce)+_0x289f85(0xd5)+_0x289f85(0x131)+_0x289f85(0x182)+_0x289f85(0x15a)+_0x289f85(0xb6)+'id)\x20DO\x20UPD'+_0x289f85(0x20c)+'ssage\x20=\x20ex'+_0x289f85(0x1c9)+_0x289f85(0x1b7)+_0x289f85(0x17e)+_0x289f85(0x1ec)+'dated_at'),[_0x2b9511,_0x562105,Math[_0x289f85(0x15e)](Date[_0x289f85(0x141)]()/(-0x10b1*-0x1+0x24cc+-0x1*0x3195))]);await safeSend(_0x2b9511,{'text':'Saved\x20aliv'+'e\x20message\x20'+_0x289f85(0x148)+_0x289f85(0x149)});return;}if(_0x29f266===_0x289f85(0x130)){const _0x228ee7=await db[_0x289f85(0xb2)](_0x289f85(0x208)+'M\x20'+ALIVE_TABLE+(_0x289f85(0xa3)+_0x289f85(0x223)),[_0x2b9511]);await safeSend(_0x2b9511,{'text':'Deleted\x20sa'+_0x289f85(0x22d)+_0x289f85(0x230)+'r\x20this\x20gro'+'up.'});return;}if(_0x29f266===_0x289f85(0x12a)){const _0x3eca6e=await db[_0x289f85(0x171)](_0x289f85(0xd4)+_0x289f85(0x1f5)+'M\x20'+ALIVE_QUOTES_TABLE+(_0x289f85(0xa3)+'up_jid\x20=\x20?'+_0x289f85(0xd1)+'id'),[_0x2b9511]);if(_0x3eca6e&&_0x3eca6e[_0x289f85(0xca)]){let _0x5d2fae='Quotes\x20for'+'\x20'+_0x2b9511+':\x0a';for(const _0x82006f of _0x3eca6e){_0x5d2fae+=_0x82006f['id']+'.\x20'+_0x82006f[_0x289f85(0x137)]+'\x0a',_0x5d2fae[_0x289f85(0xca)]>-0x1cd9+0x1269+-0x10*-0xf2&&(await safeSend(_0x2b9511,{'text':_0x5d2fae}),_0x5d2fae='');}if(_0x5d2fae['trim']())await safeSend(_0x2b9511,{'text':_0x5d2fae});return;}const _0x30f5f6=await db[_0x289f85(0x171)](_0x289f85(0xd4)+'\x20quote\x20FRO'+'M\x20'+GLOBAL_QUOTES_TABLE+(_0x289f85(0xd1)+'id\x20LIMIT\x201'+'0'));if(!_0x30f5f6||!_0x30f5f6['length']){await safeSend(_0x2b9511,{'text':_0x289f85(0x16a)+_0x289f85(0x187)});return;}let _0x5b1b91=_0x289f85(0x1ae)+_0x289f85(0x1d1)+_0x289f85(0x16f);for(const _0x3a53d4 of _0x30f5f6)_0x5b1b91+='-\x20'+_0x3a53d4[_0x289f85(0x137)]+'\x0a';await safeSend(_0x2b9511,{'text':_0x5b1b91});return;}if(_0x29f266===_0x289f85(0x1d3)){const _0x2f7652=_0x28e434||'';if(!_0x2f7652){const _0x58e347=await getDailySetting(_0x2b9511);await safeSend(_0x2b9511,{'text':_0x289f85(0x174)+_0x289f85(0x211)+(_0x58e347[_0x289f85(0xa4)]?'ON':'OFF')+_0x289f85(0x22f)+_0x58e347['time']});return;}if(_0x2f7652==='on'){const _0x5253cc=(_0x5b7dc7[-0x1a5f+-0x1155+0x45f*0xa]||_0x289f85(0x1f3))['trim']();if(!/^\d{1,2}:\d{2}$/[_0x289f85(0xa1)](_0x5253cc)){await safeSend(_0x2b9511,{'text':_0x289f85(0x14d)+_0x289f85(0xee)+_0x289f85(0xc9)+_0x289f85(0x102)+_0x289f85(0x23a)+'on\x2007:30'});return;}const _0x16999b=_0x5253cc[_0x289f85(0xdb)](':')[-0x1e*-0x121+0x168+-0x2346][_0x289f85(0x1d6)](0x1*-0x1dc5+0x179*0xb+-0x16*-0x9e,'0'),_0x350581=_0x5253cc[_0x289f85(0xdb)](':')[-0x1afd+-0x1*0x1e16+0x3914]['padStart'](-0x29*0x76+0x1*-0x96f+0x5ab*0x5,'0'),_0x404dc2=_0x16999b+':'+_0x350581;await setDailySetting(_0x2b9511,!![],_0x404dc2),await safeSend(_0x2b9511,{'text':_0x289f85(0x174)+'e\x20ENABLED\x20'+_0x289f85(0x148)+_0x289f85(0x210)+_0x404dc2});return;}if(_0x2f7652===_0x289f85(0xcd)){await setDailySetting(_0x2b9511,![],null),await safeSend(_0x2b9511,{'text':_0x289f85(0x174)+_0x289f85(0x13d)+_0x289f85(0x209)+_0x289f85(0x180)});return;}await safeSend(_0x2b9511,{'text':_0x289f85(0x219)+'vedaily\x20on'+'\x20HH:mm\x20|\x20a'+_0x289f85(0x23a)+_0x289f85(0xcd)});return;}return;}const _0x41bd09=Boolean(_0xd8a3a0['key'][_0x289f85(0x12c)]);let _0x447fcc=null;if(_0x41bd09){const _0x2d57e5=getBotJid();if(!_0x2d57e5){warn('['+name+(_0x289f85(0xf9)+'JID\x20not\x20av'+_0x289f85(0x9e)+_0x289f85(0x1ac)+_0x289f85(0x114)));return;}_0x447fcc=_0x2d57e5;}else{let _0x1320ec=![];try{_0x1320ec=await isSudo(botRef,_0xd8a3a0);}catch(_0x15671d){_0x1320ec=![];}if(!_0x1320ec)return;const _0x3a171b=userJidFromCtx(_0xd8a3a0)||{'findings':[]},_0x3a0fe4=await findStoredMatchFromFindings(_0x3a171b[_0x289f85(0x19c)]||[]);if(!_0x3a0fe4)return;_0x447fcc=_0x3a0fe4;}const {firstLine:_0x5f30e8,restText:_0x2eff83}=((()=>{const _0x3b4859=_0x289f85,_0x23b7ff=_0x4a60b6[_0x3b4859(0xdb)](/\r?\n/);return{'firstLine':_0x23b7ff[0x53*0x5c+0x18c2*-0x1+0x2*-0x289]||'','restText':_0x23b7ff['slice'](-0x11d8*-0x2+-0xb*0x137+0xb29*-0x2)[_0x3b4859(0x143)]('\x0a')};})()),_0x441e85=(_0x5f30e8||'')['trim']()['split'](/\s+/)[_0x289f85(0xb4)](Boolean),_0x389bad=(_0x441e85[-0x897*0x3+0x25b8*-0x1+-0x2a*-0x183]||'')[_0x289f85(0x153)+'e'](),_0xd60e29=_0x29f266,_0x28e93e=_0x2eff83&&_0x2eff83[_0x289f85(0xca)]?_0x2eff83+'\x0a'+_0x5f30e8:_0x5f30e8,_0x55fbd=_0x28e93e[_0x289f85(0xeb)](/\bgp[:\s]+(\S+)/i),_0x381a04=_0x55fbd?_0x55fbd[0x17+0x7*0x32f+-0x165f][_0x289f85(0x11b)]():null;async function _0xab701d(_0x2ac210){const _0x491639=_0x289f85;if(!_0x2ac210)return[];if(_0x2ac210[_0x491639(0x153)+'e']()==='all')return await _0x3e6104[_0x491639(0x1f8)+_0x491639(0xfa)]();const _0x466f43=await _0x3e6104[_0x491639(0x169)+'e'](_0x2ac210);if(_0x466f43)return[_0x466f43];if(_0x2ac210['includes']('@'))return[_0x3e6104[_0x491639(0xd3)+_0x491639(0x128)](_0x2ac210)];return[];}if(_0xd60e29===_0x289f85(0x12a)){const _0x3a95c1=await db[_0x289f85(0x171)](_0x289f85(0xd4)+_0x289f85(0x1f5)+'M\x20'+GLOBAL_QUOTES_TABLE+(_0x289f85(0xd1)+_0x289f85(0x18a)+'0'));if(!_0x3a95c1||!_0x3a95c1[_0x289f85(0xca)]){await safeSend(_0x447fcc,{'text':_0x289f85(0x16a)+_0x289f85(0x187)});return;}let _0x38d2a6='Global\x20quo'+_0x289f85(0x1d1)+'e):\x0a';for(const _0x2e6109 of _0x3a95c1)_0x38d2a6+='-\x20'+_0x2e6109['quote']+'\x0a';await safeSend(_0x447fcc,{'text':_0x38d2a6});return;}const _0x573da0=[_0x289f85(0x151),_0x289f85(0xa5),_0x289f85(0x130),'alivedaily'];if(_0x573da0[_0x289f85(0xfc)](_0xd60e29)&&!_0x381a04){await safeSend(_0x447fcc,{'text':'PM\x20usage:\x20'+'include\x20gp'+':<alias|ji'+_0x289f85(0xe9)+_0x289f85(0x1d9)+_0x289f85(0x1dd)+_0xd60e29+(_0x289f85(0x132)+_0x289f85(0x1fa)+_0x289f85(0x1e0)+_0x289f85(0x121)+_0x289f85(0xe8)+'setalive\x20('+_0x289f85(0x205)+'ssage>\x20gp:'+_0x289f85(0xbc))});return;}const _0x32b1bb=_0x381a04?await _0xab701d(_0x381a04):[];if(_0x573da0[_0x289f85(0xfc)](_0xd60e29)&&(!_0x32b1bb||_0x32b1bb[_0x289f85(0xca)]===0x87b+-0x2bd*-0x7+-0x1ba6)){await safeSend(_0x447fcc,{'text':_0x289f85(0xd9)+_0x289f85(0xfb)+_0x289f85(0x1dc)+_0x381a04+(_0x289f85(0xe2)+_0x289f85(0xf8)+_0x289f85(0xba)+'roup\x20JID.')});return;}if(_0xd60e29===_0x289f85(0x151)){for(const _0x807fe1 of _0x32b1bb){const _0x267721=await composeAliveMessage(_0x807fe1);await sendAliveToChat(_0x807fe1,_0x267721);}await safeSend(_0x447fcc,{'text':_0x289f85(0x123)+_0x289f85(0x1e7)+_0x32b1bb['length']+(_0x289f85(0x233)+'.')});return;}if(_0xd60e29===_0x289f85(0xa5)){const _0x43c449=_0x5f30e8[_0x289f85(0x150)](new RegExp('^'+_0xd60e29+'\x5cb','i'),'')[_0x289f85(0x11b)](),_0x15ca01=[];if(_0x43c449)_0x15ca01[_0x289f85(0x126)](_0x43c449);if(_0x2eff83)_0x15ca01['push'](_0x2eff83);const _0x30a1a3=_0x15ca01[_0x289f85(0x143)]('\x0a')[_0x289f85(0x150)](/\bgp[:\s]+\S+/ig,'')[_0x289f85(0x11b)]();if(!_0x30a1a3){await safeSend(_0x447fcc,{'text':_0x289f85(0x96)+_0x289f85(0x194)+_0x289f85(0x99)+_0x289f85(0xc8)+_0x289f85(0x202)+_0x289f85(0x1c0)+_0x289f85(0x1ce)+_0x289f85(0x198)+_0x289f85(0x1d4)});return;}let _0x38f821=0xc20+-0x464+0x12*-0x6e;for(const _0x43682f of _0x32b1bb){try{await db[_0x289f85(0xb2)](_0x289f85(0xcb)+'O\x20'+ALIVE_TABLE+(_0x289f85(0x142)+'d,\x20message'+',\x20updated_'+_0x289f85(0xd5)+_0x289f85(0x131)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x289f85(0x1a0)+'LICT(group'+'_jid)\x20DO\x20U'+'PDATE\x20SET\x20'+_0x289f85(0x1eb)+_0x289f85(0x159)+_0x289f85(0xab)+_0x289f85(0xc5)+_0x289f85(0x192)+'updated_at'),[_0x43682f,_0x30a1a3,Math[_0x289f85(0x15e)](Date[_0x289f85(0x141)]()/(0x874+-0xbf0+0x1d9*0x4))]),_0x38f821++;}catch(_0x488920){warn('['+name+(_0x289f85(0x17d)+_0x289f85(0x1f7)+_0x289f85(0x1fe))+_0x43682f+':\x20'+(_0x488920?.[_0x289f85(0x228)]||_0x488920));}}await safeSend(_0x447fcc,{'text':_0x289f85(0x1a6)+_0x289f85(0x1a3)+_0x289f85(0xef)+_0x38f821+('\x20target(s)'+'.')});return;}if(_0xd60e29===_0x289f85(0x130)){let _0xcd23f0=0xd*-0x236+-0xc3d+-0xd*-0x327;for(const _0x349d68 of _0x32b1bb){try{const _0x3d52ea=await db[_0x289f85(0xb2)](_0x289f85(0x208)+'M\x20'+ALIVE_TABLE+(_0x289f85(0xa3)+_0x289f85(0x223)),[_0x349d68]);_0xcd23f0++;}catch(_0x4cad65){warn('['+name+(_0x289f85(0xb9)+_0x289f85(0x1f7)+_0x289f85(0x1fe))+_0x349d68+':\x20'+(_0x4cad65?.[_0x289f85(0x228)]||_0x4cad65));}}await safeSend(_0x447fcc,{'text':'Deleted\x20al'+_0x289f85(0x99)+_0x289f85(0x1f2)+_0xcd23f0+(_0x289f85(0x233)+'.')});return;}if(_0xd60e29===_0x289f85(0x1d3)){const _0x3d8d01=_0x389bad||'';if(!_0x3d8d01){let _0x205211=[];for(const _0x56f470 of _0x32b1bb){const _0x3ceb21=await getDailySetting(_0x56f470);_0x205211[_0x289f85(0x126)](_0x56f470+':\x20'+(_0x3ceb21[_0x289f85(0xa4)]?'ON':_0x289f85(0x136))+_0x289f85(0x22f)+_0x3ceb21[_0x289f85(0xe5)]);}await safeSend(_0x447fcc,{'text':_0x289f85(0x1ba)+_0x289f85(0xa8)+_0x205211[_0x289f85(0x143)]('\x0a')});return;}if(_0x3d8d01==='on'){const _0x2b12e0=(_0x441e85[-0xe3*-0x11+-0x246e+-0x1*-0x155d]||_0x289f85(0x1f3))['trim']();if(!/^\d{1,2}:\d{2}$/[_0x289f85(0xa1)](_0x2b12e0)){await safeSend(_0x447fcc,{'text':'Time\x20must\x20'+_0x289f85(0xee)+'24-hour).\x20'+'Example:\x20a'+_0x289f85(0x23a)+_0x289f85(0x199)+_0x289f85(0x160)});return;}const _0x996030=_0x2b12e0[_0x289f85(0xdb)](':')[0x1*0x443+-0xfcf+0x2*0x5c6][_0x289f85(0x1d6)](0x1899+-0x2*0x9ee+-0x4bb,'0'),_0x5efc93=_0x2b12e0[_0x289f85(0xdb)](':')[-0x1*0x883+-0x21a1+0x2a25][_0x289f85(0x1d6)](0x1bce+-0x5a8*0x1+-0x1624,'0'),_0x1c5fb9=_0x996030+':'+_0x5efc93;for(const _0x1cb339 of _0x32b1bb)await setDailySetting(_0x1cb339,!![],_0x1c5fb9);await safeSend(_0x447fcc,{'text':_0x289f85(0x174)+_0x289f85(0x155)+_0x289f85(0x116)+_0x1c5fb9+_0x289f85(0x1fe)+_0x32b1bb['length']+('\x20target(s)'+'.')});return;}if(_0x3d8d01===_0x289f85(0xcd)){for(const _0x5c5bac of _0x32b1bb)await setDailySetting(_0x5c5bac,![],null);await safeSend(_0x447fcc,{'text':_0x289f85(0x174)+_0x289f85(0x13d)+'\x20for\x20'+_0x32b1bb[_0x289f85(0xca)]+('\x20target(s)'+'.')});return;}await safeSend(_0x447fcc,{'text':'Usage:\x20ali'+_0x289f85(0xcf)+_0x289f85(0x1e3)+_0x289f85(0x167)+_0x289f85(0x19d)+'daily\x20off\x20'+_0x289f85(0x11e)});return;}}catch(_0x41cebe){error(_0x41cebe,'['+name+(_0x289f85(0xb8)+_0x289f85(0x22c))+(_0x41cebe?.[_0x289f85(0x228)]||_0x41cebe));}}export async function cleanup(){const _0x8e66ca=_0x9b073a;try{stopDailyScheduler();for(const _0x2449a5 of processedMessageKeys[_0x8e66ca(0x232)]())try{clearTimeout(_0x2449a5);}catch(_0x42458b){}processedMessageKeys[_0x8e66ca(0x100)]();}catch(_0x1afba6){warn('['+name+(']\x20cleanup\x20'+_0x8e66ca(0x1e8))+(_0x1afba6?.[_0x8e66ca(0x228)]||_0x1afba6));}finally{botRef=null,sendApi=null,info('['+name+(']\x20cleaned\x20'+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};