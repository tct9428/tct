const _0x5b3743=_0x1ce7;(function(_0x1b988e,_0x4ad188){const _0x3fbb2=_0x1ce7,_0x71c65=_0x1b988e();while(!![]){try{const _0x33b664=-parseInt(_0x3fbb2(0x1c9))/(0xbe*-0x25+0xa*0x14f+0xe61)+-parseInt(_0x3fbb2(0x145))/(0x4c6*0x2+0x1*-0x387+0xab*-0x9)+-parseInt(_0x3fbb2(0x1a4))/(-0x2459+0x2468+0x3*-0x4)+-parseInt(_0x3fbb2(0x163))/(0x8f8+0x8be+-0x11b2)+parseInt(_0x3fbb2(0x128))/(-0x72a*-0x2+-0x469*0x1+-0x9e6)*(parseInt(_0x3fbb2(0x21e))/(-0x24b7*-0x1+-0x17e7+0x665*-0x2))+parseInt(_0x3fbb2(0x27f))/(-0x31e+-0x4ee+-0x1*-0x813)*(parseInt(_0x3fbb2(0x26c))/(0x1222+0x19*0x69+-0x1c5b))+-parseInt(_0x3fbb2(0x1e5))/(-0x991+-0x3b*-0x65+0xdad*-0x1)*(-parseInt(_0x3fbb2(0x245))/(0x1922+0xf77*0x2+-0x65*0x8e));if(_0x33b664===_0x4ad188)break;else _0x71c65['push'](_0x71c65['shift']());}catch(_0x1de4eb){_0x71c65['push'](_0x71c65['shift']());}}}(_0x5bc8,-0x8b6c0+-0x64e3*-0x1f+0x3791f));import _0x52317c from'fs';import _0x16cf2d from'path';import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x27d999 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x5b3743(0xee);export const version=_0x5b3743(0x20c);export const priority=0x2*-0x587+0x2*-0xfb1+-0x895*-0x5;export const configKeys=['TIMEZONE'];export const commands=['alive',_0x5b3743(0x189),_0x5b3743(0x265),_0x5b3743(0x154),_0x5b3743(0x1c5)];let botRef=null,sendApi=null,moduleStartTs=Date['now']();const DEDUPE_TTL_MS=(-0x1*0x1e63+-0x1*-0x18fb+0x586)*(0x215f*0x1+-0x8ef+-0x1488),processedMessageKeys=new Map();function markProcessed(_0x24532d){const _0x2978ee=_0x5b3743;if(!_0x24532d)return;if(processedMessageKeys[_0x2978ee(0x284)](_0x24532d))try{clearTimeout(processedMessageKeys[_0x2978ee(0x28e)](_0x24532d));}catch(_0x39386f){}const _0x5ccbae=setTimeout(()=>processedMessageKeys[_0x2978ee(0x1f6)](_0x24532d),DEDUPE_TTL_MS);processedMessageKeys[_0x2978ee(0x22a)](_0x24532d,_0x5ccbae);}function isProcessed(_0x410556){const _0x3df2bc=_0x5b3743;return _0x410556&&processedMessageKeys[_0x3df2bc(0x284)](_0x410556);}let DEFAULT_TIMEZONE=_0x5b3743(0x217)+_0x5b3743(0x260),cardImages=[],baseUrl=_0x5b3743(0x235)+_0x5b3743(0x123)+_0x5b3743(0x20b);for(let i=0x1219*0x2+0x1899+-0x3ccb;i<=0x17dc+-0xb*-0x2f9+-0x1c42*0x2;i++){let suffix=i===-0x527+0x6*-0x34f+0x1901?'':i;cardImages[_0x5b3743(0x211)](''+baseUrl+suffix+_0x5b3743(0x1e0));}function refreshConfig(){const _0x31c5a0=_0x5b3743;try{const _0x26e081=getConfig&&getConfig()?getConfig():{};DEFAULT_TIMEZONE=_0x26e081['TIMEZONE']||_0x26e081['TIMEZONE_N'+_0x31c5a0(0x222)]||DEFAULT_TIMEZONE,info('['+name+(']\x20config\x20r'+_0x31c5a0(0x19b)+_0x31c5a0(0x287))+DEFAULT_TIMEZONE);}catch(_0x88ca2){warn('['+name+(_0x31c5a0(0x1aa)+_0x31c5a0(0x233)+_0x31c5a0(0x200))+(_0x88ca2?.[_0x31c5a0(0x269)]||_0x88ca2));}}try{typeof hotReloadConfig===_0x5b3743(0x266)&&hotReloadConfig(()=>refreshConfig());}catch(_0x2a4c02){warn('['+name+(_0x5b3743(0x11c)+_0x5b3743(0x1e3)+_0x5b3743(0x180)+_0x5b3743(0x1b4))+(_0x2a4c02?.['message']||_0x2a4c02));}refreshConfig();const GLOBAL_QUOTES_TABLE='alive_glob'+_0x5b3743(0x14a),ALIVE_TABLE='alive',ALIVE_QUOTES_TABLE=_0x5b3743(0x15b)+'es',DAILY_TABLE='alive_dail'+_0x5b3743(0x186);async function ensureSchema(){const _0x533c75=_0x5b3743;try{await db[_0x533c75(0x122)](_0x533c75(0x219)+_0x533c75(0x1a6)+_0x533c75(0x299)+_0x533c75(0x125)+ALIVE_TABLE+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x533c75(0x15d)+'\x20TEXT\x20PRIM'+_0x533c75(0x1ee)+_0x533c75(0x271)+_0x533c75(0x107)+_0x533c75(0x12d)+_0x533c75(0x264)+_0x533c75(0x18a)+'NTEGER\x20DEF'+_0x533c75(0x1b8)+'\x20\x20\x20\x20\x20\x20quot'+_0x533c75(0x243)+_0x533c75(0x221)+'EFAULT\x200\x0a\x20'+_0x533c75(0x267)+'\x20\x20')),await db[_0x533c75(0x122)](_0x533c75(0x219)+_0x533c75(0x1a6)+_0x533c75(0x299)+_0x533c75(0x125)+ALIVE_QUOTES_TABLE+(_0x533c75(0x121)+'\x20id\x20INTEGE'+'R\x20PRIMARY\x20'+_0x533c75(0x116)+_0x533c75(0x292)+_0x533c75(0x1c8)+'up_jid\x20TEX'+_0x533c75(0x1cd)+_0x533c75(0x237)+_0x533c75(0x136)+_0x533c75(0x194)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+_0x533c75(0x1ea)+_0x533c75(0x1fc)+_0x533c75(0x1ca)+_0x533c75(0x249)+_0x533c75(0x294)+_0x533c75(0xfe)+_0x533c75(0x223)+_0x533c75(0x12f)+_0x533c75(0x239)+'R\x20DEFAULT\x20'+_0x533c75(0xf6)+'\x0a\x20\x20\x20\x20')),await db['exec'](_0x533c75(0x219)+_0x533c75(0x1a6)+_0x533c75(0x299)+_0x533c75(0x125)+GLOBAL_QUOTES_TABLE+(_0x533c75(0x121)+_0x533c75(0x253)+'R\x20PRIMARY\x20'+_0x533c75(0x116)+'CREMENT,\x0a\x20'+_0x533c75(0x21a)+_0x533c75(0x281)+'T\x20NULL\x20UNI'+_0x533c75(0x168)+_0x533c75(0x19c)+_0x533c75(0x23a)+_0x533c75(0x26e)+_0x533c75(0x156))),await db[_0x533c75(0x122)](_0x533c75(0x219)+_0x533c75(0x1a6)+_0x533c75(0x299)+_0x533c75(0x125)+DAILY_TABLE+(_0x533c75(0x121)+_0x533c75(0x15d)+'\x20TEXT\x20PRIM'+_0x533c75(0x1ee)+_0x533c75(0x272)+_0x533c75(0x1f7)+'ER\x20DEFAULT'+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x533c75(0x218)+_0x533c75(0x137)+_0x533c75(0x170)+_0x533c75(0x232)+_0x533c75(0x242)+_0x533c75(0x1d5)+_0x533c75(0x1e6)+_0x533c75(0x276))),info('['+name+(']\x20DB\x20schem'+_0x533c75(0xf3)));}catch(_0x5b83fd){error(_0x5b83fd,'['+name+(']\x20ensureSc'+_0x533c75(0x111)+'d'));throw _0x5b83fd;}}function _0x5bc8(){const _0x2f82b5=['le:\x0a','has','ns\x20found\x20t','e.\x20Use\x20mul','timezone=','esolving\x20d','Sent\x20alive','Could\x20not\x20','up_jid,\x20en','e,\x20last_se','toFormat','get','08:00','utf8',']\x20isadmin\x20','CREMENT,\x0a\x20','\x0a\x20<your\x20mu','ed_at\x20INTE','alias','ed.quote_r',']\x20no\x20send\x20','normalizeT','IF\x20NOT\x20EXI','Usage:\x0a\x20se','TE\x20SET\x20quo','alive','.enabled,\x20','xtMessage','\x20to\x20send\x20t','up_jid)\x20DO','a\x20ensured','slice','onnection(','0\x0a\x20\x20\x20\x20\x20\x20);','talive\x20(en',']\x20daily\x20al','MIT\x201','x\x20FROM\x20','mentions','_jid\x20=\x20?','edMatchFro','GER\x20DEFAUL','id\x20LIMIT\x201','\x20for\x20','OFF','roup.','LICT(group','ssage\x20=\x20ex','rted_at\x20FR','daily\x20off\x20','sage\x20TEXT\x20',']\x20updateDa','\x20(duplicat','\x20error:\x20','gp:alias','Saved\x20aliv','up_jid\x20=\x20?','SELECT\x20id,','include\x20gp','includes','hema\x20faile','resolve\x20gp','singleSele','ck\x20error:\x20','roup\x20JID.','KEY\x20AUTOIN','e(s)\x20for\x20','No\x20default','setZone','e\x20message\x20','d,\x20enabled',']\x20hotReloa',']\x20initiali','INSERT\x20OR\x20','\x20\x20\x20ON\x20CONF','jid','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','exec','tct.com/me','ed:\x20','STS\x20','te_rr_inde','used\x20!=\x200','250QOnqaA','e\x20error:\x20','ialize\x20req','string','at)\x20VALUES','NOT\x20NULL,\x0a','T(group_ji','\x20\x20\x20updated','d)\x20DO\x20UPDA','abled,\x20tim','IntoDB\x20err','\x20WHERE\x20ena','off','VALUES\x20(?,','quote\x20TEXT','T\x20DEFAULT\x20','\x20ORDER\x20BY\x20','arse\x20faile','index','text','alive.init',']\x20onMessag','now','\x20day','available','\x20connectio','day','ctReply','add','1168284UVECbV','Quotes\x20for','up.','lti-line:\x20','\x20target(s)','al_quotes','imageMessa','error:\x20','uptime\x20WHE','\x20for\x20this\x20','ile\x20not\x20fo','started_at','enter)\x20<me','r\x20this\x20gro','length','listquote','(fromMe)','\x20\x20);\x0a\x20\x20\x20\x20','SELECT\x20ena','\x20gp:mygrou','ttonId','NFLICT(gro','alive_quot','padStart','\x20group_jid','OM\x20module_','\x20to\x20','dated_at','\x20WHERE\x20use','on\x2007:30','191804FLwknU','Deleted\x20al','PM\x20usage:\x20','seMessage','ive\x20failed','QUE,\x0a\x20\x20\x20\x20\x20','gned)',']\x20failed\x20r','d:\x20','age>\x20gp:al','DELETE\x20FRO','\x20at\x20','promises','\x2708:00\x27,\x0a\x20','SELECT\x20gro','JID\x20not\x20av','lti-line\x20a','=\x200\x20WHERE\x20','conversati','\x20quote\x20FRO','ata','ias','24-hour).\x20','an\x20send\x20mu','filter','at,\x20quote_','vedaily\x20on','e\x20DISABLED','alias|gp:a','gistration','═════⊷','ll\x20|\x20alive','Uptime:\x20',']\x20quotes\x20l','remoteJid','y_settings','d,\x20message','d\x20=\x200\x20ORDE','setalive','dated_at\x20I','at\x20','ids',']\x20getDaily','RE\x20module\x20',']\x20setDaily','Alive','No\x20quotes\x20','R\x20BY\x20id\x20LI',',\x20time,\x20la','\x20NOT\x20NULL,',']\x20daily\x20sc','random','catch','cluded.mes',']\x20loaded\x20','videoMessa','efreshed;\x20','\x20\x20\x20used\x20IN','participan','roup\x20at\x20','test','time',']\x20pickNext','efaultGrou','sendMessag','1839039ooiAKa','cwd','ATE\x20TABLE\x20','surface\x20av',']\x20findStor','UPDATE\x20',']\x20refreshC',',\x20last_sen',']\x20_dailyTi','all','ess\x20enter)','oad\x20error:','\x20WHERE\x20gro','\x20pm\x20failed','d\x20for\x20','object','\x20failed:\x20','SELECT\x20sta','PDATE\x20SET\x20','O\x20module_u','AULT\x200,\x0a\x20\x20','toLowerCas','ilyLastSen','or:\x20','om\x20file\x20in','Please\x20sup','p:alias','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.quotes.js','fromSecond','max','CT(group_j','ror:\x20','alivedaily','rr_index)\x0a','xcluded.up','\x20\x20\x20\x20\x20\x20\x20gro','56623YUzjgI','LT\x20\x27\x27,\x0a\x20\x20\x20','join','QuoteForGr','T\x20NOT\x20NULL','message\x20=\x20','ive\x20sent\x20t','e):\x0a','floor','id)\x20DO\x20UPD','=\x201\x20WHERE\x20','@g.us','EGER\x20DEFAU','ine.\x20Examp','selectedBu','\x20HH:mm\x20|\x20a',']\x20daily\x20ti','match','✅\x20Bot\x20is\x20A','Setting\x20er','readFile','updated_at','not-availa','.jpg','sage,\x20upda','essage,\x20up','dConfig\x20re','Daily\x20aliv','207tHBKwq','LT\x200\x0a\x20\x20\x20\x20\x20','ssage>\x20gp:','Example:\x20a','sent\x20=\x20?\x20W','reated_by\x20','nt\x20FROM\x20',',\x20updated_',']\x20sendAliv','ARY\x20KEY,\x0a\x20','oUserJid','ted_at\x20=\x20e','isInteger',']\x20resolveD','ings:\x0a','caption',']\x20dailyTic','delete','bled\x20INTEG','INSERT\x20INT','ge>','finalize',']\x20setalive','TEXT\x20DEFAU','x\x20=\x20exclud','ptime\x20(mod','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','r:\x20','Global\x20quo','run','\x20(?,\x20?,\x20?)','sage\x20FROM\x20','time\x20=\x20exc','ive\x20all\x22.','live\x20messa','clear','quote_rr_i',']\x20quotes\x20f','dia/alive','3.0.0','listRespon',']\x20send\x20API','ALUES\x20(?,\x20','arted\x20(ali','push','?,\x20?,\x200)\x0a\x20','ailable\x20fo','efault\x20','\x20(group_ji','\x20default\x20c','Africa/Nai','\x20\x20time\x20TEX','\x0a\x20\x20\x20\x20\x20\x20CRE','\x20\x20\x20\x20\x20\x20\x20quo','_jid)\x20DO\x20U','\x20UPDATE\x20SE','split','95766qSUxBx','key','\x20(quote,\x20u','\x20INTEGER\x20D','AME','T\x200,\x0a\x20\x20\x20\x20\x20','sock','check\x20fail',']\x20alive\x20al','\x20quotes\x20fr','Daily\x20sett','map','set','ply\x20the\x20al','k\x20per-row\x20','trim','\x20minute','=\x20?',']\x20loadQuot','endsWith','\x20\x20\x20\x20\x20\x20\x20las','onfig\x20erro','=\x20excluded','https://i-','all\x20or\x20a\x20g',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20',']\x20cleaned\x20','_at\x20INTEGE','TEGER\x20DEFA',']\x20composeA','Group','enabled','uires\x20bot\x20',']\x20cleanup\x20','ndex','ive\x20messag','t_sent\x20INT','e_rr_index','e\x20ENABLED\x20','238620RIrrts',']\x20delalive','Usage:\x20ali','s).','\x20\x20\x20\x20\x20creat','\x20?,\x20?,\x20?)\x0a','isArray','esFromFile','mFindings\x20','for\x20this\x20g','quote','ATE\x20SET\x20me','livedaily\x20','SELECT\x20mes','\x20id\x20INTEGE','GlobalQuot','buttonsRes','\x20—\x20skippin','values','wId','\x20THE\x20DAY\x0a','extendedTe','from','replace','🌍\x20QUOTE\x20OF','e:\x20','available.','robi','ved\x20alive\x20','prepare','sed)\x20VALUE','\x20\x20\x20\x20\x20\x20\x20\x20up','delalive','function','\x20\x20\x20\x20\x20);\x0a\x20\x20','message\x20fo','message','l\x20->\x20faile','⊷═════════','3296264NXMNCt','dated_at\x20=','ULT\x200\x0a\x20\x20\x20\x20','pop','fromMe','\x20\x20\x20\x20\x20\x20\x20mes','\x20\x20\x20\x20\x20\x20\x20ena','ailable','\x20excluded.','id\x20=\x20?','\x20);\x0a\x20\x20\x20\x20','heduler\x20st','\x20SET\x20used\x20','luded.time','opped','oup\x20error:','groupMetad','Deleted\x20sa',']\x20PM:\x20bot\x20','7MlfNpk','und\x20at\x20','te\x20TEXT\x20NO','daily\x20tick'];_0x5bc8=function(){return _0x2f82b5;};return _0x5bc8();}function resolveQuotesFilePath(){const _0x809047=_0x5b3743;return _0x16cf2d[_0x809047(0x1cb)](process[_0x809047(0x1a5)](),'data',_0x809047(0x24f),_0x809047(0x1c0)+'on');}async function loadQuotesFromFileIntoDB(){const _0x388488=_0x5b3743;try{const _0x127af2=resolveQuotesFilePath();if(!_0x52317c['existsSync'](_0x127af2)){info('['+name+(_0x388488(0x20a)+_0x388488(0x14f)+_0x388488(0x280))+_0x127af2+(_0x388488(0x256)+'g\x20file\x20loa'+'d'));return;}const _0x57e84e=await _0x52317c[_0x388488(0x16f)][_0x388488(0x1dd)](_0x127af2,_0x388488(0x290));let _0x7230cc=[];try{_0x7230cc=JSON['parse'](_0x57e84e);}catch(_0x1df2b7){warn('['+name+(_0x388488(0x20a)+'ile\x20JSON\x20p'+_0x388488(0x139)+_0x388488(0x16b))+(_0x1df2b7?.[_0x388488(0x269)]||_0x1df2b7));return;}if(!Array['isArray'](_0x7230cc))return;const _0x518feb=_0x7230cc[_0x388488(0x229)](_0x38f857=>{const _0x19ebaa=_0x388488;if(!_0x38f857)return null;if(typeof _0x38f857==='string')return _0x38f857[_0x19ebaa(0x22d)]();if(typeof _0x38f857===_0x19ebaa(0x1b3)){if(_0x38f857['quote'])return String(_0x38f857[_0x19ebaa(0x24f)])[_0x19ebaa(0x22d)]();if(_0x38f857['text'])return String(_0x38f857[_0x19ebaa(0x13b)])[_0x19ebaa(0x22d)]();}return null;})['filter'](Boolean);if(!_0x518feb[_0x388488(0x153)])return;const _0xa8dd85=await db[_0x388488(0x262)](_0x388488(0x11e)+'IGNORE\x20INT'+'O\x20'+GLOBAL_QUOTES_TABLE+(_0x388488(0x220)+_0x388488(0x263)+'S\x20(?,\x200)'));try{for(const _0x1b583d of _0x518feb){try{await _0xa8dd85[_0x388488(0x202)](_0x1b583d);}catch(_0x2a2664){}}}finally{try{await _0xa8dd85[_0x388488(0x1fa)]();}catch(_0x4a9028){}}info('['+name+_0x388488(0x199)+_0x518feb[_0x388488(0x153)]+(_0x388488(0x227)+_0x388488(0x1bc)+'to\x20')+GLOBAL_QUOTES_TABLE+(_0x388488(0x109)+'es\x20ignored'+')'));}catch(_0x3a3189){warn('['+name+(_0x388488(0x230)+_0x388488(0x24c)+_0x388488(0x132)+_0x388488(0x1bb))+(_0x3a3189?.[_0x388488(0x269)]||_0x3a3189));}}async function pickNextGlobalQuote(){const _0x1448b1=_0x5b3743;try{const _0x442caf=await db['get']('SELECT\x20id,'+'\x20quote\x20FRO'+'M\x20'+GLOBAL_QUOTES_TABLE+(_0x1448b1(0x161)+_0x1448b1(0x188)+_0x1448b1(0x192)+_0x1448b1(0xf9)));if(_0x442caf&&_0x442caf[_0x1448b1(0x24f)])return await db['run']('UPDATE\x20'+GLOBAL_QUOTES_TABLE+(_0x1448b1(0x278)+_0x1448b1(0x1d3)+'id\x20=\x20?'),[_0x442caf['id']]),_0x442caf[_0x1448b1(0x24f)];await db['run']('UPDATE\x20'+GLOBAL_QUOTES_TABLE+(_0x1448b1(0x278)+_0x1448b1(0x174)+_0x1448b1(0x127)));const _0x3aed48=await db[_0x1448b1(0x28e)](_0x1448b1(0x10e)+_0x1448b1(0x176)+'M\x20'+GLOBAL_QUOTES_TABLE+(_0x1448b1(0x138)+'id\x20LIMIT\x201'));if(_0x3aed48&&_0x3aed48[_0x1448b1(0x24f)])return await db[_0x1448b1(0x202)]('UPDATE\x20'+GLOBAL_QUOTES_TABLE+(_0x1448b1(0x278)+_0x1448b1(0x1d3)+_0x1448b1(0x275)),[_0x3aed48['id']]),_0x3aed48[_0x1448b1(0x24f)];return null;}catch(_0x39cc1d){return warn('['+name+(_0x1448b1(0x1a1)+_0x1448b1(0x254)+_0x1448b1(0x129))+(_0x39cc1d?.[_0x1448b1(0x269)]||_0x39cc1d)),null;}}async function pickNextQuoteForGroup(_0x53129e){const _0x142896=_0x5b3743;try{const _0x33f748=await db[_0x142896(0x1ad)]('SELECT\x20id,'+'\x20quote\x20FRO'+'M\x20'+ALIVE_QUOTES_TABLE+(_0x142896(0x1b0)+_0x142896(0x10d)+_0x142896(0x138)+'id'),[_0x53129e]);if(_0x33f748&&_0x33f748[_0x142896(0x153)]){const _0x2d83b9=await db[_0x142896(0x28e)]('SELECT\x20quo'+_0x142896(0x126)+_0x142896(0xfa)+ALIVE_TABLE+('\x20WHERE\x20gro'+'up_jid\x20=\x20?'),[_0x53129e]);let _0x2ed1a4=-0xf0+-0x133e+0x6*0x35d;if(_0x2d83b9&&Number[_0x142896(0x1f1)](_0x2d83b9['quote_rr_i'+'ndex']))_0x2ed1a4=Number(_0x2d83b9[_0x142896(0x209)+_0x142896(0x240)]||0x68c*0x2+-0x8ad+-0x46b);_0x2ed1a4=_0x2ed1a4%_0x33f748['length'];const _0x3ffe9c=_0x33f748[_0x2ed1a4]['quote'],_0x564be5=(_0x2ed1a4+(-0x1659+-0x1*-0x314+0x2*0x9a3))%_0x33f748[_0x142896(0x153)];try{await db[_0x142896(0x202)](_0x142896(0x1f8)+'O\x20'+ALIVE_TABLE+('\x20(group_ji'+_0x142896(0x187)+_0x142896(0x1ec)+_0x142896(0x17c)+_0x142896(0x1c6)+_0x142896(0x1bf)+_0x142896(0x135)+_0x142896(0x24a)+_0x142896(0x1bf)+'ON\x20CONFLIC'+_0x142896(0x12e)+_0x142896(0x130)+_0x142896(0x29b)+_0x142896(0x126)+_0x142896(0x1fd)+_0x142896(0x296)+'r_index'),[_0x53129e,'',Math['floor'](Date[_0x142896(0x13e)]()/(-0x5*-0x67f+0x2683*0x1+-0x218b*0x2)),_0x564be5]);}catch(_0x447903){}return _0x3ffe9c;}return await pickNextGlobalQuote();}catch(_0x5cf281){return warn('['+name+(']\x20pickNext'+_0x142896(0x1cc)+_0x142896(0x27b)+'\x20')+(_0x5cf281?.[_0x142896(0x269)]||_0x5cf281)),null;}}async function setDailySetting(_0x332e20,_0x537fb4,_0x4626ca=null){const _0x2b0763=_0x5b3743;try{const _0x2a28f3=typeof _0x4626ca===_0x2b0763(0x12b)&&/^\d{2}:\d{2}$/[_0x2b0763(0x19f)](_0x4626ca)?_0x4626ca:_0x4626ca?_0x4626ca:'08:00',_0x518338=_0x537fb4?-0x4ca*0x6+-0x4*-0x57e+0x6c5:0x13e3*0x1+0x4f*-0xa+0x187*-0xb;return await db['run'](_0x2b0763(0x1f8)+'O\x20'+DAILY_TABLE+(_0x2b0763(0x215)+_0x2b0763(0x11b)+_0x2b0763(0x193)+'st_sent)\x20V'+_0x2b0763(0x20f)+_0x2b0763(0x212)+'\x20\x20\x20\x20\x20ON\x20CO'+_0x2b0763(0x15a)+_0x2b0763(0xf2)+_0x2b0763(0x21c)+'T\x20enabled\x20'+_0x2b0763(0x234)+_0x2b0763(0xef)+_0x2b0763(0x205)+_0x2b0763(0x279)),[_0x332e20,_0x518338,_0x2a28f3]),!![];}catch(_0x2954e0){return warn('['+name+(_0x2b0763(0x18f)+_0x2b0763(0x1dc)+'ror:\x20')+(_0x2954e0?.[_0x2b0763(0x269)]||_0x2954e0)),![];}}async function getDailySetting(_0x149e98){const _0x234b7e=_0x5b3743;try{const _0x3d0078=await db[_0x234b7e(0x28e)](_0x234b7e(0x157)+'bled,\x20time'+_0x234b7e(0x1ab)+'t\x20FROM\x20'+DAILY_TABLE+(_0x234b7e(0x1b0)+_0x234b7e(0x10d)),[_0x149e98]);return _0x3d0078||{'enabled':0x0,'time':_0x234b7e(0x28f),'last_sent':0x0};}catch(_0x473c28){return warn('['+name+(_0x234b7e(0x18d)+_0x234b7e(0x1dc)+_0x234b7e(0x1c4))+(_0x473c28?.['message']||_0x473c28)),{'enabled':0x0,'time':_0x234b7e(0x28f),'last_sent':0x0};}}async function updateDailyLastSent(_0x41c10e,_0x10a2a6){const _0x4cddf8=_0x5b3743;try{await db['run'](_0x4cddf8(0x1a9)+DAILY_TABLE+('\x20SET\x20last_'+_0x4cddf8(0x1e9)+'HERE\x20group'+_0x4cddf8(0xfc)),[_0x10a2a6||Math[_0x4cddf8(0x1d1)](Date[_0x4cddf8(0x13e)]()/(0x1cf9+0x19db*0x1+0x1976*-0x2)),_0x41c10e]);}catch(_0x5bf6a0){warn('['+name+(_0x4cddf8(0x108)+_0x4cddf8(0x1ba)+'t\x20error:\x20')+(_0x5bf6a0?.['message']||_0x5bf6a0));}}function tryBuildSendApiFromBot(_0x1cf67f){const _0x408534=_0x5b3743;if(!_0x1cf67f)return null;if(typeof _0x1cf67f[_0x408534(0x1a3)+'e']===_0x408534(0x266))return async(_0x4e1ca3,_0x200b12)=>_0x1cf67f['sendMessag'+'e'](_0x4e1ca3,_0x200b12);if(_0x1cf67f[_0x408534(0x224)]&&typeof _0x1cf67f[_0x408534(0x224)][_0x408534(0x1a3)+'e']===_0x408534(0x266))return async(_0xc4c6e1,_0x1aa4a0)=>_0x1cf67f['sock'][_0x408534(0x1a3)+'e'](_0xc4c6e1,_0x1aa4a0);return null;}function setupSendApi(_0x47c1ec){const _0x22ba8d=_0x5b3743;botRef=_0x47c1ec,sendApi=tryBuildSendApiFromBot(botRef),info('['+name+(_0x22ba8d(0x20e)+'\x20')+(sendApi?_0x22ba8d(0x140):_0x22ba8d(0x1df)+'ble'));}async function safeSend(_0x5b5285,_0x5551d6,_0xa211f1=[]){const _0x467c9d=_0x5b3743;try{if(!_0x5b5285||!_0x5551d6)return![];if(Array[_0x467c9d(0x24b)](_0xa211f1)&&_0xa211f1[_0x467c9d(0x153)])_0x5551d6[_0x467c9d(0xfb)]=_0xa211f1;if(sendApi)return await sendApi(_0x5b5285,_0x5551d6),!![];if(botRef&&typeof botRef['sendMessag'+'e']===_0x467c9d(0x266))return await botRef[_0x467c9d(0x1a3)+'e'](_0x5b5285,_0x5551d6),!![];if(botRef&&botRef[_0x467c9d(0x224)]&&typeof botRef[_0x467c9d(0x224)]['sendMessag'+'e']===_0x467c9d(0x266))return await botRef[_0x467c9d(0x224)][_0x467c9d(0x1a3)+'e'](_0x5b5285,_0x5551d6),!![];return warn('['+name+(_0x467c9d(0x297)+_0x467c9d(0x1a7)+_0x467c9d(0x273))),![];}catch(_0x1ee282){return warn('['+name+(']\x20safeSend'+_0x467c9d(0x1b4))+(_0x1ee282?.['message']||_0x1ee282)),![];}}async function composeAliveMessage(_0x3c93df){const _0x1cec6e=_0x5b3743;try{const _0x290d72=await pickNextQuoteForGroup(_0x3c93df),_0x2acc18=_0x1cec6e(0x26b)+_0x1cec6e(0x181),_0x2497aa=[];_0x290d72&&(_0x2497aa['push'](_0x2acc18),_0x2497aa[_0x1cec6e(0x211)](_0x1cec6e(0x25d)+_0x1cec6e(0x259)),_0x2497aa[_0x1cec6e(0x211)](String(_0x290d72)[_0x1cec6e(0x22d)]()),_0x2497aa[_0x1cec6e(0x211)](_0x2acc18));const _0x52d19b=await db[_0x1cec6e(0x28e)](_0x1cec6e(0x1b5)+_0x1cec6e(0x105)+_0x1cec6e(0x15e)+_0x1cec6e(0x14d)+_0x1cec6e(0x18e)+'=\x20?',[name])[_0x1cec6e(0x197)](()=>null),_0x46b24c=_0x52d19b&&Number(_0x52d19b[_0x1cec6e(0x150)])?Number(_0x52d19b['started_at']):Math[_0x1cec6e(0x1d1)](moduleStartTs/(0xa7*0x2f+-0x15a8+-0x519)),_0x218647=Math[_0x1cec6e(0x1c2)](0xf18+-0xe3f+-0xd9,Math[_0x1cec6e(0x1d1)](Date[_0x1cec6e(0x13e)]()/(-0xf10+0x2258+0x520*-0x3))-_0x46b24c),_0x52ec6d=formatUptimeFromSeconds(_0x218647);_0x2497aa['push'](_0x1cec6e(0x183)+_0x52ec6d),_0x2497aa['push'](_0x2acc18),_0x2497aa[_0x1cec6e(0x211)]('');const _0x519a96=await db[_0x1cec6e(0x28e)](_0x1cec6e(0x252)+_0x1cec6e(0x204)+ALIVE_TABLE+(_0x1cec6e(0x1b0)+_0x1cec6e(0x10d)),[_0x3c93df]);if(_0x519a96&&_0x519a96['message'])_0x2497aa[_0x1cec6e(0x211)](String(_0x519a96['message'])[_0x1cec6e(0x22d)]());return _0x2497aa['join']('\x0a');}catch(_0x303ecc){return warn('['+name+(_0x1cec6e(0x23b)+'liveMessag'+_0x1cec6e(0x129))+(_0x303ecc?.[_0x1cec6e(0x269)]||_0x303ecc)),_0x1cec6e(0x190);}}function formatUptimeFromSeconds(_0x4e248f){const _0x40850b=_0x5b3743,_0x1f0eb0=Math[_0x40850b(0x1d1)](_0x4e248f/((0x118d+-0x608*-0x4+-0x2995)*(0x26e4+0x20b5+-0x3989))),_0x3d0235=Math[_0x40850b(0x1d1)](_0x4e248f%((0x2241+0xb*-0x174+-0x122d)*(0x2*0xc92+-0x19c3+0xeaf))/(-0x917+-0x2345*0x1+0x1*0x3a6c)),_0x4e2ba3=Math[_0x40850b(0x1d1)](_0x4e248f%(-0x1c9b*0x1+-0x1a97*0x1+0x7b2*0x9)/(0x665+0x25d2+-0x51*0x8b)),_0x42c73c=[];if(_0x1f0eb0)_0x42c73c[_0x40850b(0x211)](_0x1f0eb0+_0x40850b(0x13f)+(_0x1f0eb0===0xe4e*-0x2+0x162+-0x1*-0x1b3b?'':'s'));if(_0x3d0235)_0x42c73c[_0x40850b(0x211)](_0x3d0235+'\x20hour'+(_0x3d0235===-0x83*0x31+-0x1*0x1528+0x2e3c?'':'s'));if(_0x4e2ba3||_0x42c73c[_0x40850b(0x153)]===0xe1+-0x2417+0x2336)_0x42c73c[_0x40850b(0x211)](_0x4e2ba3+_0x40850b(0x22e)+(_0x4e2ba3===-0xc8*0xa+0x1a1f*0x1+-0x8e*0x21?'':'s'));return _0x42c73c['join']('\x20');}function buildExternalAdReply(_0x4c91c5,_0x111267=''){const _0x3457d5=_0x5b3743,_0x145449=cardImages[Math['floor'](Math[_0x3457d5(0x196)]()*cardImages['length'])],_0x187902=_0x3457d5(0x1db)+'live',_0x28b25b=(''+(_0x4c91c5||''))[_0x3457d5(0x22d)]()||_0x3457d5(0x23c),_0x1194d9={'title':_0x187902,'body':_0x28b25b,'thumbnailUrl':_0x145449,'mediaType':0x1,'renderLargerThumbnail':!![]};return _0x1194d9;}async function sendAliveToChat(_0x4da620,_0x423ae7){const _0x4bf475=_0x5b3743;try{if(!_0x4da620)return![];let _0x461a7f='';try{if(String(_0x4da620)[_0x4bf475(0x231)](_0x4bf475(0x1d4))){const _0x365801=await(botRef?.[_0x4bf475(0x224)]||botRef)[_0x4bf475(0x27c)+_0x4bf475(0x177)](_0x4da620)[_0x4bf475(0x197)](()=>null);_0x461a7f=_0x365801?.['subject']||'';}}catch(_0x198a5b){_0x461a7f='';}const _0x45caab=buildExternalAdReply(_0x461a7f),_0xf1eb8f={'text':_0x423ae7,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'externalAdReply':_0x45caab}};return await safeSend(_0x4da620,_0xf1eb8f);}catch(_0x3b3ca8){return warn('['+name+(_0x4bf475(0x1ed)+'eToChat\x20er'+_0x4bf475(0x1c4))+(_0x3b3ca8?.[_0x4bf475(0x269)]||_0x3b3ca8)),![];}}function splitRestForGp(_0x289427){const _0x4dcb5c=_0x5b3743;if(!_0x289427)return{'left':'','gp':null};const _0x30b6d2=_0x289427[_0x4dcb5c(0x1da)](/\bgp[:\s]+(\S+)/i);if(_0x30b6d2){const _0x31b326=_0x289427[_0x4dcb5c(0xf4)](-0x1d7+-0x859+0xa30,_0x30b6d2[_0x4dcb5c(0x13a)])[_0x4dcb5c(0x22d)](),_0x1fb745=_0x30b6d2[-0x14d4+-0x139b+0x1438*0x2][_0x4dcb5c(0x22d)]();return{'left':_0x31b326,'gp':_0x1fb745};}const _0x1d2172=_0x289427[_0x4dcb5c(0x21d)](/\s+/)[_0x4dcb5c(0x17b)](Boolean);if(_0x1d2172[_0x4dcb5c(0x153)]>-0x1eeb+0x2bb*-0xb+0x3cf5){const _0x21c348=_0x1d2172[_0x1d2172[_0x4dcb5c(0x153)]-(-0x1*0x16a1+0x1e+0x1684)];if(_0x21c348['toLowerCas'+'e']()===_0x4dcb5c(0x1ad)||_0x21c348[_0x4dcb5c(0x110)]('@'))return _0x1d2172[_0x4dcb5c(0x26f)](),{'left':_0x1d2172[_0x4dcb5c(0x1cb)]('\x20')['trim'](),'gp':_0x21c348};}return{'left':_0x289427[_0x4dcb5c(0x22d)](),'gp':null};}async function resolveDefaultGroupJids(_0x265768){const _0xf9250c=_0x5b3743;try{if(!_0x265768)return[];const _0x9f7df3=String(_0x265768)[_0xf9250c(0x21d)]('@')[0xfb*-0x1d+0x1fdd+-0x36e],_0x5ec47f=await getDefault(_0x9f7df3)[_0xf9250c(0x197)](()=>null);if(!_0x5ec47f)return[];const _0x364821=Array[_0xf9250c(0x24b)](_0x5ec47f)?_0x5ec47f:[_0x5ec47f],_0x39ec1f=new Set();for(const _0x3b328a of _0x364821){if(!_0x3b328a)continue;try{const _0x4ac1d3=await getConnection(_0x3b328a)[_0xf9250c(0x197)](()=>null);if(Array[_0xf9250c(0x24b)](_0x4ac1d3)){for(const _0x5782e8 of _0x4ac1d3)if(_0x5782e8)_0x39ec1f[_0xf9250c(0x144)](String(_0x5782e8));else{if(_0x4ac1d3)_0x39ec1f[_0xf9250c(0x144)](String(_0x4ac1d3));}}}catch(_0x5e98ed){warn('['+name+(_0xf9250c(0x16a)+_0xf9250c(0x288)+_0xf9250c(0x214))+_0x3b328a+':\x20'+(_0x5e98ed?.[_0xf9250c(0x269)]||_0x5e98ed));}}return Array[_0xf9250c(0x25b)](_0x39ec1f);}catch(_0x32d5da){return warn('['+name+(_0xf9250c(0x1f2)+_0xf9250c(0x1a2)+'pJids\x20fail'+_0xf9250c(0x124))+(_0x32d5da?.[_0xf9250c(0x269)]||_0x32d5da)),[];}}async function findStoredMatchFromFindings(_0x33dd29=[]){const _0x559e15=_0x5b3743;try{const _0x1a8dd2=await listSudo();if(!Array[_0x559e15(0x24b)](_0x1a8dd2)||_0x1a8dd2[_0x559e15(0x153)]===0x1a8f+-0xacc+-0x327*0x5)return null;const _0x5f285d=new Set(_0x1a8dd2[_0x559e15(0x229)](String));for(const _0x382eba of _0x33dd29||[]){if(!_0x382eba||typeof _0x382eba['jid']!=='string')continue;const _0x4d0db6=normalizeToJid(_0x382eba[_0x559e15(0x120)]);if(_0x4d0db6&&_0x5f285d['has'](_0x4d0db6))return _0x4d0db6;if(_0x5f285d[_0x559e15(0x284)](_0x382eba[_0x559e15(0x120)]))return _0x382eba['jid'];const _0x121bf0=String(_0x382eba['jid'])['split']('@')[0x22af+0x17*-0x151+0x4*-0x11a][_0x559e15(0x21d)](':')[0xdf3+0x1e6a+-0x2c5d];if(_0x121bf0)for(const _0x4977ac of _0x1a8dd2){const _0x51c1e1=String(_0x4977ac)[_0x559e15(0x21d)]('@')[0x1*0x59f+0x6*0x54+-0x43*0x1d];if(_0x51c1e1&&_0x51c1e1===_0x121bf0)return _0x4977ac;}}return null;}catch(_0x34a96d){return warn('['+name+(_0x559e15(0x1a8)+_0x559e15(0xfd)+_0x559e15(0x24d)+_0x559e15(0x14c))+(_0x34a96d?.[_0x559e15(0x269)]||_0x34a96d)),null;}}let schedulerHandle=null,schedulerRunning=![];function startDailyScheduler(){stopDailyScheduler();const _0x1340d9=0x209c*-0x1+-0x4686+0x15182-Date['now']()%(-0x7*0x32fe+0x2*-0x86a3+-0x4*-0xd726);setTimeout(()=>{const _0x214491=_0x1ce7;_dailyTick()[_0x214491(0x197)](_0x5e93bf=>warn('['+name+(']\x20initial\x20'+_0x214491(0x282)+_0x214491(0x10a))+(_0x5e93bf?.['message']||_0x5e93bf))),schedulerHandle=setInterval(()=>_dailyTick()[_0x214491(0x197)](_0x10d461=>warn('['+name+(_0x214491(0x1d9)+_0x214491(0x114))+(_0x10d461?.[_0x214491(0x269)]||_0x10d461))),(0xf0e+-0x25f*-0x9+0x2429*-0x1)*(0x235b+0x1ed2+-0x1*0x3e45)),info('['+name+(_0x214491(0x195)+_0x214491(0x277)+_0x214491(0x210)+_0x214491(0x169)));},_0x1340d9);}function stopDailyScheduler(){const _0x145c7a=_0x5b3743;schedulerHandle&&(clearInterval(schedulerHandle),schedulerHandle=null,info('['+name+(_0x145c7a(0x195)+'heduler\x20st'+_0x145c7a(0x27a))));}function _0x1ce7(_0x378282,_0x16c163){const _0x4d4f1e=_0x5bc8();return _0x1ce7=function(_0x44bfee,_0x2232a8){_0x44bfee=_0x44bfee-(-0x156b+-0x184b+0x954*0x5);let _0x96270c=_0x4d4f1e[_0x44bfee];return _0x96270c;},_0x1ce7(_0x378282,_0x16c163);}async function _dailyTick(){const _0x2528f7=_0x5b3743;if(schedulerRunning)return;schedulerRunning=!![];try{const _0x2a4168=await db[_0x2528f7(0x1ad)](_0x2528f7(0x171)+_0x2528f7(0x28b)+_0x2528f7(0x131)+_0x2528f7(0x28c)+_0x2528f7(0x1eb)+DAILY_TABLE+(_0x2528f7(0x133)+'bled\x20=\x201'));if(!_0x2a4168||!_0x2a4168[_0x2528f7(0x153)])return;for(const _0x56d979 of _0x2a4168){try{const _0x5cff32=_0x56d979['group_jid'],_0x4b9aeb=_0x56d979['time']||_0x2528f7(0x28f),_0x47c318=DEFAULT_TIMEZONE,_0x4c6082=DateTime[_0x2528f7(0x13e)]()[_0x2528f7(0x119)](_0x47c318),_0x194574=_0x4c6082[_0x2528f7(0x28d)]('HH:mm');if(_0x194574!==_0x4b9aeb)continue;const _0x57f438=Number(_0x56d979['last_sent']||-0x718+-0x21f9+-0x1*-0x2911);if(_0x57f438){const _0x5f4cd9=DateTime[_0x2528f7(0x1c1)+'s'](_0x57f438)[_0x2528f7(0x119)](_0x47c318);if(_0x5f4cd9['hasSame'](_0x4c6082,_0x2528f7(0x142)))continue;}const _0x3f1ccf=await composeAliveMessage(_0x5cff32),_0x30f23=await sendAliveToChat(_0x5cff32,_0x3f1ccf);_0x30f23?(await updateDailyLastSent(_0x5cff32,Math[_0x2528f7(0x1d1)](Date[_0x2528f7(0x13e)]()/(0x250f*-0x1+-0x2*0xa06+0x3d03))),info('['+name+(_0x2528f7(0xf8)+_0x2528f7(0x1cf)+'o\x20')+_0x5cff32+_0x2528f7(0x16e)+_0x4b9aeb)):warn('['+name+(_0x2528f7(0xf8)+_0x2528f7(0x167)+_0x2528f7(0xf1)+'o\x20')+_0x5cff32);}catch(_0x1eb8ee){warn('['+name+(_0x2528f7(0x1f5)+_0x2528f7(0x22c)+'error:\x20')+(_0x1eb8ee?.[_0x2528f7(0x269)]||_0x1eb8ee));}}}catch(_0x225251){warn('['+name+(_0x2528f7(0x1ac)+_0x2528f7(0x114))+(_0x225251?.['message']||_0x225251));}finally{schedulerRunning=![];}}function extractTextFromMessage(_0x526854){const _0xa86a19=_0x5b3743;if(!_0x526854||!_0x526854['message'])return'';const _0x30ffec=_0x526854[_0xa86a19(0x269)];if(_0x30ffec[_0xa86a19(0x175)+'on'])return _0x30ffec[_0xa86a19(0x175)+'on'];if(_0x30ffec[_0xa86a19(0x25a)+_0xa86a19(0xf0)]?.[_0xa86a19(0x13b)])return _0x30ffec[_0xa86a19(0x25a)+'xtMessage']['text'];if(_0x30ffec[_0xa86a19(0x14b)+'ge']?.['caption'])return _0x30ffec[_0xa86a19(0x14b)+'ge'][_0xa86a19(0x1f4)];if(_0x30ffec[_0xa86a19(0x19a)+'ge']?.[_0xa86a19(0x1f4)])return _0x30ffec[_0xa86a19(0x19a)+'ge'][_0xa86a19(0x1f4)];if(_0x30ffec['buttonsRes'+'ponseMessa'+'ge']?.[_0xa86a19(0x1d7)+_0xa86a19(0x159)])return _0x30ffec[_0xa86a19(0x255)+'ponseMessa'+'ge'][_0xa86a19(0x1d7)+_0xa86a19(0x159)];if(_0x30ffec[_0xa86a19(0x20d)+_0xa86a19(0x166)]?.[_0xa86a19(0x113)+_0xa86a19(0x143)]?.['selectedRo'+_0xa86a19(0x258)])return _0x30ffec['listRespon'+_0xa86a19(0x166)][_0xa86a19(0x113)+_0xa86a19(0x143)]?.['selectedRo'+'wId'];return'';}function detectCommandName(_0x34392a){const _0x2b2e71=_0x5b3743;if(!_0x34392a)return'';return _0x34392a[_0x2b2e71(0x22d)]()[_0x2b2e71(0x21d)](/\s+/)[0x5*0x7a1+-0x1*0x5ba+-0x206b][_0x2b2e71(0x1b9)+'e']();}export async function initialize(_0x5cbeec){const _0x579b63=_0x5b3743;if(!_0x5cbeec)throw new Error(_0x579b63(0x13c)+_0x579b63(0x12a)+_0x579b63(0x23e)+'instance');botRef=_0x5cbeec,setupSendApi(botRef),moduleStartTs=Date[_0x579b63(0x13e)](),await ensureSchema()['catch'](_0x4e3c8c=>{const _0x244c46=_0x579b63;error(_0x4e3c8c,'['+name+(']\x20DB\x20init\x20'+'fatal:\x20')+(_0x4e3c8c?.[_0x244c46(0x269)]||_0x4e3c8c));throw _0x4e3c8c;}),await loadQuotesFromFileIntoDB()[_0x579b63(0x197)](_0x27e030=>warn('['+name+(_0x579b63(0x184)+_0x579b63(0x1af)+'\x20')+(_0x27e030?.[_0x579b63(0x269)]||_0x27e030)));try{const _0x39fa55=await db[_0x579b63(0x28e)](_0x579b63(0x1b5)+_0x579b63(0x105)+_0x579b63(0x15e)+'uptime\x20WHE'+_0x579b63(0x18e)+_0x579b63(0x22f),[name]);if(!_0x39fa55){const _0x2b1a91=Math[_0x579b63(0x1d1)](Date[_0x579b63(0x13e)]()/(-0x1*-0xd07+-0x1a3c+-0x111d*-0x1));await db[_0x579b63(0x202)](_0x579b63(0x1f8)+_0x579b63(0x1b7)+_0x579b63(0x1fe)+'ule,\x20start'+'ed_at)\x20VAL'+'UES\x20(?,\x20?)',[name,_0x2b1a91]);}}catch(_0xe38eda){}startDailyScheduler(),info('['+name+(_0x579b63(0x11d)+'zed\x20v')+version);}export async function onMessage(_0x5d5a7d){const _0x5da409=_0x5b3743;try{if(!_0x5d5a7d||!_0x5d5a7d[_0x5da409(0x21f)]||!_0x5d5a7d[_0x5da409(0x269)])return;const _0x349714=String(_0x5d5a7d[_0x5da409(0x21f)][_0x5da409(0x185)]||'')+'::'+String(_0x5d5a7d[_0x5da409(0x21f)]['id']||_0x5d5a7d[_0x5da409(0x21f)][_0x5da409(0x19d)+'t']||'');if(isProcessed(_0x349714))return;markProcessed(_0x349714);const _0x33fb0a=String(extractTextFromMessage(_0x5d5a7d)||'');if(!_0x33fb0a[_0x5da409(0x22d)]())return;let _0x461f25='',_0x273493=![];if(_0x5d5a7d['isCommand']){const _0x2c47e9=(_0x33fb0a[_0x5da409(0x22d)]()[_0x5da409(0x21d)](/\s+/)[0x1*0x1df5+0x17cc+-0xb*0x4e3]||'')[_0x5da409(0x1b9)+'e']();commands['includes'](_0x2c47e9)&&(_0x461f25=_0x2c47e9,_0x273493=!![]);}else{const _0x365480=(_0x33fb0a[_0x5da409(0x21d)](/\r?\n/)[0x3*0x872+-0x80*-0x1+-0x2*0xceb]||'')[_0x5da409(0x22d)](),_0x468027=(_0x365480['split'](/\s+/)[0xf5f+-0x1f*-0x47+-0x17f8*0x1]||'')['toLowerCas'+'e']();commands[_0x5da409(0x110)](_0x468027)&&(_0x461f25=_0x468027,_0x273493=!![]);}if(!_0x273493)return;const _0x4fe6ec=_0x5d5a7d[_0x5da409(0x21f)][_0x5da409(0x185)],_0x4cd2b4=typeof _0x4fe6ec==='string'&&_0x4fe6ec[_0x5da409(0x231)](_0x5da409(0x1d4));if(_0x4cd2b4){let _0x1b1053=![];try{_0x1b1053=await isadmin(botRef,_0x5d5a7d);}catch(_0x459f68){warn('['+name+(_0x5da409(0x291)+_0x5da409(0x225)+'ed')),_0x1b1053=![];}if(!_0x1b1053)return;const _0x4aa8cc=_0x5d5a7d[_0x5da409(0x21f)][_0x5da409(0x19d)+'t']||_0x5d5a7d[_0x5da409(0x21f)][_0x5da409(0x25b)]||_0x5d5a7d['key'][_0x5da409(0x185)]||'',_0x12c9ab=_0x33fb0a[_0x5da409(0x21d)](/\r?\n/)[-0x313*-0x5+0x1456+-0x21*0x115]||'',_0xefcf50=_0x12c9ab[_0x5da409(0x22d)]()[_0x5da409(0x21d)](/\s+/)[_0x5da409(0x17b)](Boolean),_0x27a0e3=(_0xefcf50[-0x11e1+0x23d0+-0x11ee]||'')['toLowerCas'+'e']();if(_0x461f25===_0x5da409(0xee)){if(_0x27a0e3===_0x5da409(0x1ad)){const _0x648356=(_0x4aa8cc||'')[_0x5da409(0x21d)]('@')[-0x1*-0xcb6+0x1f8f+-0x2c45],_0x455060=await resolveDefaultGroupJids(_0x648356);if(!_0x455060||_0x455060[_0x5da409(0x153)]===-0x260+0x1a6b+-0x180b){await safeSend(_0x4fe6ec,{'text':_0x5da409(0x118)+_0x5da409(0x141)+_0x5da409(0x285)+'o\x20send\x20\x22al'+_0x5da409(0x206)});return;}let _0x4cd595=-0x2*-0xe92+-0x6a6+-0x167e*0x1;for(const _0x4b3e32 of _0x455060){try{const _0xfd0a4e=await composeAliveMessage(_0x4b3e32);await sendAliveToChat(_0x4b3e32,_0xfd0a4e),_0x4cd595++;}catch(_0x3cceeb){warn('['+name+(_0x5da409(0x226)+_0x5da409(0x26a)+_0x5da409(0x1b2))+_0x4b3e32+':\x20'+(_0x3cceeb?.[_0x5da409(0x269)]||_0x3cceeb));}}await safeSend(_0x4fe6ec,{'text':'Sent\x20alive'+_0x5da409(0x15f)+_0x4cd595+(_0x5da409(0x216)+_0x5da409(0xf5)+_0x5da409(0x248))});return;}const _0x1de94c=await composeAliveMessage(_0x4fe6ec);await sendAliveToChat(_0x4fe6ec,_0x1de94c);return;}if(_0x461f25===_0x5da409(0x189)){const _0x1ba76a=_0x33fb0a['split'](/\r?\n/),_0xdba995=(_0x1ba76a[-0xdbc+-0xc*-0x290+-0x1104]||'')['trim'](),_0x28a69c=_0xdba995[_0x5da409(0x25c)](new RegExp('^'+_0x461f25+'\x5cb','i'),'')['trim'](),_0x1d672e=[];if(_0x28a69c)_0x1d672e[_0x5da409(0x211)](_0x28a69c);_0x1d672e['push'](..._0x1ba76a[_0x5da409(0xf4)](-0x1*-0x1112+0xbe9*-0x1+-0x528));const _0x5e6785=_0x1d672e['join']('\x0a')[_0x5da409(0x22d)]();if(!_0x5e6785){await safeSend(_0x4fe6ec,{'text':_0x5da409(0x29a)+'talive\x20(pr'+_0x5da409(0x1ae)+_0x5da409(0x293)+_0x5da409(0x173)+_0x5da409(0x207)+_0x5da409(0x1f9)});return;}const _0x41c908=await db[_0x5da409(0x202)](_0x5da409(0x1f8)+'O\x20'+ALIVE_TABLE+(_0x5da409(0x215)+'d,\x20message'+',\x20updated_'+_0x5da409(0x12c)+_0x5da409(0x203)+_0x5da409(0x1ff)+'\x20ON\x20CONFLI'+_0x5da409(0x1c3)+_0x5da409(0x1d2)+_0x5da409(0x250)+_0x5da409(0x104)+_0x5da409(0x198)+_0x5da409(0x1e1)+_0x5da409(0x1f0)+_0x5da409(0x1c7)+_0x5da409(0x160)),[_0x4fe6ec,_0x5e6785,Math[_0x5da409(0x1d1)](Date[_0x5da409(0x13e)]()/(-0xce1+-0x3*-0x67f+-0x4*0xad))]);await safeSend(_0x4fe6ec,{'text':_0x5da409(0x10c)+'e\x20message\x20'+_0x5da409(0x24e)+_0x5da409(0x102)});return;}if(_0x461f25===_0x5da409(0x265)){const _0x52cf56=await db[_0x5da409(0x202)]('DELETE\x20FRO'+'M\x20'+ALIVE_TABLE+(_0x5da409(0x1b0)+_0x5da409(0x10d)),[_0x4fe6ec]);await safeSend(_0x4fe6ec,{'text':_0x5da409(0x27d)+_0x5da409(0x261)+_0x5da409(0x268)+_0x5da409(0x152)+_0x5da409(0x147)});return;}if(_0x461f25===_0x5da409(0x154)){const _0x36c324=await db['all'](_0x5da409(0x10e)+_0x5da409(0x176)+'M\x20'+ALIVE_QUOTES_TABLE+(_0x5da409(0x1b0)+_0x5da409(0x10d)+_0x5da409(0x138)+'id'),[_0x4fe6ec]);if(_0x36c324&&_0x36c324['length']){let _0x26785a=_0x5da409(0x146)+'\x20'+_0x4fe6ec+':\x0a';for(const _0x43653e of _0x36c324){_0x26785a+=_0x43653e['id']+'.\x20'+_0x43653e[_0x5da409(0x24f)]+'\x0a',_0x26785a[_0x5da409(0x153)]>0x1815+0x82+0x1*-0x13e7&&(await safeSend(_0x4fe6ec,{'text':_0x26785a}),_0x26785a='');}if(_0x26785a['trim']())await safeSend(_0x4fe6ec,{'text':_0x26785a});return;}const _0x3d46e5=await db[_0x5da409(0x1ad)]('SELECT\x20id,'+_0x5da409(0x176)+'M\x20'+GLOBAL_QUOTES_TABLE+('\x20ORDER\x20BY\x20'+_0x5da409(0xff)+'0'));if(!_0x3d46e5||!_0x3d46e5[_0x5da409(0x153)]){await safeSend(_0x4fe6ec,{'text':_0x5da409(0x191)+_0x5da409(0x25f)});return;}let _0x30f97f=_0x5da409(0x201)+'tes\x20(sampl'+_0x5da409(0x1d0);for(const _0x4e3e2d of _0x3d46e5)_0x30f97f+='-\x20'+_0x4e3e2d[_0x5da409(0x24f)]+'\x0a';await safeSend(_0x4fe6ec,{'text':_0x30f97f});return;}if(_0x461f25==='alivedaily'){const _0x5acd6e=_0x27a0e3||'';if(!_0x5acd6e){const _0x2e8a08=await getDailySetting(_0x4fe6ec);await safeSend(_0x4fe6ec,{'text':_0x5da409(0x1e4)+_0x5da409(0x25e)+(_0x2e8a08[_0x5da409(0x23d)]?'ON':_0x5da409(0x101))+_0x5da409(0x16e)+_0x2e8a08[_0x5da409(0x1a0)]});return;}if(_0x5acd6e==='on'){const _0x4ac85c=(_0xefcf50[0x1*0x1824+0x3*-0xa15+0x61d]||_0x5da409(0x28f))[_0x5da409(0x22d)]();if(!/^\d{1,2}:\d{2}$/[_0x5da409(0x19f)](_0x4ac85c)){await safeSend(_0x4fe6ec,{'text':'Time\x20must\x20'+'be\x20HH:mm\x20('+_0x5da409(0x179)+'Example:\x20a'+_0x5da409(0x251)+_0x5da409(0x162)});return;}const _0x3b7ef2=_0x4ac85c[_0x5da409(0x21d)](':')[0x3d3*-0x3+-0x47d*-0x2+0x27f]['padStart'](0x25b+0xce6+-0xf3f,'0'),_0x5bde3f=_0x4ac85c[_0x5da409(0x21d)](':')[0xb*0x116+-0x153c+0x3*0x319][_0x5da409(0x15c)](0x22de*-0x1+0x2*-0x642+-0x2a2*-0x12,'0'),_0x131692=_0x3b7ef2+':'+_0x5bde3f;await setDailySetting(_0x4fe6ec,!![],_0x131692),await safeSend(_0x4fe6ec,{'text':_0x5da409(0x1e4)+_0x5da409(0x244)+_0x5da409(0x24e)+_0x5da409(0x19e)+_0x131692});return;}if(_0x5acd6e==='off'){await setDailySetting(_0x4fe6ec,![],null),await safeSend(_0x4fe6ec,{'text':_0x5da409(0x1e4)+_0x5da409(0x17e)+_0x5da409(0x14e)+'group.'});return;}await safeSend(_0x4fe6ec,{'text':'Usage:\x20ali'+_0x5da409(0x17d)+_0x5da409(0x1d8)+_0x5da409(0x251)+_0x5da409(0x134)});return;}return;}const _0x51dabe=Boolean(_0x5d5a7d['key'][_0x5da409(0x270)]);let _0x2a1a5f=null;if(_0x51dabe){const _0x4a9dd6=getBotJid();if(!_0x4a9dd6){warn('['+name+(_0x5da409(0x27e)+_0x5da409(0x172)+_0x5da409(0x213)+'r\x20replies\x20'+_0x5da409(0x155)));return;}_0x2a1a5f=_0x4a9dd6;}else{let _0x1c847a=![];try{_0x1c847a=await isSudo(botRef,_0x5d5a7d);}catch(_0x1b3254){_0x1c847a=![];}if(!_0x1c847a)return;const _0x2c01ff=userJidFromCtx(_0x5d5a7d)||{'findings':[]},_0x528550=await findStoredMatchFromFindings(_0x2c01ff['findings']||[]);if(!_0x528550)return;_0x2a1a5f=_0x528550;}const {firstLine:_0x1768b6,restText:_0x2551d3}=((()=>{const _0x327163=_0x5da409,_0x2641c5=_0x33fb0a[_0x327163(0x21d)](/\r?\n/);return{'firstLine':_0x2641c5[0x8*0x37f+0x14bb+-0x7*0x6f5]||'','restText':_0x2641c5[_0x327163(0xf4)](-0x17+0x6a*-0x3+-0x1*-0x156)[_0x327163(0x1cb)]('\x0a')};})()),_0x48e803=(_0x1768b6||'')['trim']()[_0x5da409(0x21d)](/\s+/)[_0x5da409(0x17b)](Boolean),_0x11fd1e=(_0x48e803[0x392+0x20ff+0xea*-0x28]||'')['toLowerCas'+'e'](),_0x4c5329=_0x461f25,_0x3e5ff5=_0x2551d3&&_0x2551d3['length']?_0x2551d3+'\x0a'+_0x1768b6:_0x1768b6,_0x27ffa8=_0x3e5ff5['match'](/\bgp[:\s]+(\S+)/i),_0x3576e6=_0x27ffa8?_0x27ffa8[0x2087+0xb*0x22c+-0x386a][_0x5da409(0x22d)]():null;async function _0x4fb7fe(_0x1eb24e){const _0x44bc9a=_0x5da409;if(!_0x1eb24e)return[];if(_0x1eb24e[_0x44bc9a(0x1b9)+'e']()===_0x44bc9a(0x1ad))return await _0x27d999['getUniqueJ'+_0x44bc9a(0x18c)]();const _0x31af11=await _0x27d999['resolveNam'+'e'](_0x1eb24e);if(_0x31af11)return[_0x31af11];if(_0x1eb24e[_0x44bc9a(0x110)]('@'))return[_0x27d999[_0x44bc9a(0x298)+_0x44bc9a(0x1ef)](_0x1eb24e)];return[];}if(_0x4c5329==='listquote'){const _0xf602be=await db[_0x5da409(0x1ad)](_0x5da409(0x10e)+_0x5da409(0x176)+'M\x20'+GLOBAL_QUOTES_TABLE+(_0x5da409(0x138)+'id\x20LIMIT\x202'+'0'));if(!_0xf602be||!_0xf602be[_0x5da409(0x153)]){await safeSend(_0x2a1a5f,{'text':_0x5da409(0x191)+_0x5da409(0x25f)});return;}let _0x1187a2=_0x5da409(0x201)+'tes\x20(sampl'+_0x5da409(0x1d0);for(const _0x3107ed of _0xf602be)_0x1187a2+='-\x20'+_0x3107ed['quote']+'\x0a';await safeSend(_0x2a1a5f,{'text':_0x1187a2});return;}const _0x52c739=[_0x5da409(0xee),_0x5da409(0x189),_0x5da409(0x265),_0x5da409(0x1c5)];if(_0x52c739['includes'](_0x4c5329)&&!_0x3576e6){await safeSend(_0x2a1a5f,{'text':_0x5da409(0x165)+_0x5da409(0x10f)+':<alias|ji'+'d|all>\x20inl'+_0x5da409(0x1d6)+_0x5da409(0x283)+_0x4c5329+(_0x5da409(0x158)+'p\x0aFor\x20seta'+'live\x20you\x20c'+_0x5da409(0x17a)+_0x5da409(0x148)+'setalive\x20('+_0x5da409(0x151)+_0x5da409(0x1e7)+_0x5da409(0x295))});return;}const _0x59d0a6=_0x3576e6?await _0x4fb7fe(_0x3576e6):[];if(_0x52c739[_0x5da409(0x110)](_0x4c5329)&&(!_0x59d0a6||_0x59d0a6[_0x5da409(0x153)]===0x107f+-0x270f+0x1690)){await safeSend(_0x2a1a5f,{'text':_0x5da409(0x28a)+_0x5da409(0x112)+':\x20\x22'+_0x3576e6+('\x22.\x20Use\x20gp:'+'alias,\x20gp:'+_0x5da409(0x236)+_0x5da409(0x115))});return;}if(_0x4c5329===_0x5da409(0xee)){for(const _0x3512d2 of _0x59d0a6){const _0x59707e=await composeAliveMessage(_0x3512d2);await sendAliveToChat(_0x3512d2,_0x59707e);}await safeSend(_0x2a1a5f,{'text':_0x5da409(0x289)+_0x5da409(0x15f)+_0x59d0a6[_0x5da409(0x153)]+('\x20target(s)'+'.')});return;}if(_0x4c5329===_0x5da409(0x189)){const _0x73f4e7=_0x1768b6[_0x5da409(0x25c)](new RegExp('^'+_0x4c5329+'\x5cb','i'),'')[_0x5da409(0x22d)](),_0x40ad45=[];if(_0x73f4e7)_0x40ad45['push'](_0x73f4e7);if(_0x2551d3)_0x40ad45[_0x5da409(0x211)](_0x2551d3);const _0x13abb0=_0x40ad45[_0x5da409(0x1cb)]('\x0a')[_0x5da409(0x25c)](/\bgp[:\s]+\S+/ig,'')[_0x5da409(0x22d)]();if(!_0x13abb0){await safeSend(_0x2a1a5f,{'text':_0x5da409(0x1bd)+_0x5da409(0x22b)+_0x5da409(0x241)+_0x5da409(0x286)+'tiline:\x20se'+_0x5da409(0xf7)+'ter)\x20<mess'+_0x5da409(0x16c)+_0x5da409(0x178)});return;}let _0x2856c0=0x62b*0x5+-0x1a52+0x1*-0x485;for(const _0x28fa64 of _0x59d0a6){try{await db[_0x5da409(0x202)](_0x5da409(0x1f8)+'O\x20'+ALIVE_TABLE+(_0x5da409(0x215)+'d,\x20message'+',\x20updated_'+'at)\x20VALUES'+'\x20(?,\x20?,\x20?)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5da409(0x11f)+_0x5da409(0x103)+_0x5da409(0x21b)+_0x5da409(0x1b6)+_0x5da409(0x1ce)+'excluded.m'+_0x5da409(0x1e2)+_0x5da409(0x26d)+_0x5da409(0x274)+_0x5da409(0x1de)),[_0x28fa64,_0x13abb0,Math['floor'](Date['now']()/(-0x61e+-0x22b+0x1*0xc31))]),_0x2856c0++;}catch(_0x3f588a){warn('['+name+(_0x5da409(0x1fb)+_0x5da409(0x1b1)+'\x20for\x20')+_0x28fa64+':\x20'+(_0x3f588a?.[_0x5da409(0x269)]||_0x3f588a));}}await safeSend(_0x2a1a5f,{'text':_0x5da409(0x10c)+_0x5da409(0x11a)+'for\x20'+_0x2856c0+('\x20target(s)'+'.')});return;}if(_0x4c5329===_0x5da409(0x265)){let _0x54ce2b=-0xaea*0x3+0xf1*-0x28+0x4666;for(const _0x51440f of _0x59d0a6){try{const _0x5a9235=await db[_0x5da409(0x202)](_0x5da409(0x16d)+'M\x20'+ALIVE_TABLE+(_0x5da409(0x1b0)+_0x5da409(0x10d)),[_0x51440f]);_0x54ce2b++;}catch(_0x5e90ab){warn('['+name+(_0x5da409(0x246)+_0x5da409(0x1b1)+_0x5da409(0x100))+_0x51440f+':\x20'+(_0x5e90ab?.[_0x5da409(0x269)]||_0x5e90ab));}}await safeSend(_0x2a1a5f,{'text':_0x5da409(0x164)+_0x5da409(0x241)+_0x5da409(0x117)+_0x54ce2b+(_0x5da409(0x149)+'.')});return;}if(_0x4c5329===_0x5da409(0x1c5)){const _0x470356=_0x11fd1e||'';if(!_0x470356){let _0xb2fef0=[];for(const _0x3aec15 of _0x59d0a6){const _0x11df04=await getDailySetting(_0x3aec15);_0xb2fef0[_0x5da409(0x211)](_0x3aec15+':\x20'+(_0x11df04[_0x5da409(0x23d)]?'ON':_0x5da409(0x101))+_0x5da409(0x16e)+_0x11df04[_0x5da409(0x1a0)]);}await safeSend(_0x2a1a5f,{'text':_0x5da409(0x228)+_0x5da409(0x1f3)+_0xb2fef0[_0x5da409(0x1cb)]('\x0a')});return;}if(_0x470356==='on'){const _0x2ae2d9=(_0x48e803[0x1b37+0x8d8+0x240d*-0x1]||_0x5da409(0x28f))[_0x5da409(0x22d)]();if(!/^\d{1,2}:\d{2}$/[_0x5da409(0x19f)](_0x2ae2d9)){await safeSend(_0x2a1a5f,{'text':'Time\x20must\x20'+'be\x20HH:mm\x20('+_0x5da409(0x179)+_0x5da409(0x1e8)+_0x5da409(0x251)+'on\x2007:30\x20g'+_0x5da409(0x1be)});return;}const _0x3745c7=_0x2ae2d9['split'](':')[0x4eb*-0x1+-0x1027+0x1512][_0x5da409(0x15c)](0x13fa+-0x1*-0x265d+-0x1*0x3a55,'0'),_0x356828=_0x2ae2d9[_0x5da409(0x21d)](':')[0x2d5*-0x1+0xa09*-0x1+0xcdf*0x1][_0x5da409(0x15c)](-0x1b7c+-0x1a52*0x1+0x35d0,'0'),_0x39f80b=_0x3745c7+':'+_0x356828;for(const _0x243df9 of _0x59d0a6)await setDailySetting(_0x243df9,!![],_0x39f80b);await safeSend(_0x2a1a5f,{'text':_0x5da409(0x1e4)+_0x5da409(0x244)+_0x5da409(0x18b)+_0x39f80b+'\x20for\x20'+_0x59d0a6['length']+(_0x5da409(0x149)+'.')});return;}if(_0x470356==='off'){for(const _0x24e01c of _0x59d0a6)await setDailySetting(_0x24e01c,![],null);await safeSend(_0x2a1a5f,{'text':'Daily\x20aliv'+_0x5da409(0x17e)+'\x20for\x20'+_0x59d0a6[_0x5da409(0x153)]+(_0x5da409(0x149)+'.')});return;}await safeSend(_0x2a1a5f,{'text':_0x5da409(0x247)+_0x5da409(0x17d)+'\x20HH:mm\x20gp:'+_0x5da409(0x17f)+_0x5da409(0x182)+_0x5da409(0x106)+_0x5da409(0x10b)});return;}}catch(_0xc85980){error(_0xc85980,'['+name+(_0x5da409(0x13d)+_0x5da409(0x129))+(_0xc85980?.[_0x5da409(0x269)]||_0xc85980));}}export async function cleanup(){const _0x4e7f4f=_0x5b3743;try{stopDailyScheduler();for(const _0x46df2c of processedMessageKeys[_0x4e7f4f(0x257)]())try{clearTimeout(_0x46df2c);}catch(_0x58f1bb){}processedMessageKeys[_0x4e7f4f(0x208)]();}catch(_0x156250){warn('['+name+(_0x4e7f4f(0x23f)+'error:\x20')+(_0x156250?.[_0x4e7f4f(0x269)]||_0x156250));}finally{botRef=null,sendApi=null,info('['+name+(_0x4e7f4f(0x238)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};