const _0x23413f=_0x59af;(function(_0x5e4bb1,_0x30cd7a){const _0x2df3ac=_0x59af,_0x5013b5=_0x5e4bb1();while(!![]){try{const _0xe35ce0=-parseInt(_0x2df3ac(0x1fa))/(0x693+-0x1f4f+0x18bd)*(-parseInt(_0x2df3ac(0x233))/(-0x4a*0x14+-0x15b9*-0x1+0xfef*-0x1))+parseInt(_0x2df3ac(0x1d3))/(-0x1*0x775+0x6b1+-0xc7*-0x1)*(-parseInt(_0x2df3ac(0x217))/(-0x16*0x153+-0x1*-0x22a0+-0x57a))+parseInt(_0x2df3ac(0x207))/(0x1822*0x1+-0x9b2+-0xe6b)*(-parseInt(_0x2df3ac(0x1cb))/(-0x1c53+0xe98+0xdc1))+-parseInt(_0x2df3ac(0x1c2))/(-0x22e3+-0x97*-0x2e+0x2*0x3e4)*(-parseInt(_0x2df3ac(0x209))/(0xf*0x1d+-0x25b9+0x240e*0x1))+parseInt(_0x2df3ac(0x1f1))/(0x1ac8+0xd*0x22d+-0x3708)*(parseInt(_0x2df3ac(0x1e3))/(0x6*-0x61e+-0x1a4a+-0xfc2*-0x4))+-parseInt(_0x2df3ac(0x1d7))/(-0x101*0x16+-0x54+-0x1675*-0x1)*(parseInt(_0x2df3ac(0x227))/(-0x19ba+0x7e*-0x3b+0x6da*0x8))+parseInt(_0x2df3ac(0x208))/(-0x15*-0x29+-0x16bb*-0x1+0x1*-0x1a0b);if(_0xe35ce0===_0x30cd7a)break;else _0x5013b5['push'](_0x5013b5['shift']());}catch(_0x2e79c7){_0x5013b5['push'](_0x5013b5['shift']());}}}(_0x17b2,0x56811+0x3*0x1df2+0x1*-0x15575));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name=_0x23413f(0x1e6)+_0x23413f(0x1e1);function _0x59af(_0x3fac5a,_0x1736f9){_0x3fac5a=_0x3fac5a-(0x16b7+0x1*0x2371+-0x2*0x1c36);const _0x379a5e=_0x17b2();let _0x2bfe5e=_0x379a5e[_0x3fac5a];return _0x2bfe5e;}export const version=_0x23413f(0x1eb);export const priority=-0x9b*0x5+0x83c+-0x298*0x2;function _0x17b2(){const _0x10d24b=['eHandler\x20e','setZone','rror',':\x20auto-rea','value','DATETIME_M','=\x20excluded','✔️\x20Auto-rea','ndler\x20erro','AME','DISABLED','217yuvNaB','d\x20ENABLED.','\x20onMessage','\x20(\x27enabled','hod\x20availa','fromMillis','d\x20confirma','\x20initializ','onfig\x20erro','24kwSPFA','ailed:\x20','false','dConfig\x20re','PRIMARY\x20KE',']\x20sendConf','refs','true','39GtzPon','dConfig\x20ha','status@bro','Africa/Nai','11eYOkYN','ge\x20from\x20','isArray',':\x20initiali','DO\x20UPDATE\x20','\x20cleanup\x20e','state\x20set\x20','\x20WHERE\x20key','ue\x20FROM\x20','SET\x20value\x20','ader','autoread_p','10OnzBYa','ESSAGES','edState\x20fa','message-re','toLowerCas',']\x20no\x20sendM','key','tion','2.0.0','essage\x20met','\x20(key,\x20val','ENABLED','\x20at\x20','gistration','3259323ABvLSu','function','Y,\x0a\x20\x20\x20\x20\x20\x20\x20','messages.u',']\x20No\x20DB\x20se','\x0a\x20\x20\x20\x20\x20\x20);\x0a','get','message','ℹ️\x20Auto-rea','42611RteAMb','LICT(key)\x20','d\x20DISABLED','\x20cleaned\x20u','length','zed.','\x0a\x20\x20\x20\x20\x20\x20CRE','toLocaleSt',']\x20getEnabl','psert','SELECT\x20val','.value','\x20error','356030QLvLKh','173407QrnEyd','75496CDXHLA','irmation\x20f','\x20=\x20\x27enable','\x20ensured.','STS\x20','ble\x20failed','sock','string','off','text','\x20from\x20conf','fromMe','isCommand','\x27,\x20?)\x0a\x20\x20\x20\x20','44376ZWVTgp','zoneName','\x20rawMessag','\x20failed:\x20','\x20value\x20TEX','ig.js...','remoteJid','TIMEZONE','\x20(command)','e\x20error:\x20','sendMessag','r:\x20','readMessag','ue)\x20VALUES','ED_WITH_SE','AUTOREAD_M','5013624ibjORa','ble\x20to\x20sen','ring','exec','catch',']\x20setEnabl','trim','robi','g\x20fallback',']\x20Initial\x20','split','\x20key\x20TEXT\x20','22ZWZaHZ'];_0x17b2=function(){return _0x10d24b;};return _0x17b2();}export const commands=['autoread'];export const configKeys=['AUTOREAD_M'+_0x23413f(0x1e4),_0x23413f(0x21e),'TIMEZONE_N'+_0x23413f(0x1c0)];let botRef=null,DEFAULT_TIMEZONE=_0x23413f(0x1d6)+_0x23413f(0x22e),rawMessageHandler=null;const PREFS_TABLE=_0x23413f(0x1e2)+_0x23413f(0x1d1);async function ensureTable(){const _0x80bafa=_0x23413f;try{await db[_0x80bafa(0x22a)](_0x80bafa(0x200)+'ATE\x20TABLE\x20'+'IF\x20NOT\x20EXI'+_0x80bafa(0x20d)+PREFS_TABLE+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x80bafa(0x232)+_0x80bafa(0x1cf)+_0x80bafa(0x1f3)+_0x80bafa(0x21b)+'T\x20NOT\x20NULL'+_0x80bafa(0x1f6)+'\x20\x20\x20\x20')),info('['+name+(']\x20DB\x20table'+'\x20')+PREFS_TABLE+_0x80bafa(0x20c));}catch(_0x6e6d54){error(_0x6e6d54,'['+name+(']\x20ensureTa'+_0x80bafa(0x20e)));throw _0x6e6d54;}}async function getEnabledState(){const _0x273245=_0x23413f;try{const _0x5ce6e7=await db['get'](_0x273245(0x204)+_0x273245(0x1df)+PREFS_TABLE+(_0x273245(0x1de)+_0x273245(0x20b)+'d\x27'));return _0x5ce6e7?_0x5ce6e7[_0x273245(0x238)]===_0x273245(0x1d2):![];}catch(_0x4361d4){return warn(_0x4361d4,'['+name+(_0x273245(0x202)+'edState\x20fa'+'iled')),![];}}async function setEnabledState(_0x412be6){const _0xafcc36=_0x23413f;try{const _0x1ecb49=_0x412be6?_0xafcc36(0x1d2):_0xafcc36(0x1cd);return await db['run']('INSERT\x20INT'+'O\x20'+PREFS_TABLE+(_0xafcc36(0x1ed)+_0xafcc36(0x224)+_0xafcc36(0x1c5)+_0xafcc36(0x216)+'\x20\x20\x20ON\x20CONF'+_0xafcc36(0x1fb)+_0xafcc36(0x1db)+_0xafcc36(0x1e0)+_0xafcc36(0x1bd)+_0xafcc36(0x205)),[_0x1ecb49]),!![];}catch(_0x403b52){return error(_0x403b52,'['+name+(_0xafcc36(0x22c)+_0xafcc36(0x1e5)+'iled')),![];}}function refreshConfig(){const _0x3879b9=_0x23413f;try{const _0x302987=typeof getConfig===_0x3879b9(0x1f2)?getConfig()||{}:{};DEFAULT_TIMEZONE=_0x302987[_0x3879b9(0x21e)]||_0x302987['TIMEZONE_N'+'AME']||DEFAULT_TIMEZONE,info(name+(':\x20timezone'+'\x20set\x20to\x20')+DEFAULT_TIMEZONE);}catch(_0x51f835){warn(name+(':\x20refreshC'+_0x3879b9(0x1ca)+_0x3879b9(0x222))+(_0x51f835?.[_0x3879b9(0x1f8)]||_0x51f835));}}try{typeof hotReloadConfig==='function'&&hotReloadConfig(()=>{const _0x5c96ac=_0x23413f;try{refreshConfig();}catch(_0x1ddb1c){warn(name+(':\x20hotReloa'+_0x5c96ac(0x1d4)+_0x5c96ac(0x1bf)+_0x5c96ac(0x222))+(_0x1ddb1c?.['message']||_0x1ddb1c));}});}catch(_0x4b38d2){warn(name+(':\x20hotReloa'+_0x23413f(0x1ce)+_0x23413f(0x1f0)+_0x23413f(0x21a))+(_0x4b38d2?.[_0x23413f(0x1f8)]||_0x4b38d2));}function formatTimestamp(_0x2d6c35=Date['now'](),_0x1a2151=DEFAULT_TIMEZONE){const _0x1382fc=_0x23413f;try{const _0x713eb2=DateTime[_0x1382fc(0x1c7)](_0x2d6c35)[_0x1382fc(0x235)](_0x1a2151);if(!_0x713eb2['isValid'])return new Date(_0x2d6c35)[_0x1382fc(0x201)+_0x1382fc(0x229)]();return _0x713eb2[_0x1382fc(0x201)+'ring'](DateTime[_0x1382fc(0x1bc)+_0x1382fc(0x225)+'CONDS'])+'\x20('+_0x713eb2[_0x1382fc(0x218)]+')';}catch{return new Date(_0x2d6c35)[_0x1382fc(0x201)+_0x1382fc(0x229)]();}}async function sendConfirmation(_0xb0a11,_0x1bf079){const _0x277577=_0x23413f;try{if(!_0xb0a11||!botRef)return;const _0x4bea02=botRef[_0x277577(0x20f)]?.[_0x277577(0x221)+'e']||botRef[_0x277577(0x221)+'e'];_0x4bea02?await _0x4bea02(_0xb0a11,{'text':_0x1bf079}):warn('['+name+(_0x277577(0x1e8)+_0x277577(0x1ec)+_0x277577(0x1c6)+_0x277577(0x228)+_0x277577(0x1c8)+_0x277577(0x1ea)));}catch(_0x5503f4){warn('['+name+(_0x277577(0x1d0)+_0x277577(0x20a)+_0x277577(0x1cc))+(_0x5503f4?.['message']||_0x5503f4));}}async function createRawMessageHandler(){return async function _0x2e0798({messages:_0x3ac5e7}){const _0x155472=_0x59af;try{const _0x2718e0=await getEnabledState();if(!_0x2718e0)return;if(!_0x3ac5e7||!Array[_0x155472(0x1d9)](_0x3ac5e7))return;for(const _0x4d335a of _0x3ac5e7){if(!_0x4d335a||!_0x4d335a[_0x155472(0x1e9)]||!_0x4d335a[_0x155472(0x1f8)])continue;const _0x51fdce=_0x4d335a[_0x155472(0x1e9)]['remoteJid']||'',_0xc0cabb=_0x4d335a['key']['fromMe']||![];if(_0x51fdce===_0x155472(0x1d5)+'adcast'||_0xc0cabb)continue;if(_0xc0cabb&&_0x51fdce===getBotJid())continue;const _0x55d15b=formatTimestamp(Date['now'](),DEFAULT_TIMEZONE);info(name+(_0x155472(0x237)+'ding\x20messa'+_0x155472(0x1d8))+_0x51fdce+_0x155472(0x1ef)+_0x55d15b),await botRef?.['sock']?.[_0x155472(0x223)+'es']([_0x4d335a[_0x155472(0x1e9)]]);}}catch(_0x1aab86){error(_0x1aab86,name+(_0x155472(0x219)+_0x155472(0x234)+_0x155472(0x236)));}};}export async function onMessage(_0x14aa23,_0x3810d9){const _0x1deb10=_0x23413f;try{if(!_0x14aa23||!_0x14aa23[_0x1deb10(0x1e9)]||!_0x14aa23['message']||!_0x14aa23[_0x1deb10(0x215)]||!_0x3810d9)return;if(isJidGroup(_0x14aa23[_0x1deb10(0x1e9)]['remoteJid']))return;const _0x35ce8c=_0x14aa23[_0x1deb10(0x1e9)][_0x1deb10(0x214)],_0x4d7984=await isSudo(botRef,_0x14aa23)[_0x1deb10(0x22b)](()=>![]);if(!_0x35ce8c&&!_0x4d7984)return;const _0x4e6fbc=typeof _0x14aa23[_0x1deb10(0x212)]===_0x1deb10(0x210)&&_0x14aa23[_0x1deb10(0x212)]['trim']()[_0x1deb10(0x1fe)]?_0x14aa23[_0x1deb10(0x212)][_0x1deb10(0x22d)]():'',_0x21e5a9=_0x4e6fbc[_0x1deb10(0x231)](/\s+/),_0x18243a=(_0x21e5a9[-0x549+0x2*0x102d+-0x215*0xd]||'')['toLowerCas'+'e'](),_0x3dffde=(_0x21e5a9[-0xb3*0x26+-0x151*0xc+0x2a5f*0x1]||'')[_0x1deb10(0x1e7)+'e']();if(!commands['includes'](_0x18243a))return;const _0x2ac3d5=_0x35ce8c?getBotJid():_0x14aa23[_0x1deb10(0x1e9)][_0x1deb10(0x21d)];if(!_0x2ac3d5)return;if(_0x3dffde==='on')await setEnabledState(!![]),await sendConfirmation(_0x2ac3d5,_0x1deb10(0x1be)+_0x1deb10(0x1c3));else{if(_0x3dffde==='off')await setEnabledState(![]),await sendConfirmation(_0x2ac3d5,_0x1deb10(0x1be)+_0x1deb10(0x1fc)+'.');else{const _0x1d38d9=await getEnabledState();await sendConfirmation(_0x2ac3d5,_0x1deb10(0x1f9)+'d\x20status:\x20'+(_0x1d38d9?_0x1deb10(0x1ee):_0x1deb10(0x1c1)));}}}catch(_0x5e8bd0){error(_0x5e8bd0,name+(_0x1deb10(0x1c4)+_0x1deb10(0x21f)+_0x1deb10(0x206)));}}export async function initialize(_0x388cff){const _0x48acf2=_0x23413f;try{botRef=_0x388cff,refreshConfig(),await ensureTable();const _0x1c49db=await db[_0x48acf2(0x1f7)]('SELECT\x20val'+_0x48acf2(0x1df)+PREFS_TABLE+(_0x48acf2(0x1de)+_0x48acf2(0x20b)+'d\x27'));if(!_0x1c49db){info('['+name+(_0x48acf2(0x1f5)+'tting\x20foun'+'d.\x20Applyin'+_0x48acf2(0x22f)+'\x20from\x20conf'+_0x48acf2(0x21c)));const _0x10c484=typeof getConfig===_0x48acf2(0x1f2)?getConfig()||{}:{},_0x323297=_0x10c484[_0x48acf2(0x226)+_0x48acf2(0x1e4)]===!![]||_0x10c484[_0x48acf2(0x226)+_0x48acf2(0x1e4)]==='true';await setEnabledState(_0x323297),info('['+name+(_0x48acf2(0x230)+_0x48acf2(0x1dd)+'to\x20')+_0x323297+(_0x48acf2(0x213)+'ig.'));}rawMessageHandler=await createRawMessageHandler(),_0x388cff['on']('messages.u'+'psert',rawMessageHandler),info(name+(_0x48acf2(0x1da)+_0x48acf2(0x1ff)));}catch(_0x12b2c3){warn(name+(_0x48acf2(0x1c9)+_0x48acf2(0x220))+(_0x12b2c3?.[_0x48acf2(0x1f8)]||_0x12b2c3));throw _0x12b2c3;}}export async function cleanup(){const _0x23dc9f=_0x23413f;try{botRef&&typeof botRef[_0x23dc9f(0x211)]===_0x23dc9f(0x1f2)&&rawMessageHandler&&botRef[_0x23dc9f(0x211)](_0x23dc9f(0x1f4)+_0x23dc9f(0x203),rawMessageHandler),botRef=null,rawMessageHandler=null,info(name+(_0x23dc9f(0x1fd)+'p'));}catch(_0x42ee93){warn(name+(_0x23dc9f(0x1dc)+'rror:\x20')+(_0x42ee93?.[_0x23dc9f(0x1f8)]||_0x42ee93));}}