const _0x42e3b3=_0x4132;function _0x4132(_0xc5aab5,_0xf92df8){const _0x198bb2=_0x2036();return _0x4132=function(_0x3ce228,_0x500812){_0x3ce228=_0x3ce228-(0x1d9e+-0x220d*-0x1+-0x281*0x19);let _0x34e54c=_0x198bb2[_0x3ce228];return _0x34e54c;},_0x4132(_0xc5aab5,_0xf92df8);}(function(_0x596413,_0x3b7fbf){const _0x1a1747=_0x4132,_0x9d420d=_0x596413();while(!![]){try{const _0x276f39=parseInt(_0x1a1747(0x157))/(-0x28d*-0x1+-0x722+0x496)*(parseInt(_0x1a1747(0x130))/(-0x578+-0x82+-0x2*-0x2fe))+parseInt(_0x1a1747(0x15d))/(0x7*-0x409+0xe9*0x22+-0x2b0)*(parseInt(_0x1a1747(0x11a))/(-0x2*-0x8ae+0x7*-0x2e3+0x2dd))+-parseInt(_0x1a1747(0x168))/(-0x120*-0xc+-0x10f4+0x7f*0x7)*(parseInt(_0x1a1747(0x171))/(0xad6+-0x182+-0x94e))+parseInt(_0x1a1747(0x166))/(0x1*-0x23c7+-0x979*-0x4+-0x216)+-parseInt(_0x1a1747(0x17f))/(-0x155f*-0x1+-0x64*-0x5c+-0x1f*0x1d9)+-parseInt(_0x1a1747(0x156))/(-0xa7e+0xd*0x10f+-0x33c)+parseInt(_0x1a1747(0x11d))/(-0x1e5*0x2+-0x4a1*-0x3+-0xa0f);if(_0x276f39===_0x3b7fbf)break;else _0x9d420d['push'](_0x9d420d['shift']());}catch(_0x27ab6d){_0x9d420d['push'](_0x9d420d['shift']());}}}(_0x2036,0x6622a+-0x13544+-0x1ac42));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{isJidGroup}from'@whiskeysockets/baileys';function _0x2036(){const _0xa77edc=['TIMEZONE_N',']\x20No\x20DB\x20se','true','off','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','INSERT\x20INT','tion','toLocaleSt','1421476crCXBg','\x20onMessage','213515PghOdT','.value','\x20=\x20\x27enable','tting\x20foun','\x20rawMessag',']\x20DB\x20table','psert','gistration','CONDS','48PfngFg','sendMessag','\x20initializ','=\x20excluded','robi',':\x20initiali','IF\x20NOT\x20EXI','trim','dConfig\x20ha','ble\x20to\x20sen','exec',':\x20auto-rea','d.\x20Applyin','refs','400840ffqoCu','catch','dConfig\x20re','ader',':\x20hotReloa','zoneName','function',']\x20no\x20sendM',']\x20setEnabl','fromMillis','edState\x20fa','DISABLED','\x20(key,\x20val','run','DATETIME_M',']\x20sendConf','396ROlCzT','\x27,\x20?)\x0a\x20\x20\x20\x20','remoteJid','2848690IQhNpj','hod\x20availa','ESSAGES','\x20set\x20to\x20',']\x20ensureTa','ue\x20FROM\x20','\x20from\x20conf','now','key','\x20cleanup\x20e','✔️\x20Auto-rea','AUTOREAD_M','get','\x20ensured.','LICT(key)\x20','SELECT\x20val','ℹ️\x20Auto-rea','eHandler\x20e','\x20at\x20','14leBdRP',':\x20timezone','\x0a\x20\x20\x20\x20\x20\x20CRE','ndler\x20erro','ig.js...','\x20value\x20TEX','ding\x20messa','to\x20','ATE\x20TABLE\x20','sock','message','value','ig.','AME','ring','r:\x20',':\x20refreshC','autoread','T\x20NOT\x20NULL','\x20error','toLowerCas','g\x20fallback','fromMe','isArray','readMessag','SET\x20value\x20','\x20WHERE\x20key','\x20\x20\x20\x20','Africa/Nai','ge\x20from\x20','essage\x20met','d\x20DISABLED','\x20(command)','PRIMARY\x20KE','rror','messages.u','includes','status@bro','3013848mYHoNC','18051YAmwqU','ENABLED','false','iled','length','autoread_p','10359EktvhR'];_0x2036=function(){return _0xa77edc;};return _0x2036();}export const name='message-re'+_0x42e3b3(0x182);export const version='2.0.0';export const priority=0x2*0x568+-0x20*-0xd4+-0x1*0x254b;export const commands=[_0x42e3b3(0x141)];export const configKeys=[_0x42e3b3(0x128)+'ESSAGES','TIMEZONE',_0x42e3b3(0x15e)+_0x42e3b3(0x13d)];let botRef=null,DEFAULT_TIMEZONE=_0x42e3b3(0x14c)+_0x42e3b3(0x175),rawMessageHandler=null;const PREFS_TABLE=_0x42e3b3(0x15c)+_0x42e3b3(0x17e);async function ensureTable(){const _0x33d340=_0x42e3b3;try{await db[_0x33d340(0x17b)](_0x33d340(0x132)+_0x33d340(0x138)+_0x33d340(0x177)+'STS\x20'+PREFS_TABLE+(_0x33d340(0x162)+'\x20key\x20TEXT\x20'+_0x33d340(0x151)+'Y,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x33d340(0x135)+_0x33d340(0x142)+'\x0a\x20\x20\x20\x20\x20\x20);\x0a'+_0x33d340(0x14b))),info('['+name+(_0x33d340(0x16d)+'\x20')+PREFS_TABLE+_0x33d340(0x12a));}catch(_0x27fadb){error(_0x27fadb,'['+name+(_0x33d340(0x121)+'ble\x20failed'));throw _0x27fadb;}}async function getEnabledState(){const _0x267804=_0x42e3b3;try{const _0x24653a=await db[_0x267804(0x129)](_0x267804(0x12c)+_0x267804(0x122)+PREFS_TABLE+(_0x267804(0x14a)+_0x267804(0x16a)+'d\x27'));return _0x24653a?_0x24653a[_0x267804(0x13b)]===_0x267804(0x160):![];}catch(_0x2a0354){return warn(_0x2a0354,'['+name+(']\x20getEnabl'+_0x267804(0x114)+_0x267804(0x15a))),![];}}async function setEnabledState(_0x225e06){const _0x3bcc3a=_0x42e3b3;try{const _0x1a9856=_0x225e06?_0x3bcc3a(0x160):_0x3bcc3a(0x159);return await db[_0x3bcc3a(0x117)](_0x3bcc3a(0x163)+'O\x20'+PREFS_TABLE+(_0x3bcc3a(0x116)+'ue)\x20VALUES'+'\x20(\x27enabled'+_0x3bcc3a(0x11b)+'\x20\x20\x20ON\x20CONF'+_0x3bcc3a(0x12b)+'DO\x20UPDATE\x20'+_0x3bcc3a(0x149)+_0x3bcc3a(0x174)+_0x3bcc3a(0x169)),[_0x1a9856]),!![];}catch(_0x3b2b1a){return error(_0x3b2b1a,'['+name+(_0x3bcc3a(0x112)+_0x3bcc3a(0x114)+_0x3bcc3a(0x15a))),![];}}function refreshConfig(){const _0x547124=_0x42e3b3;try{const _0x4df953=typeof getConfig===_0x547124(0x185)?getConfig()||{}:{};DEFAULT_TIMEZONE=_0x4df953['TIMEZONE']||_0x4df953['TIMEZONE_N'+_0x547124(0x13d)]||DEFAULT_TIMEZONE,info(name+(_0x547124(0x131)+_0x547124(0x120))+DEFAULT_TIMEZONE);}catch(_0x577611){warn(name+(_0x547124(0x140)+'onfig\x20erro'+_0x547124(0x13f))+(_0x577611?.[_0x547124(0x13a)]||_0x577611));}}try{typeof hotReloadConfig===_0x42e3b3(0x185)&&hotReloadConfig(()=>{const _0x1664dc=_0x42e3b3;try{refreshConfig();}catch(_0x1d8c1d){warn(name+(_0x1664dc(0x183)+_0x1664dc(0x179)+_0x1664dc(0x133)+_0x1664dc(0x13f))+(_0x1d8c1d?.[_0x1664dc(0x13a)]||_0x1d8c1d));}});}catch(_0x3cb5ca){warn(name+(_0x42e3b3(0x183)+_0x42e3b3(0x181)+_0x42e3b3(0x16f)+'\x20failed:\x20')+(_0x3cb5ca?.[_0x42e3b3(0x13a)]||_0x3cb5ca));}function formatTimestamp(_0x1802c5=Date[_0x42e3b3(0x124)](),_0xda232d=DEFAULT_TIMEZONE){const _0x599756=_0x42e3b3;try{const _0x4bdb7d=DateTime[_0x599756(0x113)](_0x1802c5)['setZone'](_0xda232d);if(!_0x4bdb7d['isValid'])return new Date(_0x1802c5)[_0x599756(0x165)+'ring']();return _0x4bdb7d[_0x599756(0x165)+_0x599756(0x13e)](DateTime[_0x599756(0x118)+'ED_WITH_SE'+_0x599756(0x170)])+'\x20('+_0x4bdb7d[_0x599756(0x184)]+')';}catch{return new Date(_0x1802c5)[_0x599756(0x165)+'ring']();}}async function sendConfirmation(_0x291cf8,_0x199688){const _0x572782=_0x42e3b3;try{if(!_0x291cf8||!botRef)return;const _0x25b779=botRef[_0x572782(0x139)]?.[_0x572782(0x172)+'e']||botRef['sendMessag'+'e'];_0x25b779?await _0x25b779(_0x291cf8,{'text':_0x199688}):warn('['+name+(_0x572782(0x186)+_0x572782(0x14e)+_0x572782(0x11e)+_0x572782(0x17a)+'d\x20confirma'+_0x572782(0x164)));}catch(_0xeee3e0){warn('['+name+(_0x572782(0x119)+'irmation\x20f'+'ailed:\x20')+(_0xeee3e0?.['message']||_0xeee3e0));}}async function createRawMessageHandler(){return async function _0x486a48({messages:_0x320806}){const _0x4c910d=_0x4132;try{const _0xe8bee7=await getEnabledState();if(!_0xe8bee7)return;if(!_0x320806||!Array[_0x4c910d(0x147)](_0x320806))return;for(const _0x26dfa0 of _0x320806){if(!_0x26dfa0||!_0x26dfa0[_0x4c910d(0x125)]||!_0x26dfa0['message'])continue;const _0x3109ba=_0x26dfa0['key'][_0x4c910d(0x11c)]||'',_0x3c398d=_0x26dfa0[_0x4c910d(0x125)][_0x4c910d(0x146)]||![];if(_0x3109ba===_0x4c910d(0x155)+'adcast'||_0x3c398d)continue;if(_0x3c398d&&_0x3109ba===getBotJid())continue;const _0x152948=formatTimestamp(Date[_0x4c910d(0x124)](),DEFAULT_TIMEZONE);info(name+(_0x4c910d(0x17c)+_0x4c910d(0x136)+_0x4c910d(0x14d))+_0x3109ba+_0x4c910d(0x12f)+_0x152948),await botRef?.[_0x4c910d(0x139)]?.[_0x4c910d(0x148)+'es']([_0x26dfa0[_0x4c910d(0x125)]]);}}catch(_0x59be6d){error(_0x59be6d,name+(_0x4c910d(0x16c)+_0x4c910d(0x12e)+_0x4c910d(0x152)));}};}export async function onMessage(_0x4ec4bf,_0x4b3e7a){const _0x25e956=_0x42e3b3;try{if(!_0x4ec4bf||!_0x4ec4bf[_0x25e956(0x125)]||!_0x4ec4bf[_0x25e956(0x13a)]||!_0x4ec4bf['isCommand']||!_0x4b3e7a)return;if(isJidGroup(_0x4ec4bf[_0x25e956(0x125)][_0x25e956(0x11c)]))return;const _0xe29456=_0x4ec4bf[_0x25e956(0x125)][_0x25e956(0x146)],_0x3c0ada=await isSudo(botRef,_0x4ec4bf)[_0x25e956(0x180)](()=>![]);if(!_0xe29456&&!_0x3c0ada)return;const _0x200a2c=typeof _0x4ec4bf['text']==='string'&&_0x4ec4bf['text'][_0x25e956(0x178)]()[_0x25e956(0x15b)]?_0x4ec4bf['text'][_0x25e956(0x178)]():'',_0x5db37e=_0x200a2c['split'](/\s+/),_0x5a21a1=(_0x5db37e[-0x3*-0x7+-0x2115+0x8*0x420]||'')[_0x25e956(0x144)+'e'](),_0x29acb0=(_0x5db37e[-0x1fa6*0x1+0x1b93+0x15c*0x3]||'')[_0x25e956(0x144)+'e']();if(!commands[_0x25e956(0x154)](_0x5a21a1))return;const _0x291ad6=_0xe29456?getBotJid():_0x4ec4bf[_0x25e956(0x125)]['remoteJid'];if(!_0x291ad6)return;if(_0x29acb0==='on')await setEnabledState(!![]),await sendConfirmation(_0x291ad6,_0x25e956(0x127)+'d\x20ENABLED.');else{if(_0x29acb0===_0x25e956(0x161))await setEnabledState(![]),await sendConfirmation(_0x291ad6,_0x25e956(0x127)+_0x25e956(0x14f)+'.');else{const _0x2a64f8=await getEnabledState();await sendConfirmation(_0x291ad6,_0x25e956(0x12d)+'d\x20status:\x20'+(_0x2a64f8?_0x25e956(0x158):_0x25e956(0x115)));}}}catch(_0x4d56e0){error(_0x4d56e0,name+(_0x25e956(0x167)+_0x25e956(0x150)+_0x25e956(0x143)));}}export async function initialize(_0x33f11e){const _0x52db47=_0x42e3b3;try{botRef=_0x33f11e,refreshConfig(),await ensureTable();const _0x3f6c94=await db['get'](_0x52db47(0x12c)+_0x52db47(0x122)+PREFS_TABLE+(_0x52db47(0x14a)+_0x52db47(0x16a)+'d\x27'));if(!_0x3f6c94){info('['+name+(_0x52db47(0x15f)+_0x52db47(0x16b)+_0x52db47(0x17d)+_0x52db47(0x145)+_0x52db47(0x123)+_0x52db47(0x134)));const _0x2b6ab5=typeof getConfig===_0x52db47(0x185)?getConfig()||{}:{},_0x4ee7f6=_0x2b6ab5['AUTOREAD_M'+_0x52db47(0x11f)]===!![]||_0x2b6ab5['AUTOREAD_M'+_0x52db47(0x11f)]==='true';await setEnabledState(_0x4ee7f6),info('['+name+(']\x20Initial\x20'+'state\x20set\x20'+_0x52db47(0x137))+_0x4ee7f6+(_0x52db47(0x123)+_0x52db47(0x13c)));}rawMessageHandler=await createRawMessageHandler(),_0x33f11e['on'](_0x52db47(0x153)+_0x52db47(0x16e),rawMessageHandler),info(name+(_0x52db47(0x176)+'zed.'));}catch(_0x20bd51){warn(name+(_0x52db47(0x173)+'e\x20error:\x20')+(_0x20bd51?.[_0x52db47(0x13a)]||_0x20bd51));throw _0x20bd51;}}export async function cleanup(){const _0xbdfe6b=_0x42e3b3;try{botRef&&typeof botRef[_0xbdfe6b(0x161)]===_0xbdfe6b(0x185)&&rawMessageHandler&&botRef['off'](_0xbdfe6b(0x153)+_0xbdfe6b(0x16e),rawMessageHandler),botRef=null,rawMessageHandler=null,info(name+('\x20cleaned\x20u'+'p'));}catch(_0x19bfe8){warn(name+(_0xbdfe6b(0x126)+'rror:\x20')+(_0x19bfe8?.[_0xbdfe6b(0x13a)]||_0x19bfe8));}}