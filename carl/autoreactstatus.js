const _0x4c2ac7=_0x28ee;(function(_0x2cab4d,_0x55810d){const _0x7be05c=_0x28ee,_0x1b4897=_0x2cab4d();while(!![]){try{const _0xb7cb07=parseInt(_0x7be05c(0x1fa))/(0x26b8+0xb4*0x19+-0x1*0x384b)*(-parseInt(_0x7be05c(0x1fc))/(0x185*-0x2+-0x3*-0x801+0x1*-0x14f7))+parseInt(_0x7be05c(0x239))/(-0x166d+0xa73+-0x1f*-0x63)*(parseInt(_0x7be05c(0x213))/(0x10*0x1fc+0xd4e+0xa*-0x481))+-parseInt(_0x7be05c(0x166))/(-0x12a7*-0x1+-0x50f+-0xd93*0x1)*(-parseInt(_0x7be05c(0x1ef))/(-0xe*0xac+0x2*0x7db+-0x10c*0x6))+parseInt(_0x7be05c(0x23d))/(0x9d1*-0x3+-0x1*0xf7f+0x1*0x2cf9)+-parseInt(_0x7be05c(0x19f))/(-0x1799+0x18*0xf1+-0x35*-0x5)*(-parseInt(_0x7be05c(0x17b))/(0x1*0x1d1b+-0x1f1+0x90b*-0x3))+-parseInt(_0x7be05c(0x207))/(-0x10*0x3e+-0x8*-0x31c+0xa7b*-0x2)+-parseInt(_0x7be05c(0x1e7))/(-0xad*0x19+-0x3*-0x377+0x68b)*(parseInt(_0x7be05c(0x22a))/(-0x17*0x2d+0xfe0+-0xbc9));if(_0xb7cb07===_0x55810d)break;else _0x1b4897['push'](_0x1b4897['shift']());}catch(_0x382e08){_0x1b4897['push'](_0x1b4897['shift']());}}}(_0x370d,0x1780f+0x1e95e+0xf4e3));function _0x370d(){const _0x5b1274=['1112398HGgCbf','led=','te:\x20*','.upsert\x20ha','sed).\x20enab','AUTOREACT_','eply\x20to\x20ow','(\x27enabled\x27','refs\x27)','eactions:\x20','*AutoReact','abled=fals','Status\x20(PM','split','O\x20autoreac','[unknown]','conversati','AL_MS','valMs=','EXISTS\x20aut','umn','ed\x27\x20LIMIT\x20','\x20\x20updated_','[autoreact','enable','\x20DO\x20UPDATE',']\x20migrated','efs\x20WHERE\x20','isArray','llback\x20fai','25mqsqxz',']\x20failed\x20t','function','buttonsRes','table\x20auto',']\x20sendConf','sureTable)','\x20updated_a','\x0aTerminalR',',\x27false\x27,\x20','d\x20confirma','\x20SET\x20value',',\x20?,\x20?)\x0a\x20\x20','le_info(\x27a','has\x20no\x20col','off','ilable.','r:\x20','ialize\x20req','efault\x20ena','continue):','8604OLtqqX','_prefs:\x20ad','=excluded.','value','length','\x20on|enable','REACTIONS','imageMessa','status@bro','T\x20PRIMARY\x20','toLowerCas','map',']\x20cleaned\x20','autoReactS','true','updated_at','delete',']\x20created\x20','o\x20disable\x20','dated_at).','ENABLED','selectedRo','t)\x20VALUES\x20','trim','ror:\x20','ledToDb\x20fa','\x20status\x20\x20\x20',']\x20hot-relo',']\x20inner\x20ha','led:\x20','react_pref','autoreact','(DB\x20error)','ctReply','adcast','\x20off|disab','4376aHgOUj','ble\x20reacti','key=\x27enabl','oreact_pre','\x20available','\x27false\x27)','fs\x20(\x0a\x20\x20\x20\x20\x20','CREATE\x20TAB','1.2.0','FLICT(key)','disable','rval\x20(ms):','FAULT\x200','*\x0aMin\x20Inte','no\x20column','videoMessa','_USER','\x20insert\x20fa','is\x20not\x20ava','\x20failed:\x20','ponseMessa','STATUS','error:\x20','pdated_at\x20','ted_at\x20col','\x27enabled\x27,','cluded.upd','state/conf','t\x20user:\x20','uires\x20bot\x20','umn\x20(will\x20','-only)*\x0a\x0aC','DISABLED',']\x20fallback','SELECT\x20val','singleSele','e\x20error:\x20','ble\x20error:',']\x20Enabled.','instance','INTEGER\x20DE','ey,\x20value,','\x20\x20\x20\x20->\x20sho','ndler\x20erro','tatus','ner\x20becaus','\x20for\x20statu','\x20\x20\x20\x20ON\x20CON','s\x20reaction','usReaction','state','D\x20COLUMN\x20u','hod\x20availa',']\x20refreshC','ue\x20FROM\x20au','key','e\x20(fallbac',']\x20saveEnab','psert','\x20to\x20status','tuses\x0a',']\x20Failed\x20t','extendedTe','default\x20en',',\x20MinInter','ALTER\x20TABL','participan','message','xtMessage','run','iled:\x20','REPLACE\x20IN','3140995PqOUkL','false','utoreact_p','listRespon','ct_prefs\x20(','sendMessag','ledFromDb\x20','join','46902RIYcun','slice','\x20?)','floor','text','ng\x20to\x20stat','KEY,\x0a\x20\x20\x20\x20\x20','o\x20enable\x20(','isCommand',']\x20DB\x20initi','ledToDb\x20er','13UiJRkM','tatus.init','40190CFJvmw',']\x20ensure\x20d','ated_at=ex','sock',']\x20saved\x20en','ated_at','catch','wId','has','\x20(fallback','status','378920VSdWPe','MIN_INTERV','t_prefs\x20(k','ist','ailed:\x20','zed\x20(DB-ba','seMessage','urrent\x20Sta',']\x20hotReloa','messages.u','boolean','selectedBu','1844OHTomD','remoteJid','all','o\x20add\x20upda','\x20autoreact','irmation\x20f','toreact_pr','able\x20react',']\x20messages','caption','\x20\x20\x20value\x20T','INSERT\x20INT','INSERT\x20OR\x20','t_prefs\x20AD','includes',']\x20initiali',']\x20reacted\x20',']\x20no\x20sendM','now','\x0aIgnore\x20bo','only):\x0a','key,\x20value','uses\x0a','12KbmTAd','filter','e\x20bot\x20JID\x20','failed\x20(en','string','IGNORE_BOT','get','dConfig\x20re','statusJidL',']\x20sendStat','gistration','exec','essage\x20met','TO\x20autorea','E\x20autoreac','963PVWwge','essage\x20API','fromMe','value,\x20upd'];_0x370d=function(){return _0x5b1274;};return _0x370d();}import{info,warn}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name=_0x4c2ac7(0x188)+_0x4c2ac7(0x1cb);export const version=_0x4c2ac7(0x1a7);export const priority=0xaae+0x2*-0x446+-0x1d3;export const configKeys=['AUTOREACT_'+'STATUS'];export const commands=[_0x4c2ac7(0x19a)];const FALLBACKS={'MIN_INTERVAL_MS':0x1388,'REACTIONS':['🚀','🌎','♻️'],'IGNORE_BOT_USER':![]};let botRef=null,shuttingDown=![],lastReactionTime=-0x2*0xa75+0xdc4+0x726,messageHandler=null;const CFG={'MIN_INTERVAL_MS':FALLBACKS[_0x4c2ac7(0x208)+'AL_MS'],'REACTIONS':FALLBACKS['REACTIONS']['slice'](),'IGNORE_BOT_USER':FALLBACKS['IGNORE_BOT'+_0x4c2ac7(0x1af)]};function refreshConfig(){const _0x532c93=_0x4c2ac7;try{const _0x112f2d=getConfig()||{},_0x110494=_0x112f2d&&_0x112f2d['AUTOREACT_'+_0x532c93(0x1b4)]?_0x112f2d[_0x532c93(0x14d)+_0x532c93(0x1b4)]:{};CFG[_0x532c93(0x208)+_0x532c93(0x159)]=Number(_0x110494['MIN_INTERV'+'AL_MS'])||CFG['MIN_INTERV'+'AL_MS'],CFG['IGNORE_BOT'+'_USER']=typeof _0x110494[_0x532c93(0x22f)+_0x532c93(0x1af)]===_0x532c93(0x211)?_0x110494[_0x532c93(0x22f)+'_USER']:CFG[_0x532c93(0x22f)+_0x532c93(0x1af)];if(Array[_0x532c93(0x164)](_0x110494['REACTIONS'])&&_0x110494[_0x532c93(0x181)][_0x532c93(0x17f)]>0x141b+0x1dcf+0x1*-0x31ea)CFG['REACTIONS']=_0x110494[_0x532c93(0x181)][_0x532c93(0x1f0)]();else typeof _0x110494[_0x532c93(0x181)]===_0x532c93(0x22e)&&_0x110494[_0x532c93(0x181)]['trim']()[_0x532c93(0x17f)]>-0x1161+-0x1e54+-0x3b*-0xcf&&(CFG[_0x532c93(0x181)]=_0x110494[_0x532c93(0x181)][_0x532c93(0x155)](',')[_0x532c93(0x186)](_0x2195c0=>_0x2195c0[_0x532c93(0x192)]())[_0x532c93(0x22b)](Boolean));}catch(_0x574dce){warn('['+name+(_0x532c93(0x1d4)+'onfig\x20erro'+'r:\x20')+(_0x574dce?.[_0x532c93(0x1e2)]||_0x574dce));}}try{hotReloadConfig&&hotReloadConfig(()=>{const _0x167de8=_0x4c2ac7;refreshConfig(),info('['+name+(_0x167de8(0x196)+'aded\x20confi'+'g.'));});}catch(_0x1ebfe1){warn('['+name+(_0x4c2ac7(0x20f)+_0x4c2ac7(0x231)+_0x4c2ac7(0x234)+_0x4c2ac7(0x1b2))+(_0x1ebfe1?.[_0x4c2ac7(0x1e2)]||_0x1ebfe1));}refreshConfig();async function ensureTable(){const _0x4317ab=_0x4c2ac7;try{let _0x44d30c=[];try{const _0x4d5862=await db[_0x4317ab(0x215)]('PRAGMA\x20tab'+_0x4317ab(0x173)+_0x4317ab(0x1e9)+_0x4317ab(0x150));_0x44d30c=(_0x4d5862||[])['map'](_0x56b6ad=>_0x56b6ad['name']);}catch(_0x4a1148){_0x44d30c=[];}if(!_0x44d30c[_0x4317ab(0x17f)])await db[_0x4317ab(0x235)](_0x4317ab(0x1a6)+'LE\x20IF\x20NOT\x20'+_0x4317ab(0x15b)+_0x4317ab(0x1a2)+_0x4317ab(0x1a5)+'\x20\x20\x20key\x20TEX'+_0x4317ab(0x184)+_0x4317ab(0x1f5)+_0x4317ab(0x21d)+'EXT\x20NOT\x20NU'+'LL,\x0a\x20\x20\x20\x20\x20\x20'+_0x4317ab(0x15e)+'at\x20INTEGER'+'\x20DEFAULT\x200'+'\x0a\x20\x20\x20\x20\x20\x20);'),info('['+name+(_0x4317ab(0x18c)+_0x4317ab(0x16a)+_0x4317ab(0x199)+'s\x20(with\x20up'+_0x4317ab(0x18e))),_0x44d30c=[_0x4317ab(0x1d6),_0x4317ab(0x17e),_0x4317ab(0x18a)];else{if(!_0x44d30c['includes'](_0x4317ab(0x18a)))try{await db[_0x4317ab(0x1e4)](_0x4317ab(0x1e0)+_0x4317ab(0x238)+_0x4317ab(0x220)+_0x4317ab(0x1d2)+_0x4317ab(0x1b6)+_0x4317ab(0x1c7)+_0x4317ab(0x1ab)),info('['+name+(_0x4317ab(0x162)+_0x4317ab(0x217)+_0x4317ab(0x17c)+'ded\x20column'+_0x4317ab(0x16d)+'t.'));}catch(_0x463672){warn('['+name+(_0x4317ab(0x167)+_0x4317ab(0x216)+_0x4317ab(0x1b7)+_0x4317ab(0x1bd)+_0x4317ab(0x17a)+'\x20')+(_0x463672?.[_0x4317ab(0x1e2)]||_0x463672));}}try{const _0x5c4e43=await db[_0x4317ab(0x230)](_0x4317ab(0x1c1)+_0x4317ab(0x1d5)+_0x4317ab(0x219)+_0x4317ab(0x163)+'key=\x27enabl'+'ed\x27');if(!_0x5c4e43){const _0x4d6a72=Math[_0x4317ab(0x1f2)](Date[_0x4317ab(0x225)]()/(0x49*-0x29+-0x2395+0x332e));await db['run'](_0x4317ab(0x21e)+_0x4317ab(0x156)+_0x4317ab(0x209)+_0x4317ab(0x1c8)+'\x20updated_a'+_0x4317ab(0x191)+_0x4317ab(0x14f)+_0x4317ab(0x16f)+'?)',[_0x4d6a72]),info('['+name+(_0x4317ab(0x18c)+_0x4317ab(0x1de)+_0x4317ab(0x153)+'e'));}}catch(_0x3981ea){const _0x36f95f=String(_0x3981ea?.[_0x4317ab(0x1e2)]||'')[_0x4317ab(0x185)+'e']();if(_0x36f95f[_0x4317ab(0x221)](_0x4317ab(0x1ad))||_0x36f95f[_0x4317ab(0x221)]('has\x20no\x20col'+_0x4317ab(0x15c)))try{const _0x19c4db=Math['floor'](Date[_0x4317ab(0x225)]()/(0x1*-0x4f9+-0xebe+0x179f));await db['run'](_0x4317ab(0x21f)+_0x4317ab(0x1e6)+_0x4317ab(0x237)+_0x4317ab(0x1eb)+_0x4317ab(0x228)+')\x20VALUES\x20('+_0x4317ab(0x1b8)+_0x4317ab(0x1a4)),info('['+name+(']\x20created\x20'+_0x4317ab(0x1de)+_0x4317ab(0x153)+_0x4317ab(0x1d7)+'k\x20insert).'));}catch(_0x4dfc64){warn('['+name+(_0x4317ab(0x1c0)+_0x4317ab(0x1b0)+_0x4317ab(0x1e5))+(_0x4dfc64?.['message']||_0x4dfc64));}else warn('['+name+(_0x4317ab(0x1fd)+_0x4317ab(0x179)+'bled\x20row\x20f'+_0x4317ab(0x20b))+(_0x3981ea?.[_0x4317ab(0x1e2)]||_0x3981ea));}}catch(_0x24513b){warn('['+name+(']\x20ensureTa'+_0x4317ab(0x1c4)+'\x20')+(_0x24513b?.[_0x4317ab(0x1e2)]||_0x24513b));throw _0x24513b;}}async function readEnabledFromDb(){const _0x12cf4a=_0x4c2ac7;try{const _0xcd5f99=await db[_0x12cf4a(0x230)](_0x12cf4a(0x1c1)+_0x12cf4a(0x1d5)+'toreact_pr'+'efs\x20WHERE\x20'+_0x12cf4a(0x1a1)+_0x12cf4a(0x15d)+'1');if(!_0xcd5f99)return![];const _0x4952da=String(_0xcd5f99[_0x12cf4a(0x17e)])[_0x12cf4a(0x185)+'e']();return _0x4952da===_0x12cf4a(0x189)||_0x4952da==='1';}catch(_0x3fbfbe){return warn('['+name+(']\x20readEnab'+_0x12cf4a(0x1ed)+_0x12cf4a(0x1b5))+(_0x3fbfbe?.[_0x12cf4a(0x1e2)]||_0x3fbfbe)),![];}}async function saveEnabledToDb(_0x468d6a){const _0x38f318=_0x4c2ac7;try{const _0x35c3ce=_0x468d6a?_0x38f318(0x189):_0x38f318(0x1e8),_0x4b23bc=Math['floor'](Date[_0x38f318(0x225)]()/(0xa29+0x3*-0x7bf+-0x2*-0x87e));return await db[_0x38f318(0x1e4)](_0x38f318(0x21e)+_0x38f318(0x156)+_0x38f318(0x209)+'ey,\x20value,'+'\x20updated_a'+_0x38f318(0x191)+'(\x27enabled\x27'+_0x38f318(0x172)+_0x38f318(0x1ce)+_0x38f318(0x1a8)+_0x38f318(0x161)+_0x38f318(0x171)+_0x38f318(0x17d)+_0x38f318(0x23c)+_0x38f318(0x1fe)+_0x38f318(0x1b9)+_0x38f318(0x201),[_0x35c3ce,_0x4b23bc]),info('['+name+(']\x20saved\x20en'+'abled=')+_0x35c3ce),!![];}catch(_0x1b6f50){const _0x38be44=String(_0x1b6f50?.['message']||'')[_0x38f318(0x185)+'e']();if(_0x38be44[_0x38f318(0x221)](_0x38f318(0x174)+_0x38f318(0x15c))||_0x38be44[_0x38f318(0x221)](_0x38f318(0x1ad)))try{return await db['run']('INSERT\x20OR\x20'+'REPLACE\x20IN'+_0x38f318(0x237)+_0x38f318(0x1eb)+_0x38f318(0x228)+')\x20VALUES\x20('+'\x27enabled\x27,'+_0x38f318(0x1f1),[val]),info('['+name+(_0x38f318(0x200)+'abled=')+val+(_0x38f318(0x205)+'\x20without\x20u'+'pdated_at)')),!![];}catch(_0x52a862){return warn('['+name+(_0x38f318(0x1d8)+_0x38f318(0x194)+_0x38f318(0x165)+_0x38f318(0x198))+(_0x52a862?.[_0x38f318(0x1e2)]||_0x52a862)),![];}return warn('['+name+(']\x20saveEnab'+_0x38f318(0x1f9)+_0x38f318(0x193))+(_0x1b6f50?.[_0x38f318(0x1e2)]||_0x1b6f50)),![];}}function pickReactionEmoji(){const _0x1427ec=_0x4c2ac7;if(!Array[_0x1427ec(0x164)](CFG['REACTIONS'])||CFG[_0x1427ec(0x181)][_0x1427ec(0x17f)]===0x31*0x77+0x26*-0x107+0x1043)return null;return CFG[_0x1427ec(0x181)][Math[_0x1427ec(0x1f2)](Math['random']()*CFG[_0x1427ec(0x181)][_0x1427ec(0x17f)])];}async function sendStatusReaction(_0x5b0439,_0x3df1e9,_0x36be8d){const _0x56f4e3=_0x4c2ac7;if(!_0x5b0439||!_0x5b0439[_0x56f4e3(0x1d6)]||!_0x3df1e9)return![];const _0x5c9f6d=_0x5b0439[_0x56f4e3(0x1d6)]['remoteJid'],_0x13814b=_0x5b0439[_0x56f4e3(0x1d6)][_0x56f4e3(0x1e1)+'t'];try{const _0x3f6db2={};if(_0x13814b||_0x36be8d)_0x3f6db2[_0x56f4e3(0x232)+_0x56f4e3(0x20a)]=[_0x13814b,_0x36be8d]['filter'](Boolean);if(botRef&&botRef[_0x56f4e3(0x1ff)]&&typeof botRef[_0x56f4e3(0x1ff)][_0x56f4e3(0x1ec)+'e']===_0x56f4e3(0x168))return await botRef[_0x56f4e3(0x1ff)]['sendMessag'+'e'](_0x5c9f6d,{'react':{'key':_0x5b0439[_0x56f4e3(0x1d6)],'text':_0x3df1e9}},_0x3f6db2),!![];else return botRef&&typeof botRef[_0x56f4e3(0x1ec)+'e']===_0x56f4e3(0x168)?(await botRef[_0x56f4e3(0x1ec)+'e'](_0x5c9f6d,{'react':{'key':_0x5b0439[_0x56f4e3(0x1d6)],'text':_0x3df1e9}},_0x3f6db2),!![]):(warn('['+name+(_0x56f4e3(0x224)+_0x56f4e3(0x23a)+_0x56f4e3(0x1a3)+_0x56f4e3(0x1cd)+_0x56f4e3(0x1cf))),![]);}catch(_0x1e9362){return warn('['+name+(_0x56f4e3(0x233)+_0x56f4e3(0x1d0)+_0x56f4e3(0x1b2))+(_0x1e9362?.['message']||_0x1e9362)),![];}}function createMessageHandler(){return async function _0x1b5ad1(_0x3c5b5e){const _0x444f16=_0x28ee;try{if(shuttingDown)return;refreshConfig();const _0x3eaf62=await readEnabledFromDb();if(!_0x3eaf62)return;const {messages:_0x54f2d5}=_0x3c5b5e||{};if(!Array['isArray'](_0x54f2d5)||_0x54f2d5[_0x444f16(0x17f)]===0x2b4+-0x1*0x2ee+0x3a)return;const _0x2341d9=Date[_0x444f16(0x225)](),_0x363a86=getBotJid();if(!_0x363a86&&CFG[_0x444f16(0x22f)+_0x444f16(0x1af)])return;for(const _0x238ec7 of _0x54f2d5){try{if(!_0x238ec7||!_0x238ec7[_0x444f16(0x1d6)])continue;if(_0x238ec7[_0x444f16(0x1d6)][_0x444f16(0x214)]!==_0x444f16(0x183)+_0x444f16(0x19d))continue;if(_0x2341d9-lastReactionTime<Number(CFG[_0x444f16(0x208)+_0x444f16(0x159)]||FALLBACKS[_0x444f16(0x208)+_0x444f16(0x159)]))continue;const _0x1b1530=pickReactionEmoji();if(!_0x1b1530)continue;const _0x280309=await sendStatusReaction(_0x238ec7,_0x1b1530,_0x363a86);_0x280309&&(lastReactionTime=Date[_0x444f16(0x225)](),info('['+name+_0x444f16(0x223)+_0x1b1530+(_0x444f16(0x1da)+'\x20from\x20')+(_0x238ec7['key'][_0x444f16(0x1e1)+'t']||_0x444f16(0x157))),await new Promise(_0x4a0a7e=>setTimeout(_0x4a0a7e,-0x4*0x75f+-0x1*0x167a+0x35ea)));}catch(_0x57b308){warn('['+name+(_0x444f16(0x197)+'ndler\x20erro'+_0x444f16(0x177))+(_0x57b308?.[_0x444f16(0x1e2)]||_0x57b308));}}}catch(_0x3f33be){warn('['+name+(_0x444f16(0x21b)+_0x444f16(0x240)+_0x444f16(0x1ca)+_0x444f16(0x177))+(_0x3f33be?.['message']||_0x3f33be));}};}function _0x28ee(_0x55b9ee,_0x580e03){const _0x515216=_0x370d();return _0x28ee=function(_0x5b86e0,_0x3cb99d){_0x5b86e0=_0x5b86e0-(-0x21bd+0x84e+0xd5e*0x2);let _0x2541e9=_0x515216[_0x5b86e0];return _0x2541e9;},_0x28ee(_0x55b9ee,_0x580e03);}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(0x1f30*0x1+0x24b+-0x215d)*(-0x23c0+0x10d5+0x16d3);function markCmdProcessed(_0x1cb3a0){const _0x52dcba=_0x4c2ac7;if(!_0x1cb3a0)return;if(processedCmdKeys[_0x52dcba(0x204)](_0x1cb3a0))try{clearTimeout(processedCmdKeys['get'](_0x1cb3a0));}catch(_0x3162b6){};const _0x1b1866=setTimeout(()=>processedCmdKeys[_0x52dcba(0x18b)](_0x1cb3a0),CMD_DEDUPE_TTL_MS);processedCmdKeys['set'](_0x1cb3a0,_0x1b1866);}function isCmdProcessed(_0xa13e34){const _0x1a28dc=_0x4c2ac7;return _0xa13e34&&processedCmdKeys[_0x1a28dc(0x204)](_0xa13e34);}export async function onMessage(_0x5c4151){const _0x5b3298=_0x4c2ac7;try{if(!_0x5c4151||!_0x5c4151[_0x5b3298(0x1d6)]||!_0x5c4151['message']||!_0x5c4151[_0x5b3298(0x1f7)])return;if(isJidGroup(_0x5c4151[_0x5b3298(0x1d6)][_0x5b3298(0x214)]))return;const _0x61f2f0=_0x5c4151[_0x5b3298(0x1d6)][_0x5b3298(0x23b)],_0x4fafc5=await isSudo(botRef,_0x5c4151)[_0x5b3298(0x202)](()=>![]);if(!_0x61f2f0&&!_0x4fafc5)return;let _0x5ce06a;if(_0x61f2f0){_0x5ce06a=getBotJid();if(!_0x5ce06a){warn('['+name+(']\x20Cannot\x20r'+_0x5b3298(0x14e)+_0x5b3298(0x1cc)+_0x5b3298(0x22c)+_0x5b3298(0x1b1)+_0x5b3298(0x176)));return;}}else _0x5ce06a=_0x5c4151[_0x5b3298(0x1d6)][_0x5b3298(0x214)];const _0x5f4e1b=String(_0x5c4151['key'][_0x5b3298(0x214)]||'')+'::'+String(_0x5c4151[_0x5b3298(0x1d6)]['id']||_0x5c4151[_0x5b3298(0x1d6)][_0x5b3298(0x1e1)+'t']||'');if(isCmdProcessed(_0x5f4e1b))return;markCmdProcessed(_0x5f4e1b);const _0x46f0dc=typeof _0x5c4151[_0x5b3298(0x1f3)]==='string'&&_0x5c4151[_0x5b3298(0x1f3)][_0x5b3298(0x192)]()[_0x5b3298(0x17f)]?_0x5c4151[_0x5b3298(0x1f3)][_0x5b3298(0x192)]():function _0x26379c(_0x17b6bc){const _0x407b9f=_0x5b3298;if(!_0x17b6bc||!_0x17b6bc[_0x407b9f(0x1e2)])return'';const _0x5f141d=_0x17b6bc[_0x407b9f(0x1e2)];if(_0x5f141d[_0x407b9f(0x158)+'on'])return _0x5f141d[_0x407b9f(0x158)+'on'];if(_0x5f141d[_0x407b9f(0x1dd)+_0x407b9f(0x1e3)]?.['text'])return _0x5f141d[_0x407b9f(0x1dd)+_0x407b9f(0x1e3)][_0x407b9f(0x1f3)];if(_0x5f141d[_0x407b9f(0x182)+'ge']?.['caption'])return _0x5f141d['imageMessa'+'ge'][_0x407b9f(0x21c)];if(_0x5f141d[_0x407b9f(0x1ae)+'ge']?.[_0x407b9f(0x21c)])return _0x5f141d['videoMessa'+'ge'][_0x407b9f(0x21c)];if(_0x5f141d[_0x407b9f(0x169)+_0x407b9f(0x1b3)+'ge']?.[_0x407b9f(0x212)+'ttonId'])return _0x5f141d[_0x407b9f(0x169)+_0x407b9f(0x1b3)+'ge'][_0x407b9f(0x212)+'ttonId'];if(_0x5f141d['listRespon'+_0x407b9f(0x20d)]?.['singleSele'+_0x407b9f(0x19c)]?.[_0x407b9f(0x190)+_0x407b9f(0x203)])return _0x5f141d[_0x407b9f(0x1ea)+_0x407b9f(0x20d)][_0x407b9f(0x1c2)+'ctReply'][_0x407b9f(0x190)+_0x407b9f(0x203)];return'';}(_0x5c4151)||'';if(!_0x46f0dc)return;const _0x2c3e96=(_0x46f0dc[_0x5b3298(0x155)](/\r?\n/)[0x5*0x6d+-0x18ef+-0x6*-0x3cd]||'')[_0x5b3298(0x192)](),_0x26801a=_0x2c3e96[_0x5b3298(0x155)](/\s+/),_0xbf0ade=(_0x26801a[-0x1a0+0xa*0x9b+-0x46e]||'')[_0x5b3298(0x185)+'e']();if(!commands['includes'](_0xbf0ade))return;const _0x56c9d2=(_0x26801a[-0x1b58+0xa*0x3c1+0xa31*-0x1]||'')['toLowerCas'+'e']();if(['on',_0x5b3298(0x160),_0x5b3298(0x189),'1'][_0x5b3298(0x221)](_0x56c9d2)){const _0x57df00=await saveEnabledToDb(!![]);if(_0x57df00)await sendConfirmation(_0x5ce06a,_0x5b3298(0x15f)+_0x5b3298(0x1c5));else await sendConfirmation(_0x5ce06a,'[autoreact'+']\x20Failed\x20t'+_0x5b3298(0x1f6)+'DB\x20error).');return;}if([_0x5b3298(0x175),_0x5b3298(0x1a9),'false','0'][_0x5b3298(0x221)](_0x56c9d2)){const _0x5c49d6=await saveEnabledToDb(![]);if(_0x5c49d6)await sendConfirmation(_0x5ce06a,_0x5b3298(0x15f)+']\x20Disabled'+'.');else await sendConfirmation(_0x5ce06a,_0x5b3298(0x15f)+_0x5b3298(0x1dc)+_0x5b3298(0x18d)+_0x5b3298(0x19b)+'.');return;}if(_0x56c9d2===_0x5b3298(0x206)||_0x56c9d2===_0x5b3298(0x1d1)||!_0x56c9d2){const _0x5b1f45=await readEnabledFromDb(),_0x2ef615=_0x5b1f45?_0x5b3298(0x18f):_0x5b3298(0x1bf);await sendConfirmation(_0x5ce06a,_0x5b3298(0x152)+_0x5b3298(0x154)+_0x5b3298(0x1be)+_0x5b3298(0x20e)+_0x5b3298(0x23f)+_0x2ef615+(_0x5b3298(0x1ac)+_0x5b3298(0x1aa)+'\x20')+CFG[_0x5b3298(0x208)+_0x5b3298(0x159)]+(_0x5b3298(0x16e)+_0x5b3298(0x151))+CFG[_0x5b3298(0x181)][_0x5b3298(0x1ee)]('\x20')+(_0x5b3298(0x226)+_0x5b3298(0x1bb))+CFG[_0x5b3298(0x22f)+_0x5b3298(0x1af)]);return;}await sendConfirmation(_0x5ce06a,'Usage\x20(PM\x20'+_0x5b3298(0x227)+('\x20autoreact'+_0x5b3298(0x180)+'\x20\x20\x20\x20->\x20ena'+_0x5b3298(0x1a0)+_0x5b3298(0x1f4)+_0x5b3298(0x229))+('\x20autoreact'+_0x5b3298(0x19e)+'le\x20\x20->\x20dis'+_0x5b3298(0x21a)+'ing\x20to\x20sta'+_0x5b3298(0x1db))+('\x20autoreact'+_0x5b3298(0x195)+_0x5b3298(0x1c9)+'w\x20current\x20'+_0x5b3298(0x1ba)+'ig'));}catch(_0x324871){warn('['+name+(']\x20onMessag'+_0x5b3298(0x1c3))+(_0x324871?.[_0x5b3298(0x1e2)]||_0x324871));}}async function sendConfirmation(_0x2e944e,_0x1e07da){const _0x64c9c4=_0x4c2ac7;try{if(!_0x2e944e)return;if(botRef&&botRef[_0x64c9c4(0x1ff)]&&typeof botRef['sock'][_0x64c9c4(0x1ec)+'e']==='function')await botRef[_0x64c9c4(0x1ff)][_0x64c9c4(0x1ec)+'e'](_0x2e944e,{'text':_0x1e07da});else botRef&&typeof botRef[_0x64c9c4(0x1ec)+'e']===_0x64c9c4(0x168)?await botRef[_0x64c9c4(0x1ec)+'e'](_0x2e944e,{'text':_0x1e07da}):warn('['+name+(_0x64c9c4(0x224)+_0x64c9c4(0x236)+_0x64c9c4(0x1d3)+'ble\x20to\x20sen'+_0x64c9c4(0x170)+'tion'));}catch(_0x29a1c2){warn('['+name+(_0x64c9c4(0x16b)+_0x64c9c4(0x218)+_0x64c9c4(0x20b))+(_0x29a1c2?.[_0x64c9c4(0x1e2)]||_0x29a1c2));}}export async function initialize(_0x4d4bb){const _0xbb4252=_0x4c2ac7;if(!_0x4d4bb)throw new Error(_0xbb4252(0x188)+_0xbb4252(0x1fb)+_0xbb4252(0x178)+_0xbb4252(0x1bc)+_0xbb4252(0x1c6));botRef=_0x4d4bb,shuttingDown=![],refreshConfig(),await ensureTable()[_0xbb4252(0x202)](_0x7c8887=>{const _0x21f775=_0xbb4252;warn('['+name+(_0x21f775(0x1f8)+'alization\x20'+_0x21f775(0x22d)+_0x21f775(0x16c)+':\x20')+(_0x7c8887?.[_0x21f775(0x1e2)]||_0x7c8887));});const _0x41a4c5=await readEnabledFromDb();messageHandler=createMessageHandler(),startManagedListener({'botRef':botRef,'eventName':_0xbb4252(0x210)+_0xbb4252(0x1d9),'handler':messageHandler,'moduleName':name}),info('['+name+(_0xbb4252(0x222)+_0xbb4252(0x20c)+_0xbb4252(0x241)+_0xbb4252(0x23e))+(_0x41a4c5?'true':_0xbb4252(0x1e8))+(_0xbb4252(0x1df)+_0xbb4252(0x15a))+CFG['MIN_INTERV'+_0xbb4252(0x159)]+(',\x20reaction'+'s=')+CFG[_0xbb4252(0x181)][_0xbb4252(0x1ee)]('\x20'));}export async function cleanup(){const _0x374993=_0x4c2ac7;try{stopManagedListener(name,_0x374993(0x210)+_0x374993(0x1d9)),shuttingDown=!![],lastReactionTime=0x226c+0x2466+0x23*-0x206,messageHandler=null;}catch(_0x701141){warn('['+name+(']\x20cleanup\x20'+_0x374993(0x1b5))+(_0x701141?.['message']||_0x701141));}finally{botRef=null,info('['+name+(_0x374993(0x187)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};