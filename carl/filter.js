const _0x5044f3=_0x4421;(function(_0x154061,_0x3bb824){const _0x1e5544=_0x4421,_0x19de9b=_0x154061();while(!![]){try{const _0x49e00f=-parseInt(_0x1e5544(0x20a))/(0x7fc+-0xf*-0x27e+-0x15*0x229)*(parseInt(_0x1e5544(0x1d1))/(0x9*-0x59+-0x1f3e+0x2261))+parseInt(_0x1e5544(0x1c0))/(-0x224f+-0x157e+0x37d0)+-parseInt(_0x1e5544(0x1ff))/(0x1257+0x6*0x295+-0x313*0xb)*(parseInt(_0x1e5544(0x123))/(-0x392+-0xdda+0x1171))+-parseInt(_0x1e5544(0x15a))/(0x21f9*-0x1+0xe*0x2c7+-0x4e3*0x1)+parseInt(_0x1e5544(0x17b))/(-0x2*-0x79a+-0x192e+0xa01)*(-parseInt(_0x1e5544(0xa7))/(-0x5af+-0x114b+0x1702))+parseInt(_0x1e5544(0x1c2))/(0x1b8a+0x13b3*-0x1+-0x7ce)+parseInt(_0x1e5544(0x1df))/(0x565*0x1+-0x2173*-0x1+0x1367*-0x2);if(_0x49e00f===_0x3bb824)break;else _0x19de9b['push'](_0x19de9b['shift']());}catch(_0x1e7714){_0x19de9b['push'](_0x19de9b['shift']());}}}(_0x3f1f,0x7603*0xf+0x3*-0x38f52+0xabeda));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x3d8a44 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x5044f3(0x15b);export const version=_0x5044f3(0x21f);export const priority=-0x23bd+0xbe6+0x1*0x184f;export const configKeys=[_0x5044f3(0x8d)];export const commands=[_0x5044f3(0x15b),'glistfilte'+'r',_0x5044f3(0x1a3),'gdelfilter'+'s',_0x5044f3(0x9a)];function clampTypingMs(_0x523e89){const _0x2b7234=_0x5044f3,_0x2bd26d=Number(_0x523e89);if(!Number[_0x2b7234(0x14d)](_0x2bd26d)||isNaN(_0x2bd26d))return-0x1635+0xdce+-0xef*-0x9;if(_0x2bd26d<=0x22be+-0x4*0x79b+-0x452)return-0x2016+-0x6d1*-0x3+0x9*0x14b;if(_0x2bd26d>0x669e+-0x5*0x187+-0x2463)return-0x1f4c+0x307f+0x2965;return Math['floor'](_0x2bd26d);}function sleep(_0x26f02d){return new Promise(_0x129d33=>setTimeout(_0x129d33,_0x26f02d));}async function simulateTypingAndWait(_0x48fe6e,_0x266ade,_0x42314e){const _0x53ecf6=_0x5044f3;if(!_0x42314e||_0x42314e<=0x962+0x1747+0x1*-0x20a9)return;try{if(_0x48fe6e&&typeof _0x48fe6e[_0x53ecf6(0x1fb)+_0x53ecf6(0xd9)]===_0x53ecf6(0x156))try{await _0x48fe6e[_0x53ecf6(0x1fb)+_0x53ecf6(0xd9)](_0x53ecf6(0x221),_0x266ade);}catch(_0x30dd4d){}}catch(_0x1d8a1a){}try{await sleep(_0x42314e);}catch(_0x1d7bdb){}try{if(_0x48fe6e&&typeof _0x48fe6e[_0x53ecf6(0x1fb)+_0x53ecf6(0xd9)]==='function')try{await _0x48fe6e['sendPresen'+_0x53ecf6(0xd9)](_0x53ecf6(0x1a8),_0x266ade);}catch(_0x4f19e9){}}catch(_0x47a80d){}}function ensureArray(_0x5f335c){const _0x562633=_0x5044f3;if(!_0x5f335c)return[];if(Array[_0x562633(0x219)](_0x5f335c))return _0x5f335c;return[String(_0x5f335c)];}function uniqArray(_0x238a36){const _0x59b1a8=_0x5044f3,_0x2a5d0f=new Set(),_0x560c2f=[];for(const _0x271aba of _0x238a36){const _0x70e328=String(_0x271aba||'')[_0x59b1a8(0x1d0)]();if(!_0x70e328)continue;!_0x2a5d0f['has'](_0x70e328)&&(_0x2a5d0f[_0x59b1a8(0x1b5)](_0x70e328),_0x560c2f[_0x59b1a8(0x1a1)](_0x70e328));}return _0x560c2f;}function escapeRegex(_0xc1a74c){const _0x5f1018=_0x5044f3;return _0xc1a74c[_0x5f1018(0x113)](/[.*+?^${}()|[\]\\]/g,_0x5f1018(0x116));}function wildcardToRegexPattern(_0x42e275){const _0x433f17=_0x5044f3,_0x148bef=_0x42e275['split']('*')[_0x433f17(0x181)](_0x18e5b2=>escapeRegex(_0x18e5b2));return'\x5cb'+_0x148bef[_0x433f17(0x17a)]('\x5cw*')+'\x5cb';}function clampConfigTypingMs(){const _0x16cec3=_0x5044f3;try{const _0x3e3156=getConfig()||{},_0xaffae5=_0x3e3156[_0x16cec3(0x8d)]&&typeof _0x3e3156[_0x16cec3(0x8d)]==='object'?_0x3e3156[_0x16cec3(0x8d)]:{};return clampTypingMs(_0xaffae5[_0x16cec3(0x195)+_0x16cec3(0x91)]);}catch(_0x208704){return-0x13f4+0x1fa8+-0xbb4;}}let botRef=null,sendApi=null;async function sendText(_0x50a710,_0x583f8f,_0x373d22,_0x3b28c8){const _0x58e0cb=_0x5044f3;let _0xedc6f5=null,_0xb16359=null,_0x3dfc6f=null,_0x270321=[];_0x50a710&&typeof _0x50a710===_0x58e0cb(0x11e)&&_0x50a710[_0x58e0cb(0x1dd)]&&_0x50a710[_0x58e0cb(0x1bc)]?(_0xedc6f5=_0x50a710,_0xb16359=_0x583f8f,_0x3dfc6f=_0x373d22,_0x270321=Array['isArray'](_0x3b28c8)?_0x3b28c8:[]):(_0xb16359=_0x50a710,_0x3dfc6f=_0x583f8f,_0x270321=Array[_0x58e0cb(0x219)](_0x373d22)?_0x373d22:[]);if(!_0x3dfc6f)return;if(!_0xb16359){warn(_0x58e0cb(0x14f)+_0x58e0cb(0xdb)+'alled\x20with'+_0x58e0cb(0x134)+_0x58e0cb(0x1ee));return;}const _0x3b35b8={'text':String(_0x3dfc6f)};if(Array['isArray'](_0x270321)&&_0x270321[_0x58e0cb(0x9c)])_0x3b35b8[_0x58e0cb(0xa9)]=_0x270321;try{if(!sendApi){warn('[gfilter]\x20'+_0x58e0cb(0xb9)+'\x20available');return;}const _0x50fa07=clampConfigTypingMs();if(_0x50fa07>0x4*0xb2+0x106b+-0x5*0x3d7)try{await simulateTypingAndWait(botRef?.[_0x58e0cb(0x154)],_0xb16359,_0x50fa07);}catch(_0x390e8e){warn('[gfilter]\x20'+_0x58e0cb(0x155)+_0x58e0cb(0xe9)+_0x58e0cb(0x13b)+(_0x390e8e?.[_0x58e0cb(0x1bc)]||_0x390e8e));}if(_0xedc6f5&&typeof _0xedc6f5[_0x58e0cb(0x1cf)]===_0x58e0cb(0x156))try{await _0xedc6f5[_0x58e0cb(0x1cf)]({'text':String(_0x3dfc6f),'mentions':_0x3b35b8['mentions']||[]});return;}catch(_0x3c5b26){try{await sendApi(_0xb16359,_0x3b35b8);return;}catch(_0xd3c99f){warn(_0x58e0cb(0x14f)+_0x58e0cb(0xb6)+_0x58e0cb(0x18d)+_0x58e0cb(0x159)+_0x58e0cb(0x1ad)+_0x58e0cb(0x1d9)+':\x20'+(_0xd3c99f?.[_0x58e0cb(0x1bc)]||_0xd3c99f));return;}}try{await sendApi(_0xb16359,_0x3b35b8);}catch(_0x167358){warn(_0x58e0cb(0x14f)+_0x58e0cb(0x14e)+_0x58e0cb(0x214)+_0xb16359+':\x20'+(_0x167358?.[_0x58e0cb(0x1bc)]||_0x167358));}}catch(_0xb514b9){warn('[gfilter]\x20'+_0x58e0cb(0x186)+_0x58e0cb(0xcb)+'error:\x20'+(_0xb514b9?.[_0x58e0cb(0x1bc)]||_0xb514b9));}}async function tableExists(_0x422e1b){const _0x5976f1=_0x5044f3;try{const _0x257159=await db[_0x5976f1(0x177)](_0x5976f1(0xab)+_0x5976f1(0x67)+_0x5976f1(0x190)+'\x20WHERE\x20typ'+_0x5976f1(0x92)+_0x5976f1(0x137),[_0x422e1b]);return!!_0x257159;}catch(_0x25f048){return warn(_0x5976f1(0x14f)+'tableExist'+_0x5976f1(0x15e)+(_0x25f048?.[_0x5976f1(0x1bc)]||_0x25f048)),![];}}function _0x3f1f(){const _0x99862e=['out\x20target','CREATE\x20TAB','Saved\x20','AND\x20name=?','default):\x0a','llback','argets','t\x20error:\x20','EGER\x20DEFAU','keywords','\x20target\x20gr','Unknown\x20gp','tingFilter','@g.us','removed:\x20','\x22\x20->\x20','toLowerCas','<trigger1,','tries\x20acro','irmation','hat\x20ON\x20fil','MatchFromF','ly\x20include','n(s).\x20Use\x20','er\x20trigger','isFinite','sendText\x20f','[gfilter]\x20','RESPONSE_M','ue\x20ON\x20filt','ur\x20default','has','sock','simulateTy','function','jid','lters_new\x20','fter\x20reply','2949780DmaoGR','gfilter','QUE\x20INDEX\x20','PRAGMA\x20tab','s\x20error:\x20','SELECT\x20res','hat_jid,\x20t','getBotJid(','split','_at)\x0a\x20\x20\x20\x20\x20',':\x20\x22','ids','_by\x20=\x20excl','response1\x0a','regex:','ROM\x20filter','\x20chat_jid\x20','t\x20connecti','\x20);','ters_new\x20(','elfilter\x20a','create','EMENT,\x0a\x20\x20\x20','\x20\x20\x20\x20\x20\x20);\x0a\x20','without\x20UN','output','ters\x20SET\x20r','o\x20backup','\x20filter\x20en','get','text','id,\x20trigge','join','8218Zwtrnj','DB)','\x20detected\x20','ALTER\x20TABL','R\x20BY\x20trigg','Usage:\x20gde','map','normalizeT','getUniqueJ','resolveNam','integrated','sendText\x20u','ed_by,\x0a\x20\x20\x20','CREATE\x20UNI','er:\x20\x22','DELETE\x20FRO','INSERT\x20INT','FAULT\x200','are\x20send\x20a','ponses,\x20rr','L\x20DEFAULT\x20','ite_master','values','\x22.\x20Use\x20gro','changes','splice','TYPING_SIM','ID.','TEXT\x20DEFAU','er\x20failed\x20','\x20DEFAULT\x200','delete\x20all','r\x20for\x20','STS\x20idx_fi','tries\x20from','\x20\x20\x20\x20rr_ind','r);','invalid\x20st','push','nodes','gdelfilter','Deleted\x20','onical\x20sch','endsWith','pickRespon','paused','table\x20(can','seAndAdvan','\x20rr_index,','triggers','\x20failure\x20a','er,\x20chat_j','build','ase.\x20Rows\x20','malizeExis','for\x20','run','ALUES\x20(?,\x20','add','chat_jid','from\x20datab','!response2','trigger2>\x0a','post-swap\x20','set','message','as|jid|all','ULT\x20\x27\x27,\x0a\x20\x20','AUTOINCREM','2649702GVQHSq','\x20everythin','3985947XXAWaO','le_info(','from','\x20gp:\x20<grou','catch','substring','NOT\x20NULL,\x0a','XT\x20NOT\x20NUL','chat','ll\x20\x20\x20(ERAS','keys','value','random','reply','trim','6DfyClg','unique\x20idx','max','saved\x20filt','PRIMARY\x20KE','ters(chat_','on(s):\x20','filters','lso\x20failed','trigger1,t','ODE','idx\x20create','key','\x20[gp:\x20<ali','14933170YPSRBR','ters\x20table','finalize','fault\x20conn','ES\x20ALL\x20fil','loaded\x20','y,\x20created','_filters_c','sendMessag','responses,','tries\x20to\x20y','ULL\x20DEFAUL','ers(chat_j','xcluded.cr','r_index\x20=\x20','Jid','index','a\x20line\x20`gp','Failed\x20to\x20','search','trimStart','ters\x20from\x20','(trigger,\x20','oup(s).','\x20\x20\x20\x20\x20\x20chat','getAutomat','initialize','\x20=\x20?\x20LIMIT','sendPresen',')\x20returned','\x20\x20\x20\x20UNIQUE','GLOBAL\x20(al','532328QzDbnT','\x0a\x20gfilter\x20','lling\x20back','singleSele','filters_ba','rr_index\x20i','all','roundrobin','buttonsRes','created\x20ne','lfilter\x20tr','172845CIEtYx','s\x20table','(rr_index\x20','prepare','ng\x20safe\x20mi','SELECT\x20DIS','resolve\x20yo','.\x20Please\x20c','keyword','\x20trigger)\x0a','ailed\x20to\x20','Usage\x20(PM)','_jid\x20TEXT\x20','id|all>`\x20t','insert\x20nor','isArray','k\x20matching','=\x20?\x20AND\x20tr','igger1,tri','PRAGMA\x20for','eign_keys\x20','2.2.0','ema)','composing','ex\x20INTEGER','d\x20(sudo\x20+\x20','e\x20FROM\x20sql','t_jid,\x20tri','remoteJid','\x27[]\x27,\x0a\x20\x20\x20\x20','xtMessage','sponses\x20TE','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','heck\x20/setd','findings','ed_by,\x20cre','\x20created_b','clear','listTrigge','sort','added\x20miss','REATE\x20TABL','\x20\x20UNIQUE(c','ND\x20trigger','seMessage','w\x20filters\x20','now','caption','\x20failed:\x20','ADD\x20COLUMN','\x20filter(s)','jid);','\x0aOptionall','readAndNor','\x20\x20\x20\x20\x20\x20crea','or\x20','\x20\x20VALUES\x20(','new\x20RENAME','\x20for\x20chat\x20','parse','l>]\x0aOr:\x20gd','M\x20filters','lters_uniq','ger\x20FROM\x20f','FILTERS','onForChat\x20','s\x20a\x20full\x20J','ers\x20failed','_MS','e=\x27table\x27\x20','conversati','isCommand','oUserJid','word','ror:\x20','-\x20performi','ing\x20column','gdelf','participan','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','+\x201)\x20WHERE','fromMe','includes','ted_at\x20=\x20e','y\x20include\x20','EXISTS\x20idx','igger\x20=\x20?','d\x20for\x20conf','ored\x20regex','5584jdgXAL','ctReply','mentions','dex,\x20creat','SELECT\x20nam','multiple\x20t','\x20\x20\x20\x20\x20\x20\x20\x20re','our\x20defaul','ailed:\x20','\x20to\x20filter','stringify','created_by','UPDATE\x20fil','\x20\x20\x20\x20\x20ON\x20CO','s\x20failed:\x20','fallback\x20b','indings\x20er','O\x20filters_','no\x20sendApi','find','INTEGER\x20DE','IF\x20NOT\x20EXI','adding\x20col','deleteFilt','rr_index','ULL','startsWith','and\x20GLOBAL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20i','string','glistfilte','created_at','Could\x20not\x20','L\x20filters\x20','upsertFilt','migration\x20','nexpected\x20','\x20fatal','phrase','Usage\x20(PM\x20',':\x20gdelfilt','swap\x20table','eated_at;','chatid','floor','chat_id','RE\x20chat_ji','\x20old\x20table','d|alias|al','selectedBu','ceUpdate','NFLICT(cha','sendText\x20c','ilters\x20WHE','name','slice','extendedTe','LE\x20IF\x20NOT\x20','EXISTS\x20fil','filter','Deleted\x20AL','shift','ted_at\x20INT','rsForChat\x20','esponses\x20=','uded.creat','pingAndWai','entries','TEXT\x20NOT\x20N','O\x20filters\x20','\x20alias/jid','listRespon','body','exec','CREATE\x20IND','trig','Usage\x20(gro','l\x20groups)','rigger2>\x0a!','lfilter\x20al','T\x20\x27[]\x27','ses,\x20rr_in','idx:\x20','rom\x20','ce\x20error:\x20','Y\x20AUTOINCR','replies',':\x20<alias|j','fail','next','(\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20@\x20','concat','=\x20OFF;','d\x20IN\x20(?,\x20?','gration','g\x20globally',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','LT\x200,\x0a\x20\x20\x20\x20','T\x20NULL,\x0a\x20\x20','some','RENAME\x20TO\x20','legacy\x20fil','ncrement\x20f','imageMessa','Handler\x20er','EX\x20IF\x20NOT\x20','d\x20INTEGER\x20','replace','\x20filters\x20f','LT\x20\x27\x27','\x5c$&','\x20\x20\x20\x20\x20','author','\x20\x20\x20\x20\x20\x20);','\x0a!response','_jid\x20=\x20?\x20A','M\x20filters\x20','INTEGER\x20PR','object','failed\x20for','E\x20filters\x20','\x20gfilter\x20<','responses','20deNujc','efault\x20val','rigger)\x0a\x20\x20','selectedRo','\x20\x20\x20\x20\x20trigg','ection(s):','ups\x20helper','videoMessa','TINCT\x20trig','delete','test','\x20TEXT\x20DEFA','trigger','\x20\x20\x20\x20\x20\x20\x20\x20\x20r','every','er\x20TEXT\x20NO','2\x0aOptional'];_0x3f1f=function(){return _0x99862e;};return _0x3f1f();}async function getTableColumns(_0x33acc5){const _0x5d3bdf=_0x5044f3;try{const _0x26e66e=await db[_0x5d3bdf(0x205)](_0x5d3bdf(0x15d)+_0x5d3bdf(0x1c3)+_0x33acc5+')');return(_0x26e66e||[])[_0x5d3bdf(0x181)](_0xa819ed=>_0xa819ed[_0x5d3bdf(0xdd)]);}catch(_0x13e5be){return warn(_0x5d3bdf(0x14f)+'getTableCo'+'lumns\x20erro'+_0x5d3bdf(0x19b)+_0x33acc5+':\x20'+(_0x13e5be?.[_0x5d3bdf(0x1bc)]||_0x13e5be)),[];}}function resolveChatJidFromRow(_0x5aa73f){const _0x151a5a=_0x5044f3,_0x57ccd3=[_0x151a5a(0x1b6),_0x151a5a(0xd2),_0x151a5a(0xd4),_0x151a5a(0x157),_0x151a5a(0x1ca),'room'];for(const _0x2f307f of _0x57ccd3)if(_0x2f307f in _0x5aa73f&&_0x5aa73f[_0x2f307f])return String(_0x5aa73f[_0x2f307f]);for(const _0x4a5d5b of Object['keys'](_0x5aa73f)){const _0x202b75=_0x5aa73f[_0x4a5d5b];if(typeof _0x202b75===_0x151a5a(0xc4)&&_0x202b75[_0x151a5a(0xa0)]('@'))return _0x202b75;}return null;}function resolveTriggerFromRow(_0x43fd83){const _0x260173=_0x5044f3,_0x24f7d8=[_0x260173(0x12f),_0x260173(0xf2),'keyword',_0x260173(0x96),_0x260173(0xcd)];for(const _0x2fc198 of _0x24f7d8)if(_0x2fc198 in _0x43fd83&&_0x43fd83[_0x2fc198])return String(_0x43fd83[_0x2fc198]);for(const _0x4c08b9 of Object[_0x260173(0x1cc)](_0x43fd83)){const _0x32e199=_0x43fd83[_0x4c08b9];if(typeof _0x32e199==='string'&&!_0x32e199[_0x260173(0xa0)]('@')&&_0x32e199[_0x260173(0x9c)]<0x3*-0x90+0x168b+-0x13af)return _0x32e199;}return null;}function resolveResponsesFromRow(_0x6e4dcd){const _0x15ef2e=_0x5044f3,_0x41203f=[_0x15ef2e(0x122),'response','reply',_0x15ef2e(0xfd),_0x15ef2e(0xef),_0x15ef2e(0x1cd),_0x15ef2e(0x1bc)];for(const _0x1b5ff3 of _0x41203f)if(_0x1b5ff3 in _0x6e4dcd&&_0x6e4dcd[_0x1b5ff3]!=null)return _0x6e4dcd[_0x1b5ff3];for(const _0x4cea62 of Object[_0x15ef2e(0x1cc)](_0x6e4dcd)){const _0x461beb=_0x6e4dcd[_0x4cea62];if(typeof _0x461beb==='string'&&(_0x461beb[_0x15ef2e(0x1d0)]()['startsWith']('!')||_0x461beb[_0x15ef2e(0x1d0)]()[_0x15ef2e(0xa0)]('\x0a')||_0x461beb[_0x15ef2e(0x1d0)]()['startsWith']('[')))return _0x461beb;}return null;}async function readAndNormalizeExistingFilters(){const _0x8b9fdf=_0x5044f3;try{const _0x52e322=await db['all']('SELECT\x20*\x20F'+_0x8b9fdf(0x169)+'s'),_0x50b36c=new Map();for(const _0x47e8c3 of _0x52e322||[]){const _0x19f61b=resolveTriggerFromRow(_0x47e8c3)||'',_0x14a9ab=resolveChatJidFromRow(_0x47e8c3)||'';if(!_0x19f61b||!_0x14a9ab)continue;const _0x744278=resolveResponsesFromRow(_0x47e8c3),_0x37a9b1=normalizeResponseValue(_0x744278),_0xf4a4de=_0x47e8c3[_0x8b9fdf(0xb2)]||_0x47e8c3['creator']||_0x47e8c3[_0x8b9fdf(0x118)]||'';let _0x3f8577=Number(_0x47e8c3[_0x8b9fdf(0xc6)]||_0x47e8c3['ts']||_0x47e8c3['timestamp']||_0x47e8c3['time']||-0x1b*0xf+0x1564+-0x1*0x13cf);if(!_0x3f8577)_0x3f8577=Math[_0x8b9fdf(0xd3)](Date[_0x8b9fdf(0x7b)]()/(0x7*-0x47f+-0x582*0x1+0x9*0x48b));const _0xb04af=_0x14a9ab+'||'+_0x19f61b;if(!_0x50b36c['has'](_0xb04af))_0x50b36c['set'](_0xb04af,{'trigger':_0x19f61b,'chat_jid':_0x14a9ab,'responses':_0x37a9b1[_0x8b9fdf(0xde)](),'created_by':_0xf4a4de,'created_at':_0x3f8577});else{const _0x11cbd8=_0x50b36c[_0x8b9fdf(0x177)](_0xb04af);_0x11cbd8[_0x8b9fdf(0x122)]=uniqArray(_0x11cbd8[_0x8b9fdf(0x122)][_0x8b9fdf(0x103)](_0x37a9b1)),_0x11cbd8[_0x8b9fdf(0xb2)]=_0x11cbd8[_0x8b9fdf(0xb2)]||_0xf4a4de,_0x11cbd8['created_at']=Math[_0x8b9fdf(0x1d3)](_0x11cbd8['created_at']||-0x231f+-0x1839+0x3b58,_0x3f8577||-0x4*0x719+-0xa*0x89+0x1*0x21be);}}return Array['from'](_0x50b36c[_0x8b9fdf(0x191)]());}catch(_0x35e682){return warn(_0x8b9fdf(0x14f)+_0x8b9fdf(0x82)+_0x8b9fdf(0x1b1)+_0x8b9fdf(0x140)+_0x8b9fdf(0xb5)+(_0x35e682?.[_0x8b9fdf(0x1bc)]||_0x35e682)),[];}}function _0x4421(_0x326d70,_0x1d3f0c){const _0x256472=_0x3f1f();return _0x4421=function(_0x14052e,_0x41206f){_0x14052e=_0x14052e-(0x34*0x7f+-0x1779+-0x1ed);let _0x3e362a=_0x256472[_0x14052e];return _0x3e362a;},_0x4421(_0x326d70,_0x1d3f0c);}async function ensureSchema(){const _0x51aa78=_0x5044f3,_0x5db264={'id':_0x51aa78(0x11d)+'IMARY\x20KEY\x20'+_0x51aa78(0x1bf)+'ENT','trigger':'TEXT\x20NOT\x20N'+_0x51aa78(0xc0),'chat_jid':_0x51aa78(0xeb)+'ULL','responses':_0x51aa78(0xeb)+_0x51aa78(0x1ea)+_0x51aa78(0xf7),'rr_index':_0x51aa78(0xbb)+'FAULT\x200','created_by':_0x51aa78(0x197)+_0x51aa78(0x115),'created_at':_0x51aa78(0xbb)+_0x51aa78(0x18c)};try{const _0x4cae25=await tableExists('filters');if(!_0x4cae25){const _0x578a1c=Object[_0x51aa78(0xea)](_0x5db264)[_0x51aa78(0x181)](([_0x5dda52,_0x2ba171])=>_0x5dda52+'\x20'+_0x2ba171)[_0x51aa78(0x17a)](',\x0a\x20\x20');await db[_0x51aa78(0xf0)](_0x51aa78(0x9d)+_0x51aa78(0x76)+_0x51aa78(0x120)+_0x51aa78(0x101)+'\x20\x20'+_0x578a1c+(_0x51aa78(0x108)+_0x51aa78(0x77)+_0x51aa78(0x160)+_0x51aa78(0x125)+_0x51aa78(0x171)+_0x51aa78(0x117)));try{await db['exec'](_0x51aa78(0xf1)+_0x51aa78(0x111)+_0x51aa78(0xa3)+_0x51aa78(0x1e6)+_0x51aa78(0x148)+_0x51aa78(0x1d6)+'jid);');}catch(_0x47d58e){}try{await db['exec']('CREATE\x20UNI'+_0x51aa78(0x15c)+'IF\x20NOT\x20EXI'+_0x51aa78(0x19c)+_0x51aa78(0x8b)+_0x51aa78(0x151)+'ers(chat_j'+_0x51aa78(0x179)+_0x51aa78(0x19f));}catch(_0x132b6a){}info(_0x51aa78(0x14f)+_0x51aa78(0x208)+_0x51aa78(0x7a)+_0x51aa78(0x1a9)+_0x51aa78(0x1a5)+_0x51aa78(0x220));return;}const _0x291b15=await getTableColumns(_0x51aa78(0x1d8)),_0x295625=[];for(const _0x393c36 of Object[_0x51aa78(0x1cc)](_0x5db264)){if(!_0x291b15[_0x51aa78(0xa0)](_0x393c36))_0x295625[_0x51aa78(0x1a1)](_0x393c36);}if(_0x295625['length']===0x1*-0x403+-0x1f69+0x1*0x236c){try{await db[_0x51aa78(0xf0)](_0x51aa78(0xf1)+_0x51aa78(0x111)+'EXISTS\x20idx'+_0x51aa78(0x1e6)+'hat\x20ON\x20fil'+_0x51aa78(0x1d6)+'jid);');}catch(_0x329819){warn(_0x51aa78(0x14f)+_0x51aa78(0x1dc)+':\x20'+(_0x329819?.[_0x51aa78(0x1bc)]||_0x329819));}try{await db['exec'](_0x51aa78(0x188)+_0x51aa78(0x15c)+_0x51aa78(0xbc)+_0x51aa78(0x19c)+_0x51aa78(0x8b)+_0x51aa78(0x151)+'ers(chat_j'+_0x51aa78(0x179)+_0x51aa78(0x19f));}catch(_0x6aaa50){warn(_0x51aa78(0x14f)+_0x51aa78(0x1d2)+':\x20'+(_0x6aaa50?.[_0x51aa78(0x1bc)]||_0x6aaa50));}return;}const _0x3d945f=_0x295625[_0x51aa78(0x131)](_0x2937ff=>!['id','trigger',_0x51aa78(0x1b6)][_0x51aa78(0xa0)](_0x2937ff));if(_0x3d945f){for(const _0x3c4af5 of _0x295625){try{const _0x420e9c=_0x5db264[_0x3c4af5],_0x15c82f=_0x420e9c[_0x51aa78(0x162)]('\x20')['slice'](0x238a+0x2269*-0x1+-0x3*0x60)[_0x51aa78(0x17a)]('\x20');await db['exec']('ALTER\x20TABL'+_0x51aa78(0x120)+_0x51aa78(0x7e)+'\x20'+_0x3c4af5+'\x20'+_0x15c82f),info(_0x51aa78(0x14f)+_0x51aa78(0x75)+_0x51aa78(0x99)+'\x20'+_0x3c4af5+(_0x51aa78(0xb0)+_0x51aa78(0x20b)));}catch(_0x4518e0){warn(_0x51aa78(0x14f)+_0x51aa78(0xbd)+'umn\x20'+_0x3c4af5+_0x51aa78(0x7d)+(_0x4518e0?.['message']||_0x4518e0));}}try{await db['exec'](_0x51aa78(0xf1)+_0x51aa78(0x111)+_0x51aa78(0xa3)+'_filters_c'+_0x51aa78(0x148)+_0x51aa78(0x1d6)+_0x51aa78(0x80));}catch(_0x19103c){warn('[gfilter]\x20'+_0x51aa78(0x1dc)+':\x20'+(_0x19103c?.['message']||_0x19103c));}try{await db[_0x51aa78(0xf0)](_0x51aa78(0x188)+'QUE\x20INDEX\x20'+_0x51aa78(0xbc)+_0x51aa78(0x19c)+_0x51aa78(0x8b)+_0x51aa78(0x151)+_0x51aa78(0x1eb)+'id,\x20trigge'+_0x51aa78(0x19f));}catch(_0x262cc1){warn(_0x51aa78(0x14f)+_0x51aa78(0x1d2)+':\x20'+(_0x262cc1?.[_0x51aa78(0x1bc)]||_0x262cc1));}return;}info(_0x51aa78(0x14f)+_0x51aa78(0x10d)+_0x51aa78(0x1e0)+_0x51aa78(0x17d)+_0x51aa78(0x98)+_0x51aa78(0x20e)+_0x51aa78(0x106));const _0x3dbfe9=await readAndNormalizeExistingFilters();await db['exec'](_0x51aa78(0x21d)+_0x51aa78(0x21e)+_0x51aa78(0x104));try{await db['exec'](_0x51aa78(0x135)+_0x51aa78(0xe0)+_0x51aa78(0xe1)+_0x51aa78(0x16d)+_0x51aa78(0xc3)+_0x51aa78(0x112)+'PRIMARY\x20KE'+_0x51aa78(0xfc)+_0x51aa78(0x170)+'\x20\x20\x20\x20\x20trigg'+_0x51aa78(0x132)+_0x51aa78(0x10a)+'\x20\x20\x20\x20\x20\x20chat'+_0x51aa78(0x216)+_0x51aa78(0x1c8)+_0x51aa78(0xad)+'sponses\x20TE'+_0x51aa78(0x1c9)+_0x51aa78(0x18f)+_0x51aa78(0x6a)+_0x51aa78(0x19e)+_0x51aa78(0x222)+_0x51aa78(0x199)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x51aa78(0xb2)+_0x51aa78(0x12e)+'ULT\x20\x27\x27,\x0a\x20\x20'+_0x51aa78(0x83)+'ted_at\x20INT'+_0x51aa78(0x13c)+_0x51aa78(0x109)+_0x51aa78(0x1fd)+'(chat_jid,'+_0x51aa78(0x213)+_0x51aa78(0x119));}catch(_0x4d2956){await db['exec'](_0x51aa78(0x135)+'LE\x20IF\x20NOT\x20'+_0x51aa78(0xe1)+'ters_new\x20('+_0x51aa78(0xc3)+'d\x20INTEGER\x20'+_0x51aa78(0x1d5)+_0x51aa78(0xfc)+_0x51aa78(0x170)+_0x51aa78(0x127)+'er\x20TEXT\x20NO'+'T\x20NULL,\x0a\x20\x20'+_0x51aa78(0x1f7)+_0x51aa78(0x216)+_0x51aa78(0x1c8)+_0x51aa78(0xad)+_0x51aa78(0x6c)+_0x51aa78(0x1c9)+_0x51aa78(0x18f)+_0x51aa78(0x6a)+_0x51aa78(0x19e)+_0x51aa78(0x222)+_0x51aa78(0x199)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x51aa78(0xb2)+_0x51aa78(0x12e)+_0x51aa78(0x1be)+_0x51aa78(0x83)+_0x51aa78(0xe5)+'EGER\x20DEFAU'+'LT\x200\x0a\x20\x20\x20\x20\x20'+_0x51aa78(0x16c)),warn('[gfilter]\x20'+'created\x20fi'+_0x51aa78(0x158)+_0x51aa78(0x172)+'IQUE\x20as\x20fa'+_0x51aa78(0x139));}const _0xe47813=await db[_0x51aa78(0x20d)]('INSERT\x20INT'+_0x51aa78(0xb8)+'new\x20(trigg'+_0x51aa78(0x1ae)+'id,\x20respon'+_0x51aa78(0xf8)+_0x51aa78(0xaa)+_0x51aa78(0x70)+'ated_at)\x20V'+_0x51aa78(0x1b4)+'?,\x20?,\x200,\x20?'+',\x20?)');try{for(const _0x4bdf56 of _0x3dbfe9){const _0x5a7c5a=JSON[_0x51aa78(0xb1)](ensureArray(_0x4bdf56[_0x51aa78(0x122)]||[]));try{await _0xe47813['run'](_0x4bdf56[_0x51aa78(0x12f)],_0x4bdf56[_0x51aa78(0x1b6)],_0x5a7c5a,_0x4bdf56['created_by']||'',Number(_0x4bdf56[_0x51aa78(0xc6)]||Math[_0x51aa78(0xd3)](Date[_0x51aa78(0x7b)]()/(-0x15b*-0x19+0xfaa*-0x1+-0xe51))));}catch(_0x4da6ad){warn(_0x51aa78(0x14f)+'could\x20not\x20'+_0x51aa78(0x218)+'malized\x20ro'+'w\x20'+_0x4bdf56[_0x51aa78(0x1b6)]+'@'+_0x4bdf56[_0x51aa78(0x12f)]+':\x20'+(_0x4da6ad?.[_0x51aa78(0x1bc)]||_0x4da6ad));}}}finally{try{await _0xe47813[_0x51aa78(0x1e1)]();}catch(_0x7433e5){}}try{const _0x4d13ca=_0x51aa78(0x203)+'ckup_'+Math[_0x51aa78(0xd3)](Date['now']()/(-0x12*0x16c+-0x999+0x2719));await db[_0x51aa78(0xf0)](_0x51aa78(0x17e)+'E\x20filters\x20'+_0x51aa78(0x10c)+_0x4d13ca+';'),await db[_0x51aa78(0xf0)](_0x51aa78(0x17e)+'E\x20filters_'+_0x51aa78(0x86)+'\x20TO\x20filter'+'s;');try{await db[_0x51aa78(0xf0)]('CREATE\x20IND'+_0x51aa78(0x111)+_0x51aa78(0xa3)+_0x51aa78(0x1e6)+_0x51aa78(0x148)+'ters(chat_'+'jid);');}catch(_0x53dab2){warn(_0x51aa78(0x14f)+_0x51aa78(0x1ba)+_0x51aa78(0xf9)+(_0x53dab2?.['message']||_0x53dab2));}try{await db[_0x51aa78(0xf0)]('CREATE\x20UNI'+_0x51aa78(0x15c)+_0x51aa78(0xbc)+_0x51aa78(0x19c)+'lters_uniq'+_0x51aa78(0x151)+_0x51aa78(0x1eb)+_0x51aa78(0x179)+'r);');}catch(_0x509d6f){warn(_0x51aa78(0x14f)+_0x51aa78(0x1ba)+_0x51aa78(0x1d2)+':\x20'+(_0x509d6f?.[_0x51aa78(0x1bc)]||_0x509d6f));}info(_0x51aa78(0x14f)+_0x51aa78(0xca)+'completed;'+_0x51aa78(0xd6)+'\x20renamed\x20t'+_0x51aa78(0x175));}catch(_0x4ba850){warn(_0x51aa78(0x14f)+_0x51aa78(0xd0)+'s\x20failed:\x20'+(_0x4ba850?.[_0x51aa78(0x1bc)]||_0x4ba850));throw _0x4ba850;}finally{await db[_0x51aa78(0xf0)]('PRAGMA\x20for'+'eign_keys\x20'+'=\x20ON;');}}catch(_0x570353){error(_0x570353,_0x51aa78(0x14f)+'ensureSche'+'ma\x20fatal');throw _0x570353;}}function normalizeResponseValue(_0x26b550){const _0x4945a1=_0x5044f3;if(_0x26b550==null)return[];if(Array['isArray'](_0x26b550))return uniqArray(_0x26b550);if(typeof _0x26b550===_0x4945a1(0xc4)){let _0x587143=_0x26b550[_0x4945a1(0x113)](/\r/g,'');const _0x4cdf17=_0x587143['trim']();if(_0x4cdf17[_0x4945a1(0xc1)]('['))try{const _0x1a7128=JSON[_0x4945a1(0x88)](_0x4cdf17);if(Array[_0x4945a1(0x219)](_0x1a7128))return uniqArray(_0x1a7128[_0x4945a1(0x181)](_0x2adc5d=>String(_0x2adc5d||'')));}catch(_0xa80ca0){}_0x587143=_0x587143[_0x4945a1(0x113)](/^\s*\n+/,'')['replace'](/\n+\s*$/,'');const _0x4c0c0a=_0x587143[_0x4945a1(0x162)]('\x0a'),_0x13e127=_0x4c0c0a[_0x4945a1(0x10b)](_0x2150dc=>_0x2150dc[_0x4945a1(0x1f3)]()[_0x4945a1(0xc1)]('!'));if(_0x13e127){const _0xd5743a=[];let _0x46336a=null;for(const _0x2eb574 of _0x4c0c0a){if(_0x2eb574[_0x4945a1(0x1f3)]()[_0x4945a1(0xc1)]('!')){const _0x27d4b9=_0x2eb574[_0x4945a1(0x113)](/^\s*!/,''),_0xa6d310=_0x27d4b9[_0x4945a1(0x113)](/\s+$/,'');_0x46336a=_0xa6d310,_0xd5743a[_0x4945a1(0x1a1)](_0x46336a);}else{const _0x94cf89=_0x2eb574[_0x4945a1(0x113)](/\s+$/,'');if(_0x46336a===null)_0x46336a=_0x94cf89,_0xd5743a[_0x4945a1(0x1a1)](_0x46336a);else{const _0x1372ee=_0xd5743a[_0x4945a1(0x9c)]-(0x12b8+0x81*0x9+0x7c*-0x30);_0xd5743a[_0x1372ee]=_0xd5743a[_0x1372ee]+'\x0a'+_0x94cf89,_0x46336a=_0xd5743a[_0x1372ee];}}}return uniqArray(_0xd5743a[_0x4945a1(0x181)](_0xe4fa37=>String(_0xe4fa37||'')['trim']()));}else{const _0x4e9ba3=_0x4c0c0a['map'](_0x5e83b6=>_0x5e83b6[_0x4945a1(0x113)](/\s+$/,''))[_0x4945a1(0x17a)]('\x0a')[_0x4945a1(0x1d0)]();if(!_0x4e9ba3)return[];return[_0x4e9ba3];}}return[];}async function upsertFilterRow(_0x20d372,_0x1407cb,_0x105725,_0x498b5e){const _0x5b5d79=_0x5044f3;try{const _0x543e58=Math[_0x5b5d79(0xd3)](Date[_0x5b5d79(0x7b)]()/(-0x11d7*-0x1+0x12ec*-0x1+0x1*0x4fd)),_0x327409=JSON[_0x5b5d79(0xb1)](uniqArray(ensureArray(_0x105725)[_0x5b5d79(0x181)](_0x51d693=>String(_0x51d693)[_0x5b5d79(0x1d0)]())[_0x5b5d79(0xe2)](Boolean)));await db[_0x5b5d79(0x1b3)](_0x5b5d79(0x18b)+_0x5b5d79(0xec)+_0x5b5d79(0x1f5)+'chat_jid,\x20'+_0x5b5d79(0x1e8)+_0x5b5d79(0x1ab)+_0x5b5d79(0x71)+_0x5b5d79(0x1e5)+_0x5b5d79(0x163)+_0x5b5d79(0x85)+'?,\x20?,\x20?,\x200'+',\x20?,\x20?)\x0a\x20\x20'+_0x5b5d79(0xb4)+_0x5b5d79(0xda)+_0x5b5d79(0x68)+'gger)\x20DO\x20U'+'PDATE\x20SET\x0a'+_0x5b5d79(0x130)+_0x5b5d79(0xe7)+'\x20excluded.'+_0x5b5d79(0x1e8)+_0x5b5d79(0x6d)+'rr_index\x20='+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20created'+_0x5b5d79(0x166)+_0x5b5d79(0xe8)+_0x5b5d79(0x187)+_0x5b5d79(0x83)+_0x5b5d79(0xa1)+_0x5b5d79(0x1ec)+_0x5b5d79(0xd1),[_0x1407cb,_0x20d372,_0x327409,_0x498b5e||'',_0x543e58]);try{automatonCache[_0x5b5d79(0x72)]();}catch(_0x4a2e00){}return info(_0x5b5d79(0x14f)+_0x5b5d79(0x1d4)+_0x5b5d79(0x189)+_0x1407cb+_0x5b5d79(0x143)+_0x20d372),!![];}catch(_0x47034a){return error(_0x47034a,_0x5b5d79(0x14f)+_0x5b5d79(0xc9)+_0x5b5d79(0x198)+_0x5b5d79(0x1b2)+_0x1407cb+_0x5b5d79(0x102)+_0x20d372),![];}}async function deleteFilters(_0x52461e,_0x391eff){const _0x38ab9a=_0x5044f3;if(!Array[_0x38ab9a(0x219)](_0x391eff)||_0x391eff[_0x38ab9a(0x9c)]===0xcb9+-0x129c+0x5e3)return-0x5*-0x35f+-0xb3e+-0x59d;try{let _0x7e20cd=-0x5*0x443+0x9*-0x44e+0x3c0d;for(const _0xed4309 of _0x391eff){const _0x3a1b03=await db[_0x38ab9a(0x1b3)](_0x38ab9a(0x18a)+'M\x20filters\x20'+'WHERE\x20chat'+'_jid\x20=\x20?\x20A'+_0x38ab9a(0x78)+'\x20=\x20?',[_0x52461e,_0xed4309]);if(_0x3a1b03?.[_0x38ab9a(0x193)])_0x7e20cd+=_0x3a1b03[_0x38ab9a(0x193)];info(_0x38ab9a(0x14f)+'deleted\x20'+_0xed4309+_0x38ab9a(0x102)+_0x52461e);}try{automatonCache['clear']();}catch(_0x3b0916){}return _0x7e20cd;}catch(_0x1f63ba){return error(_0x1f63ba,_0x38ab9a(0x14f)+_0x38ab9a(0xbe)+_0x38ab9a(0x90)+'\x20for\x20'+_0x52461e),-0x130b+0xaae*0x2+-0x251;}}async function listTriggersForChat(_0x2371e1){const _0x4db18e=_0x5044f3;try{const _0x4970e8=await db[_0x4db18e(0x205)]('SELECT\x20DIS'+_0x4db18e(0x12b)+_0x4db18e(0x8c)+_0x4db18e(0xdc)+_0x4db18e(0xd5)+'d\x20=\x20?\x20ORDE'+_0x4db18e(0x17f)+'er',[_0x2371e1]);return(_0x4970e8||[])[_0x4db18e(0x181)](_0x5aa268=>_0x5aa268[_0x4db18e(0x12f)]);}catch(_0x3895d9){return warn(_0x3895d9,_0x4db18e(0x14f)+_0x4db18e(0x73)+_0x4db18e(0xe6)+_0x4db18e(0x11f)+'\x20'+_0x2371e1),[];}}async function pickResponseAndAdvance(_0x49c247,_0x162de4,_0xe4e53=_0x5044f3(0x206)){const _0x38c919=_0x5044f3;try{const _0xf6736a=await db[_0x38c919(0x177)](_0x38c919(0x15f)+_0x38c919(0x18e)+'_index\x20FRO'+_0x38c919(0x11c)+'WHERE\x20chat'+_0x38c919(0x11b)+_0x38c919(0x78)+_0x38c919(0x1fa)+'\x201',[_0x49c247,_0x162de4]);if(!_0xf6736a)return null;let _0x307077=[];try{_0x307077=JSON[_0x38c919(0x88)](_0xf6736a[_0x38c919(0x122)]||'[]');}catch{_0x307077=ensureArray(_0xf6736a[_0x38c919(0x122)]);}_0x307077=ensureArray(_0x307077);if(!_0x307077[_0x38c919(0x9c)])return null;if((_0xe4e53||'')['toLowerCas'+'e']()===_0x38c919(0x1ce)){const _0x226695=Math[_0x38c919(0xd3)](Math['random']()*_0x307077['length']);return _0x307077[_0x226695];}const _0x75a231=Number(_0xf6736a[_0x38c919(0xbf)]||-0x901*-0x1+0x19*0xc+-0x5*0x209),_0x55dd25=_0x307077[_0x75a231%_0x307077[_0x38c919(0x9c)]];try{await db[_0x38c919(0x1b3)](_0x38c919(0xb3)+_0x38c919(0x174)+_0x38c919(0x1ed)+_0x38c919(0x20c)+_0x38c919(0x9e)+_0x38c919(0x16a)+_0x38c919(0x21b)+_0x38c919(0xa4),[_0x49c247,_0x162de4]);}catch(_0x2a148e){warn(_0x38c919(0x14f)+_0x38c919(0x204)+_0x38c919(0x10e)+_0x38c919(0xaf)+(_0x2a148e?.[_0x38c919(0x1bc)]||_0x2a148e));}return _0x55dd25;}catch(_0x4b780c){return warn('[gfilter]\x20'+_0x38c919(0x1a7)+_0x38c919(0x1aa)+_0x38c919(0xfb)+(_0x4b780c?.[_0x38c919(0x1bc)]||_0x4b780c)),null;}}function parseFilterCommandText(_0x53d620){const _0x5557fe=_0x5044f3;if(!_0x53d620)return null;const _0x174623=_0x53d620[_0x5557fe(0x162)](/\r?\n/)[_0x5557fe(0x181)](_0x4b5612=>_0x4b5612[_0x5557fe(0x113)](/\r/g,''));if(!_0x174623[_0x5557fe(0x9c)])return null;let _0x57b093=(_0x174623[0x491+0xb13*-0x2+0x1195]||'')[_0x5557fe(0x1d0)](),_0x1f400a=_0x174623['slice'](-0x1d*0xe1+-0x21a5+0x1*0x3b23),_0x1133da=null;const _0x11c0fd=_0x57b093['match'](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);_0x11c0fd&&(_0x57b093=(_0x11c0fd[-0x138d+0xc42+-0x4*-0x1d3]||'')['trim'](),_0x1133da=(_0x11c0fd[0x289*0xf+-0x778+-0x1e8d]||'')[_0x5557fe(0x1d0)]());if(!_0x1133da&&_0x1f400a&&_0x1f400a[_0x5557fe(0x9c)]){let _0x1176e9=-(0x1*0x2092+-0x3*0x2bd+-0x185a);for(let _0x1bc8e2=_0x1f400a[_0x5557fe(0x9c)]-(-0x1*0x218+-0x562+0x17f*0x5);_0x1bc8e2>=-0x9c*0x26+0x2*-0x11dd+0x3ae2;_0x1bc8e2--){if(String(_0x1f400a[_0x1bc8e2]||'')['trim']()[_0x5557fe(0x9c)]>0x11ad*-0x2+0xdce+0x158c){_0x1176e9=_0x1bc8e2;break;}}if(_0x1176e9>=0x241*-0xd+-0x15d1+0x331e){const _0x58d378=String(_0x1f400a[_0x1176e9]||'')['trim'](),_0x450121=_0x58d378['match'](/^gp[:\s]*([^\s,]+)\s*$/i);_0x450121&&(_0x1133da=(_0x450121[-0x24db+-0x1*0x56e+0x2a4a]||'')[_0x5557fe(0x1d0)](),_0x1f400a[_0x5557fe(0x194)](_0x1176e9,-0xd3*0x1d+-0xc8d+-0x3d*-0x99));}}let _0x9556cc=_0x57b093['trim']()['split'](/\s+/)['filter'](Boolean);if(_0x9556cc['length']&&_0x9556cc[-0x1*-0xa2e+-0x947+-0xe7]['toLowerCas'+'e']()===_0x5557fe(0x15b))_0x9556cc[_0x5557fe(0xe4)]();const _0x4a9820=_0x9556cc[_0x5557fe(0x17a)]('\x20')[_0x5557fe(0x1d0)]();let _0x21b7c1=[];_0x4a9820&&(_0x4a9820['includes'](',')?_0x21b7c1=_0x4a9820['split'](',')[_0x5557fe(0x181)](_0x46541d=>_0x46541d[_0x5557fe(0x1d0)]())[_0x5557fe(0xe2)](Boolean):_0x21b7c1=_0x4a9820['split'](/\s+/)[_0x5557fe(0x181)](_0x5f219d=>_0x5f219d['trim']())[_0x5557fe(0xe2)](Boolean));const _0x5b82ba=_0x1f400a;if(!_0x5b82ba[_0x5557fe(0x9c)])return{'triggers':_0x21b7c1,'responses':[],'gp':_0x1133da};const _0x3c25f9=_0x5b82ba['join']('\x0a'),_0x4e54f6=normalizeResponseValue(_0x3c25f9);return{'triggers':_0x21b7c1,'responses':_0x4e54f6,'gp':_0x1133da};}function getMessageText(_0x54d979){const _0x4cdbc8=_0x5044f3;if(!_0x54d979||!_0x54d979[_0x4cdbc8(0x1bc)])return'';const _0x109a45=_0x54d979[_0x4cdbc8(0x1bc)];if(_0x109a45['conversati'+'on'])return _0x109a45[_0x4cdbc8(0x93)+'on'];if(_0x109a45[_0x4cdbc8(0xdf)+'xtMessage']?.['text'])return _0x109a45[_0x4cdbc8(0xdf)+_0x4cdbc8(0x6b)][_0x4cdbc8(0x178)];if(_0x109a45[_0x4cdbc8(0x10f)+'ge']?.[_0x4cdbc8(0x7c)])return _0x109a45[_0x4cdbc8(0x10f)+'ge']['caption'];if(_0x109a45[_0x4cdbc8(0x12a)+'ge']?.[_0x4cdbc8(0x7c)])return _0x109a45[_0x4cdbc8(0x12a)+'ge'][_0x4cdbc8(0x7c)];if(_0x109a45['buttonsRes'+'ponseMessa'+'ge']?.[_0x4cdbc8(0xd8)+'ttonId'])return _0x109a45[_0x4cdbc8(0x207)+'ponseMessa'+'ge']['selectedBu'+'ttonId'];if(_0x109a45[_0x4cdbc8(0xee)+_0x4cdbc8(0x79)]?.[_0x4cdbc8(0x202)+_0x4cdbc8(0xa8)]?.['selectedRo'+'wId'])return _0x109a45[_0x4cdbc8(0xee)+_0x4cdbc8(0x79)]['singleSele'+_0x4cdbc8(0xa8)][_0x4cdbc8(0x126)+'wId'];return'';}const processedMessageKeys=new Map(),DEDUPE_TTL=(-0x6a6*0x1+0x1753+-0x108f)*(-0x164c+0x11ef*0x2+0x1*-0x9aa);function makeDedupeKey(_0x34ef5f){const _0x5b9739=_0x5044f3,_0x82653c=_0x34ef5f?.[_0x5b9739(0x1dd)];if(!_0x82653c)return null;const _0x35969b=_0x82653c['id']||_0x82653c?.[_0x5b9739(0x9b)+'t']||'',_0x6e9c5e=_0x82653c['remoteJid']||'';return _0x6e9c5e+'::'+_0x35969b;}function isMsgProcessed(_0x8bb5f6){const _0x14d6a9=_0x5044f3;return _0x8bb5f6&&processedMessageKeys[_0x14d6a9(0x153)](_0x8bb5f6);}function markMsgProcessed(_0x2cdb37){const _0x4930c4=_0x5044f3;if(!_0x2cdb37)return;processedMessageKeys[_0x4930c4(0x153)](_0x2cdb37)&&clearTimeout(processedMessageKeys[_0x4930c4(0x177)](_0x2cdb37));const _0x1a1b6d=setTimeout(()=>processedMessageKeys[_0x4930c4(0x12c)](_0x2cdb37),DEDUPE_TTL);processedMessageKeys['set'](_0x2cdb37,_0x1a1b6d);}class Aho{constructor(){const _0x9d0fed=_0x5044f3;this[_0x9d0fed(0x1a2)]=[{'next':Object[_0x9d0fed(0x16f)](null),'fail':0x0,'output':[]}];}[_0x5044f3(0x1af)](_0x235a61){const _0xb3a637=_0x5044f3;this['nodes']=[{'next':Object[_0xb3a637(0x16f)](null),'fail':0x0,'output':[]}];for(const _0x1d7227 of _0x235a61){let _0x4c058f=0xdab+-0x1b8a+0xddf;for(let _0x276085=0x1*0x1c9+0x1b91+0x1a*-0x121;_0x276085<_0x1d7227[_0xb3a637(0x9c)];_0x276085++){const _0x21ce8c=_0x1d7227[_0x276085];!this[_0xb3a637(0x1a2)][_0x4c058f][_0xb3a637(0x100)][_0x21ce8c]&&(this['nodes'][_0x4c058f]['next'][_0x21ce8c]=this[_0xb3a637(0x1a2)]['length'],this[_0xb3a637(0x1a2)][_0xb3a637(0x1a1)]({'next':Object[_0xb3a637(0x16f)](null),'fail':0x0,'output':[]})),_0x4c058f=this[_0xb3a637(0x1a2)][_0x4c058f]['next'][_0x21ce8c];}this[_0xb3a637(0x1a2)][_0x4c058f][_0xb3a637(0x173)][_0xb3a637(0x1a1)](_0x1d7227);}const _0x21c1b3=[];for(const _0x4604c7 in this[_0xb3a637(0x1a2)][-0x250+-0xb*-0x373+0x517*-0x7][_0xb3a637(0x100)]){const _0x39b2bf=this['nodes'][-0x1*0x4c7+-0x31*0x91+0x2088][_0xb3a637(0x100)][_0x4604c7];this[_0xb3a637(0x1a2)][_0x39b2bf]['fail']=0x1b1*-0x12+0x6b5+-0x17bd*-0x1,_0x21c1b3[_0xb3a637(0x1a1)](_0x39b2bf);}while(_0x21c1b3[_0xb3a637(0x9c)]){const _0x38cff2=_0x21c1b3[_0xb3a637(0xe4)]();for(const _0x5ec2b2 in this['nodes'][_0x38cff2][_0xb3a637(0x100)]){const _0x1d3599=this['nodes'][_0x38cff2][_0xb3a637(0x100)][_0x5ec2b2];let _0xc260c2=this['nodes'][_0x38cff2][_0xb3a637(0xff)];while(_0xc260c2&&!this[_0xb3a637(0x1a2)][_0xc260c2][_0xb3a637(0x100)][_0x5ec2b2])_0xc260c2=this['nodes'][_0xc260c2]['fail'];if(this[_0xb3a637(0x1a2)][_0xc260c2][_0xb3a637(0x100)][_0x5ec2b2])this[_0xb3a637(0x1a2)][_0x1d3599][_0xb3a637(0xff)]=this['nodes'][_0xc260c2]['next'][_0x5ec2b2];else this[_0xb3a637(0x1a2)][_0x1d3599]['fail']=0x16a5*-0x1+-0x1a8c+0x3131;this['nodes'][_0x1d3599][_0xb3a637(0x173)][_0xb3a637(0x1a1)](...this[_0xb3a637(0x1a2)][this[_0xb3a637(0x1a2)][_0x1d3599][_0xb3a637(0xff)]][_0xb3a637(0x173)]),_0x21c1b3[_0xb3a637(0x1a1)](_0x1d3599);}}}[_0x5044f3(0x1f2)](_0x26be1d){const _0x3f591b=_0x5044f3,_0x1a1b00=[];let _0x447cea=-0x121*0x15+-0x498+0x1c4d;for(let _0x3e7f2a=0x1899*0x1+0x2376+-0x3c0f;_0x3e7f2a<_0x26be1d[_0x3f591b(0x9c)];_0x3e7f2a++){const _0x1e4efe=_0x26be1d[_0x3e7f2a];while(_0x447cea&&!this[_0x3f591b(0x1a2)][_0x447cea][_0x3f591b(0x100)][_0x1e4efe])_0x447cea=this['nodes'][_0x447cea]['fail'];if(this[_0x3f591b(0x1a2)][_0x447cea][_0x3f591b(0x100)][_0x1e4efe])_0x447cea=this['nodes'][_0x447cea]['next'][_0x1e4efe];else _0x447cea=0x38b*0x4+0x13b1+-0x21dd*0x1;if(this[_0x3f591b(0x1a2)][_0x447cea]['output'][_0x3f591b(0x9c)])for(const _0xb5b218 of this[_0x3f591b(0x1a2)][_0x447cea]['output']){_0x1a1b00['push']({'keyword':_0xb5b218,'index':_0x3e7f2a-_0xb5b218[_0x3f591b(0x9c)]+(-0xbfa*0x3+-0x5*-0x36c+-0x1*-0x12d3)});}}return _0x1a1b00;}}const automatonCache=new Map();async function getAutomatonForChat(_0x4c74eb){const _0xf37075=_0x5044f3;if(!_0x4c74eb)return null;if(automatonCache[_0xf37075(0x153)](_0x4c74eb))return automatonCache[_0xf37075(0x177)](_0x4c74eb);try{const _0x337a15=await db[_0xf37075(0x205)](_0xf37075(0x20f)+_0xf37075(0x12b)+_0xf37075(0x8c)+'ilters\x20WHE'+'RE\x20chat_ji'+_0xf37075(0x105)+')',[_0x4c74eb,'*']),_0x42aa46=(_0x337a15||[])[_0xf37075(0x181)](_0x11215a=>String(_0x11215a[_0xf37075(0x12f)]||'')['trim']())['filter'](Boolean),_0x499f2c=_0x42aa46[_0xf37075(0xe2)](_0x1dd41a=>{const _0x2c1a2f=_0xf37075,_0x1c6dca=String(_0x1dd41a)['trim']()[_0x2c1a2f(0x144)+'e']();if(_0x1c6dca[_0x2c1a2f(0xc1)]('regex:'))return![];if(_0x1dd41a[_0x2c1a2f(0xa0)]('*'))return![];return!![];}),_0x25367c=_0x499f2c[_0xf37075(0x181)](_0x5700cb=>_0x5700cb[_0xf37075(0x144)+'e']()),_0xc12fd6=new Map();for(let _0x2ea742=-0x7f0*-0x3+0x23cf+-0x3b9f;_0x2ea742<_0x499f2c['length'];_0x2ea742++){_0xc12fd6[_0xf37075(0x1bb)](_0x25367c[_0x2ea742],_0x499f2c[_0x2ea742]);}const _0x154186=new Aho();if(_0x25367c['length'])_0x154186[_0xf37075(0x1af)](_0x25367c);const _0x36548c={'ac':_0x154186,'keywords':_0x25367c,'lowerToOrig':_0xc12fd6};return automatonCache['set'](_0x4c74eb,_0x36548c),_0x36548c;}catch(_0x50f5df){return warn(_0xf37075(0x14f)+_0xf37075(0x1f8)+_0xf37075(0x8e)+_0xf37075(0x11f)+'\x20'+_0x4c74eb+':\x20'+(_0x50f5df?.[_0xf37075(0x1bc)]||_0x50f5df)),null;}}async function findStoredMatchFromFindings(_0x4ae614=[]){const _0x1a878b=_0x5044f3;try{const _0x37dc65=await listSudo();if(!Array[_0x1a878b(0x219)](_0x37dc65)||_0x37dc65[_0x1a878b(0x9c)]===-0x8e*-0x29+0x9d5*0x1+-0x2093)return null;const _0x17ac68=new Set(_0x37dc65['map'](String));for(const _0x426cde of _0x4ae614||[]){if(!_0x426cde||typeof _0x426cde[_0x1a878b(0x157)]!==_0x1a878b(0xc4))continue;const _0x5e455a=normalizeToJid(_0x426cde[_0x1a878b(0x157)]);if(_0x5e455a&&_0x17ac68['has'](_0x5e455a))return _0x5e455a;if(_0x17ac68[_0x1a878b(0x153)](_0x426cde['jid']))return _0x426cde[_0x1a878b(0x157)];const _0x3b8bd8=String(_0x426cde[_0x1a878b(0x157)])[_0x1a878b(0x162)]('@')[-0x53c+0x162*-0x18+-0x266c*-0x1][_0x1a878b(0x162)](':')[0xa49*-0x1+0x1*0x1c67+-0x121e];if(_0x3b8bd8)for(const _0x435528 of _0x37dc65){const _0x5ddcd9=String(_0x435528)[_0x1a878b(0x162)]('@')[0x1410+0x94f*0x2+-0x1357*0x2];if(_0x5ddcd9&&_0x5ddcd9===_0x3b8bd8)return _0x435528;}}return null;}catch(_0xe538ae){return warn(_0x1a878b(0x14f)+'findStored'+_0x1a878b(0x149)+_0x1a878b(0xb7)+'ror:\x20'+(_0xe538ae?.[_0x1a878b(0x1bc)]||_0xe538ae)),null;}}export async function initialize(_0x4c571b){const _0x3a628a=_0x5044f3;botRef=_0x4c571b;if(botRef){if(typeof botRef[_0x3a628a(0x1e7)+'e']===_0x3a628a(0x156))sendApi=async(_0x27ed72,_0x1e069e)=>await botRef[_0x3a628a(0x1e7)+'e'](_0x27ed72,_0x1e069e);else botRef[_0x3a628a(0x154)]&&typeof botRef[_0x3a628a(0x154)][_0x3a628a(0x1e7)+'e']==='function'?sendApi=async(_0x4f14cb,_0x2e6519)=>await botRef[_0x3a628a(0x154)][_0x3a628a(0x1e7)+'e'](_0x4f14cb,_0x2e6519):sendApi=null;}try{await ensureSchema(),info(_0x3a628a(0x14f)+_0x3a628a(0x1f9)+_0x3a628a(0x66)+'bot-state\x20'+_0x3a628a(0x185)+')');}catch(_0x5c4ed8){error(_0x5c4ed8,_0x3a628a(0x14f)+_0x3a628a(0x1f9)+_0x3a628a(0xcc));throw _0x5c4ed8;}}function detectCommandNameFromCmdText(_0x1feb16){const _0x517b8a=_0x5044f3;if(!_0x1feb16)return null;const _0x420b0c=_0x1feb16[_0x517b8a(0x1d0)]();if(!_0x420b0c)return null;return _0x420b0c['split'](/\s+/)[0x174d+-0xd*0x277+0x8be][_0x517b8a(0x144)+'e']();}export async function onMessage(_0x18fcf9){const _0xba1b18=_0x5044f3;try{if(!_0x18fcf9||!_0x18fcf9[_0xba1b18(0x1dd)]||!_0x18fcf9[_0xba1b18(0x1bc)])return;const _0x4e6c02=makeDedupeKey(_0x18fcf9);if(!_0x4e6c02)return;if(isMsgProcessed(_0x4e6c02))return;markMsgProcessed(_0x4e6c02);const _0x17e6b2=getMessageText(_0x18fcf9);if(!_0x17e6b2)return;const _0x59c5fa=_0x18fcf9[_0xba1b18(0x1dd)][_0xba1b18(0x69)],_0xad64b9=typeof _0x59c5fa===_0xba1b18(0xc4)&&_0x59c5fa[_0xba1b18(0x1a6)](_0xba1b18(0x141)),_0x16a7c4=_0x18fcf9[_0xba1b18(0x1dd)]&&(_0x18fcf9[_0xba1b18(0x1dd)]['participan'+'t']||_0x18fcf9[_0xba1b18(0x1dd)][_0xba1b18(0x1c4)]||_0x18fcf9[_0xba1b18(0x1dd)][_0xba1b18(0x69)])||'',_0x290d7f=(_0x16a7c4||'')['split']('@')[-0x1c1b+0x238b+-0x770];let _0x3c6d93=![];if(_0xad64b9)try{_0x3c6d93=await isadmin(botRef,_0x18fcf9);}catch(_0x169d62){_0x3c6d93=![];}if(_0x18fcf9[_0xba1b18(0x94)]){const _0x288b39=typeof _0x18fcf9['text']==='string'&&_0x18fcf9[_0xba1b18(0x178)][_0xba1b18(0x1d0)]()['length']?_0x18fcf9[_0xba1b18(0x178)][_0xba1b18(0x1d0)]():_0x17e6b2[_0xba1b18(0x1d0)](),_0x39d78d=detectCommandNameFromCmdText(_0x288b39);if(!_0x39d78d)return;if(!_0x39d78d[_0xba1b18(0xc1)]('g'))return;if(!_0xad64b9){const _0x2f1948=Boolean(_0x18fcf9['key'][_0xba1b18(0x9f)]);let _0x22cea9=null;if(_0x2f1948){const _0x5aa495=getBotJid();!_0x5aa495?(warn(_0xba1b18(0x14f)+_0xba1b18(0x161)+_0xba1b18(0x1fc)+'\x20empty;\x20fa'+_0xba1b18(0x201)+'\x20to\x20ctx.ke'+'y.remoteJi'+_0xba1b18(0xa5)+_0xba1b18(0x147)),_0x22cea9=_0x18fcf9[_0xba1b18(0x1dd)][_0xba1b18(0x69)]):_0x22cea9=_0x5aa495;}else{let _0x1f0468=![];try{_0x1f0468=await isSudo(botRef,_0x18fcf9);}catch(_0x187a4e){_0x1f0468=![];}if(!_0x1f0468)return;const _0x407181=userJidFromCtx(_0x18fcf9)||{'findings':[]},_0x2e3524=await findStoredMatchFromFindings(_0x407181[_0xba1b18(0x6f)]||[]);if(!_0x2e3524)return;_0x22cea9=_0x2e3524;}const _0x590aa3=parseFilterCommandText(_0x288b39||_0x17e6b2);if(_0x39d78d===_0xba1b18(0x15b)){if(!_0x590aa3||!_0x590aa3['triggers'][_0xba1b18(0x9c)]||!_0x590aa3[_0xba1b18(0x122)][_0xba1b18(0x9c)]){await sendText(_0x18fcf9,_0x22cea9,_0xba1b18(0xce)+'global\x20by\x20'+_0xba1b18(0x138)+_0xba1b18(0x121)+_0xba1b18(0x1da)+_0xba1b18(0xf5)+_0xba1b18(0x167)+_0xba1b18(0x1b8)+_0xba1b18(0x81)+_0xba1b18(0xa2)+_0xba1b18(0x1f0)+_0xba1b18(0xfe)+_0xba1b18(0x217)+'o\x20restrict'+_0xba1b18(0x13e)+_0xba1b18(0x1f6));return;}let _0x5287be=[];if(_0x590aa3['gp']){const _0xd840fa=_0x590aa3['gp'][_0xba1b18(0x1d0)]();if(_0xd840fa[_0xba1b18(0x144)+'e']()===_0xba1b18(0x205))_0x5287be=await _0x3d8a44[_0xba1b18(0x183)+_0xba1b18(0x165)]();else{const _0x1e81b2=await _0x3d8a44['resolveNam'+'e'](_0xd840fa);if(_0x1e81b2)_0x5287be=[_0x1e81b2];else{if(_0xd840fa[_0xba1b18(0xa0)]('@'))_0x5287be=[_0x3d8a44[_0xba1b18(0x182)+_0xba1b18(0x95)](_0xd840fa)];else{await sendText(_0x18fcf9,_0x22cea9,'Unknown\x20gp'+_0xba1b18(0xed)+':\x20\x22'+_0xd840fa+(_0xba1b18(0x192)+_0xba1b18(0x129)+'\x20to\x20add\x20al'+'ias\x20or\x20pas'+_0xba1b18(0x8f)+_0xba1b18(0x196)));return;}}}}else _0x5287be=['*'];let _0x42a9a7=-0xd0+-0x1e33+0x1f03;for(const _0x330835 of uniqArray(_0x5287be)){for(const _0x473d6b of _0x590aa3['triggers']){const _0x45db77=await upsertFilterRow(_0x330835,_0x473d6b,_0x590aa3[_0xba1b18(0x122)],_0x16a7c4||'');if(_0x45db77)_0x42a9a7++;}}await sendText(_0x18fcf9,_0x22cea9,'Saved\x20'+_0x42a9a7+(_0xba1b18(0x7f)+'\x20to\x20')+(_0x5287be[_0xba1b18(0x9c)]===-0x1*-0x2623+-0x20d8+-0x54a?_0x5287be[0x211c+-0x1*0x1cf+-0x1f4d]:_0xba1b18(0xac)+'argets'));return;}if(_0x39d78d===_0xba1b18(0xc5)+'r'){const _0x174f74=(parseFilterCommandText(_0x288b39||_0x17e6b2)||{})['gp'],_0x1f9bb1=_0x174f74?_0x174f74[_0xba1b18(0x144)+'e']()==='all'?'*':await _0x3d8a44['resolveNam'+'e'](_0x174f74)||_0x3d8a44[_0xba1b18(0x182)+_0xba1b18(0x95)](_0x174f74):'*',_0x49fcb9=await listTriggersForChat(_0x1f9bb1);await sendText(_0x18fcf9,_0x22cea9,_0xba1b18(0x14f)+_0x49fcb9['length']+(_0xba1b18(0x114)+_0xba1b18(0x84))+(_0x1f9bb1==='*'?_0xba1b18(0x1fe)+_0xba1b18(0xf4):_0x1f9bb1));if(!_0x49fcb9[_0xba1b18(0x9c)])return;let _0x52723b='';for(const _0x2066fe of _0x49fcb9){const _0x2054dc='â€¢\x20'+_0x2066fe+'\x0a';(_0x52723b+_0x2054dc)[_0xba1b18(0x9c)]>0x2c*0x1a+0x1d8d+-0x1c29&&(await sendText(_0x18fcf9,_0x22cea9,_0x52723b[_0xba1b18(0x1d0)]()),_0x52723b=''),_0x52723b+=_0x2054dc;}if(_0x52723b[_0xba1b18(0x1d0)]())await sendText(_0x18fcf9,_0x22cea9,_0x52723b['trim']());return;}if(_0x39d78d===_0xba1b18(0x1a3)||_0x39d78d==='gdelfilter'+'s'||_0x39d78d===_0xba1b18(0x9a)){const _0x4fe9ac=(_0x17e6b2||'')[_0xba1b18(0x162)](/\r?\n/)[_0xba1b18(0x181)](_0x22cc4f=>_0x22cc4f[_0xba1b18(0x1d0)]());let _0x6c7594=null;if(_0x4fe9ac[_0xba1b18(0x9c)]>0x1cd6+-0x2*-0x90+-0x1df5&&!_0x4fe9ac[-0xa01+-0x1109+0x1b0b]['toLowerCas'+'e']()['startsWith']('gp'))_0x6c7594=_0x4fe9ac[0xa3a+0xbf1*-0x2+-0xd*-0x10d];else{const _0x4a1f9d=_0x288b39[_0xba1b18(0x1d0)]()[_0xba1b18(0x162)](/\s+/);_0x4a1f9d[_0xba1b18(0xe4)](),_0x6c7594=_0x4a1f9d[_0xba1b18(0x17a)]('\x20')[_0xba1b18(0x1d0)]();}const _0x27627a=_0x4fe9ac['slice'](-0x832+0xec6+-0x693)[_0xba1b18(0xba)](_0x5c5c32=>/^gp[:\s]/i[_0xba1b18(0x12d)](_0x5c5c32));let _0x15443b=_0x27627a?_0x27627a[_0xba1b18(0x113)](/^gp[:\s]+/i,'')[_0xba1b18(0x1d0)]():null;const _0x509f53=(_0x6c7594||'')[_0xba1b18(0x162)](',')['map'](_0x50e4a9=>_0x50e4a9[_0xba1b18(0x1d0)]())[_0xba1b18(0xe2)](Boolean);if(!_0x509f53['length']){await sendText(_0x18fcf9,_0x22cea9,_0xba1b18(0x215)+_0xba1b18(0xcf)+_0xba1b18(0x14c)+'1,trigger2'+_0xba1b18(0x1de)+_0xba1b18(0x1bd)+'>]\x0aOr:\x20gde'+_0xba1b18(0xf6)+'l\x20(deletes'+_0xba1b18(0x1c1)+_0xba1b18(0x107)+')');return;}if(_0x509f53['length']===0xf1*0x17+0x9*0x43b+-0x3bb9&&_0x509f53[-0x2162+-0x5a*0x28+0x17b9*0x2][_0xba1b18(0x144)+'e']()===_0xba1b18(0x205))try{const _0x297e2f=await db[_0xba1b18(0x1b3)](_0xba1b18(0x18a)+'M\x20filters'),_0x20b9c1=_0x297e2f?.['changes']||-0x1d03+0x1*-0x1716+-0x1*-0x3419;try{automatonCache[_0xba1b18(0x72)]();}catch(_0x364892){}await sendText(_0x18fcf9,_0x22cea9,_0xba1b18(0xe3)+_0xba1b18(0xc8)+_0xba1b18(0x1b7)+_0xba1b18(0x1b0)+_0xba1b18(0x142)+_0x20b9c1);return;}catch(_0x47e112){await sendText(_0x18fcf9,_0x22cea9,_0xba1b18(0x1f1)+_0xba1b18(0x19a)+'\x20filters:\x20'+(_0x47e112?.[_0xba1b18(0x1bc)]||_0x47e112));return;}let _0x5649f6=[];if(_0x15443b){if(_0x15443b['toLowerCas'+'e']()===_0xba1b18(0x205))_0x5649f6=await _0x3d8a44[_0xba1b18(0x183)+_0xba1b18(0x165)]();else{const _0x52e023=await _0x3d8a44[_0xba1b18(0x184)+'e'](_0x15443b);if(_0x52e023)_0x5649f6=[_0x52e023];else{if(_0x15443b[_0xba1b18(0xa0)]('@'))_0x5649f6=[_0x3d8a44[_0xba1b18(0x182)+'oUserJid'](_0x15443b)];else{await sendText(_0x18fcf9,_0x22cea9,_0xba1b18(0x13f)+'\x20alias/jid'+_0xba1b18(0x164)+_0x15443b+'\x22.');return;}}}}else _0x5649f6=['*'];let _0x24a16d=0x2ee*0x3+-0x1601+0xd37;for(const _0x33b529 of uniqArray(_0x5649f6)){const _0xe32bc7=await deleteFilters(_0x33b529,_0x509f53);_0x24a16d+=_0xe32bc7;}await sendText(_0x18fcf9,_0x22cea9,_0xba1b18(0x1a4)+_0x24a16d+(_0xba1b18(0x176)+_0xba1b18(0x19d)+'\x20')+(_0x5649f6[_0xba1b18(0x9c)]===0x7bb+-0x3f1*0x7+0x13dd?_0x5649f6[-0x22d0+0xb4b+0x1*0x1785]:_0xba1b18(0xac)+'argets'));return;}return;}if(_0xad64b9){if(!_0x3c6d93)return;const _0x1a10d1=typeof _0x18fcf9[_0xba1b18(0x178)]===_0xba1b18(0xc4)&&_0x18fcf9[_0xba1b18(0x178)][_0xba1b18(0x1d0)]()[_0xba1b18(0x9c)]?_0x18fcf9['text']['trim']():_0x17e6b2[_0xba1b18(0x1d0)](),_0x1375e1=detectCommandNameFromCmdText(_0x1a10d1);if(!_0x1375e1)return;let _0x1b57cd;try{_0x1b57cd=await getDefault(_0x290d7f)['catch'](()=>null);}catch(_0x56eed8){_0x1b57cd=null;}if(!_0x1b57cd||Array[_0xba1b18(0x219)](_0x1b57cd)&&_0x1b57cd[_0xba1b18(0x9c)]===0x8*0x1ff+-0x1173+0x17b){await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0xc7)+_0xba1b18(0x210)+'ur\x20default'+'\x20connectio'+_0xba1b18(0x14b)+'setdefault'+'\x20first.');return;}const _0x2d1466=Array[_0xba1b18(0x219)](_0x1b57cd)?_0x1b57cd:[_0x1b57cd];let _0x45bf26=[];for(const _0x7a2786 of _0x2d1466){try{const _0x1ba304=await getConnection(_0x7a2786)[_0xba1b18(0x1c6)](()=>null);if(Array[_0xba1b18(0x219)](_0x1ba304))_0x45bf26[_0xba1b18(0x1a1)](..._0x1ba304);else{if(_0x1ba304)_0x45bf26[_0xba1b18(0x1a1)](String(_0x1ba304));}}catch(_0x380333){}}_0x45bf26=uniqArray(_0x45bf26);if(!_0x45bf26[_0xba1b18(0x9c)]){await sendText(_0x18fcf9,_0x59c5fa,'Could\x20not\x20'+_0xba1b18(0x210)+_0xba1b18(0x152)+'\x20connectio'+'n(s):\x20'+_0x2d1466[_0xba1b18(0x17a)](',\x20')+(_0xba1b18(0x211)+_0xba1b18(0x6e)+_0xba1b18(0x124)+'ue(s).'));return;}if(_0x1375e1===_0xba1b18(0x15b)){const _0x1195ad=parseFilterCommandText(_0x1a10d1||_0x17e6b2);if(!_0x1195ad||!_0x1195ad[_0xba1b18(0x1ac)][_0xba1b18(0x9c)]||!_0x1195ad[_0xba1b18(0x122)][_0xba1b18(0x9c)]){await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0xf3)+'up\x20admin):'+_0xba1b18(0x200)+_0xba1b18(0x145)+_0xba1b18(0x1b9)+'!response1'+_0xba1b18(0x11a)+_0xba1b18(0x133)+_0xba1b18(0x14a)+_0xba1b18(0x1c5)+'p-jid|alia'+'s|all>');return;}if(_0x1195ad['gp']){let _0x2efb8f=[];const _0x3128be=_0x1195ad['gp'][_0xba1b18(0x1d0)]();if(_0x3128be['toLowerCas'+'e']()===_0xba1b18(0x205))_0x2efb8f=await _0x3d8a44['getUniqueJ'+_0xba1b18(0x165)]();else{const _0x498c83=await _0x3d8a44['resolveNam'+'e'](_0x3128be);if(_0x498c83)_0x2efb8f=[_0x498c83];else{if(_0x3128be[_0xba1b18(0xa0)]('@'))_0x2efb8f=[_0x3d8a44[_0xba1b18(0x182)+_0xba1b18(0x95)](_0x3128be)];else{await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0x13f)+_0xba1b18(0xed)+_0xba1b18(0x164)+_0x3128be+'\x22.');return;}}}let _0x3bc183=0x237d+-0x125*-0x2+0x25c7*-0x1;for(const _0x47ded9 of uniqArray(_0x2efb8f)){for(const _0x31f6cc of _0x1195ad['triggers']){const _0x40717c=await upsertFilterRow(_0x47ded9,_0x31f6cc,_0x1195ad[_0xba1b18(0x122)],_0x16a7c4||'');if(_0x40717c)_0x3bc183++;}}await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0x136)+_0x3bc183+(_0xba1b18(0x7f)+'\x20to\x20')+(_0x2efb8f['length']===-0x21e+0x7*-0x2a+0x9*0x5d?_0x2efb8f[-0x196a+0x1e58+-0x4ee]:_0xba1b18(0xac)+_0xba1b18(0x13a)));return;}let _0x2c9eb5=0x2561+0x16e9+-0x3c4a;for(const _0x461f07 of _0x45bf26){for(const _0x33b93c of _0x1195ad[_0xba1b18(0x1ac)]){const _0x3834e4=await upsertFilterRow(_0x461f07,_0x33b93c,_0x1195ad[_0xba1b18(0x122)],_0x16a7c4||'');if(_0x3834e4)_0x2c9eb5++;}}await sendText(_0x18fcf9,_0x59c5fa,'Saved\x20'+_0x2c9eb5+('\x20filter\x20en'+_0xba1b18(0x1e9)+_0xba1b18(0xae)+_0xba1b18(0x16b)+_0xba1b18(0x1d7))+_0x45bf26[_0xba1b18(0x17a)](',\x20'));return;}if(_0x1375e1==='glistfilte'+'r'){const _0x33f3ee=new Set();for(const _0x252614 of _0x45bf26){const _0x1892b6=await listTriggersForChat(_0x252614);for(const _0x1d18ab of _0x1892b6)_0x33f3ee[_0xba1b18(0x1b5)](_0x1d18ab);}const _0x4b6372=await listTriggersForChat('*');for(const _0x8acc35 of _0x4b6372||[])_0x33f3ee[_0xba1b18(0x1b5)](_0x8acc35);const _0x5f2f5b=Array[_0xba1b18(0x1c4)](_0x33f3ee)[_0xba1b18(0x74)]();await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0x14f)+_0xba1b18(0x1e4)+_0x5f2f5b[_0xba1b18(0x9c)]+(_0xba1b18(0x114)+'or\x20your\x20de'+_0xba1b18(0x1e2)+'ection(s)\x20'+_0xba1b18(0xc2)));if(!_0x5f2f5b['length'])return;let _0x256a9c='';for(const _0x18b4da of _0x5f2f5b){const _0x3919b0='â€¢\x20'+_0x18b4da+'\x0a';(_0x256a9c+_0x3919b0)[_0xba1b18(0x9c)]>-0xf44*-0x2+0x1*0xf3d+0x259*-0x11&&(await sendText(_0x18fcf9,_0x59c5fa,_0x256a9c['trim']()),_0x256a9c=''),_0x256a9c+=_0x3919b0;}if(_0x256a9c['trim']())await sendText(_0x18fcf9,_0x59c5fa,_0x256a9c['trim']());return;}if(_0x1375e1==='gdelfilter'||_0x1375e1===_0xba1b18(0x1a3)+'s'||_0x1375e1===_0xba1b18(0x9a)){const _0x3f8243=(_0x17e6b2||'')[_0xba1b18(0x162)](/\r?\n/)[_0xba1b18(0x181)](_0x4956d6=>_0x4956d6[_0xba1b18(0x1d0)]());let _0x370216=null;if(_0x3f8243[_0xba1b18(0x9c)]>-0x1fd7+-0x7*0x71+0x32d*0xb&&!_0x3f8243[-0x1*0xef5+-0xb0d*-0x1+0x3e9][_0xba1b18(0x144)+'e']()[_0xba1b18(0xc1)]('gp'))_0x370216=_0x3f8243[-0x2e7*0x9+-0x2617+-0x1*-0x4037];else{const _0x4b5800=(_0x1a10d1||_0x17e6b2)[_0xba1b18(0x1d0)]()['split'](/\s+/);_0x4b5800['shift'](),_0x370216=_0x4b5800[_0xba1b18(0x17a)]('\x20')[_0xba1b18(0x1d0)]();}const _0x319027=_0x3f8243[_0xba1b18(0xde)](-0x1*-0x1d36+-0x9fc+-0x1339)[_0xba1b18(0xba)](_0x366cff=>/^gp[:\s]/i[_0xba1b18(0x12d)](_0x366cff));let _0x13c7c9=_0x319027?_0x319027[_0xba1b18(0x113)](/^gp[:\s]+/i,'')[_0xba1b18(0x1d0)]():null;const _0x49c535=(_0x370216||'')[_0xba1b18(0x162)](',')[_0xba1b18(0x181)](_0x688ad2=>_0x688ad2[_0xba1b18(0x1d0)]())['filter'](Boolean);if(!_0x49c535[_0xba1b18(0x9c)]){await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0x180)+_0xba1b18(0x209)+_0xba1b18(0x21c)+'gger2\x20[gp:'+'\x20<group-ji'+_0xba1b18(0xd7)+_0xba1b18(0x89)+_0xba1b18(0x16e)+_0xba1b18(0x1cb)+_0xba1b18(0x1e3)+_0xba1b18(0x1f4)+_0xba1b18(0x17c));return;}if(_0x49c535['length']===0x582+0x2*0x4cb+-0xf17&&_0x49c535[0x23d0+0x1a4d+-0x3e1d][_0xba1b18(0x144)+'e']()===_0xba1b18(0x205))try{const _0x538b2e=await db[_0xba1b18(0x1b3)](_0xba1b18(0x18a)+_0xba1b18(0x8a)),_0x18dd8a=_0x538b2e?.[_0xba1b18(0x193)]||-0x1*-0x2043+0x62*-0x52+0x1*-0xdf;try{automatonCache[_0xba1b18(0x72)]();}catch(_0x4fcd3f){}await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0xe3)+_0xba1b18(0xc8)+_0xba1b18(0x1b7)+'ase.\x20Rows\x20'+'removed:\x20'+_0x18dd8a);return;}catch(_0x4c9a73){await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0x1f1)+'delete\x20all'+'\x20filters:\x20'+(_0x4c9a73?.['message']||_0x4c9a73));return;}if(_0x13c7c9){let _0x348cc3=[];if(_0x13c7c9[_0xba1b18(0x144)+'e']()===_0xba1b18(0x205))_0x348cc3=await _0x3d8a44['getUniqueJ'+_0xba1b18(0x165)]();else{const _0x1960be=await _0x3d8a44[_0xba1b18(0x184)+'e'](_0x13c7c9);if(_0x1960be)_0x348cc3=[_0x1960be];else{if(_0x13c7c9[_0xba1b18(0xa0)]('@'))_0x348cc3=[_0x3d8a44[_0xba1b18(0x182)+_0xba1b18(0x95)](_0x13c7c9)];else{await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0x13f)+_0xba1b18(0xed)+_0xba1b18(0x164)+_0x13c7c9+'\x22.');return;}}}let _0x3dd6b5=0x1*0x14b1+0x4*-0x388+-0x691;for(const _0xa76bf5 of uniqArray(_0x348cc3)){const _0x2ad3a4=await deleteFilters(_0xa76bf5,_0x49c535);_0x3dd6b5+=_0x2ad3a4;}await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0x1a4)+_0x3dd6b5+(_0xba1b18(0x114)+_0xba1b18(0xfa))+(_0x348cc3['length']===0x37*0x9e+-0x3cb+-0x1e26?_0x348cc3[0x1*-0x2195+-0x72b+0x8*0x518]:'multiple\x20t'+'argets'));return;}else{let _0x2afb74=-0x9*0x1cd+0x1f8c+0x1*-0xf57;for(const _0x5778e9 of _0x45bf26){const _0x236121=await deleteFilters(_0x5778e9,_0x49c535);_0x2afb74+=_0x236121;}await sendText(_0x18fcf9,_0x59c5fa,_0xba1b18(0x1a4)+_0x2afb74+(_0xba1b18(0x176)+_0xba1b18(0x146)+'ss\x20your\x20de'+_0xba1b18(0x1e2)+_0xba1b18(0x128)+'\x20')+_0x45bf26[_0xba1b18(0x17a)](',\x20'));return;}}return;}}if(_0xad64b9){if(_0x18fcf9['key'][_0xba1b18(0x9f)])return;const _0x269bc1=_0x59c5fa,_0x30cb27=getMessageText(_0x18fcf9);if(!_0x30cb27)return;const _0x4ae052=String(_0x30cb27||''),_0x3d8c02=await db[_0xba1b18(0x205)](_0xba1b18(0x20f)+_0xba1b18(0x12b)+_0xba1b18(0x8c)+_0xba1b18(0xdc)+_0xba1b18(0xd5)+_0xba1b18(0x105)+')',[_0x269bc1,'*']);if(!_0x3d8c02||_0x3d8c02[_0xba1b18(0x9c)]===-0x1*0xcb8+-0x1*0x1622+0x22da)return;const _0x2f1dbd=(_0x3d8c02||[])['map'](_0x55ab20=>String(_0x55ab20[_0xba1b18(0x12f)]||'')[_0xba1b18(0x1d0)]())[_0xba1b18(0xe2)](Boolean),_0x48535e=[],_0x2ca4bf=[],_0x2b0ac1=[];for(const _0x4cd411 of _0x2f1dbd){const _0x2ab500=String(_0x4cd411)[_0xba1b18(0x1d0)]()[_0xba1b18(0x144)+'e']();if(_0x2ab500[_0xba1b18(0xc1)](_0xba1b18(0x168))){_0x2b0ac1['push'](_0x4cd411[_0xba1b18(0x1c7)](-0x2122+0x1*0x1f75+0x1b3));continue;}if(_0x4cd411['includes']('*')){_0x2ca4bf[_0xba1b18(0x1a1)](_0x4cd411);continue;}_0x48535e[_0xba1b18(0x1a1)](_0x4cd411);}const _0x54cc36=new Set(),_0x5472f0=getConfig()||{},_0x4a262a=_0x5472f0[_0xba1b18(0x8d)]&&typeof _0x5472f0[_0xba1b18(0x8d)]===_0xba1b18(0x11e)?_0x5472f0[_0xba1b18(0x8d)]:{},_0x36ffb1=(_0x4a262a[_0xba1b18(0x150)+_0xba1b18(0x1db)]||_0xba1b18(0x206))[_0xba1b18(0x144)+'e']();let _0x4f24f2=null;if(_0x48535e['length']>-0x1355*-0x1+-0x1022*-0x2+-0x3399)try{const _0x224589=await getAutomatonForChat(_0x269bc1);if(_0x224589&&_0x224589['ac']&&_0x224589['keywords']&&_0x224589[_0xba1b18(0x13d)][_0xba1b18(0x9c)]){const _0x4aa2e9=_0x4ae052[_0xba1b18(0x144)+'e'](),_0x5f4c09=_0x224589['ac'][_0xba1b18(0x1f2)](_0x4aa2e9);for(const _0x14c1a7 of _0x5f4c09){const _0x13a536=_0x14c1a7[_0xba1b18(0x212)],_0x576d91=_0x14c1a7[_0xba1b18(0x1ef)],_0x44c63e=_0x576d91+_0x13a536['length'],_0x915bc2=_0x576d91===-0x2f*0x95+0x827+0x1334||!/\w/[_0xba1b18(0x12d)](_0x4aa2e9[_0x576d91-(0x16c5+0x35f*0x9+-0x5*0xa9f)]),_0x4c84ba=_0x44c63e===_0x4aa2e9['length']||!/\w/[_0xba1b18(0x12d)](_0x4aa2e9[_0x44c63e]);if(_0x915bc2&&_0x4c84ba){const _0x384e89=_0x224589['lowerToOri'+'g'][_0xba1b18(0x177)](_0x13a536)||null;if(_0x384e89){_0x4f24f2=_0x384e89;break;}}}}else for(const _0x28a95b of _0x48535e){const _0x19b7d2=new RegExp('\x5cb'+escapeRegex(String(_0x28a95b))+'\x5cb','i');if(_0x19b7d2[_0xba1b18(0x12d)](_0x4ae052)){_0x4f24f2=_0x28a95b;break;}}}catch(_0x2617c7){warn('[gfilter]\x20'+'AhoCorasic'+_0xba1b18(0x21a)+_0xba1b18(0x7d)+(_0x2617c7?.[_0xba1b18(0x1bc)]||_0x2617c7));for(const _0x5e0cbe of _0x48535e){try{const _0x10b78d=new RegExp('\x5cb'+escapeRegex(String(_0x5e0cbe))+'\x5cb','i');if(_0x10b78d[_0xba1b18(0x12d)](_0x4ae052)){_0x4f24f2=_0x5e0cbe;break;}}catch(_0x1cde58){}}}if(!_0x4f24f2&&_0x2ca4bf['length']>-0xb73*-0x1+-0xc12+-0x3*-0x35)for(const _0x412e44 of _0x2ca4bf){try{const _0x4cae5a=new RegExp(wildcardToRegexPattern(_0x412e44),'i');if(_0x4cae5a[_0xba1b18(0x12d)](_0x4ae052)){_0x4f24f2=_0x412e44;break;}}catch(_0x748543){if(_0x4ae052['toLowerCas'+'e']()[_0xba1b18(0xa0)](_0x412e44[_0xba1b18(0x113)](/\*/g,'')[_0xba1b18(0x144)+'e']())){_0x4f24f2=_0x412e44;break;}}}if(!_0x4f24f2&&_0x2b0ac1[_0xba1b18(0x9c)]>-0x1b*0x16e+0x5b6*0x4+0x1*0xfc2)for(const _0x17a0ae of _0x2b0ac1){try{const _0x35fe54=new RegExp(_0x17a0ae,'i');if(_0x35fe54[_0xba1b18(0x12d)](_0x4ae052)){_0x4f24f2='regex:'+_0x17a0ae;break;}}catch(_0x221530){warn(_0xba1b18(0x14f)+_0xba1b18(0x1a0)+_0xba1b18(0xa6)+_0xba1b18(0x87)+_0x269bc1+':\x20\x22'+_0x17a0ae+'\x22\x20-\x20'+(_0x221530?.[_0xba1b18(0x1bc)]||_0x221530));}}if(_0x4f24f2){let _0x2b0fdf=await pickResponseAndAdvance(_0x269bc1,_0x4f24f2,_0x36ffb1);if(!_0x2b0fdf)_0x2b0fdf=await pickResponseAndAdvance('*',_0x4f24f2,_0x36ffb1);if(!_0x2b0fdf)return;if(_0x54cc36[_0xba1b18(0x153)](_0x2b0fdf))return;await sendText(_0x18fcf9,_0x269bc1,_0x2b0fdf),_0x54cc36[_0xba1b18(0x1b5)](_0x2b0fdf);}}}catch(_0x134144){error(_0x134144,'[gfilter]\x20'+_0xba1b18(0x110)+_0xba1b18(0x97)+(_0x134144?.[_0xba1b18(0x1bc)]||_0x134144));}}export async function cleanup(){const _0x161c3a=_0x5044f3;for(const _0x133637 of processedMessageKeys[_0x161c3a(0x191)]())try{clearTimeout(_0x133637);}catch(_0x3a1c06){}processedMessageKeys[_0x161c3a(0x72)](),automatonCache[_0x161c3a(0x72)](),botRef=null,sendApi=null,info(_0x161c3a(0x14f)+'cleaned\x20up');}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};