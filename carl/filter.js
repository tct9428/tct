const _0x4ccefd=_0x7256;(function(_0xc60e2b,_0x1eadce){const _0x6eb117=_0x7256,_0x50e172=_0xc60e2b();while(!![]){try{const _0x469afe=-parseInt(_0x6eb117(0x21a))/(-0xf76+-0x5f*-0x26+0x15d)*(-parseInt(_0x6eb117(0x20a))/(0x2*0x293+-0x97*-0x10+-0xe94))+parseInt(_0x6eb117(0x72))/(-0x21a9+0x212d+0x7f)*(parseInt(_0x6eb117(0x1f6))/(0x2668+-0x1*-0x65b+-0x2cbf))+parseInt(_0x6eb117(0x9d))/(-0x2537+-0xc7*0x2+0x2*0x1365)*(-parseInt(_0x6eb117(0x20b))/(0x1fe5+0x6*0x403+-0x37f1*0x1))+parseInt(_0x6eb117(0xfe))/(-0x2471+0x21*-0xfb+0x44d3)+-parseInt(_0x6eb117(0x91))/(-0x1f28+0x11ea*0x1+0x2*0x6a3)*(-parseInt(_0x6eb117(0x175))/(-0x923+-0x14*0x1d0+0x2d6c))+parseInt(_0x6eb117(0x199))/(0x2608+0x1a8b+-0x1583*0x3)*(parseInt(_0x6eb117(0x17c))/(0xb89*-0x3+-0x166e+0x1c8a*0x2))+-parseInt(_0x6eb117(0x1ad))/(-0xbe*0x2e+0x1c8e+-0xe*-0x67);if(_0x469afe===_0x1eadce)break;else _0x50e172['push'](_0x50e172['shift']());}catch(_0x75206c){_0x50e172['push'](_0x50e172['shift']());}}}(_0x3d7d,-0x40583*-0x6+0xc9d*0x173+-0xf129e*0x2));import{getConfig}from'../utils/config.js';function _0x7256(_0x14e081,_0x5837c0){const _0x1f7d36=_0x3d7d();return _0x7256=function(_0x1215f5,_0xce23f1){_0x1215f5=_0x1215f5-(-0x56b*-0x5+-0x1230+0x881*-0x1);let _0x301e69=_0x1f7d36[_0x1215f5];return _0x301e69;},_0x7256(_0x14e081,_0x5837c0);}import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x8fb565 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x4ccefd(0xae);export const version=_0x4ccefd(0xda);export const priority=-0x1*0x1841+-0x64*0x49+0x353d;export const configKeys=[_0x4ccefd(0xd0)];export const commands=[_0x4ccefd(0xae),_0x4ccefd(0x1d9)+'r','gdelfilter',_0x4ccefd(0x10a)+'s',_0x4ccefd(0x142)];function clampTypingMs(_0x3f32c5){const _0x30b51c=_0x4ccefd,_0x2fe2d3=Number(_0x3f32c5);if(!Number[_0x30b51c(0xb2)](_0x2fe2d3)||isNaN(_0x2fe2d3))return-0x140*0xf+0x2547*-0x1+0x3807;if(_0x2fe2d3<=0xa61+0x1*0xde9+-0x184a)return-0x141b*0x1+-0xd*-0x233+-0x87c;if(_0x2fe2d3>-0x652d+-0x3ae*0x3+0xaacf)return 0xca*0xe+0x4cef+0x1d63*-0x1;return Math[_0x30b51c(0x221)](_0x2fe2d3);}function sleep(_0x341a7f){return new Promise(_0x38225e=>setTimeout(_0x38225e,_0x341a7f));}async function simulateTypingAndWait(_0x1aa5d6,_0x49a253,_0x39e18b){const _0x3e4931=_0x4ccefd;if(!_0x39e18b||_0x39e18b<=-0x6d*-0x2f+0x9ad+-0x2*0xed8)return;try{if(_0x1aa5d6&&typeof _0x1aa5d6[_0x3e4931(0x1ce)+'ceUpdate']===_0x3e4931(0x1dd))try{await _0x1aa5d6[_0x3e4931(0x1ce)+_0x3e4931(0x18b)](_0x3e4931(0x1e6),_0x49a253);}catch(_0x1fcfc6){}}catch(_0x265496){}try{await sleep(_0x39e18b);}catch(_0xfad95b){}try{if(_0x1aa5d6&&typeof _0x1aa5d6['sendPresen'+'ceUpdate']===_0x3e4931(0x1dd))try{await _0x1aa5d6['sendPresen'+_0x3e4931(0x18b)](_0x3e4931(0xb3),_0x49a253);}catch(_0x3bafb8){}}catch(_0x12c3a3){}}function ensureArray(_0xcec9e2){const _0x2793be=_0x4ccefd;if(!_0xcec9e2)return[];if(Array[_0x2793be(0x21e)](_0xcec9e2))return _0xcec9e2;return[String(_0xcec9e2)];}function uniqArray(_0x1b539a){const _0x518afb=_0x4ccefd,_0x30ca80=new Set(),_0x5607d2=[];for(const _0x5b20c4 of _0x1b539a){const _0x5898bb=String(_0x5b20c4||'')['trim']();if(!_0x5898bb)continue;!_0x30ca80[_0x518afb(0x1e5)](_0x5898bb)&&(_0x30ca80[_0x518afb(0xa6)](_0x5898bb),_0x5607d2[_0x518afb(0x171)](_0x5898bb));}return _0x5607d2;}function escapeRegex(_0x400de4){const _0x8ff796=_0x4ccefd;return _0x400de4[_0x8ff796(0x209)](/[.*+?^${}()|[\]\\]/g,_0x8ff796(0x14e));}function wildcardToRegexPattern(_0x3774aa){const _0x21a930=_0x4ccefd,_0x13fc98=_0x3774aa['split']('*')[_0x21a930(0xd6)](_0x5234ef=>escapeRegex(_0x5234ef));return'\x5cb'+_0x13fc98[_0x21a930(0x1f1)]('\x5cw*')+'\x5cb';}function clampConfigTypingMs(){const _0x45107e=_0x4ccefd;try{const _0x20162e=getConfig()||{},_0xf3c088=_0x20162e[_0x45107e(0xd0)]&&typeof _0x20162e['FILTERS']===_0x45107e(0x82)?_0x20162e[_0x45107e(0xd0)]:{};return clampTypingMs(_0xf3c088[_0x45107e(0xdd)+_0x45107e(0x1fc)]);}catch(_0x406cbe){return-0x25cf+0x1e57+0x778;}}let botRef=null,sendApi=null;async function sendText(_0xd43312,_0x4065e8,_0x4936c1,_0x486fd2){const _0x57cce3=_0x4ccefd;let _0x377736=null,_0x11b248=null,_0x3a232b=null,_0xdf29e8=[];_0xd43312&&typeof _0xd43312==='object'&&_0xd43312[_0x57cce3(0x112)]&&_0xd43312[_0x57cce3(0x66)]?(_0x377736=_0xd43312,_0x11b248=_0x4065e8,_0x3a232b=_0x4936c1,_0xdf29e8=Array[_0x57cce3(0x21e)](_0x486fd2)?_0x486fd2:[]):(_0x11b248=_0xd43312,_0x3a232b=_0x4065e8,_0xdf29e8=Array[_0x57cce3(0x21e)](_0x4936c1)?_0x4936c1:[]);if(!_0x3a232b)return;if(!_0x11b248){warn('[gfilter]\x20'+'sendText\x20c'+_0x57cce3(0x17b)+_0x57cce3(0x1ae)+_0x57cce3(0x127));return;}const _0x505179={'text':String(_0x3a232b)};if(Array[_0x57cce3(0x21e)](_0xdf29e8)&&_0xdf29e8['length'])_0x505179[_0x57cce3(0x210)]=_0xdf29e8;try{if(!sendApi){warn('[gfilter]\x20'+'no\x20sendApi'+_0x57cce3(0x1df));return;}const _0x20cb82=clampConfigTypingMs();if(_0x20cb82>-0x129*0x8+-0x2405*-0x1+0x559*-0x5)try{await simulateTypingAndWait(botRef?.[_0x57cce3(0xa4)],_0x11b248,_0x20cb82);}catch(_0x3c6266){warn('[gfilter]\x20'+_0x57cce3(0x1d5)+'pingAndWai'+'t\x20error:\x20'+(_0x3c6266?.[_0x57cce3(0x66)]||_0x3c6266));}if(_0x377736&&typeof _0x377736['reply']===_0x57cce3(0x1dd))try{await _0x377736[_0x57cce3(0x1ac)]({'text':String(_0x3a232b),'mentions':_0x505179[_0x57cce3(0x210)]||[]});return;}catch(_0x3b3f49){try{await sendApi(_0x11b248,_0x505179);return;}catch(_0x21b813){warn('[gfilter]\x20'+_0x57cce3(0x97)+_0x57cce3(0x1c0)+'fter\x20reply'+'\x20failure\x20a'+'lso\x20failed'+':\x20'+(_0x21b813?.[_0x57cce3(0x66)]||_0x21b813));return;}}try{await sendApi(_0x11b248,_0x505179);}catch(_0x2ef39b){warn(_0x57cce3(0x1c1)+_0x57cce3(0x19d)+_0x57cce3(0x1af)+_0x11b248+':\x20'+(_0x2ef39b?.[_0x57cce3(0x66)]||_0x2ef39b));}}catch(_0x189124){warn(_0x57cce3(0x1c1)+'sendText\x20u'+'nexpected\x20'+_0x57cce3(0xb5)+(_0x189124?.['message']||_0x189124));}}async function tableExists(_0x4f6007){const _0x9490af=_0x4ccefd;try{const _0x27244b=await db[_0x9490af(0x7e)](_0x9490af(0x183)+_0x9490af(0x88)+_0x9490af(0x124)+_0x9490af(0x19a)+_0x9490af(0x9a)+_0x9490af(0xd2),[_0x4f6007]);return!!_0x27244b;}catch(_0xdac6b5){return warn(_0x9490af(0x1c1)+_0x9490af(0x144)+_0x9490af(0x197)+(_0xdac6b5?.['message']||_0xdac6b5)),![];}}async function getTableColumns(_0x28abec){const _0x19c88a=_0x4ccefd;try{const _0x5eaf8c=await db[_0x19c88a(0x120)]('PRAGMA\x20tab'+_0x19c88a(0xcd)+_0x28abec+')');return(_0x5eaf8c||[])[_0x19c88a(0xd6)](_0x2f1d90=>_0x2f1d90['name']);}catch(_0x1993c9){return warn(_0x19c88a(0x1c1)+_0x19c88a(0xf4)+_0x19c88a(0x1cc)+_0x19c88a(0x15e)+_0x28abec+':\x20'+(_0x1993c9?.[_0x19c88a(0x66)]||_0x1993c9)),[];}}function resolveChatJidFromRow(_0x5e447c){const _0x1e22b6=_0x4ccefd,_0xdaa303=[_0x1e22b6(0x214),'chatid',_0x1e22b6(0x6b),'jid',_0x1e22b6(0x140),_0x1e22b6(0x75)];for(const _0x35f5cc of _0xdaa303)if(_0x35f5cc in _0x5e447c&&_0x5e447c[_0x35f5cc])return String(_0x5e447c[_0x35f5cc]);for(const _0x1257c4 of Object[_0x1e22b6(0x1b4)](_0x5e447c)){const _0x3a8ca9=_0x5e447c[_0x1257c4];if(typeof _0x3a8ca9===_0x1e22b6(0x1a9)&&_0x3a8ca9[_0x1e22b6(0x1d1)]('@'))return _0x3a8ca9;}return null;}function resolveTriggerFromRow(_0x3cf0e7){const _0x10d447=_0x4ccefd,_0x13f05d=['trigger','trig',_0x10d447(0x9e),_0x10d447(0xff),_0x10d447(0x156)];for(const _0x17e1c8 of _0x13f05d)if(_0x17e1c8 in _0x3cf0e7&&_0x3cf0e7[_0x17e1c8])return String(_0x3cf0e7[_0x17e1c8]);for(const _0xeb5279 of Object[_0x10d447(0x1b4)](_0x3cf0e7)){const _0x916a55=_0x3cf0e7[_0xeb5279];if(typeof _0x916a55==='string'&&!_0x916a55[_0x10d447(0x1d1)]('@')&&_0x916a55[_0x10d447(0x6a)]<-0x2d8*0x3+-0xc*-0x1bc+-0x2*0x58e)return _0x916a55;}return null;}function resolveResponsesFromRow(_0x48e988){const _0x208b6c=_0x4ccefd,_0x2126a0=[_0x208b6c(0x117),_0x208b6c(0x113),'reply','replies',_0x208b6c(0xac),_0x208b6c(0x1b1),_0x208b6c(0x66)];for(const _0x1ce2af of _0x2126a0)if(_0x1ce2af in _0x48e988&&_0x48e988[_0x1ce2af]!=null)return _0x48e988[_0x1ce2af];for(const _0x39b60b of Object[_0x208b6c(0x1b4)](_0x48e988)){const _0x335936=_0x48e988[_0x39b60b];if(typeof _0x335936===_0x208b6c(0x1a9)&&(_0x335936[_0x208b6c(0x14a)]()[_0x208b6c(0xf6)]('!')||_0x335936[_0x208b6c(0x14a)]()[_0x208b6c(0x1d1)]('\x0a')||_0x335936['trim']()['startsWith']('[')))return _0x335936;}return null;}async function readAndNormalizeExistingFilters(){const _0x591620=_0x4ccefd;try{const _0x3d4890=await db[_0x591620(0x120)](_0x591620(0x188)+_0x591620(0x1ea)+'s'),_0x3df413=new Map();for(const _0xb22d16 of _0x3d4890||[]){const _0x5a51c2=resolveTriggerFromRow(_0xb22d16)||'',_0x291363=resolveChatJidFromRow(_0xb22d16)||'';if(!_0x5a51c2||!_0x291363)continue;const _0x592c32=resolveResponsesFromRow(_0xb22d16),_0xd20b02=normalizeResponseValue(_0x592c32),_0x24a957=_0xb22d16[_0x591620(0xea)]||_0xb22d16[_0x591620(0xa9)]||_0xb22d16[_0x591620(0x157)]||'';let _0x30d2ce=Number(_0xb22d16[_0x591620(0x177)]||_0xb22d16['ts']||_0xb22d16['timestamp']||_0xb22d16[_0x591620(0x1e3)]||-0x15c5*-0x1+-0x2*0xc77+0x329);if(!_0x30d2ce)_0x30d2ce=Math[_0x591620(0x221)](Date[_0x591620(0x180)]()/(-0x1*-0x13e1+0x2*-0x134d+0x3*0x78b));const _0x37e84f=_0x291363+'||'+_0x5a51c2;if(!_0x3df413[_0x591620(0x1e5)](_0x37e84f))_0x3df413['set'](_0x37e84f,{'trigger':_0x5a51c2,'chat_jid':_0x291363,'responses':_0xd20b02[_0x591620(0x85)](),'created_by':_0x24a957,'created_at':_0x30d2ce});else{const _0x1a4313=_0x3df413[_0x591620(0x7e)](_0x37e84f);_0x1a4313[_0x591620(0x117)]=uniqArray(_0x1a4313[_0x591620(0x117)]['concat'](_0xd20b02)),_0x1a4313[_0x591620(0xea)]=_0x1a4313[_0x591620(0xea)]||_0x24a957,_0x1a4313['created_at']=Math[_0x591620(0x11f)](_0x1a4313[_0x591620(0x177)]||0x18c9+-0x13*-0x2b+-0x1bfa,_0x30d2ce||-0x28e*0xd+0x35*0xa0+0x16);}}return Array[_0x591620(0x1f8)](_0x3df413[_0x591620(0x185)]());}catch(_0x520bc9){return warn(_0x591620(0x1c1)+_0x591620(0x203)+_0x591620(0x9c)+_0x591620(0x10d)+_0x591620(0x161)+(_0x520bc9?.[_0x591620(0x66)]||_0x520bc9)),[];}}async function ensureSchema(){const _0x2a4501=_0x4ccefd,_0x335753={'id':_0x2a4501(0x176)+_0x2a4501(0x108)+'AUTOINCREM'+_0x2a4501(0xc0),'trigger':_0x2a4501(0x1be)+_0x2a4501(0xd8),'chat_jid':_0x2a4501(0x1be)+_0x2a4501(0xd8),'responses':_0x2a4501(0x1be)+_0x2a4501(0x1b7)+_0x2a4501(0x81),'rr_index':'INTEGER\x20DE'+_0x2a4501(0xdb),'created_by':'TEXT\x20DEFAU'+_0x2a4501(0xe4),'created_at':'INTEGER\x20DE'+_0x2a4501(0xdb)};try{const _0x45dc8b=await tableExists(_0x2a4501(0xd3));if(!_0x45dc8b){const _0x251e05=Object[_0x2a4501(0xd5)](_0x335753)[_0x2a4501(0xd6)](([_0x1926eb,_0x31ac85])=>_0x1926eb+'\x20'+_0x31ac85)[_0x2a4501(0x1f1)](',\x0a\x20\x20');await db[_0x2a4501(0x194)](_0x2a4501(0x1d4)+_0x2a4501(0xc7)+_0x2a4501(0xb0)+_0x2a4501(0x1c8)+'\x20\x20'+_0x251e05+(_0x2a4501(0x167)+_0x2a4501(0x121)+_0x2a4501(0x99)+_0x2a4501(0xd7)+_0x2a4501(0x1ec)+_0x2a4501(0x21f)));try{await db[_0x2a4501(0x194)](_0x2a4501(0xc9)+'EX\x20IF\x20NOT\x20'+_0x2a4501(0x1f9)+'_filters_c'+_0x2a4501(0x12d)+_0x2a4501(0x172)+_0x2a4501(0xb9));}catch(_0x19d728){}try{await db['exec'](_0x2a4501(0x207)+_0x2a4501(0x189)+_0x2a4501(0xf0)+_0x2a4501(0x8c)+_0x2a4501(0xbf)+_0x2a4501(0x6d)+_0x2a4501(0xa3)+'id,\x20trigge'+_0x2a4501(0xab));}catch(_0x5f0479){}info('[gfilter]\x20'+_0x2a4501(0x146)+_0x2a4501(0x1c5)+_0x2a4501(0x90)+_0x2a4501(0xa8)+_0x2a4501(0x8a));return;}const _0xf8e5fe=await getTableColumns(_0x2a4501(0xd3)),_0x2980c0=[];for(const _0x1660c5 of Object[_0x2a4501(0x1b4)](_0x335753)){if(!_0xf8e5fe[_0x2a4501(0x1d1)](_0x1660c5))_0x2980c0[_0x2a4501(0x171)](_0x1660c5);}if(_0x2980c0[_0x2a4501(0x6a)]===-0xae*0x22+0x270f+0x3*-0x551){try{await db['exec'](_0x2a4501(0xc9)+_0x2a4501(0x1b3)+_0x2a4501(0x1f9)+_0x2a4501(0x205)+_0x2a4501(0x12d)+_0x2a4501(0x172)+_0x2a4501(0xb9));}catch(_0x58d12b){warn(_0x2a4501(0x1c1)+_0x2a4501(0x20c)+':\x20'+(_0x58d12b?.['message']||_0x58d12b));}try{await db[_0x2a4501(0x194)](_0x2a4501(0x207)+_0x2a4501(0x189)+_0x2a4501(0xf0)+_0x2a4501(0x8c)+_0x2a4501(0xbf)+_0x2a4501(0x6d)+'ers(chat_j'+_0x2a4501(0x141)+'r);');}catch(_0x336c12){warn(_0x2a4501(0x1c1)+'unique\x20idx'+':\x20'+(_0x336c12?.[_0x2a4501(0x66)]||_0x336c12));}return;}const _0x50fa6e=_0x2980c0['every'](_0x274d09=>!['id',_0x2a4501(0x122),_0x2a4501(0x214)]['includes'](_0x274d09));if(_0x50fa6e){for(const _0x45fbbe of _0x2980c0){try{const _0x39eb34=_0x335753[_0x45fbbe],_0x250c43=_0x39eb34[_0x2a4501(0x12e)]('\x20')[_0x2a4501(0x85)](-0x11e*-0x1a+-0x1b*0x15f+0x7fa*0x1)[_0x2a4501(0x1f1)]('\x20');await db[_0x2a4501(0x194)](_0x2a4501(0x218)+_0x2a4501(0xb0)+_0x2a4501(0xbc)+'\x20'+_0x45fbbe+'\x20'+_0x250c43),info(_0x2a4501(0x1c1)+_0x2a4501(0x1f5)+_0x2a4501(0xfa)+'\x20'+_0x45fbbe+('\x20to\x20filter'+_0x2a4501(0x164)));}catch(_0x22e59c){warn(_0x2a4501(0x1c1)+'adding\x20col'+_0x2a4501(0x10f)+_0x45fbbe+_0x2a4501(0xbe)+(_0x22e59c?.[_0x2a4501(0x66)]||_0x22e59c));}}try{await db['exec'](_0x2a4501(0xc9)+_0x2a4501(0x1b3)+'EXISTS\x20idx'+_0x2a4501(0x205)+_0x2a4501(0x12d)+_0x2a4501(0x172)+'jid);');}catch(_0x1aeca0){warn(_0x2a4501(0x1c1)+'idx\x20create'+':\x20'+(_0x1aeca0?.[_0x2a4501(0x66)]||_0x1aeca0));}try{await db['exec'](_0x2a4501(0x207)+'QUE\x20INDEX\x20'+_0x2a4501(0xf0)+'STS\x20idx_fi'+_0x2a4501(0xbf)+_0x2a4501(0x6d)+'ers(chat_j'+_0x2a4501(0x141)+'r);');}catch(_0x4c29c9){warn('[gfilter]\x20'+'unique\x20idx'+':\x20'+(_0x4c29c9?.[_0x2a4501(0x66)]||_0x4c29c9));}return;}info(_0x2a4501(0x1c1)+_0x2a4501(0x18a)+'ters\x20table'+_0x2a4501(0x13c)+'-\x20performi'+_0x2a4501(0x138)+_0x2a4501(0x6c));const _0x47646e=await readAndNormalizeExistingFilters();await db['exec'](_0x2a4501(0xc1)+_0x2a4501(0x107)+_0x2a4501(0x15f));try{await db[_0x2a4501(0x194)](_0x2a4501(0x17a)+_0x2a4501(0x212)+_0x2a4501(0x106)+_0x2a4501(0xce)+_0x2a4501(0x8e)+_0x2a4501(0x19f)+'PRIMARY\x20KE'+_0x2a4501(0x13f)+'EMENT,\x0a\x20\x20\x20'+_0x2a4501(0x151)+_0x2a4501(0x143)+_0x2a4501(0x19c)+_0x2a4501(0xb8)+_0x2a4501(0xa0)+_0x2a4501(0x206)+_0x2a4501(0x7d)+_0x2a4501(0xeb)+'XT\x20NOT\x20NUL'+_0x2a4501(0x190)+_0x2a4501(0x79)+'\x20\x20\x20\x20rr_ind'+_0x2a4501(0xbd)+_0x2a4501(0x213)+_0x2a4501(0x167)+_0x2a4501(0xea)+'\x20TEXT\x20DEFA'+_0x2a4501(0x1d6)+'\x20\x20\x20\x20\x20\x20crea'+'ted_at\x20INT'+_0x2a4501(0x103)+_0x2a4501(0x1a4)+_0x2a4501(0x1b2)+_0x2a4501(0x1bc)+_0x2a4501(0x128)+_0x2a4501(0x1ba));}catch(_0x17e6db){await db[_0x2a4501(0x194)](_0x2a4501(0x17a)+_0x2a4501(0x212)+_0x2a4501(0x106)+_0x2a4501(0xce)+_0x2a4501(0x8e)+_0x2a4501(0x19f)+'PRIMARY\x20KE'+_0x2a4501(0x13f)+_0x2a4501(0x1fb)+_0x2a4501(0x151)+_0x2a4501(0x143)+_0x2a4501(0x19c)+_0x2a4501(0xb8)+_0x2a4501(0xa0)+'NOT\x20NULL,\x0a'+_0x2a4501(0x7d)+_0x2a4501(0xeb)+_0x2a4501(0x96)+_0x2a4501(0x190)+'\x27[]\x27,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20rr_ind'+_0x2a4501(0xbd)+'\x20DEFAULT\x200'+_0x2a4501(0x167)+_0x2a4501(0xea)+'\x20TEXT\x20DEFA'+_0x2a4501(0x1d6)+'\x20\x20\x20\x20\x20\x20crea'+_0x2a4501(0xf3)+_0x2a4501(0x103)+_0x2a4501(0x208)+_0x2a4501(0x1d0)),warn(_0x2a4501(0x1c1)+_0x2a4501(0x123)+_0x2a4501(0x1de)+_0x2a4501(0x7c)+_0x2a4501(0x168)+'llback');}const _0x3eba38=await db[_0x2a4501(0x1f0)](_0x2a4501(0x1b5)+_0x2a4501(0x15b)+_0x2a4501(0x1db)+_0x2a4501(0x145)+'id,\x20respon'+_0x2a4501(0x1c3)+_0x2a4501(0x158)+_0x2a4501(0xfb)+'ated_at)\x20V'+_0x2a4501(0x20f)+_0x2a4501(0xe0)+_0x2a4501(0x70));try{for(const _0x505fa6 of _0x47646e){const _0x544f1e=JSON[_0x2a4501(0x1a0)](ensureArray(_0x505fa6[_0x2a4501(0x117)]||[]));try{await _0x3eba38[_0x2a4501(0x10b)](_0x505fa6[_0x2a4501(0x122)],_0x505fa6['chat_jid'],_0x544f1e,_0x505fa6[_0x2a4501(0xea)]||'',Number(_0x505fa6[_0x2a4501(0x177)]||Math[_0x2a4501(0x221)](Date[_0x2a4501(0x180)]()/(-0xb05+-0xea2+0x1d8f))));}catch(_0x2b7920){warn('[gfilter]\x20'+_0x2a4501(0x1a2)+_0x2a4501(0xaf)+_0x2a4501(0x126)+'w\x20'+_0x505fa6[_0x2a4501(0x214)]+'@'+_0x505fa6['trigger']+':\x20'+(_0x2b7920?.[_0x2a4501(0x66)]||_0x2b7920));}}}finally{try{await _0x3eba38[_0x2a4501(0x1da)]();}catch(_0x18e60c){}}try{const _0x4112c7=_0x2a4501(0x18f)+_0x2a4501(0x71)+Math[_0x2a4501(0x221)](Date['now']()/(-0x202f+0x1699+-0x16*-0x9d));await db[_0x2a4501(0x194)](_0x2a4501(0x218)+_0x2a4501(0xb0)+'RENAME\x20TO\x20'+_0x4112c7+';'),await db[_0x2a4501(0x194)](_0x2a4501(0x218)+'E\x20filters_'+_0x2a4501(0xc2)+_0x2a4501(0x201)+'s;');try{await db['exec'](_0x2a4501(0xc9)+_0x2a4501(0x1b3)+_0x2a4501(0x1f9)+_0x2a4501(0x205)+_0x2a4501(0x12d)+_0x2a4501(0x172)+_0x2a4501(0xb9));}catch(_0x180360){warn(_0x2a4501(0x1c1)+_0x2a4501(0x18e)+'idx:\x20'+(_0x180360?.['message']||_0x180360));}try{await db[_0x2a4501(0x194)]('CREATE\x20UNI'+'QUE\x20INDEX\x20'+_0x2a4501(0xf0)+'STS\x20idx_fi'+_0x2a4501(0xbf)+_0x2a4501(0x6d)+_0x2a4501(0xa3)+_0x2a4501(0x141)+_0x2a4501(0xab));}catch(_0x36a3c4){warn(_0x2a4501(0x1c1)+'post-swap\x20'+_0x2a4501(0x13d)+':\x20'+(_0x36a3c4?.[_0x2a4501(0x66)]||_0x36a3c4));}info(_0x2a4501(0x1c1)+_0x2a4501(0x87)+_0x2a4501(0x1d8)+_0x2a4501(0xcf)+'\x20renamed\x20t'+'o\x20backup');}catch(_0x272df9){warn(_0x2a4501(0x1c1)+_0x2a4501(0x11e)+_0x2a4501(0x161)+(_0x272df9?.[_0x2a4501(0x66)]||_0x272df9));throw _0x272df9;}finally{await db[_0x2a4501(0x194)](_0x2a4501(0xc1)+_0x2a4501(0x107)+_0x2a4501(0x18d));}}catch(_0x5bd8ea){error(_0x5bd8ea,_0x2a4501(0x1c1)+_0x2a4501(0x111)+_0x2a4501(0x1ee));throw _0x5bd8ea;}}function normalizeResponseValue(_0x472a1e){const _0x362fc9=_0x4ccefd;if(_0x472a1e==null)return[];if(Array['isArray'](_0x472a1e))return uniqArray(_0x472a1e);if(typeof _0x472a1e===_0x362fc9(0x1a9)){let _0x14779a=_0x472a1e[_0x362fc9(0x209)](/\r/g,'');const _0x3c3316=_0x14779a[_0x362fc9(0x14a)]();if(_0x3c3316[_0x362fc9(0xf6)]('['))try{const _0x2c0c0a=JSON[_0x362fc9(0x149)](_0x3c3316);if(Array[_0x362fc9(0x21e)](_0x2c0c0a))return uniqArray(_0x2c0c0a[_0x362fc9(0xd6)](_0xddcb84=>String(_0xddcb84||'')));}catch(_0x3449e7){}_0x14779a=_0x14779a[_0x362fc9(0x209)](/^\s*\n+/,'')['replace'](/\n+\s*$/,'');const _0x56c2ed=_0x14779a['split']('\x0a'),_0x3688fd=_0x56c2ed[_0x362fc9(0x16f)](_0x407498=>_0x407498['trimStart']()[_0x362fc9(0xf6)]('!'));if(_0x3688fd){const _0x59ff92=[];let _0x4d293d=null;for(const _0x4eeed4 of _0x56c2ed){if(_0x4eeed4['trimStart']()['startsWith']('!')){const _0x138c67=_0x4eeed4[_0x362fc9(0x209)](/^\s*!/,''),_0x524a25=_0x138c67[_0x362fc9(0x209)](/\s+$/,'');_0x4d293d=_0x524a25,_0x59ff92[_0x362fc9(0x171)](_0x4d293d);}else{const _0x473d95=_0x4eeed4[_0x362fc9(0x209)](/\s+$/,'');if(_0x4d293d===null)_0x4d293d=_0x473d95,_0x59ff92[_0x362fc9(0x171)](_0x4d293d);else{const _0x3ea657=_0x59ff92[_0x362fc9(0x6a)]-(-0x8b0+-0x3f*0x3d+0x17b4);_0x59ff92[_0x3ea657]=_0x59ff92[_0x3ea657]+'\x0a'+_0x473d95,_0x4d293d=_0x59ff92[_0x3ea657];}}}return uniqArray(_0x59ff92['map'](_0x2f7413=>String(_0x2f7413||'')['trim']()));}else{const _0x42c3ca=_0x56c2ed[_0x362fc9(0xd6)](_0x1e6424=>_0x1e6424['replace'](/\s+$/,''))[_0x362fc9(0x1f1)]('\x0a')[_0x362fc9(0x14a)]();if(!_0x42c3ca)return[];return[_0x42c3ca];}}return[];}async function upsertFilterRow(_0x24fb20,_0xc88a5f,_0x23b515,_0x49e520){const _0x540391=_0x4ccefd;try{const _0x5046a2=Math[_0x540391(0x221)](Date[_0x540391(0x180)]()/(0x22a2+0x200a+-0x3ec4)),_0x6daa11=JSON[_0x540391(0x1a0)](uniqArray(ensureArray(_0x23b515)[_0x540391(0xd6)](_0x3a14e6=>String(_0x3a14e6)[_0x540391(0x14a)]())['filter'](Boolean)));await db[_0x540391(0x10b)]('INSERT\x20INT'+'O\x20filters\x20'+'(trigger,\x20'+_0x540391(0xe2)+'responses,'+_0x540391(0xaa)+_0x540391(0x20e)+_0x540391(0x1a5)+_0x540391(0x193)+_0x540391(0x10e)+_0x540391(0x89)+_0x540391(0x7a)+_0x540391(0xe5)+_0x540391(0x8b)+_0x540391(0x9f)+_0x540391(0xc4)+_0x540391(0x1bf)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+_0x540391(0x202)+'\x20excluded.'+'responses,'+_0x540391(0x115)+_0x540391(0x1e4)+_0x540391(0x94)+'\x20\x20\x20created'+_0x540391(0xee)+_0x540391(0x15c)+_0x540391(0x92)+_0x540391(0x12b)+'ted_at\x20=\x20e'+'xcluded.cr'+'eated_at;',[_0xc88a5f,_0x24fb20,_0x6daa11,_0x49e520||'',_0x5046a2]);try{automatonCache[_0x540391(0xc8)]();}catch(_0x216717){}return info('[gfilter]\x20'+_0x540391(0xf2)+_0x540391(0x174)+_0xc88a5f+_0x540391(0x16a)+_0x24fb20),!![];}catch(_0x579dd4){return error(_0x579dd4,_0x540391(0x1c1)+_0x540391(0xe7)+'er\x20failed\x20'+_0x540391(0x13b)+_0xc88a5f+'\x20@\x20'+_0x24fb20),![];}}async function deleteFilters(_0x4f09fb,_0xf6f6cb){const _0x2c781e=_0x4ccefd;if(!Array[_0x2c781e(0x21e)](_0xf6f6cb)||_0xf6f6cb[_0x2c781e(0x6a)]===-0xce5*0x1+-0x25e2+0x741*0x7)return-0x9*0x1cf+0x2419+-0x13d2;try{let _0x5b94e7=-0x618+-0x1*-0x1a18+-0x1400;for(const _0x362e76 of _0xf6f6cb){const _0x110fa6=await db[_0x2c781e(0x10b)](_0x2c781e(0x14b)+_0x2c781e(0x14f)+'WHERE\x20chat'+'_jid\x20=\x20?\x20A'+'ND\x20trigger'+_0x2c781e(0x67),[_0x4f09fb,_0x362e76]);if(_0x110fa6?.[_0x2c781e(0x182)])_0x5b94e7+=_0x110fa6[_0x2c781e(0x182)];info('[gfilter]\x20'+_0x2c781e(0x102)+_0x362e76+_0x2c781e(0x6e)+_0x4f09fb);}try{automatonCache[_0x2c781e(0xc8)]();}catch(_0x433e25){}return _0x5b94e7;}catch(_0xb919e1){return error(_0xb919e1,_0x2c781e(0x1c1)+_0x2c781e(0x1eb)+'ers\x20failed'+_0x2c781e(0xcc)+_0x4f09fb),-0x67d*-0x2+-0x1ca1+0xfa7;}}async function listTriggersForChat(_0x4f42fa){const _0x11e998=_0x4ccefd;try{const _0x5da479=await db[_0x11e998(0x120)](_0x11e998(0xe3)+_0x11e998(0xc5)+_0x11e998(0xc6)+_0x11e998(0x14c)+_0x11e998(0x200)+_0x11e998(0x95)+_0x11e998(0x130)+'er',[_0x4f42fa]);return(_0x5da479||[])['map'](_0x4c4c0e=>_0x4c4c0e['trigger']);}catch(_0x2bb7c4){return warn(_0x2bb7c4,'[gfilter]\x20'+'listTrigge'+'rsForChat\x20'+_0x11e998(0xa2)+'\x20'+_0x4f42fa),[];}}async function pickResponseAndAdvance(_0x2bf559,_0x296a6c,_0x2da93e=_0x4ccefd(0x17f)){const _0x1efe87=_0x4ccefd;try{const _0x39a508=await db[_0x1efe87(0x7e)](_0x1efe87(0x219)+_0x1efe87(0x7f)+_0x1efe87(0x9b)+_0x1efe87(0x14f)+_0x1efe87(0x211)+_0x1efe87(0x15a)+_0x1efe87(0x1a1)+'\x20=\x20?\x20LIMIT'+'\x201',[_0x2bf559,_0x296a6c]);if(!_0x39a508)return null;let _0x443e68=[];try{_0x443e68=JSON[_0x1efe87(0x149)](_0x39a508[_0x1efe87(0x117)]||'[]');}catch{_0x443e68=ensureArray(_0x39a508['responses']);}_0x443e68=ensureArray(_0x443e68);if(!_0x443e68[_0x1efe87(0x6a)])return null;if((_0x2da93e||'')[_0x1efe87(0x169)+'e']()===_0x1efe87(0x77)){const _0x34953c=Math[_0x1efe87(0x221)](Math[_0x1efe87(0x77)]()*_0x443e68['length']);return _0x443e68[_0x34953c];}const _0x234582=Number(_0x39a508[_0x1efe87(0x195)]||-0x851*-0x2+0x2669*0x1+-0x29f*0x15),_0x1c1ace=_0x443e68[_0x234582%_0x443e68[_0x1efe87(0x6a)]];try{await db[_0x1efe87(0x10b)]('UPDATE\x20fil'+_0x1efe87(0x148)+_0x1efe87(0x11b)+'(rr_index\x20'+_0x1efe87(0xb1)+_0x1efe87(0x14d)+_0x1efe87(0x134)+_0x1efe87(0x1f2),[_0x2bf559,_0x296a6c]);}catch(_0x502b0b){warn('[gfilter]\x20'+_0x1efe87(0x1bd)+'ncrement\x20f'+'ailed:\x20'+(_0x502b0b?.['message']||_0x502b0b));}return _0x1c1ace;}catch(_0x44a46a){return warn('[gfilter]\x20'+_0x1efe87(0x173)+_0x1efe87(0x1b9)+_0x1efe87(0xec)+(_0x44a46a?.[_0x1efe87(0x66)]||_0x44a46a)),null;}}function parseFilterCommandText(_0x2a3a48){const _0x4b7a09=_0x4ccefd;if(!_0x2a3a48)return null;const _0xbee4c1=_0x2a3a48[_0x4b7a09(0x12e)](/\r?\n/)[_0x4b7a09(0xd6)](_0x2bac88=>_0x2bac88[_0x4b7a09(0x209)](/\r/g,''));if(!_0xbee4c1[_0x4b7a09(0x6a)])return null;let _0x4c12cc=(_0xbee4c1[0x67d*0x3+-0x23fc+0x1*0x1085]||'')['trim'](),_0x488158=_0xbee4c1[_0x4b7a09(0x85)](0x1585+-0xf*0x15d+-0x27*0x7),_0x10936c=null;const _0x9b7c5d=_0x4c12cc[_0x4b7a09(0x93)](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);_0x9b7c5d&&(_0x4c12cc=(_0x9b7c5d[0x503+-0x24d+-0x2b5]||'')[_0x4b7a09(0x14a)](),_0x10936c=(_0x9b7c5d[-0x1*-0x1a2c+0x17be+-0x31e8]||'')['trim']());if(!_0x10936c&&_0x488158&&_0x488158[_0x4b7a09(0x6a)]){let _0x413dba=-(0x1314+-0x182b+0x518);for(let _0x54b142=_0x488158[_0x4b7a09(0x6a)]-(0x1cf7+0x65*0x4f+-0x3c21);_0x54b142>=-0x2495+-0x55d+0x29f2;_0x54b142--){if(String(_0x488158[_0x54b142]||'')[_0x4b7a09(0x14a)]()['length']>-0xb69*0x3+0x2*0x506+0x29*0x97){_0x413dba=_0x54b142;break;}}if(_0x413dba>=0x11b7*-0x1+0xbd*0x2+0x103d){const _0x46072d=String(_0x488158[_0x413dba]||'')[_0x4b7a09(0x14a)](),_0x4cbf3a=_0x46072d['match'](/^gp[:\s]*([^\s,]+)\s*$/i);_0x4cbf3a&&(_0x10936c=(_0x4cbf3a[-0x1065*0x2+-0x1251+-0x4*-0xcc7]||'')[_0x4b7a09(0x14a)](),_0x488158[_0x4b7a09(0x21b)](_0x413dba,-0x1*0x76d+-0x9*-0x9e+0xf0*0x2));}}let _0x373344=_0x4c12cc['trim']()[_0x4b7a09(0x12e)](/\s+/)[_0x4b7a09(0x125)](Boolean);if(_0x373344['length']&&_0x373344[0xcda+-0x6*-0x3a2+-0x1153*0x2]['toLowerCas'+'e']()===_0x4b7a09(0xae))_0x373344['shift']();const _0x5d666d=_0x373344[_0x4b7a09(0x1f1)]('\x20')[_0x4b7a09(0x14a)]();let _0x52aff4=[];_0x5d666d&&(_0x5d666d[_0x4b7a09(0x1d1)](',')?_0x52aff4=_0x5d666d[_0x4b7a09(0x12e)](',')[_0x4b7a09(0xd6)](_0x457a8c=>_0x457a8c['trim']())['filter'](Boolean):_0x52aff4=_0x5d666d[_0x4b7a09(0x12e)](/\s+/)['map'](_0x5900af=>_0x5900af[_0x4b7a09(0x14a)]())[_0x4b7a09(0x125)](Boolean));const _0x46c3f9=_0x488158;if(!_0x46c3f9['length'])return{'triggers':_0x52aff4,'responses':[],'gp':_0x10936c};const _0x21849b=_0x46c3f9[_0x4b7a09(0x1f1)]('\x0a'),_0x273766=normalizeResponseValue(_0x21849b);return{'triggers':_0x52aff4,'responses':_0x273766,'gp':_0x10936c};}function getMessageText(_0x1278aa){const _0x393263=_0x4ccefd;if(!_0x1278aa||!_0x1278aa[_0x393263(0x66)])return'';const _0x3e5acd=_0x1278aa[_0x393263(0x66)];if(_0x3e5acd[_0x393263(0x1e7)+'on'])return _0x3e5acd[_0x393263(0x1e7)+'on'];if(_0x3e5acd[_0x393263(0xb4)+'xtMessage']?.[_0x393263(0x13a)])return _0x3e5acd[_0x393263(0xb4)+_0x393263(0x19b)][_0x393263(0x13a)];if(_0x3e5acd[_0x393263(0x7b)+'ge']?.['caption'])return _0x3e5acd['imageMessa'+'ge']['caption'];if(_0x3e5acd[_0x393263(0x21c)+'ge']?.[_0x393263(0x166)])return _0x3e5acd['videoMessa'+'ge'][_0x393263(0x166)];if(_0x3e5acd[_0x393263(0x105)+_0x393263(0xd1)+'ge']?.['selectedBu'+_0x393263(0x1a6)])return _0x3e5acd[_0x393263(0x105)+_0x393263(0xd1)+'ge'][_0x393263(0x1d2)+_0x393263(0x1a6)];if(_0x3e5acd[_0x393263(0x150)+'seMessage']?.[_0x393263(0x12f)+'ctReply']?.[_0x393263(0x196)+'wId'])return _0x3e5acd[_0x393263(0x150)+_0x393263(0xc3)]['singleSele'+_0x393263(0x74)]['selectedRo'+_0x393263(0x1d7)];return'';}const processedMessageKeys=new Map(),DEDUPE_TTL=(0xaa1*-0x1+0x2009*0x1+0x221*-0xa)*(0x948+-0x17b5+-0xf7*-0x13);function makeDedupeKey(_0x347047){const _0x39b324=_0x4ccefd,_0x5b1d57=_0x347047?.[_0x39b324(0x112)];if(!_0x5b1d57)return null;const _0x4662ab=_0x5b1d57['id']||_0x5b1d57?.['participan'+'t']||'',_0x9da960=_0x5b1d57['remoteJid']||'';return _0x9da960+'::'+_0x4662ab;}function isMsgProcessed(_0x1d8b33){const _0x5e9f1=_0x4ccefd;return _0x1d8b33&&processedMessageKeys[_0x5e9f1(0x1e5)](_0x1d8b33);}function markMsgProcessed(_0x940044){const _0x2e313f=_0x4ccefd;if(!_0x940044)return;processedMessageKeys[_0x2e313f(0x1e5)](_0x940044)&&clearTimeout(processedMessageKeys[_0x2e313f(0x7e)](_0x940044));const _0xa12437=setTimeout(()=>processedMessageKeys[_0x2e313f(0x1ca)](_0x940044),DEDUPE_TTL);processedMessageKeys[_0x2e313f(0x1e1)](_0x940044,_0xa12437);}class Aho{constructor(){const _0x2cd886=_0x4ccefd;this[_0x2cd886(0x15d)]=[{'next':Object[_0x2cd886(0xe1)](null),'fail':0x0,'output':[]}];}[_0x4ccefd(0x21d)](_0x208e80){const _0x4f76bb=_0x4ccefd;this[_0x4f76bb(0x15d)]=[{'next':Object['create'](null),'fail':0x0,'output':[]}];for(const _0x37ba19 of _0x208e80){let _0x54541c=0x1*-0x1a05+-0x164f+-0x80e*-0x6;for(let _0x1786a9=-0x3*-0x93f+-0x1d51+-0x194*-0x1;_0x1786a9<_0x37ba19[_0x4f76bb(0x6a)];_0x1786a9++){const _0x453c2d=_0x37ba19[_0x1786a9];!this[_0x4f76bb(0x15d)][_0x54541c][_0x4f76bb(0x191)][_0x453c2d]&&(this['nodes'][_0x54541c][_0x4f76bb(0x191)][_0x453c2d]=this['nodes'][_0x4f76bb(0x6a)],this['nodes'][_0x4f76bb(0x171)]({'next':Object[_0x4f76bb(0xe1)](null),'fail':0x0,'output':[]})),_0x54541c=this[_0x4f76bb(0x15d)][_0x54541c][_0x4f76bb(0x191)][_0x453c2d];}this[_0x4f76bb(0x15d)][_0x54541c][_0x4f76bb(0x18c)][_0x4f76bb(0x171)](_0x37ba19);}const _0x2a2916=[];for(const _0x3174cf in this[_0x4f76bb(0x15d)][0x335*-0x3+-0x211+0xbb0][_0x4f76bb(0x191)]){const _0x4281e6=this['nodes'][0x1*0x707+-0x1*-0x1094+-0x179b][_0x4f76bb(0x191)][_0x3174cf];this[_0x4f76bb(0x15d)][_0x4281e6][_0x4f76bb(0x78)]=-0xdda+0xf15+-0x13b,_0x2a2916[_0x4f76bb(0x171)](_0x4281e6);}while(_0x2a2916['length']){const _0x1f4cbf=_0x2a2916[_0x4f76bb(0x8d)]();for(const _0x38e01f in this['nodes'][_0x1f4cbf][_0x4f76bb(0x191)]){const _0x583e80=this[_0x4f76bb(0x15d)][_0x1f4cbf][_0x4f76bb(0x191)][_0x38e01f];let _0x101c8b=this[_0x4f76bb(0x15d)][_0x1f4cbf][_0x4f76bb(0x78)];while(_0x101c8b&&!this[_0x4f76bb(0x15d)][_0x101c8b]['next'][_0x38e01f])_0x101c8b=this[_0x4f76bb(0x15d)][_0x101c8b]['fail'];if(this[_0x4f76bb(0x15d)][_0x101c8b]['next'][_0x38e01f])this[_0x4f76bb(0x15d)][_0x583e80][_0x4f76bb(0x78)]=this[_0x4f76bb(0x15d)][_0x101c8b][_0x4f76bb(0x191)][_0x38e01f];else this[_0x4f76bb(0x15d)][_0x583e80]['fail']=0x9bf*-0x4+-0x4a*0x65+0x442e*0x1;this['nodes'][_0x583e80][_0x4f76bb(0x18c)][_0x4f76bb(0x171)](...this[_0x4f76bb(0x15d)][this[_0x4f76bb(0x15d)][_0x583e80][_0x4f76bb(0x78)]][_0x4f76bb(0x18c)]),_0x2a2916[_0x4f76bb(0x171)](_0x583e80);}}}['search'](_0xd0571a){const _0x2899fe=_0x4ccefd,_0x1f6941=[];let _0x39e7ec=0x1158*0x1+-0x182e+-0xa*-0xaf;for(let _0x108cb9=-0x13*0x11f+-0x243e+0x398b;_0x108cb9<_0xd0571a['length'];_0x108cb9++){const _0x368432=_0xd0571a[_0x108cb9];while(_0x39e7ec&&!this['nodes'][_0x39e7ec][_0x2899fe(0x191)][_0x368432])_0x39e7ec=this[_0x2899fe(0x15d)][_0x39e7ec]['fail'];if(this[_0x2899fe(0x15d)][_0x39e7ec][_0x2899fe(0x191)][_0x368432])_0x39e7ec=this[_0x2899fe(0x15d)][_0x39e7ec]['next'][_0x368432];else _0x39e7ec=0x19f8+0x25*-0xbc+0x134;if(this[_0x2899fe(0x15d)][_0x39e7ec][_0x2899fe(0x18c)][_0x2899fe(0x6a)])for(const _0x58906f of this['nodes'][_0x39e7ec][_0x2899fe(0x18c)]){_0x1f6941[_0x2899fe(0x171)]({'keyword':_0x58906f,'index':_0x108cb9-_0x58906f[_0x2899fe(0x6a)]+(0x634*-0x2+0x332*0x8+-0xd27)});}}return _0x1f6941;}}const automatonCache=new Map();async function getAutomatonForChat(_0x4a72ef){const _0x2bc637=_0x4ccefd;if(!_0x4a72ef)return null;if(automatonCache[_0x2bc637(0x1e5)](_0x4a72ef))return automatonCache[_0x2bc637(0x7e)](_0x4a72ef);try{const _0x2a90d9=await db[_0x2bc637(0x120)](_0x2bc637(0xe3)+_0x2bc637(0xc5)+_0x2bc637(0xc6)+_0x2bc637(0x14c)+'RE\x20chat_ji'+_0x2bc637(0xf7)+')',[_0x4a72ef,'*']),_0x33ac78=(_0x2a90d9||[])[_0x2bc637(0xd6)](_0x26d7e1=>String(_0x26d7e1['trigger']||'')[_0x2bc637(0x14a)]())[_0x2bc637(0x125)](Boolean),_0x4d7378=_0x33ac78[_0x2bc637(0x125)](_0x11058b=>{const _0x3ea83c=_0x2bc637,_0x195603=String(_0x11058b)[_0x3ea83c(0x14a)]()['toLowerCas'+'e']();if(_0x195603[_0x3ea83c(0xf6)](_0x3ea83c(0xcb)))return![];if(_0x11058b[_0x3ea83c(0x1d1)]('*'))return![];return!![];}),_0x2347d5=_0x4d7378[_0x2bc637(0xd6)](_0x18af5a=>_0x18af5a[_0x2bc637(0x169)+'e']()),_0x6f10ac=new Map();for(let _0x26c50e=0x1*0xe09+-0x147b+0x672;_0x26c50e<_0x4d7378['length'];_0x26c50e++){_0x6f10ac['set'](_0x2347d5[_0x26c50e],_0x4d7378[_0x26c50e]);}const _0x546fb2=new Aho();if(_0x2347d5[_0x2bc637(0x6a)])_0x546fb2[_0x2bc637(0x21d)](_0x2347d5);const _0x3e8cf0={'ac':_0x546fb2,'keywords':_0x2347d5,'lowerToOrig':_0x6f10ac};return automatonCache[_0x2bc637(0x1e1)](_0x4a72ef,_0x3e8cf0),_0x3e8cf0;}catch(_0x52174d){return warn(_0x2bc637(0x1c1)+'getAutomat'+'onForChat\x20'+_0x2bc637(0xa2)+'\x20'+_0x4a72ef+':\x20'+(_0x52174d?.[_0x2bc637(0x66)]||_0x52174d)),null;}}async function findStoredMatchFromFindings(_0x577fd9=[]){const _0xbaa6c8=_0x4ccefd;try{const _0x514ad8=await listSudo();if(!Array['isArray'](_0x514ad8)||_0x514ad8[_0xbaa6c8(0x6a)]===0x220e+-0x223f+0x31*0x1)return null;const _0x3b6e20=new Set(_0x514ad8[_0xbaa6c8(0xd6)](String));for(const _0x15ad32 of _0x577fd9||[]){if(!_0x15ad32||typeof _0x15ad32[_0xbaa6c8(0x1c4)]!==_0xbaa6c8(0x1a9))continue;const _0x98a941=normalizeToJid(_0x15ad32[_0xbaa6c8(0x1c4)]);if(_0x98a941&&_0x3b6e20[_0xbaa6c8(0x1e5)](_0x98a941))return _0x98a941;if(_0x3b6e20['has'](_0x15ad32[_0xbaa6c8(0x1c4)]))return _0x15ad32['jid'];const _0x557414=String(_0x15ad32[_0xbaa6c8(0x1c4)])[_0xbaa6c8(0x12e)]('@')[0x99*0x3e+0x19b3+-0x2fd*0x15][_0xbaa6c8(0x12e)](':')[0x1db5+-0x1*-0x1d8d+-0x3b42];if(_0x557414)for(const _0x27c689 of _0x514ad8){const _0x519a50=String(_0x27c689)[_0xbaa6c8(0x12e)]('@')[0x1160+0x6*0x2ba+-0x4*0x86f];if(_0x519a50&&_0x519a50===_0x557414)return _0x27c689;}}return null;}catch(_0x5a77c7){return warn(_0xbaa6c8(0x1c1)+_0xbaa6c8(0x69)+_0xbaa6c8(0x133)+_0xbaa6c8(0xb6)+_0xbaa6c8(0x215)+(_0x5a77c7?.[_0xbaa6c8(0x66)]||_0x5a77c7)),null;}}export async function initialize(_0x47109f){const _0x1f8461=_0x4ccefd;botRef=_0x47109f;if(botRef){if(typeof botRef[_0x1f8461(0xad)+'e']===_0x1f8461(0x1dd))sendApi=async(_0x3a1d72,_0x561e5b)=>await botRef['sendMessag'+'e'](_0x3a1d72,_0x561e5b);else botRef[_0x1f8461(0xa4)]&&typeof botRef[_0x1f8461(0xa4)][_0x1f8461(0xad)+'e']==='function'?sendApi=async(_0x556e62,_0x1b9730)=>await botRef[_0x1f8461(0xa4)][_0x1f8461(0xad)+'e'](_0x556e62,_0x1b9730):sendApi=null;}try{await ensureSchema(),info(_0x1f8461(0x1c1)+_0x1f8461(0x10c)+_0x1f8461(0x192)+'bot-state\x20'+_0x1f8461(0x216)+')');}catch(_0x5ac964){error(_0x5ac964,'[gfilter]\x20'+'initialize'+'\x20fatal');throw _0x5ac964;}}function detectCommandNameFromCmdText(_0x5a6408){const _0x550428=_0x4ccefd;if(!_0x5a6408)return null;const _0x59bb25=_0x5a6408[_0x550428(0x14a)]();if(!_0x59bb25)return null;return _0x59bb25[_0x550428(0x12e)](/\s+/)[-0xecc+-0xdf*0x11+0x1*0x1d9b][_0x550428(0x169)+'e']();}export async function onMessage(_0x588feb){const _0x2a16ae=_0x4ccefd;try{if(!_0x588feb||!_0x588feb[_0x2a16ae(0x112)]||!_0x588feb['message'])return;const _0x4006bc=makeDedupeKey(_0x588feb);if(!_0x4006bc)return;if(isMsgProcessed(_0x4006bc))return;markMsgProcessed(_0x4006bc);const _0x796271=getMessageText(_0x588feb);if(!_0x796271)return;const _0x44d8b8=_0x588feb[_0x2a16ae(0x112)]['remoteJid'],_0x474a5f=typeof _0x44d8b8==='string'&&_0x44d8b8[_0x2a16ae(0x1fa)]('@g.us'),_0x4eb84c=_0x588feb[_0x2a16ae(0x112)]&&(_0x588feb[_0x2a16ae(0x112)][_0x2a16ae(0x1b8)+'t']||_0x588feb['key']['from']||_0x588feb[_0x2a16ae(0x112)][_0x2a16ae(0xf8)])||'',_0x3aaf05=(_0x4eb84c||'')[_0x2a16ae(0x12e)]('@')[0x610+-0xf25*-0x2+-0x245a];let _0x2968eb=![];if(_0x474a5f)try{_0x2968eb=await isadmin(botRef,_0x588feb);}catch(_0x5eda69){_0x2968eb=![];}if(_0x588feb[_0x2a16ae(0x1e2)]){const _0x4e6797=typeof _0x588feb[_0x2a16ae(0x13a)]===_0x2a16ae(0x1a9)&&_0x588feb[_0x2a16ae(0x13a)][_0x2a16ae(0x14a)]()[_0x2a16ae(0x6a)]?_0x588feb[_0x2a16ae(0x13a)][_0x2a16ae(0x14a)]():_0x796271[_0x2a16ae(0x14a)](),_0x30dde4=detectCommandNameFromCmdText(_0x4e6797);if(!_0x30dde4)return;if(!_0x30dde4['startsWith']('g'))return;if(!_0x474a5f){const _0x4f6d20=Boolean(_0x588feb[_0x2a16ae(0x112)][_0x2a16ae(0x1cb)]);let _0x281bc9=null;if(_0x4f6d20){const _0x783e96=getBotJid();!_0x783e96?(warn(_0x2a16ae(0x1c1)+_0x2a16ae(0x179)+_0x2a16ae(0x68)+_0x2a16ae(0x1c6)+_0x2a16ae(0x1ed)+_0x2a16ae(0x1b0)+_0x2a16ae(0x1c7)+_0x2a16ae(0xdc)+_0x2a16ae(0x1c2)),_0x281bc9=_0x588feb['key'][_0x2a16ae(0xf8)]):_0x281bc9=_0x783e96;}else{let _0x21bc23=![];try{_0x21bc23=await isSudo(botRef,_0x588feb);}catch(_0xf7d830){_0x21bc23=![];}if(!_0x21bc23)return;const _0x363327=userJidFromCtx(_0x588feb)||{'findings':[]},_0x706910=await findStoredMatchFromFindings(_0x363327['findings']||[]);if(!_0x706910)return;_0x281bc9=_0x706910;}const _0x487b00=parseFilterCommandText(_0x4e6797||_0x796271);if(_0x30dde4==='gfilter'){if(!_0x487b00||!_0x487b00[_0x2a16ae(0x11a)]['length']||!_0x487b00[_0x2a16ae(0x117)][_0x2a16ae(0x6a)]){await sendText(_0x588feb,_0x281bc9,'Usage\x20(PM\x20'+'global\x20by\x20'+_0x2a16ae(0x17d)+'\x20gfilter\x20<'+_0x2a16ae(0x187)+_0x2a16ae(0x1f3)+_0x2a16ae(0x6f)+_0x2a16ae(0x1e0)+_0x2a16ae(0x1ef)+_0x2a16ae(0xa7)+_0x2a16ae(0x101)+':\x20<alias|j'+'id|all>`\x20t'+_0x2a16ae(0x1ab)+_0x2a16ae(0x139)+_0x2a16ae(0x1dc));return;}let _0x19757b=[];if(_0x487b00['gp']){const _0x598b79=_0x487b00['gp']['trim']();if(_0x598b79[_0x2a16ae(0x169)+'e']()===_0x2a16ae(0x120))_0x19757b=await _0x8fb565['getUniqueJ'+_0x2a16ae(0x1ff)]();else{const _0x2e20d8=await _0x8fb565[_0x2a16ae(0x11c)+'e'](_0x598b79);if(_0x2e20d8)_0x19757b=[_0x2e20d8];else{if(_0x598b79[_0x2a16ae(0x1d1)]('@'))_0x19757b=[_0x8fb565['normalizeT'+_0x2a16ae(0xd9)](_0x598b79)];else{await sendText(_0x588feb,_0x281bc9,_0x2a16ae(0x118)+_0x2a16ae(0x204)+_0x2a16ae(0xfc)+_0x598b79+(_0x2a16ae(0x1a7)+_0x2a16ae(0xb7)+'\x20to\x20add\x20al'+_0x2a16ae(0x159)+_0x2a16ae(0x170)+_0x2a16ae(0xe6)));return;}}}}else _0x19757b=['*'];let _0x1c58b6=0x1f24+0x5*0x1a3+-0x2753;for(const _0x108740 of uniqArray(_0x19757b)){for(const _0x5ce6ac of _0x487b00['triggers']){const _0x2e192d=await upsertFilterRow(_0x108740,_0x5ce6ac,_0x487b00[_0x2a16ae(0x117)],_0x4eb84c||'');if(_0x2e192d)_0x1c58b6++;}}await sendText(_0x588feb,_0x281bc9,_0x2a16ae(0x83)+_0x1c58b6+(_0x2a16ae(0x114)+'\x20to\x20')+(_0x19757b[_0x2a16ae(0x6a)]===-0x3e0+0x287+-0x15a*-0x1?_0x19757b[-0x2b5*0x7+0x1*0x1ff9+-0xd06]:_0x2a16ae(0x198)+_0x2a16ae(0x1b6)));return;}if(_0x30dde4===_0x2a16ae(0x1d9)+'r'){const _0x2d66de=(parseFilterCommandText(_0x4e6797||_0x796271)||{})['gp'],_0x5d36eb=_0x2d66de?_0x2d66de[_0x2a16ae(0x169)+'e']()==='all'?'*':await _0x8fb565[_0x2a16ae(0x11c)+'e'](_0x2d66de)||_0x8fb565['normalizeT'+'oUserJid'](_0x2d66de):'*',_0x406960=await listTriggersForChat(_0x5d36eb);await sendText(_0x588feb,_0x281bc9,_0x2a16ae(0x1c1)+_0x406960[_0x2a16ae(0x6a)]+(_0x2a16ae(0x80)+_0x2a16ae(0x162))+(_0x5d36eb==='*'?'GLOBAL\x20(al'+'l\x20groups)':_0x5d36eb));if(!_0x406960['length'])return;let _0x2b83a5='';for(const _0xaabe56 of _0x406960){const _0x206535='•\x20'+_0xaabe56+'\x0a';(_0x2b83a5+_0x206535)[_0x2a16ae(0x6a)]>-0x371+-0x17db+0x2128&&(await sendText(_0x588feb,_0x281bc9,_0x2b83a5[_0x2a16ae(0x14a)]()),_0x2b83a5=''),_0x2b83a5+=_0x206535;}if(_0x2b83a5[_0x2a16ae(0x14a)]())await sendText(_0x588feb,_0x281bc9,_0x2b83a5[_0x2a16ae(0x14a)]());return;}if(_0x30dde4===_0x2a16ae(0x10a)||_0x30dde4===_0x2a16ae(0x10a)+'s'||_0x30dde4===_0x2a16ae(0x142)){const _0x62847f=(_0x796271||'')[_0x2a16ae(0x12e)](/\r?\n/)[_0x2a16ae(0xd6)](_0x123261=>_0x123261['trim']());let _0x3ea19e=null;if(_0x62847f[_0x2a16ae(0x6a)]>-0x26d2+0x483+0x2250&&!_0x62847f[-0x8d*-0x34+-0x188a+-0x419]['toLowerCas'+'e']()[_0x2a16ae(0xf6)]('gp'))_0x3ea19e=_0x62847f[-0x24b3+-0xe52+0x6*0x881];else{const _0x385d74=_0x4e6797['trim']()[_0x2a16ae(0x12e)](/\s+/);_0x385d74[_0x2a16ae(0x8d)](),_0x3ea19e=_0x385d74['join']('\x20')[_0x2a16ae(0x14a)]();}const _0x4d44da=_0x62847f[_0x2a16ae(0x85)](-0xad4+-0x95*0x22+0x43*0x75)['find'](_0x17ac28=>/^gp[:\s]/i[_0x2a16ae(0x8f)](_0x17ac28));let _0x13335b=_0x4d44da?_0x4d44da[_0x2a16ae(0x209)](/^gp[:\s]+/i,'')[_0x2a16ae(0x14a)]():null;const _0xe0fc7c=(_0x3ea19e||'')[_0x2a16ae(0x12e)](',')['map'](_0x3a2af7=>_0x3a2af7[_0x2a16ae(0x14a)]())[_0x2a16ae(0x125)](Boolean);if(!_0xe0fc7c[_0x2a16ae(0x6a)]){await sendText(_0x588feb,_0x281bc9,_0x2a16ae(0x155)+_0x2a16ae(0x109)+'er\x20trigger'+'1,trigger2'+_0x2a16ae(0x119)+_0x2a16ae(0xe9)+_0x2a16ae(0x12a)+'lfilter\x20al'+_0x2a16ae(0x84)+_0x2a16ae(0x1a8)+_0x2a16ae(0x1d3)+')');return;}if(_0xe0fc7c[_0x2a16ae(0x6a)]===-0x20b1*-0x1+0xe*0x87+0x1*-0x2812&&_0xe0fc7c[-0xfa1*0x1+-0x3b1*0x9+-0x1e1*-0x1a][_0x2a16ae(0x169)+'e']()===_0x2a16ae(0x120))try{const _0x185b50=await db[_0x2a16ae(0x10b)](_0x2a16ae(0x14b)+_0x2a16ae(0x178)),_0x3c6a55=_0x185b50?.[_0x2a16ae(0x182)]||-0x1e99+0x380+0x1b19;try{automatonCache[_0x2a16ae(0xc8)]();}catch(_0x14d5a9){}await sendText(_0x588feb,_0x281bc9,_0x2a16ae(0x165)+_0x2a16ae(0x17e)+_0x2a16ae(0x86)+'ase.\x20Rows\x20'+'removed:\x20'+_0x3c6a55);return;}catch(_0x53cd24){await sendText(_0x588feb,_0x281bc9,_0x2a16ae(0x137)+_0x2a16ae(0xe8)+_0x2a16ae(0x136)+(_0x53cd24?.[_0x2a16ae(0x66)]||_0x53cd24));return;}let _0x28816e=[];if(_0x13335b){if(_0x13335b[_0x2a16ae(0x169)+'e']()===_0x2a16ae(0x120))_0x28816e=await _0x8fb565[_0x2a16ae(0x16c)+_0x2a16ae(0x1ff)]();else{const _0x2cd3cb=await _0x8fb565[_0x2a16ae(0x11c)+'e'](_0x13335b);if(_0x2cd3cb)_0x28816e=[_0x2cd3cb];else{if(_0x13335b[_0x2a16ae(0x1d1)]('@'))_0x28816e=[_0x8fb565['normalizeT'+_0x2a16ae(0xd9)](_0x13335b)];else{await sendText(_0x588feb,_0x281bc9,_0x2a16ae(0x118)+_0x2a16ae(0x204)+_0x2a16ae(0xfc)+_0x13335b+'\x22.');return;}}}}else _0x28816e=['*'];let _0x2e62f2=-0xb61+-0x131d+-0x3*-0xa2a;for(const _0x168b2e of uniqArray(_0x28816e)){const _0x1fae19=await deleteFilters(_0x168b2e,_0xe0fc7c);_0x2e62f2+=_0x1fae19;}await sendText(_0x588feb,_0x281bc9,_0x2a16ae(0x152)+_0x2e62f2+(_0x2a16ae(0x1e9)+_0x2a16ae(0xba)+'\x20')+(_0x28816e[_0x2a16ae(0x6a)]===-0x161d+0x635*0x6+0x2c*-0x58?_0x28816e[-0x203*-0x12+0x658+0x1a3*-0x1a]:_0x2a16ae(0x198)+_0x2a16ae(0x1b6)));return;}return;}if(_0x474a5f){if(!_0x2968eb)return;const _0x3b9ebc=typeof _0x588feb[_0x2a16ae(0x13a)]==='string'&&_0x588feb[_0x2a16ae(0x13a)][_0x2a16ae(0x14a)]()[_0x2a16ae(0x6a)]?_0x588feb[_0x2a16ae(0x13a)][_0x2a16ae(0x14a)]():_0x796271[_0x2a16ae(0x14a)](),_0x35c380=detectCommandNameFromCmdText(_0x3b9ebc);if(!_0x35c380)return;let _0x41e981;try{_0x41e981=await getDefault(_0x3aaf05)['catch'](()=>null);}catch(_0x146f26){_0x41e981=null;}if(!_0x41e981||Array[_0x2a16ae(0x21e)](_0x41e981)&&_0x41e981['length']===-0x1*-0x7f0+-0xed1*-0x2+-0x2592){await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x1e8)+_0x2a16ae(0x1f7)+_0x2a16ae(0x1cd)+'\x20connectio'+_0x2a16ae(0x163)+_0x2a16ae(0xbb)+'\x20first.');return;}const _0x498641=Array['isArray'](_0x41e981)?_0x41e981:[_0x41e981];let _0xc46d1a=[];for(const _0x1fa703 of _0x498641){try{const _0x17ae74=await getConnection(_0x1fa703)[_0x2a16ae(0x116)](()=>null);if(Array[_0x2a16ae(0x21e)](_0x17ae74))_0xc46d1a[_0x2a16ae(0x171)](..._0x17ae74);else{if(_0x17ae74)_0xc46d1a[_0x2a16ae(0x171)](String(_0x17ae74));}}catch(_0x271778){}}_0xc46d1a=uniqArray(_0xc46d1a);if(!_0xc46d1a[_0x2a16ae(0x6a)]){await sendText(_0x588feb,_0x44d8b8,'Could\x20not\x20'+_0x2a16ae(0x1f7)+_0x2a16ae(0x1cd)+_0x2a16ae(0xed)+_0x2a16ae(0x217)+_0x498641[_0x2a16ae(0x1f1)](',\x20')+('.\x20Please\x20c'+_0x2a16ae(0xa1)+_0x2a16ae(0x12c)+_0x2a16ae(0xca)));return;}if(_0x35c380==='gfilter'){const _0x2c20d6=parseFilterCommandText(_0x3b9ebc||_0x796271);if(!_0x2c20d6||!_0x2c20d6[_0x2a16ae(0x11a)]['length']||!_0x2c20d6['responses'][_0x2a16ae(0x6a)]){await sendText(_0x588feb,_0x44d8b8,'Usage\x20(gro'+_0x2a16ae(0x1fd)+_0x2a16ae(0x73)+'<trigger1,'+_0x2a16ae(0x129)+_0x2a16ae(0x1f4)+'\x0a!response'+_0x2a16ae(0x16d)+'ly\x20include'+_0x2a16ae(0x1a3)+'p-jid|alia'+'s|all>');return;}if(_0x2c20d6['gp']){let _0x54bd27=[];const _0x445775=_0x2c20d6['gp'][_0x2a16ae(0x14a)]();if(_0x445775['toLowerCas'+'e']()===_0x2a16ae(0x120))_0x54bd27=await _0x8fb565[_0x2a16ae(0x16c)+_0x2a16ae(0x1ff)]();else{const _0x5a750d=await _0x8fb565[_0x2a16ae(0x11c)+'e'](_0x445775);if(_0x5a750d)_0x54bd27=[_0x5a750d];else{if(_0x445775[_0x2a16ae(0x1d1)]('@'))_0x54bd27=[_0x8fb565['normalizeT'+_0x2a16ae(0xd9)](_0x445775)];else{await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x118)+'\x20alias/jid'+_0x2a16ae(0xfc)+_0x445775+'\x22.');return;}}}let _0xcd388e=-0x24ac+0xba1+0x1*0x190b;for(const _0x29436c of uniqArray(_0x54bd27)){for(const _0x4ded36 of _0x2c20d6[_0x2a16ae(0x11a)]){const _0x3548a5=await upsertFilterRow(_0x29436c,_0x4ded36,_0x2c20d6['responses'],_0x4eb84c||'');if(_0x3548a5)_0xcd388e++;}}await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x83)+_0xcd388e+('\x20filter(s)'+_0x2a16ae(0x104))+(_0x54bd27['length']===0x4fb*-0x5+-0x57*0x7+0x1b49?_0x54bd27[-0x243c+-0x103d+0x3479]:_0x2a16ae(0x198)+_0x2a16ae(0x1b6)));return;}let _0x2459c5=0x1*-0xf98+-0x11*0xce+0x1d46;for(const _0x3ad6bb of _0xc46d1a){for(const _0x4cc626 of _0x2c20d6[_0x2a16ae(0x11a)]){const _0x425bfb=await upsertFilterRow(_0x3ad6bb,_0x4cc626,_0x2c20d6[_0x2a16ae(0x117)],_0x4eb84c||'');if(_0x425bfb)_0x2459c5++;}}await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x83)+_0x2459c5+(_0x2a16ae(0x1e9)+'tries\x20to\x20y'+'our\x20defaul'+_0x2a16ae(0x11d)+_0x2a16ae(0x1bb))+_0xc46d1a[_0x2a16ae(0x1f1)](',\x20'));return;}if(_0x35c380===_0x2a16ae(0x1d9)+'r'){const _0x3413f2=new Set();for(const _0x1b8248 of _0xc46d1a){const _0x3d6338=await listTriggersForChat(_0x1b8248);for(const _0x1a7678 of _0x3d6338)_0x3413f2[_0x2a16ae(0xa6)](_0x1a7678);}const _0x231b45=await listTriggersForChat('*');for(const _0x25197f of _0x231b45||[])_0x3413f2[_0x2a16ae(0xa6)](_0x25197f);const _0x125238=Array['from'](_0x3413f2)['sort']();await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x1c1)+_0x2a16ae(0xf5)+_0x125238[_0x2a16ae(0x6a)]+(_0x2a16ae(0x80)+_0x2a16ae(0x20d)+_0x2a16ae(0x184)+_0x2a16ae(0x19e)+_0x2a16ae(0x13e)));if(!_0x125238[_0x2a16ae(0x6a)])return;let _0x52e915='';for(const _0x1920bf of _0x125238){const _0x4dd728='•\x20'+_0x1920bf+'\x0a';(_0x52e915+_0x4dd728)['length']>0x1*0x19b1+0x2490+-0x3865&&(await sendText(_0x588feb,_0x44d8b8,_0x52e915['trim']()),_0x52e915=''),_0x52e915+=_0x4dd728;}if(_0x52e915['trim']())await sendText(_0x588feb,_0x44d8b8,_0x52e915[_0x2a16ae(0x14a)]());return;}if(_0x35c380===_0x2a16ae(0x10a)||_0x35c380===_0x2a16ae(0x10a)+'s'||_0x35c380===_0x2a16ae(0x142)){const _0x6a3e9e=(_0x796271||'')[_0x2a16ae(0x12e)](/\r?\n/)[_0x2a16ae(0xd6)](_0x4fe436=>_0x4fe436['trim']());let _0x4b7979=null;if(_0x6a3e9e['length']>0x1*-0x1085+-0x2587+0x65*0x89&&!_0x6a3e9e[0x6b*-0x3b+-0x1d3d+0x35e7][_0x2a16ae(0x169)+'e']()[_0x2a16ae(0xf6)]('gp'))_0x4b7979=_0x6a3e9e[-0x6bc*-0x3+0x87*0x4+-0x164f];else{const _0x47e3b0=(_0x3b9ebc||_0x796271)[_0x2a16ae(0x14a)]()[_0x2a16ae(0x12e)](/\s+/);_0x47e3b0[_0x2a16ae(0x8d)](),_0x4b7979=_0x47e3b0[_0x2a16ae(0x1f1)]('\x20')[_0x2a16ae(0x14a)]();}const _0x333dd7=_0x6a3e9e[_0x2a16ae(0x85)](0x7*0x14f+-0x3*0x70e+-0x1d*-0x6a)[_0x2a16ae(0x147)](_0x3bd6d6=>/^gp[:\s]/i[_0x2a16ae(0x8f)](_0x3bd6d6));let _0x581240=_0x333dd7?_0x333dd7[_0x2a16ae(0x209)](/^gp[:\s]+/i,'')[_0x2a16ae(0x14a)]():null;const _0x21092a=(_0x4b7979||'')[_0x2a16ae(0x12e)](',')[_0x2a16ae(0xd6)](_0x327e9d=>_0x327e9d[_0x2a16ae(0x14a)]())['filter'](Boolean);if(!_0x21092a[_0x2a16ae(0x6a)]){await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x181)+'lfilter\x20tr'+'igger1,tri'+'gger2\x20[gp:'+_0x2a16ae(0x110)+_0x2a16ae(0x160)+_0x2a16ae(0x100)+'elfilter\x20a'+'ll\x20\x20\x20(ERAS'+_0x2a16ae(0x16e)+'ters\x20from\x20'+_0x2a16ae(0x1c9));return;}if(_0x21092a[_0x2a16ae(0x6a)]===0x919*0x2+-0x1c22+-0x1fd*-0x5&&_0x21092a[0xad1+0x1*-0x275+-0x6b*0x14]['toLowerCas'+'e']()===_0x2a16ae(0x120))try{const _0xe04ecd=await db['run']('DELETE\x20FRO'+_0x2a16ae(0x178)),_0x1b28fc=_0xe04ecd?.[_0x2a16ae(0x182)]||0x676+0x8*0x8a+-0xc5*0xe;try{automatonCache['clear']();}catch(_0x3c6b46){}await sendText(_0x588feb,_0x44d8b8,'Deleted\x20AL'+'L\x20filters\x20'+'from\x20datab'+_0x2a16ae(0xf9)+_0x2a16ae(0x16b)+_0x1b28fc);return;}catch(_0x3cdbca){await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x137)+_0x2a16ae(0xe8)+_0x2a16ae(0x136)+(_0x3cdbca?.['message']||_0x3cdbca));return;}if(_0x581240){let _0x2d79a1=[];if(_0x581240['toLowerCas'+'e']()===_0x2a16ae(0x120))_0x2d79a1=await _0x8fb565[_0x2a16ae(0x16c)+'ids']();else{const _0x1db6ea=await _0x8fb565[_0x2a16ae(0x11c)+'e'](_0x581240);if(_0x1db6ea)_0x2d79a1=[_0x1db6ea];else{if(_0x581240[_0x2a16ae(0x1d1)]('@'))_0x2d79a1=[_0x8fb565[_0x2a16ae(0x98)+_0x2a16ae(0xd9)](_0x581240)];else{await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x118)+_0x2a16ae(0x204)+_0x2a16ae(0xfc)+_0x581240+'\x22.');return;}}}let _0x543094=0x78d+-0x2323+0x1b96;for(const _0x5a2893 of uniqArray(_0x2d79a1)){const _0x2510f7=await deleteFilters(_0x5a2893,_0x21092a);_0x543094+=_0x2510f7;}await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x152)+_0x543094+(_0x2a16ae(0x80)+_0x2a16ae(0x220))+(_0x2d79a1['length']===0x768+0x1a65+-0x21cc?_0x2d79a1[0x107*-0x21+-0x1723+-0x1c85*-0x2]:_0x2a16ae(0x198)+_0x2a16ae(0x1b6)));return;}else{let _0x451496=0x265c+0x1bd1+-0x422d;for(const _0x509808 of _0xc46d1a){const _0x3bbd3c=await deleteFilters(_0x509808,_0x21092a);_0x451496+=_0x3bbd3c;}await sendText(_0x588feb,_0x44d8b8,_0x2a16ae(0x152)+_0x451496+(_0x2a16ae(0x1e9)+_0x2a16ae(0xd4)+_0x2a16ae(0x132)+_0x2a16ae(0x184)+_0x2a16ae(0xfd)+'\x20')+_0xc46d1a[_0x2a16ae(0x1f1)](',\x20'));return;}}return;}}if(_0x474a5f){if(_0x588feb[_0x2a16ae(0x112)][_0x2a16ae(0x1cb)])return;const _0x50242d=_0x44d8b8,_0x2117b1=getMessageText(_0x588feb);if(!_0x2117b1)return;const _0xa7fbc2=String(_0x2117b1||''),_0x4c9f80=await db[_0x2a16ae(0x120)]('SELECT\x20DIS'+_0x2a16ae(0xc5)+'ger\x20FROM\x20f'+_0x2a16ae(0x14c)+_0x2a16ae(0x200)+_0x2a16ae(0xf7)+')',[_0x50242d,'*']);if(!_0x4c9f80||_0x4c9f80['length']===-0x1d1*0x13+-0x76f+0x3b*0xb6)return;const _0x1f4b73=(_0x4c9f80||[])[_0x2a16ae(0xd6)](_0x58fb28=>String(_0x58fb28[_0x2a16ae(0x122)]||'')[_0x2a16ae(0x14a)]())[_0x2a16ae(0x125)](Boolean),_0x45978b=[],_0x4e3aa4=[],_0x4fdcf0=[];for(const _0x2edec9 of _0x1f4b73){const _0x17f87c=String(_0x2edec9)['trim']()['toLowerCas'+'e']();if(_0x17f87c[_0x2a16ae(0xf6)](_0x2a16ae(0xcb))){_0x4fdcf0[_0x2a16ae(0x171)](_0x2edec9[_0x2a16ae(0x1cf)](0x2255+-0x3c9+0x1e86*-0x1));continue;}if(_0x2edec9['includes']('*')){_0x4e3aa4[_0x2a16ae(0x171)](_0x2edec9);continue;}_0x45978b[_0x2a16ae(0x171)](_0x2edec9);}const _0x39b7d3=new Set(),_0x3ecbe3=getConfig()||{},_0x10ee90=_0x3ecbe3[_0x2a16ae(0xd0)]&&typeof _0x3ecbe3[_0x2a16ae(0xd0)]==='object'?_0x3ecbe3[_0x2a16ae(0xd0)]:{},_0x1b390e=(_0x10ee90[_0x2a16ae(0xef)+_0x2a16ae(0x153)]||_0x2a16ae(0x17f))[_0x2a16ae(0x169)+'e']();let _0x398a91=null;if(_0x45978b['length']>-0x67*-0x36+-0xb*-0x2c2+-0x3410)try{const _0x26e00f=await getAutomatonForChat(_0x50242d);if(_0x26e00f&&_0x26e00f['ac']&&_0x26e00f[_0x2a16ae(0x1aa)]&&_0x26e00f[_0x2a16ae(0x1aa)][_0x2a16ae(0x6a)]){const _0x5085fa=_0xa7fbc2[_0x2a16ae(0x169)+'e'](),_0x1b5dd0=_0x26e00f['ac'][_0x2a16ae(0xdf)](_0x5085fa);for(const _0x514ec1 of _0x1b5dd0){const _0x203f35=_0x514ec1[_0x2a16ae(0x9e)],_0x540917=_0x514ec1['index'],_0x3578aa=_0x540917+_0x203f35[_0x2a16ae(0x6a)],_0x569470=_0x540917===-0x1da9+-0x11*0xf7+0x218*0x16||!/\w/[_0x2a16ae(0x8f)](_0x5085fa[_0x540917-(0xff2+-0x240f+0x141e)]),_0xc93f4e=_0x3578aa===_0x5085fa[_0x2a16ae(0x6a)]||!/\w/[_0x2a16ae(0x8f)](_0x5085fa[_0x3578aa]);if(_0x569470&&_0xc93f4e){const _0x254e1f=_0x26e00f[_0x2a16ae(0xa5)+'g'][_0x2a16ae(0x7e)](_0x203f35)||null;if(_0x254e1f){_0x398a91=_0x254e1f;break;}}}}else for(const _0x3ee739 of _0x45978b){const _0x595052=new RegExp('\x5cb'+escapeRegex(String(_0x3ee739))+'\x5cb','i');if(_0x595052[_0x2a16ae(0x8f)](_0xa7fbc2)){_0x398a91=_0x3ee739;break;}}}catch(_0x1f29b9){warn(_0x2a16ae(0x1c1)+_0x2a16ae(0x186)+_0x2a16ae(0x154)+_0x2a16ae(0xbe)+(_0x1f29b9?.[_0x2a16ae(0x66)]||_0x1f29b9));for(const _0x4077c8 of _0x45978b){try{const _0x467ba5=new RegExp('\x5cb'+escapeRegex(String(_0x4077c8))+'\x5cb','i');if(_0x467ba5[_0x2a16ae(0x8f)](_0xa7fbc2)){_0x398a91=_0x4077c8;break;}}catch(_0x31e265){}}}if(!_0x398a91&&_0x4e3aa4[_0x2a16ae(0x6a)]>-0x17*-0x142+-0x157a*-0x1+-0x4*0xc9a)for(const _0x3c7e53 of _0x4e3aa4){try{const _0x3996f1=new RegExp(wildcardToRegexPattern(_0x3c7e53),'i');if(_0x3996f1[_0x2a16ae(0x8f)](_0xa7fbc2)){_0x398a91=_0x3c7e53;break;}}catch(_0x285743){if(_0xa7fbc2['toLowerCas'+'e']()[_0x2a16ae(0x1d1)](_0x3c7e53[_0x2a16ae(0x209)](/\*/g,'')[_0x2a16ae(0x169)+'e']())){_0x398a91=_0x3c7e53;break;}}}if(!_0x398a91&&_0x4fdcf0['length']>0x1502+0x3*-0x6a1+-0x11f)for(const _0x3e52d4 of _0x4fdcf0){try{const _0x566b0d=new RegExp(_0x3e52d4,'i');if(_0x566b0d[_0x2a16ae(0x8f)](_0xa7fbc2)){_0x398a91=_0x2a16ae(0xcb)+_0x3e52d4;break;}}catch(_0x1812f1){warn('[gfilter]\x20'+_0x2a16ae(0x135)+_0x2a16ae(0x131)+_0x2a16ae(0xde)+_0x50242d+_0x2a16ae(0xfc)+_0x3e52d4+_0x2a16ae(0x1fe)+(_0x1812f1?.[_0x2a16ae(0x66)]||_0x1812f1));}}if(_0x398a91){let _0x29f27e=await pickResponseAndAdvance(_0x50242d,_0x398a91,_0x1b390e);if(!_0x29f27e)_0x29f27e=await pickResponseAndAdvance('*',_0x398a91,_0x1b390e);if(!_0x29f27e)return;if(_0x39b7d3[_0x2a16ae(0x1e5)](_0x29f27e))return;await sendText(_0x588feb,_0x50242d,_0x29f27e),_0x39b7d3['add'](_0x29f27e);}}}catch(_0x2433d0){error(_0x2433d0,_0x2a16ae(0x1c1)+_0x2a16ae(0xf1)+_0x2a16ae(0x215)+(_0x2433d0?.[_0x2a16ae(0x66)]||_0x2433d0));}}function _0x3d7d(){const _0x21ef94=['EXISTS\x20idx','endsWith','EMENT,\x0a\x20\x20\x20','_MS','up\x20admin):','\x22\x20-\x20','ids','RE\x20chat_ji','\x20TO\x20filter','esponses\x20=','readAndNor','\x20alias/jid','_filters_c','NOT\x20NULL,\x0a','CREATE\x20UNI','LT\x200\x0a\x20\x20\x20\x20\x20','replace','332ygtBaD','2825742NjcgIg','idx\x20create','or\x20your\x20de','\x20created_b','ALUES\x20(?,\x20','mentions','WHERE\x20chat','LE\x20IF\x20NOT\x20','\x20DEFAULT\x200','chat_jid','ror:\x20','integrated','n(s):\x20','ALTER\x20TABL','SELECT\x20res','775gwbbDi','splice','videoMessa','build','isArray','\x20\x20\x20\x20\x20','rom\x20','floor','message','\x20=\x20?',')\x20returned','findStored','length','chat_id','gration','ue\x20ON\x20filt','\x20@\x20','response1\x0a',',\x20?)','ckup_','1268907zXDgBL','\x0a\x20gfilter\x20','ctReply','room','cleaned\x20up','random','fail','\x27[]\x27,\x0a\x20\x20\x20\x20',',\x20?,\x20?)\x0a\x20\x20','imageMessa','without\x20UN','\x20\x20\x20\x20\x20\x20\x20\x20re','get','ponses,\x20rr','\x20filters\x20f','T\x20\x27[]\x27','object','Saved\x20','l\x20(deletes','slice','from\x20datab','migration\x20','e\x20FROM\x20sql','?,\x20?,\x20?,\x200','ema)','NFLICT(cha','STS\x20idx_fi','shift','\x0a\x20\x20\x20\x20\x20\x20\x20\x20i','test','table\x20(can','8hqAgtD','ed_by,\x0a\x20\x20\x20','match','\x200,\x0a\x20\x20\x20\x20\x20\x20','d\x20=\x20?\x20ORDE','XT\x20NOT\x20NUL','fallback\x20b','normalizeT','hat_jid,\x20t','e=\x27table\x27\x20','_index\x20FRO','malizeExis','5KXhbcZ','keyword','t_jid,\x20tri','_jid\x20TEXT\x20','heck\x20/setd','failed\x20for','ers(chat_j','sock','lowerToOri','add','y\x20include\x20','onical\x20sch','creator','\x20rr_index,','r);','body','sendMessag','gfilter','insert\x20nor','E\x20filters\x20','+\x201)\x20WHERE','isFinite','paused','extendedTe','error:\x20','indings\x20er','ups\x20helper','\x20\x20\x20\x20\x20\x20chat','jid);','tries\x20from','setdefault','ADD\x20COLUMN','ex\x20INTEGER','\x20failed:\x20','lters_uniq','ENT','PRAGMA\x20for','new\x20RENAME','seMessage','gger)\x20DO\x20U','TINCT\x20trig','ger\x20FROM\x20f','REATE\x20TABL','clear','CREATE\x20IND','ue(s).','regex:','\x20for\x20','le_info(','ters_new\x20(','\x20old\x20table','FILTERS','ponseMessa','AND\x20name=?','filters','tries\x20acro','entries','map','rigger)\x0a\x20\x20','ULL','oUserJid','2.2.0','FAULT\x200','d\x20for\x20conf','TYPING_SIM','\x20for\x20chat\x20','search','?,\x20?,\x200,\x20?','create','chat_jid,\x20','SELECT\x20DIS','LT\x20\x27\x27','\x20\x20\x20\x20\x20ON\x20CO','ID.','upsertFilt','delete\x20all','as|jid|all','created_by','sponses\x20TE','ce\x20error:\x20','\x20connectio','_by\x20=\x20excl','RESPONSE_M','IF\x20NOT\x20EXI','Handler\x20er','saved\x20filt','ted_at\x20INT','getTableCo','loaded\x20','startsWith','d\x20IN\x20(?,\x20?','remoteJid','ase.\x20Rows\x20','ing\x20column','ed_by,\x20cre',':\x20\x22','ection(s):','4801874kWLUvb','word','l>]\x0aOr:\x20gd','a\x20line\x20`gp','deleted\x20','EGER\x20DEFAU','\x20to\x20','buttonsRes','EXISTS\x20fil','eign_keys\x20','IMARY\x20KEY\x20',':\x20gdelfilt','gdelfilter','run','initialize','tingFilter','\x20\x20VALUES\x20(','umn\x20','\x20<group-ji','ensureSche','key','response','\x20filter(s)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','catch','responses','Unknown\x20gp','\x20[gp:\x20<ali','triggers','r_index\x20=\x20','resolveNam','t\x20connecti','swap\x20table','max','all','\x20\x20UNIQUE(c','trigger','created\x20fi','ite_master','filter','malized\x20ro','Jid','\x20trigger)\x0a','trigger2>\x0a','>]\x0aOr:\x20gde','\x20\x20\x20\x20\x20\x20crea','efault\x20val','hat\x20ON\x20fil','split','singleSele','R\x20BY\x20trigg','ored\x20regex','ss\x20your\x20de','MatchFromF','=\x20?\x20AND\x20tr','invalid\x20st','\x20filters:\x20','Failed\x20to\x20','ng\x20safe\x20mi','\x20target\x20gr','text','for\x20','\x20detected\x20','unique\x20idx','and\x20GLOBAL','Y\x20AUTOINCR','chat','id,\x20trigge','gdelf','er\x20TEXT\x20NO','tableExist','er,\x20chat_j','created\x20ne','find','ters\x20SET\x20r','parse','trim','DELETE\x20FRO','ilters\x20WHE','\x20chat_jid\x20','\x5c$&','M\x20filters\x20','listRespon','\x20\x20\x20\x20\x20trigg','Deleted\x20','ODE','k\x20matching','Usage\x20(PM)','phrase','author','dex,\x20creat','ias\x20or\x20pas','_jid\x20=\x20?\x20A','O\x20filters_','uded.creat','nodes','r\x20for\x20','=\x20OFF;','d|alias|al','s\x20failed:\x20','or\x20','n(s).\x20Use\x20','s\x20table','Deleted\x20AL','caption',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','IQUE\x20as\x20fa','toLowerCas','\x22\x20->\x20','removed:\x20','getUniqueJ','2\x0aOptional','ES\x20ALL\x20fil','some','s\x20a\x20full\x20J','push','ters(chat_','pickRespon','er:\x20\x22','4209417mUmKQF','INTEGER\x20PR','created_at','M\x20filters','getBotJid(','CREATE\x20TAB','alled\x20with','297CJJHaX','default):\x0a','L\x20filters\x20','roundrobin','now','Usage:\x20gde','changes','SELECT\x20nam','fault\x20conn','values','AhoCorasic','trigger1,t','SELECT\x20*\x20F','QUE\x20INDEX\x20','legacy\x20fil','ceUpdate','output','=\x20ON;','post-swap\x20','filters_ba','L\x20DEFAULT\x20','next','d\x20(sudo\x20+\x20','_at)\x0a\x20\x20\x20\x20\x20','exec','rr_index','selectedRo','s\x20error:\x20','multiple\x20t','562180KpXuBj','\x20WHERE\x20typ','xtMessage','T\x20NULL,\x0a\x20\x20','sendText\x20f','ection(s)\x20','d\x20INTEGER\x20','stringify','ND\x20trigger','could\x20not\x20','\x20gp:\x20<grou','LT\x200,\x0a\x20\x20\x20\x20','y,\x20created','ttonId','\x22.\x20Use\x20gro','\x20everythin','string','keywords','o\x20restrict','reply','33534048sznLxL','out\x20target','ailed\x20to\x20','\x20to\x20ctx.ke','value','\x20\x20\x20\x20UNIQUE','EX\x20IF\x20NOT\x20','keys','INSERT\x20INT','argets','ULL\x20DEFAUL','participan','seAndAdvan','\x20\x20\x20\x20\x20\x20);','on(s):\x20','(chat_jid,','rr_index\x20i','TEXT\x20NOT\x20N','PDATE\x20SET\x0a','are\x20send\x20a','[gfilter]\x20','irmation','ses,\x20rr_in','jid','w\x20filters\x20','\x20empty;\x20fa','y.remoteJi','(\x0a\x20\x20\x20\x20\x20\x20\x20\x20','DB)','delete','fromMe','lumns\x20erro','ur\x20default','sendPresen','substring','\x20);','includes','selectedBu','g\x20globally','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','simulateTy','ULT\x20\x27\x27,\x0a\x20\x20','wId','completed;','glistfilte','finalize','new\x20(trigg','oup(s).','function','lters_new\x20','\x20available','!response2','set','isCommand','time','rr_index\x20=','has','composing','conversati','Could\x20not\x20','\x20filter\x20en','ROM\x20filter','deleteFilt','\x20\x20\x20\x20\x20\x20);\x0a\x20','lling\x20back','ma\x20fatal','\x0aOptionall','prepare','join','igger\x20=\x20?','rigger2>\x0a!','!response1','added\x20miss','12PgeTDU','resolve\x20yo','from'];_0x3d7d=function(){return _0x21ef94;};return _0x3d7d();}export async function cleanup(){const _0x525b6a=_0x4ccefd;for(const _0x59683b of processedMessageKeys[_0x525b6a(0x185)]())try{clearTimeout(_0x59683b);}catch(_0x4cd6b5){}processedMessageKeys['clear'](),automatonCache[_0x525b6a(0xc8)](),botRef=null,sendApi=null,info(_0x525b6a(0x1c1)+_0x525b6a(0x76));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};