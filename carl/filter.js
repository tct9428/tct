const _0x4aea8c=_0x463d;(function(_0x106a3f,_0x12e97c){const _0x56a3f9=_0x463d,_0x5710d4=_0x106a3f();while(!![]){try{const _0x8c97ca=parseInt(_0x56a3f9(0x213))/(0x1*0x1294+0x25fc+0x388f*-0x1)*(parseInt(_0x56a3f9(0x179))/(-0x1e*-0x128+0x20a1+-0x434f))+-parseInt(_0x56a3f9(0x1b4))/(0xa*-0x107+0x1*-0x5e8+0x1031)*(parseInt(_0x56a3f9(0x174))/(0xa4*-0x1c+0xa*-0x37f+0x34ea))+-parseInt(_0x56a3f9(0x21f))/(-0x14fc+-0x1*-0x20ce+-0xbcd)+parseInt(_0x56a3f9(0xd5))/(0x121a+0x1*-0xf4d+-0x2c7)+parseInt(_0x56a3f9(0xf2))/(0x1bd6*0x1+0x1613+-0x31e2)*(-parseInt(_0x56a3f9(0x1c7))/(-0x1d5d+-0x5*-0x694+-0x37f))+parseInt(_0x56a3f9(0x1b7))/(-0x1d*-0x14a+-0x25d3+0x7a)*(parseInt(_0x56a3f9(0x13d))/(0x1533+-0x1b84+0x65b*0x1))+parseInt(_0x56a3f9(0x20f))/(-0xdb3*-0x1+-0x167c*0x1+0xe2*0xa)*(-parseInt(_0x56a3f9(0x97))/(0x17*0x65+-0x478+0x1*-0x48f));if(_0x8c97ca===_0x12e97c)break;else _0x5710d4['push'](_0x5710d4['shift']());}catch(_0x1f1c5d){_0x5710d4['push'](_0x5710d4['shift']());}}}(_0x23ae,0x154e8*0xa+0x12b117+-0x72bfd*0x3));function _0x463d(_0x1cec2d,_0x596f1f){const _0x13b823=_0x23ae();return _0x463d=function(_0x4b1353,_0x331c19){_0x4b1353=_0x4b1353-(-0x72f+-0x1*0x2689+0x2e3e);let _0x32fc62=_0x13b823[_0x4b1353];return _0x32fc62;},_0x463d(_0x1cec2d,_0x596f1f);}import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x2f93db from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';function _0x23ae(){const _0xe8ccc=['adding\x20col','from','\x20\x20\x20\x20\x20ON\x20CO','CREATE\x20IND','\x20chat_jid\x20','Could\x20not\x20','join','\x22\x20->\x20','ur\x20default','getTableCo','gdelfilter','initialize','some','mentions','TINCT\x20trig','hat_jid,\x20t','\x20\x20\x20created','regex:','s|all>','cleaned\x20up','l>]\x0aOr:\x20gd','\x20\x20\x20\x20\x20\x20chat','\x20to\x20','\x20rr_index,','ters\x20from\x20','idx\x20create','XT\x20NOT\x20NUL','caption','pickRespon','\x20TEXT\x20DEFA','ids','isArray','Failed\x20to\x20','build','added\x20miss','selectedRo','unique\x20idx','deleted\x20','t\x20error:\x20','\x20alias/jid','REATE\x20TABL','rr_index','\x20\x20\x20\x20UNIQUE','listRespon','\x20to\x20add\x20al','ma\x20fatal','find','our\x20defaul','filters_ba','a\x20line\x20`gp','PRAGMA\x20for','nexpected\x20','on(s):\x20','\x20TO\x20filter','RE\x20chat_ji','trig','ADD\x20COLUMN','malizeExis','y\x20include\x20','22yMbvVf','\x20\x20UNIQUE(c','chat_id','fromMe','111311mdcbXS','for\x20','add','delete','lfilter\x20tr',':\x20<alias|j','\x20filters\x20f','2\x0aOptional','e\x20FROM\x20sql','conversati','WHERE\x20chat','uded.creat','477065cVSvkF','d|alias|al','\x20old\x20table','stringify','create','time','ailed:\x20','\x20\x20\x20\x20\x20\x20);','ters(chat_','ue(s).','ase.\x20Rows\x20','gdelf','replies','function','upsertFilt','IQUE\x20as\x20fa','push','_by\x20=\x20excl','\x20\x20\x20\x20\x20\x20\x20\x20re','\x20filter\x20en','delete\x20all','migration\x20','jid);','er,\x20chat_j','pingAndWai','STS\x20idx_fi','>]\x0aOr:\x20gde','ES\x20ALL\x20fil','ALUES\x20(?,\x20','_MS','ored\x20regex','match','PRIMARY\x20KE','Handler\x20er','created\x20fi','-\x20performi','insert\x20nor','_jid\x20=\x20?\x20A','test','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','TEXT\x20DEFAU','created_by','sendText\x20f','ex\x20INTEGER','timestamp','rr_index\x20=','\x20filters:\x20',':\x20gdelfilt','r\x20for\x20','and\x20GLOBAL','lumns\x20erro','Deleted\x20','entries','fail','PRAGMA\x20tab','sendPresen','wId','length','3441036vilGyB','ROM\x20filter','message','key','fault\x20conn','_jid\x20TEXT\x20','values','getAutomat','out\x20target','_filters_c','ror:\x20','remoteJid','legacy\x20fil','table\x20(can','saved\x20filt','ponseMessa','_index\x20FRO','getUniqueJ','p-jid|alia','ters_new\x20(','gfilter','gger2\x20[gp:','SELECT\x20DIS','+\x201)\x20WHERE','M\x20filters','integrated','startsWith','responses','s\x20failed:\x20','INTEGER\x20PR','split','umn\x20','LE\x20IF\x20NOT\x20','TYPING_SIM','name','ema)','INTEGER\x20DE','ed_by,\x0a\x20\x20\x20','\x20for\x20','normalizeT','no\x20sendApi','onForChat\x20','idx:\x20','trim','ilters\x20WHE','FAULT\x200','seAndAdvan','NOT\x20NULL,\x0a','without\x20UN','(rr_index\x20','invalid\x20st','Usage\x20(gro','er\x20TEXT\x20NO','\x22.\x20Use\x20gro','\x20\x20\x20\x20\x20\x20crea','map','IMARY\x20KEY\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20i','l\x20(deletes','CREATE\x20TAB','seMessage','n(s).\x20Use\x20','5627964CUAgkc','IF\x20NOT\x20EXI','y.remoteJi','\x20failure\x20a','\x20gp:\x20<grou','ND\x20trigger','AND\x20name=?','\x20fatal','creator','findStored','EX\x20IF\x20NOT\x20','buttonsRes','d\x20IN\x20(?,\x20?','tries\x20to\x20y','oup(s).','1,trigger2','!response2','response','text','AUTOINCREM',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','l\x20groups)','id,\x20trigge','er:\x20\x22','chat','efault\x20val','ULT\x20\x27\x27,\x0a\x20\x20','LT\x200,\x0a\x20\x20\x20\x20','exec','93933jGmzgz','INSERT\x20INT','d\x20for\x20conf','\x20trigger)\x0a','\x20\x20\x20\x20\x20\x20);\x0a\x20','or\x20your\x20de','set','singleSele','filters','\x20failed:\x20','body','keyword','lling\x20back','max','\x20\x20\x20\x20rr_ind','ers\x20failed','ated_at)\x20V','ckup_','SELECT\x20*\x20F','nodes','FILTERS','oUserJid','r);','could\x20not\x20','sendText\x20c','isFinite','E\x20filters_','n(s):\x20','\x20DEFAULT\x200','changes','\x20=\x20?\x20LIMIT','completed;','ll\x20\x20\x20(ERAS','rigger2>\x0a!','?,\x20?,\x200,\x20?','y,\x20created','xcluded.cr','\x5cw*','\x0aOptionall','sendMessag','get','Y\x20AUTOINCR','prepare','alled\x20with','L\x20DEFAULT\x20','w\x20filters\x20','resolveNam','roundrobin','eign_keys\x20','value','includes','TEXT\x20NOT\x20N','llback','L\x20filters\x20','readAndNor','NFLICT(cha','DELETE\x20FRO','[gfilter]\x20','created_at','default):\x0a','E\x20filters\x20','now','parse','\x20gfilter\x20<','\x20for\x20chat\x20','2.2.0','clear','chatid','extendedTe','argets','EXISTS\x20fil','\x20connectio','t\x20connecti','all','DB)','120DzZlfJ','replace','ection(s)\x20','s\x20a\x20full\x20J','ss\x20your\x20de','phrase','malized\x20ro','lters_uniq',',\x20?)','\x27[]\x27,\x0a\x20\x20\x20\x20','igger\x20=\x20?','toLowerCas','(chat_jid,','failed\x20for','fallback\x20b','Usage:\x20gde','EXISTS\x20idx','ng\x20safe\x20mi','s\x20table','t_jid,\x20tri','word','splice','shift','ers(chat_j','\x20);','SELECT\x20nam','ger\x20FROM\x20f','filter','new\x20RENAME','hat\x20ON\x20fil','resolve\x20yo','listTrigge','slice','LT\x200\x0a\x20\x20\x20\x20\x20','ULL\x20DEFAUL','reply','g\x20globally','EGER\x20DEFAU','run','RENAME\x20TO\x20','keys','simulateTy','\x20excluded.','swap\x20table','bot-state\x20','\x20to\x20ctx.ke','s\x20error:\x20','findings','gger)\x20DO\x20U','glistfilte','endsWith','QUE\x20INDEX\x20','er\x20failed\x20','\x20[gp:\x20<ali',',\x20?,\x20?)\x0a\x20\x20','4317760tduses','Unknown\x20gp','\x20\x20\x20\x20\x20trigg','multiple\x20t','tingFilter','12ckOprd','global\x20by\x20','d\x20=\x20?\x20ORDE','created\x20ne','room','\x20filter(s)','d\x20INTEGER\x20','T\x20NULL,\x0a\x20\x20','\x0a!response','finalize','R\x20BY\x20trigg','EMENT,\x0a\x20\x20\x20','CREATE\x20UNI','sendText\x20u','output','\x20\x20VALUES\x20(','keywords','deleteFilt','ias\x20or\x20pas','trimStart','ue\x20ON\x20filt','response1\x0a','igger1,tri','ted_at\x20INT','ensureSche','gration','post-swap\x20','tries\x20from','\x20@\x20','ctReply','Saved\x20','every','ed_by,\x20cre','lters_new\x20','ceUpdate','lfilter\x20al','O\x20filters\x20','trigger','random','ing\x20column','\x20to\x20filter','search','ULL','id,\x20respon','object','ted_at\x20=\x20e','(trigger,\x20','floor','irmation','Deleted\x20AL','\x20detected\x20','rom\x20','next','new\x20(trigg','ups\x20helper','setdefault','imageMessa','k\x20matching','selectedBu','3WmnVuD','paused','eated_at;','693072PeoqiP','esponses\x20=','chat_jid','string','\x22\x20-\x20','xtMessage','jid','catch','up\x20admin):','M\x20filters\x20','id|all>`\x20t','ALTER\x20TABL','\x20empty;\x20fa','<trigger1,',':\x20\x22','lowerToOri','56vJnGfi','@g.us','\x20created_b','are\x20send\x20a','triggers','has','sponses\x20TE','.\x20Please\x20c','ENT','removed:\x20','composing','sock','=\x20?\x20AND\x20tr'];_0x23ae=function(){return _0xe8ccc;};return _0x23ae();}import{getBotJid}from'../utils/bot-state.js';export const name=_0x4aea8c(0xab);export const version=_0x4aea8c(0x133);export const priority=0x2ce+-0xad*-0x4+-0x50a;export const configKeys=[_0x4aea8c(0x106)];export const commands=[_0x4aea8c(0xab),_0x4aea8c(0x16e)+'r','gdelfilter',_0x4aea8c(0x1de)+'s',_0x4aea8c(0x22a)];function clampTypingMs(_0x4de680){const _0x2bf782=_0x4aea8c,_0x22196e=Number(_0x4de680);if(!Number[_0x2bf782(0x10b)](_0x22196e)||isNaN(_0x22196e))return 0x5*-0x71a+-0x46d+0x1*0x27ef;if(_0x22196e<=-0xa6f+-0x56+0xac5)return-0x1e62*-0x1+-0x1c4a+-0x218;if(_0x22196e>-0x1*0x1850+0x53f0+-0x108)return 0xc*0x9c1+-0xb3*-0x89+0x7*-0x1609;return Math[_0x2bf782(0x1a8)](_0x22196e);}function sleep(_0x942fbf){return new Promise(_0x429d72=>setTimeout(_0x429d72,_0x942fbf));}async function simulateTypingAndWait(_0x13f739,_0x476e20,_0x1a10ae){const _0x3d0e45=_0x4aea8c;if(!_0x1a10ae||_0x1a10ae<=-0x5*0x1c1+0x4*0x300+0x1*-0x33b)return;try{if(_0x13f739&&typeof _0x13f739[_0x3d0e45(0x94)+_0x3d0e45(0x19b)]===_0x3d0e45(0x22c))try{await _0x13f739[_0x3d0e45(0x94)+'ceUpdate'](_0x3d0e45(0x1d1),_0x476e20);}catch(_0x2ddfe1){}}catch(_0x48f7e1){}try{await sleep(_0x1a10ae);}catch(_0x4ed7bd){}try{if(_0x13f739&&typeof _0x13f739[_0x3d0e45(0x94)+_0x3d0e45(0x19b)]==='function')try{await _0x13f739[_0x3d0e45(0x94)+_0x3d0e45(0x19b)](_0x3d0e45(0x1b5),_0x476e20);}catch(_0x7bf4a2){}}catch(_0x292d8e){}}function ensureArray(_0x48826a){const _0x415066=_0x4aea8c;if(!_0x48826a)return[];if(Array[_0x415066(0x1f3)](_0x48826a))return _0x48826a;return[String(_0x48826a)];}function uniqArray(_0x25ffff){const _0x101d3c=_0x4aea8c,_0x3a32bb=new Set(),_0x516465=[];for(const _0x457080 of _0x25ffff){const _0x14d9dc=String(_0x457080||'')[_0x101d3c(0xc2)]();if(!_0x14d9dc)continue;!_0x3a32bb[_0x101d3c(0x1cc)](_0x14d9dc)&&(_0x3a32bb['add'](_0x14d9dc),_0x516465[_0x101d3c(0x22f)](_0x14d9dc));}return _0x516465;}function escapeRegex(_0x2b42ed){const _0x19614d=_0x4aea8c;return _0x2b42ed[_0x19614d(0x13e)](/[.*+?^${}()|[\]\\]/g,'\x5c$&');}function wildcardToRegexPattern(_0xd345db){const _0x48ae87=_0x4aea8c,_0xcb3618=_0xd345db[_0x48ae87(0xb5)]('*')[_0x48ae87(0xce)](_0x10e9e3=>escapeRegex(_0x10e9e3));return'\x5cb'+_0xcb3618[_0x48ae87(0x1da)](_0x48ae87(0x117))+'\x5cb';}function clampConfigTypingMs(){const _0x8cd6bf=_0x4aea8c;try{const _0x22a412=getConfig()||{},_0x431c89=_0x22a412['FILTERS']&&typeof _0x22a412[_0x8cd6bf(0x106)]==='object'?_0x22a412[_0x8cd6bf(0x106)]:{};return clampTypingMs(_0x431c89[_0x8cd6bf(0xb8)+_0x8cd6bf(0x23c)]);}catch(_0x2ef561){return 0x1b03+-0x1ec3+-0x1e0*-0x2;}}let botRef=null,sendApi=null;async function sendText(_0x1993af,_0x45b1b2,_0x275d59,_0x54bc52){const _0x4920ed=_0x4aea8c;let _0x3d6d56=null,_0x4b6299=null,_0x1b6a5c=null,_0x352392=[];_0x1993af&&typeof _0x1993af===_0x4920ed(0x1a5)&&_0x1993af['key']&&_0x1993af[_0x4920ed(0x99)]?(_0x3d6d56=_0x1993af,_0x4b6299=_0x45b1b2,_0x1b6a5c=_0x275d59,_0x352392=Array[_0x4920ed(0x1f3)](_0x54bc52)?_0x54bc52:[]):(_0x4b6299=_0x1993af,_0x1b6a5c=_0x45b1b2,_0x352392=Array[_0x4920ed(0x1f3)](_0x275d59)?_0x275d59:[]);if(!_0x1b6a5c)return;if(!_0x4b6299){warn(_0x4920ed(0x12b)+_0x4920ed(0x10a)+_0x4920ed(0x11d)+_0x4920ed(0x9f)+'Jid');return;}const _0x444108={'text':String(_0x1b6a5c)};if(Array['isArray'](_0x352392)&&_0x352392[_0x4920ed(0x96)])_0x444108[_0x4920ed(0x1e1)]=_0x352392;try{if(!sendApi){warn(_0x4920ed(0x12b)+_0x4920ed(0xbf)+'\x20available');return;}const _0xafb6ec=clampConfigTypingMs();if(_0xafb6ec>0x1e55+0x3*-0xb7e+0x425)try{await simulateTypingAndWait(botRef?.['sock'],_0x4b6299,_0xafb6ec);}catch(_0xa0e96d){warn(_0x4920ed(0x12b)+_0x4920ed(0x166)+_0x4920ed(0x237)+_0x4920ed(0x1fa)+(_0xa0e96d?.[_0x4920ed(0x99)]||_0xa0e96d));}if(_0x3d6d56&&typeof _0x3d6d56['reply']===_0x4920ed(0x22c))try{await _0x3d6d56[_0x4920ed(0x160)]({'text':String(_0x1b6a5c),'mentions':_0x444108[_0x4920ed(0x1e1)]||[]});return;}catch(_0x41a2ed){try{await sendApi(_0x4b6299,_0x444108);return;}catch(_0x538466){warn(_0x4920ed(0x12b)+_0x4920ed(0x14b)+_0x4920ed(0x1ca)+'fter\x20reply'+_0x4920ed(0xd8)+'lso\x20failed'+':\x20'+(_0x538466?.[_0x4920ed(0x99)]||_0x538466));return;}}try{await sendApi(_0x4b6299,_0x444108);}catch(_0x54e3b9){warn(_0x4920ed(0x12b)+_0x4920ed(0x87)+'ailed\x20to\x20'+_0x4b6299+':\x20'+(_0x54e3b9?.[_0x4920ed(0x99)]||_0x54e3b9));}}catch(_0x2d1d7c){warn(_0x4920ed(0x12b)+_0x4920ed(0x186)+_0x4920ed(0x207)+'error:\x20'+(_0x2d1d7c?.[_0x4920ed(0x99)]||_0x2d1d7c));}}async function tableExists(_0x39899a){const _0x43c0d8=_0x4aea8c;try{const _0x52a933=await db['get'](_0x43c0d8(0x156)+_0x43c0d8(0x21b)+'ite_master'+'\x20WHERE\x20typ'+'e=\x27table\x27\x20'+_0x43c0d8(0xdb),[_0x39899a]);return!!_0x52a933;}catch(_0x191527){return warn(_0x43c0d8(0x12b)+'tableExist'+_0x43c0d8(0x16b)+(_0x191527?.['message']||_0x191527)),![];}}async function getTableColumns(_0x12f1e3){const _0x43b130=_0x4aea8c;try{const _0x178607=await db[_0x43b130(0x13b)](_0x43b130(0x93)+'le_info('+_0x12f1e3+')');return(_0x178607||[])['map'](_0x42589f=>_0x42589f[_0x43b130(0xb9)]);}catch(_0xe5b8d9){return warn(_0x43b130(0x12b)+_0x43b130(0x1dd)+_0x43b130(0x8f)+_0x43b130(0x8d)+_0x12f1e3+':\x20'+(_0xe5b8d9?.['message']||_0xe5b8d9)),[];}}function resolveChatJidFromRow(_0x143eca){const _0x513d03=_0x4aea8c,_0x50d9fe=[_0x513d03(0x1b9),_0x513d03(0x135),_0x513d03(0x211),_0x513d03(0x1bd),_0x513d03(0xed),_0x513d03(0x17d)];for(const _0xc584db of _0x50d9fe)if(_0xc584db in _0x143eca&&_0x143eca[_0xc584db])return String(_0x143eca[_0xc584db]);for(const _0x319119 of Object['keys'](_0x143eca)){const _0x250234=_0x143eca[_0x319119];if(typeof _0x250234===_0x513d03(0x1ba)&&_0x250234['includes']('@'))return _0x250234;}return null;}function resolveTriggerFromRow(_0x2fd840){const _0x40abd5=_0x4aea8c,_0x377fdf=[_0x40abd5(0x19e),_0x40abd5(0x20b),_0x40abd5(0xfd),_0x40abd5(0x151),_0x40abd5(0x142)];for(const _0x358874 of _0x377fdf)if(_0x358874 in _0x2fd840&&_0x2fd840[_0x358874])return String(_0x2fd840[_0x358874]);for(const _0x11d37f of Object[_0x40abd5(0x165)](_0x2fd840)){const _0x388568=_0x2fd840[_0x11d37f];if(typeof _0x388568===_0x40abd5(0x1ba)&&!_0x388568['includes']('@')&&_0x388568[_0x40abd5(0x96)]<0x7c*-0x1c+0x218b+-0x12cf)return _0x388568;}return null;}function resolveResponsesFromRow(_0xe32c09){const _0x2e05fb=_0x4aea8c,_0x3b90a5=[_0x2e05fb(0xb2),_0x2e05fb(0xe6),'reply',_0x2e05fb(0x22b),_0x2e05fb(0xfc),_0x2e05fb(0x123),_0x2e05fb(0x99)];for(const _0xd9b024 of _0x3b90a5)if(_0xd9b024 in _0xe32c09&&_0xe32c09[_0xd9b024]!=null)return _0xe32c09[_0xd9b024];for(const _0x458f5a of Object[_0x2e05fb(0x165)](_0xe32c09)){const _0x2b5448=_0xe32c09[_0x458f5a];if(typeof _0x2b5448===_0x2e05fb(0x1ba)&&(_0x2b5448[_0x2e05fb(0xc2)]()['startsWith']('!')||_0x2b5448['trim']()[_0x2e05fb(0x124)]('\x0a')||_0x2b5448[_0x2e05fb(0xc2)]()['startsWith']('[')))return _0x2b5448;}return null;}async function readAndNormalizeExistingFilters(){const _0x545082=_0x4aea8c;try{const _0x5e2e80=await db[_0x545082(0x13b)](_0x545082(0x104)+_0x545082(0x98)+'s'),_0xacaee1=new Map();for(const _0x2ae96e of _0x5e2e80||[]){const _0x3d6b15=resolveTriggerFromRow(_0x2ae96e)||'',_0x5b1ddd=resolveChatJidFromRow(_0x2ae96e)||'';if(!_0x3d6b15||!_0x5b1ddd)continue;const _0x4bf2f9=resolveResponsesFromRow(_0x2ae96e),_0x92fa63=normalizeResponseValue(_0x4bf2f9),_0x27b96e=_0x2ae96e[_0x545082(0x86)]||_0x2ae96e[_0x545082(0xdd)]||_0x2ae96e['author']||'';let _0x15c5a2=Number(_0x2ae96e[_0x545082(0x12c)]||_0x2ae96e['ts']||_0x2ae96e[_0x545082(0x89)]||_0x2ae96e[_0x545082(0x224)]||-0x13d6+0x51*-0x2+0x28f*0x8);if(!_0x15c5a2)_0x15c5a2=Math['floor'](Date[_0x545082(0x12f)]()/(-0x2611+-0x1*0x13bf+0x3db8));const _0x3c5125=_0x5b1ddd+'||'+_0x3d6b15;if(!_0xacaee1[_0x545082(0x1cc)](_0x3c5125))_0xacaee1[_0x545082(0xf8)](_0x3c5125,{'trigger':_0x3d6b15,'chat_jid':_0x5b1ddd,'responses':_0x92fa63[_0x545082(0x15d)](),'created_by':_0x27b96e,'created_at':_0x15c5a2});else{const _0x143e9c=_0xacaee1['get'](_0x3c5125);_0x143e9c['responses']=uniqArray(_0x143e9c[_0x545082(0xb2)]['concat'](_0x92fa63)),_0x143e9c[_0x545082(0x86)]=_0x143e9c[_0x545082(0x86)]||_0x27b96e,_0x143e9c[_0x545082(0x12c)]=Math[_0x545082(0xff)](_0x143e9c['created_at']||0x3ab*0xa+-0x191d+-0xb91,_0x15c5a2||0x20d6+0x2303*-0x1+0x22d);}}return Array[_0x545082(0x1d5)](_0xacaee1['values']());}catch(_0x48b356){return warn(_0x545082(0x12b)+_0x545082(0x128)+_0x545082(0x20d)+_0x545082(0x178)+_0x545082(0xb3)+(_0x48b356?.[_0x545082(0x99)]||_0x48b356)),[];}}async function ensureSchema(){const _0x2f779a=_0x4aea8c,_0xf3f73e={'id':_0x2f779a(0xb4)+_0x2f779a(0xcf)+_0x2f779a(0xe8)+_0x2f779a(0x1cf),'trigger':_0x2f779a(0x125)+_0x2f779a(0x1a3),'chat_jid':_0x2f779a(0x125)+_0x2f779a(0x1a3),'responses':_0x2f779a(0x125)+_0x2f779a(0x15f)+'T\x20\x27[]\x27','rr_index':_0x2f779a(0xbb)+_0x2f779a(0xc4),'created_by':_0x2f779a(0x247)+'LT\x20\x27\x27','created_at':'INTEGER\x20DE'+_0x2f779a(0xc4)};try{const _0x4bb5a3=await tableExists(_0x2f779a(0xfa));if(!_0x4bb5a3){const _0x19fbd0=Object[_0x2f779a(0x91)](_0xf3f73e)[_0x2f779a(0xce)](([_0x44f758,_0x1e1f64])=>_0x44f758+'\x20'+_0x1e1f64)[_0x2f779a(0x1da)](',\x0a\x20\x20');await db[_0x2f779a(0xf1)](_0x2f779a(0x246)+_0x2f779a(0x1fc)+_0x2f779a(0x12e)+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20'+_0x19fbd0+(',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2f779a(0x210)+_0x2f779a(0x1e3)+'rigger)\x0a\x20\x20'+_0x2f779a(0xf6)+'\x20\x20\x20\x20\x20'));try{await db[_0x2f779a(0xf1)](_0x2f779a(0x1d7)+'EX\x20IF\x20NOT\x20'+'EXISTS\x20idx'+_0x2f779a(0xa0)+_0x2f779a(0x15a)+'ters(chat_'+_0x2f779a(0x235));}catch(_0xa1f76a){}try{await db[_0x2f779a(0xf1)]('CREATE\x20UNI'+_0x2f779a(0x170)+_0x2f779a(0xd6)+'STS\x20idx_fi'+_0x2f779a(0x144)+'ue\x20ON\x20filt'+_0x2f779a(0x154)+_0x2f779a(0xeb)+'r);');}catch(_0x2512d7){}info('[gfilter]\x20'+_0x2f779a(0x17c)+_0x2f779a(0x11f)+_0x2f779a(0xa4)+'onical\x20sch'+_0x2f779a(0xba));return;}const _0x572071=await getTableColumns('filters'),_0x508f8b=[];for(const _0x3d58bb of Object['keys'](_0xf3f73e)){if(!_0x572071[_0x2f779a(0x124)](_0x3d58bb))_0x508f8b[_0x2f779a(0x22f)](_0x3d58bb);}if(_0x508f8b[_0x2f779a(0x96)]===-0x1*-0x1106+-0x2632+-0x43c*-0x5){try{await db['exec']('CREATE\x20IND'+_0x2f779a(0xdf)+_0x2f779a(0x14d)+_0x2f779a(0xa0)+_0x2f779a(0x15a)+_0x2f779a(0x227)+_0x2f779a(0x235));}catch(_0x57f1a1){warn('[gfilter]\x20'+_0x2f779a(0x1ed)+':\x20'+(_0x57f1a1?.['message']||_0x57f1a1));}try{await db['exec']('CREATE\x20UNI'+_0x2f779a(0x170)+'IF\x20NOT\x20EXI'+_0x2f779a(0x238)+_0x2f779a(0x144)+_0x2f779a(0x18d)+_0x2f779a(0x154)+_0x2f779a(0xeb)+_0x2f779a(0x108));}catch(_0x2b753c){warn(_0x2f779a(0x12b)+_0x2f779a(0x1f8)+':\x20'+(_0x2b753c?.['message']||_0x2b753c));}return;}const _0x14e8cb=_0x508f8b[_0x2f779a(0x198)](_0xbbbf96=>!['id',_0x2f779a(0x19e),'chat_jid']['includes'](_0xbbbf96));if(_0x14e8cb){for(const _0x531f8f of _0x508f8b){try{const _0x32e064=_0xf3f73e[_0x531f8f],_0x22d2fb=_0x32e064[_0x2f779a(0xb5)]('\x20')[_0x2f779a(0x15d)](-0x1758+-0x11b0+0x2909)[_0x2f779a(0x1da)]('\x20');await db['exec'](_0x2f779a(0x1c2)+_0x2f779a(0x12e)+_0x2f779a(0x20c)+'\x20'+_0x531f8f+'\x20'+_0x22d2fb),info(_0x2f779a(0x12b)+_0x2f779a(0x1f6)+_0x2f779a(0x1a0)+'\x20'+_0x531f8f+(_0x2f779a(0x1a1)+_0x2f779a(0x14f)));}catch(_0x2e33ae){warn(_0x2f779a(0x12b)+_0x2f779a(0x1d4)+_0x2f779a(0xb6)+_0x531f8f+_0x2f779a(0xfb)+(_0x2e33ae?.[_0x2f779a(0x99)]||_0x2e33ae));}}try{await db['exec'](_0x2f779a(0x1d7)+_0x2f779a(0xdf)+_0x2f779a(0x14d)+_0x2f779a(0xa0)+'hat\x20ON\x20fil'+_0x2f779a(0x227)+_0x2f779a(0x235));}catch(_0x5efa8d){warn('[gfilter]\x20'+_0x2f779a(0x1ed)+':\x20'+(_0x5efa8d?.['message']||_0x5efa8d));}try{await db[_0x2f779a(0xf1)](_0x2f779a(0x185)+_0x2f779a(0x170)+_0x2f779a(0xd6)+'STS\x20idx_fi'+_0x2f779a(0x144)+_0x2f779a(0x18d)+'ers(chat_j'+_0x2f779a(0xeb)+_0x2f779a(0x108));}catch(_0x1fd2d6){warn('[gfilter]\x20'+'unique\x20idx'+':\x20'+(_0x1fd2d6?.[_0x2f779a(0x99)]||_0x1fd2d6));}return;}info(_0x2f779a(0x12b)+_0x2f779a(0xa3)+'ters\x20table'+_0x2f779a(0x1ab)+_0x2f779a(0x242)+_0x2f779a(0x14e)+_0x2f779a(0x192));const _0x463bb4=await readAndNormalizeExistingFilters();await db[_0x2f779a(0xf1)](_0x2f779a(0x206)+_0x2f779a(0x122)+'=\x20OFF;');try{await db[_0x2f779a(0xf1)](_0x2f779a(0xd2)+'LE\x20IF\x20NOT\x20'+'EXISTS\x20fil'+_0x2f779a(0xaa)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+_0x2f779a(0x17f)+_0x2f779a(0x23f)+_0x2f779a(0x11b)+'EMENT,\x0a\x20\x20\x20'+_0x2f779a(0x176)+'er\x20TEXT\x20NO'+_0x2f779a(0x180)+_0x2f779a(0x1e9)+'_jid\x20TEXT\x20'+'NOT\x20NULL,\x0a'+_0x2f779a(0x231)+'sponses\x20TE'+_0x2f779a(0x1ee)+_0x2f779a(0x11e)+_0x2f779a(0x146)+_0x2f779a(0x100)+_0x2f779a(0x88)+'\x20DEFAULT\x200'+_0x2f779a(0xe9)+_0x2f779a(0x86)+_0x2f779a(0x1f1)+_0x2f779a(0xef)+'\x20\x20\x20\x20\x20\x20crea'+_0x2f779a(0x190)+_0x2f779a(0x162)+_0x2f779a(0xf0)+_0x2f779a(0x1fe)+_0x2f779a(0x149)+_0x2f779a(0xf5)+_0x2f779a(0x226));}catch(_0x55c845){await db[_0x2f779a(0xf1)](_0x2f779a(0xd2)+_0x2f779a(0xb7)+_0x2f779a(0x138)+_0x2f779a(0xaa)+_0x2f779a(0xd0)+_0x2f779a(0x17f)+'PRIMARY\x20KE'+_0x2f779a(0x11b)+_0x2f779a(0x184)+_0x2f779a(0x176)+_0x2f779a(0xcb)+_0x2f779a(0x180)+'\x20\x20\x20\x20\x20\x20chat'+_0x2f779a(0x9c)+_0x2f779a(0xc6)+'\x20\x20\x20\x20\x20\x20\x20\x20re'+_0x2f779a(0x1cd)+_0x2f779a(0x1ee)+_0x2f779a(0x11e)+_0x2f779a(0x146)+_0x2f779a(0x100)+_0x2f779a(0x88)+_0x2f779a(0x10e)+_0x2f779a(0xe9)+_0x2f779a(0x86)+_0x2f779a(0x1f1)+_0x2f779a(0xef)+'\x20\x20\x20\x20\x20\x20crea'+'ted_at\x20INT'+_0x2f779a(0x162)+_0x2f779a(0x15e)+_0x2f779a(0x155)),warn(_0x2f779a(0x12b)+_0x2f779a(0x241)+_0x2f779a(0x19a)+_0x2f779a(0xc7)+_0x2f779a(0x22e)+_0x2f779a(0x126));}const _0xeaef1a=await db[_0x2f779a(0x11c)](_0x2f779a(0xf3)+'O\x20filters_'+_0x2f779a(0x1ae)+_0x2f779a(0x236)+_0x2f779a(0x1a4)+'ses,\x20rr_in'+'dex,\x20creat'+_0x2f779a(0x199)+_0x2f779a(0x102)+_0x2f779a(0x23b)+_0x2f779a(0x114)+_0x2f779a(0x145));try{for(const _0x239e40 of _0x463bb4){const _0x393112=JSON['stringify'](ensureArray(_0x239e40[_0x2f779a(0xb2)]||[]));try{await _0xeaef1a['run'](_0x239e40[_0x2f779a(0x19e)],_0x239e40[_0x2f779a(0x1b9)],_0x393112,_0x239e40[_0x2f779a(0x86)]||'',Number(_0x239e40['created_at']||Math[_0x2f779a(0x1a8)](Date[_0x2f779a(0x12f)]()/(0x10a6+-0x17d0+0x6d*0x1a))));}catch(_0x2a4344){warn('[gfilter]\x20'+_0x2f779a(0x109)+_0x2f779a(0x243)+_0x2f779a(0x143)+'w\x20'+_0x239e40[_0x2f779a(0x1b9)]+'@'+_0x239e40[_0x2f779a(0x19e)]+':\x20'+(_0x2a4344?.[_0x2f779a(0x99)]||_0x2a4344));}}}finally{try{await _0xeaef1a[_0x2f779a(0x182)]();}catch(_0x8a01a5){}}try{const _0x47f7c7=_0x2f779a(0x204)+_0x2f779a(0x103)+Math['floor'](Date['now']()/(0x9*-0x1cf+-0xf7b*-0x1+0x4b4));await db[_0x2f779a(0xf1)](_0x2f779a(0x1c2)+_0x2f779a(0x12e)+_0x2f779a(0x164)+_0x47f7c7+';'),await db[_0x2f779a(0xf1)](_0x2f779a(0x1c2)+_0x2f779a(0x10c)+_0x2f779a(0x159)+_0x2f779a(0x209)+'s;');try{await db[_0x2f779a(0xf1)]('CREATE\x20IND'+_0x2f779a(0xdf)+_0x2f779a(0x14d)+_0x2f779a(0xa0)+_0x2f779a(0x15a)+_0x2f779a(0x227)+_0x2f779a(0x235));}catch(_0x3e1c9b){warn('[gfilter]\x20'+_0x2f779a(0x193)+_0x2f779a(0xc1)+(_0x3e1c9b?.[_0x2f779a(0x99)]||_0x3e1c9b));}try{await db[_0x2f779a(0xf1)]('CREATE\x20UNI'+_0x2f779a(0x170)+'IF\x20NOT\x20EXI'+_0x2f779a(0x238)+_0x2f779a(0x144)+_0x2f779a(0x18d)+_0x2f779a(0x154)+_0x2f779a(0xeb)+_0x2f779a(0x108));}catch(_0x1586d9){warn('[gfilter]\x20'+_0x2f779a(0x193)+_0x2f779a(0x1f8)+':\x20'+(_0x1586d9?.[_0x2f779a(0x99)]||_0x1586d9));}info(_0x2f779a(0x12b)+_0x2f779a(0x234)+_0x2f779a(0x111)+_0x2f779a(0x221)+'\x20renamed\x20t'+'o\x20backup');}catch(_0x52336a){warn('[gfilter]\x20'+_0x2f779a(0x168)+_0x2f779a(0xb3)+(_0x52336a?.['message']||_0x52336a));throw _0x52336a;}finally{await db[_0x2f779a(0xf1)]('PRAGMA\x20for'+_0x2f779a(0x122)+'=\x20ON;');}}catch(_0xacd86a){error(_0xacd86a,_0x2f779a(0x12b)+_0x2f779a(0x191)+_0x2f779a(0x201));throw _0xacd86a;}}function normalizeResponseValue(_0x3a1fb6){const _0x36c31d=_0x4aea8c;if(_0x3a1fb6==null)return[];if(Array[_0x36c31d(0x1f3)](_0x3a1fb6))return uniqArray(_0x3a1fb6);if(typeof _0x3a1fb6===_0x36c31d(0x1ba)){let _0x13e716=_0x3a1fb6['replace'](/\r/g,'');const _0x5daf7c=_0x13e716[_0x36c31d(0xc2)]();if(_0x5daf7c['startsWith']('['))try{const _0x4b58d3=JSON[_0x36c31d(0x130)](_0x5daf7c);if(Array['isArray'](_0x4b58d3))return uniqArray(_0x4b58d3[_0x36c31d(0xce)](_0x171c67=>String(_0x171c67||'')));}catch(_0x50c3d5){}_0x13e716=_0x13e716[_0x36c31d(0x13e)](/^\s*\n+/,'')[_0x36c31d(0x13e)](/\n+\s*$/,'');const _0x40c5ea=_0x13e716[_0x36c31d(0xb5)]('\x0a'),_0x478372=_0x40c5ea[_0x36c31d(0x1e0)](_0x147f53=>_0x147f53['trimStart']()[_0x36c31d(0xb1)]('!'));if(_0x478372){const _0xabdb40=[];let _0x28c9b9=null;for(const _0x492eaf of _0x40c5ea){if(_0x492eaf[_0x36c31d(0x18c)]()[_0x36c31d(0xb1)]('!')){const _0x338fb3=_0x492eaf['replace'](/^\s*!/,''),_0x4ca81c=_0x338fb3[_0x36c31d(0x13e)](/\s+$/,'');_0x28c9b9=_0x4ca81c,_0xabdb40[_0x36c31d(0x22f)](_0x28c9b9);}else{const _0xf947cb=_0x492eaf['replace'](/\s+$/,'');if(_0x28c9b9===null)_0x28c9b9=_0xf947cb,_0xabdb40[_0x36c31d(0x22f)](_0x28c9b9);else{const _0x1625d6=_0xabdb40[_0x36c31d(0x96)]-(-0x19*-0x36+-0x2*-0x7ab+-0x149b);_0xabdb40[_0x1625d6]=_0xabdb40[_0x1625d6]+'\x0a'+_0xf947cb,_0x28c9b9=_0xabdb40[_0x1625d6];}}}return uniqArray(_0xabdb40[_0x36c31d(0xce)](_0x4387d0=>String(_0x4387d0||'')['trim']()));}else{const _0x478375=_0x40c5ea[_0x36c31d(0xce)](_0x2d8255=>_0x2d8255[_0x36c31d(0x13e)](/\s+$/,''))[_0x36c31d(0x1da)]('\x0a')['trim']();if(!_0x478375)return[];return[_0x478375];}}return[];}async function upsertFilterRow(_0x2aa69e,_0x2dbd2c,_0x395a3a,_0x1978f6){const _0x325de7=_0x4aea8c;try{const _0x552507=Math['floor'](Date[_0x325de7(0x12f)]()/(-0x2f*-0xa+0xcdf+-0xacd)),_0x27f0e4=JSON[_0x325de7(0x222)](uniqArray(ensureArray(_0x395a3a)[_0x325de7(0xce)](_0x30816e=>String(_0x30816e)[_0x325de7(0xc2)]())[_0x325de7(0x158)](Boolean)));await db[_0x325de7(0x163)](_0x325de7(0xf3)+_0x325de7(0x19d)+_0x325de7(0x1a7)+'chat_jid,\x20'+'responses,'+_0x325de7(0x1eb)+_0x325de7(0x1c9)+_0x325de7(0x115)+'_at)\x0a\x20\x20\x20\x20\x20'+_0x325de7(0x188)+'?,\x20?,\x20?,\x200'+_0x325de7(0x173)+_0x325de7(0x1d6)+_0x325de7(0x129)+_0x325de7(0x150)+_0x325de7(0x16d)+'PDATE\x20SET\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+_0x325de7(0x1b8)+_0x325de7(0x167)+'responses,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x325de7(0x8a)+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x325de7(0x1e4)+_0x325de7(0x230)+_0x325de7(0x21e)+_0x325de7(0xbc)+_0x325de7(0xcd)+_0x325de7(0x1a6)+_0x325de7(0x116)+_0x325de7(0x1b6),[_0x2dbd2c,_0x2aa69e,_0x27f0e4,_0x1978f6||'',_0x552507]);try{automatonCache['clear']();}catch(_0x3af734){}return info(_0x325de7(0x12b)+_0x325de7(0xa5)+_0x325de7(0xec)+_0x2dbd2c+_0x325de7(0x1db)+_0x2aa69e),!![];}catch(_0x265333){return error(_0x265333,_0x325de7(0x12b)+_0x325de7(0x22d)+_0x325de7(0x171)+_0x325de7(0x214)+_0x2dbd2c+_0x325de7(0x195)+_0x2aa69e),![];}}async function deleteFilters(_0x4d6b91,_0x2077e8){const _0x451a6b=_0x4aea8c;if(!Array[_0x451a6b(0x1f3)](_0x2077e8)||_0x2077e8[_0x451a6b(0x96)]===0x3*0xc83+0x733*-0x2+-0x1723)return 0xa*0x2cd+0x3c8+-0x272*0xd;try{let _0x247195=0x38*-0x3+-0x65a*0x1+0x702;for(const _0xcfca3f of _0x2077e8){const _0xbdf2af=await db['run']('DELETE\x20FRO'+'M\x20filters\x20'+_0x451a6b(0x21d)+_0x451a6b(0x244)+_0x451a6b(0xda)+'\x20=\x20?',[_0x4d6b91,_0xcfca3f]);if(_0xbdf2af?.[_0x451a6b(0x10f)])_0x247195+=_0xbdf2af['changes'];info(_0x451a6b(0x12b)+_0x451a6b(0x1f9)+_0xcfca3f+'\x20@\x20'+_0x4d6b91);}try{automatonCache[_0x451a6b(0x134)]();}catch(_0x2ac622){}return _0x247195;}catch(_0x591299){return error(_0x591299,'[gfilter]\x20'+_0x451a6b(0x18a)+_0x451a6b(0x101)+_0x451a6b(0xbd)+_0x4d6b91),0x103a+0x1527+-0x2561;}}async function listTriggersForChat(_0x77bd7b){const _0x3243c4=_0x4aea8c;try{const _0x3439a1=await db[_0x3243c4(0x13b)](_0x3243c4(0xad)+_0x3243c4(0x1e2)+'ger\x20FROM\x20f'+'ilters\x20WHE'+_0x3243c4(0x20a)+_0x3243c4(0x17b)+_0x3243c4(0x183)+'er',[_0x77bd7b]);return(_0x3439a1||[])[_0x3243c4(0xce)](_0x86db17=>_0x86db17['trigger']);}catch(_0x44c15e){return warn(_0x44c15e,_0x3243c4(0x12b)+_0x3243c4(0x15c)+'rsForChat\x20'+_0x3243c4(0x14a)+'\x20'+_0x77bd7b),[];}}async function pickResponseAndAdvance(_0x597494,_0x4a7882,_0x1026ea='roundrobin'){const _0x550a1b=_0x4aea8c;try{const _0x3af14c=await db[_0x550a1b(0x11a)]('SELECT\x20res'+'ponses,\x20rr'+_0x550a1b(0xa7)+_0x550a1b(0x1c0)+_0x550a1b(0x21d)+_0x550a1b(0x244)+'ND\x20trigger'+_0x550a1b(0x110)+'\x201',[_0x597494,_0x4a7882]);if(!_0x3af14c)return null;let _0x68e791=[];try{_0x68e791=JSON[_0x550a1b(0x130)](_0x3af14c[_0x550a1b(0xb2)]||'[]');}catch{_0x68e791=ensureArray(_0x3af14c['responses']);}_0x68e791=ensureArray(_0x68e791);if(!_0x68e791[_0x550a1b(0x96)])return null;if((_0x1026ea||'')[_0x550a1b(0x148)+'e']()===_0x550a1b(0x19f)){const _0x1f84d6=Math[_0x550a1b(0x1a8)](Math[_0x550a1b(0x19f)]()*_0x68e791[_0x550a1b(0x96)]);return _0x68e791[_0x1f84d6];}const _0x1113f8=Number(_0x3af14c[_0x550a1b(0x1fd)]||-0x2*0x11d6+-0x1f4*-0x2+0x6b*0x4c),_0x385a74=_0x68e791[_0x1113f8%_0x68e791[_0x550a1b(0x96)]];try{await db[_0x550a1b(0x163)]('UPDATE\x20fil'+'ters\x20SET\x20r'+'r_index\x20=\x20'+_0x550a1b(0xc8)+_0x550a1b(0xae)+_0x550a1b(0x1d8)+_0x550a1b(0x1d3)+_0x550a1b(0x147),[_0x597494,_0x4a7882]);}catch(_0x48b7d2){warn(_0x550a1b(0x12b)+'rr_index\x20i'+'ncrement\x20f'+_0x550a1b(0x225)+(_0x48b7d2?.[_0x550a1b(0x99)]||_0x48b7d2));}return _0x385a74;}catch(_0x5e311f){return warn('[gfilter]\x20'+_0x550a1b(0x1f0)+_0x550a1b(0xc5)+'ce\x20error:\x20'+(_0x5e311f?.[_0x550a1b(0x99)]||_0x5e311f)),null;}}function parseFilterCommandText(_0xcb8009){const _0x553808=_0x4aea8c;if(!_0xcb8009)return null;const _0x741b0=_0xcb8009[_0x553808(0xb5)](/\r?\n/)[_0x553808(0xce)](_0x5abe65=>_0x5abe65[_0x553808(0x13e)](/\r/g,''));if(!_0x741b0[_0x553808(0x96)])return null;let _0x3eb9ca=(_0x741b0[0xb*0x1f7+0x2299+0x5*-0xb3e]||'')[_0x553808(0xc2)](),_0x1f6426=_0x741b0['slice'](0x259*-0x1+-0x1e0d+0x2067),_0x300262=null;const _0x581360=_0x3eb9ca[_0x553808(0x23e)](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);_0x581360&&(_0x3eb9ca=(_0x581360[-0x11c1*-0x2+-0x2da*-0x8+0x1*-0x3a51]||'')[_0x553808(0xc2)](),_0x300262=(_0x581360[-0x16*0x59+0x21cc+0x1c*-0xef]||'')[_0x553808(0xc2)]());if(!_0x300262&&_0x1f6426&&_0x1f6426[_0x553808(0x96)]){let _0x426613=-(-0x835*0x3+0x2b*-0x54+0x26bc);for(let _0x4b85a8=_0x1f6426['length']-(-0x49*0x29+-0x1*-0x47d+0x735);_0x4b85a8>=0x1a*-0x6b+0x2*-0x35+0xb48;_0x4b85a8--){if(String(_0x1f6426[_0x4b85a8]||'')[_0x553808(0xc2)]()['length']>-0xa93+0x1319*-0x1+0x1dac){_0x426613=_0x4b85a8;break;}}if(_0x426613>=-0x4dd+0x2669*-0x1+0x3a*0xbf){const _0x4c6e4c=String(_0x1f6426[_0x426613]||'')['trim'](),_0x29e24d=_0x4c6e4c[_0x553808(0x23e)](/^gp[:\s]*([^\s,]+)\s*$/i);_0x29e24d&&(_0x300262=(_0x29e24d[0x1d7c*0x1+0x2*0x24+-0x1dc3]||'')['trim'](),_0x1f6426[_0x553808(0x152)](_0x426613,-0x1e78+0x1377+0xb02));}}let _0x56b743=_0x3eb9ca['trim']()['split'](/\s+/)['filter'](Boolean);if(_0x56b743[_0x553808(0x96)]&&_0x56b743[0x32f*-0x2+-0x1ba3*-0x1+-0x1545*0x1][_0x553808(0x148)+'e']()===_0x553808(0xab))_0x56b743[_0x553808(0x153)]();const _0x3c7ae5=_0x56b743[_0x553808(0x1da)]('\x20')[_0x553808(0xc2)]();let _0x16921e=[];_0x3c7ae5&&(_0x3c7ae5[_0x553808(0x124)](',')?_0x16921e=_0x3c7ae5[_0x553808(0xb5)](',')[_0x553808(0xce)](_0xb14b1d=>_0xb14b1d['trim']())[_0x553808(0x158)](Boolean):_0x16921e=_0x3c7ae5[_0x553808(0xb5)](/\s+/)[_0x553808(0xce)](_0xed3d65=>_0xed3d65[_0x553808(0xc2)]())[_0x553808(0x158)](Boolean));const _0x49b8df=_0x1f6426;if(!_0x49b8df['length'])return{'triggers':_0x16921e,'responses':[],'gp':_0x300262};const _0x20d90f=_0x49b8df[_0x553808(0x1da)]('\x0a'),_0x561262=normalizeResponseValue(_0x20d90f);return{'triggers':_0x16921e,'responses':_0x561262,'gp':_0x300262};}function getMessageText(_0x660224){const _0x296683=_0x4aea8c;if(!_0x660224||!_0x660224[_0x296683(0x99)])return'';const _0x18de5c=_0x660224[_0x296683(0x99)];if(_0x18de5c[_0x296683(0x21c)+'on'])return _0x18de5c[_0x296683(0x21c)+'on'];if(_0x18de5c[_0x296683(0x136)+_0x296683(0x1bc)]?.['text'])return _0x18de5c[_0x296683(0x136)+_0x296683(0x1bc)][_0x296683(0xe7)];if(_0x18de5c[_0x296683(0x1b1)+'ge']?.[_0x296683(0x1ef)])return _0x18de5c[_0x296683(0x1b1)+'ge'][_0x296683(0x1ef)];if(_0x18de5c['videoMessa'+'ge']?.['caption'])return _0x18de5c['videoMessa'+'ge'][_0x296683(0x1ef)];if(_0x18de5c[_0x296683(0xe0)+_0x296683(0xa6)+'ge']?.[_0x296683(0x1b3)+'ttonId'])return _0x18de5c['buttonsRes'+'ponseMessa'+'ge']['selectedBu'+'ttonId'];if(_0x18de5c['listRespon'+_0x296683(0xd3)]?.[_0x296683(0xf9)+_0x296683(0x196)]?.[_0x296683(0x1f7)+_0x296683(0x95)])return _0x18de5c[_0x296683(0x1ff)+_0x296683(0xd3)][_0x296683(0xf9)+'ctReply'][_0x296683(0x1f7)+_0x296683(0x95)];return'';}const processedMessageKeys=new Map(),DEDUPE_TTL=(-0x47f+-0x58*-0x19+-0x3fb)*(-0x1f18+-0x19bb+0x8ad*0x7);function makeDedupeKey(_0xbd79fb){const _0x6a7534=_0x4aea8c,_0x5197c9=_0xbd79fb?.[_0x6a7534(0x9a)];if(!_0x5197c9)return null;const _0x25ad35=_0x5197c9['id']||_0x5197c9?.['participan'+'t']||'',_0x48bcf4=_0x5197c9[_0x6a7534(0xa2)]||'';return _0x48bcf4+'::'+_0x25ad35;}function isMsgProcessed(_0x62f383){const _0x3dc762=_0x4aea8c;return _0x62f383&&processedMessageKeys[_0x3dc762(0x1cc)](_0x62f383);}function markMsgProcessed(_0x14f508){const _0x4d4e26=_0x4aea8c;if(!_0x14f508)return;processedMessageKeys['has'](_0x14f508)&&clearTimeout(processedMessageKeys[_0x4d4e26(0x11a)](_0x14f508));const _0x237506=setTimeout(()=>processedMessageKeys[_0x4d4e26(0x216)](_0x14f508),DEDUPE_TTL);processedMessageKeys[_0x4d4e26(0xf8)](_0x14f508,_0x237506);}class Aho{constructor(){const _0x152a40=_0x4aea8c;this[_0x152a40(0x105)]=[{'next':Object[_0x152a40(0x223)](null),'fail':0x0,'output':[]}];}[_0x4aea8c(0x1f5)](_0x1af87e){const _0x18e693=_0x4aea8c;this[_0x18e693(0x105)]=[{'next':Object[_0x18e693(0x223)](null),'fail':0x0,'output':[]}];for(const _0xbcf701 of _0x1af87e){let _0x5d0b04=0x1*0xeb9+-0x7a*-0x23+-0x1f67;for(let _0xfe4fdc=0x7*0x501+0x229e+-0x7bd*0x9;_0xfe4fdc<_0xbcf701[_0x18e693(0x96)];_0xfe4fdc++){const _0x4afee3=_0xbcf701[_0xfe4fdc];!this[_0x18e693(0x105)][_0x5d0b04][_0x18e693(0x1ad)][_0x4afee3]&&(this[_0x18e693(0x105)][_0x5d0b04][_0x18e693(0x1ad)][_0x4afee3]=this['nodes'][_0x18e693(0x96)],this[_0x18e693(0x105)]['push']({'next':Object[_0x18e693(0x223)](null),'fail':0x0,'output':[]})),_0x5d0b04=this['nodes'][_0x5d0b04][_0x18e693(0x1ad)][_0x4afee3];}this['nodes'][_0x5d0b04][_0x18e693(0x187)][_0x18e693(0x22f)](_0xbcf701);}const _0x45a205=[];for(const _0x5e1a22 in this[_0x18e693(0x105)][-0x1*-0x21dd+0x18f9+-0x22*0x1bb][_0x18e693(0x1ad)]){const _0x37e49a=this[_0x18e693(0x105)][0x4c8+0x1*-0x21d1+0x1d09*0x1][_0x18e693(0x1ad)][_0x5e1a22];this[_0x18e693(0x105)][_0x37e49a][_0x18e693(0x92)]=-0x246e+0x2*0x643+0x17e8,_0x45a205[_0x18e693(0x22f)](_0x37e49a);}while(_0x45a205[_0x18e693(0x96)]){const _0x3d4baa=_0x45a205[_0x18e693(0x153)]();for(const _0x4b5529 in this[_0x18e693(0x105)][_0x3d4baa][_0x18e693(0x1ad)]){const _0x1807ea=this[_0x18e693(0x105)][_0x3d4baa][_0x18e693(0x1ad)][_0x4b5529];let _0x502e8e=this[_0x18e693(0x105)][_0x3d4baa][_0x18e693(0x92)];while(_0x502e8e&&!this[_0x18e693(0x105)][_0x502e8e][_0x18e693(0x1ad)][_0x4b5529])_0x502e8e=this[_0x18e693(0x105)][_0x502e8e]['fail'];if(this[_0x18e693(0x105)][_0x502e8e][_0x18e693(0x1ad)][_0x4b5529])this['nodes'][_0x1807ea][_0x18e693(0x92)]=this[_0x18e693(0x105)][_0x502e8e]['next'][_0x4b5529];else this[_0x18e693(0x105)][_0x1807ea]['fail']=0x2541+0x10d9+0xad2*-0x5;this[_0x18e693(0x105)][_0x1807ea][_0x18e693(0x187)][_0x18e693(0x22f)](...this[_0x18e693(0x105)][this[_0x18e693(0x105)][_0x1807ea][_0x18e693(0x92)]][_0x18e693(0x187)]),_0x45a205['push'](_0x1807ea);}}}[_0x4aea8c(0x1a2)](_0x1c4c6a){const _0x3943e0=_0x4aea8c,_0x4b5d8f=[];let _0x4f90fa=-0x41f+0x11*0x209+0x2f*-0xa6;for(let _0x33ef45=-0x3e*0x13+0xd*-0x47+0x835;_0x33ef45<_0x1c4c6a[_0x3943e0(0x96)];_0x33ef45++){const _0x3f33ad=_0x1c4c6a[_0x33ef45];while(_0x4f90fa&&!this[_0x3943e0(0x105)][_0x4f90fa]['next'][_0x3f33ad])_0x4f90fa=this[_0x3943e0(0x105)][_0x4f90fa][_0x3943e0(0x92)];if(this[_0x3943e0(0x105)][_0x4f90fa]['next'][_0x3f33ad])_0x4f90fa=this[_0x3943e0(0x105)][_0x4f90fa][_0x3943e0(0x1ad)][_0x3f33ad];else _0x4f90fa=0xfed*-0x2+0x2134+-0x2*0xad;if(this[_0x3943e0(0x105)][_0x4f90fa][_0x3943e0(0x187)]['length'])for(const _0x3c41c1 of this[_0x3943e0(0x105)][_0x4f90fa]['output']){_0x4b5d8f[_0x3943e0(0x22f)]({'keyword':_0x3c41c1,'index':_0x33ef45-_0x3c41c1[_0x3943e0(0x96)]+(0x1c60*0x1+-0x8e4*0x1+-0x137b)});}}return _0x4b5d8f;}}const automatonCache=new Map();async function getAutomatonForChat(_0x58bb52){const _0x3f310d=_0x4aea8c;if(!_0x58bb52)return null;if(automatonCache[_0x3f310d(0x1cc)](_0x58bb52))return automatonCache[_0x3f310d(0x11a)](_0x58bb52);try{const _0x3aad12=await db['all'](_0x3f310d(0xad)+'TINCT\x20trig'+_0x3f310d(0x157)+'ilters\x20WHE'+_0x3f310d(0x20a)+_0x3f310d(0xe1)+')',[_0x58bb52,'*']),_0x616cc=(_0x3aad12||[])[_0x3f310d(0xce)](_0x267e28=>String(_0x267e28[_0x3f310d(0x19e)]||'')['trim']())[_0x3f310d(0x158)](Boolean),_0x7753a0=_0x616cc[_0x3f310d(0x158)](_0x164e4d=>{const _0x47e4ad=_0x3f310d,_0xb30c10=String(_0x164e4d)['trim']()[_0x47e4ad(0x148)+'e']();if(_0xb30c10['startsWith'](_0x47e4ad(0x1e5)))return![];if(_0x164e4d[_0x47e4ad(0x124)]('*'))return![];return!![];}),_0x483683=_0x7753a0[_0x3f310d(0xce)](_0x3a1b95=>_0x3a1b95[_0x3f310d(0x148)+'e']()),_0x4d4ee0=new Map();for(let _0x2052fc=0x1cf*0x11+0x1af*-0x1+-0x1d10;_0x2052fc<_0x7753a0[_0x3f310d(0x96)];_0x2052fc++){_0x4d4ee0[_0x3f310d(0xf8)](_0x483683[_0x2052fc],_0x7753a0[_0x2052fc]);}const _0x50e115=new Aho();if(_0x483683[_0x3f310d(0x96)])_0x50e115[_0x3f310d(0x1f5)](_0x483683);const _0x5ef503={'ac':_0x50e115,'keywords':_0x483683,'lowerToOrig':_0x4d4ee0};return automatonCache['set'](_0x58bb52,_0x5ef503),_0x5ef503;}catch(_0x2d5243){return warn(_0x3f310d(0x12b)+_0x3f310d(0x9e)+_0x3f310d(0xc0)+_0x3f310d(0x14a)+'\x20'+_0x58bb52+':\x20'+(_0x2d5243?.[_0x3f310d(0x99)]||_0x2d5243)),null;}}async function findStoredMatchFromFindings(_0xcb231b=[]){const _0x5c1844=_0x4aea8c;try{const _0x4fc297=await listSudo();if(!Array[_0x5c1844(0x1f3)](_0x4fc297)||_0x4fc297[_0x5c1844(0x96)]===-0x1*0x24dd+-0x16a+0x2647)return null;const _0x16e749=new Set(_0x4fc297[_0x5c1844(0xce)](String));for(const _0x406f38 of _0xcb231b||[]){if(!_0x406f38||typeof _0x406f38[_0x5c1844(0x1bd)]!==_0x5c1844(0x1ba))continue;const _0x3c66be=normalizeToJid(_0x406f38[_0x5c1844(0x1bd)]);if(_0x3c66be&&_0x16e749[_0x5c1844(0x1cc)](_0x3c66be))return _0x3c66be;if(_0x16e749[_0x5c1844(0x1cc)](_0x406f38[_0x5c1844(0x1bd)]))return _0x406f38[_0x5c1844(0x1bd)];const _0x14a7b8=String(_0x406f38[_0x5c1844(0x1bd)])[_0x5c1844(0xb5)]('@')[0x59*0x1+-0xe53+0xdfa]['split'](':')[0x1285+0xb1*-0x13+-0xd*0x6a];if(_0x14a7b8)for(const _0x160215 of _0x4fc297){const _0x4fc825=String(_0x160215)['split']('@')[0x4a3*-0x4+-0x1b98+-0xb89*-0x4];if(_0x4fc825&&_0x4fc825===_0x14a7b8)return _0x160215;}}return null;}catch(_0xa897d8){return warn(_0x5c1844(0x12b)+_0x5c1844(0xde)+'MatchFromF'+'indings\x20er'+_0x5c1844(0xa1)+(_0xa897d8?.[_0x5c1844(0x99)]||_0xa897d8)),null;}}export async function initialize(_0x10bd27){const _0x156bde=_0x4aea8c;botRef=_0x10bd27;if(botRef){if(typeof botRef[_0x156bde(0x119)+'e']===_0x156bde(0x22c))sendApi=async(_0x10c416,_0x3e9f11)=>await botRef['sendMessag'+'e'](_0x10c416,_0x3e9f11);else botRef[_0x156bde(0x1d2)]&&typeof botRef[_0x156bde(0x1d2)][_0x156bde(0x119)+'e']===_0x156bde(0x22c)?sendApi=async(_0x4a2b7d,_0x148baf)=>await botRef[_0x156bde(0x1d2)][_0x156bde(0x119)+'e'](_0x4a2b7d,_0x148baf):sendApi=null;}try{await ensureSchema(),info(_0x156bde(0x12b)+_0x156bde(0x1df)+'d\x20(sudo\x20+\x20'+_0x156bde(0x169)+_0x156bde(0xb0)+')');}catch(_0x570bed){error(_0x570bed,_0x156bde(0x12b)+_0x156bde(0x1df)+_0x156bde(0xdc));throw _0x570bed;}}function detectCommandNameFromCmdText(_0x32dfeb){const _0x11aa45=_0x4aea8c;if(!_0x32dfeb)return null;const _0x47cbe2=_0x32dfeb[_0x11aa45(0xc2)]();if(!_0x47cbe2)return null;return _0x47cbe2[_0x11aa45(0xb5)](/\s+/)[-0x1*0xdc9+-0x1b72+-0x5*-0x83f][_0x11aa45(0x148)+'e']();}export async function onMessage(_0x51af98){const _0x4e94af=_0x4aea8c;try{if(!_0x51af98||!_0x51af98[_0x4e94af(0x9a)]||!_0x51af98[_0x4e94af(0x99)])return;const _0x1afb48=makeDedupeKey(_0x51af98);if(!_0x1afb48)return;if(isMsgProcessed(_0x1afb48))return;markMsgProcessed(_0x1afb48);const _0x9c825f=getMessageText(_0x51af98);if(!_0x9c825f)return;const _0x150b66=_0x51af98[_0x4e94af(0x9a)][_0x4e94af(0xa2)],_0x43668e=typeof _0x150b66==='string'&&_0x150b66[_0x4e94af(0x16f)](_0x4e94af(0x1c8)),_0x1f06bd=_0x51af98['key']&&(_0x51af98['key']['participan'+'t']||_0x51af98['key']['from']||_0x51af98[_0x4e94af(0x9a)][_0x4e94af(0xa2)])||'',_0x56185c=(_0x1f06bd||'')[_0x4e94af(0xb5)]('@')[0x1b5e+0x1db1+-0x390f];let _0x3dda3a=![];if(_0x43668e)try{_0x3dda3a=await isadmin(botRef,_0x51af98);}catch(_0x5e0431){_0x3dda3a=![];}if(_0x51af98['isCommand']){const _0x3f1f67=typeof _0x51af98[_0x4e94af(0xe7)]===_0x4e94af(0x1ba)&&_0x51af98[_0x4e94af(0xe7)][_0x4e94af(0xc2)]()['length']?_0x51af98['text'][_0x4e94af(0xc2)]():_0x9c825f[_0x4e94af(0xc2)](),_0x4c3970=detectCommandNameFromCmdText(_0x3f1f67);if(!_0x4c3970)return;if(!_0x4c3970[_0x4e94af(0xb1)]('g'))return;if(!_0x43668e){const _0x9276b1=Boolean(_0x51af98[_0x4e94af(0x9a)][_0x4e94af(0x212)]);let _0x22aab5=null;if(_0x9276b1){const _0x45c9db=getBotJid();!_0x45c9db?(warn(_0x4e94af(0x12b)+'getBotJid('+')\x20returned'+_0x4e94af(0x1c3)+_0x4e94af(0xfe)+_0x4e94af(0x16a)+_0x4e94af(0xd7)+_0x4e94af(0xf4)+_0x4e94af(0x1a9)),_0x22aab5=_0x51af98[_0x4e94af(0x9a)][_0x4e94af(0xa2)]):_0x22aab5=_0x45c9db;}else{let _0x160ff3=![];try{_0x160ff3=await isSudo(botRef,_0x51af98);}catch(_0x3ca979){_0x160ff3=![];}if(!_0x160ff3)return;const _0x5befef=userJidFromCtx(_0x51af98)||{'findings':[]},_0x1720da=await findStoredMatchFromFindings(_0x5befef[_0x4e94af(0x16c)]||[]);if(!_0x1720da)return;_0x22aab5=_0x1720da;}const _0x2c5ba4=parseFilterCommandText(_0x3f1f67||_0x9c825f);if(_0x4c3970===_0x4e94af(0xab)){if(!_0x2c5ba4||!_0x2c5ba4[_0x4e94af(0x1cb)][_0x4e94af(0x96)]||!_0x2c5ba4['responses']['length']){await sendText(_0x51af98,_0x22aab5,'Usage\x20(PM\x20'+_0x4e94af(0x17a)+_0x4e94af(0x12d)+_0x4e94af(0x131)+'trigger1,t'+_0x4e94af(0x113)+_0x4e94af(0x18e)+_0x4e94af(0xe5)+_0x4e94af(0x118)+_0x4e94af(0x20e)+_0x4e94af(0x205)+_0x4e94af(0x218)+_0x4e94af(0x1c1)+'o\x20restrict'+'\x20target\x20gr'+_0x4e94af(0xe3));return;}let _0x1a1bfb=[];if(_0x2c5ba4['gp']){const _0x452e72=_0x2c5ba4['gp'][_0x4e94af(0xc2)]();if(_0x452e72[_0x4e94af(0x148)+'e']()==='all')_0x1a1bfb=await _0x2f93db[_0x4e94af(0xa8)+'ids']();else{const _0x71ec7f=await _0x2f93db[_0x4e94af(0x120)+'e'](_0x452e72);if(_0x71ec7f)_0x1a1bfb=[_0x71ec7f];else{if(_0x452e72['includes']('@'))_0x1a1bfb=[_0x2f93db[_0x4e94af(0xbe)+_0x4e94af(0x107)](_0x452e72)];else{await sendText(_0x51af98,_0x22aab5,'Unknown\x20gp'+_0x4e94af(0x1fb)+_0x4e94af(0x1c5)+_0x452e72+(_0x4e94af(0xcc)+_0x4e94af(0x1af)+_0x4e94af(0x200)+_0x4e94af(0x18b)+_0x4e94af(0x140)+'ID.'));return;}}}}else _0x1a1bfb=['*'];let _0x1086d0=0x1eda+-0x9*-0x28f+-0xd*0x425;for(const _0x159479 of uniqArray(_0x1a1bfb)){for(const _0x539cdb of _0x2c5ba4[_0x4e94af(0x1cb)]){const _0x416d9f=await upsertFilterRow(_0x159479,_0x539cdb,_0x2c5ba4[_0x4e94af(0xb2)],_0x1f06bd||'');if(_0x416d9f)_0x1086d0++;}}await sendText(_0x51af98,_0x22aab5,_0x4e94af(0x197)+_0x1086d0+(_0x4e94af(0x17e)+_0x4e94af(0x1ea))+(_0x1a1bfb[_0x4e94af(0x96)]===-0x144a*0x1+0xc*-0x99+0x1b77?_0x1a1bfb[0xc5*0x19+0x43c+-0x7d3*0x3]:_0x4e94af(0x177)+_0x4e94af(0x137)));return;}if(_0x4c3970===_0x4e94af(0x16e)+'r'){const _0x52268b=(parseFilterCommandText(_0x3f1f67||_0x9c825f)||{})['gp'],_0x39ea99=_0x52268b?_0x52268b[_0x4e94af(0x148)+'e']()==='all'?'*':await _0x2f93db[_0x4e94af(0x120)+'e'](_0x52268b)||_0x2f93db[_0x4e94af(0xbe)+_0x4e94af(0x107)](_0x52268b):'*',_0x25beea=await listTriggersForChat(_0x39ea99);await sendText(_0x51af98,_0x22aab5,_0x4e94af(0x12b)+_0x25beea[_0x4e94af(0x96)]+(_0x4e94af(0x219)+'or\x20')+(_0x39ea99==='*'?'GLOBAL\x20(al'+_0x4e94af(0xea):_0x39ea99));if(!_0x25beea[_0x4e94af(0x96)])return;let _0x3fcbbd='';for(const _0x3f7eb0 of _0x25beea){const _0x3bd090='•\x20'+_0x3f7eb0+'\x0a';(_0x3fcbbd+_0x3bd090)[_0x4e94af(0x96)]>0x18b*0x1+0x146a+-0xd*0x13d&&(await sendText(_0x51af98,_0x22aab5,_0x3fcbbd[_0x4e94af(0xc2)]()),_0x3fcbbd=''),_0x3fcbbd+=_0x3bd090;}if(_0x3fcbbd[_0x4e94af(0xc2)]())await sendText(_0x51af98,_0x22aab5,_0x3fcbbd[_0x4e94af(0xc2)]());return;}if(_0x4c3970==='gdelfilter'||_0x4c3970==='gdelfilter'+'s'||_0x4c3970==='gdelf'){const _0x19a77e=(_0x9c825f||'')[_0x4e94af(0xb5)](/\r?\n/)[_0x4e94af(0xce)](_0x5530fe=>_0x5530fe[_0x4e94af(0xc2)]());let _0x5565e6=null;if(_0x19a77e['length']>0x13a*0x7+-0x1*-0x4f7+-0xd8c&&!_0x19a77e[0x10f8+0xf7c*0x1+-0x27*0xd5]['toLowerCas'+'e']()[_0x4e94af(0xb1)]('gp'))_0x5565e6=_0x19a77e[0x2260+0x1e*-0x13d+0x2c7];else{const _0x5005c6=_0x3f1f67[_0x4e94af(0xc2)]()[_0x4e94af(0xb5)](/\s+/);_0x5005c6[_0x4e94af(0x153)](),_0x5565e6=_0x5005c6[_0x4e94af(0x1da)]('\x20')['trim']();}const _0x1885a9=_0x19a77e[_0x4e94af(0x15d)](-0x69d*-0x1+-0x1597*-0x1+-0x1*0x1c33)['find'](_0x2cdad2=>/^gp[:\s]/i['test'](_0x2cdad2));let _0xfb9057=_0x1885a9?_0x1885a9['replace'](/^gp[:\s]+/i,'')[_0x4e94af(0xc2)]():null;const _0x5f1d70=(_0x5565e6||'')[_0x4e94af(0xb5)](',')['map'](_0x18e869=>_0x18e869[_0x4e94af(0xc2)]())['filter'](Boolean);if(!_0x5f1d70[_0x4e94af(0x96)]){await sendText(_0x51af98,_0x22aab5,'Usage\x20(PM)'+_0x4e94af(0x8c)+'er\x20trigger'+_0x4e94af(0xe4)+_0x4e94af(0x172)+'as|jid|all'+_0x4e94af(0x239)+_0x4e94af(0x19c)+_0x4e94af(0xd1)+'\x20everythin'+_0x4e94af(0x161)+')');return;}if(_0x5f1d70[_0x4e94af(0x96)]===0x78e+0x971+-0x10fe&&_0x5f1d70[-0x7e*-0x8+0x750+-0xb40][_0x4e94af(0x148)+'e']()===_0x4e94af(0x13b))try{const _0x819801=await db['run'](_0x4e94af(0x12a)+_0x4e94af(0xaf)),_0x419456=_0x819801?.[_0x4e94af(0x10f)]||0x1557+0x1a3*0xb+0x9d6*-0x4;try{automatonCache[_0x4e94af(0x134)]();}catch(_0x25f423){}await sendText(_0x51af98,_0x22aab5,_0x4e94af(0x1aa)+'L\x20filters\x20'+'from\x20datab'+_0x4e94af(0x229)+_0x4e94af(0x1d0)+_0x419456);return;}catch(_0xf0fae){await sendText(_0x51af98,_0x22aab5,_0x4e94af(0x1f4)+_0x4e94af(0x233)+_0x4e94af(0x8b)+(_0xf0fae?.[_0x4e94af(0x99)]||_0xf0fae));return;}let _0x2f7f33=[];if(_0xfb9057){if(_0xfb9057['toLowerCas'+'e']()===_0x4e94af(0x13b))_0x2f7f33=await _0x2f93db[_0x4e94af(0xa8)+_0x4e94af(0x1f2)]();else{const _0x1b6e47=await _0x2f93db[_0x4e94af(0x120)+'e'](_0xfb9057);if(_0x1b6e47)_0x2f7f33=[_0x1b6e47];else{if(_0xfb9057[_0x4e94af(0x124)]('@'))_0x2f7f33=[_0x2f93db[_0x4e94af(0xbe)+_0x4e94af(0x107)](_0xfb9057)];else{await sendText(_0x51af98,_0x22aab5,_0x4e94af(0x175)+_0x4e94af(0x1fb)+_0x4e94af(0x1c5)+_0xfb9057+'\x22.');return;}}}}else _0x2f7f33=['*'];let _0x47961a=-0x2*-0xf7f+-0x9*0x3a+-0x1cf4;for(const _0x2d506a of uniqArray(_0x2f7f33)){const _0x56b1e6=await deleteFilters(_0x2d506a,_0x5f1d70);_0x47961a+=_0x56b1e6;}await sendText(_0x51af98,_0x22aab5,_0x4e94af(0x90)+_0x47961a+(_0x4e94af(0x232)+_0x4e94af(0x194)+'\x20')+(_0x2f7f33[_0x4e94af(0x96)]===0x114c*-0x1+0x684+-0x1*-0xac9?_0x2f7f33[-0x1166+0x7*0x219+-0x2b7*-0x1]:'multiple\x20t'+_0x4e94af(0x137)));return;}return;}if(_0x43668e){if(!_0x3dda3a)return;const _0x1e279e=typeof _0x51af98[_0x4e94af(0xe7)]===_0x4e94af(0x1ba)&&_0x51af98[_0x4e94af(0xe7)][_0x4e94af(0xc2)]()['length']?_0x51af98[_0x4e94af(0xe7)][_0x4e94af(0xc2)]():_0x9c825f[_0x4e94af(0xc2)](),_0x44ac88=detectCommandNameFromCmdText(_0x1e279e);if(!_0x44ac88)return;let _0xeb11e8;try{_0xeb11e8=await getDefault(_0x56185c)[_0x4e94af(0x1be)](()=>null);}catch(_0x3629a7){_0xeb11e8=null;}if(!_0xeb11e8||Array['isArray'](_0xeb11e8)&&_0xeb11e8[_0x4e94af(0x96)]===0xc59*-0x2+0x15e7+0x2cb){await sendText(_0x51af98,_0x150b66,_0x4e94af(0x1d9)+_0x4e94af(0x15b)+_0x4e94af(0x1dc)+_0x4e94af(0x139)+_0x4e94af(0xd4)+_0x4e94af(0x1b0)+'\x20first.');return;}const _0x4f53bd=Array[_0x4e94af(0x1f3)](_0xeb11e8)?_0xeb11e8:[_0xeb11e8];let _0x1b272a=[];for(const _0x31cb14 of _0x4f53bd){try{const _0x5e8bdb=await getConnection(_0x31cb14)['catch'](()=>null);if(Array[_0x4e94af(0x1f3)](_0x5e8bdb))_0x1b272a[_0x4e94af(0x22f)](..._0x5e8bdb);else{if(_0x5e8bdb)_0x1b272a[_0x4e94af(0x22f)](String(_0x5e8bdb));}}catch(_0x1b59ed){}}_0x1b272a=uniqArray(_0x1b272a);if(!_0x1b272a[_0x4e94af(0x96)]){await sendText(_0x51af98,_0x150b66,'Could\x20not\x20'+_0x4e94af(0x15b)+_0x4e94af(0x1dc)+_0x4e94af(0x139)+_0x4e94af(0x10d)+_0x4f53bd[_0x4e94af(0x1da)](',\x20')+(_0x4e94af(0x1ce)+'heck\x20/setd'+_0x4e94af(0xee)+_0x4e94af(0x228)));return;}if(_0x44ac88===_0x4e94af(0xab)){const _0x9aeba4=parseFilterCommandText(_0x1e279e||_0x9c825f);if(!_0x9aeba4||!_0x9aeba4[_0x4e94af(0x1cb)][_0x4e94af(0x96)]||!_0x9aeba4['responses'][_0x4e94af(0x96)]){await sendText(_0x51af98,_0x150b66,_0x4e94af(0xca)+_0x4e94af(0x1bf)+'\x0a\x20gfilter\x20'+_0x4e94af(0x1c4)+'trigger2>\x0a'+'!response1'+_0x4e94af(0x181)+_0x4e94af(0x21a)+'ly\x20include'+_0x4e94af(0xd9)+_0x4e94af(0xa9)+_0x4e94af(0x1e6));return;}if(_0x9aeba4['gp']){let _0x49b295=[];const _0x56e016=_0x9aeba4['gp'][_0x4e94af(0xc2)]();if(_0x56e016[_0x4e94af(0x148)+'e']()===_0x4e94af(0x13b))_0x49b295=await _0x2f93db[_0x4e94af(0xa8)+_0x4e94af(0x1f2)]();else{const _0x4baa83=await _0x2f93db['resolveNam'+'e'](_0x56e016);if(_0x4baa83)_0x49b295=[_0x4baa83];else{if(_0x56e016[_0x4e94af(0x124)]('@'))_0x49b295=[_0x2f93db['normalizeT'+_0x4e94af(0x107)](_0x56e016)];else{await sendText(_0x51af98,_0x150b66,_0x4e94af(0x175)+_0x4e94af(0x1fb)+_0x4e94af(0x1c5)+_0x56e016+'\x22.');return;}}}let _0x1f2fee=0x3e1*-0x7+-0x1a34+-0x57*-0x9d;for(const _0x487a0b of uniqArray(_0x49b295)){for(const _0x42b0b0 of _0x9aeba4['triggers']){const _0x12590a=await upsertFilterRow(_0x487a0b,_0x42b0b0,_0x9aeba4['responses'],_0x1f06bd||'');if(_0x12590a)_0x1f2fee++;}}await sendText(_0x51af98,_0x150b66,_0x4e94af(0x197)+_0x1f2fee+(_0x4e94af(0x17e)+_0x4e94af(0x1ea))+(_0x49b295[_0x4e94af(0x96)]===-0x34*0x55+-0x1183+0x22c8?_0x49b295[0x2120+0x8*0x19+0x1*-0x21e8]:'multiple\x20t'+'argets'));return;}let _0x242bba=0x1b65+0xc8*-0x1+0x1*-0x1a9d;for(const _0xf1693b of _0x1b272a){for(const _0x5c48d0 of _0x9aeba4[_0x4e94af(0x1cb)]){const _0x3c2e3d=await upsertFilterRow(_0xf1693b,_0x5c48d0,_0x9aeba4[_0x4e94af(0xb2)],_0x1f06bd||'');if(_0x3c2e3d)_0x242bba++;}}await sendText(_0x51af98,_0x150b66,_0x4e94af(0x197)+_0x242bba+('\x20filter\x20en'+_0x4e94af(0xe2)+_0x4e94af(0x203)+_0x4e94af(0x13a)+_0x4e94af(0x208))+_0x1b272a[_0x4e94af(0x1da)](',\x20'));return;}if(_0x44ac88===_0x4e94af(0x16e)+'r'){const _0x1b13b2=new Set();for(const _0x161e3f of _0x1b272a){const _0xd2d3d4=await listTriggersForChat(_0x161e3f);for(const _0x12805d of _0xd2d3d4)_0x1b13b2[_0x4e94af(0x215)](_0x12805d);}const _0x284945=await listTriggersForChat('*');for(const _0x177b40 of _0x284945||[])_0x1b13b2[_0x4e94af(0x215)](_0x177b40);const _0x58b6f1=Array['from'](_0x1b13b2)['sort']();await sendText(_0x51af98,_0x150b66,_0x4e94af(0x12b)+'loaded\x20'+_0x58b6f1[_0x4e94af(0x96)]+(_0x4e94af(0x219)+_0x4e94af(0xf7)+_0x4e94af(0x9b)+_0x4e94af(0x13f)+_0x4e94af(0x8e)));if(!_0x58b6f1[_0x4e94af(0x96)])return;let _0x4eb58f='';for(const _0x233311 of _0x58b6f1){const _0x314a2d='•\x20'+_0x233311+'\x0a';(_0x4eb58f+_0x314a2d)[_0x4e94af(0x96)]>0x1753+-0x16*-0x141+-0x2d0d&&(await sendText(_0x51af98,_0x150b66,_0x4eb58f[_0x4e94af(0xc2)]()),_0x4eb58f=''),_0x4eb58f+=_0x314a2d;}if(_0x4eb58f[_0x4e94af(0xc2)]())await sendText(_0x51af98,_0x150b66,_0x4eb58f['trim']());return;}if(_0x44ac88===_0x4e94af(0x1de)||_0x44ac88===_0x4e94af(0x1de)+'s'||_0x44ac88===_0x4e94af(0x22a)){const _0x49d49f=(_0x9c825f||'')[_0x4e94af(0xb5)](/\r?\n/)['map'](_0x29f3fb=>_0x29f3fb[_0x4e94af(0xc2)]());let _0x370644=null;if(_0x49d49f[_0x4e94af(0x96)]>-0x22d1+-0x6bb*-0x5+-0x17*-0xd&&!_0x49d49f[-0x113a+0x2565+-0x142a][_0x4e94af(0x148)+'e']()['startsWith']('gp'))_0x370644=_0x49d49f[-0x894+-0x1*-0xc22+-0x38d];else{const _0x4904d3=(_0x1e279e||_0x9c825f)[_0x4e94af(0xc2)]()[_0x4e94af(0xb5)](/\s+/);_0x4904d3[_0x4e94af(0x153)](),_0x370644=_0x4904d3['join']('\x20')[_0x4e94af(0xc2)]();}const _0x4567ad=_0x49d49f[_0x4e94af(0x15d)](-0xbdc*0x2+-0x1b4c+0x3305)[_0x4e94af(0x202)](_0x1fd26e=>/^gp[:\s]/i[_0x4e94af(0x245)](_0x1fd26e));let _0x2350fb=_0x4567ad?_0x4567ad[_0x4e94af(0x13e)](/^gp[:\s]+/i,'')[_0x4e94af(0xc2)]():null;const _0x57b540=(_0x370644||'')['split'](',')[_0x4e94af(0xce)](_0x18e6b2=>_0x18e6b2['trim']())[_0x4e94af(0x158)](Boolean);if(!_0x57b540[_0x4e94af(0x96)]){await sendText(_0x51af98,_0x150b66,_0x4e94af(0x14c)+_0x4e94af(0x217)+_0x4e94af(0x18f)+_0x4e94af(0xac)+'\x20<group-ji'+_0x4e94af(0x220)+_0x4e94af(0x1e8)+'elfilter\x20a'+_0x4e94af(0x112)+_0x4e94af(0x23a)+_0x4e94af(0x1ec)+_0x4e94af(0x13c));return;}if(_0x57b540['length']===-0x20f*0x8+-0x6f3+0x176c&&_0x57b540[0x23f3+-0x5*-0x6c5+-0x22e6*0x2][_0x4e94af(0x148)+'e']()===_0x4e94af(0x13b))try{const _0x388e98=await db[_0x4e94af(0x163)](_0x4e94af(0x12a)+_0x4e94af(0xaf)),_0x636455=_0x388e98?.[_0x4e94af(0x10f)]||-0x268a+-0xb*-0x241+0x11*0xcf;try{automatonCache[_0x4e94af(0x134)]();}catch(_0x2f9b7d){}await sendText(_0x51af98,_0x150b66,'Deleted\x20AL'+_0x4e94af(0x127)+'from\x20datab'+'ase.\x20Rows\x20'+_0x4e94af(0x1d0)+_0x636455);return;}catch(_0x282c8f){await sendText(_0x51af98,_0x150b66,_0x4e94af(0x1f4)+_0x4e94af(0x233)+_0x4e94af(0x8b)+(_0x282c8f?.['message']||_0x282c8f));return;}if(_0x2350fb){let _0xb1a295=[];if(_0x2350fb['toLowerCas'+'e']()===_0x4e94af(0x13b))_0xb1a295=await _0x2f93db[_0x4e94af(0xa8)+_0x4e94af(0x1f2)]();else{const _0x4ac067=await _0x2f93db[_0x4e94af(0x120)+'e'](_0x2350fb);if(_0x4ac067)_0xb1a295=[_0x4ac067];else{if(_0x2350fb['includes']('@'))_0xb1a295=[_0x2f93db[_0x4e94af(0xbe)+_0x4e94af(0x107)](_0x2350fb)];else{await sendText(_0x51af98,_0x150b66,_0x4e94af(0x175)+'\x20alias/jid'+_0x4e94af(0x1c5)+_0x2350fb+'\x22.');return;}}}let _0x511228=0x205c+-0xc13+-0x1449;for(const _0x39d478 of uniqArray(_0xb1a295)){const _0x2681c4=await deleteFilters(_0x39d478,_0x57b540);_0x511228+=_0x2681c4;}await sendText(_0x51af98,_0x150b66,_0x4e94af(0x90)+_0x511228+('\x20filters\x20f'+_0x4e94af(0x1ac))+(_0xb1a295[_0x4e94af(0x96)]===-0x22f8+0x25*-0x49+0x2d86?_0xb1a295[-0x23*-0xf8+-0x306+-0x1ee2]:_0x4e94af(0x177)+'argets'));return;}else{let _0x22d972=-0x16e5+0x63f+0x1*0x10a6;for(const _0x3c11b5 of _0x1b272a){const _0x2e477c=await deleteFilters(_0x3c11b5,_0x57b540);_0x22d972+=_0x2e477c;}await sendText(_0x51af98,_0x150b66,_0x4e94af(0x90)+_0x22d972+(_0x4e94af(0x232)+'tries\x20acro'+_0x4e94af(0x141)+'fault\x20conn'+'ection(s):'+'\x20')+_0x1b272a[_0x4e94af(0x1da)](',\x20'));return;}}return;}}if(_0x43668e){if(_0x51af98[_0x4e94af(0x9a)]['fromMe'])return;const _0x175f92=_0x150b66,_0x49e825=getMessageText(_0x51af98);if(!_0x49e825)return;const _0x343e81=String(_0x49e825||''),_0x11a3dc=await db[_0x4e94af(0x13b)](_0x4e94af(0xad)+_0x4e94af(0x1e2)+_0x4e94af(0x157)+_0x4e94af(0xc3)+_0x4e94af(0x20a)+_0x4e94af(0xe1)+')',[_0x175f92,'*']);if(!_0x11a3dc||_0x11a3dc[_0x4e94af(0x96)]===-0x1d*0x8+-0x1682+0x176a)return;const _0x2b2383=(_0x11a3dc||[])['map'](_0x1cabc8=>String(_0x1cabc8[_0x4e94af(0x19e)]||'')[_0x4e94af(0xc2)]())[_0x4e94af(0x158)](Boolean),_0x315c6c=[],_0x5404f4=[],_0xfd18a8=[];for(const _0x58aa61 of _0x2b2383){const _0x157955=String(_0x58aa61)['trim']()[_0x4e94af(0x148)+'e']();if(_0x157955[_0x4e94af(0xb1)]('regex:')){_0xfd18a8[_0x4e94af(0x22f)](_0x58aa61['substring'](0x80*0x4a+-0xaa7+-0x1a53));continue;}if(_0x58aa61[_0x4e94af(0x124)]('*')){_0x5404f4[_0x4e94af(0x22f)](_0x58aa61);continue;}_0x315c6c['push'](_0x58aa61);}const _0x509673=new Set(),_0x23bdf9=getConfig()||{},_0x2b854c=_0x23bdf9[_0x4e94af(0x106)]&&typeof _0x23bdf9[_0x4e94af(0x106)]==='object'?_0x23bdf9['FILTERS']:{},_0x47acb0=(_0x2b854c['RESPONSE_M'+'ODE']||_0x4e94af(0x121))['toLowerCas'+'e']();let _0x9585a5=null;if(_0x315c6c['length']>0x2319+0x162c+0x3*-0x1317)try{const _0x40f2e5=await getAutomatonForChat(_0x175f92);if(_0x40f2e5&&_0x40f2e5['ac']&&_0x40f2e5[_0x4e94af(0x189)]&&_0x40f2e5['keywords'][_0x4e94af(0x96)]){const _0x1ab287=_0x343e81['toLowerCas'+'e'](),_0x12efd5=_0x40f2e5['ac'][_0x4e94af(0x1a2)](_0x1ab287);for(const _0x57df17 of _0x12efd5){const _0x1a1269=_0x57df17[_0x4e94af(0xfd)],_0x51e841=_0x57df17['index'],_0x16648b=_0x51e841+_0x1a1269['length'],_0x5f42b6=_0x51e841===0x2201+-0x2e+-0x21d3||!/\w/[_0x4e94af(0x245)](_0x1ab287[_0x51e841-(-0x18ba+0x10*0x21f+0x935*-0x1)]),_0xb45646=_0x16648b===_0x1ab287[_0x4e94af(0x96)]||!/\w/[_0x4e94af(0x245)](_0x1ab287[_0x16648b]);if(_0x5f42b6&&_0xb45646){const _0x230e15=_0x40f2e5[_0x4e94af(0x1c6)+'g'][_0x4e94af(0x11a)](_0x1a1269)||null;if(_0x230e15){_0x9585a5=_0x230e15;break;}}}}else for(const _0x4eabab of _0x315c6c){const _0x446572=new RegExp('\x5cb'+escapeRegex(String(_0x4eabab))+'\x5cb','i');if(_0x446572[_0x4e94af(0x245)](_0x343e81)){_0x9585a5=_0x4eabab;break;}}}catch(_0x4332cf){warn('[gfilter]\x20'+'AhoCorasic'+_0x4e94af(0x1b2)+_0x4e94af(0xfb)+(_0x4332cf?.[_0x4e94af(0x99)]||_0x4332cf));for(const _0x1f0bee of _0x315c6c){try{const _0x2226e6=new RegExp('\x5cb'+escapeRegex(String(_0x1f0bee))+'\x5cb','i');if(_0x2226e6[_0x4e94af(0x245)](_0x343e81)){_0x9585a5=_0x1f0bee;break;}}catch(_0x150835){}}}if(!_0x9585a5&&_0x5404f4[_0x4e94af(0x96)]>0x1f6a+0x1f63*0x1+-0x2bb*0x17)for(const _0x5ace74 of _0x5404f4){try{const _0x385b2f=new RegExp(wildcardToRegexPattern(_0x5ace74),'i');if(_0x385b2f['test'](_0x343e81)){_0x9585a5=_0x5ace74;break;}}catch(_0x544350){if(_0x343e81[_0x4e94af(0x148)+'e']()[_0x4e94af(0x124)](_0x5ace74[_0x4e94af(0x13e)](/\*/g,'')[_0x4e94af(0x148)+'e']())){_0x9585a5=_0x5ace74;break;}}}if(!_0x9585a5&&_0xfd18a8[_0x4e94af(0x96)]>0x1*-0xbb9+0x1c18+-0x3*0x575)for(const _0x48c930 of _0xfd18a8){try{const _0x388429=new RegExp(_0x48c930,'i');if(_0x388429[_0x4e94af(0x245)](_0x343e81)){_0x9585a5=_0x4e94af(0x1e5)+_0x48c930;break;}}catch(_0x233234){warn(_0x4e94af(0x12b)+_0x4e94af(0xc9)+_0x4e94af(0x23d)+_0x4e94af(0x132)+_0x175f92+_0x4e94af(0x1c5)+_0x48c930+_0x4e94af(0x1bb)+(_0x233234?.[_0x4e94af(0x99)]||_0x233234));}}if(_0x9585a5){let _0x237601=await pickResponseAndAdvance(_0x175f92,_0x9585a5,_0x47acb0);if(!_0x237601)_0x237601=await pickResponseAndAdvance('*',_0x9585a5,_0x47acb0);if(!_0x237601)return;if(_0x509673[_0x4e94af(0x1cc)](_0x237601))return;await sendText(_0x51af98,_0x175f92,_0x237601),_0x509673[_0x4e94af(0x215)](_0x237601);}}}catch(_0xfa86a5){error(_0xfa86a5,_0x4e94af(0x12b)+_0x4e94af(0x240)+_0x4e94af(0xa1)+(_0xfa86a5?.[_0x4e94af(0x99)]||_0xfa86a5));}}export async function cleanup(){const _0x98aba6=_0x4aea8c;for(const _0x37acd2 of processedMessageKeys[_0x98aba6(0x9d)]())try{clearTimeout(_0x37acd2);}catch(_0x4e73a1){}processedMessageKeys[_0x98aba6(0x134)](),automatonCache[_0x98aba6(0x134)](),botRef=null,sendApi=null,info(_0x98aba6(0x12b)+_0x98aba6(0x1e7));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};