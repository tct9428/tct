const _0x4037b9=_0x5ac1;(function(_0x5b4d55,_0x2786bf){const _0x2c4372=_0x5ac1,_0x12400f=_0x5b4d55();while(!![]){try{const _0x422a06=-parseInt(_0x2c4372(0xfb))/(-0x679+0x201b*0x1+-0x19a1)+-parseInt(_0x2c4372(0x18f))/(-0x1d3d+-0x1*-0x1b82+-0x59*-0x5)+parseInt(_0x2c4372(0x13e))/(0x1160+0x5*0x559+-0x5*0x8d2)*(-parseInt(_0x2c4372(0x137))/(-0x5d1+0x1031+-0xa5c))+-parseInt(_0x2c4372(0x132))/(-0x1e01*-0x1+0x4e2*0x7+-0xbf*0x56)*(parseInt(_0x2c4372(0x11d))/(0x231*-0x3+-0xfc7*-0x1+0xeb*-0xa))+parseInt(_0x2c4372(0x13b))/(0xe7*-0xe+-0x1e4a+0x2af3)+-parseInt(_0x2c4372(0x1f3))/(0x15*-0x165+-0x11b3+-0x2*-0x1782)+parseInt(_0x2c4372(0x23e))/(0xd4d+0x1c72+-0x29b6)*(parseInt(_0x2c4372(0x1e1))/(-0x2*0xdd5+0x1d5b+-0x1a7));if(_0x422a06===_0x2786bf)break;else _0x12400f['push'](_0x12400f['shift']());}catch(_0xda0a01){_0x12400f['push'](_0x12400f['shift']());}}}(_0x4eae,-0x580f2+0x7*0x9dbe+-0x4b79*-0x17));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x415790 from'../utils/groups.js';function _0x5ac1(_0x289c2d,_0x2460b8){const _0x176f44=_0x4eae();return _0x5ac1=function(_0x41d272,_0x3065b5){_0x41d272=_0x41d272-(0x6ef*0x2+0xb4a*0x2+-0x2396);let _0x4d69a7=_0x176f44[_0x41d272];return _0x4d69a7;},_0x5ac1(_0x289c2d,_0x2460b8);}import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x4037b9(0x217);export const version=_0x4037b9(0xeb);export const priority=0x8ed*-0x4+0x95*0x1+0x2397*0x1;export const configKeys=[_0x4037b9(0x17f)];export const commands=['gfilter',_0x4037b9(0x231)+'r','gdelfilter',_0x4037b9(0x28b)+'s',_0x4037b9(0x270)];function clampTypingMs(_0x2813f5){const _0x5a6c3c=_0x4037b9,_0x1ac453=Number(_0x2813f5);if(!Number[_0x5a6c3c(0x159)](_0x1ac453)||isNaN(_0x1ac453))return-0x1c73*0x1+0x326*0x7+0x669;if(_0x1ac453<=-0x15cd*0x1+-0x2cb*-0xd+0x1*-0xe82)return 0x47b+-0x1*0x17ee+0x1373;if(_0x1ac453>0x1ab0+-0xada+0x2ac2)return 0x179+-0xe6d+-0x13*-0x3c4;return Math[_0x5a6c3c(0x142)](_0x1ac453);}function sleep(_0x15ac70){return new Promise(_0x55ad68=>setTimeout(_0x55ad68,_0x15ac70));}async function simulateTypingAndWait(_0x4859d5,_0xafd7bb,_0x68fa46){const _0x37bc18=_0x4037b9;if(!_0x68fa46||_0x68fa46<=-0x7a5+0x544*0x4+-0xd6b)return;try{if(_0x4859d5&&typeof _0x4859d5[_0x37bc18(0xe4)+_0x37bc18(0x1e0)]===_0x37bc18(0x1ab))try{await _0x4859d5['sendPresen'+_0x37bc18(0x1e0)](_0x37bc18(0x13a),_0xafd7bb);}catch(_0x2033e6){}}catch(_0x3a1c89){}try{await sleep(_0x68fa46);}catch(_0x18e24e){}try{if(_0x4859d5&&typeof _0x4859d5[_0x37bc18(0xe4)+'ceUpdate']===_0x37bc18(0x1ab))try{await _0x4859d5[_0x37bc18(0xe4)+_0x37bc18(0x1e0)](_0x37bc18(0x293),_0xafd7bb);}catch(_0x2e7e88){}}catch(_0x7b1e2e){}}function ensureArray(_0x378323){if(!_0x378323)return[];if(Array['isArray'](_0x378323))return _0x378323;return[String(_0x378323)];}function uniqArray(_0x472007){const _0x2b469f=_0x4037b9,_0x50980a=new Set(),_0xaa1635=[];for(const _0x3b9b81 of _0x472007){const _0x1f787f=String(_0x3b9b81||'')[_0x2b469f(0xdf)]();if(!_0x1f787f)continue;!_0x50980a[_0x2b469f(0x263)](_0x1f787f)&&(_0x50980a[_0x2b469f(0x25c)](_0x1f787f),_0xaa1635[_0x2b469f(0x236)](_0x1f787f));}return _0xaa1635;}function escapeRegex(_0x1e747c){const _0x2fbff6=_0x4037b9;return _0x1e747c[_0x2fbff6(0x181)](/[.*+?^${}()|[\]\\]/g,_0x2fbff6(0x212));}function _0x4eae(){const _0x21806e=['SELECT\x20DIS','\x20\x20\x20\x20rr_ind','Deleted\x20','push','\x0a\x20gfilter\x20','dex,\x20creat','oUserJid','ias\x20or\x20pas','\x20alias/jid','integrated','simulateTy','1088874LadoDo','readAndNor','XT\x20NOT\x20NUL','selectedRo','gration','irmation','ses,\x20rr_in','IQUE\x20as\x20fa','clear','TEXT\x20DEFAU','rigger)\x0a\x20\x20',',\x20?,\x20?)\x0a\x20\x20','\x20excluded.','eated_at;','responses,','as|jid|all','\x20filters\x20f','all','llback','\x20\x20\x20\x20\x20\x20);\x0a\x20','fallback\x20b','INSERT\x20INT','buttonsRes','changes','\x20DEFAULT\x200','l\x20(deletes','normalizeT','er,\x20chat_j','IF\x20NOT\x20EXI','swap\x20table','add','isCommand','?,\x20?,\x20?,\x200','split','CREATE\x20IND','PRAGMA\x20tab','prepare','has','saved\x20filt','filter','lumns\x20erro','default):\x0a','\x5cw*','L\x20DEFAULT\x20','\x20\x20UNIQUE(c','find','\x22\x20->\x20','ite_master','extendedTe','finalize','gdelf','length','ODE','run','timestamp','object','t\x20error:\x20','ored\x20regex','er\x20failed\x20','creator','ttonId','ters\x20from\x20','ALUES\x20(?,\x20','\x20\x20VALUES\x20(',':\x20gdelfilt','\x20TO\x20filter','test','er\x20trigger','TEXT\x20NOT\x20N','er:\x20\x22','d\x20(sudo\x20+\x20',',\x0a\x20\x20','map','elfilter\x20a','ULL','AhoCorasic','resolveNam','gdelfilter','s\x20a\x20full\x20J','STS\x20idx_fi','getTableCo','o\x20restrict','deleted\x20','?,\x20?,\x200,\x20?','seMessage','paused','ensureSche','ection(s):','chat','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','response1\x0a','(\x0a\x20\x20\x20\x20\x20\x20\x20\x20','resolve\x20yo','d\x20=\x20?\x20ORDE','regex:','trim','\x20\x20\x20\x20\x20\x20chat','\x20\x20\x20\x20\x20\x20\x20\x20re','uded.creat','created_at','sendPresen','no\x20sendApi','CREATE\x20TAB','nodes','listTrigge','toLowerCas','completed;','2.2.0','response','hat_jid,\x20t','INTEGER\x20DE','[gfilter]\x20','\x20failure\x20a','our\x20defaul','MatchFromF','getAutomat','from\x20datab','\x20\x20\x20\x20\x20\x20crea','efault\x20val','pingAndWai','r);','ULT\x20\x27\x27,\x0a\x20\x20','conversati','255780GakBvT','O\x20filters\x20','or\x20','ce\x20error:\x20','a\x20line\x20`gp','\x20TEXT\x20DEFA','\x20filter\x20en','concat','\x20to\x20ctx.ke','ed_by,\x0a\x20\x20\x20','ilters\x20WHE','responses','ckup_','Usage\x20(gro','created\x20fi','indings\x20er','oup(s).','fault\x20conn','pickRespon','(chat_jid,','author','ND\x20trigger','fail','2\x0aOptional','ing\x20column','selectedBu','\x20\x20\x20created','ailed\x20to\x20','ENT','ase.\x20Rows\x20','UPDATE\x20fil','table\x20(can','chat_jid','id,\x20respon','20574PEoWfX','ters_new\x20(','gger)\x20DO\x20U','d|alias|al','post-swap\x20','filters','REATE\x20TABL','random','sendText\x20c','new\x20(trigg','failed\x20for','_jid\x20=\x20?\x20A','_filters_c','upsertFilt','_by\x20=\x20excl','delete','created\x20ne','eign_keys\x20','GLOBAL\x20(al','\x20=\x20?','ALTER\x20TABL','640vTUMPR','videoMessa','getUniqueJ','ng\x20safe\x20mi','_at)\x0a\x20\x20\x20\x20\x20','223196HiOeEU','SELECT\x20nam','exec','composing','2704387VSNtcW','ters\x20SET\x20r','from','3KsygTH','key','xtMessage','M\x20filters','floor','setdefault','IMARY\x20KEY\x20','\x20\x20\x20\x20\x20trigg','id|all>`\x20t','get','DELETE\x20FRO','ue\x20ON\x20filt','lfilter\x20al','d\x20IN\x20(?,\x20?','\x20<group-ji','\x20=\x20?\x20LIMIT','keys','n(s):\x20','idx\x20create','Unknown\x20gp','E\x20filters\x20','T\x20NULL,\x0a\x20\x20','created_by','\x20failed:\x20',':\x20\x22','d\x20for\x20conf','lso\x20failed','isFinite','(trigger,\x20','Jid','p-jid|alia','tingFilter','\x20\x20\x20\x20\x20\x20\x20\x20\x20r','ids','ll\x20\x20\x20(ERAS','imageMessa','name','trimStart','hat\x20ON\x20fil','tries\x20to\x20y','set','=\x20?\x20AND\x20tr','error:\x20','r_index\x20=\x20','rr_index\x20i','jid);','stringify','values','lfilter\x20tr','slice','igger1,tri','FAULT\x200','\x20\x20\x20\x20\x20','t_jid,\x20tri','\x20detected\x20','_index\x20FRO','\x20to\x20filter','ex\x20INTEGER','umn\x20','ror:\x20','delete\x20all','now','CREATE\x20UNI','\x20WHERE\x20typ','legacy\x20fil','FILTERS','mentions','replace','.\x20Please\x20c','er\x20TEXT\x20NO','singleSele','participan','added\x20miss','>]\x0aOr:\x20gde','argets','PDATE\x20SET\x0a','ponseMessa','\x20available','lowerToOri','are\x20send\x20a','\x20to\x20add\x20al','285194doVWhR','next','PRIMARY\x20KE','out\x20target','\x20filter(s)','!response1','trigger','TINCT\x20trig','QUE\x20INDEX\x20','=\x20ON;','s|all>','bot-state\x20','deleteFilt','trig','Failed\x20to\x20','Usage\x20(PM\x20','findings','\x20empty;\x20fa','Saved\x20','ue(s).','parse','\x20for\x20','fromMe','roundrobin','rom\x20','LT\x20\x27\x27','nexpected\x20','heck\x20/setd','function','ROM\x20filter','on(s):\x20','jid','onical\x20sch','splice','chat_id','rr_index','e=\x27table\x27\x20','replies','triggers','\x20filters:\x20','O\x20filters_','id,\x20trigge','ULL\x20DEFAUL','r\x20for\x20','EX\x20IF\x20NOT\x20','catch','EXISTS\x20fil','string','sponses\x20TE','ers\x20failed','trigger2>\x0a','SELECT\x20res','d\x20INTEGER\x20','new\x20RENAME','rr_index\x20=','\x22.\x20Use\x20gro','@g.us','\x200,\x0a\x20\x20\x20\x20\x20\x20',',\x20?)','INTEGER\x20PR','ted_at\x20INT','body','invalid\x20st','trigger1,t','ated_at)\x20V','EMENT,\x0a\x20\x20\x20','lling\x20back','startsWith','\x0aOptionall','loaded\x20','word','keyword','EXISTS\x20idx','\x20gp:\x20<grou','every','<trigger1,','ponses,\x20rr','caption','sendText\x20u','lters_uniq','tries\x20acro','ceUpdate','110hlEsgJ','Handler\x20er','\x20connectio','PRAGMA\x20for','up\x20admin):','igger\x20=\x20?','room','without\x20UN','isArray','ly\x20include','message','output','global\x20by\x20','unique\x20idx','1,trigger2','ur\x20default','alled\x20with','=\x20OFF;','3661856XVgPHf','\x20\x20\x20\x20\x20ON\x20CO','time','RESPONSE_M','LE\x20IF\x20NOT\x20','cleaned\x20up','reply','\x20created_b','search','le_info(','o\x20backup','ES\x20ALL\x20fil','includes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ers(chat_j','\x20chat_jid\x20','sendText\x20f','EGER\x20DEFAU','filters_ba','ted_at\x20=\x20e','and\x20GLOBAL','keywords','Deleted\x20AL','\x20gfilter\x20<','s\x20table','endsWith','ger\x20FROM\x20f','remoteJid','ctReply','could\x20not\x20','\x5c$&','multiple\x20t','malizeExis','gger2\x20[gp:','RE\x20chat_ji','gfilter','sendMessag','\x20to\x20','create','initialize','tries\x20from','shift','wId','sock','join','ups\x20helper','L\x20filters\x20','ma\x20fatal','ema)','text','ters(chat_','\x20renamed\x20t','\x20target\x20gr','NOT\x20NULL,\x0a','LT\x200\x0a\x20\x20\x20\x20\x20','\x20everythin','max','value','\x27[]\x27,\x0a\x20\x20\x20\x20','y\x20include\x20','build','glistfilte','-\x20performi'];_0x4eae=function(){return _0x21806e;};return _0x4eae();}function wildcardToRegexPattern(_0x2a0eae){const _0x1ddb1f=_0x4037b9,_0x1890e5=_0x2a0eae[_0x1ddb1f(0x25f)]('*')[_0x1ddb1f(0x286)](_0x1747fc=>escapeRegex(_0x1747fc));return'\x5cb'+_0x1890e5[_0x1ddb1f(0x220)](_0x1ddb1f(0x268))+'\x5cb';}function clampConfigTypingMs(){const _0x536dc7=_0x4037b9;try{const _0x3b34b6=getConfig()||{},_0x7aadb6=_0x3b34b6[_0x536dc7(0x17f)]&&typeof _0x3b34b6[_0x536dc7(0x17f)]===_0x536dc7(0x275)?_0x3b34b6[_0x536dc7(0x17f)]:{};return clampTypingMs(_0x7aadb6['TYPING_SIM'+'_MS']);}catch(_0x1f096c){return-0xee6+-0x4d9+0x13bf;}}let botRef=null,sendApi=null;async function sendText(_0x5be836,_0x3f437b,_0x4fdee0,_0x4f4fd4){const _0xdc87f8=_0x4037b9;let _0x5d3a59=null,_0x31524b=null,_0x328533=null,_0x32644f=[];_0x5be836&&typeof _0x5be836===_0xdc87f8(0x275)&&_0x5be836[_0xdc87f8(0x13f)]&&_0x5be836[_0xdc87f8(0x1eb)]?(_0x5d3a59=_0x5be836,_0x31524b=_0x3f437b,_0x328533=_0x4fdee0,_0x32644f=Array[_0xdc87f8(0x1e9)](_0x4f4fd4)?_0x4f4fd4:[]):(_0x31524b=_0x5be836,_0x328533=_0x3f437b,_0x32644f=Array[_0xdc87f8(0x1e9)](_0x4fdee0)?_0x4fdee0:[]);if(!_0x328533)return;if(!_0x31524b){warn(_0xdc87f8(0xef)+_0xdc87f8(0x125)+_0xdc87f8(0x1f1)+_0xdc87f8(0x192)+_0xdc87f8(0x15b));return;}const _0x46e260={'text':String(_0x328533)};if(Array[_0xdc87f8(0x1e9)](_0x32644f)&&_0x32644f[_0xdc87f8(0x271)])_0x46e260[_0xdc87f8(0x180)]=_0x32644f;try{if(!sendApi){warn(_0xdc87f8(0xef)+_0xdc87f8(0xe5)+_0xdc87f8(0x18b));return;}const _0x41ab74=clampConfigTypingMs();if(_0x41ab74>0xa5*-0x19+0x165c+0xd*-0x7b)try{await simulateTypingAndWait(botRef?.[_0xdc87f8(0x21f)],_0x31524b,_0x41ab74);}catch(_0x86303b){warn(_0xdc87f8(0xef)+_0xdc87f8(0x23d)+_0xdc87f8(0xf7)+_0xdc87f8(0x276)+(_0x86303b?.[_0xdc87f8(0x1eb)]||_0x86303b));}if(_0x5d3a59&&typeof _0x5d3a59['reply']===_0xdc87f8(0x1ab))try{await _0x5d3a59[_0xdc87f8(0x1f9)]({'text':String(_0x328533),'mentions':_0x46e260[_0xdc87f8(0x180)]||[]});return;}catch(_0x29509a){try{await sendApi(_0x31524b,_0x46e260);return;}catch(_0x1fb98b){warn(_0xdc87f8(0xef)+_0xdc87f8(0x252)+_0xdc87f8(0x18d)+'fter\x20reply'+_0xdc87f8(0xf0)+_0xdc87f8(0x158)+':\x20'+(_0x1fb98b?.[_0xdc87f8(0x1eb)]||_0x1fb98b));return;}}try{await sendApi(_0x31524b,_0x46e260);}catch(_0x44424b){warn(_0xdc87f8(0xef)+_0xdc87f8(0x204)+_0xdc87f8(0x116)+_0x31524b+':\x20'+(_0x44424b?.[_0xdc87f8(0x1eb)]||_0x44424b));}}catch(_0x25cb33){warn(_0xdc87f8(0xef)+_0xdc87f8(0x1dd)+_0xdc87f8(0x1a9)+_0xdc87f8(0x168)+(_0x25cb33?.['message']||_0x25cb33));}}async function tableExists(_0x19199b){const _0x5501f4=_0x4037b9;try{const _0x531793=await db[_0x5501f4(0x147)](_0x5501f4(0x138)+'e\x20FROM\x20sql'+_0x5501f4(0x26d)+_0x5501f4(0x17d)+_0x5501f4(0x1b3)+'AND\x20name=?',[_0x19199b]);return!!_0x531793;}catch(_0x5ec511){return warn(_0x5501f4(0xef)+'tableExist'+'s\x20error:\x20'+(_0x5ec511?.[_0x5501f4(0x1eb)]||_0x5ec511)),![];}}async function getTableColumns(_0x5474ce){const _0x77f432=_0x4037b9;try{const _0x405c08=await db['all'](_0x77f432(0x261)+_0x77f432(0x1fc)+_0x5474ce+')');return(_0x405c08||[])[_0x77f432(0x286)](_0x4bf32f=>_0x4bf32f[_0x77f432(0x162)]);}catch(_0x371c11){return warn(_0x77f432(0xef)+_0x77f432(0x28e)+_0x77f432(0x266)+_0x77f432(0x1ba)+_0x5474ce+':\x20'+(_0x371c11?.[_0x77f432(0x1eb)]||_0x371c11)),[];}}function resolveChatJidFromRow(_0x457157){const _0x1e23cf=_0x4037b9,_0x215e08=[_0x1e23cf(0x11b),'chatid',_0x1e23cf(0x1b1),_0x1e23cf(0x1ae),_0x1e23cf(0x296),_0x1e23cf(0x1e7)];for(const _0x57f2dc of _0x215e08)if(_0x57f2dc in _0x457157&&_0x457157[_0x57f2dc])return String(_0x457157[_0x57f2dc]);for(const _0x3513d4 of Object[_0x1e23cf(0x14e)](_0x457157)){const _0x597909=_0x457157[_0x3513d4];if(typeof _0x597909===_0x1e23cf(0x1be)&&_0x597909[_0x1e23cf(0x1ff)]('@'))return _0x597909;}return null;}function resolveTriggerFromRow(_0x528bc5){const _0x2da443=_0x4037b9,_0x4cc2bb=[_0x2da443(0x195),_0x2da443(0x19c),_0x2da443(0x1d6),_0x2da443(0x1d5),'phrase'];for(const _0x22e87a of _0x4cc2bb)if(_0x22e87a in _0x528bc5&&_0x528bc5[_0x22e87a])return String(_0x528bc5[_0x22e87a]);for(const _0x5a25e1 of Object[_0x2da443(0x14e)](_0x528bc5)){const _0x84ce33=_0x528bc5[_0x5a25e1];if(typeof _0x84ce33==='string'&&!_0x84ce33[_0x2da443(0x1ff)]('@')&&_0x84ce33['length']<-0x5a5+-0x2*-0x25d+0x217)return _0x84ce33;}return null;}function resolveResponsesFromRow(_0x5a3535){const _0x49b1c7=_0x4037b9,_0x51e0d3=['responses',_0x49b1c7(0xec),_0x49b1c7(0x1f9),_0x49b1c7(0x1b4),_0x49b1c7(0x1cc),_0x49b1c7(0x22d),_0x49b1c7(0x1eb)];for(const _0x105453 of _0x51e0d3)if(_0x105453 in _0x5a3535&&_0x5a3535[_0x105453]!=null)return _0x5a3535[_0x105453];for(const _0x14e284 of Object[_0x49b1c7(0x14e)](_0x5a3535)){const _0x42f6ea=_0x5a3535[_0x14e284];if(typeof _0x42f6ea===_0x49b1c7(0x1be)&&(_0x42f6ea[_0x49b1c7(0xdf)]()[_0x49b1c7(0x1d2)]('!')||_0x42f6ea['trim']()[_0x49b1c7(0x1ff)]('\x0a')||_0x42f6ea[_0x49b1c7(0xdf)]()[_0x49b1c7(0x1d2)]('[')))return _0x42f6ea;}return null;}async function readAndNormalizeExistingFilters(){const _0xe67ca2=_0x4037b9;try{const _0x27247f=await db[_0xe67ca2(0x24f)]('SELECT\x20*\x20F'+_0xe67ca2(0x1ac)+'s'),_0x20aa76=new Map();for(const _0xfa7ae of _0x27247f||[]){const _0x50e532=resolveTriggerFromRow(_0xfa7ae)||'',_0x5471f6=resolveChatJidFromRow(_0xfa7ae)||'';if(!_0x50e532||!_0x5471f6)continue;const _0x59c3b2=resolveResponsesFromRow(_0xfa7ae),_0x414e6c=normalizeResponseValue(_0x59c3b2),_0x552afa=_0xfa7ae['created_by']||_0xfa7ae[_0xe67ca2(0x279)]||_0xfa7ae[_0xe67ca2(0x10f)]||'';let _0x14a178=Number(_0xfa7ae[_0xe67ca2(0xe3)]||_0xfa7ae['ts']||_0xfa7ae[_0xe67ca2(0x274)]||_0xfa7ae[_0xe67ca2(0x1f5)]||0x261f+-0x403+-0x221c);if(!_0x14a178)_0x14a178=Math['floor'](Date[_0xe67ca2(0x17b)]()/(0xc85+-0x2*0x951+-0x87*-0x13));const _0xac62f9=_0x5471f6+'||'+_0x50e532;if(!_0x20aa76[_0xe67ca2(0x263)](_0xac62f9))_0x20aa76[_0xe67ca2(0x166)](_0xac62f9,{'trigger':_0x50e532,'chat_jid':_0x5471f6,'responses':_0x414e6c['slice'](),'created_by':_0x552afa,'created_at':_0x14a178});else{const _0x3c1318=_0x20aa76[_0xe67ca2(0x147)](_0xac62f9);_0x3c1318[_0xe67ca2(0x106)]=uniqArray(_0x3c1318[_0xe67ca2(0x106)][_0xe67ca2(0x102)](_0x414e6c)),_0x3c1318[_0xe67ca2(0x154)]=_0x3c1318[_0xe67ca2(0x154)]||_0x552afa,_0x3c1318[_0xe67ca2(0xe3)]=Math[_0xe67ca2(0x22c)](_0x3c1318[_0xe67ca2(0xe3)]||-0x21ce+-0xced+0x2ebb,_0x14a178||0xe59+0x9*0x3ff+-0x3250);}}return Array[_0xe67ca2(0x13d)](_0x20aa76[_0xe67ca2(0x16d)]());}catch(_0x7c1dff){return warn('[gfilter]\x20'+_0xe67ca2(0x23f)+_0xe67ca2(0x214)+_0xe67ca2(0x15d)+'s\x20failed:\x20'+(_0x7c1dff?.[_0xe67ca2(0x1eb)]||_0x7c1dff)),[];}}async function ensureSchema(){const _0x391e19=_0x4037b9,_0x26ed61={'id':_0x391e19(0x1ca)+_0x391e19(0x144)+'AUTOINCREM'+_0x391e19(0x117),'trigger':_0x391e19(0x282)+_0x391e19(0x288),'chat_jid':_0x391e19(0x282)+_0x391e19(0x288),'responses':_0x391e19(0x282)+_0x391e19(0x1b9)+'T\x20\x27[]\x27','rr_index':_0x391e19(0xee)+'FAULT\x200','created_by':_0x391e19(0x247)+_0x391e19(0x1a8),'created_at':_0x391e19(0xee)+_0x391e19(0x171)};try{const _0x327933=await tableExists(_0x391e19(0x122));if(!_0x327933){const _0x51e010=Object['entries'](_0x26ed61)['map'](([_0xd84019,_0x47968f])=>_0xd84019+'\x20'+_0x47968f)['join'](_0x391e19(0x285));await db['exec'](_0x391e19(0x297)+_0x391e19(0x123)+_0x391e19(0x152)+_0x391e19(0x299)+'\x20\x20'+_0x51e010+(_0x391e19(0x201)+_0x391e19(0x26a)+_0x391e19(0xed)+_0x391e19(0x248)+_0x391e19(0x251)+_0x391e19(0x172)));try{await db[_0x391e19(0x139)](_0x391e19(0x260)+_0x391e19(0x1bb)+_0x391e19(0x1d7)+_0x391e19(0x129)+_0x391e19(0x164)+'ters(chat_'+_0x391e19(0x16b));}catch(_0x3fe6fc){}try{await db['exec'](_0x391e19(0x17c)+_0x391e19(0x197)+_0x391e19(0x25a)+_0x391e19(0x28d)+_0x391e19(0x1de)+_0x391e19(0x149)+_0x391e19(0x202)+_0x391e19(0x1b8)+_0x391e19(0xf8));}catch(_0x3049a2){}info('[gfilter]\x20'+_0x391e19(0x12d)+'w\x20filters\x20'+_0x391e19(0x11a)+_0x391e19(0x1af)+_0x391e19(0x224));return;}const _0x313e09=await getTableColumns(_0x391e19(0x122)),_0x209250=[];for(const _0x58f41a of Object[_0x391e19(0x14e)](_0x26ed61)){if(!_0x313e09[_0x391e19(0x1ff)](_0x58f41a))_0x209250[_0x391e19(0x236)](_0x58f41a);}if(_0x209250[_0x391e19(0x271)]===-0x339+-0x147c+0x7e7*0x3){try{await db['exec']('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+_0x391e19(0x1d7)+'_filters_c'+'hat\x20ON\x20fil'+_0x391e19(0x226)+_0x391e19(0x16b));}catch(_0x42a8ba){warn(_0x391e19(0xef)+_0x391e19(0x150)+':\x20'+(_0x42a8ba?.[_0x391e19(0x1eb)]||_0x42a8ba));}try{await db[_0x391e19(0x139)](_0x391e19(0x17c)+'QUE\x20INDEX\x20'+_0x391e19(0x25a)+_0x391e19(0x28d)+_0x391e19(0x1de)+_0x391e19(0x149)+_0x391e19(0x202)+_0x391e19(0x1b8)+_0x391e19(0xf8));}catch(_0x16a7d2){warn(_0x391e19(0xef)+'unique\x20idx'+':\x20'+(_0x16a7d2?.[_0x391e19(0x1eb)]||_0x16a7d2));}return;}const _0x448e0d=_0x209250[_0x391e19(0x1d9)](_0x210eed=>!['id',_0x391e19(0x195),_0x391e19(0x11b)][_0x391e19(0x1ff)](_0x210eed));if(_0x448e0d){for(const _0x1c6faf of _0x209250){try{const _0x508268=_0x26ed61[_0x1c6faf],_0x182d22=_0x508268[_0x391e19(0x25f)]('\x20')[_0x391e19(0x16f)](0xaa+-0x36*-0x66+0x162d*-0x1)['join']('\x20');await db['exec']('ALTER\x20TABL'+'E\x20filters\x20'+'ADD\x20COLUMN'+'\x20'+_0x1c6faf+'\x20'+_0x182d22),info(_0x391e19(0xef)+_0x391e19(0x186)+_0x391e19(0x113)+'\x20'+_0x1c6faf+(_0x391e19(0x176)+_0x391e19(0x20c)));}catch(_0x48110d){warn(_0x391e19(0xef)+'adding\x20col'+_0x391e19(0x178)+_0x1c6faf+_0x391e19(0x155)+(_0x48110d?.[_0x391e19(0x1eb)]||_0x48110d));}}try{await db[_0x391e19(0x139)]('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+'EXISTS\x20idx'+_0x391e19(0x129)+_0x391e19(0x164)+_0x391e19(0x226)+_0x391e19(0x16b));}catch(_0x530d2e){warn(_0x391e19(0xef)+_0x391e19(0x150)+':\x20'+(_0x530d2e?.[_0x391e19(0x1eb)]||_0x530d2e));}try{await db[_0x391e19(0x139)](_0x391e19(0x17c)+_0x391e19(0x197)+'IF\x20NOT\x20EXI'+'STS\x20idx_fi'+_0x391e19(0x1de)+'ue\x20ON\x20filt'+'ers(chat_j'+_0x391e19(0x1b8)+_0x391e19(0xf8));}catch(_0x593b08){warn(_0x391e19(0xef)+_0x391e19(0x1ee)+':\x20'+(_0x593b08?.['message']||_0x593b08));}return;}info(_0x391e19(0xef)+_0x391e19(0x17e)+'ters\x20table'+_0x391e19(0x174)+_0x391e19(0x232)+_0x391e19(0x135)+_0x391e19(0x242));const _0xc6e19d=await readAndNormalizeExistingFilters();await db[_0x391e19(0x139)](_0x391e19(0x1e4)+_0x391e19(0x12e)+_0x391e19(0x1f2));try{await db[_0x391e19(0x139)](_0x391e19(0xe6)+_0x391e19(0x1f7)+'EXISTS\x20fil'+_0x391e19(0x11e)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+_0x391e19(0x1c3)+_0x391e19(0x191)+'Y\x20AUTOINCR'+_0x391e19(0x1d0)+'\x20\x20\x20\x20\x20trigg'+_0x391e19(0x183)+_0x391e19(0x153)+_0x391e19(0xe0)+'_jid\x20TEXT\x20'+_0x391e19(0x229)+_0x391e19(0xe1)+'sponses\x20TE'+_0x391e19(0x240)+_0x391e19(0x269)+'\x27[]\x27,\x0a\x20\x20\x20\x20'+_0x391e19(0x234)+_0x391e19(0x177)+_0x391e19(0x256)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x391e19(0x154)+_0x391e19(0x100)+_0x391e19(0xf9)+_0x391e19(0xf5)+_0x391e19(0x1cb)+'EGER\x20DEFAU'+'LT\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20UNIQUE'+_0x391e19(0x10e)+'\x20trigger)\x0a'+'\x20\x20\x20\x20\x20\x20);');}catch(_0x81d79a){await db['exec'](_0x391e19(0xe6)+'LE\x20IF\x20NOT\x20'+_0x391e19(0x1bd)+_0x391e19(0x11e)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+_0x391e19(0x1c3)+_0x391e19(0x191)+'Y\x20AUTOINCR'+_0x391e19(0x1d0)+_0x391e19(0x145)+_0x391e19(0x183)+_0x391e19(0x153)+_0x391e19(0xe0)+'_jid\x20TEXT\x20'+_0x391e19(0x229)+_0x391e19(0xe1)+_0x391e19(0x1bf)+_0x391e19(0x240)+_0x391e19(0x269)+_0x391e19(0x22e)+_0x391e19(0x234)+'ex\x20INTEGER'+_0x391e19(0x256)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'created_by'+'\x20TEXT\x20DEFA'+_0x391e19(0xf9)+_0x391e19(0xf5)+'ted_at\x20INT'+_0x391e19(0x205)+_0x391e19(0x22a)+'\x20);'),warn(_0x391e19(0xef)+_0x391e19(0x109)+'lters_new\x20'+_0x391e19(0x1e8)+_0x391e19(0x245)+_0x391e19(0x250));}const _0x5ee4e7=await db[_0x391e19(0x262)](_0x391e19(0x253)+_0x391e19(0x1b7)+_0x391e19(0x126)+_0x391e19(0x259)+_0x391e19(0x11c)+_0x391e19(0x244)+_0x391e19(0x238)+'ed_by,\x20cre'+_0x391e19(0x1cf)+_0x391e19(0x27c)+_0x391e19(0x291)+_0x391e19(0x1c9));try{for(const _0x49fa51 of _0xc6e19d){const _0x4207b4=JSON[_0x391e19(0x16c)](ensureArray(_0x49fa51[_0x391e19(0x106)]||[]));try{await _0x5ee4e7[_0x391e19(0x273)](_0x49fa51[_0x391e19(0x195)],_0x49fa51['chat_jid'],_0x4207b4,_0x49fa51[_0x391e19(0x154)]||'',Number(_0x49fa51['created_at']||Math[_0x391e19(0x142)](Date[_0x391e19(0x17b)]()/(0xea5+-0xfe1+0x524))));}catch(_0x3ef4d5){warn('[gfilter]\x20'+_0x391e19(0x211)+'insert\x20nor'+'malized\x20ro'+'w\x20'+_0x49fa51[_0x391e19(0x11b)]+'@'+_0x49fa51[_0x391e19(0x195)]+':\x20'+(_0x3ef4d5?.[_0x391e19(0x1eb)]||_0x3ef4d5));}}}finally{try{await _0x5ee4e7[_0x391e19(0x26f)]();}catch(_0xe96ae5){}}try{const _0x26c45f=_0x391e19(0x206)+_0x391e19(0x107)+Math[_0x391e19(0x142)](Date['now']()/(-0x22*-0x92+-0x47*0x3e+0x1b6));await db['exec'](_0x391e19(0x131)+_0x391e19(0x152)+'RENAME\x20TO\x20'+_0x26c45f+';'),await db[_0x391e19(0x139)](_0x391e19(0x131)+'E\x20filters_'+_0x391e19(0x1c4)+_0x391e19(0x27f)+'s;');try{await db[_0x391e19(0x139)]('CREATE\x20IND'+_0x391e19(0x1bb)+_0x391e19(0x1d7)+_0x391e19(0x129)+_0x391e19(0x164)+_0x391e19(0x226)+_0x391e19(0x16b));}catch(_0x3b89bd){warn(_0x391e19(0xef)+_0x391e19(0x121)+'idx:\x20'+(_0x3b89bd?.[_0x391e19(0x1eb)]||_0x3b89bd));}try{await db[_0x391e19(0x139)](_0x391e19(0x17c)+'QUE\x20INDEX\x20'+_0x391e19(0x25a)+_0x391e19(0x28d)+'lters_uniq'+'ue\x20ON\x20filt'+_0x391e19(0x202)+_0x391e19(0x1b8)+'r);');}catch(_0x49533d){warn(_0x391e19(0xef)+'post-swap\x20'+_0x391e19(0x1ee)+':\x20'+(_0x49533d?.['message']||_0x49533d));}info(_0x391e19(0xef)+'migration\x20'+_0x391e19(0xea)+'\x20old\x20table'+_0x391e19(0x227)+_0x391e19(0x1fd));}catch(_0x9c6a34){warn(_0x391e19(0xef)+_0x391e19(0x25b)+'s\x20failed:\x20'+(_0x9c6a34?.[_0x391e19(0x1eb)]||_0x9c6a34));throw _0x9c6a34;}finally{await db[_0x391e19(0x139)](_0x391e19(0x1e4)+_0x391e19(0x12e)+_0x391e19(0x198));}}catch(_0x56a544){error(_0x56a544,'[gfilter]\x20'+_0x391e19(0x294)+_0x391e19(0x223));throw _0x56a544;}}function normalizeResponseValue(_0x2faa5f){const _0x80b557=_0x4037b9;if(_0x2faa5f==null)return[];if(Array[_0x80b557(0x1e9)](_0x2faa5f))return uniqArray(_0x2faa5f);if(typeof _0x2faa5f===_0x80b557(0x1be)){let _0x51206f=_0x2faa5f[_0x80b557(0x181)](/\r/g,'');const _0x1e16eb=_0x51206f['trim']();if(_0x1e16eb[_0x80b557(0x1d2)]('['))try{const _0x5d0acf=JSON[_0x80b557(0x1a3)](_0x1e16eb);if(Array[_0x80b557(0x1e9)](_0x5d0acf))return uniqArray(_0x5d0acf[_0x80b557(0x286)](_0x19888b=>String(_0x19888b||'')));}catch(_0x2fb4cd){}_0x51206f=_0x51206f['replace'](/^\s*\n+/,'')[_0x80b557(0x181)](/\n+\s*$/,'');const _0x5f3aaf=_0x51206f[_0x80b557(0x25f)]('\x0a'),_0xe89e5=_0x5f3aaf['some'](_0x12a022=>_0x12a022[_0x80b557(0x163)]()[_0x80b557(0x1d2)]('!'));if(_0xe89e5){const _0x29a1b8=[];let _0x11fd6=null;for(const _0x2d986b of _0x5f3aaf){if(_0x2d986b[_0x80b557(0x163)]()[_0x80b557(0x1d2)]('!')){const _0x31cd85=_0x2d986b[_0x80b557(0x181)](/^\s*!/,''),_0x25ef16=_0x31cd85[_0x80b557(0x181)](/\s+$/,'');_0x11fd6=_0x25ef16,_0x29a1b8['push'](_0x11fd6);}else{const _0x2a0ab3=_0x2d986b[_0x80b557(0x181)](/\s+$/,'');if(_0x11fd6===null)_0x11fd6=_0x2a0ab3,_0x29a1b8[_0x80b557(0x236)](_0x11fd6);else{const _0x333187=_0x29a1b8[_0x80b557(0x271)]-(0x3*0x89f+-0x436*-0x4+0x2*-0x155a);_0x29a1b8[_0x333187]=_0x29a1b8[_0x333187]+'\x0a'+_0x2a0ab3,_0x11fd6=_0x29a1b8[_0x333187];}}}return uniqArray(_0x29a1b8[_0x80b557(0x286)](_0x264715=>String(_0x264715||'')[_0x80b557(0xdf)]()));}else{const _0x55d691=_0x5f3aaf[_0x80b557(0x286)](_0x4cddc4=>_0x4cddc4[_0x80b557(0x181)](/\s+$/,''))[_0x80b557(0x220)]('\x0a')[_0x80b557(0xdf)]();if(!_0x55d691)return[];return[_0x55d691];}}return[];}async function upsertFilterRow(_0xb27ea5,_0x3977df,_0x4c3fb2,_0x4cef6a){const _0x45ea72=_0x4037b9;try{const _0x557dba=Math['floor'](Date['now']()/(0x1*0xa49+0x13ca+0x21*-0xcb)),_0x54c8a5=JSON[_0x45ea72(0x16c)](uniqArray(ensureArray(_0x4c3fb2)['map'](_0x46b5da=>String(_0x46b5da)['trim']())[_0x45ea72(0x265)](Boolean)));await db[_0x45ea72(0x273)](_0x45ea72(0x253)+_0x45ea72(0xfc)+_0x45ea72(0x15a)+'chat_jid,\x20'+'responses,'+'\x20rr_index,'+_0x45ea72(0x1fa)+'y,\x20created'+_0x45ea72(0x136)+_0x45ea72(0x27d)+_0x45ea72(0x25e)+_0x45ea72(0x249)+_0x45ea72(0x1f4)+'NFLICT(cha'+_0x45ea72(0x173)+_0x45ea72(0x11f)+_0x45ea72(0x189)+_0x45ea72(0x15e)+'esponses\x20='+_0x45ea72(0x24a)+_0x45ea72(0x24c)+_0x45ea72(0x200)+_0x45ea72(0x1c5)+_0x45ea72(0x1c8)+_0x45ea72(0x115)+_0x45ea72(0x12b)+_0x45ea72(0xe2)+_0x45ea72(0x104)+'\x20\x20\x20\x20\x20\x20crea'+_0x45ea72(0x207)+'xcluded.cr'+_0x45ea72(0x24b),[_0x3977df,_0xb27ea5,_0x54c8a5,_0x4cef6a||'',_0x557dba]);try{automatonCache[_0x45ea72(0x246)]();}catch(_0x161a9f){}return info(_0x45ea72(0xef)+_0x45ea72(0x264)+_0x45ea72(0x283)+_0x3977df+_0x45ea72(0x26c)+_0xb27ea5),!![];}catch(_0x5858a3){return error(_0x5858a3,_0x45ea72(0xef)+_0x45ea72(0x12a)+_0x45ea72(0x278)+'for\x20'+_0x3977df+'\x20@\x20'+_0xb27ea5),![];}}async function deleteFilters(_0x3d9483,_0x45a80c){const _0x8e3ea3=_0x4037b9;if(!Array[_0x8e3ea3(0x1e9)](_0x45a80c)||_0x45a80c[_0x8e3ea3(0x271)]===0x1444+0x1*-0x82e+0x1a*-0x77)return 0x45f+0x869*0x2+-0x1531;try{let _0x39d50e=-0x8a2+0x267c+0x1dda*-0x1;for(const _0x33039b of _0x45a80c){const _0x14b9b6=await db['run'](_0x8e3ea3(0x148)+'M\x20filters\x20'+'WHERE\x20chat'+_0x8e3ea3(0x128)+'ND\x20trigger'+_0x8e3ea3(0x130),[_0x3d9483,_0x33039b]);if(_0x14b9b6?.[_0x8e3ea3(0x255)])_0x39d50e+=_0x14b9b6[_0x8e3ea3(0x255)];info(_0x8e3ea3(0xef)+_0x8e3ea3(0x290)+_0x33039b+'\x20@\x20'+_0x3d9483);}try{automatonCache[_0x8e3ea3(0x246)]();}catch(_0xd29973){}return _0x39d50e;}catch(_0x27ce59){return error(_0x27ce59,'[gfilter]\x20'+_0x8e3ea3(0x19b)+_0x8e3ea3(0x1c0)+_0x8e3ea3(0x1a4)+_0x3d9483),-0x24a1+-0x1*-0x1b87+-0x2*-0x48d;}}async function listTriggersForChat(_0x429d5b){const _0x2dde59=_0x4037b9;try{const _0x227215=await db['all'](_0x2dde59(0x233)+'TINCT\x20trig'+_0x2dde59(0x20e)+_0x2dde59(0x105)+_0x2dde59(0x216)+_0x2dde59(0xdd)+'R\x20BY\x20trigg'+'er',[_0x429d5b]);return(_0x227215||[])['map'](_0x5df267=>_0x5df267['trigger']);}catch(_0x146706){return warn(_0x146706,_0x2dde59(0xef)+_0x2dde59(0xe8)+'rsForChat\x20'+_0x2dde59(0x127)+'\x20'+_0x429d5b),[];}}async function pickResponseAndAdvance(_0x1ef18f,_0x612279,_0x375179=_0x4037b9(0x1a6)){const _0x3bb5ac=_0x4037b9;try{const _0x2cc34f=await db['get'](_0x3bb5ac(0x1c2)+_0x3bb5ac(0x1db)+_0x3bb5ac(0x175)+'M\x20filters\x20'+'WHERE\x20chat'+_0x3bb5ac(0x128)+_0x3bb5ac(0x110)+_0x3bb5ac(0x14d)+'\x201',[_0x1ef18f,_0x612279]);if(!_0x2cc34f)return null;let _0x32a7a3=[];try{_0x32a7a3=JSON['parse'](_0x2cc34f[_0x3bb5ac(0x106)]||'[]');}catch{_0x32a7a3=ensureArray(_0x2cc34f[_0x3bb5ac(0x106)]);}_0x32a7a3=ensureArray(_0x32a7a3);if(!_0x32a7a3[_0x3bb5ac(0x271)])return null;if((_0x375179||'')[_0x3bb5ac(0xe9)+'e']()===_0x3bb5ac(0x124)){const _0x97dda2=Math[_0x3bb5ac(0x142)](Math[_0x3bb5ac(0x124)]()*_0x32a7a3[_0x3bb5ac(0x271)]);return _0x32a7a3[_0x97dda2];}const _0x3c0563=Number(_0x2cc34f[_0x3bb5ac(0x1b2)]||0x6bc*-0x5+0x26d6+-0x52a),_0x1a23bc=_0x32a7a3[_0x3c0563%_0x32a7a3['length']];try{await db[_0x3bb5ac(0x273)](_0x3bb5ac(0x119)+_0x3bb5ac(0x13c)+_0x3bb5ac(0x169)+'(rr_index\x20'+'+\x201)\x20WHERE'+_0x3bb5ac(0x203)+_0x3bb5ac(0x167)+_0x3bb5ac(0x1e6),[_0x1ef18f,_0x612279]);}catch(_0x410c68){warn(_0x3bb5ac(0xef)+_0x3bb5ac(0x16a)+'ncrement\x20f'+'ailed:\x20'+(_0x410c68?.[_0x3bb5ac(0x1eb)]||_0x410c68));}return _0x1a23bc;}catch(_0x36e2bd){return warn(_0x3bb5ac(0xef)+_0x3bb5ac(0x10d)+'seAndAdvan'+_0x3bb5ac(0xfe)+(_0x36e2bd?.['message']||_0x36e2bd)),null;}}function parseFilterCommandText(_0xb66ffd){const _0x477391=_0x4037b9;if(!_0xb66ffd)return null;const _0x420589=_0xb66ffd[_0x477391(0x25f)](/\r?\n/)[_0x477391(0x286)](_0x543e3d=>_0x543e3d['replace'](/\r/g,''));if(!_0x420589['length'])return null;let _0x37c705=(_0x420589[0x2*0x97a+0x5ad*0x4+-0x29a8]||'')['trim'](),_0x3dff92=_0x420589[_0x477391(0x16f)](0x2605*0x1+-0x15da*-0x1+-0x1def*0x2),_0x48abb7=null;const _0x33eb0a=_0x37c705['match'](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);_0x33eb0a&&(_0x37c705=(_0x33eb0a[0x179e+-0x500+0x1*-0x129d]||'')[_0x477391(0xdf)](),_0x48abb7=(_0x33eb0a[-0x72d+0x57*0x33+0x2*-0x513]||'')[_0x477391(0xdf)]());if(!_0x48abb7&&_0x3dff92&&_0x3dff92[_0x477391(0x271)]){let _0x12683a=-(0x1*-0x1cba+0x2490+-0x7d5);for(let _0x2ed29e=_0x3dff92[_0x477391(0x271)]-(-0xd41+0x1*0x425+0x91d*0x1);_0x2ed29e>=-0xe5f*0x2+0x3*-0x6d3+0x2b*0x125;_0x2ed29e--){if(String(_0x3dff92[_0x2ed29e]||'')[_0x477391(0xdf)]()[_0x477391(0x271)]>0x4e2+0x1e08+-0x22ea){_0x12683a=_0x2ed29e;break;}}if(_0x12683a>=0x1eaf+-0xe13+-0x109c){const _0x1ffdff=String(_0x3dff92[_0x12683a]||'')[_0x477391(0xdf)](),_0x2369f3=_0x1ffdff['match'](/^gp[:\s]*([^\s,]+)\s*$/i);_0x2369f3&&(_0x48abb7=(_0x2369f3[0x7*0x147+-0x1baf*0x1+0x12bf]||'')[_0x477391(0xdf)](),_0x3dff92[_0x477391(0x1b0)](_0x12683a,0x755*0x1+-0x229f*0x1+0x1b4b));}}let _0xc88f4a=_0x37c705[_0x477391(0xdf)]()[_0x477391(0x25f)](/\s+/)[_0x477391(0x265)](Boolean);if(_0xc88f4a[_0x477391(0x271)]&&_0xc88f4a[0x1af8+0x2265+-0x3d5d*0x1][_0x477391(0xe9)+'e']()===_0x477391(0x217))_0xc88f4a[_0x477391(0x21d)]();const _0x481510=_0xc88f4a[_0x477391(0x220)]('\x20')[_0x477391(0xdf)]();let _0x51cd59=[];_0x481510&&(_0x481510['includes'](',')?_0x51cd59=_0x481510[_0x477391(0x25f)](',')[_0x477391(0x286)](_0xf90423=>_0xf90423['trim']())[_0x477391(0x265)](Boolean):_0x51cd59=_0x481510[_0x477391(0x25f)](/\s+/)[_0x477391(0x286)](_0x269e81=>_0x269e81[_0x477391(0xdf)]())[_0x477391(0x265)](Boolean));const _0x4bb1ed=_0x3dff92;if(!_0x4bb1ed[_0x477391(0x271)])return{'triggers':_0x51cd59,'responses':[],'gp':_0x48abb7};const _0x569166=_0x4bb1ed[_0x477391(0x220)]('\x0a'),_0x10257b=normalizeResponseValue(_0x569166);return{'triggers':_0x51cd59,'responses':_0x10257b,'gp':_0x48abb7};}function getMessageText(_0x25cdfc){const _0x19552f=_0x4037b9;if(!_0x25cdfc||!_0x25cdfc[_0x19552f(0x1eb)])return'';const _0x4446a1=_0x25cdfc[_0x19552f(0x1eb)];if(_0x4446a1[_0x19552f(0xfa)+'on'])return _0x4446a1[_0x19552f(0xfa)+'on'];if(_0x4446a1[_0x19552f(0x26e)+_0x19552f(0x140)]?.[_0x19552f(0x225)])return _0x4446a1[_0x19552f(0x26e)+_0x19552f(0x140)][_0x19552f(0x225)];if(_0x4446a1[_0x19552f(0x161)+'ge']?.[_0x19552f(0x1dc)])return _0x4446a1[_0x19552f(0x161)+'ge'][_0x19552f(0x1dc)];if(_0x4446a1['videoMessa'+'ge']?.[_0x19552f(0x1dc)])return _0x4446a1[_0x19552f(0x133)+'ge'][_0x19552f(0x1dc)];if(_0x4446a1[_0x19552f(0x254)+'ponseMessa'+'ge']?.[_0x19552f(0x114)+_0x19552f(0x27a)])return _0x4446a1['buttonsRes'+_0x19552f(0x18a)+'ge']['selectedBu'+_0x19552f(0x27a)];if(_0x4446a1['listRespon'+_0x19552f(0x292)]?.[_0x19552f(0x184)+'ctReply']?.[_0x19552f(0x241)+_0x19552f(0x21e)])return _0x4446a1['listRespon'+'seMessage'][_0x19552f(0x184)+_0x19552f(0x210)][_0x19552f(0x241)+_0x19552f(0x21e)];return'';}const processedMessageKeys=new Map(),DEDUPE_TTL=(-0x544+-0x2*0x43d+-0x377*-0x4)*(-0xce1+-0x1*0xe9a+0x1f63);function makeDedupeKey(_0x102318){const _0x446259=_0x4037b9,_0x3fefab=_0x102318?.['key'];if(!_0x3fefab)return null;const _0x4e9515=_0x3fefab['id']||_0x3fefab?.['participan'+'t']||'',_0x418b93=_0x3fefab[_0x446259(0x20f)]||'';return _0x418b93+'::'+_0x4e9515;}function isMsgProcessed(_0x3f022b){const _0x11390e=_0x4037b9;return _0x3f022b&&processedMessageKeys[_0x11390e(0x263)](_0x3f022b);}function markMsgProcessed(_0x5a1bd1){const _0x1ae28c=_0x4037b9;if(!_0x5a1bd1)return;processedMessageKeys[_0x1ae28c(0x263)](_0x5a1bd1)&&clearTimeout(processedMessageKeys['get'](_0x5a1bd1));const _0x14c707=setTimeout(()=>processedMessageKeys[_0x1ae28c(0x12c)](_0x5a1bd1),DEDUPE_TTL);processedMessageKeys[_0x1ae28c(0x166)](_0x5a1bd1,_0x14c707);}class Aho{constructor(){const _0x5ea585=_0x4037b9;this[_0x5ea585(0xe7)]=[{'next':Object[_0x5ea585(0x21a)](null),'fail':0x0,'output':[]}];}[_0x4037b9(0x230)](_0x3fc868){const _0x61940f=_0x4037b9;this[_0x61940f(0xe7)]=[{'next':Object[_0x61940f(0x21a)](null),'fail':0x0,'output':[]}];for(const _0x39b1ce of _0x3fc868){let _0x549cab=-0x27*0x27+0x2055+-0x2*0xd32;for(let _0x4d203a=0x1d8a+-0x14e5*-0x1+-0x1*0x326f;_0x4d203a<_0x39b1ce[_0x61940f(0x271)];_0x4d203a++){const _0x459b56=_0x39b1ce[_0x4d203a];!this['nodes'][_0x549cab]['next'][_0x459b56]&&(this[_0x61940f(0xe7)][_0x549cab][_0x61940f(0x190)][_0x459b56]=this[_0x61940f(0xe7)][_0x61940f(0x271)],this[_0x61940f(0xe7)][_0x61940f(0x236)]({'next':Object['create'](null),'fail':0x0,'output':[]})),_0x549cab=this[_0x61940f(0xe7)][_0x549cab]['next'][_0x459b56];}this['nodes'][_0x549cab][_0x61940f(0x1ec)][_0x61940f(0x236)](_0x39b1ce);}const _0x21f8dd=[];for(const _0x3c8270 in this['nodes'][0xb07+0x1*-0x1484+0x97d][_0x61940f(0x190)]){const _0x52475e=this[_0x61940f(0xe7)][0x4c*0x1d+0x2*0xc51+0x17*-0x172][_0x61940f(0x190)][_0x3c8270];this[_0x61940f(0xe7)][_0x52475e][_0x61940f(0x111)]=-0x2*0x463+-0x16*-0xb3+-0x69c,_0x21f8dd['push'](_0x52475e);}while(_0x21f8dd[_0x61940f(0x271)]){const _0xb2412e=_0x21f8dd['shift']();for(const _0x3edd75 in this['nodes'][_0xb2412e][_0x61940f(0x190)]){const _0x275ba2=this[_0x61940f(0xe7)][_0xb2412e][_0x61940f(0x190)][_0x3edd75];let _0x3eaaa8=this[_0x61940f(0xe7)][_0xb2412e][_0x61940f(0x111)];while(_0x3eaaa8&&!this['nodes'][_0x3eaaa8][_0x61940f(0x190)][_0x3edd75])_0x3eaaa8=this[_0x61940f(0xe7)][_0x3eaaa8][_0x61940f(0x111)];if(this['nodes'][_0x3eaaa8][_0x61940f(0x190)][_0x3edd75])this[_0x61940f(0xe7)][_0x275ba2]['fail']=this['nodes'][_0x3eaaa8][_0x61940f(0x190)][_0x3edd75];else this[_0x61940f(0xe7)][_0x275ba2][_0x61940f(0x111)]=0x1*0x1549+0x826+-0x1d6f;this[_0x61940f(0xe7)][_0x275ba2][_0x61940f(0x1ec)][_0x61940f(0x236)](...this[_0x61940f(0xe7)][this[_0x61940f(0xe7)][_0x275ba2]['fail']][_0x61940f(0x1ec)]),_0x21f8dd[_0x61940f(0x236)](_0x275ba2);}}}[_0x4037b9(0x1fb)](_0xf6d0bb){const _0x35c5ef=_0x4037b9,_0x3cc871=[];let _0x4feca6=0xfcb+-0x32*0x31+-0x639;for(let _0xd3d60=0x5*0x181+-0xeed*-0x1+-0x1672;_0xd3d60<_0xf6d0bb[_0x35c5ef(0x271)];_0xd3d60++){const _0x54b20d=_0xf6d0bb[_0xd3d60];while(_0x4feca6&&!this[_0x35c5ef(0xe7)][_0x4feca6][_0x35c5ef(0x190)][_0x54b20d])_0x4feca6=this[_0x35c5ef(0xe7)][_0x4feca6][_0x35c5ef(0x111)];if(this[_0x35c5ef(0xe7)][_0x4feca6][_0x35c5ef(0x190)][_0x54b20d])_0x4feca6=this['nodes'][_0x4feca6][_0x35c5ef(0x190)][_0x54b20d];else _0x4feca6=0x1a5c+-0x1145+-0x917*0x1;if(this['nodes'][_0x4feca6][_0x35c5ef(0x1ec)][_0x35c5ef(0x271)])for(const _0x4c55eb of this[_0x35c5ef(0xe7)][_0x4feca6]['output']){_0x3cc871[_0x35c5ef(0x236)]({'keyword':_0x4c55eb,'index':_0xd3d60-_0x4c55eb[_0x35c5ef(0x271)]+(-0x496+-0x8ed+0xd84)});}}return _0x3cc871;}}const automatonCache=new Map();async function getAutomatonForChat(_0x21a5b4){const _0x49520b=_0x4037b9;if(!_0x21a5b4)return null;if(automatonCache[_0x49520b(0x263)](_0x21a5b4))return automatonCache[_0x49520b(0x147)](_0x21a5b4);try{const _0x487ad2=await db['all'](_0x49520b(0x233)+_0x49520b(0x196)+_0x49520b(0x20e)+_0x49520b(0x105)+'RE\x20chat_ji'+_0x49520b(0x14b)+')',[_0x21a5b4,'*']),_0x1518ba=(_0x487ad2||[])['map'](_0x18909b=>String(_0x18909b[_0x49520b(0x195)]||'')[_0x49520b(0xdf)]())[_0x49520b(0x265)](Boolean),_0x26d2c0=_0x1518ba[_0x49520b(0x265)](_0x396ad6=>{const _0x28e687=_0x49520b,_0x8d5d94=String(_0x396ad6)['trim']()[_0x28e687(0xe9)+'e']();if(_0x8d5d94[_0x28e687(0x1d2)]('regex:'))return![];if(_0x396ad6[_0x28e687(0x1ff)]('*'))return![];return!![];}),_0x439d3c=_0x26d2c0['map'](_0x8fd03c=>_0x8fd03c[_0x49520b(0xe9)+'e']()),_0x5d5918=new Map();for(let _0x9206c=-0x5bf+0x10*0x23b+-0x69*0x49;_0x9206c<_0x26d2c0[_0x49520b(0x271)];_0x9206c++){_0x5d5918['set'](_0x439d3c[_0x9206c],_0x26d2c0[_0x9206c]);}const _0x49904e=new Aho();if(_0x439d3c[_0x49520b(0x271)])_0x49904e[_0x49520b(0x230)](_0x439d3c);const _0x5c8c12={'ac':_0x49904e,'keywords':_0x439d3c,'lowerToOrig':_0x5d5918};return automatonCache['set'](_0x21a5b4,_0x5c8c12),_0x5c8c12;}catch(_0x449034){return warn(_0x49520b(0xef)+_0x49520b(0xf3)+'onForChat\x20'+_0x49520b(0x127)+'\x20'+_0x21a5b4+':\x20'+(_0x449034?.[_0x49520b(0x1eb)]||_0x449034)),null;}}async function findStoredMatchFromFindings(_0x1440f1=[]){const _0x12c689=_0x4037b9;try{const _0x1d980c=await listSudo();if(!Array['isArray'](_0x1d980c)||_0x1d980c['length']===0x929+0x6c6+-0xfef*0x1)return null;const _0xe1843f=new Set(_0x1d980c['map'](String));for(const _0x44eccb of _0x1440f1||[]){if(!_0x44eccb||typeof _0x44eccb[_0x12c689(0x1ae)]!==_0x12c689(0x1be))continue;const _0x1fc4d2=normalizeToJid(_0x44eccb[_0x12c689(0x1ae)]);if(_0x1fc4d2&&_0xe1843f['has'](_0x1fc4d2))return _0x1fc4d2;if(_0xe1843f[_0x12c689(0x263)](_0x44eccb[_0x12c689(0x1ae)]))return _0x44eccb['jid'];const _0x241939=String(_0x44eccb[_0x12c689(0x1ae)])[_0x12c689(0x25f)]('@')[0x3*0x5b+-0x1*-0xb26+-0x35*0x3b][_0x12c689(0x25f)](':')[0xdfb*0x2+-0xb5c+-0x109a];if(_0x241939)for(const _0x1cb6f2 of _0x1d980c){const _0x67ab9a=String(_0x1cb6f2)['split']('@')[0x1f*-0xaa+0x2586+-0x10f0];if(_0x67ab9a&&_0x67ab9a===_0x241939)return _0x1cb6f2;}}return null;}catch(_0x38770a){return warn('[gfilter]\x20'+'findStored'+_0x12c689(0xf2)+_0x12c689(0x10a)+_0x12c689(0x179)+(_0x38770a?.[_0x12c689(0x1eb)]||_0x38770a)),null;}}export async function initialize(_0xd7d373){const _0x3c8cc9=_0x4037b9;botRef=_0xd7d373;if(botRef){if(typeof botRef[_0x3c8cc9(0x218)+'e']===_0x3c8cc9(0x1ab))sendApi=async(_0x21a774,_0x4591b3)=>await botRef[_0x3c8cc9(0x218)+'e'](_0x21a774,_0x4591b3);else botRef[_0x3c8cc9(0x21f)]&&typeof botRef[_0x3c8cc9(0x21f)][_0x3c8cc9(0x218)+'e']===_0x3c8cc9(0x1ab)?sendApi=async(_0x27cdd8,_0x42408e)=>await botRef[_0x3c8cc9(0x21f)][_0x3c8cc9(0x218)+'e'](_0x27cdd8,_0x42408e):sendApi=null;}try{await ensureSchema(),info(_0x3c8cc9(0xef)+_0x3c8cc9(0x21b)+_0x3c8cc9(0x284)+_0x3c8cc9(0x19a)+_0x3c8cc9(0x23c)+')');}catch(_0x51af59){error(_0x51af59,_0x3c8cc9(0xef)+_0x3c8cc9(0x21b)+'\x20fatal');throw _0x51af59;}}function detectCommandNameFromCmdText(_0x1b9cd4){const _0x40dac8=_0x4037b9;if(!_0x1b9cd4)return null;const _0x4b549f=_0x1b9cd4['trim']();if(!_0x4b549f)return null;return _0x4b549f['split'](/\s+/)[0x24e0+0x2151*0x1+-0x77*0x97][_0x40dac8(0xe9)+'e']();}export async function onMessage(_0x185950){const _0x4355b4=_0x4037b9;try{if(!_0x185950||!_0x185950['key']||!_0x185950[_0x4355b4(0x1eb)])return;const _0x1d8e34=makeDedupeKey(_0x185950);if(!_0x1d8e34)return;if(isMsgProcessed(_0x1d8e34))return;markMsgProcessed(_0x1d8e34);const _0x5e6076=getMessageText(_0x185950);if(!_0x5e6076)return;const _0x21a7e1=_0x185950[_0x4355b4(0x13f)][_0x4355b4(0x20f)],_0x1ca5e0=typeof _0x21a7e1===_0x4355b4(0x1be)&&_0x21a7e1[_0x4355b4(0x20d)](_0x4355b4(0x1c7)),_0x43794e=_0x185950[_0x4355b4(0x13f)]&&(_0x185950[_0x4355b4(0x13f)][_0x4355b4(0x185)+'t']||_0x185950[_0x4355b4(0x13f)]['from']||_0x185950[_0x4355b4(0x13f)][_0x4355b4(0x20f)])||'',_0x3683ef=(_0x43794e||'')[_0x4355b4(0x25f)]('@')[0x8d9+-0x4+-0x8d5];let _0x4c7562=![];if(_0x1ca5e0)try{_0x4c7562=await isadmin(botRef,_0x185950);}catch(_0x40571f){_0x4c7562=![];}if(_0x185950[_0x4355b4(0x25d)]){const _0x2b51d8=typeof _0x185950[_0x4355b4(0x225)]===_0x4355b4(0x1be)&&_0x185950[_0x4355b4(0x225)][_0x4355b4(0xdf)]()[_0x4355b4(0x271)]?_0x185950[_0x4355b4(0x225)][_0x4355b4(0xdf)]():_0x5e6076[_0x4355b4(0xdf)](),_0x5abb92=detectCommandNameFromCmdText(_0x2b51d8);if(!_0x5abb92)return;if(!_0x5abb92[_0x4355b4(0x1d2)]('g'))return;if(!_0x1ca5e0){const _0xd6e9fb=Boolean(_0x185950[_0x4355b4(0x13f)][_0x4355b4(0x1a5)]);let _0x51ddb5=null;if(_0xd6e9fb){const _0x1f026a=getBotJid();!_0x1f026a?(warn(_0x4355b4(0xef)+'getBotJid('+')\x20returned'+_0x4355b4(0x1a0)+_0x4355b4(0x1d1)+_0x4355b4(0x103)+'y.remoteJi'+_0x4355b4(0x157)+_0x4355b4(0x243)),_0x51ddb5=_0x185950['key'][_0x4355b4(0x20f)]):_0x51ddb5=_0x1f026a;}else{let _0x77a4e2=![];try{_0x77a4e2=await isSudo(botRef,_0x185950);}catch(_0x3d02ea){_0x77a4e2=![];}if(!_0x77a4e2)return;const _0x5213a2=userJidFromCtx(_0x185950)||{'findings':[]},_0x5b3dbe=await findStoredMatchFromFindings(_0x5213a2[_0x4355b4(0x19f)]||[]);if(!_0x5b3dbe)return;_0x51ddb5=_0x5b3dbe;}const _0x5878a8=parseFilterCommandText(_0x2b51d8||_0x5e6076);if(_0x5abb92===_0x4355b4(0x217)){if(!_0x5878a8||!_0x5878a8[_0x4355b4(0x1b5)][_0x4355b4(0x271)]||!_0x5878a8[_0x4355b4(0x106)][_0x4355b4(0x271)]){await sendText(_0x185950,_0x51ddb5,_0x4355b4(0x19e)+_0x4355b4(0x1ed)+_0x4355b4(0x267)+_0x4355b4(0x20b)+_0x4355b4(0x1ce)+'rigger2>\x0a!'+_0x4355b4(0x298)+'!response2'+_0x4355b4(0x1d3)+_0x4355b4(0x22f)+_0x4355b4(0xff)+':\x20<alias|j'+_0x4355b4(0x146)+_0x4355b4(0x28f)+_0x4355b4(0x228)+_0x4355b4(0x10b));return;}let _0x4bc9c0=[];if(_0x5878a8['gp']){const _0x1dee66=_0x5878a8['gp'][_0x4355b4(0xdf)]();if(_0x1dee66[_0x4355b4(0xe9)+'e']()===_0x4355b4(0x24f))_0x4bc9c0=await _0x415790[_0x4355b4(0x134)+_0x4355b4(0x15f)]();else{const _0x3bf79f=await _0x415790[_0x4355b4(0x28a)+'e'](_0x1dee66);if(_0x3bf79f)_0x4bc9c0=[_0x3bf79f];else{if(_0x1dee66[_0x4355b4(0x1ff)]('@'))_0x4bc9c0=[_0x415790[_0x4355b4(0x258)+_0x4355b4(0x239)](_0x1dee66)];else{await sendText(_0x185950,_0x51ddb5,_0x4355b4(0x151)+_0x4355b4(0x23b)+':\x20\x22'+_0x1dee66+(_0x4355b4(0x1c6)+_0x4355b4(0x221)+_0x4355b4(0x18e)+_0x4355b4(0x23a)+_0x4355b4(0x28c)+'ID.'));return;}}}}else _0x4bc9c0=['*'];let _0x59f3fa=0x1927+0x17d1*-0x1+-0x156;for(const _0x3e53b0 of uniqArray(_0x4bc9c0)){for(const _0x4bd6c3 of _0x5878a8[_0x4355b4(0x1b5)]){const _0x523374=await upsertFilterRow(_0x3e53b0,_0x4bd6c3,_0x5878a8['responses'],_0x43794e||'');if(_0x523374)_0x59f3fa++;}}await sendText(_0x185950,_0x51ddb5,'Saved\x20'+_0x59f3fa+(_0x4355b4(0x193)+'\x20to\x20')+(_0x4bc9c0['length']===0x9ea+0x2275+-0x2c5e?_0x4bc9c0[-0x17*0x6+-0x5fb*-0x5+-0x1d5d]:_0x4355b4(0x213)+'argets'));return;}if(_0x5abb92===_0x4355b4(0x231)+'r'){const _0x271cf7=(parseFilterCommandText(_0x2b51d8||_0x5e6076)||{})['gp'],_0x188174=_0x271cf7?_0x271cf7[_0x4355b4(0xe9)+'e']()==='all'?'*':await _0x415790[_0x4355b4(0x28a)+'e'](_0x271cf7)||_0x415790[_0x4355b4(0x258)+'oUserJid'](_0x271cf7):'*',_0x3cc481=await listTriggersForChat(_0x188174);await sendText(_0x185950,_0x51ddb5,'[gfilter]\x20'+_0x3cc481[_0x4355b4(0x271)]+(_0x4355b4(0x24e)+_0x4355b4(0xfd))+(_0x188174==='*'?_0x4355b4(0x12f)+'l\x20groups)':_0x188174));if(!_0x3cc481[_0x4355b4(0x271)])return;let _0x917936='';for(const _0x489e47 of _0x3cc481){const _0x5a8755='•\x20'+_0x489e47+'\x0a';(_0x917936+_0x5a8755)[_0x4355b4(0x271)]>-0x1639+0x641+0x2c*0x7f&&(await sendText(_0x185950,_0x51ddb5,_0x917936[_0x4355b4(0xdf)]()),_0x917936=''),_0x917936+=_0x5a8755;}if(_0x917936[_0x4355b4(0xdf)]())await sendText(_0x185950,_0x51ddb5,_0x917936['trim']());return;}if(_0x5abb92===_0x4355b4(0x28b)||_0x5abb92===_0x4355b4(0x28b)+'s'||_0x5abb92===_0x4355b4(0x270)){const _0x2d55f8=(_0x5e6076||'')['split'](/\r?\n/)[_0x4355b4(0x286)](_0x5ef2f8=>_0x5ef2f8[_0x4355b4(0xdf)]());let _0x2416dd=null;if(_0x2d55f8[_0x4355b4(0x271)]>-0x1212+-0xc7*0x7+0x1784&&!_0x2d55f8[0x11a7+-0x22*0x11b+0xb0*0x1d][_0x4355b4(0xe9)+'e']()[_0x4355b4(0x1d2)]('gp'))_0x2416dd=_0x2d55f8[0x1*0xaa9+-0xb47*-0x1+0x463*-0x5];else{const _0x36152b=_0x2b51d8[_0x4355b4(0xdf)]()[_0x4355b4(0x25f)](/\s+/);_0x36152b[_0x4355b4(0x21d)](),_0x2416dd=_0x36152b[_0x4355b4(0x220)]('\x20')[_0x4355b4(0xdf)]();}const _0x33e623=_0x2d55f8[_0x4355b4(0x16f)](-0x2048*-0x1+-0xd21+-0x1*0x1326)['find'](_0x103148=>/^gp[:\s]/i[_0x4355b4(0x280)](_0x103148));let _0x251e63=_0x33e623?_0x33e623['replace'](/^gp[:\s]+/i,'')['trim']():null;const _0x55dbc9=(_0x2416dd||'')['split'](',')[_0x4355b4(0x286)](_0x276997=>_0x276997[_0x4355b4(0xdf)]())['filter'](Boolean);if(!_0x55dbc9[_0x4355b4(0x271)]){await sendText(_0x185950,_0x51ddb5,'Usage\x20(PM)'+_0x4355b4(0x27e)+_0x4355b4(0x281)+_0x4355b4(0x1ef)+'\x20[gp:\x20<ali'+_0x4355b4(0x24d)+_0x4355b4(0x187)+_0x4355b4(0x14a)+_0x4355b4(0x257)+_0x4355b4(0x22b)+'g\x20globally'+')');return;}if(_0x55dbc9[_0x4355b4(0x271)]===-0x146e+0xbcf*0x1+0x8a0&&_0x55dbc9[0x1ea1+0x5*-0x60b+-0x6a]['toLowerCas'+'e']()===_0x4355b4(0x24f))try{const _0x168891=await db['run'](_0x4355b4(0x148)+_0x4355b4(0x141)),_0x5a92c2=_0x168891?.[_0x4355b4(0x255)]||-0x944+-0x2*-0xa60+-0x8c*0x15;try{automatonCache[_0x4355b4(0x246)]();}catch(_0x44c3d0){}await sendText(_0x185950,_0x51ddb5,_0x4355b4(0x20a)+_0x4355b4(0x222)+'from\x20datab'+_0x4355b4(0x118)+'removed:\x20'+_0x5a92c2);return;}catch(_0x52e855){await sendText(_0x185950,_0x51ddb5,_0x4355b4(0x19d)+'delete\x20all'+_0x4355b4(0x1b6)+(_0x52e855?.[_0x4355b4(0x1eb)]||_0x52e855));return;}let _0x1a57c9=[];if(_0x251e63){if(_0x251e63[_0x4355b4(0xe9)+'e']()==='all')_0x1a57c9=await _0x415790[_0x4355b4(0x134)+_0x4355b4(0x15f)]();else{const _0x3ad14e=await _0x415790[_0x4355b4(0x28a)+'e'](_0x251e63);if(_0x3ad14e)_0x1a57c9=[_0x3ad14e];else{if(_0x251e63[_0x4355b4(0x1ff)]('@'))_0x1a57c9=[_0x415790[_0x4355b4(0x258)+_0x4355b4(0x239)](_0x251e63)];else{await sendText(_0x185950,_0x51ddb5,_0x4355b4(0x151)+_0x4355b4(0x23b)+':\x20\x22'+_0x251e63+'\x22.');return;}}}}else _0x1a57c9=['*'];let _0x121ec4=-0x865*-0x1+0x6bb+-0xf20*0x1;for(const _0x163973 of uniqArray(_0x1a57c9)){const _0x57fd83=await deleteFilters(_0x163973,_0x55dbc9);_0x121ec4+=_0x57fd83;}await sendText(_0x185950,_0x51ddb5,_0x4355b4(0x235)+_0x121ec4+(_0x4355b4(0x101)+_0x4355b4(0x21c)+'\x20')+(_0x1a57c9[_0x4355b4(0x271)]===-0x6a0+0x1cca+0x3*-0x763?_0x1a57c9[-0x1f6*0xe+0x1428*0x1+0x3a6*0x2]:_0x4355b4(0x213)+'argets'));return;}return;}if(_0x1ca5e0){if(!_0x4c7562)return;const _0x62dda3=typeof _0x185950['text']===_0x4355b4(0x1be)&&_0x185950['text'][_0x4355b4(0xdf)]()[_0x4355b4(0x271)]?_0x185950[_0x4355b4(0x225)]['trim']():_0x5e6076[_0x4355b4(0xdf)](),_0x585107=detectCommandNameFromCmdText(_0x62dda3);if(!_0x585107)return;let _0x421561;try{_0x421561=await getDefault(_0x3683ef)[_0x4355b4(0x1bc)](()=>null);}catch(_0x506435){_0x421561=null;}if(!_0x421561||Array['isArray'](_0x421561)&&_0x421561['length']===-0x218d+-0x97b*-0x1+0x1812){await sendText(_0x185950,_0x21a7e1,'Could\x20not\x20'+_0x4355b4(0xdc)+_0x4355b4(0x1f0)+_0x4355b4(0x1e3)+'n(s).\x20Use\x20'+_0x4355b4(0x143)+'\x20first.');return;}const _0x24943c=Array[_0x4355b4(0x1e9)](_0x421561)?_0x421561:[_0x421561];let _0x2d5baa=[];for(const _0x359994 of _0x24943c){try{const _0x9f8202=await getConnection(_0x359994)[_0x4355b4(0x1bc)](()=>null);if(Array[_0x4355b4(0x1e9)](_0x9f8202))_0x2d5baa[_0x4355b4(0x236)](..._0x9f8202);else{if(_0x9f8202)_0x2d5baa[_0x4355b4(0x236)](String(_0x9f8202));}}catch(_0x524f55){}}_0x2d5baa=uniqArray(_0x2d5baa);if(!_0x2d5baa['length']){await sendText(_0x185950,_0x21a7e1,'Could\x20not\x20'+'resolve\x20yo'+_0x4355b4(0x1f0)+_0x4355b4(0x1e3)+_0x4355b4(0x14f)+_0x24943c['join'](',\x20')+(_0x4355b4(0x182)+_0x4355b4(0x1aa)+_0x4355b4(0xf6)+_0x4355b4(0x1a2)));return;}if(_0x585107===_0x4355b4(0x217)){const _0x4f29c4=parseFilterCommandText(_0x62dda3||_0x5e6076);if(!_0x4f29c4||!_0x4f29c4[_0x4355b4(0x1b5)][_0x4355b4(0x271)]||!_0x4f29c4[_0x4355b4(0x106)][_0x4355b4(0x271)]){await sendText(_0x185950,_0x21a7e1,_0x4355b4(0x108)+_0x4355b4(0x1e5)+_0x4355b4(0x237)+_0x4355b4(0x1da)+_0x4355b4(0x1c1)+_0x4355b4(0x194)+'\x0a!response'+_0x4355b4(0x112)+_0x4355b4(0x1ea)+_0x4355b4(0x1d8)+_0x4355b4(0x15c)+_0x4355b4(0x199));return;}if(_0x4f29c4['gp']){let _0x4dbebc=[];const _0x10019e=_0x4f29c4['gp'][_0x4355b4(0xdf)]();if(_0x10019e['toLowerCas'+'e']()===_0x4355b4(0x24f))_0x4dbebc=await _0x415790[_0x4355b4(0x134)+_0x4355b4(0x15f)]();else{const _0x32ad3b=await _0x415790['resolveNam'+'e'](_0x10019e);if(_0x32ad3b)_0x4dbebc=[_0x32ad3b];else{if(_0x10019e[_0x4355b4(0x1ff)]('@'))_0x4dbebc=[_0x415790['normalizeT'+'oUserJid'](_0x10019e)];else{await sendText(_0x185950,_0x21a7e1,_0x4355b4(0x151)+_0x4355b4(0x23b)+':\x20\x22'+_0x10019e+'\x22.');return;}}}let _0x44c1d9=-0x3b0+-0x16d7+0x1a87;for(const _0x1042a1 of uniqArray(_0x4dbebc)){for(const _0x77b9 of _0x4f29c4[_0x4355b4(0x1b5)]){const _0x47c897=await upsertFilterRow(_0x1042a1,_0x77b9,_0x4f29c4['responses'],_0x43794e||'');if(_0x47c897)_0x44c1d9++;}}await sendText(_0x185950,_0x21a7e1,_0x4355b4(0x1a1)+_0x44c1d9+(_0x4355b4(0x193)+_0x4355b4(0x219))+(_0x4dbebc[_0x4355b4(0x271)]===0x1dff*0x1+0x7f0+-0x3cb*0xa?_0x4dbebc[-0xa9d+0xe9*0x4+0x6f9]:_0x4355b4(0x213)+_0x4355b4(0x188)));return;}let _0x25d510=-0x1*-0x100f+0x225+-0x48d*0x4;for(const _0xa9f08b of _0x2d5baa){for(const _0x26a4e9 of _0x4f29c4[_0x4355b4(0x1b5)]){const _0xbaa5f6=await upsertFilterRow(_0xa9f08b,_0x26a4e9,_0x4f29c4[_0x4355b4(0x106)],_0x43794e||'');if(_0xbaa5f6)_0x25d510++;}}await sendText(_0x185950,_0x21a7e1,_0x4355b4(0x1a1)+_0x25d510+(_0x4355b4(0x101)+_0x4355b4(0x165)+_0x4355b4(0xf1)+'t\x20connecti'+_0x4355b4(0x1ad))+_0x2d5baa[_0x4355b4(0x220)](',\x20'));return;}if(_0x585107==='glistfilte'+'r'){const _0x4f8d1f=new Set();for(const _0x26d4fe of _0x2d5baa){const _0x47ac8e=await listTriggersForChat(_0x26d4fe);for(const _0x10dec4 of _0x47ac8e)_0x4f8d1f[_0x4355b4(0x25c)](_0x10dec4);}const _0x3afaf5=await listTriggersForChat('*');for(const _0x4d7e04 of _0x3afaf5||[])_0x4f8d1f['add'](_0x4d7e04);const _0x1c0b98=Array[_0x4355b4(0x13d)](_0x4f8d1f)['sort']();await sendText(_0x185950,_0x21a7e1,'[gfilter]\x20'+_0x4355b4(0x1d4)+_0x1c0b98[_0x4355b4(0x271)]+('\x20filters\x20f'+'or\x20your\x20de'+_0x4355b4(0x10c)+'ection(s)\x20'+_0x4355b4(0x208)));if(!_0x1c0b98[_0x4355b4(0x271)])return;let _0x46ffea='';for(const _0x37209f of _0x1c0b98){const _0x3dd926='•\x20'+_0x37209f+'\x0a';(_0x46ffea+_0x3dd926)[_0x4355b4(0x271)]>0x3e5*0x1+-0x17*0x65+0xb0a&&(await sendText(_0x185950,_0x21a7e1,_0x46ffea[_0x4355b4(0xdf)]()),_0x46ffea=''),_0x46ffea+=_0x3dd926;}if(_0x46ffea[_0x4355b4(0xdf)]())await sendText(_0x185950,_0x21a7e1,_0x46ffea[_0x4355b4(0xdf)]());return;}if(_0x585107===_0x4355b4(0x28b)||_0x585107===_0x4355b4(0x28b)+'s'||_0x585107===_0x4355b4(0x270)){const _0x5c784b=(_0x5e6076||'')['split'](/\r?\n/)[_0x4355b4(0x286)](_0x3066f5=>_0x3066f5[_0x4355b4(0xdf)]());let _0x5cbd40=null;if(_0x5c784b[_0x4355b4(0x271)]>-0x21e8+-0x655+0x283e&&!_0x5c784b[0x5*-0x21d+0x1b95+-0x1103]['toLowerCas'+'e']()[_0x4355b4(0x1d2)]('gp'))_0x5cbd40=_0x5c784b[-0xf*-0x1f+0x1*-0x1a42+0x1872];else{const _0x2cdc38=(_0x62dda3||_0x5e6076)[_0x4355b4(0xdf)]()['split'](/\s+/);_0x2cdc38['shift'](),_0x5cbd40=_0x2cdc38[_0x4355b4(0x220)]('\x20')[_0x4355b4(0xdf)]();}const _0x4bfe0b=_0x5c784b[_0x4355b4(0x16f)](0x269e*-0x1+0x10c1+-0x74a*-0x3)[_0x4355b4(0x26b)](_0x5a4638=>/^gp[:\s]/i[_0x4355b4(0x280)](_0x5a4638));let _0x5d5439=_0x4bfe0b?_0x4bfe0b[_0x4355b4(0x181)](/^gp[:\s]+/i,'')['trim']():null;const _0x16074e=(_0x5cbd40||'')[_0x4355b4(0x25f)](',')[_0x4355b4(0x286)](_0x547b51=>_0x547b51[_0x4355b4(0xdf)]())[_0x4355b4(0x265)](Boolean);if(!_0x16074e['length']){await sendText(_0x185950,_0x21a7e1,'Usage:\x20gde'+_0x4355b4(0x16e)+_0x4355b4(0x170)+_0x4355b4(0x215)+_0x4355b4(0x14c)+_0x4355b4(0x120)+'l>]\x0aOr:\x20gd'+_0x4355b4(0x287)+_0x4355b4(0x160)+_0x4355b4(0x1fe)+_0x4355b4(0x27b)+'DB)');return;}if(_0x16074e[_0x4355b4(0x271)]===-0x2418+0x1a8e*0x1+-0x15d*-0x7&&_0x16074e[-0x8e2+0x1804+-0xf22][_0x4355b4(0xe9)+'e']()==='all')try{const _0x3786e0=await db['run'](_0x4355b4(0x148)+_0x4355b4(0x141)),_0x2572eb=_0x3786e0?.['changes']||0x29*0xd+-0x3c7*0x5+-0x2cd*-0x6;try{automatonCache[_0x4355b4(0x246)]();}catch(_0x124680){}await sendText(_0x185950,_0x21a7e1,_0x4355b4(0x20a)+_0x4355b4(0x222)+_0x4355b4(0xf4)+'ase.\x20Rows\x20'+'removed:\x20'+_0x2572eb);return;}catch(_0x2517ed){await sendText(_0x185950,_0x21a7e1,'Failed\x20to\x20'+_0x4355b4(0x17a)+'\x20filters:\x20'+(_0x2517ed?.[_0x4355b4(0x1eb)]||_0x2517ed));return;}if(_0x5d5439){let _0xf926e=[];if(_0x5d5439[_0x4355b4(0xe9)+'e']()===_0x4355b4(0x24f))_0xf926e=await _0x415790['getUniqueJ'+'ids']();else{const _0x4ff12d=await _0x415790[_0x4355b4(0x28a)+'e'](_0x5d5439);if(_0x4ff12d)_0xf926e=[_0x4ff12d];else{if(_0x5d5439[_0x4355b4(0x1ff)]('@'))_0xf926e=[_0x415790['normalizeT'+_0x4355b4(0x239)](_0x5d5439)];else{await sendText(_0x185950,_0x21a7e1,_0x4355b4(0x151)+_0x4355b4(0x23b)+_0x4355b4(0x156)+_0x5d5439+'\x22.');return;}}}let _0x3ca73c=-0x614*0x2+-0xe77+0x1a9f;for(const _0x3a690d of uniqArray(_0xf926e)){const _0x1a3cca=await deleteFilters(_0x3a690d,_0x16074e);_0x3ca73c+=_0x1a3cca;}await sendText(_0x185950,_0x21a7e1,_0x4355b4(0x235)+_0x3ca73c+('\x20filters\x20f'+_0x4355b4(0x1a7))+(_0xf926e[_0x4355b4(0x271)]===0x2f*0xc1+0xfe8+-0x2*0x19ab?_0xf926e[-0x2537*-0x1+-0x78f+0x68*-0x49]:_0x4355b4(0x213)+'argets'));return;}else{let _0x6b4253=-0xf0b+0xb15*-0x2+0x2535;for(const _0x5082a3 of _0x2d5baa){const _0x205e85=await deleteFilters(_0x5082a3,_0x16074e);_0x6b4253+=_0x205e85;}await sendText(_0x185950,_0x21a7e1,_0x4355b4(0x235)+_0x6b4253+(_0x4355b4(0x101)+_0x4355b4(0x1df)+'ss\x20your\x20de'+_0x4355b4(0x10c)+_0x4355b4(0x295)+'\x20')+_0x2d5baa['join'](',\x20'));return;}}return;}}if(_0x1ca5e0){if(_0x185950[_0x4355b4(0x13f)][_0x4355b4(0x1a5)])return;const _0x3cb415=_0x21a7e1,_0x56af6b=getMessageText(_0x185950);if(!_0x56af6b)return;const _0x423838=String(_0x56af6b||''),_0x26441d=await db['all'](_0x4355b4(0x233)+_0x4355b4(0x196)+'ger\x20FROM\x20f'+_0x4355b4(0x105)+'RE\x20chat_ji'+_0x4355b4(0x14b)+')',[_0x3cb415,'*']);if(!_0x26441d||_0x26441d['length']===-0x1e7a+0x1*0x1c85+0x1f5)return;const _0x3c10f3=(_0x26441d||[])[_0x4355b4(0x286)](_0x11f36f=>String(_0x11f36f['trigger']||'')[_0x4355b4(0xdf)]())[_0x4355b4(0x265)](Boolean),_0x269bb9=[],_0x343ab1=[],_0x3b908a=[];for(const _0x579246 of _0x3c10f3){const _0x16c7f9=String(_0x579246)['trim']()['toLowerCas'+'e']();if(_0x16c7f9['startsWith']('regex:')){_0x3b908a['push'](_0x579246['substring'](0x35*0x73+-0x6a5+-0x1124));continue;}if(_0x579246[_0x4355b4(0x1ff)]('*')){_0x343ab1[_0x4355b4(0x236)](_0x579246);continue;}_0x269bb9[_0x4355b4(0x236)](_0x579246);}const _0x1f65e9=new Set(),_0x2a2a7b=getConfig()||{},_0x591a25=_0x2a2a7b[_0x4355b4(0x17f)]&&typeof _0x2a2a7b[_0x4355b4(0x17f)]===_0x4355b4(0x275)?_0x2a2a7b[_0x4355b4(0x17f)]:{},_0x552c9e=(_0x591a25[_0x4355b4(0x1f6)+_0x4355b4(0x272)]||_0x4355b4(0x1a6))['toLowerCas'+'e']();let _0x11189d=null;if(_0x269bb9['length']>-0x2e*0x2b+-0x1f75+0x272f)try{const _0x4ac8f5=await getAutomatonForChat(_0x3cb415);if(_0x4ac8f5&&_0x4ac8f5['ac']&&_0x4ac8f5[_0x4355b4(0x209)]&&_0x4ac8f5[_0x4355b4(0x209)]['length']){const _0x279a6e=_0x423838[_0x4355b4(0xe9)+'e'](),_0x2d98ad=_0x4ac8f5['ac'][_0x4355b4(0x1fb)](_0x279a6e);for(const _0x353cc8 of _0x2d98ad){const _0x4a97fc=_0x353cc8[_0x4355b4(0x1d6)],_0x2cb76b=_0x353cc8['index'],_0x15860c=_0x2cb76b+_0x4a97fc['length'],_0x148d25=_0x2cb76b===0x1346+0x4bd*-0x6+0x928*0x1||!/\w/[_0x4355b4(0x280)](_0x279a6e[_0x2cb76b-(0xa2a+-0x4*0x17e+-0x431)]),_0x142289=_0x15860c===_0x279a6e[_0x4355b4(0x271)]||!/\w/[_0x4355b4(0x280)](_0x279a6e[_0x15860c]);if(_0x148d25&&_0x142289){const _0x3572c4=_0x4ac8f5[_0x4355b4(0x18c)+'g'][_0x4355b4(0x147)](_0x4a97fc)||null;if(_0x3572c4){_0x11189d=_0x3572c4;break;}}}}else for(const _0x206496 of _0x269bb9){const _0x5ab4fa=new RegExp('\x5cb'+escapeRegex(String(_0x206496))+'\x5cb','i');if(_0x5ab4fa[_0x4355b4(0x280)](_0x423838)){_0x11189d=_0x206496;break;}}}catch(_0x4ba8c9){warn(_0x4355b4(0xef)+_0x4355b4(0x289)+'k\x20matching'+_0x4355b4(0x155)+(_0x4ba8c9?.[_0x4355b4(0x1eb)]||_0x4ba8c9));for(const _0x585457 of _0x269bb9){try{const _0x46e176=new RegExp('\x5cb'+escapeRegex(String(_0x585457))+'\x5cb','i');if(_0x46e176[_0x4355b4(0x280)](_0x423838)){_0x11189d=_0x585457;break;}}catch(_0x2158b3){}}}if(!_0x11189d&&_0x343ab1[_0x4355b4(0x271)]>-0x210+-0x9d*-0x14+-0x4*0x28d)for(const _0x5658f4 of _0x343ab1){try{const _0xe428e5=new RegExp(wildcardToRegexPattern(_0x5658f4),'i');if(_0xe428e5[_0x4355b4(0x280)](_0x423838)){_0x11189d=_0x5658f4;break;}}catch(_0x4c3470){if(_0x423838[_0x4355b4(0xe9)+'e']()['includes'](_0x5658f4[_0x4355b4(0x181)](/\*/g,'')[_0x4355b4(0xe9)+'e']())){_0x11189d=_0x5658f4;break;}}}if(!_0x11189d&&_0x3b908a[_0x4355b4(0x271)]>0x6a6+-0x1*-0x18d1+0x1*-0x1f77)for(const _0x1c2af3 of _0x3b908a){try{const _0x1dfece=new RegExp(_0x1c2af3,'i');if(_0x1dfece[_0x4355b4(0x280)](_0x423838)){_0x11189d=_0x4355b4(0xde)+_0x1c2af3;break;}}catch(_0x2522d0){warn(_0x4355b4(0xef)+_0x4355b4(0x1cd)+_0x4355b4(0x277)+'\x20for\x20chat\x20'+_0x3cb415+_0x4355b4(0x156)+_0x1c2af3+'\x22\x20-\x20'+(_0x2522d0?.[_0x4355b4(0x1eb)]||_0x2522d0));}}if(_0x11189d){let _0x526c09=await pickResponseAndAdvance(_0x3cb415,_0x11189d,_0x552c9e);if(!_0x526c09)_0x526c09=await pickResponseAndAdvance('*',_0x11189d,_0x552c9e);if(!_0x526c09)return;if(_0x1f65e9[_0x4355b4(0x263)](_0x526c09))return;await sendText(_0x185950,_0x3cb415,_0x526c09),_0x1f65e9[_0x4355b4(0x25c)](_0x526c09);}}}catch(_0x17592e){error(_0x17592e,_0x4355b4(0xef)+_0x4355b4(0x1e2)+_0x4355b4(0x179)+(_0x17592e?.[_0x4355b4(0x1eb)]||_0x17592e));}}export async function cleanup(){const _0xa029b0=_0x4037b9;for(const _0x1cf38e of processedMessageKeys[_0xa029b0(0x16d)]())try{clearTimeout(_0x1cf38e);}catch(_0x18e3f3){}processedMessageKeys[_0xa029b0(0x246)](),automatonCache[_0xa029b0(0x246)](),botRef=null,sendApi=null,info(_0xa029b0(0xef)+_0xa029b0(0x1f8));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};