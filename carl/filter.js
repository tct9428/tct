const _0x21904b=_0x35ff;(function(_0x15f534,_0x5e15d6){const _0x1041d8=_0x35ff,_0x22d33e=_0x15f534();while(!![]){try{const _0x3e7d9c=parseInt(_0x1041d8(0x140))/(0x2f*0x94+0x62c+-0x2157)+-parseInt(_0x1041d8(0x1a6))/(-0x2c*0xd+-0x2654+0x2892)*(-parseInt(_0x1041d8(0x1be))/(0x1c60+-0x15c8+-0x695))+parseInt(_0x1041d8(0x186))/(-0x1c3e+-0x3*-0x65b+0xb5*0xd)*(-parseInt(_0x1041d8(0x1aa))/(0xe*0x23b+-0x1*-0xda3+0x14*-0x23e))+-parseInt(_0x1041d8(0xc3))/(0x1174+0xea5+-0x2013)+parseInt(_0x1041d8(0x103))/(-0xa*-0x259+-0x2*0x8d3+-0x5cd)*(parseInt(_0x1041d8(0x204))/(-0x3f5*-0x9+0x1a2e+-0x3dc3))+-parseInt(_0x1041d8(0x89))/(0x1*-0x1e7c+0xc*-0xde+0x1*0x28ed)*(-parseInt(_0x1041d8(0x197))/(-0x10e8*0x1+-0x1*-0x243+0xeaf))+-parseInt(_0x1041d8(0x249))/(0x1343+0x30*-0x3a+-0x858);if(_0x3e7d9c===_0x5e15d6)break;else _0x22d33e['push'](_0x22d33e['shift']());}catch(_0x51210d){_0x22d33e['push'](_0x22d33e['shift']());}}}(_0x2424,-0x2*-0x81263+-0xf8377+0x9adfa));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';function _0x2424(){const _0x46fe69=['floor','gger)\x20DO\x20U','\x20DEFAULT\x200','slice','multiple\x20t','sock','s\x20failed:\x20','ilters\x20WHE','gger2\x20[gp:','trimStart','2QfbGBb','ed_by,\x20cre','\x27[]\x27,\x0a\x20\x20\x20\x20','getUniqueJ','5pNRbvy','TINCT\x20trig','\x20WHERE\x20typ','pickRespon','some','w\x20filters\x20','rom\x20','\x0a\x20gfilter\x20','CREATE\x20IND','value','idx:\x20','er:\x20\x22','mentions','room','o\x20restrict','ponseMessa','message','\x5cw*','creator','ailed:\x20','1514493IvZWeM','PRAGMA\x20tab','INSERT\x20INT','jid','as|jid|all','nodes','loaded\x20','Usage\x20(PM)','jid);','adding\x20col','\x20\x20\x20\x20\x20\x20\x20\x20\x20r','and\x20GLOBAL','<trigger1,','sendMessag','body','responses','post-swap\x20','UPDATE\x20fil','_by\x20=\x20excl','\x20\x20\x20\x20\x20\x20chat','Deleted\x20AL',':\x20gdelfilt','(trigger,\x20','has','E\x20filters_','lfilter\x20al','\x20\x20\x20\x20rr_ind','regex:','onForChat\x20','singleSele','glistfilte','cleaned\x20up',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','SELECT\x20nam','all','\x5c$&','igger1,tri','REATE\x20TABL','trig','ttonId','L\x20DEFAULT\x20','ROM\x20filter','fault\x20conn','\x20connectio','nexpected\x20','ids','=\x20ON;','timestamp','FILTERS','\x20rr_index,','ue\x20ON\x20filt','ers\x20failed','ND\x20trigger','bot-state\x20','IF\x20NOT\x20EXI','gfilter','filter','match','er\x20failed\x20','-\x20performi','t\x20connecti','ma\x20fatal','(\x0a\x20\x20\x20\x20\x20\x20\x20\x20','?,\x20?,\x200,\x20?','d|alias|al','wId','+\x201)\x20WHERE','\x20<group-ji','dex,\x20creat','Usage\x20(gro','24MgaZLs','d\x20INTEGER\x20','INTEGER\x20PR','resolve\x20yo','\x20excluded.','ection(s):','length','[gfilter]\x20','\x20to\x20add\x20al','rr_index',')\x20returned','filters_ba','NFLICT(cha','finalize','hat_jid,\x20t','argets','now','isArray','\x22.\x20Use\x20gro','ss\x20your\x20de','R\x20BY\x20trigg','roundrobin','_at)\x0a\x20\x20\x20\x20\x20','ur\x20default','le_info(','\x20\x20VALUES\x20(','selectedRo','lfilter\x20tr','delete','\x20filter(s)','sponses\x20TE','\x22\x20-\x20','stringify','search','ema)','sendText\x20u','\x20TEXT\x20DEFA','\x20filter\x20en','run','getTableCo','chat_jid,\x20','\x20chat_jid\x20','\x20created_b','remoteJid','er\x20TEXT\x20NO','\x22\x20->\x20','\x20\x20\x20\x20\x20ON\x20CO','triggers','lling\x20back','Saved\x20','ated_at)\x20V','\x200,\x0a\x20\x20\x20\x20\x20\x20','FAULT\x200','legacy\x20fil','imageMessa','eign_keys\x20','initialize','seMessage','CREATE\x20TAB','ID.','Deleted\x20','ror:\x20','no\x20sendApi','(rr_index\x20','AND\x20name=?','y,\x20created','conversati','\x20old\x20table','\x20\x20UNIQUE(c','452111FLxJEE','\x20detected\x20','=\x20?\x20AND\x20tr','PDATE\x20SET\x0a','o\x20backup','chat_jid','fail','shift','RE\x20chat_ji','create','DELETE\x20FRO','387MeAVpj','name',':\x20<alias|j','ters(chat_','trigger','or\x20','includes','ncrement\x20f','_jid\x20TEXT\x20','TEXT\x20NOT\x20N','SELECT\x20DIS','lters_new\x20','E\x20filters\x20','lso\x20failed','alled\x20with','gdelfilter','O\x20filters\x20','getBotJid(','LT\x200,\x0a\x20\x20\x20\x20','ALTER\x20TABL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20i','MatchFromF','push','AhoCorasic','O\x20filters_','>]\x0aOr:\x20gde','output','\x20\x20\x20\x20\x20\x20crea','every','insert\x20nor','\x20@\x20','changes','failed\x20for','lumns\x20erro','Failed\x20to\x20','videoMessa','unique\x20idx','e\x20FROM\x20sql','replace','map','ted_at\x20INT','ULT\x20\x27\x27,\x0a\x20\x20','PRAGMA\x20for','migration\x20','ADD\x20COLUMN','RESPONSE_M','findings','ters_new\x20(','ensureSche','buttonsRes','WHERE\x20chat','integrated','pingAndWai','paused','upsertFilt','values','\x20\x20\x20created','\x20for\x20','3474948kePILJ','removed:\x20','lters_uniq','PRIMARY\x20KE','deleteFilt','EXISTS\x20fil','clear','EX\x20IF\x20NOT\x20','our\x20defaul','object','ll\x20\x20\x20(ERAS','ceUpdate','=\x20OFF;','ias\x20or\x20pas','ce\x20error:\x20','rr_index\x20i','reply','QUE\x20INDEX\x20','function','next','Usage\x20(PM\x20','response','n(s).\x20Use\x20','ng\x20safe\x20mi','participan','substring','exec','RENAME\x20TO\x20','\x20\x20\x20\x20UNIQUE','g\x20globally','isFinite','ue(s).','\x20trigger)\x0a','tableExist','startsWith','!response2','e=\x27table\x27\x20','rigger2>\x0a!','saved\x20filt','normalizeT','ULL','\x20alias/jid','_jid\x20=\x20?\x20A','\x20filters:\x20','Could\x20not\x20','\x20everythin','XT\x20NOT\x20NUL','\x20=\x20?\x20LIMIT','\x20failure\x20a','trigger2>\x0a','llback','a\x20line\x20`gp','xtMessage','split','random','added\x20miss','s|all>','index','\x20gp:\x20<grou','\x20filters\x20f','listRespon',':\x20\x22','Jid','d\x20for\x20conf','969717gbdwXC','rsForChat\x20','er\x20trigger','TEXT\x20DEFAU','y.remoteJi','filters','ed_by,\x0a\x20\x20\x20','INTEGER\x20DE','heck\x20/setd','resolveNam','r);','irmation','\x0a!response','trim','t_jid,\x20tri','keyword','ection(s)\x20','id,\x20respon','ored\x20regex','from','get','s\x20a\x20full\x20J','T\x20NULL,\x0a\x20\x20','keywords','\x0aOptionall','\x20failed:\x20','d\x20IN\x20(?,\x20?','table\x20(can','set','s\x20table','ups\x20helper','EMENT,\x0a\x20\x20\x20','l\x20groups)','author','oUserJid','\x20\x20\x20\x20\x20\x20\x20\x20re','response1\x0a','l\x20(deletes','_MS','LE\x20IF\x20NOT\x20','test','xcluded.cr','d\x20(sudo\x20+\x20','\x20\x20\x20\x20\x20trigg','trigger1,t','created\x20fi','sendPresen','build','rr_index\x20=','STS\x20idx_fi','ALUES\x20(?,\x20','\x20first.','ES\x20ALL\x20fil','toLowerCas','EXISTS\x20idx','are\x20send\x20a','extendedTe','lowerToOri','Y\x20AUTOINCR','er,\x20chat_j','composing','385781svaOIw','.\x20Please\x20c','out\x20target','EGER\x20DEFAU','ctReply','parse','y\x20include\x20','gdelf','chat_id','splice','word','ters\x20table','on(s):\x20','prepare','ger\x20FROM\x20f','deleted\x20','\x20=\x20?','idx\x20create','caption','key','fallback\x20b','ailed\x20to\x20','ers(chat_j','L\x20filters\x20','M\x20filters\x20','elfilter\x20a','l>]\x0aOr:\x20gd','!response1','tingFilter','ses,\x20rr_in','hat\x20ON\x20fil','replies','\x20\x20\x20\x20\x20\x20);','sendText\x20f','selectedBu','time','NOT\x20NULL,\x0a','s\x20error:\x20','created_at','text','r\x20for\x20','rigger)\x0a\x20\x20','responses,','DB)','global\x20by\x20','findStored','ters\x20from\x20','\x20TO\x20filter','\x20to\x20filter','new\x20(trigg','string','join','\x20to\x20','ing\x20column','igger\x20=\x20?','delete\x20all','\x20\x20\x20\x20\x20\x20);\x0a\x20','from\x20datab','created_by','AUTOINCREM','Unknown\x20gp','readAndNor','malizeExis','LT\x200\x0a\x20\x20\x20\x20\x20','up\x20admin):','default):\x0a','fter\x20reply','@g.us','keys','phrase','4888632CXxJAA','\x20\x20\x20\x20\x20','malized\x20ro','add','catch','id,\x20trigge','_filters_c','fromMe','listTrigge','\x20to\x20ctx.ke','ters\x20SET\x20r','Handler\x20er',',\x0a\x20\x20','\x20empty;\x20fa','k\x20matching','eated_at;','umn\x20','281830YffkGX','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','ted_at\x20=\x20e','ex\x20INTEGER','CREATE\x20UNI'];_0x2424=function(){return _0x46fe69;};return _0x2424();}import{isadmin}from'../utils/isadmin.js';import*as _0x18da01 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x21904b(0x1f5);function _0x35ff(_0x3992dd,_0x4eeaaa){_0x3992dd=_0x3992dd-(-0x8ab+0x362*0xa+0x11*-0x173);const _0x3f7f09=_0x2424();let _0x5e6223=_0x3f7f09[_0x3992dd];return _0x5e6223;}export const version='2.2.0';export const priority=0x1*0x2642+-0xb6d*0x2+-0xef*0x10;export const configKeys=[_0x21904b(0x1ee)];export const commands=[_0x21904b(0x1f5),'glistfilte'+'r',_0x21904b(0x98),_0x21904b(0x98)+'s',_0x21904b(0x147)];function clampTypingMs(_0x51df36){const _0x36b94a=_0x21904b,_0x33601e=Number(_0x51df36);if(!Number[_0x36b94a(0xe1)](_0x33601e)||isNaN(_0x33601e))return 0x6f7*0x4+0x679*-0x2+-0xeea;if(_0x33601e<=0x1c51+0x2554+-0x41a5)return 0x5b5*-0x6+-0x1eea+-0xf*-0x458;if(_0x33601e>-0x1*0x95b+0x805+0x3bee)return 0x60+-0x739b+0xadd3;return Math[_0x36b94a(0x19c)](_0x33601e);}function sleep(_0x3fe8bc){return new Promise(_0x5b0b1a=>setTimeout(_0x5b0b1a,_0x3fe8bc));}async function simulateTypingAndWait(_0x4f86f7,_0x25830c,_0x647cff){const _0x4eb2fb=_0x21904b;if(!_0x647cff||_0x647cff<=0x5*-0x1e5+-0x99*-0x21+-0xa40)return;try{if(_0x4f86f7&&typeof _0x4f86f7[_0x4eb2fb(0x131)+'ceUpdate']==='function')try{await _0x4f86f7[_0x4eb2fb(0x131)+_0x4eb2fb(0xce)](_0x4eb2fb(0x13f),_0x25830c);}catch(_0x5151d3){}}catch(_0x11e4ad){}try{await sleep(_0x647cff);}catch(_0x23a30){}try{if(_0x4f86f7&&typeof _0x4f86f7[_0x4eb2fb(0x131)+_0x4eb2fb(0xce)]===_0x4eb2fb(0xd5))try{await _0x4f86f7[_0x4eb2fb(0x131)+_0x4eb2fb(0xce)](_0x4eb2fb(0xbe),_0x25830c);}catch(_0x1b3d3e){}}catch(_0x5a4817){}}function ensureArray(_0x38c3fb){const _0x37f2cf=_0x21904b;if(!_0x38c3fb)return[];if(Array[_0x37f2cf(0x215)](_0x38c3fb))return _0x38c3fb;return[String(_0x38c3fb)];}function uniqArray(_0x3fe4cf){const _0x10dfd9=_0x21904b,_0x5ec77e=new Set(),_0xd2333a=[];for(const _0x1cd122 of _0x3fe4cf){const _0x5175b8=String(_0x1cd122||'')[_0x10dfd9(0x110)]();if(!_0x5175b8)continue;!_0x5ec77e[_0x10dfd9(0x1d5)](_0x5175b8)&&(_0x5ec77e[_0x10dfd9(0x189)](_0x5175b8),_0xd2333a['push'](_0x5175b8));}return _0xd2333a;}function escapeRegex(_0x1437f1){const _0x264109=_0x21904b;return _0x1437f1[_0x264109(0xaf)](/[.*+?^${}()|[\]\\]/g,_0x264109(0x1e1));}function wildcardToRegexPattern(_0x497379){const _0x3b6c92=_0x21904b,_0x3dc767=_0x497379['split']('*')['map'](_0x57f3f7=>escapeRegex(_0x57f3f7));return'\x5cb'+_0x3dc767[_0x3b6c92(0x173)](_0x3b6c92(0x1bb))+'\x5cb';}function clampConfigTypingMs(){const _0x2d78cf=_0x21904b;try{const _0x45043b=getConfig()||{},_0x4f2387=_0x45043b[_0x2d78cf(0x1ee)]&&typeof _0x45043b[_0x2d78cf(0x1ee)]===_0x2d78cf(0xcc)?_0x45043b['FILTERS']:{};return clampTypingMs(_0x4f2387['TYPING_SIM'+_0x2d78cf(0x129)]);}catch(_0x2e4593){return-0x397+0x19b+0x1fc;}}let botRef=null,sendApi=null;async function sendText(_0x17ef2c,_0x44b008,_0x493255,_0x22e6d1){const _0x2c8dde=_0x21904b;let _0x9d01=null,_0xc331=null,_0x5ca6c9=null,_0x48664d=[];_0x17ef2c&&typeof _0x17ef2c===_0x2c8dde(0xcc)&&_0x17ef2c['key']&&_0x17ef2c[_0x2c8dde(0x1ba)]?(_0x9d01=_0x17ef2c,_0xc331=_0x44b008,_0x5ca6c9=_0x493255,_0x48664d=Array[_0x2c8dde(0x215)](_0x22e6d1)?_0x22e6d1:[]):(_0xc331=_0x17ef2c,_0x5ca6c9=_0x44b008,_0x48664d=Array['isArray'](_0x493255)?_0x493255:[]);if(!_0x5ca6c9)return;if(!_0xc331){warn(_0x2c8dde(0x20b)+'sendText\x20c'+_0x2c8dde(0x97)+_0x2c8dde(0x142)+_0x2c8dde(0x101));return;}const _0x3e9826={'text':String(_0x5ca6c9)};if(Array[_0x2c8dde(0x215)](_0x48664d)&&_0x48664d[_0x2c8dde(0x20a)])_0x3e9826[_0x2c8dde(0x1b6)]=_0x48664d;try{if(!sendApi){warn('[gfilter]\x20'+_0x2c8dde(0x242)+'\x20available');return;}const _0x241262=clampConfigTypingMs();if(_0x241262>0x1f0f+0x101e+-0x2f2d)try{await simulateTypingAndWait(botRef?.['sock'],_0xc331,_0x241262);}catch(_0x3050b0){warn(_0x2c8dde(0x20b)+'simulateTy'+_0x2c8dde(0xbd)+'t\x20error:\x20'+(_0x3050b0?.['message']||_0x3050b0));}if(_0x9d01&&typeof _0x9d01[_0x2c8dde(0xd3)]==='function')try{await _0x9d01['reply']({'text':String(_0x5ca6c9),'mentions':_0x3e9826[_0x2c8dde(0x1b6)]||[]});return;}catch(_0x4003c2){try{await sendApi(_0xc331,_0x3e9826);return;}catch(_0x56da82){warn(_0x2c8dde(0x20b)+_0x2c8dde(0x154)+_0x2c8dde(0x13a)+_0x2c8dde(0x182)+_0x2c8dde(0xf3)+_0x2c8dde(0x96)+':\x20'+(_0x56da82?.[_0x2c8dde(0x1ba)]||_0x56da82));return;}}try{await sendApi(_0xc331,_0x3e9826);}catch(_0x45a843){warn(_0x2c8dde(0x20b)+_0x2c8dde(0x161)+_0x2c8dde(0x155)+_0xc331+':\x20'+(_0x45a843?.[_0x2c8dde(0x1ba)]||_0x45a843));}}catch(_0x9c4af2){warn('[gfilter]\x20'+_0x2c8dde(0x227)+_0x2c8dde(0x1ea)+'error:\x20'+(_0x9c4af2?.[_0x2c8dde(0x1ba)]||_0x9c4af2));}}async function tableExists(_0x473b30){const _0x3b3977=_0x21904b;try{const _0x4e6122=await db['get'](_0x3b3977(0x1df)+_0x3b3977(0xae)+'ite_master'+_0x3b3977(0x1ac)+_0x3b3977(0xe7)+_0x3b3977(0x244),[_0x473b30]);return!!_0x4e6122;}catch(_0x55c0db){return warn(_0x3b3977(0x20b)+_0x3b3977(0xe4)+_0x3b3977(0x165)+(_0x55c0db?.['message']||_0x55c0db)),![];}}async function getTableColumns(_0x3bcc8e){const _0x166a77=_0x21904b;try{const _0x1a5fd2=await db[_0x166a77(0x1e0)](_0x166a77(0x1bf)+_0x166a77(0x21c)+_0x3bcc8e+')');return(_0x1a5fd2||[])[_0x166a77(0xb0)](_0x1114dd=>_0x1114dd[_0x166a77(0x8a)]);}catch(_0x48490b){return warn('[gfilter]\x20'+_0x166a77(0x22b)+_0x166a77(0xaa)+_0x166a77(0x168)+_0x3bcc8e+':\x20'+(_0x48490b?.[_0x166a77(0x1ba)]||_0x48490b)),[];}}function resolveChatJidFromRow(_0xa72654){const _0x1a6053=_0x21904b,_0x1603fe=[_0x1a6053(0x24e),'chatid',_0x1a6053(0x148),'jid','chat',_0x1a6053(0x1b7)];for(const _0x911b2d of _0x1603fe)if(_0x911b2d in _0xa72654&&_0xa72654[_0x911b2d])return String(_0xa72654[_0x911b2d]);for(const _0x176efa of Object[_0x1a6053(0x184)](_0xa72654)){const _0x43f9a4=_0xa72654[_0x176efa];if(typeof _0x43f9a4===_0x1a6053(0x172)&&_0x43f9a4[_0x1a6053(0x8f)]('@'))return _0x43f9a4;}return null;}function resolveTriggerFromRow(_0x1bcc51){const _0x95bde2=_0x21904b,_0x1b79da=[_0x95bde2(0x8d),_0x95bde2(0x1e4),'keyword',_0x95bde2(0x14a),_0x95bde2(0x185)];for(const _0xcb6028 of _0x1b79da)if(_0xcb6028 in _0x1bcc51&&_0x1bcc51[_0xcb6028])return String(_0x1bcc51[_0xcb6028]);for(const _0x26a794 of Object[_0x95bde2(0x184)](_0x1bcc51)){const _0x3df2d3=_0x1bcc51[_0x26a794];if(typeof _0x3df2d3==='string'&&!_0x3df2d3[_0x95bde2(0x8f)]('@')&&_0x3df2d3[_0x95bde2(0x20a)]<-0xf27*-0x1+-0xe*0x135+-0x2eb*-0x1)return _0x3df2d3;}return null;}function resolveResponsesFromRow(_0x7eaea){const _0x2a0103=_0x21904b,_0x4388a5=[_0x2a0103(0x1cd),_0x2a0103(0xd8),_0x2a0103(0xd3),_0x2a0103(0x15f),_0x2a0103(0x1cc),_0x2a0103(0x1b3),_0x2a0103(0x1ba)];for(const _0x307fb7 of _0x4388a5)if(_0x307fb7 in _0x7eaea&&_0x7eaea[_0x307fb7]!=null)return _0x7eaea[_0x307fb7];for(const _0x16de8f of Object['keys'](_0x7eaea)){const _0x46d497=_0x7eaea[_0x16de8f];if(typeof _0x46d497===_0x2a0103(0x172)&&(_0x46d497[_0x2a0103(0x110)]()[_0x2a0103(0xe5)]('!')||_0x46d497[_0x2a0103(0x110)]()[_0x2a0103(0x8f)]('\x0a')||_0x46d497[_0x2a0103(0x110)]()[_0x2a0103(0xe5)]('[')))return _0x46d497;}return null;}async function readAndNormalizeExistingFilters(){const _0x1bec77=_0x21904b;try{const _0x4ada78=await db[_0x1bec77(0x1e0)]('SELECT\x20*\x20F'+_0x1bec77(0x1e7)+'s'),_0xd35f48=new Map();for(const _0x48f606 of _0x4ada78||[]){const _0x467aba=resolveTriggerFromRow(_0x48f606)||'',_0x1bfc1d=resolveChatJidFromRow(_0x48f606)||'';if(!_0x467aba||!_0x1bfc1d)continue;const _0x310cbc=resolveResponsesFromRow(_0x48f606),_0xc05cb0=normalizeResponseValue(_0x310cbc),_0x2901a0=_0x48f606[_0x1bec77(0x17a)]||_0x48f606[_0x1bec77(0x1bc)]||_0x48f606[_0x1bec77(0x124)]||'';let _0x595b77=Number(_0x48f606[_0x1bec77(0x166)]||_0x48f606['ts']||_0x48f606[_0x1bec77(0x1ed)]||_0x48f606[_0x1bec77(0x163)]||0x43*-0x80+-0x196d*0x1+-0x3aed*-0x1);if(!_0x595b77)_0x595b77=Math[_0x1bec77(0x19c)](Date[_0x1bec77(0x214)]()/(0x131+0x1*-0x4f+0x9*0x56));const _0x49d9b1=_0x1bfc1d+'||'+_0x467aba;if(!_0xd35f48[_0x1bec77(0x1d5)](_0x49d9b1))_0xd35f48['set'](_0x49d9b1,{'trigger':_0x467aba,'chat_jid':_0x1bfc1d,'responses':_0xc05cb0['slice'](),'created_by':_0x2901a0,'created_at':_0x595b77});else{const _0x35c3d1=_0xd35f48[_0x1bec77(0x117)](_0x49d9b1);_0x35c3d1['responses']=uniqArray(_0x35c3d1['responses']['concat'](_0xc05cb0)),_0x35c3d1[_0x1bec77(0x17a)]=_0x35c3d1[_0x1bec77(0x17a)]||_0x2901a0,_0x35c3d1['created_at']=Math['max'](_0x35c3d1[_0x1bec77(0x166)]||0x8c*-0x17+0x174*0xa+0xa*-0x32,_0x595b77||-0x2038+-0x139*-0x1d+-0x33d*0x1);}}return Array[_0x1bec77(0x116)](_0xd35f48[_0x1bec77(0xc0)]());}catch(_0x5bdb3b){return warn(_0x1bec77(0x20b)+_0x1bec77(0x17d)+_0x1bec77(0x17e)+_0x1bec77(0x15c)+_0x1bec77(0x1a2)+(_0x5bdb3b?.[_0x1bec77(0x1ba)]||_0x5bdb3b)),[];}}async function ensureSchema(){const _0x1c8c43=_0x21904b,_0x3b39ae={'id':_0x1c8c43(0x206)+'IMARY\x20KEY\x20'+_0x1c8c43(0x17b)+'ENT','trigger':_0x1c8c43(0x92)+_0x1c8c43(0xeb),'chat_jid':'TEXT\x20NOT\x20N'+_0x1c8c43(0xeb),'responses':_0x1c8c43(0x92)+'ULL\x20DEFAUL'+'T\x20\x27[]\x27','rr_index':'INTEGER\x20DE'+_0x1c8c43(0x238),'created_by':_0x1c8c43(0x106)+'LT\x20\x27\x27','created_at':_0x1c8c43(0x10a)+_0x1c8c43(0x238)};try{const _0x3bc826=await tableExists(_0x1c8c43(0x108));if(!_0x3bc826){const _0x50d32f=Object['entries'](_0x3b39ae)['map'](([_0x3ab025,_0x1c9670])=>_0x3ab025+'\x20'+_0x1c9670)[_0x1c8c43(0x173)](_0x1c8c43(0x192));await db['exec']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20C'+_0x1c8c43(0x1e3)+_0x1c8c43(0x95)+_0x1c8c43(0x1fc)+'\x20\x20'+_0x50d32f+(_0x1c8c43(0x1de)+_0x1c8c43(0x248)+_0x1c8c43(0x212)+_0x1c8c43(0x169)+_0x1c8c43(0x178)+_0x1c8c43(0x187)));try{await db['exec']('CREATE\x20IND'+_0x1c8c43(0xca)+_0x1c8c43(0x139)+_0x1c8c43(0x18c)+_0x1c8c43(0x15e)+_0x1c8c43(0x8c)+_0x1c8c43(0x1c6));}catch(_0x226397){}try{await db[_0x1c8c43(0xdd)](_0x1c8c43(0x19b)+_0x1c8c43(0xd4)+_0x1c8c43(0x1f4)+_0x1c8c43(0x134)+_0x1c8c43(0xc5)+_0x1c8c43(0x1f0)+_0x1c8c43(0x156)+_0x1c8c43(0x18b)+_0x1c8c43(0x10d));}catch(_0x38e715){}info(_0x1c8c43(0x20b)+'created\x20ne'+_0x1c8c43(0x1af)+_0x1c8c43(0x11e)+'onical\x20sch'+_0x1c8c43(0x226));return;}const _0x4a7482=await getTableColumns('filters'),_0x37721b=[];for(const _0x2f90a6 of Object['keys'](_0x3b39ae)){if(!_0x4a7482['includes'](_0x2f90a6))_0x37721b[_0x1c8c43(0x9f)](_0x2f90a6);}if(_0x37721b[_0x1c8c43(0x20a)]===-0x15cd+-0xc5*0x1+-0x6*-0x3c3){try{await db[_0x1c8c43(0xdd)]('CREATE\x20IND'+_0x1c8c43(0xca)+'EXISTS\x20idx'+_0x1c8c43(0x18c)+_0x1c8c43(0x15e)+_0x1c8c43(0x8c)+_0x1c8c43(0x1c6));}catch(_0x3f2e96){warn(_0x1c8c43(0x20b)+_0x1c8c43(0x151)+':\x20'+(_0x3f2e96?.[_0x1c8c43(0x1ba)]||_0x3f2e96));}try{await db['exec'](_0x1c8c43(0x19b)+'QUE\x20INDEX\x20'+_0x1c8c43(0x1f4)+_0x1c8c43(0x134)+'lters_uniq'+_0x1c8c43(0x1f0)+_0x1c8c43(0x156)+_0x1c8c43(0x18b)+_0x1c8c43(0x10d));}catch(_0x270e2a){warn('[gfilter]\x20'+_0x1c8c43(0xad)+':\x20'+(_0x270e2a?.[_0x1c8c43(0x1ba)]||_0x270e2a));}return;}const _0x4627f3=_0x37721b[_0x1c8c43(0xa5)](_0x2fac6c=>!['id',_0x1c8c43(0x8d),_0x1c8c43(0x24e)][_0x1c8c43(0x8f)](_0x2fac6c));if(_0x4627f3){for(const _0x3bbe3c of _0x37721b){try{const _0xe501f1=_0x3b39ae[_0x3bbe3c],_0x5b77db=_0xe501f1['split']('\x20')[_0x1c8c43(0x19f)](0x2569*0x1+-0x1b51+-0xa17)[_0x1c8c43(0x173)]('\x20');await db['exec'](_0x1c8c43(0x9c)+_0x1c8c43(0x95)+_0x1c8c43(0xb5)+'\x20'+_0x3bbe3c+'\x20'+_0x5b77db),info(_0x1c8c43(0x20b)+_0x1c8c43(0xfa)+_0x1c8c43(0x175)+'\x20'+_0x3bbe3c+(_0x1c8c43(0x170)+_0x1c8c43(0x120)));}catch(_0x3b51ba){warn(_0x1c8c43(0x20b)+_0x1c8c43(0x1c7)+_0x1c8c43(0x196)+_0x3bbe3c+_0x1c8c43(0x11c)+(_0x3b51ba?.['message']||_0x3b51ba));}}try{await db[_0x1c8c43(0xdd)]('CREATE\x20IND'+_0x1c8c43(0xca)+'EXISTS\x20idx'+'_filters_c'+_0x1c8c43(0x15e)+_0x1c8c43(0x8c)+_0x1c8c43(0x1c6));}catch(_0x5317b0){warn(_0x1c8c43(0x20b)+'idx\x20create'+':\x20'+(_0x5317b0?.[_0x1c8c43(0x1ba)]||_0x5317b0));}try{await db[_0x1c8c43(0xdd)](_0x1c8c43(0x19b)+'QUE\x20INDEX\x20'+_0x1c8c43(0x1f4)+'STS\x20idx_fi'+_0x1c8c43(0xc5)+_0x1c8c43(0x1f0)+'ers(chat_j'+_0x1c8c43(0x18b)+'r);');}catch(_0x486e6c){warn(_0x1c8c43(0x20b)+_0x1c8c43(0xad)+':\x20'+(_0x486e6c?.['message']||_0x486e6c));}return;}info('[gfilter]\x20'+_0x1c8c43(0x239)+_0x1c8c43(0x14b)+_0x1c8c43(0x24a)+_0x1c8c43(0x1f9)+_0x1c8c43(0xda)+'gration');const _0x529e02=await readAndNormalizeExistingFilters();await db[_0x1c8c43(0xdd)]('PRAGMA\x20for'+_0x1c8c43(0x23b)+_0x1c8c43(0xcf));try{await db['exec'](_0x1c8c43(0x23e)+_0x1c8c43(0x12a)+_0x1c8c43(0xc8)+_0x1c8c43(0xb8)+_0x1c8c43(0x9d)+_0x1c8c43(0x205)+_0x1c8c43(0xc6)+_0x1c8c43(0x13d)+'EMENT,\x0a\x20\x20\x20'+_0x1c8c43(0x12e)+_0x1c8c43(0x230)+_0x1c8c43(0x119)+'\x20\x20\x20\x20\x20\x20chat'+'_jid\x20TEXT\x20'+'NOT\x20NULL,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'sponses\x20TE'+_0x1c8c43(0xf1)+_0x1c8c43(0x1e6)+_0x1c8c43(0x1a8)+_0x1c8c43(0x1d8)+_0x1c8c43(0x19a)+_0x1c8c43(0x19e)+_0x1c8c43(0x1de)+_0x1c8c43(0x17a)+'\x20TEXT\x20DEFA'+'ULT\x20\x27\x27,\x0a\x20\x20'+_0x1c8c43(0xa4)+_0x1c8c43(0xb1)+_0x1c8c43(0x143)+_0x1c8c43(0x9b)+_0x1c8c43(0xdf)+'(chat_jid,'+_0x1c8c43(0xe3)+_0x1c8c43(0x160));}catch(_0x2d26b9){await db[_0x1c8c43(0xdd)](_0x1c8c43(0x23e)+_0x1c8c43(0x12a)+_0x1c8c43(0xc8)+_0x1c8c43(0xb8)+_0x1c8c43(0x9d)+_0x1c8c43(0x205)+_0x1c8c43(0xc6)+_0x1c8c43(0x13d)+_0x1c8c43(0x122)+_0x1c8c43(0x12e)+'er\x20TEXT\x20NO'+_0x1c8c43(0x119)+_0x1c8c43(0x1d1)+_0x1c8c43(0x91)+_0x1c8c43(0x164)+_0x1c8c43(0x126)+_0x1c8c43(0x222)+'XT\x20NOT\x20NUL'+_0x1c8c43(0x1e6)+'\x27[]\x27,\x0a\x20\x20\x20\x20'+_0x1c8c43(0x1d8)+_0x1c8c43(0x19a)+'\x20DEFAULT\x200'+_0x1c8c43(0x1de)+_0x1c8c43(0x17a)+_0x1c8c43(0x228)+_0x1c8c43(0xb2)+_0x1c8c43(0xa4)+_0x1c8c43(0xb1)+'EGER\x20DEFAU'+_0x1c8c43(0x17f)+'\x20);'),warn(_0x1c8c43(0x20b)+_0x1c8c43(0x130)+_0x1c8c43(0x94)+'without\x20UN'+'IQUE\x20as\x20fa'+_0x1c8c43(0xf5));}const _0x4cbfcb=await db[_0x1c8c43(0x14d)](_0x1c8c43(0x1c0)+_0x1c8c43(0xa1)+_0x1c8c43(0x171)+_0x1c8c43(0x13e)+_0x1c8c43(0x114)+_0x1c8c43(0x15d)+_0x1c8c43(0x202)+_0x1c8c43(0x1a7)+_0x1c8c43(0x236)+_0x1c8c43(0x135)+_0x1c8c43(0x1fd)+',\x20?)');try{for(const _0x5670d4 of _0x529e02){const _0x5bf0d2=JSON['stringify'](ensureArray(_0x5670d4['responses']||[]));try{await _0x4cbfcb[_0x1c8c43(0x22a)](_0x5670d4[_0x1c8c43(0x8d)],_0x5670d4[_0x1c8c43(0x24e)],_0x5bf0d2,_0x5670d4['created_by']||'',Number(_0x5670d4['created_at']||Math[_0x1c8c43(0x19c)](Date[_0x1c8c43(0x214)]()/(-0x1*-0x1be7+0xcd2+-0x24d1))));}catch(_0xe798f7){warn(_0x1c8c43(0x20b)+'could\x20not\x20'+_0x1c8c43(0xa6)+_0x1c8c43(0x188)+'w\x20'+_0x5670d4[_0x1c8c43(0x24e)]+'@'+_0x5670d4['trigger']+':\x20'+(_0xe798f7?.[_0x1c8c43(0x1ba)]||_0xe798f7));}}}finally{try{await _0x4cbfcb[_0x1c8c43(0x211)]();}catch(_0x54b51a){}}try{const _0x4dbfa2=_0x1c8c43(0x20f)+'ckup_'+Math[_0x1c8c43(0x19c)](Date['now']()/(-0xa80+0x8*-0x1e2+0xb8*0x29));await db['exec'](_0x1c8c43(0x9c)+_0x1c8c43(0x95)+_0x1c8c43(0xde)+_0x4dbfa2+';'),await db['exec'](_0x1c8c43(0x9c)+_0x1c8c43(0x1d6)+'new\x20RENAME'+_0x1c8c43(0x16f)+'s;');try{await db['exec'](_0x1c8c43(0x1b2)+_0x1c8c43(0xca)+_0x1c8c43(0x139)+_0x1c8c43(0x18c)+'hat\x20ON\x20fil'+_0x1c8c43(0x8c)+_0x1c8c43(0x1c6));}catch(_0x1531db){warn(_0x1c8c43(0x20b)+_0x1c8c43(0x1ce)+_0x1c8c43(0x1b4)+(_0x1531db?.[_0x1c8c43(0x1ba)]||_0x1531db));}try{await db[_0x1c8c43(0xdd)](_0x1c8c43(0x19b)+_0x1c8c43(0xd4)+'IF\x20NOT\x20EXI'+_0x1c8c43(0x134)+'lters_uniq'+'ue\x20ON\x20filt'+'ers(chat_j'+_0x1c8c43(0x18b)+_0x1c8c43(0x10d));}catch(_0x5dcf33){warn(_0x1c8c43(0x20b)+_0x1c8c43(0x1ce)+'unique\x20idx'+':\x20'+(_0x5dcf33?.[_0x1c8c43(0x1ba)]||_0x5dcf33));}info(_0x1c8c43(0x20b)+_0x1c8c43(0xb4)+'completed;'+_0x1c8c43(0x247)+'\x20renamed\x20t'+_0x1c8c43(0x24d));}catch(_0x138bb5){warn('[gfilter]\x20'+'swap\x20table'+_0x1c8c43(0x1a2)+(_0x138bb5?.[_0x1c8c43(0x1ba)]||_0x138bb5));throw _0x138bb5;}finally{await db[_0x1c8c43(0xdd)](_0x1c8c43(0xb3)+_0x1c8c43(0x23b)+_0x1c8c43(0x1ec));}}catch(_0x4cc011){error(_0x4cc011,_0x1c8c43(0x20b)+_0x1c8c43(0xb9)+_0x1c8c43(0x1fb));throw _0x4cc011;}}function normalizeResponseValue(_0x39dc44){const _0x1b6bd7=_0x21904b;if(_0x39dc44==null)return[];if(Array['isArray'](_0x39dc44))return uniqArray(_0x39dc44);if(typeof _0x39dc44===_0x1b6bd7(0x172)){let _0x18223a=_0x39dc44[_0x1b6bd7(0xaf)](/\r/g,'');const _0x25af36=_0x18223a[_0x1b6bd7(0x110)]();if(_0x25af36[_0x1b6bd7(0xe5)]('['))try{const _0x222797=JSON['parse'](_0x25af36);if(Array[_0x1b6bd7(0x215)](_0x222797))return uniqArray(_0x222797[_0x1b6bd7(0xb0)](_0x2a2f1d=>String(_0x2a2f1d||'')));}catch(_0x5f1402){}_0x18223a=_0x18223a[_0x1b6bd7(0xaf)](/^\s*\n+/,'')['replace'](/\n+\s*$/,'');const _0x42f44c=_0x18223a['split']('\x0a'),_0x32ab17=_0x42f44c[_0x1b6bd7(0x1ae)](_0x212c74=>_0x212c74[_0x1b6bd7(0x1a5)]()[_0x1b6bd7(0xe5)]('!'));if(_0x32ab17){const _0x50ff06=[];let _0x1b0c4b=null;for(const _0x570eeb of _0x42f44c){if(_0x570eeb[_0x1b6bd7(0x1a5)]()[_0x1b6bd7(0xe5)]('!')){const _0x24b18c=_0x570eeb[_0x1b6bd7(0xaf)](/^\s*!/,''),_0x24e831=_0x24b18c[_0x1b6bd7(0xaf)](/\s+$/,'');_0x1b0c4b=_0x24e831,_0x50ff06['push'](_0x1b0c4b);}else{const _0x5df974=_0x570eeb[_0x1b6bd7(0xaf)](/\s+$/,'');if(_0x1b0c4b===null)_0x1b0c4b=_0x5df974,_0x50ff06[_0x1b6bd7(0x9f)](_0x1b0c4b);else{const _0x29e23c=_0x50ff06[_0x1b6bd7(0x20a)]-(-0x2370+0x210b+-0x1*-0x266);_0x50ff06[_0x29e23c]=_0x50ff06[_0x29e23c]+'\x0a'+_0x5df974,_0x1b0c4b=_0x50ff06[_0x29e23c];}}}return uniqArray(_0x50ff06[_0x1b6bd7(0xb0)](_0x418efd=>String(_0x418efd||'')[_0x1b6bd7(0x110)]()));}else{const _0x576e9a=_0x42f44c[_0x1b6bd7(0xb0)](_0x591783=>_0x591783[_0x1b6bd7(0xaf)](/\s+$/,''))[_0x1b6bd7(0x173)]('\x0a')[_0x1b6bd7(0x110)]();if(!_0x576e9a)return[];return[_0x576e9a];}}return[];}async function upsertFilterRow(_0x73793c,_0x3e877c,_0x3a9d13,_0x380ea4){const _0x2eb310=_0x21904b;try{const _0x4c039a=Math['floor'](Date[_0x2eb310(0x214)]()/(-0x1277*-0x1+-0x10b6+0x227)),_0x4222a5=JSON[_0x2eb310(0x224)](uniqArray(ensureArray(_0x3a9d13)[_0x2eb310(0xb0)](_0x155b7c=>String(_0x155b7c)[_0x2eb310(0x110)]())[_0x2eb310(0x1f6)](Boolean)));await db['run'](_0x2eb310(0x1c0)+_0x2eb310(0x99)+_0x2eb310(0x1d4)+_0x2eb310(0x22c)+'responses,'+_0x2eb310(0x1ef)+_0x2eb310(0x22e)+_0x2eb310(0x245)+_0x2eb310(0x21a)+_0x2eb310(0x21d)+'?,\x20?,\x20?,\x200'+',\x20?,\x20?)\x0a\x20\x20'+_0x2eb310(0x232)+_0x2eb310(0x210)+_0x2eb310(0x111)+_0x2eb310(0x19d)+_0x2eb310(0x24c)+_0x2eb310(0x1c8)+'esponses\x20='+_0x2eb310(0x208)+_0x2eb310(0x16a)+_0x2eb310(0x198)+_0x2eb310(0x133)+_0x2eb310(0x237)+_0x2eb310(0xc1)+_0x2eb310(0x1d0)+'uded.creat'+_0x2eb310(0x109)+_0x2eb310(0xa4)+_0x2eb310(0x199)+_0x2eb310(0x12c)+_0x2eb310(0x195),[_0x3e877c,_0x73793c,_0x4222a5,_0x380ea4||'',_0x4c039a]);try{automatonCache[_0x2eb310(0xc9)]();}catch(_0x7f882f){}return info('[gfilter]\x20'+_0x2eb310(0xe9)+_0x2eb310(0x1b5)+_0x3e877c+_0x2eb310(0x231)+_0x73793c),!![];}catch(_0x23042c){return error(_0x23042c,_0x2eb310(0x20b)+_0x2eb310(0xbf)+_0x2eb310(0x1f8)+'for\x20'+_0x3e877c+_0x2eb310(0xa7)+_0x73793c),![];}}async function deleteFilters(_0x5def43,_0x2a2b12){const _0x909cc3=_0x21904b;if(!Array[_0x909cc3(0x215)](_0x2a2b12)||_0x2a2b12[_0x909cc3(0x20a)]===-0x133b*-0x1+-0x170f*0x1+0x3d4)return-0xaf7*-0x2+0x2ff*0x1+0x18ed*-0x1;try{let _0x33b30e=0x2*0x12df+0x17c0+-0x39e*0x11;for(const _0x435952 of _0x2a2b12){const _0x5c12f5=await db[_0x909cc3(0x22a)](_0x909cc3(0x88)+_0x909cc3(0x158)+_0x909cc3(0xbb)+_0x909cc3(0xed)+_0x909cc3(0x1f2)+_0x909cc3(0x150),[_0x5def43,_0x435952]);if(_0x5c12f5?.[_0x909cc3(0xa8)])_0x33b30e+=_0x5c12f5['changes'];info('[gfilter]\x20'+_0x909cc3(0x14f)+_0x435952+'\x20@\x20'+_0x5def43);}try{automatonCache[_0x909cc3(0xc9)]();}catch(_0x13f82b){}return _0x33b30e;}catch(_0x550c90){return error(_0x550c90,_0x909cc3(0x20b)+_0x909cc3(0xc7)+_0x909cc3(0x1f1)+_0x909cc3(0xc2)+_0x5def43),0x7*-0x52+0xac7*-0x3+0x2293*0x1;}}async function listTriggersForChat(_0x505620){const _0x2821f1=_0x21904b;try{const _0x370df2=await db[_0x2821f1(0x1e0)](_0x2821f1(0x93)+_0x2821f1(0x1ab)+_0x2821f1(0x14e)+'ilters\x20WHE'+_0x2821f1(0x86)+'d\x20=\x20?\x20ORDE'+_0x2821f1(0x218)+'er',[_0x505620]);return(_0x370df2||[])[_0x2821f1(0xb0)](_0x511e3d=>_0x511e3d[_0x2821f1(0x8d)]);}catch(_0x204f11){return warn(_0x204f11,_0x2821f1(0x20b)+_0x2821f1(0x18e)+_0x2821f1(0x104)+_0x2821f1(0xa9)+'\x20'+_0x505620),[];}}async function pickResponseAndAdvance(_0x273adf,_0x563208,_0x392d88='roundrobin'){const _0x23a455=_0x21904b;try{const _0x3903ac=await db[_0x23a455(0x117)]('SELECT\x20res'+'ponses,\x20rr'+'_index\x20FRO'+_0x23a455(0x158)+_0x23a455(0xbb)+_0x23a455(0xed)+'ND\x20trigger'+_0x23a455(0xf2)+'\x201',[_0x273adf,_0x563208]);if(!_0x3903ac)return null;let _0x3c4f03=[];try{_0x3c4f03=JSON[_0x23a455(0x145)](_0x3903ac[_0x23a455(0x1cd)]||'[]');}catch{_0x3c4f03=ensureArray(_0x3903ac[_0x23a455(0x1cd)]);}_0x3c4f03=ensureArray(_0x3c4f03);if(!_0x3c4f03[_0x23a455(0x20a)])return null;if((_0x392d88||'')[_0x23a455(0x138)+'e']()===_0x23a455(0xf9)){const _0x193884=Math[_0x23a455(0x19c)](Math['random']()*_0x3c4f03['length']);return _0x3c4f03[_0x193884];}const _0x488268=Number(_0x3903ac[_0x23a455(0x20d)]||-0x25f*0x6+0x247d*-0x1+-0x1*-0x32b7),_0x392af7=_0x3c4f03[_0x488268%_0x3c4f03[_0x23a455(0x20a)]];try{await db['run'](_0x23a455(0x1cf)+_0x23a455(0x190)+'r_index\x20=\x20'+_0x23a455(0x243)+_0x23a455(0x200)+_0x23a455(0x22d)+_0x23a455(0x24b)+_0x23a455(0x176),[_0x273adf,_0x563208]);}catch(_0x17a866){warn(_0x23a455(0x20b)+_0x23a455(0xd2)+_0x23a455(0x90)+_0x23a455(0x1bd)+(_0x17a866?.[_0x23a455(0x1ba)]||_0x17a866));}return _0x392af7;}catch(_0x134d95){return warn(_0x23a455(0x20b)+_0x23a455(0x1ad)+'seAndAdvan'+_0x23a455(0xd1)+(_0x134d95?.['message']||_0x134d95)),null;}}function parseFilterCommandText(_0x3a9ca5){const _0x32d98b=_0x21904b;if(!_0x3a9ca5)return null;const _0x5e8cd8=_0x3a9ca5[_0x32d98b(0xf8)](/\r?\n/)[_0x32d98b(0xb0)](_0x507d80=>_0x507d80[_0x32d98b(0xaf)](/\r/g,''));if(!_0x5e8cd8[_0x32d98b(0x20a)])return null;let _0xb24681=(_0x5e8cd8[0x216e+0x1*0x235d+-0x641*0xb]||'')[_0x32d98b(0x110)](),_0x32a4f6=_0x5e8cd8[_0x32d98b(0x19f)](0x5e*-0x47+-0x1e91+0xfa*0x3a),_0x4b5cf2=null;const _0x1045b7=_0xb24681['match'](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);_0x1045b7&&(_0xb24681=(_0x1045b7[0x15b2+0x1*-0x22ee+0xd3d]||'')[_0x32d98b(0x110)](),_0x4b5cf2=(_0x1045b7[0x12d9+-0x184c+-0x7f*-0xb]||'')[_0x32d98b(0x110)]());if(!_0x4b5cf2&&_0x32a4f6&&_0x32a4f6[_0x32d98b(0x20a)]){let _0x3dbce5=-(0x1851+0x1*0x1f43+0x29*-0x15b);for(let _0xbdbc37=_0x32a4f6[_0x32d98b(0x20a)]-(-0xfc+0x94f*0x1+-0x5*0x1aa);_0xbdbc37>=-0x45*0x17+-0x101*-0x23+-0x1cf0;_0xbdbc37--){if(String(_0x32a4f6[_0xbdbc37]||'')[_0x32d98b(0x110)]()[_0x32d98b(0x20a)]>0x10b1*-0x1+-0x2*-0x5f7+0x4c3){_0x3dbce5=_0xbdbc37;break;}}if(_0x3dbce5>=0x11*-0x18a+0x683*-0x1+0x20ad){const _0x83e4fe=String(_0x32a4f6[_0x3dbce5]||'')[_0x32d98b(0x110)](),_0x115a15=_0x83e4fe[_0x32d98b(0x1f7)](/^gp[:\s]*([^\s,]+)\s*$/i);_0x115a15&&(_0x4b5cf2=(_0x115a15[0x1*-0x15ef+0x101e+0x5d2]||'')['trim'](),_0x32a4f6[_0x32d98b(0x149)](_0x3dbce5,0x2*0x17+-0x24a7+0x247a));}}let _0xe7ad16=_0xb24681['trim']()['split'](/\s+/)['filter'](Boolean);if(_0xe7ad16[_0x32d98b(0x20a)]&&_0xe7ad16[0xe80+-0x22a1+0x1421][_0x32d98b(0x138)+'e']()===_0x32d98b(0x1f5))_0xe7ad16[_0x32d98b(0x250)]();const _0x4467c5=_0xe7ad16[_0x32d98b(0x173)]('\x20')[_0x32d98b(0x110)]();let _0x54320c=[];_0x4467c5&&(_0x4467c5[_0x32d98b(0x8f)](',')?_0x54320c=_0x4467c5[_0x32d98b(0xf8)](',')[_0x32d98b(0xb0)](_0x136274=>_0x136274[_0x32d98b(0x110)]())[_0x32d98b(0x1f6)](Boolean):_0x54320c=_0x4467c5['split'](/\s+/)[_0x32d98b(0xb0)](_0x35ec16=>_0x35ec16[_0x32d98b(0x110)]())[_0x32d98b(0x1f6)](Boolean));const _0x302916=_0x32a4f6;if(!_0x302916['length'])return{'triggers':_0x54320c,'responses':[],'gp':_0x4b5cf2};const _0x2d6ed9=_0x302916[_0x32d98b(0x173)]('\x0a'),_0x3bbba1=normalizeResponseValue(_0x2d6ed9);return{'triggers':_0x54320c,'responses':_0x3bbba1,'gp':_0x4b5cf2};}function getMessageText(_0x18806a){const _0x38ba4d=_0x21904b;if(!_0x18806a||!_0x18806a['message'])return'';const _0x514313=_0x18806a['message'];if(_0x514313['conversati'+'on'])return _0x514313[_0x38ba4d(0x246)+'on'];if(_0x514313[_0x38ba4d(0x13b)+'xtMessage']?.[_0x38ba4d(0x167)])return _0x514313[_0x38ba4d(0x13b)+_0x38ba4d(0xf7)][_0x38ba4d(0x167)];if(_0x514313['imageMessa'+'ge']?.[_0x38ba4d(0x152)])return _0x514313[_0x38ba4d(0x23a)+'ge']['caption'];if(_0x514313[_0x38ba4d(0xac)+'ge']?.[_0x38ba4d(0x152)])return _0x514313[_0x38ba4d(0xac)+'ge'][_0x38ba4d(0x152)];if(_0x514313[_0x38ba4d(0xba)+'ponseMessa'+'ge']?.[_0x38ba4d(0x162)+_0x38ba4d(0x1e5)])return _0x514313[_0x38ba4d(0xba)+_0x38ba4d(0x1b9)+'ge'][_0x38ba4d(0x162)+_0x38ba4d(0x1e5)];if(_0x514313['listRespon'+_0x38ba4d(0x23d)]?.[_0x38ba4d(0x1db)+'ctReply']?.[_0x38ba4d(0x21e)+_0x38ba4d(0x1ff)])return _0x514313[_0x38ba4d(0xff)+_0x38ba4d(0x23d)][_0x38ba4d(0x1db)+_0x38ba4d(0x144)]['selectedRo'+'wId'];return'';}const processedMessageKeys=new Map(),DEDUPE_TTL=(-0x59b+-0xdc5+0x3e6*0x5)*(0x23e7+-0x74*0x21+-0x110b);function makeDedupeKey(_0x2b4ce1){const _0x988e89=_0x21904b,_0x5eb0e2=_0x2b4ce1?.[_0x988e89(0x153)];if(!_0x5eb0e2)return null;const _0x1483f7=_0x5eb0e2['id']||_0x5eb0e2?.['participan'+'t']||'',_0x4d7927=_0x5eb0e2['remoteJid']||'';return _0x4d7927+'::'+_0x1483f7;}function isMsgProcessed(_0x4552ec){const _0x467be8=_0x21904b;return _0x4552ec&&processedMessageKeys[_0x467be8(0x1d5)](_0x4552ec);}function markMsgProcessed(_0x3a58cc){const _0xd77953=_0x21904b;if(!_0x3a58cc)return;processedMessageKeys[_0xd77953(0x1d5)](_0x3a58cc)&&clearTimeout(processedMessageKeys[_0xd77953(0x117)](_0x3a58cc));const _0x247c93=setTimeout(()=>processedMessageKeys[_0xd77953(0x220)](_0x3a58cc),DEDUPE_TTL);processedMessageKeys['set'](_0x3a58cc,_0x247c93);}class Aho{constructor(){const _0xa5c255=_0x21904b;this[_0xa5c255(0x1c3)]=[{'next':Object[_0xa5c255(0x87)](null),'fail':0x0,'output':[]}];}[_0x21904b(0x132)](_0x7d9d02){const _0x4cfec8=_0x21904b;this[_0x4cfec8(0x1c3)]=[{'next':Object[_0x4cfec8(0x87)](null),'fail':0x0,'output':[]}];for(const _0x5f0ade of _0x7d9d02){let _0x41ca57=-0x11+0x1b3+-0x1*0x1a2;for(let _0x5444fd=0x150f+-0x917*-0x1+0x22*-0xe3;_0x5444fd<_0x5f0ade[_0x4cfec8(0x20a)];_0x5444fd++){const _0xde544b=_0x5f0ade[_0x5444fd];!this[_0x4cfec8(0x1c3)][_0x41ca57]['next'][_0xde544b]&&(this[_0x4cfec8(0x1c3)][_0x41ca57][_0x4cfec8(0xd6)][_0xde544b]=this[_0x4cfec8(0x1c3)][_0x4cfec8(0x20a)],this[_0x4cfec8(0x1c3)][_0x4cfec8(0x9f)]({'next':Object[_0x4cfec8(0x87)](null),'fail':0x0,'output':[]})),_0x41ca57=this[_0x4cfec8(0x1c3)][_0x41ca57]['next'][_0xde544b];}this[_0x4cfec8(0x1c3)][_0x41ca57][_0x4cfec8(0xa3)][_0x4cfec8(0x9f)](_0x5f0ade);}const _0x59cefd=[];for(const _0x51d004 in this['nodes'][0x7b4+0x3ec*0x7+0x1194*-0x2][_0x4cfec8(0xd6)]){const _0x5248d2=this[_0x4cfec8(0x1c3)][-0x34b*-0x1+-0x15d8+0x128d][_0x4cfec8(0xd6)][_0x51d004];this[_0x4cfec8(0x1c3)][_0x5248d2][_0x4cfec8(0x24f)]=-0x108*-0x8+0x1f1f*-0x1+0x16df,_0x59cefd[_0x4cfec8(0x9f)](_0x5248d2);}while(_0x59cefd['length']){const _0x21306e=_0x59cefd[_0x4cfec8(0x250)]();for(const _0x3ba5b3 in this[_0x4cfec8(0x1c3)][_0x21306e][_0x4cfec8(0xd6)]){const _0x4b424f=this['nodes'][_0x21306e][_0x4cfec8(0xd6)][_0x3ba5b3];let _0x4972db=this[_0x4cfec8(0x1c3)][_0x21306e][_0x4cfec8(0x24f)];while(_0x4972db&&!this['nodes'][_0x4972db][_0x4cfec8(0xd6)][_0x3ba5b3])_0x4972db=this[_0x4cfec8(0x1c3)][_0x4972db]['fail'];if(this[_0x4cfec8(0x1c3)][_0x4972db][_0x4cfec8(0xd6)][_0x3ba5b3])this['nodes'][_0x4b424f][_0x4cfec8(0x24f)]=this['nodes'][_0x4972db][_0x4cfec8(0xd6)][_0x3ba5b3];else this[_0x4cfec8(0x1c3)][_0x4b424f][_0x4cfec8(0x24f)]=0x876*0x3+0x21d7+-0x3b39*0x1;this[_0x4cfec8(0x1c3)][_0x4b424f][_0x4cfec8(0xa3)][_0x4cfec8(0x9f)](...this[_0x4cfec8(0x1c3)][this[_0x4cfec8(0x1c3)][_0x4b424f][_0x4cfec8(0x24f)]][_0x4cfec8(0xa3)]),_0x59cefd['push'](_0x4b424f);}}}[_0x21904b(0x225)](_0x2d1051){const _0x2938e0=_0x21904b,_0x3e1126=[];let _0x313264=0x1e3c+0x1*-0xf31+0xf0b*-0x1;for(let _0x3312d5=-0x695+-0x1*0x1d35+0x23ca*0x1;_0x3312d5<_0x2d1051[_0x2938e0(0x20a)];_0x3312d5++){const _0x88dbd3=_0x2d1051[_0x3312d5];while(_0x313264&&!this['nodes'][_0x313264][_0x2938e0(0xd6)][_0x88dbd3])_0x313264=this[_0x2938e0(0x1c3)][_0x313264][_0x2938e0(0x24f)];if(this['nodes'][_0x313264][_0x2938e0(0xd6)][_0x88dbd3])_0x313264=this[_0x2938e0(0x1c3)][_0x313264][_0x2938e0(0xd6)][_0x88dbd3];else _0x313264=0x1ed+0x307*-0x1+0x11a;if(this[_0x2938e0(0x1c3)][_0x313264][_0x2938e0(0xa3)]['length'])for(const _0x3a5c08 of this[_0x2938e0(0x1c3)][_0x313264]['output']){_0x3e1126[_0x2938e0(0x9f)]({'keyword':_0x3a5c08,'index':_0x3312d5-_0x3a5c08['length']+(-0x1*0xf3+-0xb*0x25f+0x3*0x903)});}}return _0x3e1126;}}const automatonCache=new Map();async function getAutomatonForChat(_0x501f67){const _0x5b310a=_0x21904b;if(!_0x501f67)return null;if(automatonCache[_0x5b310a(0x1d5)](_0x501f67))return automatonCache[_0x5b310a(0x117)](_0x501f67);try{const _0x2c3067=await db[_0x5b310a(0x1e0)](_0x5b310a(0x93)+_0x5b310a(0x1ab)+_0x5b310a(0x14e)+_0x5b310a(0x1a3)+_0x5b310a(0x86)+_0x5b310a(0x11d)+')',[_0x501f67,'*']),_0x6b1562=(_0x2c3067||[])['map'](_0x513e1a=>String(_0x513e1a[_0x5b310a(0x8d)]||'')[_0x5b310a(0x110)]())[_0x5b310a(0x1f6)](Boolean),_0x2083b7=_0x6b1562[_0x5b310a(0x1f6)](_0x34cdd8=>{const _0xaae6ec=_0x5b310a,_0x555d06=String(_0x34cdd8)['trim']()[_0xaae6ec(0x138)+'e']();if(_0x555d06[_0xaae6ec(0xe5)]('regex:'))return![];if(_0x34cdd8['includes']('*'))return![];return!![];}),_0x44312d=_0x2083b7[_0x5b310a(0xb0)](_0x538f2c=>_0x538f2c['toLowerCas'+'e']()),_0x48057d=new Map();for(let _0x21e5ba=-0x1a4+-0x662+-0x1*-0x806;_0x21e5ba<_0x2083b7['length'];_0x21e5ba++){_0x48057d[_0x5b310a(0x11f)](_0x44312d[_0x21e5ba],_0x2083b7[_0x21e5ba]);}const _0x220ab4=new Aho();if(_0x44312d['length'])_0x220ab4[_0x5b310a(0x132)](_0x44312d);const _0xe048ae={'ac':_0x220ab4,'keywords':_0x44312d,'lowerToOrig':_0x48057d};return automatonCache[_0x5b310a(0x11f)](_0x501f67,_0xe048ae),_0xe048ae;}catch(_0x5ad9df){return warn(_0x5b310a(0x20b)+'getAutomat'+_0x5b310a(0x1da)+_0x5b310a(0xa9)+'\x20'+_0x501f67+':\x20'+(_0x5ad9df?.['message']||_0x5ad9df)),null;}}async function findStoredMatchFromFindings(_0x28e804=[]){const _0x5176b5=_0x21904b;try{const _0x5be77a=await listSudo();if(!Array[_0x5176b5(0x215)](_0x5be77a)||_0x5be77a[_0x5176b5(0x20a)]===0x10*-0x21d+0x1b75+0x65b)return null;const _0x346535=new Set(_0x5be77a['map'](String));for(const _0x26e7ca of _0x28e804||[]){if(!_0x26e7ca||typeof _0x26e7ca[_0x5176b5(0x1c1)]!=='string')continue;const _0x170554=normalizeToJid(_0x26e7ca[_0x5176b5(0x1c1)]);if(_0x170554&&_0x346535['has'](_0x170554))return _0x170554;if(_0x346535['has'](_0x26e7ca[_0x5176b5(0x1c1)]))return _0x26e7ca['jid'];const _0x189cb2=String(_0x26e7ca[_0x5176b5(0x1c1)])[_0x5176b5(0xf8)]('@')[0xe58*0x1+0x16*0xed+-0x22b6][_0x5176b5(0xf8)](':')[-0x207d+-0x2665+0x46e2];if(_0x189cb2)for(const _0x60156c of _0x5be77a){const _0x12b914=String(_0x60156c)[_0x5176b5(0xf8)]('@')[0xa24*0x2+-0xb25+0x1*-0x923];if(_0x12b914&&_0x12b914===_0x189cb2)return _0x60156c;}}return null;}catch(_0x3ffeaf){return warn(_0x5176b5(0x20b)+_0x5176b5(0x16d)+_0x5176b5(0x9e)+'indings\x20er'+_0x5176b5(0x241)+(_0x3ffeaf?.['message']||_0x3ffeaf)),null;}}export async function initialize(_0x122062){const _0x564247=_0x21904b;botRef=_0x122062;if(botRef){if(typeof botRef['sendMessag'+'e']==='function')sendApi=async(_0x344702,_0x353178)=>await botRef['sendMessag'+'e'](_0x344702,_0x353178);else botRef[_0x564247(0x1a1)]&&typeof botRef[_0x564247(0x1a1)][_0x564247(0x1cb)+'e']===_0x564247(0xd5)?sendApi=async(_0x44badd,_0x26dc78)=>await botRef[_0x564247(0x1a1)][_0x564247(0x1cb)+'e'](_0x44badd,_0x26dc78):sendApi=null;}try{await ensureSchema(),info('[gfilter]\x20'+'initialize'+_0x564247(0x12d)+_0x564247(0x1f3)+_0x564247(0xbc)+')');}catch(_0x2f75f9){error(_0x2f75f9,_0x564247(0x20b)+_0x564247(0x23c)+'\x20fatal');throw _0x2f75f9;}}function detectCommandNameFromCmdText(_0x50c2be){const _0x40ca5a=_0x21904b;if(!_0x50c2be)return null;const _0x33283c=_0x50c2be[_0x40ca5a(0x110)]();if(!_0x33283c)return null;return _0x33283c[_0x40ca5a(0xf8)](/\s+/)[-0x27d*-0xd+-0xcc4+-0x1395][_0x40ca5a(0x138)+'e']();}export async function onMessage(_0x29ceb6){const _0x238d46=_0x21904b;try{if(!_0x29ceb6||!_0x29ceb6['key']||!_0x29ceb6[_0x238d46(0x1ba)])return;const _0x71747e=makeDedupeKey(_0x29ceb6);if(!_0x71747e)return;if(isMsgProcessed(_0x71747e))return;markMsgProcessed(_0x71747e);const _0x242aa3=getMessageText(_0x29ceb6);if(!_0x242aa3)return;const _0x50ef0d=_0x29ceb6[_0x238d46(0x153)][_0x238d46(0x22f)],_0x35533b=typeof _0x50ef0d==='string'&&_0x50ef0d['endsWith'](_0x238d46(0x183)),_0x2d35e0=_0x29ceb6[_0x238d46(0x153)]&&(_0x29ceb6[_0x238d46(0x153)][_0x238d46(0xdb)+'t']||_0x29ceb6[_0x238d46(0x153)][_0x238d46(0x116)]||_0x29ceb6['key']['remoteJid'])||'',_0x27260c=(_0x2d35e0||'')[_0x238d46(0xf8)]('@')[0x12ec+-0x830*-0x2+-0xbc4*0x3];let _0x315d29=![];if(_0x35533b)try{_0x315d29=await isadmin(botRef,_0x29ceb6);}catch(_0x45d630){_0x315d29=![];}if(_0x29ceb6['isCommand']){const _0x4b3c3b=typeof _0x29ceb6[_0x238d46(0x167)]===_0x238d46(0x172)&&_0x29ceb6[_0x238d46(0x167)]['trim']()[_0x238d46(0x20a)]?_0x29ceb6[_0x238d46(0x167)][_0x238d46(0x110)]():_0x242aa3[_0x238d46(0x110)](),_0x3463de=detectCommandNameFromCmdText(_0x4b3c3b);if(!_0x3463de)return;if(!_0x3463de[_0x238d46(0xe5)]('g'))return;if(!_0x35533b){const _0x5d0979=Boolean(_0x29ceb6[_0x238d46(0x153)][_0x238d46(0x18d)]);let _0x46e13d=null;if(_0x5d0979){const _0x26808c=getBotJid();!_0x26808c?(warn('[gfilter]\x20'+_0x238d46(0x9a)+_0x238d46(0x20e)+_0x238d46(0x193)+_0x238d46(0x234)+_0x238d46(0x18f)+_0x238d46(0x107)+_0x238d46(0x102)+_0x238d46(0x10e)),_0x46e13d=_0x29ceb6['key']['remoteJid']):_0x46e13d=_0x26808c;}else{let _0x52a9e2=![];try{_0x52a9e2=await isSudo(botRef,_0x29ceb6);}catch(_0x16d2bc){_0x52a9e2=![];}if(!_0x52a9e2)return;const _0x206ca2=userJidFromCtx(_0x29ceb6)||{'findings':[]},_0x26a401=await findStoredMatchFromFindings(_0x206ca2[_0x238d46(0xb7)]||[]);if(!_0x26a401)return;_0x46e13d=_0x26a401;}const _0x536a1e=parseFilterCommandText(_0x4b3c3b||_0x242aa3);if(_0x3463de===_0x238d46(0x1f5)){if(!_0x536a1e||!_0x536a1e[_0x238d46(0x233)][_0x238d46(0x20a)]||!_0x536a1e[_0x238d46(0x1cd)][_0x238d46(0x20a)]){await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0xd7)+_0x238d46(0x16c)+_0x238d46(0x181)+'\x20gfilter\x20<'+_0x238d46(0x12f)+_0x238d46(0xe8)+_0x238d46(0x127)+_0x238d46(0xe6)+_0x238d46(0x11b)+_0x238d46(0x146)+_0x238d46(0xf6)+_0x238d46(0x8b)+'id|all>`\x20t'+_0x238d46(0x1b8)+'\x20target\x20gr'+'oup(s).');return;}let _0x5108b0=[];if(_0x536a1e['gp']){const _0x46f62c=_0x536a1e['gp'][_0x238d46(0x110)]();if(_0x46f62c[_0x238d46(0x138)+'e']()===_0x238d46(0x1e0))_0x5108b0=await _0x18da01['getUniqueJ'+_0x238d46(0x1eb)]();else{const _0x275304=await _0x18da01[_0x238d46(0x10c)+'e'](_0x46f62c);if(_0x275304)_0x5108b0=[_0x275304];else{if(_0x46f62c[_0x238d46(0x8f)]('@'))_0x5108b0=[_0x18da01[_0x238d46(0xea)+_0x238d46(0x125)](_0x46f62c)];else{await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0x17c)+_0x238d46(0xec)+_0x238d46(0x100)+_0x46f62c+(_0x238d46(0x216)+_0x238d46(0x121)+_0x238d46(0x20c)+_0x238d46(0xd0)+_0x238d46(0x118)+_0x238d46(0x23f)));return;}}}}else _0x5108b0=['*'];let _0x1d261d=-0x11d3*0x2+-0x113*-0x1b+0x6a5;for(const _0x207e02 of uniqArray(_0x5108b0)){for(const _0x55cdd9 of _0x536a1e['triggers']){const _0x5a8580=await upsertFilterRow(_0x207e02,_0x55cdd9,_0x536a1e[_0x238d46(0x1cd)],_0x2d35e0||'');if(_0x5a8580)_0x1d261d++;}}await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0x235)+_0x1d261d+(_0x238d46(0x221)+_0x238d46(0x174))+(_0x5108b0[_0x238d46(0x20a)]===0x8f5*0x3+0xf*-0x1c4+-0x62?_0x5108b0[0x1*-0x1b2e+-0x22*0x5e+0x27aa]:_0x238d46(0x1a0)+_0x238d46(0x213)));return;}if(_0x3463de==='glistfilte'+'r'){const _0x52083d=(parseFilterCommandText(_0x4b3c3b||_0x242aa3)||{})['gp'],_0x4191c1=_0x52083d?_0x52083d[_0x238d46(0x138)+'e']()===_0x238d46(0x1e0)?'*':await _0x18da01[_0x238d46(0x10c)+'e'](_0x52083d)||_0x18da01[_0x238d46(0xea)+'oUserJid'](_0x52083d):'*',_0x182be7=await listTriggersForChat(_0x4191c1);await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0x20b)+_0x182be7['length']+('\x20filters\x20f'+_0x238d46(0x8e))+(_0x4191c1==='*'?'GLOBAL\x20(al'+_0x238d46(0x123):_0x4191c1));if(!_0x182be7[_0x238d46(0x20a)])return;let _0x50113d='';for(const _0x33ad03 of _0x182be7){const _0x3307b3='â€¢\x20'+_0x33ad03+'\x0a';(_0x50113d+_0x3307b3)[_0x238d46(0x20a)]>-0x133*0xd+0x10f9+-0x2*-0x23d&&(await sendText(_0x29ceb6,_0x46e13d,_0x50113d[_0x238d46(0x110)]()),_0x50113d=''),_0x50113d+=_0x3307b3;}if(_0x50113d['trim']())await sendText(_0x29ceb6,_0x46e13d,_0x50113d['trim']());return;}if(_0x3463de==='gdelfilter'||_0x3463de===_0x238d46(0x98)+'s'||_0x3463de==='gdelf'){const _0x1373ad=(_0x242aa3||'')[_0x238d46(0xf8)](/\r?\n/)[_0x238d46(0xb0)](_0x3c4dc3=>_0x3c4dc3[_0x238d46(0x110)]());let _0x3f911a=null;if(_0x1373ad[_0x238d46(0x20a)]>0xb3f*0x1+-0xa44*-0x3+-0x2a0a&&!_0x1373ad[0x1*-0x15c5+-0x1caf*0x1+0x3275][_0x238d46(0x138)+'e']()[_0x238d46(0xe5)]('gp'))_0x3f911a=_0x1373ad[-0x1*-0xef2+-0x1*-0x1f85+-0x2e76];else{const _0x59075=_0x4b3c3b[_0x238d46(0x110)]()[_0x238d46(0xf8)](/\s+/);_0x59075[_0x238d46(0x250)](),_0x3f911a=_0x59075[_0x238d46(0x173)]('\x20')['trim']();}const _0x29b920=_0x1373ad['slice'](0x2e2*-0x4+0x42*-0x83+0x2d4f)['find'](_0x4538a9=>/^gp[:\s]/i['test'](_0x4538a9));let _0xcecbe1=_0x29b920?_0x29b920[_0x238d46(0xaf)](/^gp[:\s]+/i,'')['trim']():null;const _0x5b80c4=(_0x3f911a||'')[_0x238d46(0xf8)](',')[_0x238d46(0xb0)](_0xcfc7e0=>_0xcfc7e0[_0x238d46(0x110)]())['filter'](Boolean);if(!_0x5b80c4[_0x238d46(0x20a)]){await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0x1c5)+_0x238d46(0x1d3)+_0x238d46(0x105)+'1,trigger2'+'\x20[gp:\x20<ali'+_0x238d46(0x1c2)+_0x238d46(0xa2)+_0x238d46(0x1d7)+_0x238d46(0x128)+_0x238d46(0xf0)+_0x238d46(0xe0)+')');return;}if(_0x5b80c4[_0x238d46(0x20a)]===0x1*0x141b+-0x1385*-0x2+-0x3b24&&_0x5b80c4[-0x2b*0x47+-0x26c2+0x32af][_0x238d46(0x138)+'e']()===_0x238d46(0x1e0))try{const _0x27fb12=await db[_0x238d46(0x22a)]('DELETE\x20FRO'+'M\x20filters'),_0x594b50=_0x27fb12?.[_0x238d46(0xa8)]||-0xfc2+0xfda+-0x18;try{automatonCache[_0x238d46(0xc9)]();}catch(_0x2d7661){}await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0x1d2)+_0x238d46(0x157)+_0x238d46(0x179)+'ase.\x20Rows\x20'+'removed:\x20'+_0x594b50);return;}catch(_0x1df2cd){await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0xab)+'delete\x20all'+_0x238d46(0xee)+(_0x1df2cd?.[_0x238d46(0x1ba)]||_0x1df2cd));return;}let _0x232983=[];if(_0xcecbe1){if(_0xcecbe1[_0x238d46(0x138)+'e']()===_0x238d46(0x1e0))_0x232983=await _0x18da01[_0x238d46(0x1a9)+_0x238d46(0x1eb)]();else{const _0x2347a0=await _0x18da01[_0x238d46(0x10c)+'e'](_0xcecbe1);if(_0x2347a0)_0x232983=[_0x2347a0];else{if(_0xcecbe1[_0x238d46(0x8f)]('@'))_0x232983=[_0x18da01['normalizeT'+_0x238d46(0x125)](_0xcecbe1)];else{await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0x17c)+_0x238d46(0xec)+_0x238d46(0x100)+_0xcecbe1+'\x22.');return;}}}}else _0x232983=['*'];let _0x2fef29=-0x1*0x1e21+-0x51e*0x2+-0x1*-0x285d;for(const _0x3d064d of uniqArray(_0x232983)){const _0x1c0faa=await deleteFilters(_0x3d064d,_0x5b80c4);_0x2fef29+=_0x1c0faa;}await sendText(_0x29ceb6,_0x46e13d,_0x238d46(0x240)+_0x2fef29+(_0x238d46(0x229)+'tries\x20from'+'\x20')+(_0x232983[_0x238d46(0x20a)]===-0x1*0x1d35+0x2*-0x783+0x2c3c?_0x232983[-0x633+0x1f3*-0xb+0x1ba4]:_0x238d46(0x1a0)+_0x238d46(0x213)));return;}return;}if(_0x35533b){if(!_0x315d29)return;const _0xbcfd79=typeof _0x29ceb6['text']==='string'&&_0x29ceb6[_0x238d46(0x167)][_0x238d46(0x110)]()[_0x238d46(0x20a)]?_0x29ceb6[_0x238d46(0x167)][_0x238d46(0x110)]():_0x242aa3['trim'](),_0xc045d4=detectCommandNameFromCmdText(_0xbcfd79);if(!_0xc045d4)return;let _0x497c8e;try{_0x497c8e=await getDefault(_0x27260c)[_0x238d46(0x18a)](()=>null);}catch(_0x2a7922){_0x497c8e=null;}if(!_0x497c8e||Array['isArray'](_0x497c8e)&&_0x497c8e[_0x238d46(0x20a)]===-0x2*-0x54b+0x22d*-0x2+-0x63c){await sendText(_0x29ceb6,_0x50ef0d,'Could\x20not\x20'+_0x238d46(0x207)+_0x238d46(0x21b)+_0x238d46(0x1e9)+_0x238d46(0xd9)+'setdefault'+_0x238d46(0x136));return;}const _0x2e9aef=Array['isArray'](_0x497c8e)?_0x497c8e:[_0x497c8e];let _0x5916c1=[];for(const _0x10e9aa of _0x2e9aef){try{const _0x57efd6=await getConnection(_0x10e9aa)[_0x238d46(0x18a)](()=>null);if(Array[_0x238d46(0x215)](_0x57efd6))_0x5916c1['push'](..._0x57efd6);else{if(_0x57efd6)_0x5916c1[_0x238d46(0x9f)](String(_0x57efd6));}}catch(_0x2e13b9){}}_0x5916c1=uniqArray(_0x5916c1);if(!_0x5916c1['length']){await sendText(_0x29ceb6,_0x50ef0d,_0x238d46(0xef)+'resolve\x20yo'+_0x238d46(0x21b)+_0x238d46(0x1e9)+'n(s):\x20'+_0x2e9aef['join'](',\x20')+(_0x238d46(0x141)+_0x238d46(0x10b)+'efault\x20val'+_0x238d46(0xe2)));return;}if(_0xc045d4==='gfilter'){const _0x517268=parseFilterCommandText(_0xbcfd79||_0x242aa3);if(!_0x517268||!_0x517268[_0x238d46(0x233)][_0x238d46(0x20a)]||!_0x517268[_0x238d46(0x1cd)]['length']){await sendText(_0x29ceb6,_0x50ef0d,_0x238d46(0x203)+_0x238d46(0x180)+_0x238d46(0x1b1)+_0x238d46(0x1ca)+_0x238d46(0xf4)+_0x238d46(0x15b)+_0x238d46(0x10f)+'2\x0aOptional'+'ly\x20include'+_0x238d46(0xfd)+'p-jid|alia'+_0x238d46(0xfb));return;}if(_0x517268['gp']){let _0x2e246d=[];const _0x5e2f6b=_0x517268['gp']['trim']();if(_0x5e2f6b['toLowerCas'+'e']()===_0x238d46(0x1e0))_0x2e246d=await _0x18da01[_0x238d46(0x1a9)+_0x238d46(0x1eb)]();else{const _0x50141c=await _0x18da01[_0x238d46(0x10c)+'e'](_0x5e2f6b);if(_0x50141c)_0x2e246d=[_0x50141c];else{if(_0x5e2f6b[_0x238d46(0x8f)]('@'))_0x2e246d=[_0x18da01['normalizeT'+'oUserJid'](_0x5e2f6b)];else{await sendText(_0x29ceb6,_0x50ef0d,'Unknown\x20gp'+_0x238d46(0xec)+_0x238d46(0x100)+_0x5e2f6b+'\x22.');return;}}}let _0x2ffd51=0x129a+-0xd3e+-0x55c;for(const _0x1dbad2 of uniqArray(_0x2e246d)){for(const _0x157993 of _0x517268[_0x238d46(0x233)]){const _0x1837a5=await upsertFilterRow(_0x1dbad2,_0x157993,_0x517268[_0x238d46(0x1cd)],_0x2d35e0||'');if(_0x1837a5)_0x2ffd51++;}}await sendText(_0x29ceb6,_0x50ef0d,_0x238d46(0x235)+_0x2ffd51+(_0x238d46(0x221)+_0x238d46(0x174))+(_0x2e246d[_0x238d46(0x20a)]===-0x1716+0x14e*0xb+0x8bd*0x1?_0x2e246d[-0x157+-0x24ad+0x2604]:_0x238d46(0x1a0)+_0x238d46(0x213)));return;}let _0x58709b=-0x224f*-0x1+-0x115e+-0x10f1;for(const _0x3c79b8 of _0x5916c1){for(const _0xc68f7a of _0x517268['triggers']){const _0x4ef038=await upsertFilterRow(_0x3c79b8,_0xc68f7a,_0x517268['responses'],_0x2d35e0||'');if(_0x4ef038)_0x58709b++;}}await sendText(_0x29ceb6,_0x50ef0d,_0x238d46(0x235)+_0x58709b+(_0x238d46(0x229)+'tries\x20to\x20y'+_0x238d46(0xcb)+_0x238d46(0x1fa)+_0x238d46(0x14c))+_0x5916c1[_0x238d46(0x173)](',\x20'));return;}if(_0xc045d4===_0x238d46(0x1dc)+'r'){const _0xdba786=new Set();for(const _0x19be9f of _0x5916c1){const _0x593ee1=await listTriggersForChat(_0x19be9f);for(const _0x396765 of _0x593ee1)_0xdba786[_0x238d46(0x189)](_0x396765);}const _0x2ee92b=await listTriggersForChat('*');for(const _0x3e46dd of _0x2ee92b||[])_0xdba786['add'](_0x3e46dd);const _0x36fab5=Array[_0x238d46(0x116)](_0xdba786)['sort']();await sendText(_0x29ceb6,_0x50ef0d,'[gfilter]\x20'+_0x238d46(0x1c4)+_0x36fab5[_0x238d46(0x20a)]+(_0x238d46(0xfe)+'or\x20your\x20de'+_0x238d46(0x1e8)+_0x238d46(0x113)+_0x238d46(0x1c9)));if(!_0x36fab5[_0x238d46(0x20a)])return;let _0x34a6fb='';for(const _0x4861f1 of _0x36fab5){const _0x5d4cc5='â€¢\x20'+_0x4861f1+'\x0a';(_0x34a6fb+_0x5d4cc5)[_0x238d46(0x20a)]>0x155b+-0x1*-0x1bae+-0x2b2d&&(await sendText(_0x29ceb6,_0x50ef0d,_0x34a6fb[_0x238d46(0x110)]()),_0x34a6fb=''),_0x34a6fb+=_0x5d4cc5;}if(_0x34a6fb['trim']())await sendText(_0x29ceb6,_0x50ef0d,_0x34a6fb[_0x238d46(0x110)]());return;}if(_0xc045d4===_0x238d46(0x98)||_0xc045d4===_0x238d46(0x98)+'s'||_0xc045d4===_0x238d46(0x147)){const _0x5108d0=(_0x242aa3||'')[_0x238d46(0xf8)](/\r?\n/)['map'](_0x256bc8=>_0x256bc8['trim']());let _0x378569=null;if(_0x5108d0['length']>-0xc9*-0x16+0x1c1f+0x2d64*-0x1&&!_0x5108d0[0x1707+-0x16bd+0x49*-0x1][_0x238d46(0x138)+'e']()[_0x238d46(0xe5)]('gp'))_0x378569=_0x5108d0[0x1*0x6af+0x5*-0xc5+0x19*-0x1d];else{const _0x5d81c3=(_0xbcfd79||_0x242aa3)[_0x238d46(0x110)]()[_0x238d46(0xf8)](/\s+/);_0x5d81c3[_0x238d46(0x250)](),_0x378569=_0x5d81c3[_0x238d46(0x173)]('\x20')[_0x238d46(0x110)]();}const _0x1ec00e=_0x5108d0[_0x238d46(0x19f)](0xa*-0x97+0x3*0x22c+-0x9d)['find'](_0x42f74c=>/^gp[:\s]/i[_0x238d46(0x12b)](_0x42f74c));let _0x474c1a=_0x1ec00e?_0x1ec00e[_0x238d46(0xaf)](/^gp[:\s]+/i,'')[_0x238d46(0x110)]():null;const _0x5aad80=(_0x378569||'')['split'](',')[_0x238d46(0xb0)](_0x1af489=>_0x1af489['trim']())['filter'](Boolean);if(!_0x5aad80['length']){await sendText(_0x29ceb6,_0x50ef0d,'Usage:\x20gde'+_0x238d46(0x21f)+_0x238d46(0x1e2)+_0x238d46(0x1a4)+_0x238d46(0x201)+_0x238d46(0x1fe)+_0x238d46(0x15a)+_0x238d46(0x159)+_0x238d46(0xcd)+_0x238d46(0x137)+_0x238d46(0x16e)+_0x238d46(0x16b));return;}if(_0x5aad80[_0x238d46(0x20a)]===-0xfe8+-0x32f*-0x5+-0x2&&_0x5aad80[-0x67+0x27*-0x2f+0x790][_0x238d46(0x138)+'e']()===_0x238d46(0x1e0))try{const _0x5ac816=await db['run']('DELETE\x20FRO'+'M\x20filters'),_0x2df1e3=_0x5ac816?.[_0x238d46(0xa8)]||0xfa+-0x16f*-0x1+-0x269;try{automatonCache['clear']();}catch(_0x6b57be){}await sendText(_0x29ceb6,_0x50ef0d,'Deleted\x20AL'+'L\x20filters\x20'+'from\x20datab'+'ase.\x20Rows\x20'+_0x238d46(0xc4)+_0x2df1e3);return;}catch(_0x4f53d8){await sendText(_0x29ceb6,_0x50ef0d,_0x238d46(0xab)+_0x238d46(0x177)+'\x20filters:\x20'+(_0x4f53d8?.[_0x238d46(0x1ba)]||_0x4f53d8));return;}if(_0x474c1a){let _0x16bc28=[];if(_0x474c1a[_0x238d46(0x138)+'e']()===_0x238d46(0x1e0))_0x16bc28=await _0x18da01[_0x238d46(0x1a9)+_0x238d46(0x1eb)]();else{const _0x353dba=await _0x18da01[_0x238d46(0x10c)+'e'](_0x474c1a);if(_0x353dba)_0x16bc28=[_0x353dba];else{if(_0x474c1a['includes']('@'))_0x16bc28=[_0x18da01['normalizeT'+'oUserJid'](_0x474c1a)];else{await sendText(_0x29ceb6,_0x50ef0d,_0x238d46(0x17c)+_0x238d46(0xec)+_0x238d46(0x100)+_0x474c1a+'\x22.');return;}}}let _0x335426=-0xb6e+-0x2*0x86b+0x1c44;for(const _0xcd4249 of uniqArray(_0x16bc28)){const _0x1a244d=await deleteFilters(_0xcd4249,_0x5aad80);_0x335426+=_0x1a244d;}await sendText(_0x29ceb6,_0x50ef0d,_0x238d46(0x240)+_0x335426+('\x20filters\x20f'+_0x238d46(0x1b0))+(_0x16bc28[_0x238d46(0x20a)]===-0xf7c+0x1*0xbd9+-0x4*-0xe9?_0x16bc28[-0x2e8+0x93e+-0x656]:'multiple\x20t'+'argets'));return;}else{let _0x2379c0=0x2e2+-0xf09*0x1+-0x1*-0xc27;for(const _0x3bc250 of _0x5916c1){const _0x391bf8=await deleteFilters(_0x3bc250,_0x5aad80);_0x2379c0+=_0x391bf8;}await sendText(_0x29ceb6,_0x50ef0d,_0x238d46(0x240)+_0x2379c0+(_0x238d46(0x229)+'tries\x20acro'+_0x238d46(0x217)+_0x238d46(0x1e8)+_0x238d46(0x209)+'\x20')+_0x5916c1[_0x238d46(0x173)](',\x20'));return;}}return;}}if(_0x35533b){if(_0x29ceb6[_0x238d46(0x153)][_0x238d46(0x18d)])return;const _0x3bd0d7=_0x50ef0d,_0x54100c=getMessageText(_0x29ceb6);if(!_0x54100c)return;const _0x260bc8=String(_0x54100c||''),_0x596a9c=await db[_0x238d46(0x1e0)](_0x238d46(0x93)+_0x238d46(0x1ab)+_0x238d46(0x14e)+_0x238d46(0x1a3)+_0x238d46(0x86)+'d\x20IN\x20(?,\x20?'+')',[_0x3bd0d7,'*']);if(!_0x596a9c||_0x596a9c[_0x238d46(0x20a)]===-0xacc*-0x1+-0x496+-0x636)return;const _0x1149a1=(_0x596a9c||[])[_0x238d46(0xb0)](_0x2c8dc9=>String(_0x2c8dc9[_0x238d46(0x8d)]||'')['trim']())[_0x238d46(0x1f6)](Boolean),_0xde306=[],_0x3eabc3=[],_0x2e478d=[];for(const _0x438ae8 of _0x1149a1){const _0xda675f=String(_0x438ae8)[_0x238d46(0x110)]()[_0x238d46(0x138)+'e']();if(_0xda675f[_0x238d46(0xe5)](_0x238d46(0x1d9))){_0x2e478d[_0x238d46(0x9f)](_0x438ae8[_0x238d46(0xdc)](-0x1b23+-0x1*0x5af+0x836*0x4));continue;}if(_0x438ae8['includes']('*')){_0x3eabc3[_0x238d46(0x9f)](_0x438ae8);continue;}_0xde306[_0x238d46(0x9f)](_0x438ae8);}const _0x7cd15a=new Set(),_0x265ff4=getConfig()||{},_0x2fd29e=_0x265ff4[_0x238d46(0x1ee)]&&typeof _0x265ff4[_0x238d46(0x1ee)]==='object'?_0x265ff4[_0x238d46(0x1ee)]:{},_0x5ee392=(_0x2fd29e[_0x238d46(0xb6)+'ODE']||_0x238d46(0x219))[_0x238d46(0x138)+'e']();let _0x2db252=null;if(_0xde306['length']>-0x1d2+0x248*-0xd+0x1f7a)try{const _0x5d196e=await getAutomatonForChat(_0x3bd0d7);if(_0x5d196e&&_0x5d196e['ac']&&_0x5d196e['keywords']&&_0x5d196e[_0x238d46(0x11a)][_0x238d46(0x20a)]){const _0xf3e6ff=_0x260bc8[_0x238d46(0x138)+'e'](),_0x137c77=_0x5d196e['ac'][_0x238d46(0x225)](_0xf3e6ff);for(const _0x56b2ff of _0x137c77){const _0x5d032e=_0x56b2ff[_0x238d46(0x112)],_0x1db93d=_0x56b2ff[_0x238d46(0xfc)],_0x3d02a2=_0x1db93d+_0x5d032e['length'],_0x28f340=_0x1db93d===0xcc2+-0x1d99+0x10d7||!/\w/[_0x238d46(0x12b)](_0xf3e6ff[_0x1db93d-(-0x12bf*-0x1+0x14a3+-0x2761)]),_0x4a9ea9=_0x3d02a2===_0xf3e6ff[_0x238d46(0x20a)]||!/\w/[_0x238d46(0x12b)](_0xf3e6ff[_0x3d02a2]);if(_0x28f340&&_0x4a9ea9){const _0x40d26a=_0x5d196e[_0x238d46(0x13c)+'g'][_0x238d46(0x117)](_0x5d032e)||null;if(_0x40d26a){_0x2db252=_0x40d26a;break;}}}}else for(const _0x58d5e9 of _0xde306){const _0x18f6ec=new RegExp('\x5cb'+escapeRegex(String(_0x58d5e9))+'\x5cb','i');if(_0x18f6ec[_0x238d46(0x12b)](_0x260bc8)){_0x2db252=_0x58d5e9;break;}}}catch(_0x2d361f){warn(_0x238d46(0x20b)+_0x238d46(0xa0)+_0x238d46(0x194)+_0x238d46(0x11c)+(_0x2d361f?.['message']||_0x2d361f));for(const _0x5b98c9 of _0xde306){try{const _0x3b8695=new RegExp('\x5cb'+escapeRegex(String(_0x5b98c9))+'\x5cb','i');if(_0x3b8695[_0x238d46(0x12b)](_0x260bc8)){_0x2db252=_0x5b98c9;break;}}catch(_0x3658b8){}}}if(!_0x2db252&&_0x3eabc3['length']>-0x6e3*0x2+-0x18b4+0x2*0x133d)for(const _0x50cbc6 of _0x3eabc3){try{const _0x53234a=new RegExp(wildcardToRegexPattern(_0x50cbc6),'i');if(_0x53234a['test'](_0x260bc8)){_0x2db252=_0x50cbc6;break;}}catch(_0x1424ce){if(_0x260bc8['toLowerCas'+'e']()['includes'](_0x50cbc6[_0x238d46(0xaf)](/\*/g,'')[_0x238d46(0x138)+'e']())){_0x2db252=_0x50cbc6;break;}}}if(!_0x2db252&&_0x2e478d[_0x238d46(0x20a)]>-0xc6e+-0x1*-0x1c10+0x2e*-0x57)for(const _0x92c9a7 of _0x2e478d){try{const _0x99c5c5=new RegExp(_0x92c9a7,'i');if(_0x99c5c5[_0x238d46(0x12b)](_0x260bc8)){_0x2db252=_0x238d46(0x1d9)+_0x92c9a7;break;}}catch(_0x3db3d5){warn(_0x238d46(0x20b)+'invalid\x20st'+_0x238d46(0x115)+'\x20for\x20chat\x20'+_0x3bd0d7+':\x20\x22'+_0x92c9a7+_0x238d46(0x223)+(_0x3db3d5?.['message']||_0x3db3d5));}}if(_0x2db252){let _0x390473=await pickResponseAndAdvance(_0x3bd0d7,_0x2db252,_0x5ee392);if(!_0x390473)_0x390473=await pickResponseAndAdvance('*',_0x2db252,_0x5ee392);if(!_0x390473)return;if(_0x7cd15a['has'](_0x390473))return;await sendText(_0x29ceb6,_0x3bd0d7,_0x390473),_0x7cd15a[_0x238d46(0x189)](_0x390473);}}}catch(_0xd25933){error(_0xd25933,'[gfilter]\x20'+_0x238d46(0x191)+_0x238d46(0x241)+(_0xd25933?.[_0x238d46(0x1ba)]||_0xd25933));}}export async function cleanup(){const _0x4dab37=_0x21904b;for(const _0x446aaa of processedMessageKeys['values']())try{clearTimeout(_0x446aaa);}catch(_0x4f8893){}processedMessageKeys[_0x4dab37(0xc9)](),automatonCache[_0x4dab37(0xc9)](),botRef=null,sendApi=null,info(_0x4dab37(0x20b)+_0x4dab37(0x1dd));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};