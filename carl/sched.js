const _0x35766f=_0x1b24;(function(_0x29678c,_0x73a771){const _0x513bb8=_0x1b24,_0x4fe35d=_0x29678c();while(!![]){try{const _0x2dc21a=parseInt(_0x513bb8(0x397))/(-0x5*0x771+0x1996*-0x1+-0x2*-0x1f66)+parseInt(_0x513bb8(0x257))/(0x2*0x56d+0x1*0x2365+-0x2e3d)+parseInt(_0x513bb8(0x38f))/(-0x28*0xc7+-0x245*0xf+0x4126)*(parseInt(_0x513bb8(0x3ce))/(0xca7*0x3+0x1697+-0x3c88))+-parseInt(_0x513bb8(0x1e4))/(0xb7e*0x3+0x8dd+-0x2b52)*(parseInt(_0x513bb8(0x37d))/(-0x2*-0x3f5+-0xc73*-0x1+0x29*-0x7f))+parseInt(_0x513bb8(0x372))/(-0x60c+-0x5c*0x2+0x2f*0x25)+-parseInt(_0x513bb8(0x394))/(-0x13ae+0x1*-0x10+0x13c6)+parseInt(_0x513bb8(0x2f3))/(0x1ec9+-0x1*0x7c5+-0x16fb)*(-parseInt(_0x513bb8(0x34e))/(-0x20e*0xc+0x1d38+-0x243*0x2));if(_0x2dc21a===_0x73a771)break;else _0x4fe35d['push'](_0x4fe35d['shift']());}catch(_0x2b2fd1){_0x4fe35d['push'](_0x4fe35d['shift']());}}}(_0x4fc8,0x17183c+-0xbf6ee+-0x11a1f*-0x2));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';function _0x1b24(_0x4b8f64,_0x48848c){const _0x4ba636=_0x4fc8();return _0x1b24=function(_0x2db9cd,_0x5dc243){_0x2db9cd=_0x2db9cd-(-0x16f1*0x1+0x2*-0x714+0x26d0);let _0x5e4f89=_0x4ba636[_0x2db9cd];return _0x5e4f89;},_0x1b24(_0x4b8f64,_0x48848c);}import*as _0x1ebf58 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';export const name=_0x35766f(0x305);export const version=_0x35766f(0x3a6);export const priority=-0x67*0x4+0x1*0x25bf+-0x23ce*0x1;export const commands=['sched',_0x35766f(0x3ff)];export const configKeys=[_0x35766f(0x2f4)+_0x35766f(0x34f)+_0x35766f(0x3aa),_0x35766f(0x42f)+_0x35766f(0x45f)+'NE',_0x35766f(0x304)+_0x35766f(0x390),'SCHED_INIT'+_0x35766f(0x3fa)+_0x35766f(0x308)];let botRef=null,sendApi=null,schedulerIntervalHandle=null,executorRunning=![],CHECK_INTERVAL_MS=(0x1b07+0x9bd*0x1+0x2488*-0x1)*(0x19f8+-0x4af*-0x3+-0x241d),DEFAULT_TIMEZONE=_0x35766f(0x229)+'robi',SEND_RETRIES=-0x16fe+-0x130d+0xe*0x301,INITIAL_BACKOFF_MS=0x1455+-0x70b*-0x4+-0x2bd*0x11;const MAX_DB_ATTEMPTS=0x1*0x2196+-0x25c4+0x431*0x1;function ensureArray(_0x1ccb36){if(!_0x1ccb36)return[];if(Array['isArray'](_0x1ccb36))return _0x1ccb36;return[_0x1ccb36];}function uniqArray(_0x4255cb){const _0x2fa255=_0x35766f,_0x5d96ad=new Set(),_0xa49dac=[];for(const _0x30e622 of _0x4255cb||[]){const _0x241936=String(_0x30e622||'')['trim']();if(!_0x241936)continue;!_0x5d96ad[_0x2fa255(0x235)](_0x241936)&&(_0x5d96ad[_0x2fa255(0x213)](_0x241936),_0xa49dac[_0x2fa255(0x208)](_0x241936));}return _0xa49dac;}async function tableExists(_0x4ed43b){const _0x12805d=_0x35766f;try{const _0x559c1d=await db[_0x12805d(0x3db)](_0x12805d(0x20b)+_0x12805d(0x37c)+_0x12805d(0x2b6)+_0x12805d(0x47a)+_0x12805d(0x1d8)+'AND\x20name=?',[_0x4ed43b]);return!!_0x559c1d;}catch(_0x26ec41){return warn(_0x12805d(0x248)+_0x12805d(0x2fc)+'error:\x20'+(_0x26ec41?.[_0x12805d(0x2ce)]||_0x26ec41)),![];}}function _0x4fc8(){const _0x2832f3=['SCHED_INIT','empt\x20#','dules\x20tabl','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','help','8806378VksmfH','lizeExisti','anager\x20use','ctReply','\x20time=','\x5c$&','time\x20TEXT,','all\x20or\x20a\x20g','\x20error:\x20','Y\x20id\x20ASC','e\x20FROM\x20sql','1428IUWyKh','LUES\x20(?,\x20?','s):\x20',',\x20?,\x20?,\x20?,','M\x20schedule','\x20daily,\x20`n','\x20\x20\x20\x20freque','ed\x20add*\x20`<','o\x20one-off\x20','toLocaleSt','[sched]\x20id','g\x20error:\x20','ftime(\x27%s\x27','\x20\x20\x20);\x0a\x20\x20\x20\x20',',2,3\x20OR\x20sc','not\x20found','LE\x20IF\x20NOT\x20','ded\x20send_a','635223UIDyYV','_RETRIES','\x0a);','for\x20','-DDTHH:mm>','85208KwOMxe','led\x20entrie','all','1682839UEGtmf','ttonId','ates)','\x20failed\x20de','r_jid\x20TEXT','LT\x201,\x0a\x20\x20\x20\x20','ge.\x0a\x0a>\x20*sc','there\x0amore',',\x27now\x27))','quency.','[sched]\x20re','E\x20IF\x20NOT\x20E','leByDBId\x20e','livery\x20per','TZ=','2.4.0','d\x20time\x20for','\x0a\x20\x20\x20\x20\x20\x20\x20VA','\x20at\x20','_MS','parse\x20new\x20','set','\x20or\x20on\x20nex','dules;','rved\x20-\x20re-','nnection.u','requested\x20','KEY\x20AUTOIN','LT\x20\x27daily\x27','hedules.\x20E','s\x20WHERE\x20id','keys','hat_jid);','ge:\x20sched\x20','status','able\x20a\x20sch','m\x20error\x20fo','\x20->\x20','le*\x20`<numb','stSchedule','led:\x20','value','ying.','fter\x20time\x20','enable\x20a\x20p','lastID','T\x20(strftim','toLowerCas','|jid|all>','\x20?,\x20?,\x20?)','string','at_jid\x20=\x20?','function','nd\x20attempt','d|all>\x20inl','28mTbFSH','alias','s/days/min','sage...>`\x0a','ncy\x20TEXT,\x0a','les\x20for\x20to','ted\x20target','ecutorTick','replace','d\x20delete\x201','sForChat\x20e','ple\x20schedu','ed\x20delete\x20','get','eign_keys\x20','trim','xtMessage','ed\x20','k\x20failed','[sched]\x20ha','STS\x20schedu','daily','jid','body','1\x20daily,\x20n','leFields\x20e','Unsupporte','CREMENT,\x0a\x20','eated\x20cano','[sched]\x20fi','update\x20ena','all\x20schedu','[sched]\x20ho','[sched]\x20DB','\x20\x20\x20\x20\x20last_','onnection(','tChatTimez','\x20\x20\x20\x20\x20creat','day_of_mon','indexOf','hat\x20error:','2\x20days,\x20et','nabled\x20INT','GER\x20DEFAUL','IAL_BACKOF','ewlines\x20pr','rate','ault.','quency,\x20ti','schedule','s\x20found\x20fo','db\x20delete\x20','one\x20error:','ection\x20upd','e\x20for\x20','schedules_','owing\x20line','\x20\x20\x20\x20send_a','m>\x20gp:<ali','s):\x0a','group/defa','UPDATE\x20sch','INSERT\x20INT','\x20<number>\x20','now','EGER,\x0a\x20\x20\x20\x20','finalize','gp:<alias|','N\x20hours/da','<number|nu','\x20frequency','REATE\x20TABL','room','(id:','unknown','IF\x20NOT\x20EXI','isCommand','d\x20removed\x20','\x20made.','nd_at,\x20fre','\x20\x20\x20timezon','ndler\x20erro','ed\x20edit*\x20`','ys/minutes',')\x20id:','e-off\x20id=','TEXT\x20NOT\x20N','T,\x0a\x20\x20\x20\x20\x20\x20\x20','\x20scheduler','ommandGrou','itialized\x20','@g.us','oss\x20reques','efaults.','gister\x20man','No\x20valid\x20i','hed\x20freque','SCHED_DEFA','[sched]\x20No','text','d_at)\x20VALU','filter','ttempts\x20co','exec','time_at','tReloadCon','[sched]\x20up','p\x20error:\x20','=2\x20every\x202','ration\x20fai','ler_settin',')\x20VALUES\x20(','t\x20normaliz','):\x0a\x0a','tTableColu','seMessage','nce*\x20`<HH:','ommandPM\x20e','every_n_da','ine\x20when\x20m','floor','\x20days,\x20etc','Failed\x20to\x20','s\x20failed:\x20','dScheduleR','isNaN','from','match','once','les','vided.\x20Usa','p:<alias|j','abled\x20INTE','chat_jid\x20=','\x20ensure\x20fa','test','INTEGER\x20DE','oss\x20your\x20d','ne\x20TEXT,\x0a\x20','livered\x20on','\x20\x20\x20\x20enable','isValid','\x0a\x20\x20\x20\x20\x20\x20\x20\x20l','delete:\x20','isArray','ULT_TIMEZO','EFAULT\x20\x27da','toISO','caption','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','eator_jid\x20','db_failed','every','fromMillis','uled\x20messa','INTEGER\x20PR','sched\x20enab','gned\x20to\x20mi','dule.',':mm|in\x20N\x20h','utor\x20error','ias|jid|al','shed:\x20inte','mber,numbe','chat_id','enable','d\x20for\x20conn','[sched]\x20mi','nd_attempt','send_attem','E\x20schedule','[sched]\x20ge','\x20WHERE\x20typ','utes>\x20<mes','t_jid,\x20mes','empts\x20reac','failed','mn:\x20','w\x27))\x0a\x20\x20\x20\x20\x20','at_jid)\x20DO','ys]`\x20`<mes','able\x20(expl','\x20id\x20ASC','ime','\x20(chat_jid','sched.init','it.','eated\x20sche','n(s).\x20Set\x20','tReload\x20ha','d\x20send_att','toMillis','o\x20recurrin','\x20cycle.','es.\x0a\x0a>\x20*sc','send_at','ek:','ncy*\x20`<num','yes','one-off\x20fo','s\x20WHERE\x20ch','conversati','\x20but\x20faile','\x20the\x20time\x20','r\x20id=','Could\x20not\x20','lumn','as|jid|all','e\x20error\x20fo','ys]\x20<messa','tempt\x20INTE','creator','backup_','not\x20availa','s*\x0a\x0a>\x20*sch','\x20WHERE\x20id\x20','length','ded\x20schedu','ULT\x200,\x0a\x20\x20\x20','zoneName','rror:\x20','manently\x20(','Message\x20er',':\x20\x22','update\x20fre','mat\x20for\x20ed','e=\x27table\x27\x20','freq','map','\x20\x20\x20\x20\x20\x20\x20\x20ti','attempts,\x20','ENT','No\x20changes','plus','\x20\x20\x20\x20\x20\x20\x20cha','=2`\x20every\x20','setZone','solving\x20co','32525RDonRN','r_settings','[sched]\x20de','[sched]\x20li','bled\x20state','XISTS\x20sche','\x0amsg:\x0a','CREATE\x20IND','ed\x20once\x20<H','mMe)','one-off\x20id','EGER\x20DEFAU','nical\x20sche','eanup\x20erro','eserved.\x0a\x0a','last_sent','ime\x20inline','delete\x201\x202','\x20done;\x20sen','sage,\x20time','sendat','enabled','\x20failed:\x20','\x20target(s)',',\x20time,\x20se','data','HH:mm\x20|\x20YY','[sched]\x20is','H:mm>\x20[Nda','anaging\x20sc','\x22.\x20Use\x20gp:','hasSame','disabled\x20m','startOf','tchFromFin','le_info(','push','roup\x20JID.','created_by','SELECT\x20nam','PRAGMA\x20tab','\x20default\x20c','[sched]\x20co','sent_at','\x20\x20\x20\x20\x20\x20\x20\x20cr','ed,\x20schedu','nfig\x20refre','add','unrecovera','[sched]\x20Fi','n\x20follow\x20t','cy\x20<number','e\x20#','singleSele','T\x201,\x0a\x20\x20\x20\x20\x20','t\x20lines\x20â€”\x20','join','sage.\x0a\x0a>\x20*','[sched]\x20cr','>\x20*sched\x20o','r:\x20','ed\x20edit\x20<n','jid|all>','EXISTS\x20sch','\x20?\x20ORDER\x20B','split','listRespon','s\x20INTEGER,','freshConfi','Africa/Nai','dules_new\x20','.\x20Will\x20ret','failed:\x20','hhmm','chat','\x20found\x20acr','scheduled_','\x20updated\x20t','key','te\x20listene',',\x20send_at,','has','[sched]\x20cl','\x20enabled:','Api\x20(manag','last_attem','ating\x20safe','frequency','EX\x20IF\x20NOT\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','days_of_we','\x20all','entries','\x20schedule(','ðŸ“…\x20*SchedHe','\x20\x20\x20\x20timezo','catch','chatJid','\x20timezone\x20','fallback','[sched]\x20ta','time','s\x20at\x20given','fig\x20regist','original\x20n','curring\x20id','moveAllSch','s_new\x20(cha','\x20);','itial\x20exec','[sched]\x20in','*\x20`<number','|in\x20N\x20hour','resolveNam','heduler\x20st','457456AgoGnZ','chat_jid','ler\x20error:','lias|jid|a','s).','id|all>','eaned\x20up','timezone','\x20all\x20gp:<a','mns\x20error\x20','ber>`\x20`<n>','no\x20send\x20ta','pt,\x20create','default\x20wi','ULL','ded\x20last_a','end_at\x20INT','Scheduled\x20','ALTER\x20TABL','(listenerM','remoteJid','day','aged\x20conne','time.','ings\x20(\x0a\x20\x20\x20','mezone\x20TEX','ge...>\x20\x20\x20(','edit','empts\x20colu','disable','vide\x20messa','number','R\x20PRIMARY\x20','Failed\x20for','ble\x20rename','\x20?,\x20?)','getUniqueJ','\x20|\x20YYYY-MM','ys:','MN\x20last_at','d_time','ours|YYYY-','edule.','rarily\x20dis','\x20<number>','parse_fail','[sched]\x20sw','ttempt\x20col','ble','<number>`\x20','\x20id\x20INTEGE','creator_ji','msg','YY-MM-DDTH','update\x20sch','arted\x20(ali','`\x0aâ€£\x20Set\x20re','>\x20<n>\x20\x20(n=','_settings\x20','ltChatJids','Usage:\x20sch','enabled\x20=\x20','Schedule\x20#','nal\x20send\x20a','type','\x20to\x20','sage...>\x20g','duler_sett','\x20set\x20to\x20','includes','SELECT\x20*\x20F','mezone,\x20cr',',\x20timezone','?,\x20?,\x20?,\x20?','extendedTe','s).\x20gp:<al','[sched]\x20ad','sendMessag','EY,\x0a\x20\x20\x20\x20\x20\x20','le\x20id=','s)\x20across\x20','iled\x20to\x20re','ecutor\x20ite','\x20INTEGER,\x0a','t_sent\x20INT','videoMessa','of\x20a\x20sched','ge...>`\x0aâ€£\x20','_chat\x20ON\x20s','dateSchedu','tempts\x20INT','imageMessa','unsupporte','d\x20to\x20backu','include\x20gp','ite_master','recoverabl','.)\x20gp:<ali','changes','ror:\x20','CREATE\x20TAB','=excluded.','tupSendApi','M-DDTHH:mm','bling\x20sche','\x20NOT\x20NULL,','d\x20INTEGER\x20','isInteger','zone','ast_attemp','\x20PRIMARY\x20K','d\x20TEXT\x20PRI','uld\x20not\x20ad','created_at','\x203\x20OR\x20sche','[sched]\x20se','s\x20ADD\x20COLU','chatid','buttonsRes','message','diff','pts','or\x20on\x20foll','solveDefau','ame\x20line\x20a','T\x20NOT\x20NULL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20e','e\x20or\x20multi','t\x20required','PRAGMA\x20for','>`\x20`<messa','faults\x20as\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','setup\x20send','datetime','*sched\x20lis','`\x0aâ€£\x20Change','er>`\x0aâ€£\x20Re-','ed\x20schedul','TEXT','es\x20created','schedules','weekly','\x20UPDATE\x20SE','pdate\x20hand','alias,\x20gp:','[sched]\x20ca','_schedules','days','min','hed\x20add\x2009','[sched]\x20ex','AUTOINCREM','[sched]\x20sc','run',':<alias|ji','9CJvlru','SCHED_CHEC','EXISTS\x20idx','DATETIME_M','umber>\x20<HH','slice','not-availa','\x20gp:<alias','DEFAULT\x201,','bleExists\x20','[sched]\x20fa','[sched]\x20en','recurrence','name','s\x20(chat_ji','ed\x20frequen','ow\x20error:\x20','SCHED_SEND','sched','list','O\x20schedule','F_MS',',\x20last_sen','ble\x20appear','essage\x20TEX','fromISO','lp\x20Command','\x20disabled\x20','ring','padStart','schedule.\x20','edules\x20SET','\x20scheduled','IMARY\x20KEY\x20','\x20Delete\x20on','findings','t_jid\x20TEXT','at\x20','ndexes\x20pro','forbidden','participan','author','ge\x20text\x20(s','WHERE\x20chat','[sched]\x20PM','instead','ME\x20TO\x20sche','ponseMessa','edules_new','r,...|all>','led\x20messag','prepare','INTEGER','ult\x20TZ','ble\x20for\x20re','\x20when:','hed\x20delete','th:','ialize\x20req','delete','schedule_t','gacy\x20sched','ROM\x20schedu','.\x20Not\x20retr','reason','val:\x20`n=1`','c.\x0a\x0a>\x20*sch','moveSchedu','ed\x20add\x20<HH','ted\x20â€”\x20migr','ed_at\x20INTE','defaults:\x20','admin\x20chec','startsWith','led,\x20send_','sock','ezone\x20FROM','No\x20schedul',':00\x20Hello\x20','iled:\x20','gs\x20(\x0a\x20\x20\x20\x20\x20','H:mm\x20|\x20in\x20','wId','e(\x27%s\x27,\x27no','\x20\x20\x20\x20);','d,\x20message','GER','normalizeT','instance','gration\x20do','sage...>','22190990tjfumV','K_INTERVAL','available','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','\x20\x20\x20\x20\x20\x20\x20\x20en','\x20\x20\x20\x20creato','ed\x20message','\x20->\x20id:','rget\x20avail','\x20available','MM-DDTHH:m','eduled\x20mes','or\x20max\x20att','g\x20at\x20','\x20chat:','Deleted\x20','DELETE\x20FRO','targets.','empt\x20colum','d\x20to\x20remov','LT\x200','opped','[sched]\x20on','chedules(c','when','\x20\x20\x20\x20\x20\x20\x20\x20se','led\x20for\x20id','\x20fatal','selectedBu','\x20last_sent','FAULT\x200'];_0x4fc8=function(){return _0x2832f3;};return _0x4fc8();}async function getTableColumns(_0x2bbee0){const _0x2968e3=_0x35766f;try{const _0x2057ca=await db[_0x2968e3(0x396)](_0x2968e3(0x20c)+_0x2968e3(0x207)+_0x2bbee0+')');return(_0x2057ca||[])['map'](_0x5852c2=>_0x5852c2[_0x2968e3(0x300)]);}catch(_0x19a97b){return warn(_0x2968e3(0x479)+_0x2968e3(0x440)+_0x2968e3(0x260)+'for\x20'+_0x2bbee0+':\x20'+(_0x19a97b?.[_0x2968e3(0x2ce)]||_0x19a97b)),[];}}function resolveChatJidFromRow(_0x1e0181){const _0x22cb29=_0x35766f,_0x30571d=[_0x22cb29(0x258),_0x22cb29(0x2cc),_0x22cb29(0x472),_0x22cb29(0x3e4),_0x22cb29(0x22e),_0x22cb29(0x416),'target_jid'];for(const _0xf24cc4 of _0x30571d)if(_0xf24cc4 in _0x1e0181&&_0x1e0181[_0xf24cc4])return String(_0x1e0181[_0xf24cc4]);for(const _0x4d7777 of Object['keys'](_0x1e0181)){const _0x460a7e=_0x1e0181[_0x4d7777];if(typeof _0x460a7e==='string'&&_0x460a7e['includes']('@'))return _0x460a7e;}return null;}function resolveMessageFromRow(_0x53ee6a){const _0x2e69e9=_0x35766f,_0x31dcfd=[_0x2e69e9(0x2ce),'msg',_0x2e69e9(0x431),_0x2e69e9(0x3e5),_0x2e69e9(0x3c0)];for(const _0x24fcde of _0x31dcfd)if(_0x24fcde in _0x53ee6a&&_0x53ee6a[_0x24fcde]!=null)return String(_0x53ee6a[_0x24fcde]);for(const _0x329707 of Object[_0x2e69e9(0x3b6)](_0x53ee6a)){if(typeof _0x53ee6a[_0x329707]===_0x2e69e9(0x3c9)&&_0x53ee6a[_0x329707][_0x2e69e9(0x1ce)]>0x23a1+0x1e87+-0x4228&&!_0x53ee6a[_0x329707]['includes']('@'))return _0x53ee6a[_0x329707];}return'';}function resolveWhenFromRow(_0x2a9a3d){const _0x165031=_0x35766f,_0x1ea8a4=[_0x165031(0x1b9),'sendAt',_0x165031(0x1f8),'send','timestamp','ts',_0x165031(0x436)];for(const _0x596b62 of _0x1ea8a4){if(_0x596b62 in _0x2a9a3d&&_0x2a9a3d[_0x596b62]){const _0x4a193d=Number(_0x2a9a3d[_0x596b62]);if(!Number[_0x165031(0x44b)](_0x4a193d)&&_0x4a193d>-0x768af97d+0x18fd0d69+0x9928b614)return{'send_at':_0x4a193d};}}const _0x5bf47c=[_0x165031(0x249),_0x165031(0x22d),_0x165031(0x32f)+_0x165031(0x485),_0x165031(0x230)+'time'];for(const _0x32e2a5 of _0x5bf47c){if(_0x32e2a5 in _0x2a9a3d&&_0x2a9a3d[_0x32e2a5]){const _0x832baf=String(_0x2a9a3d[_0x32e2a5])[_0x165031(0x3dd)]();if(/^\d{1,2}:\d{2}$/[_0x165031(0x455)](_0x832baf))return{'time':_0x832baf};}}return{'time':null,'send_at':null};}async function readAndNormalizeExistingSchedules(){const _0x1383fa=_0x35766f;try{const _0x505b32=await db[_0x1383fa(0x396)](_0x1383fa(0x29d)+_0x1383fa(0x331)+_0x1383fa(0x44f)),_0x1c7c2b=[];for(const _0x162665 of _0x505b32||[]){const _0x2f03f7=resolveChatJidFromRow(_0x162665)||'',_0x40bc30=resolveMessageFromRow(_0x162665)||'',_0x3ac9d3=resolveWhenFromRow(_0x162665)||{};let _0x4a3e88=_0x162665[_0x1383fa(0x23b)]||_0x162665[_0x1383fa(0x1d9)]||_0x162665['repeat']||_0x162665[_0x1383fa(0x2ff)]||'daily';if(typeof _0x4a3e88===_0x1383fa(0x276))_0x4a3e88=_0x1383fa(0x444)+_0x1383fa(0x27d)+_0x4a3e88;const _0x4f15f6=_0x162665[_0x1383fa(0x25e)]||_0x162665['tz']||null,_0x12ba01=_0x162665[_0x1383fa(0x28a)+'d']||_0x162665['created_by']||_0x162665[_0x1383fa(0x31c)]||_0x162665[_0x1383fa(0x1c9)]||'';let _0x58102e=Number(_0x162665[_0x1383fa(0x2c8)]||_0x162665['ts']||_0x162665['timestamp']||-0xb*-0x265+-0x9fb+-0xc*0x15d);if(!_0x58102e)_0x58102e=Math[_0x1383fa(0x446)](Date[_0x1383fa(0x40e)]()/(-0x1*0x2375+0x103a+0x1723*0x1));_0x1c7c2b[_0x1383fa(0x208)]({'chat_jid':_0x2f03f7,'message':_0x40bc30,'time':_0x3ac9d3[_0x1383fa(0x249)]||null,'send_at':_0x3ac9d3[_0x1383fa(0x1b9)]||null,'frequency':_0x4a3e88||_0x1383fa(0x3e3),'timezone':_0x4f15f6,'last_sent':Number(_0x162665[_0x1383fa(0x1f3)]||_0x162665[_0x1383fa(0x20f)]||0xf92*0x1+0x5*0x44e+-0x2518)||0xd5d+0x1*-0x1418+0x6bb,'creator_jid':_0x12ba01||'','created_at':_0x58102e});}return _0x1c7c2b;}catch(_0x2f1716){return warn(_0x1383fa(0x3a1)+'adAndNorma'+_0x1383fa(0x373)+'ngSchedule'+_0x1383fa(0x449)+(_0x2f1716?.['message']||_0x2f1716)),[];}}async function ensureSchema(){const _0x255fe8=_0x35766f,_0x37ed89={'id':_0x255fe8(0x469)+_0x255fe8(0x314)+_0x255fe8(0x2ef)+_0x255fe8(0x1dd),'chat_jid':'TEXT\x20NOT\x20N'+_0x255fe8(0x265),'message':_0x255fe8(0x424)+_0x255fe8(0x265),'time':'TEXT','send_at':_0x255fe8(0x327),'frequency':'TEXT\x20DEFAU'+_0x255fe8(0x3b3),'timezone':_0x255fe8(0x2e2),'last_sent':_0x255fe8(0x327),'creator_jid':_0x255fe8(0x424)+'ULL','enabled':_0x255fe8(0x456)+'FAULT\x201','send_attempts':'INTEGER\x20DE'+_0x255fe8(0x36c),'last_attempt':_0x255fe8(0x327),'created_at':_0x255fe8(0x456)+'FAULT\x20(str'+_0x255fe8(0x389)+_0x255fe8(0x39f)};try{const _0x23d8bf=await tableExists(_0x255fe8(0x2e4));if(!_0x23d8bf){const _0x296a63=Object[_0x255fe8(0x240)](_0x37ed89)['map'](([_0x23971f,_0x18588a])=>_0x23971f+'\x20'+_0x18588a)[_0x255fe8(0x21c)](',\x0a\x20\x20');await db[_0x255fe8(0x435)](_0x255fe8(0x2bb)+'LE\x20schedul'+'es\x20(\x0a\x20\x20'+_0x296a63+_0x255fe8(0x391));try{await db[_0x255fe8(0x435)](_0x255fe8(0x1eb)+_0x255fe8(0x23c)+_0x255fe8(0x2f5)+_0x255fe8(0x2ea)+'_chat\x20ON\x20s'+_0x255fe8(0x365)+_0x255fe8(0x3b7));}catch(_0x131662){}info(_0x255fe8(0x21e)+_0x255fe8(0x3ea)+_0x255fe8(0x1f0)+_0x255fe8(0x36f)+'e'),await db[_0x255fe8(0x435)](_0x255fe8(0x463)+'REATE\x20TABL'+_0x255fe8(0x3a2)+_0x255fe8(0x1e9)+_0x255fe8(0x29a)+_0x255fe8(0x26f)+_0x255fe8(0x1e0)+_0x255fe8(0x317)+_0x255fe8(0x2c5)+'EY,\x0a\x20\x20\x20\x20\x20\x20'+_0x255fe8(0x45a)+_0x255fe8(0x2c1)+_0x255fe8(0x2fb)+_0x255fe8(0x23d)+_0x255fe8(0x246)+'TEXT\x0a\x20\x20\x20\x20\x20'+_0x255fe8(0x38a)+'\x20\x20');return;}const _0x35e588=await getTableColumns('schedules'),_0x2cb773=_0x35e588[_0x255fe8(0x29c)]('chat_jid'),_0x2f01e4=_0x35e588[_0x255fe8(0x29c)](_0x255fe8(0x2ce))||_0x35e588['includes'](_0x255fe8(0x28b))||_0x35e588[_0x255fe8(0x29c)](_0x255fe8(0x3e5))||_0x35e588['includes'](_0x255fe8(0x431)),_0x4266bf=_0x35e588[_0x255fe8(0x29c)](_0x255fe8(0x28a)+'d')||_0x35e588[_0x255fe8(0x29c)](_0x255fe8(0x20a))||_0x35e588[_0x255fe8(0x29c)](_0x255fe8(0x31c));if(_0x2cb773&&_0x2f01e4&&_0x4266bf){if(!_0x35e588[_0x255fe8(0x29c)](_0x255fe8(0x477)+_0x255fe8(0x2d0)))try{await db['exec'](_0x255fe8(0x269)+_0x255fe8(0x478)+_0x255fe8(0x2cb)+'MN\x20send_at'+_0x255fe8(0x2b1)+_0x255fe8(0x1ef)+_0x255fe8(0x362)),info(_0x255fe8(0x2a3)+_0x255fe8(0x38e)+_0x255fe8(0x434)+_0x255fe8(0x1c4));}catch(_0x3dd0d6){warn(_0x255fe8(0x20e)+_0x255fe8(0x2c7)+_0x255fe8(0x48c)+_0x255fe8(0x273)+_0x255fe8(0x47f)+(_0x3dd0d6?.['message']||_0x3dd0d6));}if(!_0x35e588[_0x255fe8(0x29c)](_0x255fe8(0x239)+'pt'))try{await db[_0x255fe8(0x435)](_0x255fe8(0x269)+_0x255fe8(0x478)+_0x255fe8(0x2cb)+_0x255fe8(0x27e)+_0x255fe8(0x1c8)+_0x255fe8(0x349)),info(_0x255fe8(0x2a3)+_0x255fe8(0x266)+_0x255fe8(0x286)+'umn');}catch(_0xa41a5f){warn(_0x255fe8(0x20e)+_0x255fe8(0x2c7)+'d\x20last_att'+_0x255fe8(0x360)+'n:\x20'+(_0xa41a5f?.['message']||_0xa41a5f));}try{await db[_0x255fe8(0x435)](_0x255fe8(0x1eb)+_0x255fe8(0x23c)+_0x255fe8(0x2f5)+_0x255fe8(0x2ea)+_0x255fe8(0x2af)+_0x255fe8(0x365)+_0x255fe8(0x3b7));}catch(_0x3dcbca){}await db[_0x255fe8(0x435)](_0x255fe8(0x463)+_0x255fe8(0x415)+_0x255fe8(0x3a2)+_0x255fe8(0x1e9)+_0x255fe8(0x29a)+_0x255fe8(0x26f)+'\x20\x20\x20\x20\x20\x20\x20cha'+_0x255fe8(0x317)+_0x255fe8(0x2c5)+_0x255fe8(0x2a5)+_0x255fe8(0x45a)+'d\x20INTEGER\x20'+_0x255fe8(0x2fb)+_0x255fe8(0x23d)+_0x255fe8(0x246)+'TEXT\x0a\x20\x20\x20\x20\x20'+_0x255fe8(0x38a)+'\x20\x20'),info(_0x255fe8(0x2f0)+'hedules\x20ta'+_0x255fe8(0x30a)+'s\x20canonica'+'l/adequate');return;}info('[sched]\x20Le'+_0x255fe8(0x330)+'ules\x20detec'+_0x255fe8(0x338)+_0x255fe8(0x23a)+'ly');const _0x1a6ca=await readAndNormalizeExistingSchedules();await db['exec']('PRAGMA\x20for'+_0x255fe8(0x3dc)+'=\x20OFF;');try{await db['exec'](_0x255fe8(0x2bb)+'LE\x20IF\x20NOT\x20'+'EXISTS\x20sch'+_0x255fe8(0x323)+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x255fe8(0x289)+_0x255fe8(0x277)+_0x255fe8(0x3b2)+_0x255fe8(0x3e9)+_0x255fe8(0x1e0)+_0x255fe8(0x317)+_0x255fe8(0x2c0)+_0x255fe8(0x2db)+_0x255fe8(0x30b)+_0x255fe8(0x2d4)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'time\x20TEXT,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+_0x255fe8(0x267)+_0x255fe8(0x40f)+_0x255fe8(0x383)+'ncy\x20TEXT\x20D'+_0x255fe8(0x460)+'ily\x27,\x0a\x20\x20\x20\x20'+_0x255fe8(0x243)+_0x255fe8(0x458)+'\x20\x20\x20\x20\x20\x20\x20las'+_0x255fe8(0x2ab)+_0x255fe8(0x40f)+_0x255fe8(0x353)+_0x255fe8(0x39b)+_0x255fe8(0x2c0)+_0x255fe8(0x2d5)+_0x255fe8(0x3f8)+_0x255fe8(0x1ef)+_0x255fe8(0x39c)+_0x255fe8(0x407)+'ttempts\x20IN'+'TEGER\x20DEFA'+_0x255fe8(0x1d0)+_0x255fe8(0x3f0)+'attempt\x20IN'+'TEGER,\x0a\x20\x20\x20'+_0x255fe8(0x3f3)+_0x255fe8(0x339)+_0x255fe8(0x3f9)+_0x255fe8(0x3c5)+_0x255fe8(0x346)+_0x255fe8(0x480)+_0x255fe8(0x250));}catch(_0x2d17ba){await db[_0x255fe8(0x435)](_0x255fe8(0x2bb)+_0x255fe8(0x38d)+_0x255fe8(0x223)+'edules_new'+_0x255fe8(0x370)+'\x20id\x20INTEGE'+'R\x20PRIMARY\x20'+_0x255fe8(0x3b2)+_0x255fe8(0x3e9)+'\x20\x20\x20\x20\x20\x20\x20cha'+_0x255fe8(0x317)+_0x255fe8(0x2c0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+_0x255fe8(0x30b)+_0x255fe8(0x2d4)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x255fe8(0x378)+_0x255fe8(0x351)+_0x255fe8(0x267)+_0x255fe8(0x40f)+'\x20\x20\x20\x20freque'+_0x255fe8(0x3d2)+_0x255fe8(0x1db)+_0x255fe8(0x270)+_0x255fe8(0x425)+_0x255fe8(0x36b)+'\x20INTEGER,\x0a'+_0x255fe8(0x210)+_0x255fe8(0x464)+'TEXT\x20NOT\x20N'+'ULL,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20enabled'+_0x255fe8(0x2aa)+_0x255fe8(0x367)+_0x255fe8(0x476)+_0x255fe8(0x227)+_0x255fe8(0x45c)+_0x255fe8(0x2c4)+'t\x20INTEGER,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'reated_at\x20'+'INTEGER\x0a\x20\x20'+_0x255fe8(0x347)),warn(_0x255fe8(0x21e)+_0x255fe8(0x489)+_0x255fe8(0x22a)+'without\x20de'+_0x255fe8(0x2da)+_0x255fe8(0x247));}const _0x16d94e=await db[_0x255fe8(0x326)](_0x255fe8(0x40c)+_0x255fe8(0x307)+_0x255fe8(0x24f)+_0x255fe8(0x47c)+_0x255fe8(0x1f7)+_0x255fe8(0x234)+_0x255fe8(0x414)+',\x20timezone'+_0x255fe8(0x309)+'t,\x20creator'+'_jid,\x20enab'+_0x255fe8(0x33d)+_0x255fe8(0x1dc)+'last_attem'+_0x255fe8(0x263)+_0x255fe8(0x432)+'ES\x20(?,\x20?,\x20'+_0x255fe8(0x2a0)+_0x255fe8(0x380)+_0x255fe8(0x3c8));try{for(const _0x6a7d74 of _0x1a6ca){try{await _0x16d94e[_0x255fe8(0x2f1)](_0x6a7d74[_0x255fe8(0x258)]||'',_0x6a7d74[_0x255fe8(0x2ce)]||'',_0x6a7d74[_0x255fe8(0x249)]||null,_0x6a7d74[_0x255fe8(0x1b9)]||null,_0x6a7d74[_0x255fe8(0x23b)]||'daily',_0x6a7d74[_0x255fe8(0x25e)]||null,_0x6a7d74[_0x255fe8(0x1f3)]||-0x593+-0x1da1+0x2334,_0x6a7d74[_0x255fe8(0x28a)+'d']||'',-0x1*-0x24cb+-0x12ca+-0x1200,0x89*-0x2b+0x3ae*0x8+-0x2f*0x23,null,_0x6a7d74['created_at']||Math[_0x255fe8(0x446)](Date[_0x255fe8(0x40e)]()/(-0x228d+0x1932+0xd43)));}catch(_0x20be9a){warn(_0x255fe8(0x2e9)+'nnot\x20inser'+_0x255fe8(0x43e)+_0x255fe8(0x2e1)+_0x255fe8(0x404)+_0x6a7d74[_0x255fe8(0x258)]+':\x20'+(_0x20be9a?.[_0x255fe8(0x2ce)]||_0x20be9a));}}}finally{try{await _0x16d94e[_0x255fe8(0x410)]();}catch(_0x2985fd){}}try{const _0x3ab6cc=_0x255fe8(0x405)+_0x255fe8(0x1ca)+Math[_0x255fe8(0x446)](Date['now']()/(-0x12e0+-0x311+0x19d9));await db[_0x255fe8(0x435)](_0x255fe8(0x269)+_0x255fe8(0x478)+'s\x20RENAME\x20T'+'O\x20'+_0x3ab6cc+';'),await db[_0x255fe8(0x435)](_0x255fe8(0x269)+'E\x20schedule'+'s_new\x20RENA'+_0x255fe8(0x321)+_0x255fe8(0x3ae));try{await db['exec'](_0x255fe8(0x1eb)+_0x255fe8(0x23c)+_0x255fe8(0x2f5)+_0x255fe8(0x2ea)+_0x255fe8(0x2af)+'chedules(c'+_0x255fe8(0x3b7));}catch(_0x2449d4){}info(_0x255fe8(0x475)+_0x255fe8(0x34c)+'ne;\x20old\x20ta'+_0x255fe8(0x279)+_0x255fe8(0x2b4)+'p');}catch(_0x2574c2){warn(_0x255fe8(0x285)+'ap\x20tables\x20'+_0x255fe8(0x22c)+(_0x2574c2?.['message']||_0x2574c2));throw _0x2574c2;}finally{await db[_0x255fe8(0x435)](_0x255fe8(0x2d8)+_0x255fe8(0x3dc)+'=\x20ON;');}await db[_0x255fe8(0x435)]('\x0a\x20\x20\x20\x20\x20\x20CRE'+'ATE\x20TABLE\x20'+_0x255fe8(0x419)+_0x255fe8(0x3e2)+_0x255fe8(0x43c)+_0x255fe8(0x343)+'\x20\x20\x20chat_ji'+_0x255fe8(0x2c6)+'MARY\x20KEY,\x0a'+_0x255fe8(0x352)+_0x255fe8(0x452)+'GER\x20DEFAUL'+_0x255fe8(0x21a)+_0x255fe8(0x41e)+'e\x20TEXT\x0a\x20\x20\x20'+_0x255fe8(0x38a));}catch(_0x1e7d79){error(_0x1e7d79,_0x255fe8(0x2fe)+'sureSchema'+_0x255fe8(0x369));throw _0x1e7d79;}}function refreshConfig(){const _0x41aaee=_0x35766f;try{const _0x55baae=getConfig()||{};CHECK_INTERVAL_MS=Number(_0x55baae[_0x41aaee(0x2f4)+_0x41aaee(0x34f)+_0x41aaee(0x3aa)]??CHECK_INTERVAL_MS),DEFAULT_TIMEZONE=_0x55baae['SCHED_DEFA'+_0x41aaee(0x45f)+'NE']||DEFAULT_TIMEZONE,SEND_RETRIES=Number(_0x55baae['SCHED_SEND'+'_RETRIES']??SEND_RETRIES),INITIAL_BACKOFF_MS=Number(_0x55baae[_0x41aaee(0x36d)+_0x41aaee(0x3fa)+_0x41aaee(0x308)]??INITIAL_BACKOFF_MS),info(_0x41aaee(0x20e)+_0x41aaee(0x212)+_0x41aaee(0x470)+'rval='+CHECK_INTERVAL_MS+('ms\x20default'+_0x41aaee(0x3a5))+DEFAULT_TIMEZONE);}catch(_0x2c9ef9){warn(_0x41aaee(0x3a1)+_0x41aaee(0x228)+_0x41aaee(0x388)+(_0x2c9ef9?.['message']||_0x2c9ef9));}}try{typeof hotReloadConfig==='function'&&hotReloadConfig((_0x18f33f=[])=>{const _0x48f1fb=_0x35766f;try{refreshConfig();}catch(_0x1ff9c3){warn(_0x48f1fb(0x3ee)+_0x48f1fb(0x48b)+_0x48f1fb(0x41f)+'r:\x20'+(_0x1ff9c3?.[_0x48f1fb(0x2ce)]||_0x1ff9c3));}});}catch(_0x347b13){warn(_0x35766f(0x3ee)+_0x35766f(0x437)+_0x35766f(0x24b)+_0x35766f(0x43b)+_0x35766f(0x3bf)+(_0x347b13?.[_0x35766f(0x2ce)]||_0x347b13));}refreshConfig();function tryBuildSendApiFromBot(_0x366539){const _0x36abab=_0x35766f;if(!_0x366539)return null;if(typeof _0x366539[_0x36abab(0x2a4)+'e']===_0x36abab(0x3cb))return async(_0x36a5a7,_0x40a3a9)=>_0x366539[_0x36abab(0x2a4)+'e'](_0x36a5a7,_0x40a3a9);else{if(_0x366539['sock']&&typeof _0x366539[_0x36abab(0x33e)][_0x36abab(0x2a4)+'e']===_0x36abab(0x3cb))return async(_0x4ddb52,_0x4aca84)=>_0x366539[_0x36abab(0x33e)][_0x36abab(0x2a4)+'e'](_0x4ddb52,_0x4aca84);}return null;}function setupSendApi(_0x48990c){const _0x44c538=_0x35766f;botRef=_0x48990c,sendApi=tryBuildSendApiFromBot(botRef),info('[sched]\x20se'+_0x44c538(0x2bd)+_0x44c538(0x1f6)+'dApi\x20'+(sendApi?_0x44c538(0x350):_0x44c538(0x2f9)+_0x44c538(0x287)));}async function performSend(_0x176ee6,_0x38eff6){const _0x4a2bca=_0x35766f,_0x59714c=_0x176ee6||null;if(!_0x59714c)throw new Error(_0x4a2bca(0x262)+_0x4a2bca(0x356)+_0x4a2bca(0x483)+'icit\x20targe'+_0x4a2bca(0x2d7)+')');if(typeof sendApi==='function'){await sendApi(_0x59714c,_0x38eff6);return;}if(botRef&&typeof botRef[_0x4a2bca(0x2a4)+'e']===_0x4a2bca(0x3cb)){await botRef[_0x4a2bca(0x2a4)+'e'](_0x59714c,_0x38eff6);return;}if(botRef&&botRef[_0x4a2bca(0x33e)]&&typeof botRef[_0x4a2bca(0x33e)][_0x4a2bca(0x2a4)+'e']===_0x4a2bca(0x3cb)){await botRef[_0x4a2bca(0x33e)]['sendMessag'+'e'](_0x59714c,_0x38eff6);return;}throw new Error('no\x20sendApi'+_0x4a2bca(0x357));}async function sendWithRetry(_0x3022a0,_0x2c0bc4){const _0x1833f1=_0x35766f,_0x1e732f=Number(SEND_RETRIES||0xba5+0x563+-0x1105);let _0x4361a7=-0xf12+-0x3*-0x86f+0x61*-0x1b,_0x52ff89=Number(INITIAL_BACKOFF_MS||-0x1*0x96d+-0x11*-0x94+0x18d);while(_0x4361a7<_0x1e732f){try{return await performSend(_0x3022a0,_0x2c0bc4),!![];}catch(_0x1a3e6d){_0x4361a7++;const _0x2ce6e2=String(_0x1a3e6d?.['message']||'')[_0x1833f1(0x3c6)+'e']()['includes'](_0x1833f1(0x3fc))||_0x1a3e6d?.[_0x1833f1(0x3b9)]===0x1d*-0xc4+0x2*0x6a1+-0x1*-0xa9f;warn('[sched]\x20se'+_0x1833f1(0x3cc)+'\x20'+_0x4361a7+'\x20failed:\x20'+(_0x1a3e6d?.['message']||_0x1a3e6d));if(_0x4361a7>=_0x1e732f||!_0x2ce6e2)return![];await new Promise(_0x14acf2=>setTimeout(_0x14acf2,_0x52ff89)),_0x52ff89*=-0x2507+-0x2*0x2de+-0x1*-0x2ac5;try{setupSendApi(botRef);}catch(_0x265773){}}}return![];}async function sendScheduledMessage(_0x1978b3){const _0x429d45=_0x35766f,{id:_0x5e51a5,chat_jid:_0x1c6f65,message:_0x16ad61}=_0x1978b3,_0x127592={'text':_0x16ad61},_0x412ed8=Number(SEND_RETRIES||0x7ab+-0x1*0x1d48+0x15a0);let _0x550eeb=-0x188*-0x11+-0x6df*0x2+-0xc4a,_0x2bb031=Number(INITIAL_BACKOFF_MS||-0x612+0x89+-0x77d*-0x1);while(_0x550eeb<_0x412ed8){_0x550eeb++;try{return await performSend(_0x1c6f65,_0x127592),{'success':!![],'unrecoverable':![]};}catch(_0x5c0afc){const _0x1852b6=_0x5c0afc?.['message']||String(_0x5c0afc),_0x4d10f5=_0x1852b6[_0x429d45(0x3c6)+'e']()[_0x429d45(0x29c)](_0x429d45(0x31a))||_0x5c0afc?.[_0x429d45(0x1fd)]===0x25f4+0x24d7+0x30d*-0x18,_0x5d5719=_0x1852b6[_0x429d45(0x3c6)+'e']()[_0x429d45(0x29c)](_0x429d45(0x38c))||_0x5c0afc?.[_0x429d45(0x1fd)]===0x997+-0x7*0x205+-0x70*-0xe;warn(_0x429d45(0x2ca)+_0x429d45(0x3cc)+'\x20'+_0x550eeb+'/'+_0x412ed8+'\x20for\x20id='+_0x5e51a5+_0x429d45(0x1fa)+_0x1852b6);if(_0x4d10f5||_0x5d5719)return error('[sched]\x20Un'+_0x429d45(0x2b7)+_0x429d45(0x1c6)+_0x429d45(0x1c2)+_0x5e51a5+':\x20'+_0x1852b6+(_0x429d45(0x332)+_0x429d45(0x3c1))),{'success':![],'unrecoverable':!![]};if(_0x550eeb>=_0x412ed8)return error(_0x429d45(0x215)+_0x429d45(0x296)+'ttempt\x20fai'+_0x429d45(0x368)+'='+_0x5e51a5+'.'),{'success':![],'unrecoverable':![]};await new Promise(_0x1a9ca6=>setTimeout(_0x1a9ca6,_0x2bb031)),_0x2bb031*=-0x16aa+-0x1a39+-0x1*-0x30e5;try{setupSendApi(botRef);}catch(_0x4633e5){}}}return{'success':![],'unrecoverable':![]};}function parseTimeToken(_0x26711b,_0x1fed40=DEFAULT_TIMEZONE){const _0x48267a=_0x35766f;if(!_0x26711b||typeof _0x26711b!==_0x48267a(0x3c9))return null;const _0x56a3b2=_0x26711b[_0x48267a(0x3dd)](),_0x5e0821=_0x56a3b2['match'](/^in\s+(\d+)\s*(minute|min|minutes|m|hour|hours|hr|h|day|days|d)$/i);if(_0x5e0821){const _0x3c84d2=Number(_0x5e0821[0x1*0x490+0xfa6+-0x2e3*0x7]),_0x2e88d9=_0x5e0821[-0x84b*0x1+0x49*-0x7+0xa4c]['toLowerCas'+'e']();let _0x454072=DateTime[_0x48267a(0x40e)]()['setZone'](_0x1fed40);if(_0x2e88d9['startsWith'](_0x48267a(0x2ec))||_0x2e88d9==='m')_0x454072=_0x454072['plus']({'minutes':_0x3c84d2});else{if(_0x2e88d9[_0x48267a(0x33c)]('h')||_0x2e88d9['startsWith']('hr'))_0x454072=_0x454072['plus']({'hours':_0x3c84d2});else{if(_0x2e88d9[_0x48267a(0x33c)]('d'))_0x454072=_0x454072[_0x48267a(0x1df)]({'days':_0x3c84d2});}}if(_0x454072[_0x48267a(0x45b)])return{'type':'datetime','dt':_0x454072};}if(/^\d{4}-\d{2}-\d{2}[ T]\d{1,2}:\d{2}$/[_0x48267a(0x455)](_0x56a3b2)){const _0x2086e3=_0x56a3b2[_0x48267a(0x3d6)]('\x20','T'),_0x56d229=DateTime[_0x48267a(0x30c)](_0x2086e3,{'zone':_0x1fed40});if(_0x56d229[_0x48267a(0x45b)])return{'type':_0x48267a(0x2dd),'dt':_0x56d229};}if(/^\d{1,2}:\d{2}$/[_0x48267a(0x455)](_0x56a3b2)){const [_0x4c8a04,_0xa33e19]=_0x56a3b2[_0x48267a(0x225)](':')[_0x48267a(0x1da)](Number);if(Number['isInteger'](_0x4c8a04)&&Number[_0x48267a(0x2c2)](_0xa33e19)&&_0x4c8a04>=-0x1711+-0xce9+0x23fa&&_0x4c8a04<=0x1c7+0x227a+-0x242a&&_0xa33e19>=0x17*-0xfe+-0x1*0x1548+-0x2*-0x160d&&_0xa33e19<=0x11*0xf7+-0x23d8+0x13ac)return{'type':_0x48267a(0x22d),'hhmm':String(_0x4c8a04)['padStart'](0xa1d+-0x2*-0x29+-0x9d*0x11,'0')+':'+String(_0xa33e19)[_0x48267a(0x310)](-0xe40+0x3*-0x8f1+-0x329*-0xd,'0')};}return null;}function shouldSendSlot(_0xe49654,_0x4f2b8c){const _0xc146a2=_0x35766f,_0x1e2b03=_0xe49654[_0xc146a2(0x23b)]||_0xc146a2(0x3e3),_0xeadf32=_0xe49654['last_sent']||0x7f6+0xb1*0x22+-0x1f78,_0x170b34=_0xeadf32?DateTime[_0xc146a2(0x467)](_0xeadf32*(0x51e*-0x6+0x13ae+0xeee))[_0xc146a2(0x1e2)](_0x4f2b8c[_0xc146a2(0x2c3)]):null;if(!_0x170b34)return!![];if(_0x1e2b03==='daily')return!_0x170b34[_0xc146a2(0x203)](_0x4f2b8c,_0xc146a2(0x26c));if(_0x1e2b03===_0xc146a2(0x2e5))return _0x4f2b8c[_0xc146a2(0x2cf)](_0x170b34,_0xc146a2(0x2eb))[_0xc146a2(0x2eb)]>=-0x6db+0x2246+-0x1b64;if(_0x1e2b03[_0xc146a2(0x33c)](_0xc146a2(0x444)+'ys:')){const _0x227676=parseInt(_0x1e2b03[_0xc146a2(0x225)](':')[0xdb2+0x183*-0x11+0xc02],-0x14c*0x7+0x2426*-0x1+0x2d44);if(isNaN(_0x227676)||_0x227676<-0xe2*0x9+-0x116a+0x195d)return![];return _0x4f2b8c[_0xc146a2(0x2cf)](_0x170b34,_0xc146a2(0x2eb))[_0xc146a2(0x2eb)]>=_0x227676;}if(_0x1e2b03['startsWith'](_0xc146a2(0x23e)+_0xc146a2(0x1ba))){const _0x39926b=_0x1e2b03[_0xc146a2(0x225)](':')[0x908+0x16f7+0x69*-0x4e][_0xc146a2(0x225)](',')[_0xc146a2(0x1da)](_0x3f6c71=>parseInt(_0x3f6c71,-0x781+-0x1a9+0x934))[_0xc146a2(0x433)](Boolean);return _0x39926b[_0xc146a2(0x29c)](_0x4f2b8c['weekday'])&&!_0x170b34[_0xc146a2(0x203)](_0x4f2b8c,_0xc146a2(0x26c));}if(_0x1e2b03[_0xc146a2(0x33c)](_0xc146a2(0x3f4)+_0xc146a2(0x32c))){const _0x5bf203=parseInt(_0x1e2b03[_0xc146a2(0x225)](':')[0xdf*-0xd+0x10a0+-0x4*0x153],0x285+0x1*0x16a9+-0x1924);return _0x4f2b8c[_0xc146a2(0x26c)]===_0x5bf203&&!_0x170b34[_0xc146a2(0x203)](_0x4f2b8c,_0xc146a2(0x26c));}return![];}async function addScheduleRow(_0x18aba7){const _0x5e917c=_0x35766f;try{const _0x4b5c74=await db['run'](_0x5e917c(0x40c)+_0x5e917c(0x307)+_0x5e917c(0x301)+_0x5e917c(0x348)+_0x5e917c(0x1fc)+_0x5e917c(0x41d)+_0x5e917c(0x3fe)+_0x5e917c(0x29e)+'eator_jid)'+_0x5e917c(0x3a8)+_0x5e917c(0x37e)+_0x5e917c(0x380)+_0x5e917c(0x27a),[_0x18aba7[_0x5e917c(0x258)],_0x18aba7[_0x5e917c(0x2ce)],_0x18aba7[_0x5e917c(0x249)],_0x18aba7['send_at'],_0x18aba7['frequency']||'daily',_0x18aba7[_0x5e917c(0x25e)]||null,_0x18aba7[_0x5e917c(0x28a)+'d']]),_0x29cdd9=_0x4b5c74?.[_0x5e917c(0x3c4)]||null;return info('[sched]\x20ad'+_0x5e917c(0x1cf)+_0x5e917c(0x2a6)+_0x29cdd9+'\x20chat='+_0x18aba7['chat_jid']+_0x5e917c(0x376)+(_0x18aba7['time']||_0x18aba7[_0x5e917c(0x1b9)])),_0x29cdd9;}catch(_0x5209ba){return warn(_0x5e917c(0x2a3)+_0x5e917c(0x44a)+_0x5e917c(0x303)+(_0x5209ba?.['message']||_0x5209ba)),null;}}async function listSchedulesForChat(_0xadb4ee){const _0x3ad0ac=_0x35766f;try{const _0x39f54d=await db['all'](_0x3ad0ac(0x29d)+_0x3ad0ac(0x331)+'les\x20WHERE\x20'+_0x3ad0ac(0x453)+_0x3ad0ac(0x224)+_0x3ad0ac(0x37b),[_0xadb4ee]);return _0x39f54d||[];}catch(_0x354adb){return warn(_0x3ad0ac(0x1e7)+_0x3ad0ac(0x3be)+_0x3ad0ac(0x3d8)+'rror:\x20'+(_0x354adb?.['message']||_0x354adb)),[];}}async function removeScheduleByDBId(_0x6b6730){const _0x6593a1=_0x35766f;try{const _0x4c9a77=await db['run'](_0x6593a1(0x35e)+'M\x20schedule'+_0x6593a1(0x3b5)+'\x20=\x20?',[_0x6b6730]);return _0x4c9a77?.['changes']?!![]:![];}catch(_0xc7930b){return warn(_0x6593a1(0x3a1)+_0x6593a1(0x336)+_0x6593a1(0x3a3)+_0x6593a1(0x1d2)+(_0xc7930b?.['message']||_0xc7930b)),![];}}async function removeAllSchedulesForChat(_0x31e252){const _0x181bd7=_0x35766f;try{const _0x57dbea=await db[_0x181bd7(0x2f1)]('DELETE\x20FRO'+_0x181bd7(0x381)+_0x181bd7(0x1be)+_0x181bd7(0x3ca),[_0x31e252]);return _0x57dbea?.['changes']||-0x1*0xa9b+0xe6a+-0x3cf;}catch(_0x1d3aa1){return warn(_0x181bd7(0x3a1)+_0x181bd7(0x24e)+'edulesForC'+_0x181bd7(0x3f6)+'\x20'+(_0x1d3aa1?.[_0x181bd7(0x2ce)]||_0x1d3aa1)),-0x119*0x5+-0x1*-0x19b5+-0x1438;}}async function updateScheduleFields(_0x385429,_0xc215e5={}){const _0x323cfb=_0x35766f;try{const _0x171bd9=[],_0x10c337=[];for(const _0x295201 of Object[_0x323cfb(0x3b6)](_0xc215e5)){_0x171bd9['push'](_0x295201+'\x20=\x20?'),_0x10c337[_0x323cfb(0x208)](_0xc215e5[_0x295201]);}if(!_0x171bd9['length'])return![];_0x10c337[_0x323cfb(0x208)](_0x385429);const _0x23cc0f=_0x323cfb(0x40b)+_0x323cfb(0x312)+'\x20'+_0x171bd9['join'](',\x20')+(_0x323cfb(0x1cd)+'=\x20?'),_0xb5eb02=await db[_0x323cfb(0x2f1)](_0x23cc0f,_0x10c337);return _0xb5eb02?.[_0x323cfb(0x2b9)]?!![]:![];}catch(_0x324d33){return warn(_0x323cfb(0x438)+_0x323cfb(0x2b0)+_0x323cfb(0x3e7)+_0x323cfb(0x1d2)+(_0x324d33?.[_0x323cfb(0x2ce)]||_0x324d33)),![];}}async function getChatTimezone(_0x37e096){const _0x12e265=_0x35766f;try{const _0x292290=await db[_0x12e265(0x3db)]('SELECT\x20tim'+_0x12e265(0x33f)+_0x12e265(0x426)+_0x12e265(0x291)+_0x12e265(0x31e)+'_jid\x20=\x20?',[_0x37e096]);return _0x292290?.[_0x12e265(0x25e)]||null;}catch(_0x3746ea){return warn('[sched]\x20ge'+_0x12e265(0x3f2)+_0x12e265(0x402)+'\x20'+(_0x3746ea?.[_0x12e265(0x2ce)]||_0x3746ea)),null;}}async function setChatTimezone(_0x351aee,_0x3611ac){const _0x17d527=_0x35766f;try{return await db[_0x17d527(0x2f1)](_0x17d527(0x40c)+_0x17d527(0x307)+_0x17d527(0x1e5)+_0x17d527(0x486)+_0x17d527(0x29f)+_0x17d527(0x43d)+'?,\x20?)\x20ON\x20C'+'ONFLICT(ch'+_0x17d527(0x481)+_0x17d527(0x2e6)+'T\x20timezone'+_0x17d527(0x2bc)+'timezone',[_0x351aee,_0x3611ac]),!![];}catch(_0x203a96){return warn('[sched]\x20se'+_0x17d527(0x3f2)+_0x17d527(0x402)+'\x20'+(_0x203a96?.[_0x17d527(0x2ce)]||_0x203a96)),![];}}async function executorTick(){const _0x2df469=_0x35766f;if(executorRunning)return;executorRunning=!![];try{const _0x194d1e=await db[_0x2df469(0x396)](_0x2df469(0x29d)+'ROM\x20schedu'+'les\x20WHERE\x20'+_0x2df469(0x294)+'1\x20ORDER\x20BY'+_0x2df469(0x484));if(!_0x194d1e||_0x194d1e[_0x2df469(0x1ce)]===-0x7*0x58f+0x1c09+0x20*0x57)return;for(const _0x12ef05 of _0x194d1e){try{const _0x2ab7d5=_0x12ef05[_0x2df469(0x25e)]||await getChatTimezone(_0x12ef05[_0x2df469(0x258)])||DEFAULT_TIMEZONE,_0x2163da=DateTime[_0x2df469(0x40e)]()[_0x2df469(0x1e2)](_0x2ab7d5),_0x4833ed=Math['floor'](_0x2163da['toSeconds']());let _0x2e689b=![],_0x36bda8=![];if(_0x12ef05[_0x2df469(0x1b9)]&&Number(_0x12ef05[_0x2df469(0x1b9)])>0x248a+-0x98d+-0x1afd)_0x36bda8=!![],Number(_0x12ef05[_0x2df469(0x1b9)])<=_0x4833ed&&(_0x2e689b=!![]);else{if(_0x12ef05[_0x2df469(0x249)]){const _0x19205f=_0x2163da['toFormat']('HH:mm');if(_0x19205f===_0x12ef05[_0x2df469(0x249)]){const _0x228c9f={'id':_0x12ef05['id'],'frequency':_0x12ef05[_0x2df469(0x23b)]||'daily','last_sent':_0x12ef05['last_sent']||0x18eb*-0x1+-0xa1f*-0x1+0x766*0x2};shouldSendSlot(_0x228c9f,_0x2163da)&&(_0x2e689b=!![]);}}}if(!_0x2e689b)continue;const _0x4bc0eb=await sendScheduledMessage(_0x12ef05);if(_0x4bc0eb['success']){if(_0x36bda8){const _0x187672=await removeScheduleByDBId(_0x12ef05['id']);_0x187672?info(_0x2df469(0x1e6)+'livered\x20an'+_0x2df469(0x41b)+_0x2df469(0x1ee)+'='+_0x12ef05['id']+_0x2df469(0x298)+_0x12ef05[_0x2df469(0x258)]):(await updateScheduleFields(_0x12ef05['id'],{'enabled':0x0,'last_sent':_0x4833ed}),warn(_0x2df469(0x1e6)+_0x2df469(0x459)+_0x2df469(0x423)+_0x12ef05['id']+_0x2df469(0x298)+_0x12ef05[_0x2df469(0x258)]+(_0x2df469(0x1c0)+_0x2df469(0x361)+'e\x20from\x20DB;'+_0x2df469(0x30e)+_0x2df469(0x320))));}else await updateScheduleFields(_0x12ef05['id'],{'last_sent':_0x4833ed,'send_attempts':0x0}),info(_0x2df469(0x1e6)+'livered\x20re'+_0x2df469(0x24d)+'='+_0x12ef05['id']+_0x2df469(0x298)+_0x12ef05[_0x2df469(0x258)]+_0x2df469(0x3a9)+_0x12ef05[_0x2df469(0x249)]+'\x20('+_0x2ab7d5+')');}else{const _0x45bca6=(_0x12ef05[_0x2df469(0x477)+_0x2df469(0x2d0)]||-0x2225+0x1*-0x615+0x283a)+(-0x1*-0x1af2+-0x1eb8+-0x3c7*-0x1);_0x4bc0eb[_0x2df469(0x214)+'ble']||_0x45bca6>=MAX_DB_ATTEMPTS?(error(_0x2df469(0x387)+'='+_0x12ef05['id']+(_0x2df469(0x39a)+_0x2df469(0x3a4)+_0x2df469(0x1d3)+'unrecovera'+'ble\x20error\x20'+_0x2df469(0x35a)+_0x2df469(0x47d)+'hed).\x20Disa'+_0x2df469(0x2bf)+_0x2df469(0x46c))),await updateScheduleFields(_0x12ef05['id'],{'enabled':0x0,'last_attempt':_0x4833ed})):(warn(_0x2df469(0x387)+'='+_0x12ef05['id']+(_0x2df469(0x39a)+'livery\x20att'+_0x2df469(0x36e))+_0x45bca6+(_0x2df469(0x22b)+'ry\x20on\x20next'+_0x2df469(0x1b7))),await updateScheduleFields(_0x12ef05['id'],{'send_attempts':_0x45bca6,'last_attempt':_0x4833ed}));}}catch(_0x2eb01e){warn(_0x2df469(0x2ee)+_0x2df469(0x2a9)+_0x2df469(0x3bb)+_0x2df469(0x1c2)+_0x12ef05['id']+':\x20'+(_0x2eb01e?.[_0x2df469(0x2ce)]||_0x2eb01e));}}}catch(_0xb90aac){error(_0x2df469(0x2ee)+_0x2df469(0x3d5)+_0x2df469(0x37a)+(_0xb90aac?.[_0x2df469(0x2ce)]||_0xb90aac));}finally{executorRunning=![];}}function startSchedulerAligned(){const _0x1de6a5=_0x35766f;stopScheduler();const _0x300430=-0x1b0a6+0x795f*-0x1+-0x31465*-0x1-Date[_0x1de6a5(0x40e)]()%(0x629d+-0x14e7a+0x9cbf*0x3);setTimeout(()=>{const _0x344ab1=_0x1de6a5;executorTick()[_0x344ab1(0x244)](_0x419222=>warn(_0x344ab1(0x252)+_0x344ab1(0x251)+_0x344ab1(0x46e)+':\x20'+(_0x419222?.['message']||_0x419222))),schedulerIntervalHandle=setInterval(()=>{const _0x4228f8=_0x344ab1;executorTick()[_0x4228f8(0x244)](_0x6c951e=>warn(_0x4228f8(0x2ee)+_0x4228f8(0x3d5)+_0x4228f8(0x37a)+(_0x6c951e?.[_0x4228f8(0x2ce)]||_0x6c951e)));},CHECK_INTERVAL_MS),info(_0x344ab1(0x2f0)+_0x344ab1(0x256)+_0x344ab1(0x28e)+_0x344ab1(0x46b)+'nutes)');},_0x300430);}function stopScheduler(){const _0x1d9330=_0x35766f;schedulerIntervalHandle&&(clearInterval(schedulerIntervalHandle),schedulerIntervalHandle=null,info(_0x1d9330(0x2f0)+_0x1d9330(0x256)+_0x1d9330(0x363)));}function extractTextFromMessage(_0x3e9213){const _0x34a30f=_0x35766f;if(!_0x3e9213||!_0x3e9213[_0x34a30f(0x2ce)])return'';const _0x3ce971=_0x3e9213[_0x34a30f(0x2ce)];if(_0x3ce971['conversati'+'on'])return _0x3ce971[_0x34a30f(0x1bf)+'on'];if(_0x3ce971[_0x34a30f(0x2a1)+_0x34a30f(0x3de)]?.['text'])return _0x3ce971[_0x34a30f(0x2a1)+'xtMessage'][_0x34a30f(0x431)];if(_0x3ce971[_0x34a30f(0x2b2)+'ge']?.[_0x34a30f(0x462)])return _0x3ce971[_0x34a30f(0x2b2)+'ge']['caption'];if(_0x3ce971[_0x34a30f(0x2ac)+'ge']?.[_0x34a30f(0x462)])return _0x3ce971[_0x34a30f(0x2ac)+'ge'][_0x34a30f(0x462)];if(_0x3ce971['buttonsRes'+_0x34a30f(0x322)+'ge']?.[_0x34a30f(0x36a)+_0x34a30f(0x398)])return _0x3ce971[_0x34a30f(0x2cd)+_0x34a30f(0x322)+'ge'][_0x34a30f(0x36a)+_0x34a30f(0x398)];if(_0x3ce971[_0x34a30f(0x226)+_0x34a30f(0x441)]?.['singleSele'+_0x34a30f(0x375)]?.['selectedRo'+'wId'])return _0x3ce971['listRespon'+'seMessage'][_0x34a30f(0x219)+_0x34a30f(0x375)]['selectedRo'+_0x34a30f(0x345)];return'';}function splitFirstLinePreserveRest(_0x3c2b9a){const _0x4d76fa=_0x35766f,_0x40d79d=_0x3c2b9a['split'](/\r?\n/),_0x318ba9=_0x40d79d[_0x4d76fa(0x1ce)]>0x1b41*-0x1+0x1*-0x1405+-0x7e1*-0x6?_0x40d79d['shift']():'',_0x46bf78=_0x40d79d[_0x4d76fa(0x21c)]('\x0a'),_0x36c310=_0x318ba9[_0x4d76fa(0x3dd)]()[_0x4d76fa(0x225)](/\s+/)[_0x4d76fa(0x433)](Boolean);return{'firstLine':_0x318ba9,'restText':_0x46bf78,'firstTokens':_0x36c310};}function findGpAndCleanBodyFromRestAndFirst(_0x43e1a9,_0x2288ef){const _0x4ddf0f=_0x35766f,_0x55bc47=(_0x2288ef&&_0x2288ef[_0x4ddf0f(0x1ce)]?_0x2288ef:'')+'\x0a'+(_0x43e1a9||''),_0x5c2abf=_0x55bc47[_0x4ddf0f(0x44d)](/\bgp[:\s]+(\S+)/i),_0x49b133=_0x5c2abf?_0x5c2abf[-0x19d8*-0x1+-0x18ca+-0x10d][_0x4ddf0f(0x3dd)]():null;let _0x1d8795=(_0x2288ef||'')['split'](/\r?\n/);if(!_0x1d8795||_0x1d8795[_0x4ddf0f(0x1ce)]===-0x1463*0x1+-0x266e+-0x7*-0x867||_0x1d8795[_0x4ddf0f(0x466)](_0x5b2e38=>!_0x5b2e38['trim']()))return{'gpValue':_0x49b133,'cleanedBody':''};const _0x5b1d97=_0x1d8795[_0x4ddf0f(0x1da)](_0x5f599a=>_0x5f599a[_0x4ddf0f(0x3d6)](/^\s*gp[:\s]+\S+\s*$/i,'')[_0x4ddf0f(0x3d6)](/\s*\bgp[:\s]+\S+\s*$/i,'')['trimEnd']())[_0x4ddf0f(0x433)](_0x5b577a=>_0x5b577a[_0x4ddf0f(0x1ce)]>-0x1fe4+0x2*0xf9a+0xb0),_0x39904d=_0x5b1d97[_0x4ddf0f(0x21c)]('\x0a')[_0x4ddf0f(0x3dd)]();return{'gpValue':_0x49b133,'cleanedBody':_0x39904d};}function extractInlineAfterToken(_0x6de4cf,_0x2b5e66){const _0x5d988c=_0x35766f;if(!_0x6de4cf||!_0x2b5e66)return'';try{const _0x53e3b6=new RegExp('\x5cb'+_0x2b5e66[_0x5d988c(0x3d6)](/[.*+?^${}()|[\]\\]/g,_0x5d988c(0x377))+'\x5cb'),_0x36ba18=_0x6de4cf['match'](_0x53e3b6);if(!_0x36ba18)return'';const _0x481e56=_0x6de4cf[_0x5d988c(0x3f5)](_0x36ba18[-0xfc0+0x13b9+0x71*-0x9]),_0x7452a3=_0x481e56+_0x36ba18[0x1924+0xc*-0x269+-0x1e4*-0x2][_0x5d988c(0x1ce)];let _0x293e70=_0x6de4cf['slice'](_0x7452a3)[_0x5d988c(0x3d6)](/^\s+/,'');return _0x293e70=_0x293e70[_0x5d988c(0x3d6)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x5d988c(0x3dd)](),_0x293e70;}catch(_0x48eb66){return'';}}const USAGE=_0x35766f(0x242)+_0x35766f(0x30d)+_0x35766f(0x1cc)+_0x35766f(0x384)+_0x35766f(0x1fe)+_0x35766f(0x28c)+_0x35766f(0x344)+_0x35766f(0x412)+_0x35766f(0x421)+_0x35766f(0x2d9)+_0x35766f(0x2ae)+'Message\x20ca'+_0x35766f(0x216)+_0x35766f(0x1f4)+_0x35766f(0x3ad)+_0x35766f(0x21b)+_0x35766f(0x24c)+_0x35766f(0x3fb)+_0x35766f(0x1f2)+_0x35766f(0x21f)+_0x35766f(0x442)+'mm>`\x20`[Nda'+_0x35766f(0x482)+_0x35766f(0x3d1)+'â€£\x20One-off\x20'+_0x35766f(0x311)+'If\x20`Ndays`'+'\x20is\x20provid'+_0x35766f(0x211)+_0x35766f(0x3d3)+'day\x20+\x20Nday'+_0x35766f(0x24a)+'\x20time.\x0a\x0a>\x20'+_0x35766f(0x2de)+'t*\x0aâ€£\x20View\x20'+_0x35766f(0x3ed)+_0x35766f(0x325)+_0x35766f(0x1b8)+_0x35766f(0x32b)+_0x35766f(0x253)+'\x20|\x20number,'+'number,...'+'\x20|\x20all>`\x0aâ€£'+_0x35766f(0x315)+_0x35766f(0x2d6)+_0x35766f(0x3d9)+_0x35766f(0x395)+'s.\x0a\x0a>\x20*sch'+_0x35766f(0x420)+_0x35766f(0x288)+'`<HH:mm\x20|\x20'+'in\x20N\x20hours'+_0x35766f(0x27c)+_0x35766f(0x393)+_0x35766f(0x2df)+_0x35766f(0x1c1)+_0x35766f(0x2ad)+_0x35766f(0x468)+_0x35766f(0x39d)+_0x35766f(0x42e)+_0x35766f(0x1bb)+_0x35766f(0x261)+_0x35766f(0x28f)+'peat\x20inter'+_0x35766f(0x334)+_0x35766f(0x382)+_0x35766f(0x1e1)+_0x35766f(0x3f7)+_0x35766f(0x335)+'ed\x20disable'+_0x35766f(0x253)+'>`\x0aâ€£\x20Tempo'+_0x35766f(0x282)+_0x35766f(0x3ba)+_0x35766f(0x359)+_0x35766f(0x21d)+_0x35766f(0x46a)+_0x35766f(0x3bd)+_0x35766f(0x2e0)+_0x35766f(0x3c3)+'reviously\x20'+_0x35766f(0x204)+'essage.\x0a',processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x1bb9+-0xa*-0x92+-0x1*-0x1619)*(-0xa*0x19f+0x1*0x79d+-0xc81*-0x1);function markCmdProcessed(_0x3e98d8){const _0x4b582b=_0x35766f;if(!_0x3e98d8)return;if(processedCmdKeys[_0x4b582b(0x235)](_0x3e98d8))try{clearTimeout(processedCmdKeys[_0x4b582b(0x3db)](_0x3e98d8));}catch(_0x1eb127){}const _0x45f36f=setTimeout(()=>processedCmdKeys[_0x4b582b(0x32e)](_0x3e98d8),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x4b582b(0x3ac)](_0x3e98d8,_0x45f36f);}function isCmdProcessed(_0x4661dc){const _0x96d2f7=_0x35766f;return _0x4661dc&&processedCmdKeys[_0x96d2f7(0x235)](_0x4661dc);}async function resolveDefaultChatJidsForUser(_0x2f21be){const _0x1c9e5e=_0x35766f;try{const _0x2fe328=await getDefault(_0x2f21be)[_0x1c9e5e(0x244)](()=>null);if(!_0x2fe328||Array[_0x1c9e5e(0x45e)](_0x2fe328)&&_0x2fe328[_0x1c9e5e(0x1ce)]===0x2fb+0x1*-0x15b3+0x12b8)return[];const _0x1de93b=Array['isArray'](_0x2fe328)?_0x2fe328:[_0x2fe328],_0x373278=[];for(const _0x48c72b of _0x1de93b){try{const _0x324ae8=await getConnection(_0x48c72b)['catch'](()=>null);if(Array['isArray'](_0x324ae8))_0x373278['push'](..._0x324ae8);else{if(_0x324ae8)_0x373278[_0x1c9e5e(0x208)](String(_0x324ae8));}}catch(_0x3dc8b4){warn('[sched]\x20re'+_0x1c9e5e(0x1e3)+'nnection\x20'+_0x48c72b+_0x1c9e5e(0x1fa)+(_0x3dc8b4?.[_0x1c9e5e(0x2ce)]||_0x3dc8b4));}}return uniqArray(_0x373278);}catch(_0x28e504){return warn(_0x1c9e5e(0x3a1)+_0x1c9e5e(0x2d2)+_0x1c9e5e(0x292)+'ForUser\x20er'+'ror:\x20'+(_0x28e504?.[_0x1c9e5e(0x2ce)]||_0x28e504)),[];}}async function getCombinedSchedulesForChats(_0x19d678){const _0xee6ea8=_0x35766f,_0x3da094=[];for(const _0x533276 of _0x19d678){const _0x351d1d=await listSchedulesForChat(_0x533276);for(const _0x51f5ff of _0x351d1d){_0x3da094[_0xee6ea8(0x208)](Object['assign']({},_0x51f5ff,{'chat_jid':_0x533276}));}}return _0x3da094;}async function resolveNumberToDbId(_0x11f29a,_0x208d41){const _0x4e5819=_0x35766f;if(!_0x11f29a||!Number[_0x4e5819(0x2c2)](_0x11f29a)||_0x11f29a<-0x14d*-0x1b+0x6b*-0x1+0xbd*-0x2f)return null;const _0x198676=await getCombinedSchedulesForChats(_0x208d41);if(!_0x198676||_0x198676[_0x4e5819(0x1ce)]<_0x11f29a)return null;return _0x198676[_0x11f29a-(-0xdc9*0x2+-0xb2a+0x2f*0xd3)]['id'];}async function findStoredMatchFromFindings(_0x16b582=[]){const _0x29da15=_0x35766f;try{const _0x5bcad3=await listSudo();if(!Array[_0x29da15(0x45e)](_0x5bcad3)||_0x5bcad3[_0x29da15(0x1ce)]===0x127+0x204b+-0x2172)return null;const _0x3c3c8e=new Set(_0x5bcad3[_0x29da15(0x1da)](String));for(const _0x9879ad of _0x16b582||[]){if(!_0x9879ad||typeof _0x9879ad[_0x29da15(0x3e4)]!==_0x29da15(0x3c9))continue;const _0x5df00b=normalizeToJid(_0x9879ad[_0x29da15(0x3e4)]);if(_0x5df00b&&_0x3c3c8e['has'](_0x5df00b))return _0x5df00b;if(_0x3c3c8e[_0x29da15(0x235)](_0x9879ad[_0x29da15(0x3e4)]))return _0x9879ad[_0x29da15(0x3e4)];const _0x6dca85=String(_0x9879ad[_0x29da15(0x3e4)])[_0x29da15(0x225)]('@')[-0x264c+0x18c0+-0x66*-0x22][_0x29da15(0x225)](':')[0x1b69+0x2eb+-0x1e54];if(_0x6dca85)for(const _0x591ebe of _0x5bcad3){const _0x3b2833=String(_0x591ebe)[_0x29da15(0x225)]('@')[0x36a*0x3+-0x1*-0x847+-0x1*0x1285];if(_0x3b2833&&_0x3b2833===_0x6dca85)return _0x591ebe;}}return null;}catch(_0x32df09){return warn(_0x29da15(0x3eb)+'ndStoredMa'+_0x29da15(0x206)+'dings\x20erro'+'r:\x20'+(_0x32df09?.['message']||_0x32df09)),null;}}export async function onMessage(_0x393d6f){const _0x52e29a=_0x35766f;try{if(!_0x393d6f||!_0x393d6f[_0x52e29a(0x232)]||!_0x393d6f[_0x52e29a(0x2ce)])return;const _0x2a4375=String(_0x393d6f['key'][_0x52e29a(0x26b)]||'')+'::'+String(_0x393d6f[_0x52e29a(0x232)]['id']||_0x393d6f[_0x52e29a(0x232)]['participan'+'t']||'');if(isCmdProcessed(_0x2a4375))return;markCmdProcessed(_0x2a4375);if(!_0x393d6f[_0x52e29a(0x41a)])return;const _0x731157=typeof _0x393d6f[_0x52e29a(0x431)]===_0x52e29a(0x3c9)&&_0x393d6f[_0x52e29a(0x431)][_0x52e29a(0x3dd)]()[_0x52e29a(0x1ce)]?_0x393d6f[_0x52e29a(0x431)]:extractTextFromMessage(_0x393d6f)||'';if(!_0x731157)return;const _0x1eddf7=_0x393d6f['key'][_0x52e29a(0x26b)],_0x578008=typeof _0x1eddf7==='string'&&_0x1eddf7['endsWith'](_0x52e29a(0x429));if(_0x578008){let _0x1648b2=![];try{_0x1648b2=await isadmin(botRef,_0x393d6f);}catch(_0x563476){warn(_0x52e29a(0x1ff)+_0x52e29a(0x33b)+_0x52e29a(0x3e0)),_0x1648b2=![];}if(!_0x1648b2)return;const _0x2d360e=String(_0x731157)[_0x52e29a(0x3dd)](),{firstLine:_0x48c0c0,restText:_0x1c271f,firstTokens:_0x53acdc}=splitFirstLinePreserveRest(_0x2d360e),_0x10ba47=(_0x53acdc[-0x1*-0xbe9+0x7e9+-0x13d2]||'')[_0x52e29a(0x3c6)+'e']();if(!commands['includes'](_0x10ba47))return;const _0x508b79=(_0x53acdc[0x1dc4+0x21f7+-0x6*0xa9f]||'')[_0x52e29a(0x3c6)+'e'](),_0x91377f=_0x393d6f[_0x52e29a(0x232)][_0x52e29a(0x31b)+'t']||_0x393d6f[_0x52e29a(0x232)][_0x52e29a(0x44c)]||_0x393d6f[_0x52e29a(0x232)]['remoteJid']||'',_0x116220=(_0x91377f||'')[_0x52e29a(0x225)]('@')[0x34e+-0x213+0x2d*-0x7],_0x5262a4=await resolveDefaultChatJidsForUser(_0x116220),_0xb52f59=_0x1eddf7;if(!_0x5262a4||_0x5262a4[_0x52e29a(0x1ce)]===-0x22d4+-0x728+-0x4*-0xa7f){await sendWithRetry(_0xb52f59,{'text':_0x52e29a(0x1c3)+'resolve\x20yo'+'ur\x20default'+'\x20connectio'+_0x52e29a(0x48a)+_0x52e29a(0x264)+'th\x20/setdef'+_0x52e29a(0x3fd)});return;}await handleSchedCommandGroup(_0x393d6f,{'firstLine':_0x48c0c0,'restText':_0x1c271f,'firstTokens':_0x53acdc,'sub':_0x508b79,'defaultChatJids':_0x5262a4,'confirmationTarget':_0xb52f59,'senderJid':_0x91377f});return;}const _0x1005a7=Boolean(_0x393d6f[_0x52e29a(0x232)]['fromMe']);let _0x1ad752=null;if(_0x1005a7){const _0x44ba56=getBotJid();if(!_0x44ba56){warn(_0x52e29a(0x31f)+':\x20bot\x20JID\x20'+_0x52e29a(0x1cb)+_0x52e29a(0x329)+'plies\x20(fro'+_0x52e29a(0x1ed));return;}_0x1ad752=_0x44ba56;}else{let _0x1fde2d=![];try{_0x1fde2d=await isSudo(botRef,_0x393d6f);}catch(_0x264bf8){_0x1fde2d=![];}if(!_0x1fde2d)return;const _0x48dfe0=userJidFromCtx(_0x393d6f)||{'findings':[]},_0x1b6671=await findStoredMatchFromFindings(_0x48dfe0[_0x52e29a(0x316)]||[]);if(!_0x1b6671)return;_0x1ad752=_0x1b6671;}const _0x251cc6=String(_0x731157),{firstLine:_0x3d0c02,restText:_0x1045df,firstTokens:_0x3dbc2d}=splitFirstLinePreserveRest(_0x251cc6),_0x4ab6aa=(_0x3dbc2d[0x2213+0x2bd*0x7+-0x353e]||'')[_0x52e29a(0x3c6)+'e']();if(!commands[_0x52e29a(0x29c)](_0x4ab6aa))return;const _0x5322fa=(_0x3dbc2d[-0x1b*0x52+-0xd1*-0x3+0x634]||'')[_0x52e29a(0x3c6)+'e']();if(!_0x5322fa||_0x5322fa==='help'){await sendWithRetry(_0x1ad752,{'text':USAGE});return;}const _0x174cfd=['once',_0x52e29a(0x213),_0x52e29a(0x306),_0x52e29a(0x32e),'edit',_0x52e29a(0x23b),_0x52e29a(0x274),_0x52e29a(0x473)],{gpValue:_0x409cbd,cleanedBody:_0x38a0f6}=findGpAndCleanBodyFromRestAndFirst(_0x3d0c02,_0x1045df);if(_0x174cfd[_0x52e29a(0x29c)](_0x5322fa)&&!_0x409cbd){await sendWithRetry(_0x1ad752,{'text':'PM\x20usage:\x20'+_0x52e29a(0x2b5)+':<alias|ji'+_0x52e29a(0x3cd)+_0x52e29a(0x445)+_0x52e29a(0x201)+_0x52e29a(0x3b4)+'xample:\x0asc'+_0x52e29a(0x2ed)+_0x52e29a(0x341)+_0x52e29a(0x39e)+'\x20lines\x0agp:'+_0x52e29a(0x3cf)});return;}let _0x52d782=[];if(_0x409cbd){const _0x200ce1=_0x409cbd[_0x52e29a(0x3dd)]();if(_0x200ce1[_0x52e29a(0x3c6)+'e']()===_0x52e29a(0x396))_0x52d782=await _0x1ebf58[_0x52e29a(0x27b)+'ids']();else{const _0x64c3d7=await _0x1ebf58[_0x52e29a(0x255)+'e'](_0x200ce1);if(_0x64c3d7)_0x52d782=[_0x64c3d7];else{if(_0x200ce1['includes']('@'))_0x52d782=[_0x1ebf58[_0x52e29a(0x34a)+'oUserJid'](_0x200ce1)];}}if(_0x174cfd[_0x52e29a(0x29c)](_0x5322fa)&&(!_0x52d782||_0x52d782['length']===-0x1feb+-0xd15+0x4*0xb40)){await sendWithRetry(_0x1ad752,{'text':_0x52e29a(0x1c3)+'resolve\x20gp'+_0x52e29a(0x1d5)+_0x409cbd+(_0x52e29a(0x202)+_0x52e29a(0x2e8)+_0x52e29a(0x379)+_0x52e29a(0x209))});return;}}await handleSchedCommandPM(_0x393d6f,{'sub':_0x5322fa,'firstLine':_0x3d0c02,'restText':_0x1045df,'firstTokens':_0x3dbc2d,'targetChatJids':_0x52d782,'confirmationTarget':_0x1ad752,'senderJid':_0x393d6f['key'][_0x52e29a(0x31b)+'t']||_0x393d6f[_0x52e29a(0x232)][_0x52e29a(0x44c)]||'','cleanedBody':_0x38a0f6});return;}catch(_0x5214d8){error(_0x52e29a(0x364)+_0x52e29a(0x1d4)+_0x52e29a(0x2ba)+(_0x5214d8?.[_0x52e29a(0x2ce)]||_0x5214d8));}}async function handleSchedCommandGroup(_0x50283c,{firstLine:_0x3af747,restText:_0x128ad1,firstTokens:_0x1cfa95,sub:_0x361915,defaultChatJids:_0x5a8764,confirmationTarget:_0x4678c5,senderJid:_0x267c3c}){const _0x349671=_0x35766f;try{if(!_0x361915||_0x361915===_0x349671(0x371)){await sendWithRetry(_0x4678c5,{'text':USAGE});return;}if(_0x361915===_0x349671(0x44e)){const _0x3139b5=_0x1cfa95[0x19c+0xe5e+-0xff8],_0x5844f7=_0x1cfa95[0x2170+0x58*-0x20+-0x166d*0x1]&&/^\d+$/[_0x349671(0x455)](_0x1cfa95[0x1ad2+-0xac*0x39+0xb7d])?Number(_0x1cfa95[0x1*0x13b2+0x1*0x19c6+0xf27*-0x3]):null;let _0x482ccb='';if(_0x3139b5){const _0x4fdaf9=new RegExp('\x5cb'+_0x3139b5[_0x349671(0x3d6)](/[.*+?^${}()|[\]\\]/g,_0x349671(0x377))+'\x5cb'),_0x34f202=_0x3af747['match'](_0x4fdaf9);if(_0x34f202){const _0x32248d=_0x3af747[_0x349671(0x3f5)](_0x34f202[-0x2262+0x1*0x23f6+-0x194]),_0x448f2a=_0x32248d+_0x34f202[-0x3c1*-0x1+-0xb34+-0x773*-0x1][_0x349671(0x1ce)];_0x482ccb=_0x3af747[_0x349671(0x2f8)](_0x448f2a)[_0x349671(0x3d6)](/^\s*/,'');if(_0x482ccb&&/^\d+/[_0x349671(0x455)](_0x482ccb))_0x482ccb=_0x482ccb[_0x349671(0x3d6)](/^\d+\s*/,'');}}const _0x3ae9a8=_0x482ccb&&_0x128ad1?_0x482ccb+'\x0a'+_0x128ad1:_0x482ccb||_0x128ad1||'';if(!_0x3139b5||!_0x3ae9a8||_0x3ae9a8[_0x349671(0x3dd)]()['length']===-0x22f4+0x1542+0xdb2){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x293)+'ed\x20once\x20<H'+_0x349671(0x200)+_0x349671(0x1c7)+'ge...>'});return;}const _0xa14934=[];for(const _0x1af825 of _0x5a8764){const _0xaeac57=await getChatTimezone(_0x1af825)||DEFAULT_TIMEZONE,_0x297c94=parseTimeToken(_0x3139b5,_0xaeac57);if(!_0x297c94){_0xa14934['push']({'chat':_0x1af825,'ok':![],'reason':'parse_fail'+'ed'});continue;}if(_0x297c94[_0x349671(0x297)]===_0x349671(0x2dd)){const _0x4faf61=_0x297c94['dt'],_0x50ef08=Math[_0x349671(0x446)](_0x4faf61[_0x349671(0x48d)]()/(0x1*0x21bd+-0x20b3*-0x1+-0x3e88)),_0x382ee4=await addScheduleRow({'chat_jid':_0x1af825,'message':_0x3ae9a8,'time':null,'send_at':_0x50ef08,'frequency':_0x349671(0x44e),'timezone':_0x4faf61[_0x349671(0x1d1)]||_0xaeac57,'creator_jid':_0x267c3c});if(_0x382ee4)_0xa14934[_0x349671(0x208)]({'chat':_0x1af825,'ok':!![],'id':_0x382ee4,'when':_0x4faf61[_0x349671(0x386)+_0x349671(0x30f)](DateTime['DATETIME_M'+'ED'])});else _0xa14934[_0x349671(0x208)]({'chat':_0x1af825,'ok':![],'reason':_0x349671(0x465)});continue;}if(_0x297c94[_0x349671(0x297)]===_0x349671(0x22d)){const [_0x5c4406,_0x2777cc]=_0x297c94[_0x349671(0x22d)]['split'](':')[_0x349671(0x1da)](Number);let _0x1684af=DateTime['now']()[_0x349671(0x1e2)](_0xaeac57),_0x53ef5e=_0x1684af['startOf']('day')['set']({'hour':_0x5c4406,'minute':_0x2777cc,'second':0x0,'millisecond':0x0});if(_0x5844f7&&Number[_0x349671(0x2c2)](_0x5844f7)&&_0x5844f7>=0xf24+0x2*0xc86+0x477*-0x9)_0x53ef5e=_0x53ef5e['plus']({'days':Number(_0x5844f7)});else{if(_0x53ef5e<=_0x1684af)_0x53ef5e=_0x53ef5e[_0x349671(0x1df)]({'days':0x1});}const _0x150c26=Math[_0x349671(0x446)](_0x53ef5e['toMillis']()/(0x5*0x55d+0x1*-0x1c2f+0x546)),_0x30cb5a=await addScheduleRow({'chat_jid':_0x1af825,'message':_0x3ae9a8,'time':null,'send_at':_0x150c26,'frequency':_0x349671(0x44e),'timezone':_0xaeac57,'creator_jid':_0x267c3c});if(_0x30cb5a)_0xa14934[_0x349671(0x208)]({'chat':_0x1af825,'ok':!![],'id':_0x30cb5a,'when':_0x53ef5e[_0x349671(0x386)+'ring'](DateTime[_0x349671(0x2f6)+'ED'])});else _0xa14934[_0x349671(0x208)]({'chat':_0x1af825,'ok':![],'reason':'db_failed'});continue;}_0xa14934[_0x349671(0x208)]({'chat':_0x1af825,'ok':![],'reason':'unsupporte'+_0x349671(0x27f)});}const _0x53a557=_0xa14934[_0x349671(0x433)](_0x5dd007=>_0x5dd007['ok']),_0x579a5f=_0xa14934[_0x349671(0x433)](_0x25af15=>!_0x25af15['ok']);let _0xaa7284='';if(_0x53a557[_0x349671(0x1ce)]){_0xaa7284+=_0x349671(0x268)+_0x349671(0x1bd)+'r\x20'+_0x53a557['length']+(_0x349671(0x20d)+_0x349671(0x3f1)+_0x349671(0x409));for(const _0x421c15 of _0x53a557)_0xaa7284+='â€¢\x20'+_0x421c15[_0x349671(0x22e)]+'\x20->\x20id:'+_0x421c15['id']+'\x20at\x20'+_0x421c15[_0x349671(0x366)]+'\x0a';}if(_0x579a5f[_0x349671(0x1ce)]){_0xaa7284+=_0x349671(0x278)+'\x20'+_0x579a5f['length']+(_0x349671(0x20d)+_0x349671(0x3f1)+'s):\x0a');for(const _0x43fcea of _0x579a5f)_0xaa7284+='â€¢\x20'+_0x43fcea[_0x349671(0x22e)]+_0x349671(0x3bc)+_0x43fcea[_0x349671(0x333)]+'\x0a';}await sendWithRetry(_0x4678c5,{'text':_0xaa7284[_0x349671(0x3dd)]()||_0x349671(0x340)+'es\x20created'+'.'});return;}if(_0x361915==='add'){if(!_0x1cfa95[0xe3d+0x4*-0x315+-0x1e7]){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x293)+_0x349671(0x337)+':mm|YYYY-M'+_0x349671(0x2be)+'|in\x20N\x20hour'+_0x349671(0x3d0)+_0x349671(0x47b)+_0x349671(0x34d)});return;}const _0x2cc1b2=_0x1cfa95[-0x456+-0xf69+0x13c1],_0x36712c=_0x1cfa95[0x1*0x14b1+-0x1797+0x2e9]&&/^\d+$/['test'](_0x1cfa95[0x213*-0x6+-0xa3*0x17+0x1b1a])?Number(_0x1cfa95[-0x8d9*-0x1+-0x15c8+-0x679*-0x2]):null;let _0x38243a='';const _0x2c5e63=new RegExp('\x5cb'+_0x2cc1b2[_0x349671(0x3d6)](/[.*+?^${}()|[\]\\]/g,_0x349671(0x377))+'\x5cb'),_0x5b97ab=_0x3af747[_0x349671(0x44d)](_0x2c5e63);if(_0x5b97ab){const _0x13391d=_0x3af747[_0x349671(0x3f5)](_0x5b97ab[0x11b4+-0x2660+-0x1c*-0xbd]),_0x432503=_0x13391d+_0x5b97ab[-0x22ac+0x14*0x1ae+0x114]['length'];_0x38243a=_0x3af747[_0x349671(0x2f8)](_0x432503)[_0x349671(0x3d6)](/^\s*/,'');if(_0x38243a&&/^\d+/['test'](_0x38243a))_0x38243a=_0x38243a[_0x349671(0x3d6)](/^\d+\s*/,'');}const _0x5612e1=_0x38243a&&_0x128ad1?_0x38243a+'\x0a'+_0x128ad1:_0x38243a||_0x128ad1||'';if(!_0x5612e1||_0x5612e1[_0x349671(0x3dd)]()[_0x349671(0x1ce)]===0x924+-0x2c*-0xb0+0x2764*-0x1){await sendWithRetry(_0x4678c5,{'text':'Please\x20pro'+_0x349671(0x275)+_0x349671(0x31d)+_0x349671(0x2d3)+'fter\x20time\x20'+_0x349671(0x2d1)+_0x349671(0x406)+_0x349671(0x25b)});return;}const _0x12abad=[];for(const _0x9d2d61 of _0x5a8764){const _0x5231ce=await getChatTimezone(_0x9d2d61)||DEFAULT_TIMEZONE,_0x362239=parseTimeToken(_0x2cc1b2,_0x5231ce);if(!_0x362239){_0x12abad[_0x349671(0x208)]({'chat':_0x9d2d61,'ok':![],'reason':_0x349671(0x284)+'ed'});continue;}const _0x3fbd5a=_0x267c3c;if(_0x362239[_0x349671(0x297)]===_0x349671(0x2dd)){const _0x43bd30=_0x362239['dt'],_0x9cd4a3=Math[_0x349671(0x446)](_0x43bd30[_0x349671(0x48d)]()/(0x22d+-0x201c+0x21d7)),_0x4b9bca=await addScheduleRow({'chat_jid':_0x9d2d61,'message':_0x5612e1,'time':null,'send_at':_0x9cd4a3,'frequency':_0x349671(0x44e),'timezone':_0x43bd30['zoneName']||_0x5231ce,'creator_jid':_0x3fbd5a});if(_0x4b9bca)_0x12abad[_0x349671(0x208)]({'chat':_0x9d2d61,'ok':!![],'id':_0x4b9bca,'when':_0x43bd30[_0x349671(0x386)+_0x349671(0x30f)](DateTime[_0x349671(0x2f6)+'ED'])});else _0x12abad[_0x349671(0x208)]({'chat':_0x9d2d61,'ok':![],'reason':_0x349671(0x465)});continue;}if(_0x362239[_0x349671(0x297)]===_0x349671(0x22d)){const _0x8e0657=_0x362239['hhmm'];if(_0x36712c&&Number[_0x349671(0x2c2)](_0x36712c)&&_0x36712c>=-0x1*-0x33b+0x18a2+-0x1bdc){let _0x56c885=DateTime[_0x349671(0x40e)]()[_0x349671(0x1e2)](_0x5231ce);const [_0x5c308d,_0x13a395]=_0x8e0657[_0x349671(0x225)](':')['map'](Number);let _0x360f6d=_0x56c885[_0x349671(0x205)]('day')[_0x349671(0x3ac)]({'hour':_0x5c308d,'minute':_0x13a395,'second':0x0,'millisecond':0x0});_0x360f6d=_0x360f6d[_0x349671(0x1df)]({'days':Number(_0x36712c)});const _0x4cb999=Math[_0x349671(0x446)](_0x360f6d[_0x349671(0x48d)]()/(-0x6*-0x38b+-0xb6e+-0x5ec)),_0x4bcc73=await addScheduleRow({'chat_jid':_0x9d2d61,'message':_0x5612e1,'time':null,'send_at':_0x4cb999,'frequency':_0x349671(0x44e),'timezone':_0x5231ce,'creator_jid':_0x3fbd5a});if(_0x4bcc73)_0x12abad['push']({'chat':_0x9d2d61,'ok':!![],'id':_0x4bcc73,'when':_0x360f6d[_0x349671(0x386)+_0x349671(0x30f)](DateTime[_0x349671(0x2f6)+'ED'])});else _0x12abad[_0x349671(0x208)]({'chat':_0x9d2d61,'ok':![],'reason':_0x349671(0x465)});continue;}const _0xeec4f8=await addScheduleRow({'chat_jid':_0x9d2d61,'message':_0x5612e1,'time':_0x8e0657,'send_at':null,'frequency':_0x349671(0x3e3),'timezone':_0x5231ce,'creator_jid':_0x3fbd5a});if(_0xeec4f8)_0x12abad[_0x349671(0x208)]({'chat':_0x9d2d61,'ok':!![],'id':_0xeec4f8,'when':_0x8e0657+'\x20('+_0x5231ce+')'});else _0x12abad['push']({'chat':_0x9d2d61,'ok':![],'reason':_0x349671(0x465)});continue;}_0x12abad[_0x349671(0x208)]({'chat':_0x9d2d61,'ok':![],'reason':_0x349671(0x2b3)+_0x349671(0x27f)});}const _0x446930=_0x12abad[_0x349671(0x433)](_0x5ac27d=>_0x5ac27d['ok']),_0x4aa8a7=_0x12abad[_0x349671(0x433)](_0xe5472=>!_0xe5472['ok']);let _0x7625ee='';if(_0x446930[_0x349671(0x1ce)]){_0x7625ee+='Scheduled\x20'+_0x349671(0x392)+_0x446930['length']+(_0x349671(0x20d)+'onnection('+_0x349671(0x409));for(const _0x5a27fb of _0x446930)_0x7625ee+='â€¢\x20'+_0x5a27fb[_0x349671(0x22e)]+_0x349671(0x355)+_0x5a27fb['id']+_0x349671(0x32a)+_0x5a27fb[_0x349671(0x366)]+'\x0a';}if(_0x4aa8a7[_0x349671(0x1ce)]){_0x7625ee+=_0x349671(0x278)+'\x20'+_0x4aa8a7[_0x349671(0x1ce)]+(_0x349671(0x20d)+_0x349671(0x3f1)+_0x349671(0x409));for(const _0x1b2ee7 of _0x4aa8a7)_0x7625ee+='â€¢\x20'+_0x1b2ee7[_0x349671(0x22e)]+'\x20->\x20'+_0x1b2ee7[_0x349671(0x333)]+'\x0a';}await sendWithRetry(_0x4678c5,{'text':_0x7625ee[_0x349671(0x3dd)]()||_0x349671(0x340)+_0x349671(0x2e3)+'.'});return;}if(_0x361915==='list'){const _0x183ae5=await getCombinedSchedulesForChats(_0x5a8764);if(!_0x183ae5[_0x349671(0x1ce)]){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x340)+_0x349671(0x354)+_0x349671(0x400)+'r\x20defaults'+':\x20'+_0x5a8764[_0x349671(0x21c)](',\x20')});return;}const _0x223cdf=_0x183ae5['map']((_0x2277f4,_0xc8b995)=>{const _0x44040c=_0x349671,_0x383256=_0x2277f4['send_at']?DateTime['fromMillis'](Number(_0x2277f4[_0x44040c(0x1b9)])*(0x1*0x118e+-0xaab+0x1*-0x2fb))['setZone'](_0x2277f4[_0x44040c(0x25e)]||DEFAULT_TIMEZONE)[_0x44040c(0x461)]({'suppressSeconds':!![]}):_0x2277f4['time']?_0x2277f4[_0x44040c(0x249)]+'\x20('+(_0x2277f4[_0x44040c(0x25e)]||_0x44040c(0x40a)+_0x44040c(0x328))+')':_0x44040c(0x418),_0x4ff533=(_0x2277f4[_0x44040c(0x2ce)]||'')[_0x44040c(0x225)]('\x0a')['map'](_0x22d068=>_0x22d068['trimEnd']())[_0x44040c(0x21c)]('\x0a');return _0xc8b995+(-0x57d*0x1+-0x6d*0x59+0x2b63)+_0x44040c(0x422)+_0x2277f4['id']+_0x44040c(0x35c)+_0x2277f4['chat_jid']+_0x44040c(0x32a)+_0x383256+'\x20freq:'+(_0x2277f4[_0x44040c(0x23b)]||'daily')+_0x44040c(0x237)+(_0x2277f4[_0x44040c(0x1f9)]?_0x44040c(0x1bc):'no')+_0x44040c(0x1ea)+_0x4ff533;}),_0x83a2a6=_0x349671(0x268)+'for\x20defaul'+'ts\x20('+_0x5a8764[_0x349671(0x21c)](',\x20')+_0x349671(0x43f)+_0x223cdf['join']('\x0a\x0a');await sendWithRetry(_0x4678c5,{'text':_0x83a2a6});return;}if(_0x361915===_0x349671(0x32e)){const _0x374d28=_0x1cfa95[_0x349671(0x2f8)](0x2172+0x439*-0x8+-0x2c*-0x2);let _0x51b17c=_0x374d28[_0x349671(0x21c)]('\x20');if(!_0x51b17c&&_0x128ad1)_0x51b17c=_0x128ad1[_0x349671(0x3dd)]();if(!_0x51b17c){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x293)+_0x349671(0x3da)+_0x349671(0x413)+_0x349671(0x471)+_0x349671(0x324)});return;}if(/^\s*all\s*$/i[_0x349671(0x455)](_0x51b17c)){let _0x3c26ce=0x3+-0x428+0x425;for(const _0x51b9df of _0x5a8764){const _0x8d4c3a=await removeAllSchedulesForChat(_0x51b9df);_0x3c26ce+=_0x8d4c3a;}await sendWithRetry(_0x4678c5,{'text':_0x349671(0x35d)+_0x3c26ce+(_0x349671(0x241)+_0x349671(0x2a7)+_0x349671(0x33a))+_0x5a8764['join'](',\x20')});return;}const _0x1f3b77=_0x51b17c[_0x349671(0x225)](/[\s,]+/)[_0x349671(0x1da)](_0x28527b=>_0x28527b[_0x349671(0x3dd)]())[_0x349671(0x433)](Boolean),_0x6b95c7=_0x1f3b77[_0x349671(0x1da)](_0x4aad60=>Number(_0x4aad60))[_0x349671(0x433)](_0x26efbe=>!Number[_0x349671(0x44b)](_0x26efbe)&&Number[_0x349671(0x2c2)](_0x26efbe)&&_0x26efbe>0x10b4+-0x1a8f+-0x3*-0x349);if(!_0x6b95c7[_0x349671(0x1ce)]){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x42d)+'ndexes\x20pro'+_0x349671(0x450)+_0x349671(0x3b8)+'delete\x201\x202'+_0x349671(0x2c9)+_0x349671(0x3d7)+_0x349671(0x38b)+_0x349671(0x32b)+_0x349671(0x23f)});return;}const _0x5f06a7=[...new Set(_0x6b95c7)],_0x760cb4=await getCombinedSchedulesForChats(_0x5a8764),_0x1023e9=[],_0x22b273=[];for(const _0x335605 of _0x5f06a7){if(_0x335605<0x2488*-0x1+0x5*0x1db+0x1b42||_0x335605>_0x760cb4[_0x349671(0x1ce)]){_0x22b273[_0x349671(0x208)]({'n':_0x335605,'reason':_0x349671(0x38c)});continue;}const _0x2f1a6c=_0x760cb4[_0x335605-(0x1fb5*-0x1+-0x688+0x263e)]['id'],_0x71d6fb=await removeScheduleByDBId(_0x2f1a6c);if(_0x71d6fb)_0x1023e9[_0x349671(0x208)]({'n':_0x335605,'id':_0x2f1a6c});else _0x22b273[_0x349671(0x208)]({'n':_0x335605,'reason':'db\x20delete\x20'+_0x349671(0x47e)});}let _0x531a8='';if(_0x1023e9[_0x349671(0x1ce)])_0x531a8+=_0x349671(0x35d)+_0x1023e9[_0x349671(0x1ce)]+(_0x349671(0x241)+_0x349671(0x37f))+_0x1023e9[_0x349671(0x1da)](_0x31d625=>_0x31d625['n']+_0x349671(0x417)+_0x31d625['id']+')')[_0x349671(0x21c)](',\x20')+'.\x0a';if(_0x22b273[_0x349671(0x1ce)])_0x531a8+=_0x349671(0x448)+_0x349671(0x45d)+_0x22b273[_0x349671(0x1da)](_0x3a7e87=>_0x3a7e87['n']+'('+_0x3a7e87['reason']+')')['join'](',\x20')+'.';await sendWithRetry(_0x4678c5,{'text':_0x531a8[_0x349671(0x3dd)]()||_0x349671(0x1de)+_0x349671(0x41c)});return;}if(_0x361915===_0x349671(0x272)){const _0x44742c=Number(_0x1cfa95[-0x14de+-0x1*0x1403+0x28e3]),_0x53c9c2=_0x1cfa95[-0x17*-0xfa+-0x1*0x1187+-0x4ec]||(_0x128ad1?_0x128ad1['split'](/\r?\n/)[-0x8f5+0xc11*-0x1+0x1506][_0x349671(0x3dd)]():null);if(!_0x44742c||!_0x53c9c2){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x293)+_0x349671(0x221)+_0x349671(0x2f7)+':mm|in\x20N\x20h'+_0x349671(0x280)+_0x349671(0x358)+'m>'});return;}const _0x73772=await getCombinedSchedulesForChats(_0x5a8764);if(!_0x73772||_0x73772[_0x349671(0x1ce)]<_0x44742c){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x340)+'e\x20#'+_0x44742c+(_0x349671(0x22f)+_0x349671(0x457)+_0x349671(0x42b))});return;}const _0x163fba=_0x73772[_0x44742c-(0x59*0x29+-0xd*0x15d+-0x1*-0x379)]['id'];if(!_0x163fba){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x340)+_0x349671(0x218)+_0x44742c+(_0x349671(0x22f)+_0x349671(0x457)+_0x349671(0x42b))});return;}const _0xd72094=parseTimeToken(_0x53c9c2,DEFAULT_TIMEZONE);if(!_0xd72094){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x448)+'parse\x20new\x20'+'time.'});return;}if(_0xd72094[_0x349671(0x297)]===_0x349671(0x2dd)){const _0x4cb5a3=_0xd72094['dt'],_0xa47513=Math[_0x349671(0x446)](_0x4cb5a3['toMillis']()/(0x3*0xc55+0x1fbd+-0x40d4)),_0x1a1849=await updateScheduleFields(_0x163fba,{'send_at':_0xa47513,'time':null,'frequency':_0x349671(0x44e),'timezone':_0x4cb5a3[_0x349671(0x1d1)]||DEFAULT_TIMEZONE});if(_0x1a1849)await sendWithRetry(_0x4678c5,{'text':_0x349671(0x295)+_0x44742c+('\x20updated\x20t'+_0x349671(0x385)+_0x349671(0x318))+_0x4cb5a3['toLocaleSt'+_0x349671(0x30f)](DateTime[_0x349671(0x2f6)+'ED'])+'\x20('+_0x4cb5a3[_0x349671(0x1d1)]+')'});else await sendWithRetry(_0x4678c5,{'text':_0x349671(0x448)+_0x349671(0x28d)+_0x349671(0x281)});return;}else{if(_0xd72094[_0x349671(0x297)]===_0x349671(0x22d)){const _0x49171a=_0xd72094[_0x349671(0x22d)],_0x188b13=_0x73772[_0x44742c-(0x5c*-0x8+0x1e96+-0x1bb5*0x1)],_0xc060ec=_0x188b13[_0x349671(0x25e)]||await getChatTimezone(_0x188b13[_0x349671(0x258)])||DEFAULT_TIMEZONE,_0x3ab24c=await updateScheduleFields(_0x163fba,{'time':_0x49171a,'send_at':null,'frequency':_0x349671(0x3e3),'timezone':_0xc060ec});if(_0x3ab24c)await sendWithRetry(_0x4678c5,{'text':_0x349671(0x295)+_0x44742c+('\x20updated\x20t'+'o\x20recurrin'+_0x349671(0x35b))+_0x49171a+'\x20('+_0xc060ec+')'});else await sendWithRetry(_0x4678c5,{'text':_0x349671(0x448)+'update\x20sch'+_0x349671(0x281)});return;}else{await sendWithRetry(_0x4678c5,{'text':_0x349671(0x3e8)+_0x349671(0x3a7)+_0x349671(0x1d7)+_0x349671(0x488)});return;}}}if(_0x361915==='frequency'){const _0x38495f=Number(_0x1cfa95[0xa21*0x3+0x9*0xb6+0x75b*-0x5]),_0x417ac8=Number(_0x1cfa95[-0x3*-0x26f+0x1a42+-0x218c*0x1]);if(!_0x38495f||!_0x417ac8||_0x417ac8<0x1b1e+-0x3eb+0x1732*-0x1){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x293)+_0x349671(0x302)+_0x349671(0x217)+_0x349671(0x290)+'1\x20daily,\x20n'+_0x349671(0x43a)+_0x349671(0x447)+'.)'});return;}const _0x2292d8=await getCombinedSchedulesForChats(_0x5a8764);if(!_0x2292d8||_0x2292d8[_0x349671(0x1ce)]<_0x38495f){await sendWithRetry(_0x4678c5,{'text':'No\x20schedul'+'e\x20#'+_0x38495f+(_0x349671(0x22f)+_0x349671(0x457)+_0x349671(0x42b))});return;}const _0x332d34=_0x2292d8[_0x38495f-(-0x24dc+0x1dc9+0xc*0x97)]['id'];if(!_0x332d34){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x340)+_0x349671(0x218)+_0x38495f+(_0x349671(0x22f)+_0x349671(0x457)+_0x349671(0x42b))});return;}let _0x1827d2=_0x349671(0x3e3);if(_0x417ac8===0xc80+0x2*0xf34+-0x2ae7)_0x1827d2='daily';else _0x1827d2='every_n_da'+'ys:'+_0x417ac8;const _0x4fd414=await updateScheduleFields(_0x332d34,{'frequency':_0x1827d2});if(_0x4fd414)await sendWithRetry(_0x4678c5,{'text':_0x349671(0x295)+_0x38495f+(_0x349671(0x414)+_0x349671(0x29b))+_0x1827d2});else await sendWithRetry(_0x4678c5,{'text':_0x349671(0x448)+_0x349671(0x1d6)+'quency.'});return;}if(_0x361915===_0x349671(0x274)||_0x361915===_0x349671(0x473)){const _0x33f4b3=Number(_0x1cfa95[-0x1d9f+0x26e2+-0x17*0x67]);if(!_0x33f4b3){await sendWithRetry(_0x4678c5,{'text':'Usage:\x20sch'+_0x349671(0x3df)+_0x361915+_0x349671(0x283)});return;}const _0x16a846=await getCombinedSchedulesForChats(_0x5a8764);if(!_0x16a846||_0x16a846[_0x349671(0x1ce)]<_0x33f4b3){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x340)+'e\x20#'+_0x33f4b3+(_0x349671(0x22f)+'oss\x20your\x20d'+_0x349671(0x42b))});return;}const _0x4650d8=_0x16a846[_0x33f4b3-(0xb12+0xf1c+-0x1*0x1a2d)]['id'];if(!_0x4650d8){await sendWithRetry(_0x4678c5,{'text':_0x349671(0x340)+'e\x20#'+_0x33f4b3+(_0x349671(0x22f)+_0x349671(0x457)+_0x349671(0x42b))});return;}const _0x4dd66f=await updateScheduleFields(_0x4650d8,{'enabled':_0x361915===_0x349671(0x473)?0xc*0x10f+-0x2*0x48a+-0x3*0x135:0x1bb*-0x8+-0xdc5+0x1b9d*0x1});if(_0x4dd66f)await sendWithRetry(_0x4678c5,{'text':_0x349671(0x295)+_0x33f4b3+'\x20'+_0x361915+'d.'});else await sendWithRetry(_0x4678c5,{'text':_0x349671(0x448)+'update\x20ena'+_0x349671(0x1e8)+'.'});return;}await sendWithRetry(_0x4678c5,{'text':USAGE});}catch(_0x80b365){warn(_0x349671(0x3e1)+'ndleSchedC'+_0x349671(0x427)+_0x349671(0x439)+(_0x80b365?.[_0x349671(0x2ce)]||_0x80b365));}}async function handleSchedCommandPM(_0x5c6d7c,{sub:_0x43e1e8,firstLine:_0x2a3585,restText:_0xdc58b6,firstTokens:_0x1ae03d,targetChatJids:_0x239653,confirmationTarget:_0x5eb2d4,senderJid:_0x2abff0,cleanedBody:_0x1dd9a7}){const _0x4bf6f3=_0x35766f;try{if(!_0x43e1e8||_0x43e1e8==='help'){await sendWithRetry(_0x5eb2d4,{'text':USAGE});return;}if(_0x43e1e8===_0x4bf6f3(0x44e)){const _0x1cd95e=_0x1ae03d[0x126a+0x1*0x1f3f+-0x31a7],_0x58d69b=_0x1ae03d[0xa87+0x131d+-0x1da1]&&/^\d+$/[_0x4bf6f3(0x455)](_0x1ae03d[-0x1*0x1039+-0x26eb+-0x3727*-0x1])?Number(_0x1ae03d[-0x1*-0xe+-0x1b2a+0x1b1f*0x1]):null;let _0x8667b0=(_0x1dd9a7||'')[_0x4bf6f3(0x3dd)]();!_0x8667b0&&_0x1cd95e&&(_0x8667b0=extractInlineAfterToken(_0x2a3585,_0x1cd95e));if(!_0x1cd95e||!_0x8667b0||_0x8667b0[_0x4bf6f3(0x3dd)]()['length']===0x2*0xf1+0x2*0xfad+-0x109e*0x2){await sendWithRetry(_0x5eb2d4,{'text':'Usage:\x20sch'+_0x4bf6f3(0x1ec)+'H:mm>\x20[Nda'+_0x4bf6f3(0x1c7)+_0x4bf6f3(0x271)+'include\x20gp'+_0x4bf6f3(0x2f2)+'d|all>)'});return;}const _0x185f9d=[];for(const _0x129cd0 of _0x239653){const _0x3e8f78=await getChatTimezone(_0x129cd0)||DEFAULT_TIMEZONE,_0x3133d1=parseTimeToken(_0x1cd95e,_0x3e8f78);if(!_0x3133d1){_0x185f9d[_0x4bf6f3(0x208)]({'chat':_0x129cd0,'ok':![],'reason':'parse_fail'+'ed'});continue;}if(_0x3133d1[_0x4bf6f3(0x297)]===_0x4bf6f3(0x2dd)){const _0x246e01=_0x3133d1['dt'],_0x31d10a=Math['floor'](_0x246e01[_0x4bf6f3(0x48d)]()/(-0xe6b*0x1+0x4*0x862+-0xf35)),_0x2d1a0c=await addScheduleRow({'chat_jid':_0x129cd0,'message':_0x8667b0,'time':null,'send_at':_0x31d10a,'frequency':_0x4bf6f3(0x44e),'timezone':_0x246e01['zoneName']||_0x3e8f78,'creator_jid':_0x2abff0});if(_0x2d1a0c)_0x185f9d[_0x4bf6f3(0x208)]({'chat':_0x129cd0,'ok':!![],'id':_0x2d1a0c,'when':_0x246e01[_0x4bf6f3(0x386)+_0x4bf6f3(0x30f)](DateTime[_0x4bf6f3(0x2f6)+'ED'])});else _0x185f9d['push']({'chat':_0x129cd0,'ok':![],'reason':_0x4bf6f3(0x465)});continue;}if(_0x3133d1[_0x4bf6f3(0x297)]===_0x4bf6f3(0x22d)){const [_0x599c2a,_0x2c3cef]=_0x3133d1[_0x4bf6f3(0x22d)][_0x4bf6f3(0x225)](':')[_0x4bf6f3(0x1da)](Number);let _0x5244a3=DateTime[_0x4bf6f3(0x40e)]()[_0x4bf6f3(0x1e2)](_0x3e8f78),_0x250ff2=_0x5244a3[_0x4bf6f3(0x205)](_0x4bf6f3(0x26c))[_0x4bf6f3(0x3ac)]({'hour':_0x599c2a,'minute':_0x2c3cef,'second':0x0,'millisecond':0x0});if(_0x58d69b&&Number['isInteger'](_0x58d69b)&&_0x58d69b>=-0xc5*0xb+0x1561+-0xce9)_0x250ff2=_0x250ff2[_0x4bf6f3(0x1df)]({'days':Number(_0x58d69b)});else{if(_0x250ff2<=_0x5244a3)_0x250ff2=_0x250ff2['plus']({'days':0x1});}const _0x16cbae=Math[_0x4bf6f3(0x446)](_0x250ff2[_0x4bf6f3(0x48d)]()/(-0x12bd+0xcbf+0x2*0x4f3)),_0x2a7c9d=await addScheduleRow({'chat_jid':_0x129cd0,'message':_0x8667b0,'time':null,'send_at':_0x16cbae,'frequency':_0x4bf6f3(0x44e),'timezone':_0x3e8f78,'creator_jid':_0x2abff0});if(_0x2a7c9d)_0x185f9d['push']({'chat':_0x129cd0,'ok':!![],'id':_0x2a7c9d,'when':_0x250ff2[_0x4bf6f3(0x386)+_0x4bf6f3(0x30f)](DateTime[_0x4bf6f3(0x2f6)+'ED'])});else _0x185f9d[_0x4bf6f3(0x208)]({'chat':_0x129cd0,'ok':![],'reason':_0x4bf6f3(0x465)});continue;}_0x185f9d[_0x4bf6f3(0x208)]({'chat':_0x129cd0,'ok':![],'reason':'unsupporte'+_0x4bf6f3(0x27f)});}const _0x386812=_0x185f9d['filter'](_0x55b3ec=>_0x55b3ec['ok']),_0x105621=_0x185f9d[_0x4bf6f3(0x433)](_0x365954=>!_0x365954['ok']);let _0x388574='';if(_0x386812[_0x4bf6f3(0x1ce)]){_0x388574+='Scheduled\x20'+_0x4bf6f3(0x1bd)+'r\x20'+_0x386812[_0x4bf6f3(0x1ce)]+(_0x4bf6f3(0x1fb)+':\x0a');for(const _0x5c29a0 of _0x386812)_0x388574+='â€¢\x20'+_0x5c29a0['chat']+_0x4bf6f3(0x355)+_0x5c29a0['id']+_0x4bf6f3(0x3a9)+_0x5c29a0[_0x4bf6f3(0x366)]+'\x0a';}if(_0x105621[_0x4bf6f3(0x1ce)]){_0x388574+=_0x4bf6f3(0x278)+'\x20'+_0x105621[_0x4bf6f3(0x1ce)]+(_0x4bf6f3(0x1fb)+':\x0a');for(const _0x5a4650 of _0x105621)_0x388574+='â€¢\x20'+_0x5a4650[_0x4bf6f3(0x22e)]+_0x4bf6f3(0x3bc)+_0x5a4650[_0x4bf6f3(0x333)]+'\x0a';}await sendWithRetry(_0x5eb2d4,{'text':_0x388574[_0x4bf6f3(0x3dd)]()||'No\x20schedul'+_0x4bf6f3(0x2e3)+'.'});return;}if(_0x43e1e8===_0x4bf6f3(0x213)){if(!_0x1ae03d[-0x1*0x28d+0x22a4+-0x1*0x2015]){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x293)+_0x4bf6f3(0x337)+':mm|YYYY-M'+_0x4bf6f3(0x2be)+_0x4bf6f3(0x254)+_0x4bf6f3(0x3d0)+_0x4bf6f3(0x47b)+_0x4bf6f3(0x299)+_0x4bf6f3(0x451)+_0x4bf6f3(0x25c)});return;}const _0x13d758=_0x1ae03d[0x204d*0x1+0x3b*0x71+0x9b9*-0x6],_0x3e0767=_0x1ae03d[-0x3d*-0x94+-0x2232+-0x1*0x10f]&&/^\d+$/[_0x4bf6f3(0x455)](_0x1ae03d[-0x23ac+-0xa23*0x2+0x23d*0x19])?Number(_0x1ae03d[-0x1*-0xa6a+0x25a8+-0x300f]):null;let _0x23dcc3=(_0x1dd9a7||'')['trim']();!_0x23dcc3&&(_0x23dcc3=extractInlineAfterToken(_0x2a3585,_0x13d758));if(!_0x23dcc3||_0x23dcc3[_0x4bf6f3(0x3dd)]()[_0x4bf6f3(0x1ce)]===-0x6d*0x12+-0x1025+0x17*0x109){await sendWithRetry(_0x5eb2d4,{'text':'Please\x20pro'+'vide\x20messa'+_0x4bf6f3(0x31d)+_0x4bf6f3(0x2d3)+_0x4bf6f3(0x3c2)+_0x4bf6f3(0x2d1)+'owing\x20line'+_0x4bf6f3(0x2a2)+_0x4bf6f3(0x46f)+'l>'});return;}const _0x14f41b=[];for(const _0xec6cd of _0x239653){const _0x2e7a0a=await getChatTimezone(_0xec6cd)||DEFAULT_TIMEZONE,_0x5c0274=parseTimeToken(_0x13d758,_0x2e7a0a);if(!_0x5c0274){_0x14f41b[_0x4bf6f3(0x208)]({'chat':_0xec6cd,'ok':![],'reason':_0x4bf6f3(0x284)+'ed'});continue;}const _0x53b7e8=_0x2abff0;if(_0x5c0274[_0x4bf6f3(0x297)]==='datetime'){const _0x24e6ee=_0x5c0274['dt'],_0x374e20=Math[_0x4bf6f3(0x446)](_0x24e6ee[_0x4bf6f3(0x48d)]()/(-0x12df+0x545+-0x1*-0x1182)),_0x368b5f=await addScheduleRow({'chat_jid':_0xec6cd,'message':_0x23dcc3,'time':null,'send_at':_0x374e20,'frequency':_0x4bf6f3(0x44e),'timezone':_0x24e6ee[_0x4bf6f3(0x1d1)]||_0x2e7a0a,'creator_jid':_0x53b7e8});if(_0x368b5f)_0x14f41b[_0x4bf6f3(0x208)]({'chat':_0xec6cd,'ok':!![],'id':_0x368b5f,'when':_0x24e6ee[_0x4bf6f3(0x386)+_0x4bf6f3(0x30f)](DateTime[_0x4bf6f3(0x2f6)+'ED'])});else _0x14f41b['push']({'chat':_0xec6cd,'ok':![],'reason':_0x4bf6f3(0x465)});continue;}if(_0x5c0274[_0x4bf6f3(0x297)]==='hhmm'){const _0x3f2d47=_0x5c0274[_0x4bf6f3(0x22d)];if(_0x3e0767&&Number['isInteger'](_0x3e0767)&&_0x3e0767>=-0x974+0x2680+-0x1d0b){let _0x2e020a=DateTime[_0x4bf6f3(0x40e)]()[_0x4bf6f3(0x1e2)](_0x2e7a0a);const [_0x3def51,_0x905637]=_0x3f2d47['split'](':')[_0x4bf6f3(0x1da)](Number);let _0x41c521=_0x2e020a[_0x4bf6f3(0x205)](_0x4bf6f3(0x26c))['set']({'hour':_0x3def51,'minute':_0x905637,'second':0x0,'millisecond':0x0});_0x41c521=_0x41c521[_0x4bf6f3(0x1df)]({'days':Number(_0x3e0767)});const _0x15149f=Math[_0x4bf6f3(0x446)](_0x41c521[_0x4bf6f3(0x48d)]()/(-0x4*-0x225+0x18ef+-0x1d9b)),_0x57d5c3=await addScheduleRow({'chat_jid':_0xec6cd,'message':_0x23dcc3,'time':null,'send_at':_0x15149f,'frequency':_0x4bf6f3(0x44e),'timezone':_0x2e7a0a,'creator_jid':_0x53b7e8});if(_0x57d5c3)_0x14f41b[_0x4bf6f3(0x208)]({'chat':_0xec6cd,'ok':!![],'id':_0x57d5c3,'when':_0x41c521[_0x4bf6f3(0x386)+'ring'](DateTime[_0x4bf6f3(0x2f6)+'ED'])});else _0x14f41b[_0x4bf6f3(0x208)]({'chat':_0xec6cd,'ok':![],'reason':'db_failed'});continue;}const _0xae62bd=await addScheduleRow({'chat_jid':_0xec6cd,'message':_0x23dcc3,'time':_0x3f2d47,'send_at':null,'frequency':_0x4bf6f3(0x3e3),'timezone':_0x2e7a0a,'creator_jid':_0x53b7e8});if(_0xae62bd)_0x14f41b[_0x4bf6f3(0x208)]({'chat':_0xec6cd,'ok':!![],'id':_0xae62bd,'when':_0x3f2d47+'\x20('+_0x2e7a0a+')'});else _0x14f41b['push']({'chat':_0xec6cd,'ok':![],'reason':_0x4bf6f3(0x465)});continue;}_0x14f41b[_0x4bf6f3(0x208)]({'chat':_0xec6cd,'ok':![],'reason':_0x4bf6f3(0x2b3)+_0x4bf6f3(0x27f)});}const _0x63c258=_0x14f41b['filter'](_0x20c56d=>_0x20c56d['ok']),_0xe6b3de=_0x14f41b[_0x4bf6f3(0x433)](_0x15a24b=>!_0x15a24b['ok']);let _0x5d13bc='';if(_0x63c258['length']){_0x5d13bc+='Scheduled\x20'+'for\x20'+_0x63c258['length']+(_0x4bf6f3(0x1fb)+':\x0a');for(const _0x59c004 of _0x63c258)_0x5d13bc+='â€¢\x20'+_0x59c004[_0x4bf6f3(0x22e)]+_0x4bf6f3(0x355)+_0x59c004['id']+_0x4bf6f3(0x32a)+_0x59c004['when']+'\x0a';}if(_0xe6b3de[_0x4bf6f3(0x1ce)]){_0x5d13bc+=_0x4bf6f3(0x278)+'\x20'+_0xe6b3de[_0x4bf6f3(0x1ce)]+(_0x4bf6f3(0x1fb)+':\x0a');for(const _0x545f71 of _0xe6b3de)_0x5d13bc+='â€¢\x20'+_0x545f71[_0x4bf6f3(0x22e)]+_0x4bf6f3(0x3bc)+_0x545f71['reason']+'\x0a';}await sendWithRetry(_0x5eb2d4,{'text':_0x5d13bc[_0x4bf6f3(0x3dd)]()||_0x4bf6f3(0x340)+'es\x20created'+'.'});return;}if(_0x43e1e8==='list'){const _0x51dfd0=[];for(const _0x3639e2 of _0x239653){const _0x1da4e6=await listSchedulesForChat(_0x3639e2);for(const _0x24b24d of _0x1da4e6)_0x51dfd0[_0x4bf6f3(0x208)]({'chatJid':_0x3639e2,..._0x24b24d});}if(!_0x51dfd0[_0x4bf6f3(0x1ce)]){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x430)+_0x4bf6f3(0x313)+'\x20messages\x20'+'found\x20for\x20'+_0x4bf6f3(0x3b1)+_0x4bf6f3(0x35f)});return;}let _0x515ac1='';for(const _0x3c744b of _0x51dfd0){const _0x1eba09=_0x3c744b['send_at']?DateTime[_0x4bf6f3(0x467)](Number(_0x3c744b[_0x4bf6f3(0x1b9)])*(-0x1*0x18af+-0x1*-0x4+0x1c93))[_0x4bf6f3(0x1e2)](_0x3c744b['timezone']||DEFAULT_TIMEZONE)[_0x4bf6f3(0x461)]({'suppressSeconds':!![]}):_0x3c744b['time']?_0x3c744b[_0x4bf6f3(0x249)]+'\x20('+(_0x3c744b['timezone']||_0x4bf6f3(0x40a)+_0x4bf6f3(0x328))+')':_0x4bf6f3(0x418),_0x2d6118=(_0x3c744b[_0x4bf6f3(0x2ce)]||'')[_0x4bf6f3(0x225)]('\x0a')[_0x4bf6f3(0x1da)](_0x37b791=>_0x37b791['trimEnd']())[_0x4bf6f3(0x21c)]('\x0a'),_0x15f383=_0x3c744b[_0x4bf6f3(0x245)]+':'+_0x3c744b['id']+_0x4bf6f3(0x32a)+_0x1eba09+'\x20freq:'+(_0x3c744b[_0x4bf6f3(0x23b)]||_0x4bf6f3(0x3e3))+_0x4bf6f3(0x237)+(_0x3c744b[_0x4bf6f3(0x1f9)]?_0x4bf6f3(0x1bc):'no')+_0x4bf6f3(0x1ea)+_0x2d6118+'\x0a\x0a';(_0x515ac1+_0x15f383)['length']>-0x138b+0x2*0x1065+-0x763&&(await sendWithRetry(_0x5eb2d4,{'text':_0x515ac1[_0x4bf6f3(0x3dd)]()}),_0x515ac1=''),_0x515ac1+=_0x15f383;}if(_0x515ac1[_0x4bf6f3(0x3dd)]())await sendWithRetry(_0x5eb2d4,{'text':_0x515ac1['trim']()});return;}if(_0x43e1e8===_0x4bf6f3(0x32e)){const _0x1debb1=_0x1ae03d[_0x4bf6f3(0x2f8)](-0xc2d*-0x3+0x2395+-0x240d*0x2);let _0x5ab5c3=_0x1debb1['join']('\x20');if(!_0x5ab5c3&&_0xdc58b6)_0x5ab5c3=_0xdc58b6['trim']();if(!_0x5ab5c3){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x293)+_0x4bf6f3(0x3da)+_0x4bf6f3(0x413)+'mber,numbe'+_0x4bf6f3(0x324)+_0x4bf6f3(0x2fa)+_0x4bf6f3(0x3c7)});return;}if(/^\s*all\s*$/i[_0x4bf6f3(0x455)](_0x5ab5c3)){let _0x462710=-0x1*0x1985+0x1e*-0x34+-0x1*-0x1f9d;for(const _0x4f5295 of _0x239653){const _0x3fd368=await removeAllSchedulesForChat(_0x4f5295);_0x462710+=_0x3fd368;}await sendWithRetry(_0x5eb2d4,{'text':'Deleted\x20'+_0x462710+(_0x4bf6f3(0x241)+_0x4bf6f3(0x2a7)+_0x4bf6f3(0x3b1)+_0x4bf6f3(0x35f))});return;}const _0x5a4147=_0x5ab5c3[_0x4bf6f3(0x225)](/[\s,]+/)[_0x4bf6f3(0x1da)](_0x5c23ad=>_0x5c23ad[_0x4bf6f3(0x3dd)]())[_0x4bf6f3(0x433)](Boolean),_0x519886=_0x5a4147['map'](_0x8e047f=>Number(_0x8e047f))[_0x4bf6f3(0x433)](_0x1d467a=>!Number[_0x4bf6f3(0x44b)](_0x1d467a)&&Number[_0x4bf6f3(0x2c2)](_0x1d467a)&&_0x1d467a>0x888+0x22fa+-0x2b82);if(!_0x519886[_0x4bf6f3(0x1ce)]){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x42d)+_0x4bf6f3(0x319)+'vided.\x20Usa'+_0x4bf6f3(0x3b8)+_0x4bf6f3(0x1f5)+_0x4bf6f3(0x2c9)+_0x4bf6f3(0x3d7)+_0x4bf6f3(0x38b)+'hed\x20delete'+_0x4bf6f3(0x25f)+_0x4bf6f3(0x25a)+'ll>'});return;}const _0xa009b4=[...new Set(_0x519886)],_0x1b241e=await getCombinedSchedulesForChats(_0x239653),_0x312a1b=[],_0x8b7f70=[];for(const _0x292952 of _0xa009b4){if(_0x292952<0x1409*0x1+-0xa9f*0x1+0xdb*-0xb||_0x292952>_0x1b241e[_0x4bf6f3(0x1ce)]){_0x8b7f70[_0x4bf6f3(0x208)]({'n':_0x292952,'reason':_0x4bf6f3(0x38c)});continue;}const _0x7b7e35=_0x1b241e[_0x292952-(-0x246*-0xa+-0xfdf+0x1b7*-0x4)]['id'],_0x3e58ef=await removeScheduleByDBId(_0x7b7e35);if(_0x3e58ef)_0x312a1b['push']({'n':_0x292952,'id':_0x7b7e35});else _0x8b7f70[_0x4bf6f3(0x208)]({'n':_0x292952,'reason':_0x4bf6f3(0x401)+'failed'});}let _0x29e432='';if(_0x312a1b[_0x4bf6f3(0x1ce)])_0x29e432+='Deleted\x20'+_0x312a1b['length']+('\x20schedule('+_0x4bf6f3(0x37f))+_0x312a1b['map'](_0xf71ad1=>_0xf71ad1['n']+_0x4bf6f3(0x417)+_0xf71ad1['id']+')')[_0x4bf6f3(0x21c)](',\x20')+'.\x0a';if(_0x8b7f70[_0x4bf6f3(0x1ce)])_0x29e432+=_0x4bf6f3(0x448)+_0x4bf6f3(0x45d)+_0x8b7f70[_0x4bf6f3(0x1da)](_0xdfb311=>_0xdfb311['n']+'('+_0xdfb311[_0x4bf6f3(0x333)]+')')['join'](',\x20')+'.';await sendWithRetry(_0x5eb2d4,{'text':_0x29e432[_0x4bf6f3(0x3dd)]()||_0x4bf6f3(0x1de)+_0x4bf6f3(0x41c)});return;}if(_0x43e1e8===_0x4bf6f3(0x272)){const _0x292db2=Number(_0x1ae03d[-0x511*-0x3+-0x2d+0x3e*-0x3e]),_0x5ed388=_0x1ae03d[0x5*-0x251+0x22cc+-0x1734]||(_0xdc58b6?_0xdc58b6[_0x4bf6f3(0x225)](/\r?\n/)[-0x13d*0x11+0x12cf+-0x52*-0x7]['trim']():null);if(!_0x292db2||!_0x5ed388){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x293)+'ed\x20edit\x20<n'+'umber>\x20<HH'+_0x4bf6f3(0x46d)+'ours|YYYY-'+_0x4bf6f3(0x358)+_0x4bf6f3(0x408)+'as|jid|all'+'>'});return;}const _0x30f728=await getCombinedSchedulesForChats(_0x239653);if(!_0x30f728||_0x30f728['length']<_0x292db2){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x340)+_0x4bf6f3(0x218)+_0x292db2+(_0x4bf6f3(0x22f)+'oss\x20reques'+_0x4bf6f3(0x3d4)+'s.')});return;}const _0x1e93dd=_0x30f728[_0x292db2-(0x1fd9+-0x445+-0x1b93)]['id'];if(!_0x1e93dd){await sendWithRetry(_0x5eb2d4,{'text':'No\x20schedul'+_0x4bf6f3(0x218)+_0x292db2+(_0x4bf6f3(0x22f)+_0x4bf6f3(0x42a)+_0x4bf6f3(0x3d4)+'s.')});return;}const _0x571982=parseTimeToken(_0x5ed388,DEFAULT_TIMEZONE);if(!_0x571982){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x448)+_0x4bf6f3(0x3ab)+_0x4bf6f3(0x26e)});return;}if(_0x571982[_0x4bf6f3(0x297)]===_0x4bf6f3(0x2dd)){const _0x861118=_0x571982['dt'],_0x4a8a2d=Math['floor'](_0x861118['toMillis']()/(-0x250a+0x1*0x26dd+0x215)),_0x5c9730=await updateScheduleFields(_0x1e93dd,{'send_at':_0x4a8a2d,'time':null,'frequency':_0x4bf6f3(0x44e),'timezone':_0x861118[_0x4bf6f3(0x1d1)]||DEFAULT_TIMEZONE});if(_0x5c9730)await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x295)+_0x292db2+('\x20updated\x20t'+_0x4bf6f3(0x385)+_0x4bf6f3(0x318))+_0x861118['toLocaleSt'+_0x4bf6f3(0x30f)](DateTime[_0x4bf6f3(0x2f6)+'ED'])+'\x20('+_0x861118[_0x4bf6f3(0x1d1)]+')'});else await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x448)+_0x4bf6f3(0x28d)+_0x4bf6f3(0x281)});return;}else{if(_0x571982[_0x4bf6f3(0x297)]===_0x4bf6f3(0x22d)){const _0x369cab=_0x571982[_0x4bf6f3(0x22d)],_0x4197c0=_0x30f728[_0x292db2-(0x203*-0x9+0x6*-0x2e4+-0x2*-0x11ba)],_0x24b6ce=_0x4197c0[_0x4bf6f3(0x25e)]||await getChatTimezone(_0x4197c0[_0x4bf6f3(0x258)])||DEFAULT_TIMEZONE,_0x503202=await updateScheduleFields(_0x1e93dd,{'time':_0x369cab,'send_at':null,'frequency':'daily','timezone':_0x24b6ce});if(_0x503202)await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x295)+_0x292db2+(_0x4bf6f3(0x231)+_0x4bf6f3(0x48e)+_0x4bf6f3(0x35b))+_0x369cab+'\x20('+_0x24b6ce+')'});else await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x448)+'update\x20sch'+_0x4bf6f3(0x281)});return;}else{await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x3e8)+'d\x20time\x20for'+_0x4bf6f3(0x1d7)+_0x4bf6f3(0x488)});return;}}}if(_0x43e1e8==='frequency'){const _0x511e14=Number(_0x1ae03d[0x1c60+0x2346+-0x3fa4]),_0x3d28f3=Number(_0x1ae03d[-0x21*-0xad+0x1dc3+-0x401*0xd]);if(!_0x511e14||!_0x3d28f3||_0x3d28f3<0x1937*-0x1+-0x251*-0x3+-0x1245*-0x1){await sendWithRetry(_0x5eb2d4,{'text':'Usage:\x20sch'+_0x4bf6f3(0x302)+'cy\x20<number'+_0x4bf6f3(0x290)+_0x4bf6f3(0x3e6)+_0x4bf6f3(0x43a)+'\x20days,\x20etc'+_0x4bf6f3(0x2b8)+_0x4bf6f3(0x1c5)+'>'});return;}const _0x12eab4=await getCombinedSchedulesForChats(_0x239653);if(!_0x12eab4||_0x12eab4[_0x4bf6f3(0x1ce)]<_0x511e14){await sendWithRetry(_0x5eb2d4,{'text':'No\x20schedul'+_0x4bf6f3(0x218)+_0x511e14+(_0x4bf6f3(0x22f)+_0x4bf6f3(0x42a)+'ted\x20target'+'s.')});return;}const _0x4ed6a1=_0x12eab4[_0x511e14-(-0x1*-0x10fa+-0x1016+-0x1*0xe3)]['id'];if(!_0x4ed6a1){await sendWithRetry(_0x5eb2d4,{'text':'No\x20schedul'+_0x4bf6f3(0x218)+_0x511e14+(_0x4bf6f3(0x22f)+_0x4bf6f3(0x42a)+_0x4bf6f3(0x3d4)+'s.')});return;}let _0x73fccc=_0x4bf6f3(0x3e3);if(_0x3d28f3===0x157f*-0x1+-0x3cd+0x194d)_0x73fccc='daily';else _0x73fccc=_0x4bf6f3(0x444)+_0x4bf6f3(0x27d)+_0x3d28f3;const _0x1648d4=await updateScheduleFields(_0x4ed6a1,{'frequency':_0x73fccc});if(_0x1648d4)await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x295)+_0x511e14+('\x20frequency'+_0x4bf6f3(0x29b))+_0x73fccc});else await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x448)+_0x4bf6f3(0x1d6)+_0x4bf6f3(0x3a0)});return;}if(_0x43e1e8===_0x4bf6f3(0x274)||_0x43e1e8===_0x4bf6f3(0x473)){const _0x2d82b2=Number(_0x1ae03d[-0x1*-0x79c+-0x3d+0x1d*-0x41]);if(!_0x2d82b2){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x293)+_0x4bf6f3(0x3df)+_0x43e1e8+(_0x4bf6f3(0x40d)+_0x4bf6f3(0x411)+_0x4bf6f3(0x222))});return;}const _0x1280a9=await getCombinedSchedulesForChats(_0x239653);if(!_0x1280a9||_0x1280a9[_0x4bf6f3(0x1ce)]<_0x2d82b2){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x340)+'e\x20#'+_0x2d82b2+(_0x4bf6f3(0x22f)+_0x4bf6f3(0x42a)+_0x4bf6f3(0x3d4)+'s.')});return;}const _0x292ac5=_0x1280a9[_0x2d82b2-(-0x1*0x14c3+0xada+0x9ea)]['id'];if(!_0x292ac5){await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x340)+_0x4bf6f3(0x218)+_0x2d82b2+('\x20found\x20acr'+_0x4bf6f3(0x42a)+'ted\x20target'+'s.')});return;}const _0x5e0486=await updateScheduleFields(_0x292ac5,{'enabled':_0x43e1e8==='enable'?-0x1865+-0x1fc2+0x3828:-0x56*0x56+-0x2155+-0x1*-0x3e39});if(_0x5e0486)await sendWithRetry(_0x5eb2d4,{'text':_0x4bf6f3(0x295)+_0x2d82b2+'\x20'+_0x43e1e8+'d.'});else await sendWithRetry(_0x5eb2d4,{'text':'Failed\x20to\x20'+_0x4bf6f3(0x3ec)+_0x4bf6f3(0x1e8)+'.'});return;}await sendWithRetry(_0x5eb2d4,{'text':USAGE});}catch(_0x2af444){warn(_0x4bf6f3(0x3e1)+'ndleSchedC'+_0x4bf6f3(0x443)+_0x4bf6f3(0x1d2)+(_0x2af444?.[_0x4bf6f3(0x2ce)]||_0x2af444));}}export async function initialize(_0x58684b){const _0x1cc76d=_0x35766f;if(!_0x58684b)throw new Error(_0x1cc76d(0x487)+_0x1cc76d(0x32d)+'uires\x20bot\x20'+_0x1cc76d(0x34b));setupSendApi(_0x58684b),refreshConfig();try{await ensureSchema();}catch(_0x5eef25){error(_0x1cc76d(0x3ef)+_0x1cc76d(0x454)+_0x1cc76d(0x342)+(_0x5eef25?.[_0x1cc76d(0x2ce)]||_0x5eef25));throw _0x5eef25;}try{startManagedListener({'botRef':_0x58684b,'eventName':'connection'+'.update','handler':_0x44be8c=>{const _0x41125e=_0x1cc76d;try{info(_0x41125e(0x20e)+_0x41125e(0x3b0)+'pdate\x20obse'+_0x41125e(0x3af)+_0x41125e(0x2dc)+_0x41125e(0x238)+'ed\x20listene'+'r)'),setupSendApi(_0x58684b);}catch(_0x2d6e61){warn(_0x41125e(0x20e)+_0x41125e(0x3b0)+_0x41125e(0x2e7)+_0x41125e(0x259)+'\x20'+(_0x2d6e61?.['message']||_0x2d6e61));}},'moduleName':name});}catch(_0x56b3f4){warn(_0x1cc76d(0x2fd)+_0x1cc76d(0x2a8)+_0x1cc76d(0x42c)+_0x1cc76d(0x26d)+'ction.upda'+_0x1cc76d(0x233)+_0x1cc76d(0x220)+(_0x56b3f4?.[_0x1cc76d(0x2ce)]||_0x56b3f4));}startSchedulerAligned(),info(_0x1cc76d(0x252)+_0x1cc76d(0x428)+_0x1cc76d(0x26a)+_0x1cc76d(0x374)+_0x1cc76d(0x474)+_0x1cc76d(0x403)+_0x1cc76d(0x399));}export async function cleanup(){const _0x172998=_0x35766f;try{stopScheduler();try{stopManagedListener(name,'connection'+'.update');}catch(_0x1037d0){}}catch(_0x10f723){warn(_0x172998(0x236)+_0x172998(0x1f1)+_0x172998(0x220)+(_0x10f723?.['message']||_0x10f723));}finally{botRef=null,sendApi=null,info(_0x172998(0x236)+_0x172998(0x25d));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};