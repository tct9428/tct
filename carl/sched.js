const _0x4a2726=_0x4e3e;(function(_0x11fcb7,_0x48b52c){const _0x4fe0fe=_0x4e3e,_0x1ec746=_0x11fcb7();while(!![]){try{const _0x34f0e7=parseInt(_0x4fe0fe(0x1ce))/(-0x15*0x15b+0xdd0+0xea8)*(-parseInt(_0x4fe0fe(0x227))/(-0x1e3e+-0x18d+-0x1*-0x1fcd))+-parseInt(_0x4fe0fe(0x417))/(0x6f0*0x3+-0x4c2*0x6+0x7bf*0x1)+parseInt(_0x4fe0fe(0x3ed))/(0xbed+0x3ef+-0xfd8)+parseInt(_0x4fe0fe(0x350))/(0x2*-0x6ce+0xffa+-0x259)*(parseInt(_0x4fe0fe(0x344))/(0x1*-0x220f+-0x15b5*0x1+0x37ca))+-parseInt(_0x4fe0fe(0x3dd))/(0x1*-0xb9d+0x1*-0x655+0x6b*0x2b)+-parseInt(_0x4fe0fe(0x400))/(-0x1f*0x103+0x510+0x15*0x141)*(-parseInt(_0x4fe0fe(0x287))/(-0x754+0x5*0x797+-0x366*0x9))+parseInt(_0x4fe0fe(0x2e2))/(-0x2153*0x1+0x47*-0x7f+-0x224b*-0x2);if(_0x34f0e7===_0x48b52c)break;else _0x1ec746['push'](_0x1ec746['shift']());}catch(_0x5a136d){_0x1ec746['push'](_0x1ec746['shift']());}}}(_0x163a,-0x15c8e1+-0x6481f+0x287f90));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x4e4387 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x4a2726(0x24c);export const version=_0x4a2726(0x32c);export const priority=-0x79*-0x2b+0x23*0xad+-0x2ba5*0x1;export const commands=[_0x4a2726(0x24c),_0x4a2726(0x233)];export const configKeys=[_0x4a2726(0x19c)+_0x4a2726(0x235)+_0x4a2726(0x223),_0x4a2726(0x1f4)+_0x4a2726(0x257)+'NE',_0x4a2726(0x337)+'_RETRIES','SCHED_INIT'+_0x4a2726(0x1e0)+'F_MS'];let botRef=null,sendApi=null,schedulerIntervalHandle=null,executorRunning=![],CHECK_INTERVAL_MS=(0x984+0x295*0xb+0x1*-0x25af)*(0x176c+-0xe31+-0x553),DEFAULT_TIMEZONE=_0x4a2726(0x353)+_0x4a2726(0x3d5),SEND_RETRIES=0x1424+-0x2507+-0x135*-0xe,INITIAL_BACKOFF_MS=0x6a3+0x1bfa+-0x20a9;const MAX_DB_ATTEMPTS=-0x1*-0x1157+0x1*-0x14e7+0x1*0x393;function ensureArray(_0x4f52a0){const _0x14cac9=_0x4a2726;if(!_0x4f52a0)return[];if(Array[_0x14cac9(0x2e0)](_0x4f52a0))return _0x4f52a0;return[_0x4f52a0];}function uniqArray(_0x17127f){const _0x55db1f=_0x4a2726,_0x2dc948=new Set(),_0x44a2c7=[];for(const _0x492175 of _0x17127f||[]){const _0x482171=String(_0x492175||'')['trim']();if(!_0x482171)continue;!_0x2dc948['has'](_0x482171)&&(_0x2dc948[_0x55db1f(0x204)](_0x482171),_0x44a2c7[_0x55db1f(0x1cd)](_0x482171));}return _0x44a2c7;}async function tableExists(_0x45ae0f){const _0x3b1063=_0x4a2726;try{const _0x37a008=await db[_0x3b1063(0x1b1)](_0x3b1063(0x322)+'e\x20FROM\x20sql'+_0x3b1063(0x299)+_0x3b1063(0x22a)+_0x3b1063(0x39c)+_0x3b1063(0x336),[_0x45ae0f]);return!!_0x37a008;}catch(_0x3a3c89){return warn(_0x3b1063(0x369)+_0x3b1063(0x404)+_0x3b1063(0x405)+(_0x3a3c89?.[_0x3b1063(0x260)]||_0x3a3c89)),![];}}async function getTableColumns(_0x3e10fd){const _0x3a3a35=_0x4a2726;try{const _0x55d2d2=await db[_0x3a3a35(0x1d5)](_0x3a3a35(0x20b)+_0x3a3a35(0x1dc)+_0x3e10fd+')');return(_0x55d2d2||[])[_0x3a3a35(0x346)](_0x3bbb04=>_0x3bbb04['name']);}catch(_0x485b5c){return warn('[sched]\x20ge'+_0x3a3a35(0x1ee)+_0x3a3a35(0x2f7)+'for\x20'+_0x3e10fd+':\x20'+(_0x485b5c?.['message']||_0x485b5c)),[];}}function resolveChatJidFromRow(_0x5bede1){const _0x3c3be3=_0x4a2726,_0x53c218=['chat_jid','chatid','chat_id',_0x3c3be3(0x232),_0x3c3be3(0x1b9),'room',_0x3c3be3(0x3f8)];for(const _0x55d1f9 of _0x53c218)if(_0x55d1f9 in _0x5bede1&&_0x5bede1[_0x55d1f9])return String(_0x5bede1[_0x55d1f9]);for(const _0x5ec234 of Object[_0x3c3be3(0x3a2)](_0x5bede1)){const _0x5eeb7f=_0x5bede1[_0x5ec234];if(typeof _0x5eeb7f==='string'&&_0x5eeb7f[_0x3c3be3(0x1b6)]('@'))return _0x5eeb7f;}return null;}function resolveMessageFromRow(_0x7d04d4){const _0x4cf975=_0x4a2726,_0x3cd361=['message','msg',_0x4cf975(0x315),_0x4cf975(0x3cb),_0x4cf975(0x40b)];for(const _0x5c4b01 of _0x3cd361)if(_0x5c4b01 in _0x7d04d4&&_0x7d04d4[_0x5c4b01]!=null)return String(_0x7d04d4[_0x5c4b01]);for(const _0x3c40ca of Object[_0x4cf975(0x3a2)](_0x7d04d4)){if(typeof _0x7d04d4[_0x3c40ca]===_0x4cf975(0x1bb)&&_0x7d04d4[_0x3c40ca]['length']>-0x2e3*0x4+0x1c52*-0x1+-0x1e6*-0x15&&!_0x7d04d4[_0x3c40ca][_0x4cf975(0x1b6)]('@'))return _0x7d04d4[_0x3c40ca];}return'';}function resolveWhenFromRow(_0x51ec00){const _0xe9470=_0x4a2726,_0x4803ee=[_0xe9470(0x31c),_0xe9470(0x3d1),_0xe9470(0x392),_0xe9470(0x200),_0xe9470(0x2d1),'ts',_0xe9470(0x259)];for(const _0x2c53eb of _0x4803ee){if(_0x2c53eb in _0x51ec00&&_0x51ec00[_0x2c53eb]){const _0x4e5d4d=Number(_0x51ec00[_0x2c53eb]);if(!Number[_0xe9470(0x300)](_0x4e5d4d)&&_0x4e5d4d>0x33575d41*0x2+0x23*0x3ee34+-0x2b9d819e)return{'send_at':_0x4e5d4d};}}const _0xe5cadc=['time',_0xe9470(0x1f1),'schedule_t'+_0xe9470(0x1b7),_0xe9470(0x281)+_0xe9470(0x435)];for(const _0x5f2541 of _0xe5cadc){if(_0x5f2541 in _0x51ec00&&_0x51ec00[_0x5f2541]){const _0x437d2d=String(_0x51ec00[_0x5f2541])[_0xe9470(0x318)]();if(/^\d{1,2}:\d{2}$/[_0xe9470(0x409)](_0x437d2d))return{'time':_0x437d2d};}}return{'time':null,'send_at':null};}async function readAndNormalizeExistingSchedules(){const _0x342a85=_0x4a2726;try{const _0x50b383=await db[_0x342a85(0x1d5)](_0x342a85(0x1df)+'ROM\x20schedu'+'les'),_0x7bb6e5=[];for(const _0x1de76 of _0x50b383||[]){const _0x5d9779=resolveChatJidFromRow(_0x1de76)||'',_0x340087=resolveMessageFromRow(_0x1de76)||'',_0x4d63d1=resolveWhenFromRow(_0x1de76)||{};let _0x29b1a6=_0x1de76[_0x342a85(0x28a)]||_0x1de76[_0x342a85(0x3d0)]||_0x1de76[_0x342a85(0x247)]||_0x1de76[_0x342a85(0x3eb)]||_0x342a85(0x44d);if(typeof _0x29b1a6===_0x342a85(0x3cf))_0x29b1a6=_0x342a85(0x40e)+'ys:'+_0x29b1a6;const _0x4c9ee5=_0x1de76[_0x342a85(0x22e)]||_0x1de76['tz']||null,_0x20ea6f=_0x1de76['creator_ji'+'d']||_0x1de76[_0x342a85(0x407)]||_0x1de76['author']||_0x1de76[_0x342a85(0x36c)]||'';let _0x4498c9=Number(_0x1de76['created_at']||_0x1de76['ts']||_0x1de76['timestamp']||-0x20c+0x1*0x1db7+-0x313*0x9);if(!_0x4498c9)_0x4498c9=Math[_0x342a85(0x29e)](Date[_0x342a85(0x35d)]()/(0x2117*0x1+0x7*-0x55+-0x1adc));_0x7bb6e5[_0x342a85(0x1cd)]({'chat_jid':_0x5d9779,'message':_0x340087,'time':_0x4d63d1['time']||null,'send_at':_0x4d63d1[_0x342a85(0x31c)]||null,'frequency':_0x29b1a6||_0x342a85(0x44d),'timezone':_0x4c9ee5,'last_sent':Number(_0x1de76[_0x342a85(0x46a)]||_0x1de76[_0x342a85(0x311)]||-0x6*0x4cb+-0x1459+-0x3c7*-0xd)||-0x3*-0x4b+0x43c*0x2+-0x959,'creator_jid':_0x20ea6f||'','created_at':_0x4498c9});}return _0x7bb6e5;}catch(_0x120d26){return warn('[sched]\x20re'+_0x342a85(0x370)+_0x342a85(0x382)+'ngSchedule'+'s\x20failed:\x20'+(_0x120d26?.[_0x342a85(0x260)]||_0x120d26)),[];}}async function ensureSchema(){const _0x5c7c9e=_0x4a2726,_0x6a03d4={'id':_0x5c7c9e(0x459)+_0x5c7c9e(0x46b)+_0x5c7c9e(0x290)+_0x5c7c9e(0x294),'chat_jid':'TEXT\x20NOT\x20N'+_0x5c7c9e(0x361),'message':'TEXT\x20NOT\x20N'+'ULL','time':_0x5c7c9e(0x3ee),'send_at':_0x5c7c9e(0x1f6),'frequency':_0x5c7c9e(0x1ae)+'LT\x20\x27daily\x27','timezone':'TEXT','last_sent':_0x5c7c9e(0x1f6),'creator_jid':'TEXT\x20NOT\x20N'+'ULL','enabled':'INTEGER\x20DE'+_0x5c7c9e(0x341),'send_attempts':_0x5c7c9e(0x3da)+_0x5c7c9e(0x27f),'last_attempt':_0x5c7c9e(0x1f6),'created_at':_0x5c7c9e(0x3da)+_0x5c7c9e(0x1d9)+'ftime(\x27%s\x27'+_0x5c7c9e(0x379)};try{const _0x52991a=await tableExists(_0x5c7c9e(0x3ce));if(!_0x52991a){const _0x19d835=Object[_0x5c7c9e(0x3b9)](_0x6a03d4)[_0x5c7c9e(0x346)](([_0x4b593f,_0x45b9a2])=>_0x4b593f+'\x20'+_0x45b9a2)[_0x5c7c9e(0x2bb)](_0x5c7c9e(0x2d3));await db[_0x5c7c9e(0x25f)]('CREATE\x20TAB'+'LE\x20schedul'+_0x5c7c9e(0x40c)+_0x19d835+'\x0a);');try{await db['exec']('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+_0x5c7c9e(0x386)+'_schedules'+'_chat\x20ON\x20s'+'chedules(c'+'hat_jid);');}catch(_0x1c8a31){}info(_0x5c7c9e(0x3ff)+_0x5c7c9e(0x352)+_0x5c7c9e(0x21e)+_0x5c7c9e(0x2fb)+'e'),await db['exec'](_0x5c7c9e(0x377)+_0x5c7c9e(0x3ba)+_0x5c7c9e(0x2e3)+_0x5c7c9e(0x437)+'duler_sett'+'ings\x20(\x0a\x20\x20\x20'+_0x5c7c9e(0x20a)+_0x5c7c9e(0x36a)+_0x5c7c9e(0x2c2)+_0x5c7c9e(0x329)+_0x5c7c9e(0x41a)+_0x5c7c9e(0x2cd)+_0x5c7c9e(0x288)+_0x5c7c9e(0x343)+_0x5c7c9e(0x429)+_0x5c7c9e(0x1c9)+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'\x20\x20');return;}const _0x284bcd=await getTableColumns(_0x5c7c9e(0x3ce)),_0x5f4ca5=_0x284bcd[_0x5c7c9e(0x1b6)](_0x5c7c9e(0x33b)),_0x12aa2d=_0x284bcd['includes']('message')||_0x284bcd[_0x5c7c9e(0x1b6)](_0x5c7c9e(0x28d))||_0x284bcd[_0x5c7c9e(0x1b6)](_0x5c7c9e(0x3cb))||_0x284bcd[_0x5c7c9e(0x1b6)](_0x5c7c9e(0x315)),_0x5e1650=_0x284bcd[_0x5c7c9e(0x1b6)]('creator_ji'+'d')||_0x284bcd[_0x5c7c9e(0x1b6)](_0x5c7c9e(0x407))||_0x284bcd['includes'](_0x5c7c9e(0x27b));if(_0x5f4ca5&&_0x12aa2d&&_0x5e1650){if(!_0x284bcd[_0x5c7c9e(0x1b6)](_0x5c7c9e(0x3c6)+'pts'))try{await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x40a)+_0x5c7c9e(0x384)+_0x5c7c9e(0x238)+_0x5c7c9e(0x1a2)+_0x5c7c9e(0x2d9)+_0x5c7c9e(0x34e)+_0x5c7c9e(0x340)),info(_0x5c7c9e(0x45b)+_0x5c7c9e(0x3c3)+_0x5c7c9e(0x42c)+_0x5c7c9e(0x29d));}catch(_0x1146e0){warn('[sched]\x20co'+'uld\x20not\x20ad'+_0x5c7c9e(0x25a)+_0x5c7c9e(0x25c)+_0x5c7c9e(0x302)+(_0x1146e0?.[_0x5c7c9e(0x260)]||_0x1146e0));}if(!_0x284bcd[_0x5c7c9e(0x1b6)](_0x5c7c9e(0x45f)+'pt'))try{await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x40a)+'E\x20schedule'+_0x5c7c9e(0x238)+_0x5c7c9e(0x421)+_0x5c7c9e(0x278)+_0x5c7c9e(0x391)),info('[sched]\x20ad'+'ded\x20last_a'+_0x5c7c9e(0x42b)+_0x5c7c9e(0x289));}catch(_0x357be5){warn('[sched]\x20co'+_0x5c7c9e(0x3de)+_0x5c7c9e(0x1cf)+_0x5c7c9e(0x345)+_0x5c7c9e(0x29a)+(_0x357be5?.['message']||_0x357be5));}try{await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x440)+_0x5c7c9e(0x323)+_0x5c7c9e(0x386)+'_schedules'+_0x5c7c9e(0x22c)+_0x5c7c9e(0x1be)+_0x5c7c9e(0x460));}catch(_0x30121a){}await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x377)+_0x5c7c9e(0x3ba)+'E\x20IF\x20NOT\x20E'+_0x5c7c9e(0x437)+'duler_sett'+'ings\x20(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cha'+_0x5c7c9e(0x36a)+_0x5c7c9e(0x2c2)+_0x5c7c9e(0x329)+_0x5c7c9e(0x41a)+_0x5c7c9e(0x2cd)+_0x5c7c9e(0x288)+_0x5c7c9e(0x343)+_0x5c7c9e(0x429)+_0x5c7c9e(0x1c9)+_0x5c7c9e(0x3bf)+'\x20\x20'),info(_0x5c7c9e(0x1e6)+_0x5c7c9e(0x2d5)+_0x5c7c9e(0x26c)+_0x5c7c9e(0x1d6)+_0x5c7c9e(0x39e));return;}info('[sched]\x20Le'+_0x5c7c9e(0x1a4)+_0x5c7c9e(0x1ba)+_0x5c7c9e(0x35e)+_0x5c7c9e(0x347)+'ly');const _0x22183a=await readAndNormalizeExistingSchedules();await db['exec'](_0x5c7c9e(0x1cb)+_0x5c7c9e(0x2df)+_0x5c7c9e(0x1a0));try{await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x2ab)+_0x5c7c9e(0x3f0)+_0x5c7c9e(0x364)+_0x5c7c9e(0x42e)+_0x5c7c9e(0x3ef)+_0x5c7c9e(0x240)+_0x5c7c9e(0x439)+_0x5c7c9e(0x2fa)+_0x5c7c9e(0x45e)+_0x5c7c9e(0x20a)+_0x5c7c9e(0x36a)+_0x5c7c9e(0x1e3)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+_0x5c7c9e(0x388)+_0x5c7c9e(0x330)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5c7c9e(0x3c8)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+_0x5c7c9e(0x277)+_0x5c7c9e(0x42a)+_0x5c7c9e(0x1f9)+_0x5c7c9e(0x273)+_0x5c7c9e(0x3d9)+_0x5c7c9e(0x371)+'\x20\x20\x20\x20timezo'+_0x5c7c9e(0x22b)+'\x20\x20\x20\x20\x20\x20\x20las'+_0x5c7c9e(0x1b3)+_0x5c7c9e(0x42a)+_0x5c7c9e(0x2b9)+_0x5c7c9e(0x275)+_0x5c7c9e(0x1e3)+_0x5c7c9e(0x457)+_0x5c7c9e(0x2fc)+_0x5c7c9e(0x34e)+_0x5c7c9e(0x1f5)+_0x5c7c9e(0x2a3)+'ttempts\x20IN'+'TEGER\x20DEFA'+'ULT\x200,\x0a\x20\x20\x20'+_0x5c7c9e(0x423)+_0x5c7c9e(0x44f)+'TEGER,\x0a\x20\x20\x20'+_0x5c7c9e(0x256)+_0x5c7c9e(0x25d)+'GER\x20DEFAUL'+_0x5c7c9e(0x27d)+_0x5c7c9e(0x2b4)+_0x5c7c9e(0x3bd)+_0x5c7c9e(0x465));}catch(_0x22af18){await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x2ab)+_0x5c7c9e(0x3f0)+_0x5c7c9e(0x364)+_0x5c7c9e(0x42e)+_0x5c7c9e(0x3ef)+_0x5c7c9e(0x240)+'R\x20PRIMARY\x20'+_0x5c7c9e(0x2fa)+_0x5c7c9e(0x45e)+_0x5c7c9e(0x20a)+_0x5c7c9e(0x36a)+_0x5c7c9e(0x1e3)+_0x5c7c9e(0x242)+_0x5c7c9e(0x388)+_0x5c7c9e(0x330)+_0x5c7c9e(0x1ec)+_0x5c7c9e(0x3c8)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+_0x5c7c9e(0x277)+'EGER,\x0a\x20\x20\x20\x20'+_0x5c7c9e(0x1f9)+_0x5c7c9e(0x461)+_0x5c7c9e(0x406)+_0x5c7c9e(0x23b)+'T,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x5c7c9e(0x1a1)+_0x5c7c9e(0x2fe)+_0x5c7c9e(0x332)+_0x5c7c9e(0x32b)+_0x5c7c9e(0x2ca)+'ULL,\x0a\x20\x20\x20\x20\x20'+_0x5c7c9e(0x3d3)+_0x5c7c9e(0x2fe)+_0x5c7c9e(0x424)+'nd_attempt'+_0x5c7c9e(0x3e4)+_0x5c7c9e(0x2a9)+'ast_attemp'+'t\x20INTEGER,'+_0x5c7c9e(0x1c4)+_0x5c7c9e(0x221)+'INTEGER\x0a\x20\x20'+'\x20\x20\x20\x20);'),warn('[sched]\x20cr'+_0x5c7c9e(0x375)+'dules_new\x20'+_0x5c7c9e(0x2b2)+_0x5c7c9e(0x1a7)+_0x5c7c9e(0x24a));}const _0x2a52af=await db[_0x5c7c9e(0x1b0)](_0x5c7c9e(0x24b)+_0x5c7c9e(0x264)+_0x5c7c9e(0x378)+_0x5c7c9e(0x20f)+'sage,\x20time'+',\x20send_at,'+_0x5c7c9e(0x45c)+_0x5c7c9e(0x399)+_0x5c7c9e(0x441)+_0x5c7c9e(0x2e6)+_0x5c7c9e(0x2de)+_0x5c7c9e(0x3f4)+_0x5c7c9e(0x21a)+_0x5c7c9e(0x45f)+_0x5c7c9e(0x445)+'d_at)\x20VALU'+_0x5c7c9e(0x466)+_0x5c7c9e(0x36d)+_0x5c7c9e(0x2f9)+_0x5c7c9e(0x33d));try{for(const _0x240fa4 of _0x22183a){try{await _0x2a52af[_0x5c7c9e(0x31a)](_0x240fa4['chat_jid']||'',_0x240fa4[_0x5c7c9e(0x260)]||'',_0x240fa4[_0x5c7c9e(0x435)]||null,_0x240fa4['send_at']||null,_0x240fa4[_0x5c7c9e(0x28a)]||_0x5c7c9e(0x44d),_0x240fa4['timezone']||null,_0x240fa4['last_sent']||-0x1a36+0xffe+0xa38,_0x240fa4[_0x5c7c9e(0x25b)+'d']||'',-0x1a95*0x1+0x1*0x1636+0x460,-0x8d6+0x25*0xf1+-0x25d*0xb,null,_0x240fa4[_0x5c7c9e(0x2db)]||Math['floor'](Date[_0x5c7c9e(0x35d)]()/(0x4*-0x10d+0x1acf+-0x1*0x12b3)));}catch(_0x628bb){warn(_0x5c7c9e(0x304)+_0x5c7c9e(0x30e)+'t\x20normaliz'+'ed\x20schedul'+_0x5c7c9e(0x3d6)+_0x240fa4[_0x5c7c9e(0x33b)]+':\x20'+(_0x628bb?.[_0x5c7c9e(0x260)]||_0x628bb));}}}finally{try{await _0x2a52af[_0x5c7c9e(0x1f7)]();}catch(_0x39756c){}}try{const _0x11449c=_0x5c7c9e(0x201)+'backup_'+Math[_0x5c7c9e(0x29e)](Date['now']()/(-0x7d*-0x1+0xfa8+-0xf1*0xd));await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x40a)+_0x5c7c9e(0x384)+_0x5c7c9e(0x462)+'O\x20'+_0x11449c+';'),await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x40a)+_0x5c7c9e(0x384)+_0x5c7c9e(0x3d4)+'ME\x20TO\x20sche'+_0x5c7c9e(0x385));try{await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x440)+_0x5c7c9e(0x323)+_0x5c7c9e(0x386)+_0x5c7c9e(0x41c)+_0x5c7c9e(0x22c)+_0x5c7c9e(0x1be)+_0x5c7c9e(0x460));}catch(_0x3ee119){}info(_0x5c7c9e(0x2c0)+'gration\x20do'+_0x5c7c9e(0x3a1)+_0x5c7c9e(0x2eb)+_0x5c7c9e(0x266)+'p');}catch(_0x4bf0bc){warn(_0x5c7c9e(0x33c)+'ap\x20tables\x20'+_0x5c7c9e(0x3ab)+(_0x4bf0bc?.[_0x5c7c9e(0x260)]||_0x4bf0bc));throw _0x4bf0bc;}finally{await db[_0x5c7c9e(0x25f)](_0x5c7c9e(0x1cb)+_0x5c7c9e(0x2df)+_0x5c7c9e(0x241));}await db['exec'](_0x5c7c9e(0x335)+_0x5c7c9e(0x2c4)+_0x5c7c9e(0x2bc)+_0x5c7c9e(0x2ef)+_0x5c7c9e(0x1f2)+_0x5c7c9e(0x443)+_0x5c7c9e(0x376)+_0x5c7c9e(0x319)+'MARY\x20KEY,\x0a'+_0x5c7c9e(0x3b8)+_0x5c7c9e(0x3e2)+_0x5c7c9e(0x285)+_0x5c7c9e(0x316)+_0x5c7c9e(0x1e5)+_0x5c7c9e(0x2f2)+_0x5c7c9e(0x3bf));}catch(_0x77d723){error(_0x77d723,_0x5c7c9e(0x3c2)+'sureSchema'+_0x5c7c9e(0x272));throw _0x77d723;}}function refreshConfig(){const _0x426cde=_0x4a2726;try{const _0x53ad6e=getConfig()||{};CHECK_INTERVAL_MS=Number(_0x53ad6e[_0x426cde(0x19c)+'K_INTERVAL'+'_MS']??CHECK_INTERVAL_MS),DEFAULT_TIMEZONE=_0x53ad6e[_0x426cde(0x1f4)+'ULT_TIMEZO'+'NE']||DEFAULT_TIMEZONE,SEND_RETRIES=Number(_0x53ad6e[_0x426cde(0x337)+_0x426cde(0x2f4)]??SEND_RETRIES),INITIAL_BACKOFF_MS=Number(_0x53ad6e[_0x426cde(0x398)+_0x426cde(0x1e0)+_0x426cde(0x403)]??INITIAL_BACKOFF_MS),info(_0x426cde(0x434)+_0x426cde(0x3fa)+_0x426cde(0x265)+_0x426cde(0x37c)+CHECK_INTERVAL_MS+(_0x426cde(0x43c)+'TZ=')+DEFAULT_TIMEZONE);}catch(_0x4a2e17){warn(_0x426cde(0x274)+_0x426cde(0x449)+_0x426cde(0x317)+(_0x4a2e17?.[_0x426cde(0x260)]||_0x4a2e17));}}try{typeof hotReloadConfig===_0x4a2726(0x212)&&hotReloadConfig((_0x3f0af6=[])=>{const _0x1fc22b=_0x4a2726;try{refreshConfig();}catch(_0xcceacb){warn(_0x1fc22b(0x2d7)+_0x1fc22b(0x43d)+'ndler\x20erro'+'r:\x20'+(_0xcceacb?.['message']||_0xcceacb));}});}catch(_0x2cd4ea){warn(_0x4a2726(0x2d7)+_0x4a2726(0x327)+_0x4a2726(0x24f)+_0x4a2726(0x2e5)+_0x4a2726(0x43a)+(_0x2cd4ea?.[_0x4a2726(0x260)]||_0x2cd4ea));}refreshConfig();function tryBuildSendApiFromBot(_0x52c5e0){const _0x42c9d2=_0x4a2726;if(!_0x52c5e0)return null;if(typeof _0x52c5e0['sendMessag'+'e']===_0x42c9d2(0x212))return async(_0x3b433a,_0xd753c9)=>_0x52c5e0[_0x42c9d2(0x20e)+'e'](_0x3b433a,_0xd753c9);else{if(_0x52c5e0[_0x42c9d2(0x23d)]&&typeof _0x52c5e0['sock']['sendMessag'+'e']===_0x42c9d2(0x212))return async(_0x1d0b37,_0x39c57c)=>_0x52c5e0[_0x42c9d2(0x23d)][_0x42c9d2(0x20e)+'e'](_0x1d0b37,_0x39c57c);}return null;}function _0x163a(){const _0x2c8036=['TEXT','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','LE\x20IF\x20NOT\x20','ur\x20default','hed\x20delete','t*\x0aâ€£\x20View\x20','led,\x20send_','chatJid','quency.','for\x20','target_jid','ed\x20add\x20<HH','nfig\x20refre','edit','[sched]\x20ex','onnection(','nal\x20send\x20a','[sched]\x20cr','3432mHtouO','dateSchedu','d,\x20message','F_MS','bleExists\x20','error:\x20','\x20\x20\x20\x20\x20\x20\x20\x20ti','created_by','ted\x20target','test','ALTER\x20TABL','value','es\x20(\x0a\x20\x20','lias|jid|a','every_n_da','xtMessage','id|all>','match','@g.us','defaults:\x20','\x20set\x20to\x20','uled\x20messa','delete','3469671FsudaY','one-off\x20fo','targets.','\x20\x20\x20\x20enable','ctReply','_schedules','HH:mm\x20|\x20YY','reason','\x20target(s)','SELECT\x20tim','MN\x20last_at','not\x20found','\x20\x20\x20\x20\x20last_','\x20\x20\x20\x20\x20\x20\x20\x20se','hed\x20add\x2009','enabled','*sched\x20lis','type','\x20timezone\x20','EGER,\x0a\x20\x20\x20\x20','ttempt\x20col','ttempts\x20co','recoverabl','edules_new','ids','Failed\x20to\x20','\x20scheduled','If\x20`Ndays`','isCommand','[sched]\x20co','time','dule.','XISTS\x20sche','tchFromFin','R\x20PRIMARY\x20','led:\x20','\x203\x20OR\x20sche','ms\x20default','tReload\x20ha','fromMe','>`\x20`<messa','CREATE\x20IND',',\x20last_sen','>`\x0aâ€£\x20Tempo','gs\x20(\x0a\x20\x20\x20\x20\x20',':\x20\x22','pt,\x20create','mMe)','not\x20set,\x20u','s\x20at\x20given','freshConfi','\x20done;\x20sen','default\x20wi','s/days/min','daily','r:\x20','attempt\x20IN','lastID','ys/minutes','\x20when:','ed\x20edit*\x20`','p\x20error:\x20','days','s\x20WHERE\x20id','\x0a\x20\x20\x20\x20\x20\x20\x20\x20e','<number|nu','INTEGER\x20PR','M\x20schedule','[sched]\x20ad','\x20frequency','vide\x20messa','CREMENT,\x0a\x20','last_attem','hat_jid);','ncy\x20TEXT,\x0a','s\x20RENAME\x20T','ommandPM\x20e','\x20but\x20faile','\x20);','ES\x20(?,\x20?,\x20','cy\x20<number','yes','\x20made.','last_sent','IMARY\x20KEY\x20','`\x0aâ€£\x20Set\x20re','pts','number,...','s\x20WHERE\x20ch','edules\x20SET','\x22.\x20Use\x20gp:','SCHED_CHEC','lp\x20Command','>\x20*sched\x20o','update\x20fre','=\x20OFF;','\x20last_sent','MN\x20send_at','UPDATE\x20sch','gacy\x20sched','parse\x20new\x20','heduler\x20st','faults\x20as\x20','when','xample:\x0asc','mat\x20for\x20ed','s\x20(chat_ji','alias,\x20gp:','.\x20Not\x20retr','TEXT\x20DEFAU','ys:','prepare','get','db\x20delete\x20','t_sent\x20INT','sing\x20fallb','leByDBId\x20e','includes','ime','wId','chat','ules\x20detec','string','No\x20schedul','\x20time=','chedules(c','sage...>`\x0a','sage...>\x20g','empt\x20#','ll>','[sched]\x20id','\x0a\x20\x20\x20\x20\x20\x20\x20\x20c','able\x20a\x20sch','data','singleSele','ault.','TEXT\x0a\x20\x20\x20\x20\x20','ttempt\x20fai','PRAGMA\x20for','>\x20<n>\x20\x20(n=','push','1057oKZJLM','d\x20last_att',',\x20time,\x20se','videoMessa',')\x20id:','toISO','isInteger','all','s\x20canonica','?,\x20?)\x20ON\x20C','requested\x20','FAULT\x20(str','include\x20gp','edulesForC','le_info(','=2\x20every\x202','days_of_we','SELECT\x20*\x20F','IAL_BACKOF','\x20freq:','s):\x0a','\x20NOT\x20NULL,','efaults.','\x20\x20\x20timezon','[sched]\x20sc','ble\x20for\x20re','forbidden','\x0amsg:\x0a','les\x20for\x20to','r\x20id=',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','available','tTableColu','\x20failed:\x20','e\x20from\x20DB;','hhmm','ler_settin','vided.\x20Usa','SCHED_DEFA','LT\x201,\x0a\x20\x20\x20\x20','INTEGER','finalize','hedules.\x20E','\x20\x20\x20\x20freque','manently\x20(','at_jid)\x20DO','oss\x20your\x20d','participan','\x20time.\x0a\x0a>\x20','Failed\x20for','send','schedules_','for\x20defaul','startOf','add','ttonId','d\x20delete\x201','er>`\x0aâ€£\x20Re-','ge\x20text\x20(s','itial\x20exec','\x20\x20\x20\x20\x20\x20\x20cha','PRAGMA\x20tab','resolve\x20yo','rror:\x20','sendMessag','t_jid,\x20mes','d|all>\x20inl','resolveNam','function','utor\x20error','delete\x201\x202','padStart','extendedTe','key','no\x20send\x20ta','s)\x20across\x20','attempts,\x20','\x20->\x20id:','t\x20required','ed\x20','nical\x20sche','endsWith','not\x20availa','reated_at\x20','setZone','_MS','curring\x20id','hasSame','success','1724JVnOJS','s).','[sched]\x20ha','\x20WHERE\x20typ','ne\x20TEXT,\x0a\x20','_chat\x20ON\x20s','every','timezone','seMessage','[sched]\x20cl','T\x20timezone','jid','schedule','\x20for\x20id=','K_INTERVAL','ialize\x20req','led\x20for\x20id','s\x20ADD\x20COLU','rarily\x20dis','nd_at,\x20fre','mezone\x20TEX','es\x20created','sock','.)\x20gp:<ali','\x20available','\x20id\x20INTEGE','=\x20ON;','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','replace','|in\x20N\x20hour','[sched]\x20Fi',':mm|YYYY-M','repeat','shift','[sched]\x20No','fallback','INSERT\x20INT','sched','Message\x20ca','instead','fig\x20regist','reviously\x20','bled\x20state','eaned\x20up','eanup\x20erro','sForChat\x20e','livered\x20on','\x20\x20\x20\x20\x20creat','ULT_TIMEZO','getUniqueJ','time_at','d\x20send_att','creator_ji','empts\x20colu','ed_at\x20INTE','imageMessa','exec','message','d\x20removed\x20','ecutor\x20ite','ry\x20on\x20next','O\x20schedule','shed:\x20inte','d\x20to\x20backu','\x20<number>\x20','s).\x20gp:<al','\x20all\x20gp:<a','\x5c$&','\x20days,\x20etc','ble\x20appear','WHERE\x20chat','o\x20recurrin','nnection)',':<alias|ji','weekday','\x20fatal','ncy\x20TEXT\x20D','[sched]\x20re','r_jid\x20TEXT','r_settings','end_at\x20INT','tempt\x20INTE','dScheduleR','ame\x20line\x20a','author','d\x20to\x20remov','T\x20(strftim','startsWith','FAULT\x200','No\x20valid\x20i','scheduled_','le\x20id=','enable','edule.','GER\x20DEFAUL','\x20connectio','22374hExThI','DEFAULT\x201,','umn','frequency','found\x20for\x20','chat_jid\x20=','msg','[sched]\x20ge','g\x20at\x20','AUTOINCREM','n(s).\x20Set\x20','Y\x20id\x20ASC',':mm|in\x20N\x20h','ENT','status','selectedBu','owing\x20line','remoteJid','ite_master','n:\x20','leFields\x20e','led\x20messag','lumn','floor','toMillis','No\x20changes','split','dings\x20erro','\x20\x20\x20\x20send_a','Please\x20pro','ed\x20delete\x20','`\x0aâ€£\x20Change','arted\x20(ali','findings','\x0a\x20\x20\x20\x20\x20\x20\x20\x20l','of\x20a\x20sched','CREATE\x20TAB','oUserJid','d_time','group/defa','peat\x20inter','listRespon','.\x20Will\x20ret','without\x20de','ek:','e(\x27%s\x27,\x27no','ge...>\x20\x20\x20(','YY-MM-DDTH','\x20failed\x20de','hed).\x20Disa','\x20\x20\x20\x20creato','all\x20schedu','join','IF\x20NOT\x20EXI','toLocaleSt',',2,3\x20OR\x20sc','p:<alias|j','[sched]\x20mi','not-availa','\x20PRIMARY\x20K','time.','ATE\x20TABLE\x20','\x20schedule(','ys]\x20<messa','eduled\x20mes','unsupporte','ring','TEXT\x20NOT\x20N','alias','uires\x20bot\x20','d\x20INTEGER\x20','[sched]\x20on','ROM\x20schedu','th:','timestamp','2\x20days,\x20et',',\x0a\x20\x20','ble','hedules\x20ta','stSchedule','[sched]\x20ho','ror:\x20','tempts\x20INT','LUES\x20(?,\x20?','created_at','Scheduled\x20','has','_jid,\x20enab','eign_keys\x20','isArray','roup\x20JID.','18847280smujyX','E\x20IF\x20NOT\x20E','nd\x20attempt','ration\x20fai','t,\x20creator','isValid','r\x20defaults','[sched]\x20DB','it.','ble\x20rename','ndexes\x20pro','caption','`<HH:mm\x20|\x20','STS\x20schedu','toLowerCas','\x20to\x20','e\x20TEXT\x0a\x20\x20\x20','ts\x20(','_RETRIES','mber,numbe','[sched]\x20de','mns\x20error\x20','d\x20time\x20for',',\x20?,\x20?,\x20?,','KEY\x20AUTOIN','dules\x20tabl','nabled\x20INT','toFormat','\x20INTEGER,\x0a','quency,\x20ti','isNaN','es.\x0a\x0a>\x20*sc','mn:\x20','\x20<number>','[sched]\x20ca','[sched]\x20se','ncy*\x20`<num','day\x20+\x20Nday','\x20gp:<alias','\x0a\x20\x20\x20\x20\x20\x20\x20VA','\x20|\x20number,','or\x20max\x20att','ltChatJids',':00\x20Hello\x20','nnot\x20inser','changes','H:mm\x20|\x20in\x20','sent_at','ine\x20when\x20m','m\x20error\x20fo','Deleted\x20','text','T\x201,\x0a\x20\x20\x20\x20\x20','g\x20error:\x20','trim','d\x20TEXT\x20PRI','run','zoneName','send_at','Unsupporte','\x20messages\x20','plus','DELETE\x20FRO',':\x20bot\x20JID\x20','SELECT\x20nam','EX\x20IF\x20NOT\x20','original\x20n','ForUser\x20er','Could\x20not\x20','tReloadCon','itialized\x20','EY,\x0a\x20\x20\x20\x20\x20\x20','\x20WHERE\x20id\x20','eator_jid\x20','3.0.0','les\x20WHERE\x20','ack\x20lookup','essage.\x0a','T\x20NOT\x20NULL','no\x20sendApi','\x20\x20\x20\x20\x20\x20\x20\x20cr','PM\x20usage:\x20','once','\x0a\x20\x20\x20\x20\x20\x20CRE','AND\x20name=?','SCHED_SEND','\x20enabled:','Message\x20er','selectedRo','chat_jid','[sched]\x20sw','\x20?,\x20?,\x20?)','\x20ensure\x20fa','moveSchedu','LT\x200','FAULT\x201','[sched]\x20in','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','7943274gMrner','empt\x20colum','map','ating\x20safe','H:mm>\x20[Nda','[sched]\x20up','update\x20sch','ed\x20add*\x20`<','o\x20one-off\x20','ge...>`\x0aâ€£\x20','EGER\x20DEFAU','weekly','5hkblas','nnection\x20','eated\x20cano','Africa/Nai','\x20at\x20','or\x20on\x20foll','normalizeT','dApi\x20','delete:\x20','parse_fail','\x20found\x20acr','_jid\x20=\x20?','ed\x20frequen','now','ted\x20â€”\x20migr','\x20chat=','unknown','ULL','ezone\x20FROM','in\x20N\x20hours','EXISTS\x20sch','\x20default\x20c','at\x20','catch','length','[sched]\x20ta','t_jid\x20TEXT','ðŸ“…\x20*SchedHe','creator','?,\x20?,\x20?,\x20?','ble\x20error\x20','t\x20lines\x20â€”\x20','adAndNorma','ily\x27,\x0a\x20\x20\x20\x20','umber>\x20<HH','\x20|\x20all>`\x0aâ€£','led\x20entrie','eated\x20sche','\x20\x20\x20chat_ji','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','s_new\x20(cha',',\x27now\x27))','utes>\x20<mes','ber>`\x20`<n>','rval=','datetime','=\x20?','disable','ponseMessa',')\x20VALUES\x20(','lizeExisti','\x20Delete\x20on','E\x20schedule','dules;','EXISTS\x20idx','ndleSchedC','essage\x20TEX','ult\x20TZ','diff','toSeconds','N\x20hours/da','oss\x20reques','(id:','zone','\x20lines\x0agp:','GER','sendat','tChatTimez','e\x20#','sched\x20enab','M-DDTHH:mm','ed\x20disable','SCHED_INIT',',\x20timezone','set','\x20updated\x20t','e=\x27table\x27\x20','tupSendApi','l/adequate','=excluded.','failed','ne;\x20old\x20ta','keys','mezone,\x20cr','ecutorTick','=2`\x20every\x20','1\x20daily,\x20n','ge:\x20sched\x20','Schedule\x20#','fromMillis','trimEnd','failed:\x20','livery\x20att','Usage:\x20sch','*\x20`<number','1\x20ORDER\x20BY','day_of_mon','hed\x20freque','indexOf','nce*\x20`<HH:','livered\x20re','DATETIME_M','filter','isAdmin','\x20\x20\x20\x20\x20\x20\x20\x20en','entries','REATE\x20TABL','slice','ours|YYYY-','w\x27))\x0a\x20\x20\x20\x20\x20','\x20->\x20','\x20\x20\x20);\x0a\x20\x20\x20\x20','-DDTHH:mm>','min','[sched]\x20en','ded\x20send_a','ge.\x0a\x0a>\x20*sc','eator_jid)','send_attem','eserved.\x0a\x0a','time\x20TEXT,','livered\x20an','list','body','\x20all','empts\x20reac','schedules','number','freq','sendAt','(using\x20sta','\x20\x20\x20enabled','s_new\x20RENA','robi','e\x20for\x20','day','from','EFAULT\x20\x27da','INTEGER\x20DE','there\x0amore','\x20=\x20?','9841769iYjTxw','uld\x20not\x20ad','plies\x20(fro','ed\x20once\x20<H','MM-DDTHH:m','abled\x20INTE','help','s\x20INTEGER,','fter\x20time\x20','as|jid|all','solveDefau','[sched]\x20Un','r,...|all>','ge...>','recurrence','db_failed','53172MCoUrO'];_0x163a=function(){return _0x2c8036;};return _0x163a();}function setupSendApi(_0x2d7930){const _0x3bfb88=_0x4a2726;botRef=_0x2d7930,sendApi=tryBuildSendApiFromBot(botRef),info('[sched]\x20se'+_0x3bfb88(0x39d)+_0x3bfb88(0x44a)+_0x3bfb88(0x357)+(sendApi?_0x3bfb88(0x1ed):_0x3bfb88(0x2c1)+_0x3bfb88(0x2d4)));}async function performSend(_0x5d5502,_0x2656e8){const _0x13dcc6=_0x4a2726,_0x5ac20a=_0x5d5502||null;if(!_0x5ac20a)throw new Error(_0x13dcc6(0x218)+'rget\x20avail'+'able\x20(expl'+'icit\x20targe'+_0x13dcc6(0x21c)+')');if(typeof sendApi==='function'){await sendApi(_0x5ac20a,_0x2656e8);return;}const _0x8c6767=tryBuildSendApiFromBot(botRef);if(typeof _0x8c6767===_0x13dcc6(0x212)){warn(_0x13dcc6(0x305)+'ndApi\x20was\x20'+_0x13dcc6(0x447)+_0x13dcc6(0x1b4)+_0x13dcc6(0x32e)+'.'),sendApi=_0x8c6767,await sendApi(_0x5ac20a,_0x2656e8);return;}throw new Error(_0x13dcc6(0x331)+_0x13dcc6(0x23f));}async function sendWithRetry(_0x61ace5,_0x332bb5){const _0x895e9b=_0x4a2726,_0x47d1d0=Number(SEND_RETRIES||-0x1fe+-0x21f9+0x23fa);let _0x210e75=0xed8+-0x1*0x2141+-0x3*-0x623,_0x3126d5=Number(INITIAL_BACKOFF_MS||0x1*0xfe1+-0x2*0xa13+0x639);while(_0x210e75<_0x47d1d0){try{return await performSend(_0x61ace5,_0x332bb5),!![];}catch(_0x4c65c2){_0x210e75++;const _0x1c6b02=String(_0x4c65c2?.[_0x895e9b(0x260)]||'')['toLowerCas'+'e']()['includes']('rate')||_0x4c65c2?.[_0x895e9b(0x295)]===0x184d*0x1+0xe31+-0x75d*0x5;warn(_0x895e9b(0x305)+_0x895e9b(0x2e4)+'\x20'+_0x210e75+_0x895e9b(0x1ef)+(_0x4c65c2?.['message']||_0x4c65c2));if(_0x210e75>=_0x47d1d0||!_0x1c6b02)return![];await new Promise(_0x568c91=>setTimeout(_0x568c91,_0x3126d5)),_0x3126d5*=0x27a*-0x2+0x65*0x44+-0x15de;}}return![];}async function sendScheduledMessage(_0x541b3d){const _0x1af94c=_0x4a2726,{id:_0xc3a3b0,chat_jid:_0x37ac23,message:_0x503c6b}=_0x541b3d,_0x1f083a={'text':_0x503c6b},_0x28dde4=Number(SEND_RETRIES||-0x9d3+0x405+0x5d1);let _0x2780ba=0x2b*-0x5b+-0x213*0x2+0x136f*0x1,_0x2c588f=Number(INITIAL_BACKOFF_MS||0x13fe+0x1acc+-0x2cd6);while(_0x2780ba<_0x28dde4){_0x2780ba++;try{return await performSend(_0x37ac23,_0x1f083a),{'success':!![],'unrecoverable':![]};}catch(_0x51d0e0){const _0x6c2727=_0x51d0e0?.[_0x1af94c(0x260)]||String(_0x51d0e0),_0x5701d9=_0x6c2727[_0x1af94c(0x2f0)+'e']()['includes'](_0x1af94c(0x1e8))||_0x51d0e0?.[_0x1af94c(0x1c6)]===-0x2441*0x1+0x1ddf+-0x15*-0x61,_0x4fec13=_0x6c2727[_0x1af94c(0x2f0)+'e']()[_0x1af94c(0x1b6)](_0x1af94c(0x422))||_0x51d0e0?.[_0x1af94c(0x1c6)]===-0x238f+0x1ece+0x655;warn('[sched]\x20se'+'nd\x20attempt'+'\x20'+_0x2780ba+'/'+_0x28dde4+_0x1af94c(0x234)+_0xc3a3b0+_0x1af94c(0x1ef)+_0x6c2727);if(_0x5701d9||_0x4fec13)return error(_0x1af94c(0x3e8)+_0x1af94c(0x42d)+'e\x20error\x20fo'+_0x1af94c(0x1eb)+_0xc3a3b0+':\x20'+_0x6c2727+(_0x1af94c(0x1ad)+'ying.')),{'success':![],'unrecoverable':!![]};if(_0x2780ba>=_0x28dde4)return error(_0x1af94c(0x245)+_0x1af94c(0x3fe)+_0x1af94c(0x1ca)+_0x1af94c(0x237)+'='+_0xc3a3b0+'.'),{'success':![],'unrecoverable':![]};await new Promise(_0x316259=>setTimeout(_0x316259,_0x2c588f)),_0x2c588f*=-0x5*0x72b+-0x1d84+-0x1*-0x415d;}}return{'success':![],'unrecoverable':![]};}function parseTimeToken(_0xbfd21,_0x158e77=DEFAULT_TIMEZONE){const _0x399daf=_0x4a2726;if(!_0xbfd21||typeof _0xbfd21!=='string')return null;const _0xbb617a=_0xbfd21[_0x399daf(0x318)](),_0x176ee0=_0xbb617a[_0x399daf(0x411)](/^in\s+(\d+)\s*(minute|min|minutes|m|hour|hours|hr|h|day|days|d)$/i);if(_0x176ee0){const _0x42b99b=Number(_0x176ee0[-0xb5*-0x16+-0x1f*0xdf+-0x2dd*-0x4]),_0x2cabd5=_0x176ee0[-0x4d4+-0x2c8+0x79e][_0x399daf(0x2f0)+'e']();let _0x3ba6d7=DateTime['now']()['setZone'](_0x158e77);if(_0x2cabd5[_0x399daf(0x27e)](_0x399daf(0x3c1))||_0x2cabd5==='m')_0x3ba6d7=_0x3ba6d7['plus']({'minutes':_0x42b99b});else{if(_0x2cabd5[_0x399daf(0x27e)]('h')||_0x2cabd5[_0x399daf(0x27e)]('hr'))_0x3ba6d7=_0x3ba6d7[_0x399daf(0x31f)]({'hours':_0x42b99b});else{if(_0x2cabd5[_0x399daf(0x27e)]('d'))_0x3ba6d7=_0x3ba6d7[_0x399daf(0x31f)]({'days':_0x42b99b});}}if(_0x3ba6d7[_0x399daf(0x2e7)])return{'type':'datetime','dt':_0x3ba6d7};}if(/^\d{4}-\d{2}-\d{2}[ T]\d{1,2}:\d{2}$/['test'](_0xbb617a)){const _0x2ac18e=_0xbb617a['replace']('\x20','T'),_0x3fce6a=DateTime['fromISO'](_0x2ac18e,{'zone':_0x158e77});if(_0x3fce6a[_0x399daf(0x2e7)])return{'type':'datetime','dt':_0x3fce6a};}if(/^\d{1,2}:\d{2}$/[_0x399daf(0x409)](_0xbb617a)){const [_0x23f015,_0x3385f8]=_0xbb617a[_0x399daf(0x2a1)](':')[_0x399daf(0x346)](Number);if(Number[_0x399daf(0x1d4)](_0x23f015)&&Number[_0x399daf(0x1d4)](_0x3385f8)&&_0x23f015>=0xdb9+-0xa80+0x339*-0x1&&_0x23f015<=0x1fe5+-0xd9*-0x7+0x1*-0x25bd&&_0x3385f8>=0xcc0+-0x1f0+-0xad0&&_0x3385f8<=0x7db+-0x2*0x56c+0x338)return{'type':_0x399daf(0x1f1),'hhmm':String(_0x23f015)[_0x399daf(0x215)](-0x2249+-0x10fb+0x3346,'0')+':'+String(_0x3385f8)['padStart'](0xdbb+0x1201+-0x106*0x1f,'0')};}return null;}function shouldSendSlot(_0x4dd958,_0x2b4281){const _0x28359b=_0x4a2726,_0x42a620=_0x4dd958[_0x28359b(0x28a)]||_0x28359b(0x44d),_0x5b6232=_0x4dd958[_0x28359b(0x46a)]||0x1e49+-0x1*-0x487+-0x22d0,_0x2fe1fe=_0x5b6232?DateTime[_0x28359b(0x3a9)](_0x5b6232*(-0x1546+-0x1927+-0x35b*-0xf))[_0x28359b(0x222)](_0x2b4281[_0x28359b(0x38f)]):null;if(!_0x2fe1fe)return!![];if(_0x42a620==='daily')return!_0x2fe1fe['hasSame'](_0x2b4281,_0x28359b(0x3d7));if(_0x42a620===_0x28359b(0x34f))return _0x2b4281[_0x28359b(0x38a)](_0x2fe1fe,_0x28359b(0x455))[_0x28359b(0x455)]>=-0x1*0x17ef+0x949*-0x2+0x2a88;if(_0x42a620[_0x28359b(0x27e)](_0x28359b(0x40e)+_0x28359b(0x1af))){const _0x378b8f=parseInt(_0x42a620['split'](':')[0x4ac+-0x231e+0x5*0x617],0x1d9*0x13+-0xb*0x21d+-0xbd2*0x1);if(isNaN(_0x378b8f)||_0x378b8f<-0x1147+-0xf1c+0x2064)return![];return _0x2b4281[_0x28359b(0x38a)](_0x2fe1fe,'days')[_0x28359b(0x455)]>=_0x378b8f;}if(_0x42a620[_0x28359b(0x27e)](_0x28359b(0x1de)+_0x28359b(0x2b3))){const _0x47de86=_0x42a620[_0x28359b(0x2a1)](':')[-0x1898+0x17a6+-0x51*-0x3][_0x28359b(0x2a1)](',')[_0x28359b(0x346)](_0x4dc752=>parseInt(_0x4dc752,0x1c3*-0x16+-0x4*-0x26d+0x7*0x428))[_0x28359b(0x3b6)](Boolean);return _0x47de86[_0x28359b(0x1b6)](_0x2b4281[_0x28359b(0x271)])&&!_0x2fe1fe[_0x28359b(0x225)](_0x2b4281,_0x28359b(0x3d7));}if(_0x42a620[_0x28359b(0x27e)](_0x28359b(0x3b0)+_0x28359b(0x2d0))){const _0x3b1d75=parseInt(_0x42a620[_0x28359b(0x2a1)](':')[0x2*0x40+0x105*-0x18+-0x169*-0x11],0x2*0xb7+-0x1*0xc07+0xaa3);return _0x2b4281['day']===_0x3b1d75&&!_0x2fe1fe['hasSame'](_0x2b4281,_0x28359b(0x3d7));}return![];}async function addScheduleRow(_0x32c594){const _0x296fc7=_0x4a2726;try{const _0x1da8ca=await db['run'](_0x296fc7(0x24b)+_0x296fc7(0x264)+_0x296fc7(0x1ab)+_0x296fc7(0x402)+_0x296fc7(0x1d0)+_0x296fc7(0x23a)+_0x296fc7(0x2ff)+_0x296fc7(0x3a3)+_0x296fc7(0x3c5)+_0x296fc7(0x309)+_0x296fc7(0x2da)+_0x296fc7(0x2f9)+'\x20?,\x20?)',[_0x32c594[_0x296fc7(0x33b)],_0x32c594[_0x296fc7(0x260)],_0x32c594[_0x296fc7(0x435)],_0x32c594[_0x296fc7(0x31c)],_0x32c594[_0x296fc7(0x28a)]||'daily',_0x32c594[_0x296fc7(0x22e)]||null,_0x32c594[_0x296fc7(0x25b)+'d']]),_0x54cef5=_0x1da8ca?.[_0x296fc7(0x450)]||null;return info(_0x296fc7(0x45b)+'ded\x20schedu'+_0x296fc7(0x282)+_0x54cef5+_0x296fc7(0x35f)+_0x32c594['chat_jid']+_0x296fc7(0x1bd)+(_0x32c594['time']||_0x32c594['send_at'])),_0x54cef5;}catch(_0x485bf1){return warn('[sched]\x20ad'+_0x296fc7(0x279)+'ow\x20error:\x20'+(_0x485bf1?.[_0x296fc7(0x260)]||_0x485bf1)),null;}}async function listSchedulesForChat(_0x263cfb){const _0x5ed8e1=_0x4a2726;try{const _0x21825b=await db[_0x5ed8e1(0x1d5)]('SELECT\x20*\x20F'+_0x5ed8e1(0x2cf)+_0x5ed8e1(0x32d)+_0x5ed8e1(0x28c)+'\x20?\x20ORDER\x20B'+_0x5ed8e1(0x292),[_0x263cfb]);return _0x21825b||[];}catch(_0x158212){return warn('[sched]\x20li'+_0x5ed8e1(0x2d6)+_0x5ed8e1(0x254)+_0x5ed8e1(0x20d)+(_0x158212?.[_0x5ed8e1(0x260)]||_0x158212)),[];}}async function removeScheduleByDBId(_0x3aeeac){const _0x5f12e3=_0x4a2726;try{const _0x4a7ec4=await db[_0x5f12e3(0x31a)]('DELETE\x20FRO'+_0x5f12e3(0x45a)+_0x5f12e3(0x456)+_0x5f12e3(0x3dc),[_0x3aeeac]);return _0x4a7ec4?.[_0x5f12e3(0x30f)]?!![]:![];}catch(_0x3778f1){return warn(_0x5f12e3(0x274)+_0x5f12e3(0x33f)+_0x5f12e3(0x1b5)+_0x5f12e3(0x20d)+(_0x3778f1?.[_0x5f12e3(0x260)]||_0x3778f1)),![];}}async function removeAllSchedulesForChat(_0x31d704){const _0x1f44ae=_0x4a2726;try{const _0x217ed0=await db[_0x1f44ae(0x31a)](_0x1f44ae(0x320)+'M\x20schedule'+_0x1f44ae(0x199)+'at_jid\x20=\x20?',[_0x31d704]);return _0x217ed0?.[_0x1f44ae(0x30f)]||-0x8*0x32b+0x991+0xfc7*0x1;}catch(_0x13f242){return warn('[sched]\x20re'+'moveAllSch'+_0x1f44ae(0x1db)+'hat\x20error:'+'\x20'+(_0x13f242?.[_0x1f44ae(0x260)]||_0x13f242)),-0x1*-0xadd+-0x1*-0x26f9+-0x31d6*0x1;}}async function updateScheduleFields(_0x224298,_0x4d887e={}){const _0x311795=_0x4a2726;try{const _0x5b92b5=[],_0x3bdc6b=[];for(const _0x43e6cf of Object[_0x311795(0x3a2)](_0x4d887e)){_0x5b92b5[_0x311795(0x1cd)](_0x43e6cf+'\x20=\x20?'),_0x3bdc6b[_0x311795(0x1cd)](_0x4d887e[_0x43e6cf]);}if(!_0x5b92b5['length'])return![];_0x3bdc6b[_0x311795(0x1cd)](_0x224298);const _0x5755d6=_0x311795(0x1a3)+_0x311795(0x19a)+'\x20'+_0x5b92b5[_0x311795(0x2bb)](',\x20')+(_0x311795(0x32a)+_0x311795(0x37e)),_0x51be5b=await db[_0x311795(0x31a)](_0x5755d6,_0x3bdc6b);return _0x51be5b?.[_0x311795(0x30f)]?!![]:![];}catch(_0x293663){return warn(_0x311795(0x349)+_0x311795(0x401)+_0x311795(0x29b)+_0x311795(0x20d)+(_0x293663?.[_0x311795(0x260)]||_0x293663)),![];}}async function getChatTimezone(_0x2f9a6f){const _0x401b01=_0x4a2726;try{const _0x5c8888=await db['get'](_0x401b01(0x420)+_0x401b01(0x362)+'\x20scheduler'+'_settings\x20'+_0x401b01(0x26d)+_0x401b01(0x35b),[_0x2f9a6f]);return _0x5c8888?.[_0x401b01(0x22e)]||null;}catch(_0x4a29f8){return warn(_0x401b01(0x28e)+_0x401b01(0x393)+'one\x20error:'+'\x20'+(_0x4a29f8?.[_0x401b01(0x260)]||_0x4a29f8)),null;}}async function setChatTimezone(_0x33bdd4,_0x1ca9f3){const _0x5825a9=_0x4a2726;try{return await db[_0x5825a9(0x31a)](_0x5825a9(0x24b)+_0x5825a9(0x264)+_0x5825a9(0x276)+'\x20(chat_jid'+',\x20timezone'+_0x5825a9(0x381)+_0x5825a9(0x1d7)+'ONFLICT(ch'+_0x5825a9(0x1fb)+'\x20UPDATE\x20SE'+_0x5825a9(0x231)+_0x5825a9(0x39f)+_0x5825a9(0x22e),[_0x33bdd4,_0x1ca9f3]),!![];}catch(_0x2355da){return warn('[sched]\x20se'+_0x5825a9(0x393)+'one\x20error:'+'\x20'+(_0x2355da?.[_0x5825a9(0x260)]||_0x2355da)),![];}}function _0x4e3e(_0x1fae0b,_0x5caddb){const _0x117b2c=_0x163a();return _0x4e3e=function(_0x18dda6,_0x487e4d){_0x18dda6=_0x18dda6-(-0xb5+0x7b9*0x3+-0x14df);let _0x4c8eb2=_0x117b2c[_0x18dda6];return _0x4c8eb2;},_0x4e3e(_0x1fae0b,_0x5caddb);}async function executorTick(){const _0x984ec4=_0x4a2726;if(executorRunning)return;executorRunning=!![];try{const _0x173187=await db[_0x984ec4(0x1d5)]('SELECT\x20*\x20F'+_0x984ec4(0x2cf)+'les\x20WHERE\x20'+'enabled\x20=\x20'+_0x984ec4(0x3af)+'\x20id\x20ASC');if(!_0x173187||_0x173187[_0x984ec4(0x368)]===0x59*-0x4d+0x267f+-0xbba)return;for(const _0x3aeb52 of _0x173187){try{const _0x422a59=_0x3aeb52[_0x984ec4(0x22e)]||await getChatTimezone(_0x3aeb52[_0x984ec4(0x33b)])||DEFAULT_TIMEZONE,_0x5ba989=DateTime[_0x984ec4(0x35d)]()[_0x984ec4(0x222)](_0x422a59),_0x32318c=Math['floor'](_0x5ba989[_0x984ec4(0x38b)]());let _0x5cab21=![],_0x5207b4=![];if(_0x3aeb52[_0x984ec4(0x31c)]&&Number(_0x3aeb52[_0x984ec4(0x31c)])>0x18*0x12+0x13b9+-0x1569)_0x5207b4=!![],Number(_0x3aeb52[_0x984ec4(0x31c)])<=_0x32318c&&(_0x5cab21=!![]);else{if(_0x3aeb52[_0x984ec4(0x435)]){const _0x5d5fc3=_0x5ba989[_0x984ec4(0x2fd)]('HH:mm');if(_0x5d5fc3===_0x3aeb52[_0x984ec4(0x435)]){const _0x14d791={'id':_0x3aeb52['id'],'frequency':_0x3aeb52[_0x984ec4(0x28a)]||_0x984ec4(0x44d),'last_sent':_0x3aeb52['last_sent']||0x2*0x12cd+0xd4f*-0x1+0x184b*-0x1};shouldSendSlot(_0x14d791,_0x5ba989)&&(_0x5cab21=!![]);}}}if(!_0x5cab21)continue;const _0x27b0bb=await sendScheduledMessage(_0x3aeb52);if(_0x27b0bb[_0x984ec4(0x226)]){if(_0x5207b4){const _0x3de881=await removeScheduleByDBId(_0x3aeb52['id']);_0x3de881?info(_0x984ec4(0x2f6)+_0x984ec4(0x3c9)+_0x984ec4(0x261)+'one-off\x20id'+'='+_0x3aeb52['id']+_0x984ec4(0x2f1)+_0x3aeb52['chat_jid']):(await updateScheduleFields(_0x3aeb52['id'],{'enabled':0x0,'last_sent':_0x32318c}),warn(_0x984ec4(0x2f6)+_0x984ec4(0x255)+'e-off\x20id='+_0x3aeb52['id']+_0x984ec4(0x2f1)+_0x3aeb52[_0x984ec4(0x33b)]+(_0x984ec4(0x464)+_0x984ec4(0x27c)+_0x984ec4(0x1f0)+'\x20disabled\x20'+_0x984ec4(0x24e))));}else await updateScheduleFields(_0x3aeb52['id'],{'last_sent':_0x32318c,'send_attempts':0x0}),info('[sched]\x20de'+_0x984ec4(0x3b4)+_0x984ec4(0x224)+'='+_0x3aeb52['id']+_0x984ec4(0x2f1)+_0x3aeb52[_0x984ec4(0x33b)]+'\x20at\x20'+_0x3aeb52['time']+'\x20('+_0x422a59+')');}else{const _0x12766b=(_0x3aeb52[_0x984ec4(0x3c6)+_0x984ec4(0x197)]||-0x1637*0x1+0x54f*-0x2+-0x691*-0x5)+(0x1*-0x1809+-0x115d+0x2967);_0x27b0bb['unrecovera'+_0x984ec4(0x2d4)]||_0x12766b>=MAX_DB_ATTEMPTS?(error(_0x984ec4(0x1c3)+'='+_0x3aeb52['id']+(_0x984ec4(0x2b7)+'livery\x20per'+_0x984ec4(0x1fa)+'unrecovera'+_0x984ec4(0x36e)+_0x984ec4(0x30b)+_0x984ec4(0x3cd)+_0x984ec4(0x2b8)+'bling\x20sche'+_0x984ec4(0x436))),await updateScheduleFields(_0x3aeb52['id'],{'enabled':0x0,'last_attempt':_0x32318c})):(warn(_0x984ec4(0x1c3)+'='+_0x3aeb52['id']+(_0x984ec4(0x2b7)+_0x984ec4(0x3ac)+_0x984ec4(0x1c1))+_0x12766b+(_0x984ec4(0x2b1)+_0x984ec4(0x263)+'\x20cycle.')),await updateScheduleFields(_0x3aeb52['id'],{'send_attempts':_0x12766b,'last_attempt':_0x32318c}));}}catch(_0x5714e4){warn(_0x984ec4(0x3fc)+_0x984ec4(0x262)+_0x984ec4(0x313)+_0x984ec4(0x1eb)+_0x3aeb52['id']+':\x20'+(_0x5714e4?.[_0x984ec4(0x260)]||_0x5714e4));}}}catch(_0x194493){error(_0x984ec4(0x3fc)+'ecutorTick'+'\x20error:\x20'+(_0x194493?.[_0x984ec4(0x260)]||_0x194493));}finally{executorRunning=![];}}function startSchedulerAligned(){stopScheduler();const _0x3bc438=-0x130f1+-0xaa64+-0x23*-0x1447-Date['now']()%(0x2*0xd7dd+-0xda2b*-0x1+-0x1*0x19f85);setTimeout(()=>{const _0x2e6d21=_0x4e3e;executorTick()[_0x2e6d21(0x367)](_0x839b34=>warn(_0x2e6d21(0x342)+_0x2e6d21(0x209)+_0x2e6d21(0x213)+':\x20'+(_0x839b34?.[_0x2e6d21(0x260)]||_0x839b34))),schedulerIntervalHandle=setInterval(()=>{const _0x4777ed=_0x2e6d21;executorTick()[_0x4777ed(0x367)](_0x4301ed=>warn(_0x4777ed(0x3fc)+_0x4777ed(0x3a4)+'\x20error:\x20'+(_0x4301ed?.['message']||_0x4301ed)));},CHECK_INTERVAL_MS),info(_0x2e6d21(0x1e6)+_0x2e6d21(0x1a6)+_0x2e6d21(0x2a7)+'gned\x20to\x20mi'+'nutes)');},_0x3bc438);}function stopScheduler(){const _0x4f9a36=_0x4a2726;schedulerIntervalHandle&&(clearInterval(schedulerIntervalHandle),schedulerIntervalHandle=null,info(_0x4f9a36(0x1e6)+_0x4f9a36(0x1a6)+'opped'));}function extractTextFromMessage(_0x3104e7){const _0x150f8a=_0x4a2726;if(!_0x3104e7||!_0x3104e7[_0x150f8a(0x260)])return'';const _0x37b401=_0x3104e7[_0x150f8a(0x260)];if(_0x37b401['conversati'+'on'])return _0x37b401['conversati'+'on'];if(_0x37b401[_0x150f8a(0x216)+_0x150f8a(0x40f)]?.['text'])return _0x37b401[_0x150f8a(0x216)+_0x150f8a(0x40f)]['text'];if(_0x37b401[_0x150f8a(0x25e)+'ge']?.['caption'])return _0x37b401[_0x150f8a(0x25e)+'ge'][_0x150f8a(0x2ed)];if(_0x37b401['videoMessa'+'ge']?.[_0x150f8a(0x2ed)])return _0x37b401[_0x150f8a(0x1d1)+'ge'][_0x150f8a(0x2ed)];if(_0x37b401['buttonsRes'+_0x150f8a(0x380)+'ge']?.[_0x150f8a(0x296)+'ttonId'])return _0x37b401['buttonsRes'+_0x150f8a(0x380)+'ge'][_0x150f8a(0x296)+_0x150f8a(0x205)];if(_0x37b401[_0x150f8a(0x2b0)+'seMessage']?.[_0x150f8a(0x1c7)+_0x150f8a(0x41b)]?.[_0x150f8a(0x33a)+_0x150f8a(0x1b8)])return _0x37b401[_0x150f8a(0x2b0)+_0x150f8a(0x22f)][_0x150f8a(0x1c7)+_0x150f8a(0x41b)][_0x150f8a(0x33a)+_0x150f8a(0x1b8)];return'';}function splitFirstLinePreserveRest(_0x58a5e1){const _0x2f96d4=_0x4a2726,_0x3f0b9c=_0x58a5e1[_0x2f96d4(0x2a1)](/\r?\n/),_0x44f78e=_0x3f0b9c[_0x2f96d4(0x368)]>-0x2d*-0x82+0x134a+0x383*-0xc?_0x3f0b9c[_0x2f96d4(0x248)]():'',_0x188cc7=_0x3f0b9c[_0x2f96d4(0x2bb)]('\x0a'),_0x491db3=_0x44f78e['trim']()['split'](/\s+/)[_0x2f96d4(0x3b6)](Boolean);return{'firstLine':_0x44f78e,'restText':_0x188cc7,'firstTokens':_0x491db3};}function findGpAndCleanBodyFromRestAndFirst(_0x11acbf,_0x336c23){const _0x3f3523=_0x4a2726,_0x1a96c3=(_0x336c23&&_0x336c23[_0x3f3523(0x368)]?_0x336c23:'')+'\x0a'+(_0x11acbf||''),_0x4d3dfc=_0x1a96c3[_0x3f3523(0x411)](/\bgp[:\s]+(\S+)/i),_0x32760f=_0x4d3dfc?_0x4d3dfc[0x7*0x292+-0x146d+-0x4*-0x9c][_0x3f3523(0x318)]():null;let _0xd89efa=(_0x336c23||'')[_0x3f3523(0x2a1)](/\r?\n/);if(!_0xd89efa||_0xd89efa[_0x3f3523(0x368)]===-0x247b+0xa*0x359+-0x1*-0x301||_0xd89efa[_0x3f3523(0x22d)](_0x167e96=>!_0x167e96[_0x3f3523(0x318)]()))return{'gpValue':_0x32760f,'cleanedBody':''};const _0x3e92df=_0xd89efa[_0x3f3523(0x346)](_0x92ec15=>_0x92ec15[_0x3f3523(0x243)](/^\s*gp[:\s]+\S+\s*$/i,'')[_0x3f3523(0x243)](/\s*\bgp[:\s]+\S+\s*$/i,'')['trimEnd']())[_0x3f3523(0x3b6)](_0x5cfab6=>_0x5cfab6[_0x3f3523(0x368)]>-0x27*0x45+0x1*-0x240d+-0x10*-0x2e9),_0x1979f4=_0x3e92df[_0x3f3523(0x2bb)]('\x0a')[_0x3f3523(0x318)]();return{'gpValue':_0x32760f,'cleanedBody':_0x1979f4};}function extractInlineAfterToken(_0x2b7c1e,_0xb6ad04){const _0x40dd33=_0x4a2726;if(!_0x2b7c1e||!_0xb6ad04)return'';try{const _0x1c1431=new RegExp('\x5cb'+_0xb6ad04[_0x40dd33(0x243)](/[.*+?^${}()|[\]\\]/g,_0x40dd33(0x26a))+'\x5cb'),_0x43f9ce=_0x2b7c1e[_0x40dd33(0x411)](_0x1c1431);if(!_0x43f9ce)return'';const _0x39a387=_0x2b7c1e[_0x40dd33(0x3b2)](_0x43f9ce[-0x821*0x1+-0x6ce+0xeef*0x1]),_0x37e914=_0x39a387+_0x43f9ce[0x2199+-0x1503+0x3*-0x432]['length'];let _0x3104b1=_0x2b7c1e[_0x40dd33(0x3bb)](_0x37e914)[_0x40dd33(0x243)](/^\s+/,'');return _0x3104b1=_0x3104b1[_0x40dd33(0x243)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x40dd33(0x318)](),_0x3104b1;}catch(_0x4e3b74){return'';}}const USAGE=_0x4a2726(0x36b)+_0x4a2726(0x19d)+'s*\x0a\x0a>\x20*sch'+_0x4a2726(0x34b)+_0x4a2726(0x41d)+_0x4a2726(0x2b6)+_0x4a2726(0x310)+_0x4a2726(0x38c)+_0x4a2726(0x451)+_0x4a2726(0x43f)+_0x4a2726(0x34d)+_0x4a2726(0x24d)+'n\x20follow\x20t'+'ime\x20inline'+'\x20or\x20on\x20nex'+_0x4a2726(0x36f)+_0x4a2726(0x324)+'ewlines\x20pr'+_0x4a2726(0x3c7)+_0x4a2726(0x19e)+_0x4a2726(0x3b3)+'mm>`\x20`[Nda'+'ys]`\x20`<mes'+_0x4a2726(0x1bf)+'â€£\x20One-off\x20'+'schedule.\x20'+_0x4a2726(0x432)+'\x20is\x20provid'+'ed,\x20schedu'+_0x4a2726(0x1ea)+_0x4a2726(0x307)+_0x4a2726(0x448)+_0x4a2726(0x1fe)+_0x4a2726(0x427)+_0x4a2726(0x3f3)+_0x4a2726(0x2ba)+_0x4a2726(0x29c)+_0x4a2726(0x301)+_0x4a2726(0x3f2)+_0x4a2726(0x3ae)+_0x4a2726(0x30a)+_0x4a2726(0x198)+_0x4a2726(0x373)+_0x4a2726(0x383)+'e\x20or\x20multi'+'ple\x20schedu'+_0x4a2726(0x374)+'s.\x0a\x0a>\x20*sch'+_0x4a2726(0x453)+'<number>`\x20'+_0x4a2726(0x2ee)+_0x4a2726(0x363)+'\x20|\x20YYYY-MM'+_0x4a2726(0x3c0)+_0x4a2726(0x2a6)+'\x20the\x20time\x20'+_0x4a2726(0x2aa)+_0x4a2726(0x415)+_0x4a2726(0x3c4)+_0x4a2726(0x3b1)+_0x4a2726(0x306)+_0x4a2726(0x37b)+_0x4a2726(0x46c)+_0x4a2726(0x2af)+'val:\x20`n=1`'+'\x20daily,\x20`n'+_0x4a2726(0x3a5)+_0x4a2726(0x2d2)+'c.\x0a\x0a>\x20*sch'+_0x4a2726(0x397)+'*\x20`<number'+_0x4a2726(0x442)+_0x4a2726(0x239)+_0x4a2726(0x1c5)+_0x4a2726(0x2c7)+'sage.\x0a\x0a>\x20*'+_0x4a2726(0x395)+'le*\x20`<numb'+_0x4a2726(0x207)+'enable\x20a\x20p'+_0x4a2726(0x250)+'disabled\x20m'+_0x4a2726(0x32f),processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x23e1+-0x1*0xa2+0x2497)*(-0x106*-0x1f+-0x1e3d+0x26b);function markCmdProcessed(_0x1a4c85){const _0x2e717c=_0x4a2726;if(!_0x1a4c85)return;if(processedCmdKeys[_0x2e717c(0x2dd)](_0x1a4c85))try{clearTimeout(processedCmdKeys['get'](_0x1a4c85));}catch(_0xfe4257){}const _0x1b6e65=setTimeout(()=>processedCmdKeys[_0x2e717c(0x416)](_0x1a4c85),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x2e717c(0x39a)](_0x1a4c85,_0x1b6e65);}function isCmdProcessed(_0x1af09e){const _0x257b9d=_0x4a2726;return _0x1af09e&&processedCmdKeys[_0x257b9d(0x2dd)](_0x1af09e);}async function resolveDefaultChatJidsForUser(_0x345b19){const _0x26a350=_0x4a2726;try{const _0x106947=await getDefault(_0x345b19)[_0x26a350(0x367)](()=>null);if(!_0x106947||Array['isArray'](_0x106947)&&_0x106947[_0x26a350(0x368)]===0x1617+-0x19d9+0x3c2)return[];const _0x212385=Array[_0x26a350(0x2e0)](_0x106947)?_0x106947:[_0x106947],_0x597dbc=[];for(const _0x45cfdd of _0x212385){try{const _0x371472=await getConnection(_0x45cfdd)['catch'](()=>null);if(Array[_0x26a350(0x2e0)](_0x371472))_0x597dbc['push'](..._0x371472);else{if(_0x371472)_0x597dbc[_0x26a350(0x1cd)](String(_0x371472));}}catch(_0x1b7d61){warn(_0x26a350(0x274)+'solving\x20co'+_0x26a350(0x351)+_0x45cfdd+_0x26a350(0x1ef)+(_0x1b7d61?.[_0x26a350(0x260)]||_0x1b7d61));}}return uniqArray(_0x597dbc);}catch(_0x5bb245){return warn('[sched]\x20re'+_0x26a350(0x3e7)+_0x26a350(0x30c)+_0x26a350(0x325)+_0x26a350(0x2d8)+(_0x5bb245?.[_0x26a350(0x260)]||_0x5bb245)),[];}}async function getCombinedSchedulesForChats(_0x378190){const _0x8459ca=[];for(const _0x1d4404 of _0x378190){const _0x51b9ff=await listSchedulesForChat(_0x1d4404);for(const _0x16e382 of _0x51b9ff){_0x8459ca['push'](Object['assign']({},_0x16e382,{'chat_jid':_0x1d4404}));}}return _0x8459ca;}async function resolveNumberToDbId(_0x44e472,_0x28cc8f){const _0x351610=_0x4a2726;if(!_0x44e472||!Number[_0x351610(0x1d4)](_0x44e472)||_0x44e472<-0x8b*-0x17+0x25fe+-0x327a)return null;const _0x35f7d2=await getCombinedSchedulesForChats(_0x28cc8f);if(!_0x35f7d2||_0x35f7d2['length']<_0x44e472)return null;return _0x35f7d2[_0x44e472-(0x1*-0x12b2+0xc77+0x31e*0x2)]['id'];}async function findStoredMatchFromFindings(_0x169be4=[]){const _0x315c8f=_0x4a2726;try{const _0x5325b2=await listSudo();if(!Array[_0x315c8f(0x2e0)](_0x5325b2)||_0x5325b2[_0x315c8f(0x368)]===0xe05+0x2099+-0x66*0x75)return null;const _0x43a56b=new Set(_0x5325b2[_0x315c8f(0x346)](String));for(const _0x554ad0 of _0x169be4||[]){if(!_0x554ad0||typeof _0x554ad0[_0x315c8f(0x232)]!==_0x315c8f(0x1bb))continue;const _0x2ce322=normalizeToJid(_0x554ad0[_0x315c8f(0x232)]);if(_0x2ce322&&_0x43a56b['has'](_0x2ce322))return _0x2ce322;if(_0x43a56b[_0x315c8f(0x2dd)](_0x554ad0['jid']))return _0x554ad0['jid'];const _0x163d79=String(_0x554ad0['jid'])[_0x315c8f(0x2a1)]('@')[0xe9*0x19+-0x39b+-0x1326][_0x315c8f(0x2a1)](':')[-0x833+0x9e6+-0x1b3];if(_0x163d79)for(const _0x41aa44 of _0x5325b2){const _0x565f45=String(_0x41aa44)['split']('@')[-0xcf2*0x1+-0x1e37+0xe63*0x3];if(_0x565f45&&_0x565f45===_0x163d79)return _0x41aa44;}}return null;}catch(_0x5f2e83){return warn('[sched]\x20fi'+'ndStoredMa'+_0x315c8f(0x438)+_0x315c8f(0x2a2)+_0x315c8f(0x44e)+(_0x5f2e83?.[_0x315c8f(0x260)]||_0x5f2e83)),null;}}export async function onMessage(_0x544978,_0x5aaf82){const _0x1a9c40=_0x4a2726;try{if(!_0x544978||!_0x544978[_0x1a9c40(0x217)]||!_0x544978[_0x1a9c40(0x260)]||!_0x5aaf82)return;const _0x1ae3b3=String(_0x544978[_0x1a9c40(0x217)][_0x1a9c40(0x298)]||'')+'::'+String(_0x544978['key']['id']||_0x544978[_0x1a9c40(0x217)]['participan'+'t']||'');if(isCmdProcessed(_0x1ae3b3))return;markCmdProcessed(_0x1ae3b3);if(!_0x544978[_0x1a9c40(0x433)])return;const _0x543ccf=typeof _0x544978[_0x1a9c40(0x315)]==='string'&&_0x544978[_0x1a9c40(0x315)][_0x1a9c40(0x318)]()[_0x1a9c40(0x368)]?_0x544978[_0x1a9c40(0x315)]:extractTextFromMessage(_0x544978)||'';if(!_0x543ccf)return;const _0x3ac4d0=_0x544978['key'][_0x1a9c40(0x298)],_0x4e0e45=typeof _0x3ac4d0===_0x1a9c40(0x1bb)&&_0x3ac4d0[_0x1a9c40(0x21f)](_0x1a9c40(0x412));if(_0x4e0e45){if(!_0x5aaf82[_0x1a9c40(0x3b7)])return;const _0x146a45=String(_0x543ccf)[_0x1a9c40(0x318)](),{firstLine:_0x97facd,restText:_0x1db63a,firstTokens:_0x522b87}=splitFirstLinePreserveRest(_0x146a45),_0x2a1794=(_0x522b87[0x7*-0x1a8+0x95*0x3c+0x4*-0x5d5]||'')['toLowerCas'+'e']();if(!commands['includes'](_0x2a1794))return;const _0x355890=(_0x522b87[-0x20e5+-0x1*-0x11fa+0x5*0x2fc]||'')[_0x1a9c40(0x2f0)+'e'](),_0x50b7fc=_0x544978['key'][_0x1a9c40(0x1fd)+'t']||_0x544978[_0x1a9c40(0x217)][_0x1a9c40(0x3d8)]||_0x544978[_0x1a9c40(0x217)][_0x1a9c40(0x298)]||'',_0x16fed=(_0x50b7fc||'')[_0x1a9c40(0x2a1)]('@')[-0x25af+0x1e3a+-0x1*-0x775],_0x4ce600=await resolveDefaultChatJidsForUser(_0x16fed),_0x1e38b0=_0x3ac4d0;if(!_0x4ce600||_0x4ce600[_0x1a9c40(0x368)]===0x104a+0x262b+0x3675*-0x1){await sendWithRetry(_0x1e38b0,{'text':_0x1a9c40(0x326)+_0x1a9c40(0x20c)+_0x1a9c40(0x3f1)+_0x1a9c40(0x286)+_0x1a9c40(0x291)+_0x1a9c40(0x44b)+'th\x20/setdef'+_0x1a9c40(0x1c8)});return;}await handleSchedCommandGroup(_0x544978,{'firstLine':_0x97facd,'restText':_0x1db63a,'firstTokens':_0x522b87,'sub':_0x355890,'defaultChatJids':_0x4ce600,'confirmationTarget':_0x1e38b0,'senderJid':_0x50b7fc});return;}const _0x176f14=Boolean(_0x544978['key'][_0x1a9c40(0x43e)]);let _0x508d62=null;if(_0x176f14){const _0x3c6eab=getBotJid();if(!_0x3c6eab){warn('[sched]\x20PM'+_0x1a9c40(0x321)+_0x1a9c40(0x220)+_0x1a9c40(0x1e7)+_0x1a9c40(0x3df)+_0x1a9c40(0x446));return;}_0x508d62=_0x3c6eab;}else{let _0x417a71=![];try{_0x417a71=await isSudo(botRef,_0x544978);}catch(_0x5409e7){_0x417a71=![];}if(!_0x417a71)return;const _0xc74b21=userJidFromCtx(_0x544978)||{'findings':[]},_0x47c7eb=await findStoredMatchFromFindings(_0xc74b21[_0x1a9c40(0x2a8)]||[]);if(!_0x47c7eb)return;_0x508d62=_0x47c7eb;}const _0x15c4a5=String(_0x543ccf),{firstLine:_0x5921ab,restText:_0x3ea897,firstTokens:_0x1a29b9}=splitFirstLinePreserveRest(_0x15c4a5),_0x1587aa=(_0x1a29b9[0x1cab+0x1e6f+-0x1bd*0x22]||'')[_0x1a9c40(0x2f0)+'e']();if(!commands[_0x1a9c40(0x1b6)](_0x1587aa))return;const _0x31570a=(_0x1a29b9[-0x943*-0x1+0xf*-0x5d+-0xd*0x4b]||'')[_0x1a9c40(0x2f0)+'e']();if(!_0x31570a||_0x31570a===_0x1a9c40(0x3e3)){await sendWithRetry(_0x508d62,{'text':USAGE});return;}const _0x4ab32f=[_0x1a9c40(0x334),_0x1a9c40(0x204),_0x1a9c40(0x3ca),_0x1a9c40(0x416),_0x1a9c40(0x3fb),_0x1a9c40(0x28a),_0x1a9c40(0x37f),'enable'],{gpValue:_0xf5dbaa,cleanedBody:_0x17efa9}=findGpAndCleanBodyFromRestAndFirst(_0x5921ab,_0x3ea897);if(_0x4ab32f[_0x1a9c40(0x1b6)](_0x31570a)&&!_0xf5dbaa){await sendWithRetry(_0x508d62,{'text':_0x1a9c40(0x333)+_0x1a9c40(0x1da)+_0x1a9c40(0x270)+_0x1a9c40(0x210)+_0x1a9c40(0x312)+'anaging\x20sc'+_0x1a9c40(0x1f8)+_0x1a9c40(0x1a9)+_0x1a9c40(0x425)+_0x1a9c40(0x30d)+_0x1a9c40(0x3db)+_0x1a9c40(0x390)+_0x1a9c40(0x2cb)});return;}let _0x5c51c1=[];if(_0xf5dbaa){const _0x517b0a=_0xf5dbaa['trim']();if(_0x517b0a['toLowerCas'+'e']()===_0x1a9c40(0x1d5))_0x5c51c1=await _0x4e4387[_0x1a9c40(0x258)+_0x1a9c40(0x42f)]();else{const _0x665d47=await _0x4e4387[_0x1a9c40(0x211)+'e'](_0x517b0a);if(_0x665d47)_0x5c51c1=[_0x665d47];else{if(_0x517b0a[_0x1a9c40(0x1b6)]('@'))_0x5c51c1=[_0x4e4387[_0x1a9c40(0x356)+_0x1a9c40(0x2ac)](_0x517b0a)];}}if(_0x4ab32f['includes'](_0x31570a)&&(!_0x5c51c1||_0x5c51c1['length']===-0x2fe*0x2+-0xc20*0x3+0x2a5c)){await sendWithRetry(_0x508d62,{'text':_0x1a9c40(0x326)+'resolve\x20gp'+_0x1a9c40(0x444)+_0xf5dbaa+(_0x1a9c40(0x19b)+_0x1a9c40(0x1ac)+'all\x20or\x20a\x20g'+_0x1a9c40(0x2e1))});return;}}await handleSchedCommandPM(_0x544978,{'sub':_0x31570a,'firstLine':_0x5921ab,'restText':_0x3ea897,'firstTokens':_0x1a29b9,'targetChatJids':_0x5c51c1,'confirmationTarget':_0x508d62,'senderJid':_0x544978['key'][_0x1a9c40(0x1fd)+'t']||_0x544978[_0x1a9c40(0x217)][_0x1a9c40(0x3d8)]||'','cleanedBody':_0x17efa9});return;}catch(_0x30ae7b){error(_0x1a9c40(0x2ce)+_0x1a9c40(0x339)+_0x1a9c40(0x2d8)+(_0x30ae7b?.[_0x1a9c40(0x260)]||_0x30ae7b));}}async function handleSchedCommandGroup(_0x3c8b7e,{firstLine:_0x516645,restText:_0x24264a,firstTokens:_0x384318,sub:_0x239f73,defaultChatJids:_0x521820,confirmationTarget:_0x55ed9b,senderJid:_0x46cdf2}){const _0x5bb8ff=_0x4a2726;try{if(!_0x239f73||_0x239f73==='help'){await sendWithRetry(_0x55ed9b,{'text':USAGE});return;}if(_0x239f73===_0x5bb8ff(0x334)){const _0x4151d6=_0x384318[-0x159*-0x2+0x5*0x126+0x2*-0x437],_0xa9bcb8=_0x384318[0x2*-0xf33+-0x25*0x54+0x2a8d]&&/^\d+$/[_0x5bb8ff(0x409)](_0x384318[-0x1*0x19fa+0x16ed+0x4*0xc4])?Number(_0x384318[0xb24+0x1637+-0x2158]):null;let _0x4cd238='';if(_0x4151d6){const _0xed0af6=new RegExp('\x5cb'+_0x4151d6['replace'](/[.*+?^${}()|[\]\\]/g,_0x5bb8ff(0x26a))+'\x5cb'),_0xf87faa=_0x516645['match'](_0xed0af6);if(_0xf87faa){const _0x4901e1=_0x516645[_0x5bb8ff(0x3b2)](_0xf87faa[-0x8aa+-0x1e30+-0x26da*-0x1]),_0x4b1615=_0x4901e1+_0xf87faa[0xc4b*-0x3+0x18e0+-0x7*-0x1b7][_0x5bb8ff(0x368)];_0x4cd238=_0x516645[_0x5bb8ff(0x3bb)](_0x4b1615)[_0x5bb8ff(0x243)](/^\s*/,'');if(_0x4cd238&&/^\d+/[_0x5bb8ff(0x409)](_0x4cd238))_0x4cd238=_0x4cd238[_0x5bb8ff(0x243)](/^\d+\s*/,'');}}const _0x2786d6=_0x4cd238&&_0x24264a?_0x4cd238+'\x0a'+_0x24264a:_0x4cd238||_0x24264a||'';if(!_0x4151d6||!_0x2786d6||_0x2786d6['trim']()[_0x5bb8ff(0x368)]===-0xed7*0x1+-0x1b49+0x2a20){await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x3ad)+_0x5bb8ff(0x3e0)+'H:mm>\x20[Nda'+_0x5bb8ff(0x2c6)+_0x5bb8ff(0x3ea)});return;}const _0x6f0c5b=[];for(const _0x384bf4 of _0x521820){const _0x3189e5=await getChatTimezone(_0x384bf4)||DEFAULT_TIMEZONE,_0x5726c6=parseTimeToken(_0x4151d6,_0x3189e5);if(!_0x5726c6){_0x6f0c5b[_0x5bb8ff(0x1cd)]({'chat':_0x384bf4,'ok':![],'reason':_0x5bb8ff(0x359)+'ed'});continue;}if(_0x5726c6['type']===_0x5bb8ff(0x37d)){const _0x991716=_0x5726c6['dt'],_0x4fb79f=Math[_0x5bb8ff(0x29e)](_0x991716[_0x5bb8ff(0x29f)]()/(0x1*0x4ab+-0x1902+0x183f)),_0x2433bd=await addScheduleRow({'chat_jid':_0x384bf4,'message':_0x2786d6,'time':null,'send_at':_0x4fb79f,'frequency':_0x5bb8ff(0x334),'timezone':_0x991716[_0x5bb8ff(0x31b)]||_0x3189e5,'creator_jid':_0x46cdf2});if(_0x2433bd)_0x6f0c5b[_0x5bb8ff(0x1cd)]({'chat':_0x384bf4,'ok':!![],'id':_0x2433bd,'when':_0x991716[_0x5bb8ff(0x2bd)+'ring'](DateTime['DATETIME_M'+'ED'])});else _0x6f0c5b[_0x5bb8ff(0x1cd)]({'chat':_0x384bf4,'ok':![],'reason':_0x5bb8ff(0x3ec)});continue;}if(_0x5726c6[_0x5bb8ff(0x428)]===_0x5bb8ff(0x1f1)){const [_0x253dcf,_0x171015]=_0x5726c6[_0x5bb8ff(0x1f1)]['split'](':')['map'](Number);let _0x44bcdc=DateTime[_0x5bb8ff(0x35d)]()[_0x5bb8ff(0x222)](_0x3189e5),_0x1c8a3f=_0x44bcdc[_0x5bb8ff(0x203)](_0x5bb8ff(0x3d7))['set']({'hour':_0x253dcf,'minute':_0x171015,'second':0x0,'millisecond':0x0});if(_0xa9bcb8&&Number[_0x5bb8ff(0x1d4)](_0xa9bcb8)&&_0xa9bcb8>=0x245f+-0x15d*0x1+-0x3*0xbab)_0x1c8a3f=_0x1c8a3f[_0x5bb8ff(0x31f)]({'days':Number(_0xa9bcb8)});else{if(_0x1c8a3f<=_0x44bcdc)_0x1c8a3f=_0x1c8a3f[_0x5bb8ff(0x31f)]({'days':0x1});}const _0x143d26=Math['floor'](_0x1c8a3f['toMillis']()/(-0xd11+-0xdc3+0x1ebc)),_0x110d45=await addScheduleRow({'chat_jid':_0x384bf4,'message':_0x2786d6,'time':null,'send_at':_0x143d26,'frequency':_0x5bb8ff(0x334),'timezone':_0x3189e5,'creator_jid':_0x46cdf2});if(_0x110d45)_0x6f0c5b[_0x5bb8ff(0x1cd)]({'chat':_0x384bf4,'ok':!![],'id':_0x110d45,'when':_0x1c8a3f[_0x5bb8ff(0x2bd)+_0x5bb8ff(0x2c9)](DateTime[_0x5bb8ff(0x3b5)+'ED'])});else _0x6f0c5b[_0x5bb8ff(0x1cd)]({'chat':_0x384bf4,'ok':![],'reason':_0x5bb8ff(0x3ec)});continue;}_0x6f0c5b[_0x5bb8ff(0x1cd)]({'chat':_0x384bf4,'ok':![],'reason':_0x5bb8ff(0x2c8)+_0x5bb8ff(0x2ad)});}const _0x59d5d5=_0x6f0c5b['filter'](_0x2e6f72=>_0x2e6f72['ok']),_0x41c6f3=_0x6f0c5b[_0x5bb8ff(0x3b6)](_0x243b60=>!_0x243b60['ok']);let _0x4ea835='';if(_0x59d5d5[_0x5bb8ff(0x368)]){_0x4ea835+=_0x5bb8ff(0x2dc)+_0x5bb8ff(0x418)+'r\x20'+_0x59d5d5[_0x5bb8ff(0x368)]+(_0x5bb8ff(0x365)+'onnection('+_0x5bb8ff(0x1e2));for(const _0x5e0e5f of _0x59d5d5)_0x4ea835+='â€¢\x20'+_0x5e0e5f[_0x5bb8ff(0x1b9)]+_0x5bb8ff(0x21b)+_0x5e0e5f['id']+_0x5bb8ff(0x354)+_0x5e0e5f[_0x5bb8ff(0x1a8)]+'\x0a';}if(_0x41c6f3[_0x5bb8ff(0x368)]){_0x4ea835+='Failed\x20for'+'\x20'+_0x41c6f3[_0x5bb8ff(0x368)]+(_0x5bb8ff(0x365)+_0x5bb8ff(0x3fd)+_0x5bb8ff(0x1e2));for(const _0x12d2a4 of _0x41c6f3)_0x4ea835+='â€¢\x20'+_0x12d2a4[_0x5bb8ff(0x1b9)]+_0x5bb8ff(0x3be)+_0x12d2a4['reason']+'\x0a';}await sendWithRetry(_0x55ed9b,{'text':_0x4ea835['trim']()||_0x5bb8ff(0x1bc)+'es\x20created'+'.'});return;}if(_0x239f73===_0x5bb8ff(0x204)){if(!_0x384318[0x8aa+0x11*0xad+0x9*-0x23d]){await sendWithRetry(_0x55ed9b,{'text':'Usage:\x20sch'+_0x5bb8ff(0x3f9)+_0x5bb8ff(0x246)+_0x5bb8ff(0x396)+_0x5bb8ff(0x244)+'s/days/min'+_0x5bb8ff(0x37a)+'sage...>'});return;}const _0x51eeb0=_0x384318[0xc*0x337+0x1c4f*0x1+-0x42e1],_0x9e1bf3=_0x384318[-0x2b6+0x7*0x13d+-0x5f2]&&/^\d+$/[_0x5bb8ff(0x409)](_0x384318[-0x4c*-0x7d+-0x3*-0x30a+0x1*-0x2e37])?Number(_0x384318[0x1a7c+-0x2157+-0x36f*-0x2]):null;let _0x59a745='';const _0x431ec5=new RegExp('\x5cb'+_0x51eeb0[_0x5bb8ff(0x243)](/[.*+?^${}()|[\]\\]/g,'\x5c$&')+'\x5cb'),_0x6000e7=_0x516645[_0x5bb8ff(0x411)](_0x431ec5);if(_0x6000e7){const _0x1bf983=_0x516645['indexOf'](_0x6000e7[-0x1a7+0x7da+-0x633]),_0x3c395d=_0x1bf983+_0x6000e7[0xb*-0xdf+-0x1ee4+0x2879*0x1]['length'];_0x59a745=_0x516645[_0x5bb8ff(0x3bb)](_0x3c395d)[_0x5bb8ff(0x243)](/^\s*/,'');if(_0x59a745&&/^\d+/[_0x5bb8ff(0x409)](_0x59a745))_0x59a745=_0x59a745[_0x5bb8ff(0x243)](/^\d+\s*/,'');}const _0x4f3bd1=_0x59a745&&_0x24264a?_0x59a745+'\x0a'+_0x24264a:_0x59a745||_0x24264a||'';if(!_0x4f3bd1||_0x4f3bd1[_0x5bb8ff(0x318)]()[_0x5bb8ff(0x368)]===0x589*0x6+-0x15d7+-0x47*0x29){await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x2a4)+'vide\x20messa'+_0x5bb8ff(0x208)+'ame\x20line\x20a'+_0x5bb8ff(0x3e5)+'or\x20on\x20foll'+_0x5bb8ff(0x297)+_0x5bb8ff(0x228)});return;}const _0x5c7cd9=[];for(const _0x1370ed of _0x521820){const _0x47d0e7=await getChatTimezone(_0x1370ed)||DEFAULT_TIMEZONE,_0x4b8739=parseTimeToken(_0x51eeb0,_0x47d0e7);if(!_0x4b8739){_0x5c7cd9[_0x5bb8ff(0x1cd)]({'chat':_0x1370ed,'ok':![],'reason':_0x5bb8ff(0x359)+'ed'});continue;}const _0x1d3f18=_0x46cdf2;if(_0x4b8739[_0x5bb8ff(0x428)]===_0x5bb8ff(0x37d)){const _0x23b32a=_0x4b8739['dt'],_0x4c3db1=Math[_0x5bb8ff(0x29e)](_0x23b32a['toMillis']()/(-0x12a*0x10+-0x5*-0x679+-0x3*0x347)),_0x220851=await addScheduleRow({'chat_jid':_0x1370ed,'message':_0x4f3bd1,'time':null,'send_at':_0x4c3db1,'frequency':'once','timezone':_0x23b32a[_0x5bb8ff(0x31b)]||_0x47d0e7,'creator_jid':_0x1d3f18});if(_0x220851)_0x5c7cd9[_0x5bb8ff(0x1cd)]({'chat':_0x1370ed,'ok':!![],'id':_0x220851,'when':_0x23b32a[_0x5bb8ff(0x2bd)+_0x5bb8ff(0x2c9)](DateTime[_0x5bb8ff(0x3b5)+'ED'])});else _0x5c7cd9['push']({'chat':_0x1370ed,'ok':![],'reason':_0x5bb8ff(0x3ec)});continue;}if(_0x4b8739[_0x5bb8ff(0x428)]===_0x5bb8ff(0x1f1)){const _0x273aef=_0x4b8739[_0x5bb8ff(0x1f1)];if(_0x9e1bf3&&Number['isInteger'](_0x9e1bf3)&&_0x9e1bf3>=-0x1107*0x1+0x744*0x2+0x28*0x10){let _0x3bd1c9=DateTime[_0x5bb8ff(0x35d)]()['setZone'](_0x47d0e7);const [_0x5f1ed4,_0x30a369]=_0x273aef[_0x5bb8ff(0x2a1)](':')[_0x5bb8ff(0x346)](Number);let _0x2185f4=_0x3bd1c9[_0x5bb8ff(0x203)](_0x5bb8ff(0x3d7))['set']({'hour':_0x5f1ed4,'minute':_0x30a369,'second':0x0,'millisecond':0x0});_0x2185f4=_0x2185f4[_0x5bb8ff(0x31f)]({'days':Number(_0x9e1bf3)});const _0x124b53=Math['floor'](_0x2185f4['toMillis']()/(0x1950+-0x14*-0x85+-0x1fcc)),_0x37687f=await addScheduleRow({'chat_jid':_0x1370ed,'message':_0x4f3bd1,'time':null,'send_at':_0x124b53,'frequency':_0x5bb8ff(0x334),'timezone':_0x47d0e7,'creator_jid':_0x1d3f18});if(_0x37687f)_0x5c7cd9['push']({'chat':_0x1370ed,'ok':!![],'id':_0x37687f,'when':_0x2185f4[_0x5bb8ff(0x2bd)+_0x5bb8ff(0x2c9)](DateTime[_0x5bb8ff(0x3b5)+'ED'])});else _0x5c7cd9['push']({'chat':_0x1370ed,'ok':![],'reason':_0x5bb8ff(0x3ec)});continue;}const _0x57e1fc=await addScheduleRow({'chat_jid':_0x1370ed,'message':_0x4f3bd1,'time':_0x273aef,'send_at':null,'frequency':_0x5bb8ff(0x44d),'timezone':_0x47d0e7,'creator_jid':_0x1d3f18});if(_0x57e1fc)_0x5c7cd9[_0x5bb8ff(0x1cd)]({'chat':_0x1370ed,'ok':!![],'id':_0x57e1fc,'when':_0x273aef+'\x20('+_0x47d0e7+')'});else _0x5c7cd9[_0x5bb8ff(0x1cd)]({'chat':_0x1370ed,'ok':![],'reason':'db_failed'});continue;}_0x5c7cd9[_0x5bb8ff(0x1cd)]({'chat':_0x1370ed,'ok':![],'reason':_0x5bb8ff(0x2c8)+_0x5bb8ff(0x2ad)});}const _0x26708c=_0x5c7cd9['filter'](_0x18e71f=>_0x18e71f['ok']),_0x29a7c7=_0x5c7cd9[_0x5bb8ff(0x3b6)](_0x1debad=>!_0x1debad['ok']);let _0x318420='';if(_0x26708c[_0x5bb8ff(0x368)]){_0x318420+=_0x5bb8ff(0x2dc)+'for\x20'+_0x26708c[_0x5bb8ff(0x368)]+(_0x5bb8ff(0x365)+_0x5bb8ff(0x3fd)+'s):\x0a');for(const _0x1af9a0 of _0x26708c)_0x318420+='â€¢\x20'+_0x1af9a0[_0x5bb8ff(0x1b9)]+'\x20->\x20id:'+_0x1af9a0['id']+'\x20when:'+_0x1af9a0[_0x5bb8ff(0x1a8)]+'\x0a';}if(_0x29a7c7[_0x5bb8ff(0x368)]){_0x318420+=_0x5bb8ff(0x1ff)+'\x20'+_0x29a7c7[_0x5bb8ff(0x368)]+('\x20default\x20c'+_0x5bb8ff(0x3fd)+_0x5bb8ff(0x1e2));for(const _0x5305e9 of _0x29a7c7)_0x318420+='â€¢\x20'+_0x5305e9[_0x5bb8ff(0x1b9)]+_0x5bb8ff(0x3be)+_0x5305e9[_0x5bb8ff(0x41e)]+'\x0a';}await sendWithRetry(_0x55ed9b,{'text':_0x318420['trim']()||_0x5bb8ff(0x1bc)+_0x5bb8ff(0x23c)+'.'});return;}if(_0x239f73===_0x5bb8ff(0x3ca)){const _0x423b76=await getCombinedSchedulesForChats(_0x521820);if(!_0x423b76['length']){await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x1bc)+'ed\x20message'+'s\x20found\x20fo'+_0x5bb8ff(0x2e8)+':\x20'+_0x521820[_0x5bb8ff(0x2bb)](',\x20')});return;}const _0x3ed3d5=_0x423b76[_0x5bb8ff(0x346)]((_0x1a2384,_0x540a86)=>{const _0x298d2e=_0x5bb8ff,_0x386043=_0x1a2384['send_at']?DateTime[_0x298d2e(0x3a9)](Number(_0x1a2384[_0x298d2e(0x31c)])*(-0x1a64+-0x160*0xd+-0xc0b*-0x4))[_0x298d2e(0x222)](_0x1a2384['timezone']||DEFAULT_TIMEZONE)[_0x298d2e(0x1d3)]({'suppressSeconds':!![]}):_0x1a2384[_0x298d2e(0x435)]?_0x1a2384[_0x298d2e(0x435)]+'\x20('+(_0x1a2384[_0x298d2e(0x22e)]||_0x298d2e(0x2ae)+_0x298d2e(0x389))+')':_0x298d2e(0x360),_0x1c5c5a=(_0x1a2384[_0x298d2e(0x260)]||'')[_0x298d2e(0x2a1)]('\x0a')[_0x298d2e(0x346)](_0x5d1c06=>_0x5d1c06[_0x298d2e(0x3aa)]())[_0x298d2e(0x2bb)]('\x0a');return _0x540a86+(-0xe74+-0x2012+0x2e87*0x1)+_0x298d2e(0x1d2)+_0x1a2384['id']+'\x20chat:'+_0x1a2384[_0x298d2e(0x33b)]+_0x298d2e(0x452)+_0x386043+'\x20freq:'+(_0x1a2384[_0x298d2e(0x28a)]||_0x298d2e(0x44d))+_0x298d2e(0x338)+(_0x1a2384[_0x298d2e(0x426)]?'yes':'no')+_0x298d2e(0x1e9)+_0x1c5c5a;}),_0x1f6960=_0x5bb8ff(0x2dc)+_0x5bb8ff(0x202)+_0x5bb8ff(0x2f3)+_0x521820[_0x5bb8ff(0x2bb)](',\x20')+'):\x0a\x0a'+_0x3ed3d5[_0x5bb8ff(0x2bb)]('\x0a\x0a');await sendWithRetry(_0x55ed9b,{'text':_0x1f6960});return;}if(_0x239f73==='delete'){const _0x59f112=_0x384318[_0x5bb8ff(0x3bb)](-0xeb6+0x1a3d+-0xb85);let _0x24c084=_0x59f112[_0x5bb8ff(0x2bb)]('\x20');if(!_0x24c084&&_0x24264a)_0x24c084=_0x24264a[_0x5bb8ff(0x318)]();if(!_0x24c084){await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x3ad)+_0x5bb8ff(0x2a5)+_0x5bb8ff(0x458)+_0x5bb8ff(0x2f5)+'r,...|all>'});return;}if(/^\s*all\s*$/i[_0x5bb8ff(0x409)](_0x24c084)){let _0x833035=-0x1090+0x1*-0x123c+-0x44*-0x83;for(const _0x31dadc of _0x521820){const _0x5b6dde=await removeAllSchedulesForChat(_0x31dadc);_0x833035+=_0x5b6dde;}await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x314)+_0x833035+(_0x5bb8ff(0x2c5)+'s)\x20across\x20'+_0x5bb8ff(0x413))+_0x521820[_0x5bb8ff(0x2bb)](',\x20')});return;}const _0x3d6023=_0x24c084[_0x5bb8ff(0x2a1)](/[\s,]+/)[_0x5bb8ff(0x346)](_0x18ee98=>_0x18ee98[_0x5bb8ff(0x318)]())[_0x5bb8ff(0x3b6)](Boolean),_0x11bb29=_0x3d6023['map'](_0x436bde=>Number(_0x436bde))[_0x5bb8ff(0x3b6)](_0x4ea49f=>!Number[_0x5bb8ff(0x300)](_0x4ea49f)&&Number[_0x5bb8ff(0x1d4)](_0x4ea49f)&&_0x4ea49f>-0x31d+0x53e+-0x221);if(!_0x11bb29[_0x5bb8ff(0x368)]){await sendWithRetry(_0x55ed9b,{'text':'No\x20valid\x20i'+_0x5bb8ff(0x2ec)+_0x5bb8ff(0x1f3)+_0x5bb8ff(0x3a7)+_0x5bb8ff(0x214)+_0x5bb8ff(0x43b)+_0x5bb8ff(0x206)+',2,3\x20OR\x20sc'+_0x5bb8ff(0x3f2)+_0x5bb8ff(0x3cc)});return;}const _0x2e72bb=[...new Set(_0x11bb29)],_0x157f39=await getCombinedSchedulesForChats(_0x521820),_0x286ef7=[],_0x1ff00d=[];for(const _0x5be273 of _0x2e72bb){if(_0x5be273<-0x9*-0x36f+0x518+-0x23fe||_0x5be273>_0x157f39[_0x5bb8ff(0x368)]){_0x1ff00d[_0x5bb8ff(0x1cd)]({'n':_0x5be273,'reason':_0x5bb8ff(0x422)});continue;}const _0x9b7bf3=_0x157f39[_0x5be273-(-0x1*-0x2702+0xf*0x149+0x2*-0x1d24)]['id'],_0x43596b=await removeScheduleByDBId(_0x9b7bf3);if(_0x43596b)_0x286ef7['push']({'n':_0x5be273,'id':_0x9b7bf3});else _0x1ff00d[_0x5bb8ff(0x1cd)]({'n':_0x5be273,'reason':_0x5bb8ff(0x1b2)+_0x5bb8ff(0x3a0)});}let _0x353f31='';if(_0x286ef7['length'])_0x353f31+=_0x5bb8ff(0x314)+_0x286ef7[_0x5bb8ff(0x368)]+('\x20schedule('+'s):\x20')+_0x286ef7[_0x5bb8ff(0x346)](_0x5b0737=>_0x5b0737['n']+_0x5bb8ff(0x38e)+_0x5b0737['id']+')')['join'](',\x20')+'.\x0a';if(_0x1ff00d[_0x5bb8ff(0x368)])_0x353f31+=_0x5bb8ff(0x430)+_0x5bb8ff(0x358)+_0x1ff00d[_0x5bb8ff(0x346)](_0x22c163=>_0x22c163['n']+'('+_0x22c163['reason']+')')[_0x5bb8ff(0x2bb)](',\x20')+'.';await sendWithRetry(_0x55ed9b,{'text':_0x353f31['trim']()||_0x5bb8ff(0x2a0)+_0x5bb8ff(0x469)});return;}if(_0x239f73===_0x5bb8ff(0x3fb)){const _0x58a155=Number(_0x384318[-0x1b1*-0x4+0x4*-0x8a5+-0x946*-0x3]),_0x481299=_0x384318[-0x1*0xeb4+0xc*0x43+-0x1*-0xb93]||(_0x24264a?_0x24264a[_0x5bb8ff(0x2a1)](/\r?\n/)[0x1fbc+-0x1951+-0x66b][_0x5bb8ff(0x318)]():null);if(!_0x58a155||!_0x481299){await sendWithRetry(_0x55ed9b,{'text':'Usage:\x20sch'+'ed\x20edit\x20<n'+_0x5bb8ff(0x372)+_0x5bb8ff(0x293)+_0x5bb8ff(0x3bc)+'MM-DDTHH:m'+'m>'});return;}const _0xd0b8a8=await getCombinedSchedulesForChats(_0x521820);if(!_0xd0b8a8||_0xd0b8a8['length']<_0x58a155){await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x1bc)+_0x5bb8ff(0x394)+_0x58a155+(_0x5bb8ff(0x35a)+_0x5bb8ff(0x1fc)+_0x5bb8ff(0x1e4))});return;}const _0x1b8df1=_0xd0b8a8[_0x58a155-(-0x47*-0x6+-0x1*-0xde3+-0xf8c)]['id'];if(!_0x1b8df1){await sendWithRetry(_0x55ed9b,{'text':'No\x20schedul'+_0x5bb8ff(0x394)+_0x58a155+(_0x5bb8ff(0x35a)+_0x5bb8ff(0x1fc)+_0x5bb8ff(0x1e4))});return;}const _0x2c129c=parseTimeToken(_0x481299,DEFAULT_TIMEZONE);if(!_0x2c129c){await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x430)+_0x5bb8ff(0x1a5)+_0x5bb8ff(0x2c3)});return;}if(_0x2c129c[_0x5bb8ff(0x428)]==='datetime'){const _0x2ef1e7=_0x2c129c['dt'],_0x18cff0=Math[_0x5bb8ff(0x29e)](_0x2ef1e7[_0x5bb8ff(0x29f)]()/(-0x1b3f+0x158f+0x998)),_0x545489=await updateScheduleFields(_0x1b8df1,{'send_at':_0x18cff0,'time':null,'frequency':_0x5bb8ff(0x334),'timezone':_0x2ef1e7['zoneName']||DEFAULT_TIMEZONE});if(_0x545489)await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x3a8)+_0x58a155+(_0x5bb8ff(0x39b)+_0x5bb8ff(0x34c)+'at\x20')+_0x2ef1e7[_0x5bb8ff(0x2bd)+_0x5bb8ff(0x2c9)](DateTime[_0x5bb8ff(0x3b5)+'ED'])+'\x20('+_0x2ef1e7[_0x5bb8ff(0x31b)]+')'});else await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x430)+_0x5bb8ff(0x34a)+'edule.'});return;}else{if(_0x2c129c[_0x5bb8ff(0x428)]==='hhmm'){const _0x418cd8=_0x2c129c[_0x5bb8ff(0x1f1)],_0x49fadc=_0xd0b8a8[_0x58a155-(0x9d6+-0x3c*0x88+0x160b)],_0x2bb97e=_0x49fadc[_0x5bb8ff(0x22e)]||await getChatTimezone(_0x49fadc[_0x5bb8ff(0x33b)])||DEFAULT_TIMEZONE,_0x4e1bf3=await updateScheduleFields(_0x1b8df1,{'time':_0x418cd8,'send_at':null,'frequency':'daily','timezone':_0x2bb97e});if(_0x4e1bf3)await sendWithRetry(_0x55ed9b,{'text':'Schedule\x20#'+_0x58a155+(_0x5bb8ff(0x39b)+_0x5bb8ff(0x26e)+_0x5bb8ff(0x28f))+_0x418cd8+'\x20('+_0x2bb97e+')'});else await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x430)+_0x5bb8ff(0x34a)+_0x5bb8ff(0x284)});return;}else{await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x31d)+_0x5bb8ff(0x2f8)+_0x5bb8ff(0x1aa)+_0x5bb8ff(0x2ea)});return;}}}if(_0x239f73==='frequency'){const _0x3cd002=Number(_0x384318[0x1a11*-0x1+0x15d0+0x1*0x443]),_0x2c2be3=Number(_0x384318[0x1a0e+0x1beb+-0x35f6]);if(!_0x3cd002||!_0x2c2be3||_0x2c2be3<0x3*0x241+-0x1*0x1f52+0x1890){await sendWithRetry(_0x55ed9b,{'text':'Usage:\x20sch'+_0x5bb8ff(0x35c)+_0x5bb8ff(0x467)+_0x5bb8ff(0x1cc)+'1\x20daily,\x20n'+'=2\x20every\x202'+_0x5bb8ff(0x26b)+'.)'});return;}const _0x524a14=await getCombinedSchedulesForChats(_0x521820);if(!_0x524a14||_0x524a14[_0x5bb8ff(0x368)]<_0x3cd002){await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x1bc)+_0x5bb8ff(0x394)+_0x3cd002+(_0x5bb8ff(0x35a)+_0x5bb8ff(0x1fc)+_0x5bb8ff(0x1e4))});return;}const _0xb059c3=_0x524a14[_0x3cd002-(0x13*-0x1b+0x239+0xb*-0x5)]['id'];if(!_0xb059c3){await sendWithRetry(_0x55ed9b,{'text':'No\x20schedul'+_0x5bb8ff(0x394)+_0x3cd002+(_0x5bb8ff(0x35a)+_0x5bb8ff(0x1fc)+_0x5bb8ff(0x1e4))});return;}let _0x2e04e4='daily';if(_0x2c2be3===0x1b*0x5f+-0x278*-0xd+-0x2a1c)_0x2e04e4=_0x5bb8ff(0x44d);else _0x2e04e4='every_n_da'+'ys:'+_0x2c2be3;const _0x3edc12=await updateScheduleFields(_0xb059c3,{'frequency':_0x2e04e4});if(_0x3edc12)await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x3a8)+_0x3cd002+(_0x5bb8ff(0x45c)+'\x20set\x20to\x20')+_0x2e04e4});else await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x430)+_0x5bb8ff(0x19f)+_0x5bb8ff(0x3f6)});return;}if(_0x239f73===_0x5bb8ff(0x37f)||_0x239f73===_0x5bb8ff(0x283)){const _0x30ef21=Number(_0x384318[-0xf4b*-0x1+0x2023+-0x5*0x97c]);if(!_0x30ef21){await sendWithRetry(_0x55ed9b,{'text':'Usage:\x20sch'+_0x5bb8ff(0x21d)+_0x239f73+_0x5bb8ff(0x303)});return;}const _0x3bfb7d=await getCombinedSchedulesForChats(_0x521820);if(!_0x3bfb7d||_0x3bfb7d[_0x5bb8ff(0x368)]<_0x30ef21){await sendWithRetry(_0x55ed9b,{'text':'No\x20schedul'+_0x5bb8ff(0x394)+_0x30ef21+('\x20found\x20acr'+_0x5bb8ff(0x1fc)+_0x5bb8ff(0x1e4))});return;}const _0x5c6d19=_0x3bfb7d[_0x30ef21-(-0x517+-0x1*0x2f0+0x202*0x4)]['id'];if(!_0x5c6d19){await sendWithRetry(_0x55ed9b,{'text':'No\x20schedul'+_0x5bb8ff(0x394)+_0x30ef21+(_0x5bb8ff(0x35a)+_0x5bb8ff(0x1fc)+'efaults.')});return;}const _0x3c8fb2=await updateScheduleFields(_0x5c6d19,{'enabled':_0x239f73===_0x5bb8ff(0x283)?-0x171*0xd+-0x23f*0xb+0x2b73:-0x210b+-0x1e49*0x1+0x3f54});if(_0x3c8fb2)await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x3a8)+_0x30ef21+'\x20'+_0x239f73+'d.'});else await sendWithRetry(_0x55ed9b,{'text':_0x5bb8ff(0x430)+'update\x20ena'+_0x5bb8ff(0x251)+'.'});return;}await sendWithRetry(_0x55ed9b,{'text':USAGE});}catch(_0x45fff5){warn(_0x5bb8ff(0x229)+_0x5bb8ff(0x387)+'ommandGrou'+_0x5bb8ff(0x454)+(_0x45fff5?.[_0x5bb8ff(0x260)]||_0x45fff5));}}async function handleSchedCommandPM(_0x48a0fb,{sub:_0x1433f8,firstLine:_0x10174c,restText:_0x1aa52a,firstTokens:_0x5ed444,targetChatJids:_0x111229,confirmationTarget:_0x369bec,senderJid:_0x277189,cleanedBody:_0x55efec}){const _0x332461=_0x4a2726;try{if(!_0x1433f8||_0x1433f8===_0x332461(0x3e3)){await sendWithRetry(_0x369bec,{'text':USAGE});return;}if(_0x1433f8===_0x332461(0x334)){const _0x42ff13=_0x5ed444[-0xccb+-0xa29*-0x1+0x2a4],_0xcee761=_0x5ed444[-0x64c+0x26ee+-0x209f]&&/^\d+$/[_0x332461(0x409)](_0x5ed444[0xb0e+0x228c*-0x1+0x1781])?Number(_0x5ed444[-0xcc9+-0x8cf+0x159b]):null;let _0x927028=(_0x55efec||'')[_0x332461(0x318)]();!_0x927028&&_0x42ff13&&(_0x927028=extractInlineAfterToken(_0x10174c,_0x42ff13));if(!_0x42ff13||!_0x927028||_0x927028[_0x332461(0x318)]()[_0x332461(0x368)]===-0x19c*0xc+-0xf6b*0x2+0x3226){await sendWithRetry(_0x369bec,{'text':_0x332461(0x3ad)+_0x332461(0x3e0)+_0x332461(0x348)+_0x332461(0x2c6)+_0x332461(0x2b5)+_0x332461(0x1da)+':<alias|ji'+'d|all>)'});return;}const _0x60eb56=[];for(const _0x35cb80 of _0x111229){const _0x293cd5=await getChatTimezone(_0x35cb80)||DEFAULT_TIMEZONE,_0x13a42a=parseTimeToken(_0x42ff13,_0x293cd5);if(!_0x13a42a){_0x60eb56[_0x332461(0x1cd)]({'chat':_0x35cb80,'ok':![],'reason':_0x332461(0x359)+'ed'});continue;}if(_0x13a42a[_0x332461(0x428)]===_0x332461(0x37d)){const _0x910ce3=_0x13a42a['dt'],_0x4c24d0=Math[_0x332461(0x29e)](_0x910ce3['toMillis']()/(-0x1*0x2161+-0x220b+0x4754)),_0x28034a=await addScheduleRow({'chat_jid':_0x35cb80,'message':_0x927028,'time':null,'send_at':_0x4c24d0,'frequency':_0x332461(0x334),'timezone':_0x910ce3[_0x332461(0x31b)]||_0x293cd5,'creator_jid':_0x277189});if(_0x28034a)_0x60eb56[_0x332461(0x1cd)]({'chat':_0x35cb80,'ok':!![],'id':_0x28034a,'when':_0x910ce3['toLocaleSt'+_0x332461(0x2c9)](DateTime[_0x332461(0x3b5)+'ED'])});else _0x60eb56[_0x332461(0x1cd)]({'chat':_0x35cb80,'ok':![],'reason':_0x332461(0x3ec)});continue;}if(_0x13a42a['type']===_0x332461(0x1f1)){const [_0x234b79,_0x1565b9]=_0x13a42a[_0x332461(0x1f1)]['split'](':')[_0x332461(0x346)](Number);let _0x3e8c2e=DateTime['now']()['setZone'](_0x293cd5),_0x37f6dc=_0x3e8c2e[_0x332461(0x203)](_0x332461(0x3d7))[_0x332461(0x39a)]({'hour':_0x234b79,'minute':_0x1565b9,'second':0x0,'millisecond':0x0});if(_0xcee761&&Number[_0x332461(0x1d4)](_0xcee761)&&_0xcee761>=-0x18da+0x9b2*-0x1+0x228d)_0x37f6dc=_0x37f6dc[_0x332461(0x31f)]({'days':Number(_0xcee761)});else{if(_0x37f6dc<=_0x3e8c2e)_0x37f6dc=_0x37f6dc['plus']({'days':0x1});}const _0x10e176=Math[_0x332461(0x29e)](_0x37f6dc[_0x332461(0x29f)]()/(-0x5c5+0x6f4+0x2b9)),_0x151124=await addScheduleRow({'chat_jid':_0x35cb80,'message':_0x927028,'time':null,'send_at':_0x10e176,'frequency':_0x332461(0x334),'timezone':_0x293cd5,'creator_jid':_0x277189});if(_0x151124)_0x60eb56[_0x332461(0x1cd)]({'chat':_0x35cb80,'ok':!![],'id':_0x151124,'when':_0x37f6dc[_0x332461(0x2bd)+_0x332461(0x2c9)](DateTime[_0x332461(0x3b5)+'ED'])});else _0x60eb56[_0x332461(0x1cd)]({'chat':_0x35cb80,'ok':![],'reason':'db_failed'});continue;}_0x60eb56[_0x332461(0x1cd)]({'chat':_0x35cb80,'ok':![],'reason':_0x332461(0x2c8)+'d_time'});}const _0x37045a=_0x60eb56[_0x332461(0x3b6)](_0x1e585a=>_0x1e585a['ok']),_0x5162c9=_0x60eb56[_0x332461(0x3b6)](_0x32482e=>!_0x32482e['ok']);let _0x2a2634='';if(_0x37045a['length']){_0x2a2634+=_0x332461(0x2dc)+_0x332461(0x418)+'r\x20'+_0x37045a['length']+('\x20target(s)'+':\x0a');for(const _0x3a6b17 of _0x37045a)_0x2a2634+='â€¢\x20'+_0x3a6b17[_0x332461(0x1b9)]+'\x20->\x20id:'+_0x3a6b17['id']+_0x332461(0x354)+_0x3a6b17[_0x332461(0x1a8)]+'\x0a';}if(_0x5162c9['length']){_0x2a2634+=_0x332461(0x1ff)+'\x20'+_0x5162c9['length']+(_0x332461(0x41f)+':\x0a');for(const _0x5ca1ee of _0x5162c9)_0x2a2634+='â€¢\x20'+_0x5ca1ee[_0x332461(0x1b9)]+_0x332461(0x3be)+_0x5ca1ee['reason']+'\x0a';}await sendWithRetry(_0x369bec,{'text':_0x2a2634[_0x332461(0x318)]()||_0x332461(0x1bc)+_0x332461(0x23c)+'.'});return;}if(_0x1433f8==='add'){if(!_0x5ed444[-0x22e9*-0x1+0x1e3d*0x1+0x2c*-0x17b]){await sendWithRetry(_0x369bec,{'text':'Usage:\x20sch'+_0x332461(0x3f9)+_0x332461(0x246)+_0x332461(0x396)+_0x332461(0x244)+_0x332461(0x44c)+_0x332461(0x37a)+_0x332461(0x1c0)+_0x332461(0x2bf)+_0x332461(0x410)});return;}const _0x2559d6=_0x5ed444[0x1f69+0x1ed9+-0x3e40],_0x24b8fb=_0x5ed444[0x12e*0x7+-0x291+-0x5ae]&&/^\d+$/[_0x332461(0x409)](_0x5ed444[-0xb3a+0x1d9f+-0x931*0x2])?Number(_0x5ed444[0x1f*-0x64+0x11ff+-0x5e0]):null;let _0x505a96=(_0x55efec||'')['trim']();!_0x505a96&&(_0x505a96=extractInlineAfterToken(_0x10174c,_0x2559d6));if(!_0x505a96||_0x505a96['trim']()[_0x332461(0x368)]===0x25e3+-0x31d*-0x3+-0x2f3a){await sendWithRetry(_0x369bec,{'text':_0x332461(0x2a4)+_0x332461(0x45d)+_0x332461(0x208)+_0x332461(0x27a)+'fter\x20time\x20'+_0x332461(0x355)+_0x332461(0x297)+_0x332461(0x268)+'ias|jid|al'+'l>'});return;}const _0xe0d723=[];for(const _0x39c085 of _0x111229){const _0x2c81a6=await getChatTimezone(_0x39c085)||DEFAULT_TIMEZONE,_0x484f7c=parseTimeToken(_0x2559d6,_0x2c81a6);if(!_0x484f7c){_0xe0d723[_0x332461(0x1cd)]({'chat':_0x39c085,'ok':![],'reason':_0x332461(0x359)+'ed'});continue;}const _0x1e4c5e=_0x277189;if(_0x484f7c[_0x332461(0x428)]===_0x332461(0x37d)){const _0x519b2d=_0x484f7c['dt'],_0x52f7cd=Math[_0x332461(0x29e)](_0x519b2d[_0x332461(0x29f)]()/(0xf76+0x1a5*-0x17+0x1a45)),_0x1bfc02=await addScheduleRow({'chat_jid':_0x39c085,'message':_0x505a96,'time':null,'send_at':_0x52f7cd,'frequency':_0x332461(0x334),'timezone':_0x519b2d[_0x332461(0x31b)]||_0x2c81a6,'creator_jid':_0x1e4c5e});if(_0x1bfc02)_0xe0d723[_0x332461(0x1cd)]({'chat':_0x39c085,'ok':!![],'id':_0x1bfc02,'when':_0x519b2d[_0x332461(0x2bd)+_0x332461(0x2c9)](DateTime['DATETIME_M'+'ED'])});else _0xe0d723[_0x332461(0x1cd)]({'chat':_0x39c085,'ok':![],'reason':_0x332461(0x3ec)});continue;}if(_0x484f7c[_0x332461(0x428)]===_0x332461(0x1f1)){const _0x3fa419=_0x484f7c[_0x332461(0x1f1)];if(_0x24b8fb&&Number['isInteger'](_0x24b8fb)&&_0x24b8fb>=0x2*0x86f+-0x1*0xe9e+-0x23f){let _0x2ada58=DateTime['now']()[_0x332461(0x222)](_0x2c81a6);const [_0x419075,_0x370d94]=_0x3fa419[_0x332461(0x2a1)](':')['map'](Number);let _0x3532bf=_0x2ada58[_0x332461(0x203)]('day')[_0x332461(0x39a)]({'hour':_0x419075,'minute':_0x370d94,'second':0x0,'millisecond':0x0});_0x3532bf=_0x3532bf[_0x332461(0x31f)]({'days':Number(_0x24b8fb)});const _0x29c6ab=Math[_0x332461(0x29e)](_0x3532bf[_0x332461(0x29f)]()/(-0x1151+0x2178+-0xc3f)),_0x5a21b4=await addScheduleRow({'chat_jid':_0x39c085,'message':_0x505a96,'time':null,'send_at':_0x29c6ab,'frequency':_0x332461(0x334),'timezone':_0x2c81a6,'creator_jid':_0x1e4c5e});if(_0x5a21b4)_0xe0d723[_0x332461(0x1cd)]({'chat':_0x39c085,'ok':!![],'id':_0x5a21b4,'when':_0x3532bf[_0x332461(0x2bd)+_0x332461(0x2c9)](DateTime[_0x332461(0x3b5)+'ED'])});else _0xe0d723[_0x332461(0x1cd)]({'chat':_0x39c085,'ok':![],'reason':_0x332461(0x3ec)});continue;}const _0x55ff35=await addScheduleRow({'chat_jid':_0x39c085,'message':_0x505a96,'time':_0x3fa419,'send_at':null,'frequency':_0x332461(0x44d),'timezone':_0x2c81a6,'creator_jid':_0x1e4c5e});if(_0x55ff35)_0xe0d723[_0x332461(0x1cd)]({'chat':_0x39c085,'ok':!![],'id':_0x55ff35,'when':_0x3fa419+'\x20('+_0x2c81a6+')'});else _0xe0d723[_0x332461(0x1cd)]({'chat':_0x39c085,'ok':![],'reason':'db_failed'});continue;}_0xe0d723['push']({'chat':_0x39c085,'ok':![],'reason':_0x332461(0x2c8)+_0x332461(0x2ad)});}const _0x142f73=_0xe0d723['filter'](_0x4d0a61=>_0x4d0a61['ok']),_0x3446aa=_0xe0d723[_0x332461(0x3b6)](_0x41afc8=>!_0x41afc8['ok']);let _0x3a1c5d='';if(_0x142f73[_0x332461(0x368)]){_0x3a1c5d+=_0x332461(0x2dc)+_0x332461(0x3f7)+_0x142f73[_0x332461(0x368)]+(_0x332461(0x41f)+':\x0a');for(const _0x27cdc5 of _0x142f73)_0x3a1c5d+='â€¢\x20'+_0x27cdc5['chat']+_0x332461(0x21b)+_0x27cdc5['id']+'\x20when:'+_0x27cdc5[_0x332461(0x1a8)]+'\x0a';}if(_0x3446aa[_0x332461(0x368)]){_0x3a1c5d+=_0x332461(0x1ff)+'\x20'+_0x3446aa[_0x332461(0x368)]+('\x20target(s)'+':\x0a');for(const _0x506d12 of _0x3446aa)_0x3a1c5d+='â€¢\x20'+_0x506d12['chat']+_0x332461(0x3be)+_0x506d12[_0x332461(0x41e)]+'\x0a';}await sendWithRetry(_0x369bec,{'text':_0x3a1c5d[_0x332461(0x318)]()||_0x332461(0x1bc)+_0x332461(0x23c)+'.'});return;}if(_0x1433f8===_0x332461(0x3ca)){const _0x1637f2=[];for(const _0x5b55a5 of _0x111229){const _0x76fac2=await listSchedulesForChat(_0x5b55a5);for(const _0x5c643e of _0x76fac2)_0x1637f2[_0x332461(0x1cd)]({'chatJid':_0x5b55a5,..._0x5c643e});}if(!_0x1637f2[_0x332461(0x368)]){await sendWithRetry(_0x369bec,{'text':_0x332461(0x249)+_0x332461(0x431)+_0x332461(0x31e)+_0x332461(0x28b)+_0x332461(0x1d8)+_0x332461(0x419)});return;}let _0x3317a8='';for(const _0x31c359 of _0x1637f2){const _0x1d6742=_0x31c359[_0x332461(0x31c)]?DateTime['fromMillis'](Number(_0x31c359['send_at'])*(0x10dc*-0x2+0x7e8+0x1db8))[_0x332461(0x222)](_0x31c359[_0x332461(0x22e)]||DEFAULT_TIMEZONE)[_0x332461(0x1d3)]({'suppressSeconds':!![]}):_0x31c359[_0x332461(0x435)]?_0x31c359['time']+'\x20('+(_0x31c359[_0x332461(0x22e)]||_0x332461(0x2ae)+_0x332461(0x389))+')':_0x332461(0x360),_0x2f659d=(_0x31c359[_0x332461(0x260)]||'')[_0x332461(0x2a1)]('\x0a')[_0x332461(0x346)](_0x196e3b=>_0x196e3b[_0x332461(0x3aa)]())['join']('\x0a'),_0x5c62a0=_0x31c359[_0x332461(0x3f5)]+':'+_0x31c359['id']+_0x332461(0x452)+_0x1d6742+_0x332461(0x1e1)+(_0x31c359['frequency']||_0x332461(0x44d))+'\x20enabled:'+(_0x31c359[_0x332461(0x426)]?_0x332461(0x468):'no')+_0x332461(0x1e9)+_0x2f659d+'\x0a\x0a';(_0x3317a8+_0x5c62a0)[_0x332461(0x368)]>0x46+0x190a+-0x1374&&(await sendWithRetry(_0x369bec,{'text':_0x3317a8[_0x332461(0x318)]()}),_0x3317a8=''),_0x3317a8+=_0x5c62a0;}if(_0x3317a8[_0x332461(0x318)]())await sendWithRetry(_0x369bec,{'text':_0x3317a8[_0x332461(0x318)]()});return;}if(_0x1433f8==='delete'){const _0x5b0fbd=_0x5ed444['slice'](-0x6d4+0xce+-0x8*-0xc1);let _0x52d5b8=_0x5b0fbd[_0x332461(0x2bb)]('\x20');if(!_0x52d5b8&&_0x1aa52a)_0x52d5b8=_0x1aa52a['trim']();if(!_0x52d5b8){await sendWithRetry(_0x369bec,{'text':_0x332461(0x3ad)+_0x332461(0x2a5)+'<number|nu'+_0x332461(0x2f5)+_0x332461(0x3e9)+_0x332461(0x308)+'|jid|all>'});return;}if(/^\s*all\s*$/i[_0x332461(0x409)](_0x52d5b8)){let _0x2b3b06=0x131c+-0x10bb+-0x261;for(const _0x5ab1e2 of _0x111229){const _0x1ec633=await removeAllSchedulesForChat(_0x5ab1e2);_0x2b3b06+=_0x1ec633;}await sendWithRetry(_0x369bec,{'text':_0x332461(0x314)+_0x2b3b06+('\x20schedule('+_0x332461(0x219)+_0x332461(0x1d8)+_0x332461(0x419))});return;}const _0x31f890=_0x52d5b8[_0x332461(0x2a1)](/[\s,]+/)[_0x332461(0x346)](_0x3a8ce7=>_0x3a8ce7[_0x332461(0x318)]())[_0x332461(0x3b6)](Boolean),_0x264aa5=_0x31f890[_0x332461(0x346)](_0x4f4fd2=>Number(_0x4f4fd2))[_0x332461(0x3b6)](_0x2f8892=>!Number[_0x332461(0x300)](_0x2f8892)&&Number[_0x332461(0x1d4)](_0x2f8892)&&_0x2f8892>0x3*-0x5d5+0x1b10+-0x991*0x1);if(!_0x264aa5[_0x332461(0x368)]){await sendWithRetry(_0x369bec,{'text':_0x332461(0x280)+_0x332461(0x2ec)+'vided.\x20Usa'+'ge:\x20sched\x20'+_0x332461(0x214)+'\x203\x20OR\x20sche'+'d\x20delete\x201'+_0x332461(0x2be)+_0x332461(0x3f2)+_0x332461(0x269)+_0x332461(0x40d)+_0x332461(0x1c2)});return;}const _0x4ccb68=[...new Set(_0x264aa5)],_0x3c3ac7=await getCombinedSchedulesForChats(_0x111229),_0x321477=[],_0x1a19cd=[];for(const _0x45d528 of _0x4ccb68){if(_0x45d528<-0x44b*0x7+0x24f1+-0x2b*0x29||_0x45d528>_0x3c3ac7[_0x332461(0x368)]){_0x1a19cd[_0x332461(0x1cd)]({'n':_0x45d528,'reason':_0x332461(0x422)});continue;}const _0x48f4d7=_0x3c3ac7[_0x45d528-(-0xcd6*0x1+-0x182*-0x1+0xb55)]['id'],_0x33cd85=await removeScheduleByDBId(_0x48f4d7);if(_0x33cd85)_0x321477[_0x332461(0x1cd)]({'n':_0x45d528,'id':_0x48f4d7});else _0x1a19cd[_0x332461(0x1cd)]({'n':_0x45d528,'reason':_0x332461(0x1b2)+'failed'});}let _0xb24fe2='';if(_0x321477['length'])_0xb24fe2+=_0x332461(0x314)+_0x321477[_0x332461(0x368)]+(_0x332461(0x2c5)+'s):\x20')+_0x321477[_0x332461(0x346)](_0x265f7c=>_0x265f7c['n']+_0x332461(0x38e)+_0x265f7c['id']+')')[_0x332461(0x2bb)](',\x20')+'.\x0a';if(_0x1a19cd[_0x332461(0x368)])_0xb24fe2+='Failed\x20to\x20'+_0x332461(0x358)+_0x1a19cd[_0x332461(0x346)](_0x1a7e25=>_0x1a7e25['n']+'('+_0x1a7e25[_0x332461(0x41e)]+')')[_0x332461(0x2bb)](',\x20')+'.';await sendWithRetry(_0x369bec,{'text':_0xb24fe2['trim']()||_0x332461(0x2a0)+'\x20made.'});return;}if(_0x1433f8===_0x332461(0x3fb)){const _0x43a9f0=Number(_0x5ed444[0x14*-0x121+0x10e7*0x1+0x5af]),_0x46a517=_0x5ed444[-0x10c1+-0x533*-0x3+-0x12b*-0x1]||(_0x1aa52a?_0x1aa52a[_0x332461(0x2a1)](/\r?\n/)[0x1258+-0x1878+0x620][_0x332461(0x318)]():null);if(!_0x43a9f0||!_0x46a517){await sendWithRetry(_0x369bec,{'text':_0x332461(0x3ad)+'ed\x20edit\x20<n'+'umber>\x20<HH'+_0x332461(0x293)+_0x332461(0x3bc)+_0x332461(0x3e1)+'m>\x20gp:<ali'+_0x332461(0x3e6)+'>'});return;}const _0x510052=await getCombinedSchedulesForChats(_0x111229);if(!_0x510052||_0x510052[_0x332461(0x368)]<_0x43a9f0){await sendWithRetry(_0x369bec,{'text':'No\x20schedul'+'e\x20#'+_0x43a9f0+(_0x332461(0x35a)+'oss\x20reques'+'ted\x20target'+'s.')});return;}const _0x52d4e9=_0x510052[_0x43a9f0-(-0x4*-0x40+0xa14+-0xb13)]['id'];if(!_0x52d4e9){await sendWithRetry(_0x369bec,{'text':_0x332461(0x1bc)+_0x332461(0x394)+_0x43a9f0+(_0x332461(0x35a)+_0x332461(0x38d)+_0x332461(0x408)+'s.')});return;}const _0x6f48fc=parseTimeToken(_0x46a517,DEFAULT_TIMEZONE);if(!_0x6f48fc){await sendWithRetry(_0x369bec,{'text':'Failed\x20to\x20'+_0x332461(0x1a5)+_0x332461(0x2c3)});return;}if(_0x6f48fc[_0x332461(0x428)]===_0x332461(0x37d)){const _0x28a6a7=_0x6f48fc['dt'],_0x155002=Math['floor'](_0x28a6a7[_0x332461(0x29f)]()/(0x354+0x402*0x9+-0x237e)),_0x57b3a4=await updateScheduleFields(_0x52d4e9,{'send_at':_0x155002,'time':null,'frequency':_0x332461(0x334),'timezone':_0x28a6a7[_0x332461(0x31b)]||DEFAULT_TIMEZONE});if(_0x57b3a4)await sendWithRetry(_0x369bec,{'text':'Schedule\x20#'+_0x43a9f0+('\x20updated\x20t'+'o\x20one-off\x20'+_0x332461(0x366))+_0x28a6a7['toLocaleSt'+_0x332461(0x2c9)](DateTime[_0x332461(0x3b5)+'ED'])+'\x20('+_0x28a6a7[_0x332461(0x31b)]+')'});else await sendWithRetry(_0x369bec,{'text':'Failed\x20to\x20'+_0x332461(0x34a)+_0x332461(0x284)});return;}else{if(_0x6f48fc[_0x332461(0x428)]===_0x332461(0x1f1)){const _0x2a17d7=_0x6f48fc[_0x332461(0x1f1)],_0x5b1cf7=_0x510052[_0x43a9f0-(-0x2*-0xe02+-0x183d+-0x3c6)],_0x54cd7c=_0x5b1cf7[_0x332461(0x22e)]||await getChatTimezone(_0x5b1cf7[_0x332461(0x33b)])||DEFAULT_TIMEZONE,_0x3b8657=await updateScheduleFields(_0x52d4e9,{'time':_0x2a17d7,'send_at':null,'frequency':_0x332461(0x44d),'timezone':_0x54cd7c});if(_0x3b8657)await sendWithRetry(_0x369bec,{'text':_0x332461(0x3a8)+_0x43a9f0+('\x20updated\x20t'+'o\x20recurrin'+_0x332461(0x28f))+_0x2a17d7+'\x20('+_0x54cd7c+')'});else await sendWithRetry(_0x369bec,{'text':_0x332461(0x430)+_0x332461(0x34a)+_0x332461(0x284)});return;}else{await sendWithRetry(_0x369bec,{'text':_0x332461(0x31d)+_0x332461(0x2f8)+_0x332461(0x1aa)+'it.'});return;}}}if(_0x1433f8===_0x332461(0x28a)){const _0x57cae8=Number(_0x5ed444[0x1d81*0x1+0xcb1+-0x2a30]),_0x5493f1=Number(_0x5ed444[0x1dbd*-0x1+0x18bb+0x505]);if(!_0x57cae8||!_0x5493f1||_0x5493f1<-0x30*-0xbc+-0x1b0a+-0x835){await sendWithRetry(_0x369bec,{'text':_0x332461(0x3ad)+'ed\x20frequen'+_0x332461(0x467)+_0x332461(0x1cc)+_0x332461(0x3a6)+_0x332461(0x1dd)+_0x332461(0x26b)+_0x332461(0x23e)+_0x332461(0x3e6)+'>'});return;}const _0x1bc98b=await getCombinedSchedulesForChats(_0x111229);if(!_0x1bc98b||_0x1bc98b[_0x332461(0x368)]<_0x57cae8){await sendWithRetry(_0x369bec,{'text':_0x332461(0x1bc)+_0x332461(0x394)+_0x57cae8+('\x20found\x20acr'+'oss\x20reques'+_0x332461(0x408)+'s.')});return;}const _0x283038=_0x1bc98b[_0x57cae8-(-0x3*-0x8e9+-0x894+-0x1226)]['id'];if(!_0x283038){await sendWithRetry(_0x369bec,{'text':_0x332461(0x1bc)+'e\x20#'+_0x57cae8+(_0x332461(0x35a)+_0x332461(0x38d)+'ted\x20target'+'s.')});return;}let _0x200dd5=_0x332461(0x44d);if(_0x5493f1===0x2285+-0xe*0x16a+-0xeb8)_0x200dd5=_0x332461(0x44d);else _0x200dd5=_0x332461(0x40e)+_0x332461(0x1af)+_0x5493f1;const _0xa1d4b6=await updateScheduleFields(_0x283038,{'frequency':_0x200dd5});if(_0xa1d4b6)await sendWithRetry(_0x369bec,{'text':_0x332461(0x3a8)+_0x57cae8+('\x20frequency'+_0x332461(0x414))+_0x200dd5});else await sendWithRetry(_0x369bec,{'text':_0x332461(0x430)+_0x332461(0x19f)+_0x332461(0x3f6)});return;}if(_0x1433f8===_0x332461(0x37f)||_0x1433f8==='enable'){const _0x4e17b9=Number(_0x5ed444[-0x6a6+-0x235*0x2+0xd*0xda]);if(!_0x4e17b9){await sendWithRetry(_0x369bec,{'text':_0x332461(0x3ad)+_0x332461(0x21d)+_0x1433f8+(_0x332461(0x267)+'gp:<alias|'+'jid|all>')});return;}const _0x33e46c=await getCombinedSchedulesForChats(_0x111229);if(!_0x33e46c||_0x33e46c['length']<_0x4e17b9){await sendWithRetry(_0x369bec,{'text':_0x332461(0x1bc)+_0x332461(0x394)+_0x4e17b9+(_0x332461(0x35a)+_0x332461(0x38d)+'ted\x20target'+'s.')});return;}const _0x5c06cf=_0x33e46c[_0x4e17b9-(-0x179f+0x16f*-0x16+0x372a)]['id'];if(!_0x5c06cf){await sendWithRetry(_0x369bec,{'text':'No\x20schedul'+'e\x20#'+_0x4e17b9+(_0x332461(0x35a)+_0x332461(0x38d)+_0x332461(0x408)+'s.')});return;}const _0x129d89=await updateScheduleFields(_0x5c06cf,{'enabled':_0x1433f8===_0x332461(0x283)?0x315*-0x8+0x115a*0x2+-0xa0b:-0x118d*-0x1+-0x1f53+0x2*0x6e3});if(_0x129d89)await sendWithRetry(_0x369bec,{'text':_0x332461(0x3a8)+_0x4e17b9+'\x20'+_0x1433f8+'d.'});else await sendWithRetry(_0x369bec,{'text':_0x332461(0x430)+'update\x20ena'+_0x332461(0x251)+'.'});return;}await sendWithRetry(_0x369bec,{'text':USAGE});}catch(_0x55419c){warn('[sched]\x20ha'+_0x332461(0x387)+_0x332461(0x463)+_0x332461(0x20d)+(_0x55419c?.[_0x332461(0x260)]||_0x55419c));}}export async function initialize(_0x5a18cd){const _0x19604d=_0x4a2726;if(!_0x5a18cd)throw new Error('sched.init'+_0x19604d(0x236)+_0x19604d(0x2cc)+'instance');setupSendApi(_0x5a18cd),refreshConfig();try{await ensureSchema();}catch(_0x5b0834){error(_0x19604d(0x2e9)+_0x19604d(0x33e)+'iled:\x20'+(_0x5b0834?.[_0x19604d(0x260)]||_0x5b0834));throw _0x5b0834;}startSchedulerAligned(),info('[sched]\x20in'+_0x19604d(0x328)+_0x19604d(0x3d2)+'ble\x20bot\x20co'+_0x19604d(0x26f));}export async function cleanup(){const _0x586ecf=_0x4a2726;try{stopScheduler();}catch(_0x12bf80){warn(_0x586ecf(0x230)+_0x586ecf(0x253)+'r:\x20'+(_0x12bf80?.[_0x586ecf(0x260)]||_0x12bf80));}finally{botRef=null,sendApi=null,info(_0x586ecf(0x230)+_0x586ecf(0x252));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};