const _0x25fc45=_0x16a7;(function(_0x3f298c,_0x4fd3f3){const _0x587629=_0x16a7,_0x35bfb1=_0x3f298c();while(!![]){try{const _0x4d567f=-parseInt(_0x587629(0x2f6))/(0x13*0x1b1+-0x1*0xbc3+-0x145f)+-parseInt(_0x587629(0x400))/(-0x1fde*-0x1+0x1f2+-0x21ce)+-parseInt(_0x587629(0x3cd))/(0x1*0x13c9+-0x2119+-0x9*-0x17b)*(parseInt(_0x587629(0x286))/(-0x1bfb+-0x1fe7*-0x1+-0x3e8))+-parseInt(_0x587629(0x1a6))/(0x3*-0x703+0x165+0x13a9)*(-parseInt(_0x587629(0x2d9))/(0x5*0x61+0x5*0x615+-0x1024*0x2))+parseInt(_0x587629(0x2fb))/(0x1c7a+-0x5d3*-0x1+0x6b*-0x52)*(-parseInt(_0x587629(0x252))/(0x2454+0x2450+-0x489c))+-parseInt(_0x587629(0x352))/(-0x2*-0x209+-0x1a46+0x163d)*(-parseInt(_0x587629(0x244))/(-0x1382+0x1516+0x2*-0xc5))+parseInt(_0x587629(0x19d))/(-0x10*-0x167+-0x1d80+0x71b)*(parseInt(_0x587629(0x3e8))/(0x1*-0x2167+0x1bbe+0x5b5));if(_0x4d567f===_0x4fd3f3)break;else _0x35bfb1['push'](_0x35bfb1['shift']());}catch(_0x57b8a8){_0x35bfb1['push'](_0x35bfb1['shift']());}}}(_0x5978,-0x1*0xa63f1+0xa05b*-0xb+0x17e6b7));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x56b54d from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';function _0x5978(){const _0x56872a=['\x20=\x20?','trim','KEY\x20AUTOIN','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','ge:\x20sched\x20','ime','\x203\x20OR\x20sche','aged\x20conne','once','sent_at','es\x20(\x0a\x20\x20','when','delete','e=\x27table\x27\x20','ed\x20delete\x20','k\x20failed','[sched]\x20en','length','get','\x0amsg:\x0a',',\x20time,\x20se','\x20at\x20','filter','chat','weekly','E\x20IF\x20NOT\x20E','rate','heduler\x20st','frequency','t_sent\x20INT','LT\x20\x27daily\x27','[sched]\x20sw','dules_new\x20','4671KkLLYe','s\x20WHERE\x20ch','EXISTS\x20idx','[sched]\x20Fi','sage,\x20time','fromISO','[sched]\x20li','unsupporte','\x20\x20\x20chat_ji','\x20UPDATE\x20SE','_RETRIES','\x0a\x20\x20\x20\x20\x20\x20CRE','_schedules','join','send_attem','hasSame','toISO','r:\x20','[sched]\x20is','CREMENT,\x0a\x20','no\x20sendApi','fter\x20time\x20','Unsupporte','ction.upda','chat_jid\x20=','run','every','ple\x20schedu','\x20?,\x20?,\x20?)','sched\x20enab','LUES\x20(?,\x20?','r_settings','LE\x20IF\x20NOT\x20','\x20timezone\x20','xtMessage','parse\x20new\x20','requested\x20','tChatTimez','nd\x20attempt','last_sent','TEXT\x20DEFAU','ded\x20schedu','=2\x20every\x202','\x0a\x20\x20\x20\x20\x20\x20\x20\x20e','led,\x20send_','ed\x20once\x20<H','led\x20messag','|in\x20N\x20hour','nd_at,\x20fre','schedule','caption','push','number','instead','hedules\x20ta','\x0a\x20\x20\x20\x20\x20\x20\x20\x20c','TEGER,\x0a\x20\x20\x20','d\x20to\x20remov','scheduled_','ed\x20disable','livered\x20an','nnot\x20inser','[sched]\x20fa','rval=','status','type','no\x20send\x20ta','\x20\x20\x20\x20\x20\x20\x20las','Deleted\x20','INSERT\x20INT','Message\x20ca','\x20WHERE\x20id\x20','d\x20delete\x201','GER\x20DEFAUL','CREATE\x20IND','ids','1\x20ORDER\x20BY','chedules(c','ame\x20line\x20a','ed\x20frequen','\x20error:\x20','unrecovera','nd_attempt','ed,\x20schedu','ES\x20(?,\x20?,\x20','\x20time=','\x20);','ULT\x200,\x0a\x20\x20\x20','essage\x20TEX','[sched]\x20ge','zoneName','anager\x20use','ecutor\x20ite','lumn','ROM\x20schedu','g\x20at\x20','ndStoredMa','oUserJid','enabled','ENT','faults\x20as\x20','[sched]\x20cr','dules\x20tabl','pt,\x20create','target_jid','gp:<alias|','`\x0a‣\x20Set\x20re','\x20(chat_jid','reason','lias|jid|a','normalizeT','ed\x20edit\x20<n','eign_keys\x20','[sched]\x20de','n\x20follow\x20t','\x20all','s):\x20','d\x20time\x20for','selectedBu','\x20when:','s\x20at\x20given','ite_master','m>\x20gp:<ali','4281hHnXiY','one\x20error:','umber>\x20<HH','test','delete:\x20','e\x20#','STS\x20schedu','\x20found\x20acr','ed\x20listene','ble\x20rename','ler\x20error:','now','fallback','EGER\x20DEFAU','ne\x20TEXT,\x0a\x20','parse_fail','sendat','\x20time.\x0a\x0a>\x20','ed\x20add*\x20`<','ewlines\x20pr','recoverabl','adAndNorma','le_info(','padStart','=\x20OFF;','hhmm','keys','36miwosv','\x20?\x20ORDER\x20B','findings','ler_settin','ttempt\x20col','=\x20?','hed\x20add\x2009','dApi\x20',':mm|in\x20N\x20h','\x0a);','eator_jid\x20','\x20?,\x20?)','shift','le\x20id=','[sched]\x20No','one-off\x20fo','backup_','changes','update\x20fre','extendedTe','map','replace','r\x20defaults','TEXT\x20NOT\x20N','701044qlXJDL','there\x0amore','\x20->\x20','r_jid\x20TEXT','toFormat','e\x20from\x20DB;','startsWith','videoMessa','nce*\x20`<HH:','nnection.u','all\x20or\x20a\x20g','help','e\x20error\x20fo','seMessage','r,...|all>','time_at','timezone','eaned\x20up','iled\x20to\x20re','[sched]\x20ad',',2,3\x20OR\x20sc','ndler\x20erro','toLocaleSt','livered\x20re','mns\x20error\x20','Please\x20pro','singleSele','Schedule\x20#','e\x20TEXT\x0a\x20\x20\x20','>\x20<n>\x20\x20(n=','\x20freq:','ed\x20schedul','freq','ror:\x20','gacy\x20sched','resolveNam','_jid,\x20enab','tupSendApi','trimEnd','eanup\x20erro','time','WHERE\x20chat','_chat\x20ON\x20s','send','\x20scheduled','\x20connectio','\x20chat=','s\x20ADD\x20COLU','[sched]\x20PM','default\x20wi','created_by','unknown','essage.\x0a','REATE\x20TABL','2.4.0','\x20but\x20faile','\x20|\x20number,','time\x20TEXT,','one-off\x20id','\x20INTEGER,\x0a','attempts,\x20','msg','\x20PRIMARY\x20K','chat_jid','ek:','datetime','\x20gp:<alias','db\x20delete\x20','mezone\x20TEX','tchFromFin','day_of_mon','lizeExisti','targets.','at_jid\x20=\x20?',',\x20timezone','INTEGER\x0a\x20\x20','enable','resolve\x20gp','_jid\x20=\x20?','ngSchedule',':<alias|ji','d\x20last_att','\x20\x20\x20\x20creato','TEXT','MN\x20send_at','toMillis','‣\x20One-off\x20','setZone','slice','found\x20for\x20','buttonsRes','s_new\x20RENA','`<HH:mm\x20|\x20','TEXT\x0a\x20\x20\x20\x20\x20','M\x20schedule',')\x20id:','name','\x20fatal','.\x20Will\x20ret','not\x20availa','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','isValid','les','admin\x20chec','(listenerM','T\x20(strftim','s\x20(chat_ji','w\x27))\x0a\x20\x20\x20\x20\x20','rget\x20avail','T\x20timezone','d\x20removed\x20','\x20failed:\x20','shed:\x20inte','isArray','ge\x20text\x20(s','>\x20*sched\x20o','s/days/min','[sched]\x20se','key','1\x20daily,\x20n','\x20NOT\x20NULL,','data','e(\x27%s\x27,\x27no','LT\x200','ble\x20appear','sched','ommandPM\x20e','weekday','sage...>`\x0a','):\x0a\x0a','1274603EeHQfr','d_at)\x20VALU','ForUser\x20er','DATETIME_M','[sched]\x20sc','ours|YYYY-','ME\x20TO\x20sche','ULL','instance','2497555XEjAzK','N\x20hours/da','itialized\x20','reated_at\x20','SCHED_DEFA',':00\x20Hello\x20','eator_jid)',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','set','ULT_TIMEZO','t*\x0a‣\x20View\x20','tReloadCon','enable\x20a\x20p','at\x20','all','.)\x20gp:<ali','chat_id','leFields\x20e','has','vided.\x20Usa','O\x20schedule','ying.','participan','[sched]\x20DB','R\x20PRIMARY\x20','dateSchedu','repeat','able\x20(expl','[sched]\x20ho','PRAGMA\x20for','EXISTS\x20sch','isNaN','\x20updated\x20t','entries','ncy\x20TEXT,\x0a','of\x20a\x20sched','\x20done;\x20sen','ber>`\x20`<n>','mMe)','\x20days,\x20etc','rarily\x20dis','ded\x20send_a','for\x20','ted\x20—\x20migr','[sched]\x20co','icit\x20targe','TEGER\x20DEFA','rved\x20-\x20re-','umn','s)\x20across\x20','nal\x20send\x20a','ules\x20detec','without\x20de','moveSchedu','\x20disabled\x20','d\x20send_att','o\x20recurrin','INTEGER\x20DE','\x20enabled:','s\x20RENAME\x20T','o\x20one-off\x20','text','ed\x20message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','duler_sett','l/adequate','hat_jid);','\x20target(s)','author','Failed\x20for','days_of_we','d,\x20message','uled\x20messa','HH:mm','[sched]\x20in','s):\x0a','GER','.update','e\x20FROM\x20sql','every_n_da','dScheduleR','IMARY\x20KEY\x20','moveAllSch','ndleSchedC','H:mm\x20|\x20in\x20','Message\x20er','sendMessag','DEFAULT\x201,','plus','ble','(id:','.\x20Not\x20retr',',\x0a\x20\x20','s\x20WHERE\x20id','ap\x20tables\x20','timestamp','schedule.\x20','gned\x20to\x20mi','message',':mm|YYYY-M','from','\x20default\x20c','\x20\x20\x20);\x0a\x20\x20\x20\x20','edit','fromMillis','ctReply','ge.\x0a\x0a>\x20*sc','xample:\x0asc','Scheduled\x20','r\x20id=','hedules.\x20E','peat\x20inter','eated\x20sche','anaging\x20sc','SELECT\x20nam','defaults:\x20','PRAGMA\x20tab','attempt\x20IN','\x20\x20\x20\x20\x20\x20\x20\x20ti','tReload\x20ha','\x20|\x20all>`\x0a‣','floor','led\x20for\x20id','add','empts\x20reac','uires\x20bot\x20','LT\x201,\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20l','owing\x20line','function','er>`\x0a‣\x20Re-','sendAt','EY,\x0a\x20\x20\x20\x20\x20\x20','E\x20schedule','[sched]\x20mi','=excluded.','[sched]\x20ha','pts','d\x20for\x20conn','th\x20/setdef','d\x20to\x20backu','ncy\x20TEXT\x20D','jid','eduled\x20mes','number,...','sched.init','c.\x0a\x0a>\x20*sch','ys]\x20<messa','\x20schedule(','*\x20`<number','\x20<number>\x20','\x20\x20\x20\x20freque','=2`\x20every\x20','nabled\x20INT','p:<alias|j','send_at','split','update\x20ena','11170LlBRwA','dule.','EGER,\x0a\x20\x20\x20\x20','t_jid\x20TEXT','ne;\x20old\x20ta','freshConfi','daily','startOf','_settings\x20','Api\x20(manag','plies\x20(fro','s*\x0a\x0a>\x20*sch','iled:\x20','failed','56KfLArs','SELECT\x20*\x20F','edule.','sForChat\x20e','[sched]\x20cl','\x20\x20\x20\x20\x20\x20\x20\x20en','-DDTHH:mm>','schedule_t','exec','\x20failed\x20de','livery\x20att','day\x20+\x20Nday','toLowerCas','t\x20lines\x20—\x20','group/defa','day','ime\x20inline','cy\x20<number','itial\x20exec','s\x20found\x20fo','PM\x20usage:\x20','isInteger','ble\x20error\x20','ted\x20target','val:\x20`n=1`','diff','ates)','2\x20days,\x20et','LE\x20schedul','MARY\x20KEY,\x0a','[sched]\x20re','dings\x20erro','Could\x20not\x20','stSchedule','ts\x20(','ltChatJids','ed\x20add\x20<HH','EX\x20IF\x20NOT\x20','te\x20listene','H:mm>\x20[Nda','catch','efaults.','created_at','s_new\x20(cha','th:','remoteJid','\x20id\x20INTEGE','\x22.\x20Use\x20gp:','min','oss\x20your\x20d','AND\x20name=?','ed\x20edit*\x20`','960rzZskU','ttonId','mm>`\x20`[Nda','hat\x20error:','tTableColu','indexOf','dules;','wId',':\x20\x22','empts\x20colu','es\x20created','at_jid)\x20DO','jid|all>','selectedRo','match','includes','If\x20`Ndays`','\x20|\x20YYYY-MM','as|jid|all','\x20for\x20id=','\x20\x20\x20\x20enable','SCHED_CHEC','quency,\x20ti','room','\x20ensure\x20fa','s).\x20gp:<al','fig\x20regist','\x20\x20\x20\x20timezo','ge...>`\x0a‣\x20','\x20\x20\x20timezon','MM-DDTHH:m','\x20lines\x0agp:','nutes)','Failed\x20to\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','assign','vide\x20messa','bling\x20sche','solving\x20co','enabled\x20=\x20','ily\x27,\x0a\x20\x20\x20\x20','SCHED_INIT','d\x20TEXT\x20PRI','g\x20error:\x20','[sched]\x20ta','\x20frequency','No\x20valid\x20i','id|all>','ault.','ble\x20for\x20re','[sched]\x20ex','\x20available','list','EFAULT\x20\x27da','\x0a\x20\x20\x20\x20\x20\x20\x20VA','getUniqueJ','>`\x20`<messa','INTEGER','📅\x20*SchedHe','\x20->\x20id:','ponseMessa','oss\x20reques','M-DDTHH:mm','string','\x20set\x20to\x20','gration\x20do','days','IAL_BACKOF','chatid','solveDefau','ult\x20TZ','>`\x0a‣\x20Tempo','connection','gister\x20man','INTEGER\x20PR','nnection\x20','listRespon','F_MS','[sched]\x20id','_MS','d|all>\x20inl','last_attem','K_INTERVAL','6QOZfoq','lastID','le*\x20`<numb','ys]`\x20`<mes','ration\x20fai','edules_new','all\x20schedu','livery\x20per','quency.','isCommand','db_failed','creator_ji','yes','pdate\x20obse','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','XISTS\x20sche','t\x20INTEGER,','@g.us','\x20\x20\x20\x20\x20\x20\x20\x20cr','failed:\x20','\x5c$&','bled\x20state','les\x20WHERE\x20','\x20Delete\x20on','mat\x20for\x20ed','T\x201,\x0a\x20\x20\x20\x20\x20','delete\x201\x202','prepare','\x20the\x20time\x20','284265qCzBAE','ALTER\x20TABL','\x20or\x20on\x20nex','\x20\x20\x20\x20\x20creat','\x20daily,\x20`n','15701IJFUSu','ys:','leByDBId\x20e','[sched]\x20Un','\x20to\x20','update\x20sch','ecutorTick','Usage:\x20sch','sage...>\x20g','or\x20on\x20foll','s\x20failed:\x20','d\x20INTEGER\x20','finalize','t,\x20creator','disable','body','ast_attemp','`\x0a‣\x20Change','No\x20schedul','utor\x20error','ring','\x20last_sent','d_time','s\x20INTEGER,','end_at\x20INT','recurrence','include\x20gp','[sched]\x20ca','onnection(','TZ=','nfig\x20refre','hed\x20delete','[sched]\x20fi','not-availa','sock','imageMessa','utes>\x20<mes','T\x20NOT\x20NULL','rror:\x20',':\x20bot\x20JID\x20','edules\x20SET','\x20made.','not\x20found','FAULT\x200','ry\x20on\x20next','ONFLICT(ch','led:\x20','ndexes\x20pro','\x20cycle.','schedules','T,\x0a\x20\x20\x20\x20\x20\x20\x20','\x20\x20\x20\x20\x20\x20\x20cha','<number|nu','for\x20defaul'];_0x5978=function(){return _0x56872a;};return _0x5978();}export const name=_0x25fc45(0x198);export const version=_0x25fc45(0x436);export const priority=-0x2553+-0xf2f+0x34d7;export const commands=[_0x25fc45(0x198),_0x25fc45(0x383)];export const configKeys=[_0x25fc45(0x29b)+_0x25fc45(0x2d8)+_0x25fc45(0x2d5),_0x25fc45(0x1aa)+'ULT_TIMEZO'+'NE','SCHED_SEND'+_0x25fc45(0x35c),'SCHED_INIT'+_0x25fc45(0x2c9)+'F_MS'];let botRef=null,sendApi=null,schedulerIntervalHandle=null,executorRunning=![],CHECK_INTERVAL_MS=(-0x8*0x103+0x27*0xa+-0x43*-0x1a)*(0x26af+0x3de+0x2f9*-0xd),DEFAULT_TIMEZONE='Africa/Nai'+'robi',SEND_RETRIES=-0x25ec+-0x8ab+0x952*0x5,INITIAL_BACKOFF_MS=0x13*-0xa3+-0x1e10+0x2c1d;const MAX_DB_ATTEMPTS=0x1348+0x21d3*0x1+-0x3518;function ensureArray(_0x1f3aac){const _0x11588b=_0x25fc45;if(!_0x1f3aac)return[];if(Array[_0x11588b(0x18c)](_0x1f3aac))return _0x1f3aac;return[_0x1f3aac];}function uniqArray(_0xa6836c){const _0x2b8e8b=_0x25fc45,_0x4768a3=new Set(),_0x30d9cf=[];for(const _0x300360 of _0xa6836c||[]){const _0x70331c=String(_0x300360||'')['trim']();if(!_0x70331c)continue;!_0x4768a3[_0x2b8e8b(0x1b8)](_0x70331c)&&(_0x4768a3[_0x2b8e8b(0x221)](_0x70331c),_0x30d9cf['push'](_0x70331c));}return _0x30d9cf;}async function tableExists(_0x137012){const _0x41aaad=_0x25fc45;try{const _0x396b8d=await db[_0x41aaad(0x343)](_0x41aaad(0x218)+_0x41aaad(0x1f4)+_0x41aaad(0x3cb)+'\x20WHERE\x20typ'+_0x41aaad(0x33e)+_0x41aaad(0x284),[_0x137012]);return!!_0x396b8d;}catch(_0x1d2226){return warn(_0x41aaad(0x2b2)+'bleExists\x20'+'error:\x20'+(_0x1d2226?.['message']||_0x1d2226)),![];}}async function getTableColumns(_0x518395){const _0x202197=_0x25fc45;try{const _0x51c8a8=await db[_0x202197(0x1b4)](_0x202197(0x21a)+_0x202197(0x3e3)+_0x518395+')');return(_0x51c8a8||[])['map'](_0x3c4f05=>_0x3c4f05[_0x202197(0x460)]);}catch(_0x1a064b){return warn('[sched]\x20ge'+_0x202197(0x28a)+_0x202197(0x418)+_0x202197(0x1d0)+_0x518395+':\x20'+(_0x1a064b?.[_0x202197(0x208)]||_0x1a064b)),[];}}function resolveChatJidFromRow(_0x291680){const _0x487d62=_0x25fc45,_0x527fab=['chat_jid',_0x487d62(0x2ca),_0x487d62(0x1b6),_0x487d62(0x234),_0x487d62(0x348),_0x487d62(0x29d),_0x487d62(0x3ba)];for(const _0x80ead2 of _0x527fab)if(_0x80ead2 in _0x291680&&_0x291680[_0x80ead2])return String(_0x291680[_0x80ead2]);for(const _0x5c9b1e of Object['keys'](_0x291680)){const _0x26f177=_0x291680[_0x5c9b1e];if(typeof _0x26f177===_0x487d62(0x2c5)&&_0x26f177['includes']('@'))return _0x26f177;}return null;}function resolveMessageFromRow(_0x49d3c4){const _0x640215=_0x25fc45,_0x3a625e=['message',_0x640215(0x43d),_0x640215(0x1e3),_0x640215(0x30a),'value'];for(const _0x463c43 of _0x3a625e)if(_0x463c43 in _0x49d3c4&&_0x49d3c4[_0x463c43]!=null)return String(_0x49d3c4[_0x463c43]);for(const _0x5b565c of Object[_0x640215(0x3e7)](_0x49d3c4)){if(typeof _0x49d3c4[_0x5b565c]==='string'&&_0x49d3c4[_0x5b565c][_0x640215(0x342)]>0x2430+-0x2330+-0x100&&!_0x49d3c4[_0x5b565c]['includes']('@'))return _0x49d3c4[_0x5b565c];}return'';}function resolveWhenFromRow(_0x588483){const _0x429065=_0x25fc45,_0x5b7cc9=['send_at',_0x429065(0x229),_0x429065(0x3dd),_0x429065(0x42b),_0x429065(0x205),'ts',_0x429065(0x40f)];for(const _0x55d652 of _0x5b7cc9){if(_0x55d652 in _0x588483&&_0x588483[_0x55d652]){const _0x307fd3=Number(_0x588483[_0x55d652]);if(!Number[_0x429065(0x1c5)](_0x307fd3)&&_0x307fd3>-0x74b5cd8b+0x6888626c+0x4b0143*0xf5)return{'send_at':_0x307fd3};}}const _0x22b859=[_0x429065(0x428),_0x429065(0x3e6),_0x429065(0x259)+_0x429065(0x336),_0x429065(0x38c)+_0x429065(0x428)];for(const _0x4885cd of _0x22b859){if(_0x4885cd in _0x588483&&_0x588483[_0x4885cd]){const _0x5ea4ba=String(_0x588483[_0x4885cd])[_0x429065(0x332)]();if(/^\d{1,2}:\d{2}$/[_0x429065(0x3d0)](_0x5ea4ba))return{'time':_0x5ea4ba};}}return{'time':null,'send_at':null};}async function readAndNormalizeExistingSchedules(){const _0x509041=_0x25fc45;try{const _0x328a68=await db[_0x509041(0x1b4)](_0x509041(0x253)+_0x509041(0x3b0)+_0x509041(0x466)),_0x1156e7=[];for(const _0x5d6939 of _0x328a68||[]){const _0x59f1f7=resolveChatJidFromRow(_0x5d6939)||'',_0x4f7cbd=resolveMessageFromRow(_0x5d6939)||'',_0x133974=resolveWhenFromRow(_0x5d6939)||{};let _0x4821dc=_0x5d6939[_0x509041(0x34d)]||_0x5d6939[_0x509041(0x420)]||_0x5d6939[_0x509041(0x1c0)]||_0x5d6939[_0x509041(0x314)]||_0x509041(0x24a);if(typeof _0x4821dc===_0x509041(0x386))_0x4821dc=_0x509041(0x1f5)+_0x509041(0x2fc)+_0x4821dc;const _0x519754=_0x5d6939['timezone']||_0x5d6939['tz']||null,_0x1cc3bb=_0x5d6939[_0x509041(0x2e4)+'d']||_0x5d6939[_0x509041(0x432)]||_0x5d6939[_0x509041(0x1ea)]||_0x5d6939['creator']||'';let _0x55a37f=Number(_0x5d6939[_0x509041(0x27c)]||_0x5d6939['ts']||_0x5d6939[_0x509041(0x205)]||0x4d5*0x1+0x12fe+0x39*-0x6b);if(!_0x55a37f)_0x55a37f=Math[_0x509041(0x21f)](Date[_0x509041(0x3d8)]()/(-0x99c+-0x25d5+0x4ab*0xb));_0x1156e7[_0x509041(0x385)]({'chat_jid':_0x59f1f7,'message':_0x4f7cbd,'time':_0x133974[_0x509041(0x428)]||null,'send_at':_0x133974[_0x509041(0x241)]||null,'frequency':_0x4821dc||_0x509041(0x24a),'timezone':_0x519754,'last_sent':Number(_0x5d6939[_0x509041(0x379)]||_0x5d6939[_0x509041(0x33a)]||0x21fb+-0x1345+-0xe*0x10d)||0x7b7+-0x1d*-0xf1+0x6*-0x5d6,'creator_jid':_0x1cc3bb||'','created_at':_0x55a37f});}return _0x1156e7;}catch(_0x133879){return warn('[sched]\x20re'+_0x509041(0x3e2)+_0x509041(0x447)+_0x509041(0x44f)+_0x509041(0x305)+(_0x133879?.['message']||_0x133879)),[];}}async function ensureSchema(){const _0x57fe6b=_0x25fc45,_0x490846={'id':_0x57fe6b(0x2d0)+_0x57fe6b(0x1f7)+'AUTOINCREM'+_0x57fe6b(0x3b5),'chat_jid':_0x57fe6b(0x3ff)+_0x57fe6b(0x1a4),'message':_0x57fe6b(0x3ff)+_0x57fe6b(0x1a4),'time':'TEXT','send_at':_0x57fe6b(0x2bf),'frequency':_0x57fe6b(0x37a)+_0x57fe6b(0x34f),'timezone':_0x57fe6b(0x453),'last_sent':'INTEGER','creator_jid':_0x57fe6b(0x3ff)+'ULL','enabled':_0x57fe6b(0x1df)+'FAULT\x201','send_attempts':_0x57fe6b(0x1df)+_0x57fe6b(0x326),'last_attempt':_0x57fe6b(0x2bf),'created_at':_0x57fe6b(0x1df)+'FAULT\x20(str'+'ftime(\x27%s\x27'+',\x27now\x27))'};try{const _0x41d3=await tableExists(_0x57fe6b(0x32c));if(!_0x41d3){const _0x477d57=Object[_0x57fe6b(0x1c7)](_0x490846)[_0x57fe6b(0x3fc)](([_0x9be995,_0x2858b8])=>_0x9be995+'\x20'+_0x2858b8)[_0x57fe6b(0x35f)](_0x57fe6b(0x202));await db['exec']('CREATE\x20TAB'+_0x57fe6b(0x26e)+_0x57fe6b(0x33b)+_0x477d57+_0x57fe6b(0x3f1));try{await db[_0x57fe6b(0x25a)]('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+_0x57fe6b(0x354)+_0x57fe6b(0x35e)+_0x57fe6b(0x42a)+_0x57fe6b(0x39f)+_0x57fe6b(0x1e8));}catch(_0x1d9a32){}info(_0x57fe6b(0x3b7)+'eated\x20cano'+'nical\x20sche'+_0x57fe6b(0x3b8)+'e'),await db[_0x57fe6b(0x25a)](_0x57fe6b(0x1e5)+_0x57fe6b(0x435)+_0x57fe6b(0x34a)+_0x57fe6b(0x2e8)+_0x57fe6b(0x1e6)+'ings\x20(\x0a\x20\x20\x20'+_0x57fe6b(0x32e)+_0x57fe6b(0x247)+_0x57fe6b(0x43e)+_0x57fe6b(0x22a)+_0x57fe6b(0x29a)+_0x57fe6b(0x306)+_0x57fe6b(0x1fd)+_0x57fe6b(0x334)+_0x57fe6b(0x373)+'TEXT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'\x20\x20');return;}const _0x14411f=await getTableColumns(_0x57fe6b(0x32c)),_0x3e94a5=_0x14411f[_0x57fe6b(0x295)](_0x57fe6b(0x43f)),_0xb2b4e=_0x14411f['includes']('message')||_0x14411f[_0x57fe6b(0x295)](_0x57fe6b(0x43d))||_0x14411f['includes'](_0x57fe6b(0x30a))||_0x14411f[_0x57fe6b(0x295)](_0x57fe6b(0x1e3)),_0x5e8a99=_0x14411f[_0x57fe6b(0x295)](_0x57fe6b(0x2e4)+'d')||_0x14411f['includes'](_0x57fe6b(0x432))||_0x14411f[_0x57fe6b(0x295)](_0x57fe6b(0x1ea));if(_0x3e94a5&&_0xb2b4e&&_0x5e8a99){if(!_0x14411f[_0x57fe6b(0x295)](_0x57fe6b(0x360)+_0x57fe6b(0x22f)))try{await db[_0x57fe6b(0x25a)]('ALTER\x20TABL'+'E\x20schedule'+_0x57fe6b(0x42f)+_0x57fe6b(0x454)+'tempts\x20INT'+'EGER\x20DEFAU'+_0x57fe6b(0x196)),info(_0x57fe6b(0x413)+_0x57fe6b(0x1cf)+'ttempts\x20co'+_0x57fe6b(0x3af));}catch(_0x9f40fb){warn(_0x57fe6b(0x1d2)+'uld\x20not\x20ad'+_0x57fe6b(0x1dd)+_0x57fe6b(0x28f)+'mn:\x20'+(_0x9f40fb?.[_0x57fe6b(0x208)]||_0x9f40fb));}if(!_0x14411f[_0x57fe6b(0x295)](_0x57fe6b(0x2d7)+'pt'))try{await db[_0x57fe6b(0x25a)](_0x57fe6b(0x2f7)+_0x57fe6b(0x22b)+_0x57fe6b(0x42f)+'MN\x20last_at'+'tempt\x20INTE'+_0x57fe6b(0x1f2)),info('[sched]\x20ad'+'ded\x20last_a'+_0x57fe6b(0x3ec)+_0x57fe6b(0x1d6));}catch(_0x55a8c2){warn(_0x57fe6b(0x1d2)+'uld\x20not\x20ad'+_0x57fe6b(0x451)+'empt\x20colum'+'n:\x20'+(_0x55a8c2?.[_0x57fe6b(0x208)]||_0x55a8c2));}try{await db[_0x57fe6b(0x25a)]('CREATE\x20IND'+_0x57fe6b(0x277)+_0x57fe6b(0x354)+'_schedules'+_0x57fe6b(0x42a)+_0x57fe6b(0x39f)+_0x57fe6b(0x1e8));}catch(_0x39cc96){}await db['exec'](_0x57fe6b(0x1e5)+_0x57fe6b(0x435)+_0x57fe6b(0x34a)+_0x57fe6b(0x2e8)+'duler_sett'+'ings\x20(\x0a\x20\x20\x20'+_0x57fe6b(0x32e)+_0x57fe6b(0x247)+'\x20PRIMARY\x20K'+_0x57fe6b(0x22a)+_0x57fe6b(0x29a)+_0x57fe6b(0x306)+_0x57fe6b(0x1fd)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x57fe6b(0x373)+_0x57fe6b(0x45d)+_0x57fe6b(0x20c)+'\x20\x20'),info(_0x57fe6b(0x1a1)+_0x57fe6b(0x388)+_0x57fe6b(0x197)+'s\x20canonica'+_0x57fe6b(0x1e7));return;}info('[sched]\x20Le'+_0x57fe6b(0x422)+_0x57fe6b(0x1d9)+_0x57fe6b(0x1d1)+'ating\x20safe'+'ly');const _0x25f7e4=await readAndNormalizeExistingSchedules();await db[_0x57fe6b(0x25a)](_0x57fe6b(0x1c3)+_0x57fe6b(0x3c2)+_0x57fe6b(0x3e5));try{await db['exec']('CREATE\x20TAB'+_0x57fe6b(0x372)+_0x57fe6b(0x1c4)+_0x57fe6b(0x2de)+_0x57fe6b(0x464)+_0x57fe6b(0x280)+_0x57fe6b(0x1be)+_0x57fe6b(0x333)+_0x57fe6b(0x365)+_0x57fe6b(0x32e)+'t_jid\x20TEXT'+_0x57fe6b(0x193)+_0x57fe6b(0x2a8)+_0x57fe6b(0x3aa)+_0x57fe6b(0x320)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'time\x20TEXT,'+_0x57fe6b(0x2e7)+_0x57fe6b(0x313)+_0x57fe6b(0x246)+'\x20\x20\x20\x20freque'+_0x57fe6b(0x233)+_0x57fe6b(0x2bb)+_0x57fe6b(0x2ae)+_0x57fe6b(0x2a1)+_0x57fe6b(0x3db)+_0x57fe6b(0x395)+_0x57fe6b(0x34e)+'EGER,\x0a\x20\x20\x20\x20'+_0x57fe6b(0x452)+_0x57fe6b(0x403)+_0x57fe6b(0x193)+_0x57fe6b(0x37d)+_0x57fe6b(0x23f)+_0x57fe6b(0x3da)+_0x57fe6b(0x224)+'\x20\x20\x20\x20send_a'+'ttempts\x20IN'+_0x57fe6b(0x1d4)+_0x57fe6b(0x3a9)+'\x20\x20\x20\x20\x20last_'+_0x57fe6b(0x21b)+_0x57fe6b(0x38a)+_0x57fe6b(0x2f9)+'ed_at\x20INTE'+_0x57fe6b(0x39b)+_0x57fe6b(0x469)+_0x57fe6b(0x195)+_0x57fe6b(0x46b)+_0x57fe6b(0x3a8));}catch(_0x580f3c){await db[_0x57fe6b(0x25a)]('CREATE\x20TAB'+_0x57fe6b(0x372)+_0x57fe6b(0x1c4)+'edules_new'+_0x57fe6b(0x464)+_0x57fe6b(0x280)+'R\x20PRIMARY\x20'+'KEY\x20AUTOIN'+_0x57fe6b(0x365)+_0x57fe6b(0x32e)+_0x57fe6b(0x247)+_0x57fe6b(0x193)+_0x57fe6b(0x2a8)+'essage\x20TEX'+'T\x20NOT\x20NULL'+_0x57fe6b(0x1ad)+_0x57fe6b(0x439)+_0x57fe6b(0x2e7)+'end_at\x20INT'+_0x57fe6b(0x246)+_0x57fe6b(0x23d)+_0x57fe6b(0x1c8)+_0x57fe6b(0x21c)+_0x57fe6b(0x444)+_0x57fe6b(0x32d)+_0x57fe6b(0x310)+_0x57fe6b(0x43b)+_0x57fe6b(0x2eb)+_0x57fe6b(0x3f2)+_0x57fe6b(0x3ff)+'ULL,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20enabled'+_0x57fe6b(0x43b)+'\x20\x20\x20\x20\x20\x20\x20\x20se'+_0x57fe6b(0x3a4)+_0x57fe6b(0x312)+_0x57fe6b(0x225)+_0x57fe6b(0x30b)+_0x57fe6b(0x2e9)+_0x57fe6b(0x389)+_0x57fe6b(0x1a9)+_0x57fe6b(0x44b)+'\x20\x20\x20\x20);'),warn('[sched]\x20cr'+_0x57fe6b(0x216)+_0x57fe6b(0x351)+_0x57fe6b(0x1da)+_0x57fe6b(0x3b6)+_0x57fe6b(0x3d9));}const _0xa2e22=await db[_0x57fe6b(0x2f4)](_0x57fe6b(0x397)+'O\x20schedule'+_0x57fe6b(0x27d)+'t_jid,\x20mes'+_0x57fe6b(0x356)+',\x20send_at,'+'\x20frequency'+_0x57fe6b(0x44a)+',\x20last_sen'+_0x57fe6b(0x308)+_0x57fe6b(0x424)+_0x57fe6b(0x37e)+_0x57fe6b(0x43c)+_0x57fe6b(0x2d7)+_0x57fe6b(0x3b9)+_0x57fe6b(0x19e)+_0x57fe6b(0x3a6)+'?,\x20?,\x20?,\x20?'+',\x20?,\x20?,\x20?,'+_0x57fe6b(0x36e));try{for(const _0x355c30 of _0x25f7e4){try{await _0xa2e22['run'](_0x355c30['chat_jid']||'',_0x355c30[_0x57fe6b(0x208)]||'',_0x355c30[_0x57fe6b(0x428)]||null,_0x355c30[_0x57fe6b(0x241)]||null,_0x355c30[_0x57fe6b(0x34d)]||_0x57fe6b(0x24a),_0x355c30[_0x57fe6b(0x410)]||null,_0x355c30['last_sent']||-0x14a9+0x1*0x1ee3+-0xa3a,_0x355c30[_0x57fe6b(0x2e4)+'d']||'',-0x6cb*-0x3+-0x1c1*-0x9+0x1*-0x2429,-0x1*-0x840+-0x262d*0x1+-0x2f*-0xa3,null,_0x355c30['created_at']||Math[_0x57fe6b(0x21f)](Date[_0x57fe6b(0x3d8)]()/(-0x16d4+-0x1ab9+-0x73*-0x77)));}catch(_0x511c77){warn(_0x57fe6b(0x316)+_0x57fe6b(0x38f)+'t\x20normaliz'+_0x57fe6b(0x41f)+'e\x20for\x20'+_0x355c30[_0x57fe6b(0x43f)]+':\x20'+(_0x511c77?.[_0x57fe6b(0x208)]||_0x511c77));}}}finally{try{await _0xa2e22[_0x57fe6b(0x307)]();}catch(_0xbe0705){}}try{const _0x513867='schedules_'+_0x57fe6b(0x3f8)+Math[_0x57fe6b(0x21f)](Date[_0x57fe6b(0x3d8)]()/(-0x2082+0x63e+0x1e2c));await db[_0x57fe6b(0x25a)](_0x57fe6b(0x2f7)+_0x57fe6b(0x22b)+_0x57fe6b(0x1e1)+'O\x20'+_0x513867+';'),await db[_0x57fe6b(0x25a)](_0x57fe6b(0x2f7)+_0x57fe6b(0x22b)+_0x57fe6b(0x45b)+_0x57fe6b(0x1a3)+_0x57fe6b(0x28c));try{await db[_0x57fe6b(0x25a)](_0x57fe6b(0x39c)+_0x57fe6b(0x277)+'EXISTS\x20idx'+'_schedules'+_0x57fe6b(0x42a)+_0x57fe6b(0x39f)+'hat_jid);');}catch(_0x45c0a){}info(_0x57fe6b(0x22c)+_0x57fe6b(0x2c7)+_0x57fe6b(0x248)+_0x57fe6b(0x3d6)+_0x57fe6b(0x232)+'p');}catch(_0x5222ed){warn(_0x57fe6b(0x350)+_0x57fe6b(0x204)+_0x57fe6b(0x2ec)+(_0x5222ed?.[_0x57fe6b(0x208)]||_0x5222ed));throw _0x5222ed;}finally{await db[_0x57fe6b(0x25a)](_0x57fe6b(0x1c3)+'eign_keys\x20'+'=\x20ON;');}await db['exec'](_0x57fe6b(0x35d)+'ATE\x20TABLE\x20'+'IF\x20NOT\x20EXI'+_0x57fe6b(0x3d3)+_0x57fe6b(0x3eb)+'gs\x20(\x0a\x20\x20\x20\x20\x20'+_0x57fe6b(0x35a)+_0x57fe6b(0x2b0)+_0x57fe6b(0x26f)+_0x57fe6b(0x257)+'abled\x20INTE'+_0x57fe6b(0x39b)+_0x57fe6b(0x2f2)+_0x57fe6b(0x2a3)+_0x57fe6b(0x41c)+_0x57fe6b(0x20c));}catch(_0x43a76a){error(_0x43a76a,_0x57fe6b(0x341)+'sureSchema'+_0x57fe6b(0x461));throw _0x43a76a;}}function refreshConfig(){const _0x205f4e=_0x25fc45;try{const _0x3552db=getConfig()||{};CHECK_INTERVAL_MS=Number(_0x3552db[_0x205f4e(0x29b)+_0x205f4e(0x2d8)+'_MS']??CHECK_INTERVAL_MS),DEFAULT_TIMEZONE=_0x3552db[_0x205f4e(0x1aa)+_0x205f4e(0x1af)+'NE']||DEFAULT_TIMEZONE,SEND_RETRIES=Number(_0x3552db['SCHED_SEND'+_0x205f4e(0x35c)]??SEND_RETRIES),INITIAL_BACKOFF_MS=Number(_0x3552db[_0x205f4e(0x2af)+_0x205f4e(0x2c9)+_0x205f4e(0x2d3)]??INITIAL_BACKOFF_MS),info(_0x205f4e(0x1d2)+_0x205f4e(0x319)+_0x205f4e(0x18b)+_0x205f4e(0x391)+CHECK_INTERVAL_MS+('ms\x20default'+_0x205f4e(0x318))+DEFAULT_TIMEZONE);}catch(_0x2c2c96){warn(_0x205f4e(0x270)+_0x205f4e(0x249)+_0x205f4e(0x2b1)+(_0x2c2c96?.['message']||_0x2c2c96));}}try{typeof hotReloadConfig===_0x25fc45(0x227)&&hotReloadConfig((_0x13862d=[])=>{const _0x471749=_0x25fc45;try{refreshConfig();}catch(_0x10fb82){warn('[sched]\x20ho'+_0x471749(0x21d)+_0x471749(0x415)+_0x471749(0x363)+(_0x10fb82?.[_0x471749(0x208)]||_0x10fb82));}});}catch(_0x36fcee){warn(_0x25fc45(0x1c2)+_0x25fc45(0x1b1)+_0x25fc45(0x2a0)+_0x25fc45(0x2dd)+_0x25fc45(0x329)+(_0x36fcee?.['message']||_0x36fcee));}refreshConfig();function tryBuildSendApiFromBot(_0x13f19e){const _0xa8864c=_0x25fc45;if(!_0x13f19e)return null;if(typeof _0x13f19e[_0xa8864c(0x1fc)+'e']==='function')return async(_0x2b6e96,_0x5b5736)=>_0x13f19e[_0xa8864c(0x1fc)+'e'](_0x2b6e96,_0x5b5736);else{if(_0x13f19e[_0xa8864c(0x31d)]&&typeof _0x13f19e[_0xa8864c(0x31d)][_0xa8864c(0x1fc)+'e']===_0xa8864c(0x227))return async(_0x538a73,_0x2e0644)=>_0x13f19e[_0xa8864c(0x31d)][_0xa8864c(0x1fc)+'e'](_0x538a73,_0x2e0644);}return null;}function setupSendApi(_0x1e1bbe){const _0x3b3d36=_0x25fc45;botRef=_0x1e1bbe,sendApi=tryBuildSendApiFromBot(botRef),info(_0x3b3d36(0x190)+_0x3b3d36(0x425)+_0x3b3d36(0x1ca)+_0x3b3d36(0x3ef)+(sendApi?'available':_0x3b3d36(0x31c)+'ble'));}async function performSend(_0x4e238c,_0x2dcff0){const _0x2e49fb=_0x25fc45,_0x348a84=_0x4e238c||null;if(!_0x348a84)throw new Error(_0x2e49fb(0x394)+_0x2e49fb(0x46c)+_0x2e49fb(0x1c1)+_0x2e49fb(0x1d3)+'t\x20required'+')');if(typeof sendApi===_0x2e49fb(0x227)){await sendApi(_0x348a84,_0x2dcff0);return;}if(botRef&&typeof botRef[_0x2e49fb(0x1fc)+'e']===_0x2e49fb(0x227)){await botRef[_0x2e49fb(0x1fc)+'e'](_0x348a84,_0x2dcff0);return;}if(botRef&&botRef['sock']&&typeof botRef[_0x2e49fb(0x31d)]['sendMessag'+'e']==='function'){await botRef[_0x2e49fb(0x31d)][_0x2e49fb(0x1fc)+'e'](_0x348a84,_0x2dcff0);return;}throw new Error(_0x2e49fb(0x366)+_0x2e49fb(0x2b9));}async function sendWithRetry(_0x6badb7,_0x4a0df6){const _0x330912=_0x25fc45,_0xec7dcb=Number(SEND_RETRIES||0x124*-0x7+-0x7ad*-0x4+-0x16b5);let _0x3a20b9=0x2015+0x12eb+-0x3300,_0x190a0a=Number(INITIAL_BACKOFF_MS||0x5*-0x4d8+-0x6e6*-0x5+-0x852);while(_0x3a20b9<_0xec7dcb){try{return await performSend(_0x6badb7,_0x4a0df6),!![];}catch(_0x1b1271){_0x3a20b9++;const _0x42f919=String(_0x1b1271?.['message']||'')[_0x330912(0x25e)+'e']()[_0x330912(0x295)](_0x330912(0x34b))||_0x1b1271?.[_0x330912(0x392)]===0x16c1+-0x327*0x2+-0xec6;warn(_0x330912(0x190)+_0x330912(0x378)+'\x20'+_0x3a20b9+_0x330912(0x46f)+(_0x1b1271?.[_0x330912(0x208)]||_0x1b1271));if(_0x3a20b9>=_0xec7dcb||!_0x42f919)return![];await new Promise(_0x4f548f=>setTimeout(_0x4f548f,_0x190a0a)),_0x190a0a*=-0x1f74+0x1*0x1206+0x1ae*0x8;try{setupSendApi(botRef);}catch(_0x1ae3a7){}}}return![];}async function sendScheduledMessage(_0x4985a2){const _0x2ecad9=_0x25fc45,{id:_0x39c5d2,chat_jid:_0x2ce57d,message:_0x35afba}=_0x4985a2,_0x3a82a9={'text':_0x35afba},_0x291d49=Number(SEND_RETRIES||-0x1125+-0x144*0x16+0x168*0x20);let _0x2956f6=0xf40+-0x1b1*-0x4+-0x1604,_0x4f207c=Number(INITIAL_BACKOFF_MS||-0x749+-0x25d0+0x2f0d);while(_0x2956f6<_0x291d49){_0x2956f6++;try{return await performSend(_0x2ce57d,_0x3a82a9),{'success':!![],'unrecoverable':![]};}catch(_0x107bca){const _0x112598=_0x107bca?.[_0x2ecad9(0x208)]||String(_0x107bca),_0x818a1e=_0x112598[_0x2ecad9(0x25e)+'e']()['includes']('forbidden')||_0x107bca?.['data']===-0xa1c+-0x566*-0x7+0x1*-0x1a1b,_0x1410e2=_0x112598['toLowerCas'+'e']()[_0x2ecad9(0x295)](_0x2ecad9(0x325))||_0x107bca?.[_0x2ecad9(0x194)]===-0x1337+0x5a7+0xf24;warn(_0x2ecad9(0x190)+'nd\x20attempt'+'\x20'+_0x2956f6+'/'+_0x291d49+_0x2ecad9(0x299)+_0x39c5d2+_0x2ecad9(0x46f)+_0x112598);if(_0x818a1e||_0x1410e2)return error(_0x2ecad9(0x2fe)+_0x2ecad9(0x3e1)+_0x2ecad9(0x40c)+_0x2ecad9(0x213)+_0x39c5d2+':\x20'+_0x112598+(_0x2ecad9(0x201)+_0x2ecad9(0x1bb))),{'success':![],'unrecoverable':!![]};if(_0x2956f6>=_0x291d49)return error(_0x2ecad9(0x355)+_0x2ecad9(0x1d8)+'ttempt\x20fai'+_0x2ecad9(0x220)+'='+_0x39c5d2+'.'),{'success':![],'unrecoverable':![]};await new Promise(_0x3f16ec=>setTimeout(_0x3f16ec,_0x4f207c)),_0x4f207c*=-0x3a*-0x7+0x1*-0x1e95+0x1d01;try{setupSendApi(botRef);}catch(_0x142f49){}}}return{'success':![],'unrecoverable':![]};}function parseTimeToken(_0x450b48,_0x2b8e44=DEFAULT_TIMEZONE){const _0x25248b=_0x25fc45;if(!_0x450b48||typeof _0x450b48!=='string')return null;const _0x23b2d8=_0x450b48[_0x25248b(0x332)](),_0x430b34=_0x23b2d8[_0x25248b(0x294)](/^in\s+(\d+)\s*(minute|min|minutes|m|hour|hours|hr|h|day|days|d)$/i);if(_0x430b34){const _0x4dd991=Number(_0x430b34[-0x35*0x85+0x1ce6+-0x15c]),_0x319cbd=_0x430b34[-0x2c3+0x20a6*-0x1+0x236b][_0x25248b(0x25e)+'e']();let _0x44cc55=DateTime[_0x25248b(0x3d8)]()[_0x25248b(0x457)](_0x2b8e44);if(_0x319cbd['startsWith'](_0x25248b(0x282))||_0x319cbd==='m')_0x44cc55=_0x44cc55['plus']({'minutes':_0x4dd991});else{if(_0x319cbd['startsWith']('h')||_0x319cbd[_0x25248b(0x406)]('hr'))_0x44cc55=_0x44cc55['plus']({'hours':_0x4dd991});else{if(_0x319cbd[_0x25248b(0x406)]('d'))_0x44cc55=_0x44cc55[_0x25248b(0x1fe)]({'days':_0x4dd991});}}if(_0x44cc55[_0x25248b(0x465)])return{'type':'datetime','dt':_0x44cc55};}if(/^\d{4}-\d{2}-\d{2}[ T]\d{1,2}:\d{2}$/[_0x25248b(0x3d0)](_0x23b2d8)){const _0x39a3a5=_0x23b2d8[_0x25248b(0x3fd)]('\x20','T'),_0x4590a2=DateTime[_0x25248b(0x357)](_0x39a3a5,{'zone':_0x2b8e44});if(_0x4590a2['isValid'])return{'type':_0x25248b(0x441),'dt':_0x4590a2};}if(/^\d{1,2}:\d{2}$/[_0x25248b(0x3d0)](_0x23b2d8)){const [_0x498715,_0x39748f]=_0x23b2d8[_0x25248b(0x242)](':')[_0x25248b(0x3fc)](Number);if(Number[_0x25248b(0x267)](_0x498715)&&Number[_0x25248b(0x267)](_0x39748f)&&_0x498715>=0xf99+-0x6d1*0x3+0x4da&&_0x498715<=0x526*0x6+-0x1a62+-0x46b&&_0x39748f>=0x1986+0x1cf*-0xa+-0x770&&_0x39748f<=-0x4e9*0x1+-0x24a1+-0x1*-0x29c5)return{'type':_0x25248b(0x3e6),'hhmm':String(_0x498715)['padStart'](0x85c+0x7*0x199+-0x1389,'0')+':'+String(_0x39748f)[_0x25248b(0x3e4)](0x213f*-0x1+-0x1105*0x2+0x434b,'0')};}return null;}function shouldSendSlot(_0x4d00b8,_0x34fa73){const _0xfb1360=_0x25fc45,_0x21b813=_0x4d00b8[_0xfb1360(0x34d)]||'daily',_0x1dc989=_0x4d00b8[_0xfb1360(0x379)]||-0x1*0x9fd+0x56+-0x9a7*-0x1,_0x1078fd=_0x1dc989?DateTime[_0xfb1360(0x20e)](_0x1dc989*(-0x1*-0x29f+-0x357+0x4a0))[_0xfb1360(0x457)](_0x34fa73['zone']):null;if(!_0x1078fd)return!![];if(_0x21b813===_0xfb1360(0x24a))return!_0x1078fd['hasSame'](_0x34fa73,_0xfb1360(0x261));if(_0x21b813===_0xfb1360(0x349))return _0x34fa73[_0xfb1360(0x26b)](_0x1078fd,'days')[_0xfb1360(0x2c8)]>=-0x54+0x357+-0x2fc;if(_0x21b813['startsWith'](_0xfb1360(0x1f5)+_0xfb1360(0x2fc))){const _0x12b6e4=parseInt(_0x21b813[_0xfb1360(0x242)](':')[-0xbf2*0x1+-0x103d+-0x386*-0x8],0xb0f*0x1+-0x65*0x61+0x1b40);if(isNaN(_0x12b6e4)||_0x12b6e4<0x1*-0x595+0x21a1*0x1+-0x1c0b)return![];return _0x34fa73['diff'](_0x1078fd,_0xfb1360(0x2c8))[_0xfb1360(0x2c8)]>=_0x12b6e4;}if(_0x21b813[_0xfb1360(0x406)](_0xfb1360(0x1ec)+_0xfb1360(0x440))){const _0x36aaf8=_0x21b813['split'](':')[0x165a+-0x10df+0x57a*-0x1][_0xfb1360(0x242)](',')[_0xfb1360(0x3fc)](_0x912150=>parseInt(_0x912150,0x1a3*0x4+0x157+-0x7d9))['filter'](Boolean);return _0x36aaf8['includes'](_0x34fa73[_0xfb1360(0x19a)])&&!_0x1078fd[_0xfb1360(0x361)](_0x34fa73,'day');}if(_0x21b813[_0xfb1360(0x406)](_0xfb1360(0x446)+_0xfb1360(0x27e))){const _0x2ea20d=parseInt(_0x21b813[_0xfb1360(0x242)](':')[-0x10f*0x22+0x1*0x1ca3+0x274*0x3],0x1*-0x509+0x1f1a+-0x8ad*0x3);return _0x34fa73[_0xfb1360(0x261)]===_0x2ea20d&&!_0x1078fd['hasSame'](_0x34fa73,_0xfb1360(0x261));}return![];}function _0x16a7(_0x591022,_0x4daeae){const _0x40afa2=_0x5978();return _0x16a7=function(_0x2221c8,_0x1d2812){_0x2221c8=_0x2221c8-(-0x7f*0x43+0x2*0x65f+0x160a);let _0x155410=_0x40afa2[_0x2221c8];return _0x155410;},_0x16a7(_0x591022,_0x4daeae);}async function addScheduleRow(_0x336c41){const _0x7936ac=_0x25fc45;try{const _0x20a5f9=await db['run']('INSERT\x20INT'+_0x7936ac(0x1ba)+_0x7936ac(0x46a)+_0x7936ac(0x1ed)+_0x7936ac(0x345)+_0x7936ac(0x382)+_0x7936ac(0x29c)+'mezone,\x20cr'+_0x7936ac(0x1ac)+_0x7936ac(0x2bc)+_0x7936ac(0x370)+',\x20?,\x20?,\x20?,'+_0x7936ac(0x3f3),[_0x336c41[_0x7936ac(0x43f)],_0x336c41[_0x7936ac(0x208)],_0x336c41[_0x7936ac(0x428)],_0x336c41[_0x7936ac(0x241)],_0x336c41[_0x7936ac(0x34d)]||'daily',_0x336c41[_0x7936ac(0x410)]||null,_0x336c41[_0x7936ac(0x2e4)+'d']]),_0x320c1d=_0x20a5f9?.[_0x7936ac(0x2da)]||null;return info(_0x7936ac(0x413)+_0x7936ac(0x37b)+_0x7936ac(0x3f5)+_0x320c1d+_0x7936ac(0x42e)+_0x336c41[_0x7936ac(0x43f)]+_0x7936ac(0x3a7)+(_0x336c41['time']||_0x336c41['send_at'])),_0x320c1d;}catch(_0x288f3e){return warn(_0x7936ac(0x413)+_0x7936ac(0x1f6)+'ow\x20error:\x20'+(_0x288f3e?.[_0x7936ac(0x208)]||_0x288f3e)),null;}}async function listSchedulesForChat(_0x2ad0e4){const _0x2f1037=_0x25fc45;try{const _0x38f9b7=await db[_0x2f1037(0x1b4)](_0x2f1037(0x253)+'ROM\x20schedu'+_0x2f1037(0x2ef)+_0x2f1037(0x36a)+_0x2f1037(0x3e9)+'Y\x20id\x20ASC',[_0x2ad0e4]);return _0x38f9b7||[];}catch(_0x122d9d){return warn(_0x2f1037(0x358)+_0x2f1037(0x273)+_0x2f1037(0x255)+'rror:\x20'+(_0x122d9d?.[_0x2f1037(0x208)]||_0x122d9d)),[];}}async function removeScheduleByDBId(_0x5d9513){const _0x1711b6=_0x25fc45;try{const _0x593fc3=await db[_0x1711b6(0x36b)]('DELETE\x20FRO'+_0x1711b6(0x45e)+_0x1711b6(0x203)+'\x20=\x20?',[_0x5d9513]);return _0x593fc3?.[_0x1711b6(0x3f9)]?!![]:![];}catch(_0x2c5e9f){return warn(_0x1711b6(0x270)+_0x1711b6(0x1db)+_0x1711b6(0x2fd)+'rror:\x20'+(_0x2c5e9f?.[_0x1711b6(0x208)]||_0x2c5e9f)),![];}}async function removeAllSchedulesForChat(_0x566563){const _0x583568=_0x25fc45;try{const _0xe743ff=await db[_0x583568(0x36b)]('DELETE\x20FRO'+'M\x20schedule'+_0x583568(0x353)+_0x583568(0x449),[_0x566563]);return _0xe743ff?.[_0x583568(0x3f9)]||0x12c9+-0x7*-0x57d+0xe*-0x416;}catch(_0x2d21e8){return warn('[sched]\x20re'+_0x583568(0x1f8)+'edulesForC'+_0x583568(0x289)+'\x20'+(_0x2d21e8?.[_0x583568(0x208)]||_0x2d21e8)),0x1b3f+0x6*-0x60d+0x305*0x3;}}async function updateScheduleFields(_0x2f6711,_0x56e93e={}){const _0x456ab3=_0x25fc45;try{const _0x4f8082=[],_0x14ab1d=[];for(const _0x32299c of Object[_0x456ab3(0x3e7)](_0x56e93e)){_0x4f8082[_0x456ab3(0x385)](_0x32299c+_0x456ab3(0x331)),_0x14ab1d['push'](_0x56e93e[_0x32299c]);}if(!_0x4f8082['length'])return![];_0x14ab1d[_0x456ab3(0x385)](_0x2f6711);const _0x8185f7='UPDATE\x20sch'+_0x456ab3(0x323)+'\x20'+_0x4f8082['join'](',\x20')+(_0x456ab3(0x399)+_0x456ab3(0x3ed)),_0x3aca66=await db[_0x456ab3(0x36b)](_0x8185f7,_0x14ab1d);return _0x3aca66?.[_0x456ab3(0x3f9)]?!![]:![];}catch(_0x494dfb){return warn('[sched]\x20up'+_0x456ab3(0x1bf)+_0x456ab3(0x1b7)+_0x456ab3(0x321)+(_0x494dfb?.[_0x456ab3(0x208)]||_0x494dfb)),![];}}async function getChatTimezone(_0x1c1713){const _0x397436=_0x25fc45;try{const _0x530d3e=await db[_0x397436(0x343)]('SELECT\x20tim'+'ezone\x20FROM'+'\x20scheduler'+_0x397436(0x24c)+_0x397436(0x429)+_0x397436(0x44e),[_0x1c1713]);return _0x530d3e?.[_0x397436(0x410)]||null;}catch(_0x52937d){return warn(_0x397436(0x3ab)+_0x397436(0x377)+_0x397436(0x3ce)+'\x20'+(_0x52937d?.[_0x397436(0x208)]||_0x52937d)),null;}}async function setChatTimezone(_0xee9e89,_0x8aa3d){const _0x4996c6=_0x25fc45;try{return await db[_0x4996c6(0x36b)](_0x4996c6(0x397)+_0x4996c6(0x1ba)+_0x4996c6(0x371)+_0x4996c6(0x3bd)+',\x20timezone'+')\x20VALUES\x20('+'?,\x20?)\x20ON\x20C'+_0x4996c6(0x328)+_0x4996c6(0x291)+_0x4996c6(0x35b)+_0x4996c6(0x46d)+_0x4996c6(0x22d)+_0x4996c6(0x410),[_0xee9e89,_0x8aa3d]),!![];}catch(_0x2bfcca){return warn(_0x4996c6(0x190)+_0x4996c6(0x377)+_0x4996c6(0x3ce)+'\x20'+(_0x2bfcca?.[_0x4996c6(0x208)]||_0x2bfcca)),![];}}async function executorTick(){const _0x278807=_0x25fc45;if(executorRunning)return;executorRunning=!![];try{const _0x528382=await db[_0x278807(0x1b4)](_0x278807(0x253)+_0x278807(0x3b0)+_0x278807(0x2ef)+_0x278807(0x2ad)+_0x278807(0x39e)+'\x20id\x20ASC');if(!_0x528382||_0x528382[_0x278807(0x342)]===-0x30a*-0xb+0x37+-0x3bd*0x9)return;for(const _0x59e1fd of _0x528382){try{const _0x519925=_0x59e1fd[_0x278807(0x410)]||await getChatTimezone(_0x59e1fd[_0x278807(0x43f)])||DEFAULT_TIMEZONE,_0x29986f=DateTime[_0x278807(0x3d8)]()[_0x278807(0x457)](_0x519925),_0x5d2af8=Math[_0x278807(0x21f)](_0x29986f['toSeconds']());let _0x3b3278=![],_0x15e088=![];if(_0x59e1fd['send_at']&&Number(_0x59e1fd[_0x278807(0x241)])>-0x1e*-0xd4+-0x2485+0xbad)_0x15e088=!![],Number(_0x59e1fd[_0x278807(0x241)])<=_0x5d2af8&&(_0x3b3278=!![]);else{if(_0x59e1fd[_0x278807(0x428)]){const _0x2a80fd=_0x29986f[_0x278807(0x404)](_0x278807(0x1ef));if(_0x2a80fd===_0x59e1fd[_0x278807(0x428)]){const _0x415192={'id':_0x59e1fd['id'],'frequency':_0x59e1fd[_0x278807(0x34d)]||_0x278807(0x24a),'last_sent':_0x59e1fd[_0x278807(0x379)]||0xc1d+0x239e+-0x2fbb};shouldSendSlot(_0x415192,_0x29986f)&&(_0x3b3278=!![]);}}}if(!_0x3b3278)continue;const _0x3c96ca=await sendScheduledMessage(_0x59e1fd);if(_0x3c96ca['success']){if(_0x15e088){const _0x32ad5a=await removeScheduleByDBId(_0x59e1fd['id']);_0x32ad5a?info(_0x278807(0x3c3)+_0x278807(0x38e)+_0x278807(0x46e)+_0x278807(0x43a)+'='+_0x59e1fd['id']+_0x278807(0x2ff)+_0x59e1fd[_0x278807(0x43f)]):(await updateScheduleFields(_0x59e1fd['id'],{'enabled':0x0,'last_sent':_0x5d2af8}),warn(_0x278807(0x3c3)+'livered\x20on'+'e-off\x20id='+_0x59e1fd['id']+_0x278807(0x2ff)+_0x59e1fd[_0x278807(0x43f)]+(_0x278807(0x437)+_0x278807(0x38b)+_0x278807(0x405)+_0x278807(0x1dc)+_0x278807(0x387))));}else await updateScheduleFields(_0x59e1fd['id'],{'last_sent':_0x5d2af8,'send_attempts':0x0}),info(_0x278807(0x3c3)+_0x278807(0x417)+'curring\x20id'+'='+_0x59e1fd['id']+_0x278807(0x2ff)+_0x59e1fd[_0x278807(0x43f)]+_0x278807(0x346)+_0x59e1fd[_0x278807(0x428)]+'\x20('+_0x519925+')');}else{const _0x310157=(_0x59e1fd[_0x278807(0x360)+'pts']||0x477+0x1d4b+-0x21c2)+(0x194d+0x245*-0x2+-0x14c2);_0x3c96ca['unrecovera'+_0x278807(0x1ff)]||_0x310157>=MAX_DB_ATTEMPTS?(error(_0x278807(0x2d4)+'='+_0x59e1fd['id']+(_0x278807(0x25b)+_0x278807(0x2e0)+'manently\x20('+_0x278807(0x3a3)+_0x278807(0x268)+'or\x20max\x20att'+_0x278807(0x222)+'hed).\x20Disa'+_0x278807(0x2ab)+_0x278807(0x245))),await updateScheduleFields(_0x59e1fd['id'],{'enabled':0x0,'last_attempt':_0x5d2af8})):(warn(_0x278807(0x2d4)+'='+_0x59e1fd['id']+(_0x278807(0x25b)+_0x278807(0x25c)+'empt\x20#')+_0x310157+(_0x278807(0x462)+_0x278807(0x327)+_0x278807(0x32b))),await updateScheduleFields(_0x59e1fd['id'],{'send_attempts':_0x310157,'last_attempt':_0x5d2af8}));}}catch(_0x4ec8ef){warn('[sched]\x20ex'+_0x278807(0x3ae)+'m\x20error\x20fo'+_0x278807(0x213)+_0x59e1fd['id']+':\x20'+(_0x4ec8ef?.[_0x278807(0x208)]||_0x4ec8ef));}}}catch(_0x26d7f9){error(_0x278807(0x2b8)+_0x278807(0x301)+_0x278807(0x3a2)+(_0x26d7f9?.[_0x278807(0x208)]||_0x26d7f9));}finally{executorRunning=![];}}function startSchedulerAligned(){stopScheduler();const _0x1d0e42=0xf007*0x1+0x57d0*0x1+-0x5d77-Date['now']()%(0x1*-0x96fd+0x12958*-0x1+-0x2aab5*-0x1);setTimeout(()=>{const _0x493214=_0x16a7;executorTick()[_0x493214(0x27a)](_0x2595d3=>warn(_0x493214(0x1f0)+_0x493214(0x264)+_0x493214(0x30e)+':\x20'+(_0x2595d3?.[_0x493214(0x208)]||_0x2595d3))),schedulerIntervalHandle=setInterval(()=>{const _0xf0d65b=_0x493214;executorTick()[_0xf0d65b(0x27a)](_0x4190e0=>warn('[sched]\x20ex'+_0xf0d65b(0x301)+_0xf0d65b(0x3a2)+(_0x4190e0?.[_0xf0d65b(0x208)]||_0x4190e0)));},CHECK_INTERVAL_MS),info(_0x493214(0x1a1)+_0x493214(0x34c)+'arted\x20(ali'+_0x493214(0x207)+_0x493214(0x2a6));},_0x1d0e42);}function stopScheduler(){const _0x34215c=_0x25fc45;schedulerIntervalHandle&&(clearInterval(schedulerIntervalHandle),schedulerIntervalHandle=null,info(_0x34215c(0x1a1)+_0x34215c(0x34c)+'opped'));}function extractTextFromMessage(_0x4a920c){const _0x321c65=_0x25fc45;if(!_0x4a920c||!_0x4a920c[_0x321c65(0x208)])return'';const _0x2e456c=_0x4a920c[_0x321c65(0x208)];if(_0x2e456c['conversati'+'on'])return _0x2e456c['conversati'+'on'];if(_0x2e456c[_0x321c65(0x3fb)+_0x321c65(0x374)]?.[_0x321c65(0x1e3)])return _0x2e456c['extendedTe'+_0x321c65(0x374)][_0x321c65(0x1e3)];if(_0x2e456c[_0x321c65(0x31e)+'ge']?.[_0x321c65(0x384)])return _0x2e456c['imageMessa'+'ge'][_0x321c65(0x384)];if(_0x2e456c[_0x321c65(0x407)+'ge']?.['caption'])return _0x2e456c[_0x321c65(0x407)+'ge'][_0x321c65(0x384)];if(_0x2e456c['buttonsRes'+_0x321c65(0x2c2)+'ge']?.[_0x321c65(0x3c8)+_0x321c65(0x287)])return _0x2e456c[_0x321c65(0x45a)+_0x321c65(0x2c2)+'ge']['selectedBu'+_0x321c65(0x287)];if(_0x2e456c[_0x321c65(0x2d2)+_0x321c65(0x40d)]?.[_0x321c65(0x41a)+_0x321c65(0x20f)]?.[_0x321c65(0x293)+_0x321c65(0x28d)])return _0x2e456c[_0x321c65(0x2d2)+_0x321c65(0x40d)][_0x321c65(0x41a)+_0x321c65(0x20f)][_0x321c65(0x293)+_0x321c65(0x28d)];return'';}function splitFirstLinePreserveRest(_0x3823bc){const _0x58ab5b=_0x25fc45,_0x358270=_0x3823bc[_0x58ab5b(0x242)](/\r?\n/),_0xe2b892=_0x358270[_0x58ab5b(0x342)]>0x192*-0xf+0x1ffd*0x1+-0x86f?_0x358270[_0x58ab5b(0x3f4)]():'',_0x2cad74=_0x358270[_0x58ab5b(0x35f)]('\x0a'),_0x101ec0=_0xe2b892[_0x58ab5b(0x332)]()[_0x58ab5b(0x242)](/\s+/)['filter'](Boolean);return{'firstLine':_0xe2b892,'restText':_0x2cad74,'firstTokens':_0x101ec0};}function findGpAndCleanBodyFromRestAndFirst(_0x58debf,_0x5d7d52){const _0x19c884=_0x25fc45,_0x4636b0=(_0x5d7d52&&_0x5d7d52[_0x19c884(0x342)]?_0x5d7d52:'')+'\x0a'+(_0x58debf||''),_0x371052=_0x4636b0[_0x19c884(0x294)](/\bgp[:\s]+(\S+)/i),_0x2df107=_0x371052?_0x371052[0x1afb+0x168e*0x1+-0x8*0x631]['trim']():null;let _0x45c24f=(_0x5d7d52||'')[_0x19c884(0x242)](/\r?\n/);if(!_0x45c24f||_0x45c24f[_0x19c884(0x342)]===0x1e1b*-0x1+-0x2*-0xd2a+0x3c7||_0x45c24f[_0x19c884(0x36c)](_0x5c8b17=>!_0x5c8b17['trim']()))return{'gpValue':_0x2df107,'cleanedBody':''};const _0x26a2a2=_0x45c24f[_0x19c884(0x3fc)](_0x23b561=>_0x23b561[_0x19c884(0x3fd)](/^\s*gp[:\s]+\S+\s*$/i,'')[_0x19c884(0x3fd)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x19c884(0x426)]())['filter'](_0x3ee849=>_0x3ee849[_0x19c884(0x342)]>-0x1f1e+0x4*-0x4b3+0x18f5*0x2),_0x19527a=_0x26a2a2[_0x19c884(0x35f)]('\x0a')['trim']();return{'gpValue':_0x2df107,'cleanedBody':_0x19527a};}function extractInlineAfterToken(_0x6a02a8,_0x51a266){const _0x229e3e=_0x25fc45;if(!_0x6a02a8||!_0x51a266)return'';try{const _0x2bcfd6=new RegExp('\x5cb'+_0x51a266[_0x229e3e(0x3fd)](/[.*+?^${}()|[\]\\]/g,'\x5c$&')+'\x5cb'),_0xcbeb4f=_0x6a02a8[_0x229e3e(0x294)](_0x2bcfd6);if(!_0xcbeb4f)return'';const _0x1a14ed=_0x6a02a8[_0x229e3e(0x28b)](_0xcbeb4f[-0x17fd+-0x14d9*0x1+-0x6*-0x779]),_0x1bcebe=_0x1a14ed+_0xcbeb4f[-0x23*-0x9b+-0x1*-0x1edc+-0x340d]['length'];let _0x7eeb05=_0x6a02a8[_0x229e3e(0x458)](_0x1bcebe)[_0x229e3e(0x3fd)](/^\s+/,'');return _0x7eeb05=_0x7eeb05[_0x229e3e(0x3fd)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x229e3e(0x332)](),_0x7eeb05;}catch(_0xf169f4){return'';}}const USAGE=_0x25fc45(0x2c0)+'lp\x20Command'+_0x25fc45(0x24f)+_0x25fc45(0x3df)+'HH:mm\x20|\x20YY'+'YY-MM-DDTH'+_0x25fc45(0x1fa)+_0x25fc45(0x1a7)+'ys/minutes'+_0x25fc45(0x2be)+_0x25fc45(0x2a2)+_0x25fc45(0x398)+_0x25fc45(0x3c4)+_0x25fc45(0x262)+_0x25fc45(0x2f8)+_0x25fc45(0x25f)+'original\x20n'+_0x25fc45(0x3e0)+'eserved.\x0a\x0a'+_0x25fc45(0x18e)+_0x25fc45(0x408)+_0x25fc45(0x288)+_0x25fc45(0x2dc)+_0x25fc45(0x19b)+_0x25fc45(0x456)+_0x25fc45(0x206)+_0x25fc45(0x296)+'\x20is\x20provid'+_0x25fc45(0x3a5)+'les\x20for\x20to'+_0x25fc45(0x25d)+_0x25fc45(0x3ca)+_0x25fc45(0x3de)+'*sched\x20lis'+_0x25fc45(0x1b0)+_0x25fc45(0x2df)+_0x25fc45(0x380)+'es.\x0a\x0a>\x20*sc'+_0x25fc45(0x31a)+'*\x20`<number'+_0x25fc45(0x438)+_0x25fc45(0x236)+_0x25fc45(0x21e)+_0x25fc45(0x2f0)+'e\x20or\x20multi'+_0x25fc45(0x36d)+'led\x20entrie'+'s.\x0a\x0a>\x20*sch'+_0x25fc45(0x285)+'<number>`\x20'+_0x25fc45(0x45c)+'in\x20N\x20hours'+_0x25fc45(0x297)+_0x25fc45(0x258)+_0x25fc45(0x30c)+_0x25fc45(0x2f5)+_0x25fc45(0x1c9)+_0x25fc45(0x1ee)+_0x25fc45(0x210)+'hed\x20freque'+'ncy*\x20`<num'+_0x25fc45(0x1cb)+_0x25fc45(0x3bc)+_0x25fc45(0x215)+_0x25fc45(0x26a)+_0x25fc45(0x2fa)+_0x25fc45(0x23e)+_0x25fc45(0x26d)+_0x25fc45(0x238)+_0x25fc45(0x38d)+_0x25fc45(0x23b)+_0x25fc45(0x2cd)+_0x25fc45(0x1ce)+'able\x20a\x20sch'+_0x25fc45(0x235)+'sage.\x0a\x0a>\x20*'+_0x25fc45(0x36f)+_0x25fc45(0x2db)+_0x25fc45(0x228)+_0x25fc45(0x1b2)+'reviously\x20'+'disabled\x20m'+_0x25fc45(0x434),processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(0x66*0x2f+-0x8*0x29c+0x23a)*(0x110d+0x1*-0xb73+0x1*-0x1b2);function markCmdProcessed(_0x55306c){const _0xe4fbe=_0x25fc45;if(!_0x55306c)return;if(processedCmdKeys['has'](_0x55306c))try{clearTimeout(processedCmdKeys[_0xe4fbe(0x343)](_0x55306c));}catch(_0x15e318){}const _0x985a9e=setTimeout(()=>processedCmdKeys['delete'](_0x55306c),CMD_DEDUPE_TTL_MS);processedCmdKeys['set'](_0x55306c,_0x985a9e);}function isCmdProcessed(_0x17c3dc){return _0x17c3dc&&processedCmdKeys['has'](_0x17c3dc);}async function resolveDefaultChatJidsForUser(_0x206cd4){const _0x525df7=_0x25fc45;try{const _0x9d3003=await getDefault(_0x206cd4)[_0x525df7(0x27a)](()=>null);if(!_0x9d3003||Array['isArray'](_0x9d3003)&&_0x9d3003[_0x525df7(0x342)]===0x172+0x5*0xd6+-0x14*0x48)return[];const _0x2972f5=Array[_0x525df7(0x18c)](_0x9d3003)?_0x9d3003:[_0x9d3003],_0x34363f=[];for(const _0x3817c0 of _0x2972f5){try{const _0x1dbf49=await getConnection(_0x3817c0)[_0x525df7(0x27a)](()=>null);if(Array[_0x525df7(0x18c)](_0x1dbf49))_0x34363f[_0x525df7(0x385)](..._0x1dbf49);else{if(_0x1dbf49)_0x34363f[_0x525df7(0x385)](String(_0x1dbf49));}}catch(_0x232a5c){warn(_0x525df7(0x270)+_0x525df7(0x2ac)+_0x525df7(0x2d1)+_0x3817c0+'\x20failed:\x20'+(_0x232a5c?.[_0x525df7(0x208)]||_0x232a5c));}}return uniqArray(_0x34363f);}catch(_0x391b09){return warn(_0x525df7(0x270)+_0x525df7(0x2cb)+_0x525df7(0x275)+_0x525df7(0x19f)+'ror:\x20'+(_0x391b09?.['message']||_0x391b09)),[];}}async function getCombinedSchedulesForChats(_0x27e7fd){const _0x35e233=_0x25fc45,_0x5d24cc=[];for(const _0x410d5a of _0x27e7fd){const _0x225425=await listSchedulesForChat(_0x410d5a);for(const _0x43c605 of _0x225425){_0x5d24cc[_0x35e233(0x385)](Object[_0x35e233(0x2a9)]({},_0x43c605,{'chat_jid':_0x410d5a}));}}return _0x5d24cc;}async function resolveNumberToDbId(_0x3285f6,_0x4424a2){const _0x299dcf=_0x25fc45;if(!_0x3285f6||!Number[_0x299dcf(0x267)](_0x3285f6)||_0x3285f6<-0x2389*-0x1+0x1*-0x343+-0x2ef*0xb)return null;const _0x1edfef=await getCombinedSchedulesForChats(_0x4424a2);if(!_0x1edfef||_0x1edfef[_0x299dcf(0x342)]<_0x3285f6)return null;return _0x1edfef[_0x3285f6-(0x208c+0x4ff+-0x5*0x782)]['id'];}async function findStoredMatchFromFindings(_0x202146=[]){const _0x1ad4d9=_0x25fc45;try{const _0x1caf5b=await listSudo();if(!Array['isArray'](_0x1caf5b)||_0x1caf5b['length']===-0x5*0x17+0x1879+-0x1806)return null;const _0x5cb2ca=new Set(_0x1caf5b['map'](String));for(const _0x217c17 of _0x202146||[]){if(!_0x217c17||typeof _0x217c17[_0x1ad4d9(0x234)]!==_0x1ad4d9(0x2c5))continue;const _0x27ab9c=normalizeToJid(_0x217c17['jid']);if(_0x27ab9c&&_0x5cb2ca[_0x1ad4d9(0x1b8)](_0x27ab9c))return _0x27ab9c;if(_0x5cb2ca[_0x1ad4d9(0x1b8)](_0x217c17[_0x1ad4d9(0x234)]))return _0x217c17[_0x1ad4d9(0x234)];const _0x1870d0=String(_0x217c17['jid'])[_0x1ad4d9(0x242)]('@')[0xb2f+0x151f+-0x1027*0x2][_0x1ad4d9(0x242)](':')[0xfd0+0x1d20+-0x2cf0];if(_0x1870d0)for(const _0x169b08 of _0x1caf5b){const _0x3b0157=String(_0x169b08)[_0x1ad4d9(0x242)]('@')[0x228b+-0x12f3+-0xf98];if(_0x3b0157&&_0x3b0157===_0x1870d0)return _0x169b08;}}return null;}catch(_0xb258d7){return warn(_0x1ad4d9(0x31b)+_0x1ad4d9(0x3b2)+_0x1ad4d9(0x445)+_0x1ad4d9(0x271)+_0x1ad4d9(0x363)+(_0xb258d7?.['message']||_0xb258d7)),null;}}export async function onMessage(_0x5ce76c){const _0x353afd=_0x25fc45;try{if(!_0x5ce76c||!_0x5ce76c[_0x353afd(0x191)]||!_0x5ce76c['message'])return;const _0x160256=String(_0x5ce76c[_0x353afd(0x191)][_0x353afd(0x27f)]||'')+'::'+String(_0x5ce76c[_0x353afd(0x191)]['id']||_0x5ce76c['key']['participan'+'t']||'');if(isCmdProcessed(_0x160256))return;markCmdProcessed(_0x160256);if(!_0x5ce76c[_0x353afd(0x2e2)])return;const _0x44d583=typeof _0x5ce76c[_0x353afd(0x1e3)]===_0x353afd(0x2c5)&&_0x5ce76c['text'][_0x353afd(0x332)]()[_0x353afd(0x342)]?_0x5ce76c[_0x353afd(0x1e3)]:extractTextFromMessage(_0x5ce76c)||'';if(!_0x44d583)return;const _0x25fa68=_0x5ce76c[_0x353afd(0x191)][_0x353afd(0x27f)],_0x51c24c=typeof _0x25fa68===_0x353afd(0x2c5)&&_0x25fa68['endsWith'](_0x353afd(0x2ea));if(_0x51c24c){let _0x5884b1=![];try{_0x5884b1=await isadmin(botRef,_0x5ce76c);}catch(_0x5a0081){warn(_0x353afd(0x364)+_0x353afd(0x467)+_0x353afd(0x340)),_0x5884b1=![];}if(!_0x5884b1)return;const _0x30c5ce=String(_0x44d583)[_0x353afd(0x332)](),{firstLine:_0x5c55eb,restText:_0x34d9ee,firstTokens:_0x38a525}=splitFirstLinePreserveRest(_0x30c5ce),_0x4845c9=(_0x38a525[-0x1ea3+0x1*0x2005+-0xb1*0x2]||'')['toLowerCas'+'e']();if(!commands[_0x353afd(0x295)](_0x4845c9))return;const _0x18b95e=(_0x38a525[-0x97f*-0x1+-0x22dc+0x195e]||'')[_0x353afd(0x25e)+'e'](),_0x3d8b45=_0x5ce76c[_0x353afd(0x191)][_0x353afd(0x1bc)+'t']||_0x5ce76c[_0x353afd(0x191)][_0x353afd(0x20a)]||_0x5ce76c['key'][_0x353afd(0x27f)]||'',_0x30223f=(_0x3d8b45||'')[_0x353afd(0x242)]('@')[-0x92f+-0x4*0x97d+0xb*0x449],_0x1a6582=await resolveDefaultChatJidsForUser(_0x30223f),_0x3ee577=_0x25fa68;if(!_0x1a6582||_0x1a6582[_0x353afd(0x342)]===-0x1*0x18d1+-0x2*-0xc1+0x174f){await sendWithRetry(_0x3ee577,{'text':_0x353afd(0x272)+'resolve\x20yo'+'ur\x20default'+_0x353afd(0x42d)+'n(s).\x20Set\x20'+_0x353afd(0x431)+_0x353afd(0x231)+_0x353afd(0x2b6)});return;}await handleSchedCommandGroup(_0x5ce76c,{'firstLine':_0x5c55eb,'restText':_0x34d9ee,'firstTokens':_0x38a525,'sub':_0x18b95e,'defaultChatJids':_0x1a6582,'confirmationTarget':_0x3ee577,'senderJid':_0x3d8b45});return;}const _0x461562=Boolean(_0x5ce76c[_0x353afd(0x191)]['fromMe']);let _0x55f64a=null;if(_0x461562){const _0x1d42f2=getBotJid();if(!_0x1d42f2){warn(_0x353afd(0x430)+_0x353afd(0x322)+_0x353afd(0x463)+_0x353afd(0x2b7)+_0x353afd(0x24e)+_0x353afd(0x1cc));return;}_0x55f64a=_0x1d42f2;}else{let _0x45ce91=![];try{_0x45ce91=await isSudo(botRef,_0x5ce76c);}catch(_0x15f031){_0x45ce91=![];}if(!_0x45ce91)return;const _0x36d75a=userJidFromCtx(_0x5ce76c)||{'findings':[]},_0x110059=await findStoredMatchFromFindings(_0x36d75a[_0x353afd(0x3ea)]||[]);if(!_0x110059)return;_0x55f64a=_0x110059;}const _0xdbe73=String(_0x44d583),{firstLine:_0x5ccd5e,restText:_0x3eb769,firstTokens:_0x388e8a}=splitFirstLinePreserveRest(_0xdbe73),_0x114c62=(_0x388e8a[0x1*-0x243+0x21ab+-0x1f68]||'')[_0x353afd(0x25e)+'e']();if(!commands[_0x353afd(0x295)](_0x114c62))return;const _0x4e6769=(_0x388e8a[-0xd33+-0x7d7*-0x3+0x1*-0xa51]||'')[_0x353afd(0x25e)+'e']();if(!_0x4e6769||_0x4e6769==='help'){await sendWithRetry(_0x55f64a,{'text':USAGE});return;}const _0x17a82c=[_0x353afd(0x339),_0x353afd(0x221),_0x353afd(0x2ba),_0x353afd(0x33d),_0x353afd(0x20d),_0x353afd(0x34d),_0x353afd(0x309),_0x353afd(0x44c)],{gpValue:_0x2c0040,cleanedBody:_0x3a609d}=findGpAndCleanBodyFromRestAndFirst(_0x5ccd5e,_0x3eb769);if(_0x17a82c['includes'](_0x4e6769)&&!_0x2c0040){await sendWithRetry(_0x55f64a,{'text':_0x353afd(0x266)+_0x353afd(0x315)+_0x353afd(0x450)+_0x353afd(0x2d6)+'ine\x20when\x20m'+_0x353afd(0x217)+_0x353afd(0x214)+_0x353afd(0x211)+_0x353afd(0x3ee)+_0x353afd(0x1ab)+_0x353afd(0x401)+_0x353afd(0x2a5)+'alias'});return;}let _0x58aa1f=[];if(_0x2c0040){const _0x4f9a6a=_0x2c0040[_0x353afd(0x332)]();if(_0x4f9a6a[_0x353afd(0x25e)+'e']()===_0x353afd(0x1b4))_0x58aa1f=await _0x56b54d[_0x353afd(0x2bd)+_0x353afd(0x39d)]();else{const _0x26182a=await _0x56b54d[_0x353afd(0x423)+'e'](_0x4f9a6a);if(_0x26182a)_0x58aa1f=[_0x26182a];else{if(_0x4f9a6a[_0x353afd(0x295)]('@'))_0x58aa1f=[_0x56b54d[_0x353afd(0x3c0)+_0x353afd(0x3b3)](_0x4f9a6a)];}}if(_0x17a82c[_0x353afd(0x295)](_0x4e6769)&&(!_0x58aa1f||_0x58aa1f[_0x353afd(0x342)]===-0x295*0xb+0x219*0x3+0x161c)){await sendWithRetry(_0x55f64a,{'text':_0x353afd(0x272)+_0x353afd(0x44d)+_0x353afd(0x28e)+_0x2c0040+(_0x353afd(0x281)+'alias,\x20gp:'+_0x353afd(0x40a)+'roup\x20JID.')});return;}}await handleSchedCommandPM(_0x5ce76c,{'sub':_0x4e6769,'firstLine':_0x5ccd5e,'restText':_0x3eb769,'firstTokens':_0x388e8a,'targetChatJids':_0x58aa1f,'confirmationTarget':_0x55f64a,'senderJid':_0x5ce76c['key'][_0x353afd(0x1bc)+'t']||_0x5ce76c[_0x353afd(0x191)][_0x353afd(0x20a)]||'','cleanedBody':_0x3a609d});return;}catch(_0x275ab6){error('[sched]\x20on'+_0x353afd(0x1fb)+_0x353afd(0x421)+(_0x275ab6?.[_0x353afd(0x208)]||_0x275ab6));}}async function handleSchedCommandGroup(_0xbada60,{firstLine:_0x5da692,restText:_0x580ac4,firstTokens:_0x1cbb74,sub:_0x4a23dc,defaultChatJids:_0x57d075,confirmationTarget:_0x25f231,senderJid:_0x2cd3ad}){const _0x5ec42c=_0x25fc45;try{if(!_0x4a23dc||_0x4a23dc===_0x5ec42c(0x40b)){await sendWithRetry(_0x25f231,{'text':USAGE});return;}if(_0x4a23dc==='once'){const _0x49cd06=_0x1cbb74[0xd62+0x269c*-0x1+-0xa*-0x286],_0x324cb5=_0x1cbb74[0x177f+-0x7d2*0x1+-0xfaa]&&/^\d+$/[_0x5ec42c(0x3d0)](_0x1cbb74[-0x1*0xa97+0x1*-0x12fa+0x1d94])?Number(_0x1cbb74[-0x188d+0xb7b*0x1+0xd15]):null;let _0x175a3f='';if(_0x49cd06){const _0x42b943=new RegExp('\x5cb'+_0x49cd06[_0x5ec42c(0x3fd)](/[.*+?^${}()|[\]\\]/g,'\x5c$&')+'\x5cb'),_0x11f61a=_0x5da692['match'](_0x42b943);if(_0x11f61a){const _0x25a825=_0x5da692['indexOf'](_0x11f61a[0xb27*0x1+-0x7*0x3f6+0x1093]),_0x19cc68=_0x25a825+_0x11f61a[-0xa80+0x41c*-0x6+0x2328][_0x5ec42c(0x342)];_0x175a3f=_0x5da692['slice'](_0x19cc68)['replace'](/^\s*/,'');if(_0x175a3f&&/^\d+/[_0x5ec42c(0x3d0)](_0x175a3f))_0x175a3f=_0x175a3f[_0x5ec42c(0x3fd)](/^\d+\s*/,'');}}const _0x1b2bc4=_0x175a3f&&_0x580ac4?_0x175a3f+'\x0a'+_0x580ac4:_0x175a3f||_0x580ac4||'';if(!_0x49cd06||!_0x1b2bc4||_0x1b2bc4[_0x5ec42c(0x332)]()[_0x5ec42c(0x342)]===0x3*-0xcd1+0x25da+0x99){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x302)+_0x5ec42c(0x37f)+_0x5ec42c(0x279)+_0x5ec42c(0x239)+'ge...>'});return;}const _0x3534b9=[];for(const _0x57cad8 of _0x57d075){const _0x526639=await getChatTimezone(_0x57cad8)||DEFAULT_TIMEZONE,_0x44e380=parseTimeToken(_0x49cd06,_0x526639);if(!_0x44e380){_0x3534b9[_0x5ec42c(0x385)]({'chat':_0x57cad8,'ok':![],'reason':'parse_fail'+'ed'});continue;}if(_0x44e380[_0x5ec42c(0x393)]===_0x5ec42c(0x441)){const _0x2863d4=_0x44e380['dt'],_0x210baf=Math['floor'](_0x2863d4[_0x5ec42c(0x455)]()/(0x2*-0x9d6+-0x1cd5+-0x1*-0x3469)),_0x405494=await addScheduleRow({'chat_jid':_0x57cad8,'message':_0x1b2bc4,'time':null,'send_at':_0x210baf,'frequency':_0x5ec42c(0x339),'timezone':_0x2863d4['zoneName']||_0x526639,'creator_jid':_0x2cd3ad});if(_0x405494)_0x3534b9[_0x5ec42c(0x385)]({'chat':_0x57cad8,'ok':!![],'id':_0x405494,'when':_0x2863d4['toLocaleSt'+_0x5ec42c(0x30f)](DateTime[_0x5ec42c(0x1a0)+'ED'])});else _0x3534b9['push']({'chat':_0x57cad8,'ok':![],'reason':_0x5ec42c(0x2e3)});continue;}if(_0x44e380[_0x5ec42c(0x393)]==='hhmm'){const [_0x15e34a,_0x300b36]=_0x44e380[_0x5ec42c(0x3e6)]['split'](':')['map'](Number);let _0x723bdc=DateTime['now']()[_0x5ec42c(0x457)](_0x526639),_0x17b18a=_0x723bdc[_0x5ec42c(0x24b)](_0x5ec42c(0x261))[_0x5ec42c(0x1ae)]({'hour':_0x15e34a,'minute':_0x300b36,'second':0x0,'millisecond':0x0});if(_0x324cb5&&Number[_0x5ec42c(0x267)](_0x324cb5)&&_0x324cb5>=-0x6*-0x95+-0x1*-0x14cf+-0x2*0xc26)_0x17b18a=_0x17b18a[_0x5ec42c(0x1fe)]({'days':Number(_0x324cb5)});else{if(_0x17b18a<=_0x723bdc)_0x17b18a=_0x17b18a[_0x5ec42c(0x1fe)]({'days':0x1});}const _0x353542=Math[_0x5ec42c(0x21f)](_0x17b18a[_0x5ec42c(0x455)]()/(0x7*-0x1c9+-0x165b*-0x1+-0x2*0x2fa)),_0x46b83b=await addScheduleRow({'chat_jid':_0x57cad8,'message':_0x1b2bc4,'time':null,'send_at':_0x353542,'frequency':'once','timezone':_0x526639,'creator_jid':_0x2cd3ad});if(_0x46b83b)_0x3534b9['push']({'chat':_0x57cad8,'ok':!![],'id':_0x46b83b,'when':_0x17b18a['toLocaleSt'+'ring'](DateTime[_0x5ec42c(0x1a0)+'ED'])});else _0x3534b9[_0x5ec42c(0x385)]({'chat':_0x57cad8,'ok':![],'reason':_0x5ec42c(0x2e3)});continue;}_0x3534b9[_0x5ec42c(0x385)]({'chat':_0x57cad8,'ok':![],'reason':_0x5ec42c(0x359)+_0x5ec42c(0x311)});}const _0x1364da=_0x3534b9[_0x5ec42c(0x347)](_0x138160=>_0x138160['ok']),_0x35a6a5=_0x3534b9['filter'](_0x3a361a=>!_0x3a361a['ok']);let _0x14f2e3='';if(_0x1364da[_0x5ec42c(0x342)]){_0x14f2e3+=_0x5ec42c(0x212)+_0x5ec42c(0x3f7)+'r\x20'+_0x1364da[_0x5ec42c(0x342)]+(_0x5ec42c(0x20b)+_0x5ec42c(0x317)+_0x5ec42c(0x1f1));for(const _0xd64fb9 of _0x1364da)_0x14f2e3+='•\x20'+_0xd64fb9[_0x5ec42c(0x348)]+_0x5ec42c(0x2c1)+_0xd64fb9['id']+_0x5ec42c(0x346)+_0xd64fb9['when']+'\x0a';}if(_0x35a6a5[_0x5ec42c(0x342)]){_0x14f2e3+='Failed\x20for'+'\x20'+_0x35a6a5[_0x5ec42c(0x342)]+(_0x5ec42c(0x20b)+_0x5ec42c(0x317)+_0x5ec42c(0x1f1));for(const _0x59883f of _0x35a6a5)_0x14f2e3+='•\x20'+_0x59883f[_0x5ec42c(0x348)]+'\x20->\x20'+_0x59883f[_0x5ec42c(0x3be)]+'\x0a';}await sendWithRetry(_0x25f231,{'text':_0x14f2e3['trim']()||_0x5ec42c(0x30d)+_0x5ec42c(0x290)+'.'});return;}if(_0x4a23dc===_0x5ec42c(0x221)){if(!_0x1cbb74[-0x87f+0x1432+0x29*-0x49]){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x302)+'ed\x20add\x20<HH'+_0x5ec42c(0x209)+_0x5ec42c(0x2c4)+_0x5ec42c(0x381)+_0x5ec42c(0x18f)+_0x5ec42c(0x31f)+'sage...>'});return;}const _0xd22f5d=_0x1cbb74[0x227e+-0xa0b*0x3+0x45b*-0x1],_0x1ea0f2=_0x1cbb74[-0x70b+-0x4*-0x267+-0x28e]&&/^\d+$/[_0x5ec42c(0x3d0)](_0x1cbb74[0x1ed8+-0xeeb+-0x6*0x2a7])?Number(_0x1cbb74[0x168e+0x1ab1+-0x313c]):null;let _0x5a029f='';const _0x8fa072=new RegExp('\x5cb'+_0xd22f5d[_0x5ec42c(0x3fd)](/[.*+?^${}()|[\]\\]/g,_0x5ec42c(0x2ed))+'\x5cb'),_0x400143=_0x5da692[_0x5ec42c(0x294)](_0x8fa072);if(_0x400143){const _0x389095=_0x5da692[_0x5ec42c(0x28b)](_0x400143[-0x2000*-0x1+-0x1*-0x26e1+-0x46e1*0x1]),_0x24463e=_0x389095+_0x400143[0x1*0x13+0x1*-0x152b+0x258*0x9][_0x5ec42c(0x342)];_0x5a029f=_0x5da692[_0x5ec42c(0x458)](_0x24463e)[_0x5ec42c(0x3fd)](/^\s*/,'');if(_0x5a029f&&/^\d+/['test'](_0x5a029f))_0x5a029f=_0x5a029f[_0x5ec42c(0x3fd)](/^\d+\s*/,'');}const _0x6d367c=_0x5a029f&&_0x580ac4?_0x5a029f+'\x0a'+_0x580ac4:_0x5a029f||_0x580ac4||'';if(!_0x6d367c||_0x6d367c['trim']()[_0x5ec42c(0x342)]===-0x1c2c+-0x7a*-0x44+-0x43c*0x1){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x419)+_0x5ec42c(0x2aa)+_0x5ec42c(0x18d)+_0x5ec42c(0x3a0)+'fter\x20time\x20'+_0x5ec42c(0x304)+_0x5ec42c(0x226)+'s).'});return;}const _0x49249c=[];for(const _0x501820 of _0x57d075){const _0x17a9cf=await getChatTimezone(_0x501820)||DEFAULT_TIMEZONE,_0xc90f5b=parseTimeToken(_0xd22f5d,_0x17a9cf);if(!_0xc90f5b){_0x49249c[_0x5ec42c(0x385)]({'chat':_0x501820,'ok':![],'reason':_0x5ec42c(0x3dc)+'ed'});continue;}const _0x2a514b=_0x2cd3ad;if(_0xc90f5b[_0x5ec42c(0x393)]==='datetime'){const _0x32fffd=_0xc90f5b['dt'],_0x6ef87f=Math[_0x5ec42c(0x21f)](_0x32fffd[_0x5ec42c(0x455)]()/(0x1cf*-0x4+-0x247b+0x2f9f)),_0x5b0b7f=await addScheduleRow({'chat_jid':_0x501820,'message':_0x6d367c,'time':null,'send_at':_0x6ef87f,'frequency':_0x5ec42c(0x339),'timezone':_0x32fffd[_0x5ec42c(0x3ac)]||_0x17a9cf,'creator_jid':_0x2a514b});if(_0x5b0b7f)_0x49249c[_0x5ec42c(0x385)]({'chat':_0x501820,'ok':!![],'id':_0x5b0b7f,'when':_0x32fffd[_0x5ec42c(0x416)+_0x5ec42c(0x30f)](DateTime[_0x5ec42c(0x1a0)+'ED'])});else _0x49249c[_0x5ec42c(0x385)]({'chat':_0x501820,'ok':![],'reason':_0x5ec42c(0x2e3)});continue;}if(_0xc90f5b['type']===_0x5ec42c(0x3e6)){const _0x472668=_0xc90f5b[_0x5ec42c(0x3e6)];if(_0x1ea0f2&&Number[_0x5ec42c(0x267)](_0x1ea0f2)&&_0x1ea0f2>=-0x174f+-0x16e+0x18be){let _0x38e0cb=DateTime[_0x5ec42c(0x3d8)]()[_0x5ec42c(0x457)](_0x17a9cf);const [_0x30721b,_0x3ef752]=_0x472668[_0x5ec42c(0x242)](':')['map'](Number);let _0x508bfc=_0x38e0cb['startOf'](_0x5ec42c(0x261))[_0x5ec42c(0x1ae)]({'hour':_0x30721b,'minute':_0x3ef752,'second':0x0,'millisecond':0x0});_0x508bfc=_0x508bfc[_0x5ec42c(0x1fe)]({'days':Number(_0x1ea0f2)});const _0x74d3d6=Math['floor'](_0x508bfc['toMillis']()/(0x944+0x96+-0x5f2)),_0x160f04=await addScheduleRow({'chat_jid':_0x501820,'message':_0x6d367c,'time':null,'send_at':_0x74d3d6,'frequency':_0x5ec42c(0x339),'timezone':_0x17a9cf,'creator_jid':_0x2a514b});if(_0x160f04)_0x49249c[_0x5ec42c(0x385)]({'chat':_0x501820,'ok':!![],'id':_0x160f04,'when':_0x508bfc[_0x5ec42c(0x416)+_0x5ec42c(0x30f)](DateTime[_0x5ec42c(0x1a0)+'ED'])});else _0x49249c[_0x5ec42c(0x385)]({'chat':_0x501820,'ok':![],'reason':_0x5ec42c(0x2e3)});continue;}const _0x37f0fa=await addScheduleRow({'chat_jid':_0x501820,'message':_0x6d367c,'time':_0x472668,'send_at':null,'frequency':_0x5ec42c(0x24a),'timezone':_0x17a9cf,'creator_jid':_0x2a514b});if(_0x37f0fa)_0x49249c[_0x5ec42c(0x385)]({'chat':_0x501820,'ok':!![],'id':_0x37f0fa,'when':_0x472668+'\x20('+_0x17a9cf+')'});else _0x49249c[_0x5ec42c(0x385)]({'chat':_0x501820,'ok':![],'reason':_0x5ec42c(0x2e3)});continue;}_0x49249c[_0x5ec42c(0x385)]({'chat':_0x501820,'ok':![],'reason':_0x5ec42c(0x359)+_0x5ec42c(0x311)});}const _0x13499d=_0x49249c['filter'](_0x117fc6=>_0x117fc6['ok']),_0x5f5eae=_0x49249c[_0x5ec42c(0x347)](_0x299fbc=>!_0x299fbc['ok']);let _0x411888='';if(_0x13499d[_0x5ec42c(0x342)]){_0x411888+='Scheduled\x20'+'for\x20'+_0x13499d[_0x5ec42c(0x342)]+('\x20default\x20c'+'onnection('+_0x5ec42c(0x1f1));for(const _0x5de6c7 of _0x13499d)_0x411888+='•\x20'+_0x5de6c7['chat']+'\x20->\x20id:'+_0x5de6c7['id']+_0x5ec42c(0x3c9)+_0x5de6c7[_0x5ec42c(0x33c)]+'\x0a';}if(_0x5f5eae['length']){_0x411888+=_0x5ec42c(0x1eb)+'\x20'+_0x5f5eae[_0x5ec42c(0x342)]+(_0x5ec42c(0x20b)+_0x5ec42c(0x317)+_0x5ec42c(0x1f1));for(const _0x565d13 of _0x5f5eae)_0x411888+='•\x20'+_0x565d13[_0x5ec42c(0x348)]+_0x5ec42c(0x402)+_0x565d13['reason']+'\x0a';}await sendWithRetry(_0x25f231,{'text':_0x411888[_0x5ec42c(0x332)]()||_0x5ec42c(0x30d)+'es\x20created'+'.'});return;}if(_0x4a23dc===_0x5ec42c(0x2ba)){const _0x374c0a=await getCombinedSchedulesForChats(_0x57d075);if(!_0x374c0a[_0x5ec42c(0x342)]){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x30d)+_0x5ec42c(0x1e4)+_0x5ec42c(0x265)+_0x5ec42c(0x3fe)+':\x20'+_0x57d075['join'](',\x20')});return;}const _0x3b79a3=_0x374c0a[_0x5ec42c(0x3fc)]((_0x24aa3b,_0x13ce81)=>{const _0x3bc669=_0x5ec42c,_0x1d4717=_0x24aa3b[_0x3bc669(0x241)]?DateTime[_0x3bc669(0x20e)](Number(_0x24aa3b['send_at'])*(-0x1aa*0x3+0x1*0x1cfd+-0x1417))[_0x3bc669(0x457)](_0x24aa3b[_0x3bc669(0x410)]||DEFAULT_TIMEZONE)['toISO']({'suppressSeconds':!![]}):_0x24aa3b[_0x3bc669(0x428)]?_0x24aa3b[_0x3bc669(0x428)]+'\x20('+(_0x24aa3b['timezone']||_0x3bc669(0x260)+_0x3bc669(0x2cc))+')':'unknown',_0x2c37ac=(_0x24aa3b[_0x3bc669(0x208)]||'')[_0x3bc669(0x242)]('\x0a')['map'](_0x1780b5=>_0x1780b5['trimEnd']())['join']('\x0a');return _0x13ce81+(-0x1704+-0x1dab+-0x34b*-0x10)+_0x3bc669(0x45f)+_0x24aa3b['id']+'\x20chat:'+_0x24aa3b[_0x3bc669(0x43f)]+'\x20when:'+_0x1d4717+'\x20freq:'+(_0x24aa3b[_0x3bc669(0x34d)]||_0x3bc669(0x24a))+_0x3bc669(0x1e0)+(_0x24aa3b[_0x3bc669(0x3b4)]?'yes':'no')+_0x3bc669(0x344)+_0x2c37ac;}),_0xaa496a=_0x5ec42c(0x212)+_0x5ec42c(0x330)+_0x5ec42c(0x274)+_0x57d075[_0x5ec42c(0x35f)](',\x20')+_0x5ec42c(0x19c)+_0x3b79a3[_0x5ec42c(0x35f)]('\x0a\x0a');await sendWithRetry(_0x25f231,{'text':_0xaa496a});return;}if(_0x4a23dc===_0x5ec42c(0x33d)){const _0x2ffaaf=_0x1cbb74[_0x5ec42c(0x458)](0x33d+0x136c+0x16a7*-0x1);let _0x491127=_0x2ffaaf[_0x5ec42c(0x35f)]('\x20');if(!_0x491127&&_0x580ac4)_0x491127=_0x580ac4[_0x5ec42c(0x332)]();if(!_0x491127){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x302)+_0x5ec42c(0x33f)+_0x5ec42c(0x32f)+'mber,numbe'+_0x5ec42c(0x40e)});return;}if(/^\s*all\s*$/i[_0x5ec42c(0x3d0)](_0x491127)){let _0xace648=-0x2d*0x6+0x43*-0x57+0x39*0x6b;for(const _0x333337 of _0x57d075){const _0x3cf3a5=await removeAllSchedulesForChat(_0x333337);_0xace648+=_0x3cf3a5;}await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x396)+_0xace648+(_0x5ec42c(0x23a)+'s)\x20across\x20'+_0x5ec42c(0x219))+_0x57d075[_0x5ec42c(0x35f)](',\x20')});return;}const _0x213559=_0x491127[_0x5ec42c(0x242)](/[\s,]+/)[_0x5ec42c(0x3fc)](_0x47d0aa=>_0x47d0aa[_0x5ec42c(0x332)]())[_0x5ec42c(0x347)](Boolean),_0xfa8543=_0x213559[_0x5ec42c(0x3fc)](_0x19ce9b=>Number(_0x19ce9b))[_0x5ec42c(0x347)](_0x4f3ee5=>!Number[_0x5ec42c(0x1c5)](_0x4f3ee5)&&Number['isInteger'](_0x4f3ee5)&&_0x4f3ee5>-0x1a27+-0x455*-0x1+0x15d2);if(!_0xfa8543[_0x5ec42c(0x342)]){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x2b4)+_0x5ec42c(0x32a)+'vided.\x20Usa'+_0x5ec42c(0x335)+_0x5ec42c(0x2f3)+_0x5ec42c(0x337)+_0x5ec42c(0x39a)+',2,3\x20OR\x20sc'+_0x5ec42c(0x31a)+_0x5ec42c(0x3c5)});return;}const _0x294d7d=[...new Set(_0xfa8543)],_0x3d4ab4=await getCombinedSchedulesForChats(_0x57d075),_0x26867f=[],_0x2eb4f4=[];for(const _0x413283 of _0x294d7d){if(_0x413283<0x11c3+-0x1215+0x53*0x1||_0x413283>_0x3d4ab4[_0x5ec42c(0x342)]){_0x2eb4f4[_0x5ec42c(0x385)]({'n':_0x413283,'reason':_0x5ec42c(0x325)});continue;}const _0x57056c=_0x3d4ab4[_0x413283-(-0x9b*-0x9+-0x2209+0x1c97)]['id'],_0x3d4ace=await removeScheduleByDBId(_0x57056c);if(_0x3d4ace)_0x26867f[_0x5ec42c(0x385)]({'n':_0x413283,'id':_0x57056c});else _0x2eb4f4[_0x5ec42c(0x385)]({'n':_0x413283,'reason':'db\x20delete\x20'+_0x5ec42c(0x251)});}let _0x285f03='';if(_0x26867f[_0x5ec42c(0x342)])_0x285f03+=_0x5ec42c(0x396)+_0x26867f[_0x5ec42c(0x342)]+(_0x5ec42c(0x23a)+_0x5ec42c(0x3c6))+_0x26867f[_0x5ec42c(0x3fc)](_0x4c1801=>_0x4c1801['n']+'(id:'+_0x4c1801['id']+')')[_0x5ec42c(0x35f)](',\x20')+'.\x0a';if(_0x2eb4f4[_0x5ec42c(0x342)])_0x285f03+=_0x5ec42c(0x2a7)+_0x5ec42c(0x3d1)+_0x2eb4f4[_0x5ec42c(0x3fc)](_0x5f1c8e=>_0x5f1c8e['n']+'('+_0x5f1c8e[_0x5ec42c(0x3be)]+')')['join'](',\x20')+'.';await sendWithRetry(_0x25f231,{'text':_0x285f03[_0x5ec42c(0x332)]()||'No\x20changes'+_0x5ec42c(0x324)});return;}if(_0x4a23dc===_0x5ec42c(0x20d)){const _0x422ced=Number(_0x1cbb74[-0x1539*0x1+-0x262b*0x1+0x3b66*0x1]),_0x18fcf7=_0x1cbb74[-0x1ecb*0x1+-0x3*0x945+0x3a9d]||(_0x580ac4?_0x580ac4[_0x5ec42c(0x242)](/\r?\n/)[-0x1*-0x1fff+-0x1856+0x25*-0x35]['trim']():null);if(!_0x422ced||!_0x18fcf7){await sendWithRetry(_0x25f231,{'text':'Usage:\x20sch'+_0x5ec42c(0x3c1)+_0x5ec42c(0x3cf)+':mm|in\x20N\x20h'+_0x5ec42c(0x1a2)+_0x5ec42c(0x2a4)+'m>'});return;}const _0xec03db=await getCombinedSchedulesForChats(_0x57d075);if(!_0xec03db||_0xec03db[_0x5ec42c(0x342)]<_0x422ced){await sendWithRetry(_0x25f231,{'text':'No\x20schedul'+_0x5ec42c(0x3d2)+_0x422ced+(_0x5ec42c(0x3d4)+'oss\x20your\x20d'+_0x5ec42c(0x27b))});return;}const _0x4f174b=_0xec03db[_0x422ced-(-0x2*-0x85e+-0x1c97+-0x16*-0x8a)]['id'];if(!_0x4f174b){await sendWithRetry(_0x25f231,{'text':'No\x20schedul'+_0x5ec42c(0x3d2)+_0x422ced+('\x20found\x20acr'+_0x5ec42c(0x283)+_0x5ec42c(0x27b))});return;}const _0x125153=parseTimeToken(_0x18fcf7,DEFAULT_TIMEZONE);if(!_0x125153){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x2a7)+'parse\x20new\x20'+'time.'});return;}if(_0x125153[_0x5ec42c(0x393)]==='datetime'){const _0x167daf=_0x125153['dt'],_0x283889=Math[_0x5ec42c(0x21f)](_0x167daf[_0x5ec42c(0x455)]()/(0x1ed+0x1a42*0x1+0x71*-0x37)),_0x691ea2=await updateScheduleFields(_0x4f174b,{'send_at':_0x283889,'time':null,'frequency':'once','timezone':_0x167daf[_0x5ec42c(0x3ac)]||DEFAULT_TIMEZONE});if(_0x691ea2)await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x41b)+_0x422ced+('\x20updated\x20t'+'o\x20one-off\x20'+'at\x20')+_0x167daf['toLocaleSt'+_0x5ec42c(0x30f)](DateTime['DATETIME_M'+'ED'])+'\x20('+_0x167daf[_0x5ec42c(0x3ac)]+')'});else await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x2a7)+_0x5ec42c(0x300)+'edule.'});return;}else{if(_0x125153[_0x5ec42c(0x393)]===_0x5ec42c(0x3e6)){const _0x62a58a=_0x125153['hhmm'],_0x178324=_0xec03db[_0x422ced-(0x4*0x49d+-0x1*-0x497+-0x170a)],_0x3d0627=_0x178324[_0x5ec42c(0x410)]||await getChatTimezone(_0x178324[_0x5ec42c(0x43f)])||DEFAULT_TIMEZONE,_0x9d7d78=await updateScheduleFields(_0x4f174b,{'time':_0x62a58a,'send_at':null,'frequency':_0x5ec42c(0x24a),'timezone':_0x3d0627});if(_0x9d7d78)await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x41b)+_0x422ced+(_0x5ec42c(0x1c6)+_0x5ec42c(0x1de)+_0x5ec42c(0x3b1))+_0x62a58a+'\x20('+_0x3d0627+')'});else await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x2a7)+'update\x20sch'+_0x5ec42c(0x254)});return;}else{await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x368)+_0x5ec42c(0x3c7)+_0x5ec42c(0x2f1)+'it.'});return;}}}if(_0x4a23dc===_0x5ec42c(0x34d)){const _0x2f968c=Number(_0x1cbb74[0x882+0x236e+-0x2bee*0x1]),_0x3f4dae=Number(_0x1cbb74[0x169f*-0x1+0x6*0x606+0x7*-0x1ee]);if(!_0x2f968c||!_0x3f4dae||_0x3f4dae<-0x1435+-0x4*-0x2fd+0xe*0x97){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x302)+_0x5ec42c(0x3a1)+'cy\x20<number'+'>\x20<n>\x20\x20(n='+_0x5ec42c(0x192)+_0x5ec42c(0x37c)+_0x5ec42c(0x1cd)+'.)'});return;}const _0x302d02=await getCombinedSchedulesForChats(_0x57d075);if(!_0x302d02||_0x302d02[_0x5ec42c(0x342)]<_0x2f968c){await sendWithRetry(_0x25f231,{'text':'No\x20schedul'+_0x5ec42c(0x3d2)+_0x2f968c+(_0x5ec42c(0x3d4)+_0x5ec42c(0x283)+'efaults.')});return;}const _0x2d9b11=_0x302d02[_0x2f968c-(0x983+-0x1*-0x10cd+0x1c1*-0xf)]['id'];if(!_0x2d9b11){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x30d)+'e\x20#'+_0x2f968c+(_0x5ec42c(0x3d4)+'oss\x20your\x20d'+_0x5ec42c(0x27b))});return;}let _0x51e1f8=_0x5ec42c(0x24a);if(_0x3f4dae===-0x1c57+-0x22a7+0x3eff)_0x51e1f8=_0x5ec42c(0x24a);else _0x51e1f8=_0x5ec42c(0x1f5)+_0x5ec42c(0x2fc)+_0x3f4dae;const _0xd678d9=await updateScheduleFields(_0x2d9b11,{'frequency':_0x51e1f8});if(_0xd678d9)await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x41b)+_0x2f968c+(_0x5ec42c(0x2b3)+_0x5ec42c(0x2c6))+_0x51e1f8});else await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x2a7)+'update\x20fre'+'quency.'});return;}if(_0x4a23dc===_0x5ec42c(0x309)||_0x4a23dc===_0x5ec42c(0x44c)){const _0x4bb26f=Number(_0x1cbb74[-0x1*0x1232+0x1dfb+-0x9*0x14f]);if(!_0x4bb26f){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x302)+'ed\x20'+_0x4a23dc+'\x20<number>'});return;}const _0x594972=await getCombinedSchedulesForChats(_0x57d075);if(!_0x594972||_0x594972[_0x5ec42c(0x342)]<_0x4bb26f){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x30d)+_0x5ec42c(0x3d2)+_0x4bb26f+(_0x5ec42c(0x3d4)+_0x5ec42c(0x283)+'efaults.')});return;}const _0x233d14=_0x594972[_0x4bb26f-(-0x9fc*0x3+0x26fb+-0x906)]['id'];if(!_0x233d14){await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x30d)+_0x5ec42c(0x3d2)+_0x4bb26f+(_0x5ec42c(0x3d4)+_0x5ec42c(0x283)+_0x5ec42c(0x27b))});return;}const _0x2af786=await updateScheduleFields(_0x233d14,{'enabled':_0x4a23dc===_0x5ec42c(0x44c)?0x1d*-0x153+0x1*0x859+-0x357*-0x9:-0x870*0x2+-0x1439+0x2519});if(_0x2af786)await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x41b)+_0x4bb26f+'\x20'+_0x4a23dc+'d.'});else await sendWithRetry(_0x25f231,{'text':_0x5ec42c(0x2a7)+_0x5ec42c(0x243)+_0x5ec42c(0x2ee)+'.'});return;}await sendWithRetry(_0x25f231,{'text':USAGE});}catch(_0x2e4c09){warn(_0x5ec42c(0x22e)+_0x5ec42c(0x1f9)+'ommandGrou'+'p\x20error:\x20'+(_0x2e4c09?.['message']||_0x2e4c09));}}async function handleSchedCommandPM(_0xd88739,{sub:_0x533ed6,firstLine:_0x37d805,restText:_0x5c6a04,firstTokens:_0x30c91b,targetChatJids:_0x32548c,confirmationTarget:_0x1d72a5,senderJid:_0x16379a,cleanedBody:_0x57e7e7}){const _0x12985a=_0x25fc45;try{if(!_0x533ed6||_0x533ed6==='help'){await sendWithRetry(_0x1d72a5,{'text':USAGE});return;}if(_0x533ed6===_0x12985a(0x339)){const _0x1a793c=_0x30c91b[0x1*-0x156d+-0x2420+-0x1*-0x398f],_0x52a8f6=_0x30c91b[0x74c*0x2+-0x1e94+0xfff]&&/^\d+$/[_0x12985a(0x3d0)](_0x30c91b[0x976+-0x985+0x12])?Number(_0x30c91b[-0x1ba*-0x5+0x12c1+-0x8*0x36c]):null;let _0x43c431=(_0x57e7e7||'')[_0x12985a(0x332)]();!_0x43c431&&_0x1a793c&&(_0x43c431=extractInlineAfterToken(_0x37d805,_0x1a793c));if(!_0x1a793c||!_0x43c431||_0x43c431['trim']()['length']===-0x2*0x987+-0x1*0x62f+0x47*0x5b){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x302)+_0x12985a(0x37f)+_0x12985a(0x279)+_0x12985a(0x239)+'ge...>\x20\x20\x20('+_0x12985a(0x315)+_0x12985a(0x450)+'d|all>)'});return;}const _0xdddf61=[];for(const _0x2cf64c of _0x32548c){const _0x56410a=await getChatTimezone(_0x2cf64c)||DEFAULT_TIMEZONE,_0x129f92=parseTimeToken(_0x1a793c,_0x56410a);if(!_0x129f92){_0xdddf61[_0x12985a(0x385)]({'chat':_0x2cf64c,'ok':![],'reason':_0x12985a(0x3dc)+'ed'});continue;}if(_0x129f92[_0x12985a(0x393)]===_0x12985a(0x441)){const _0x384a0a=_0x129f92['dt'],_0xce7e97=Math[_0x12985a(0x21f)](_0x384a0a['toMillis']()/(-0x1*-0x151+0x1ef4+-0x1*0x1c5d)),_0x30dc10=await addScheduleRow({'chat_jid':_0x2cf64c,'message':_0x43c431,'time':null,'send_at':_0xce7e97,'frequency':_0x12985a(0x339),'timezone':_0x384a0a[_0x12985a(0x3ac)]||_0x56410a,'creator_jid':_0x16379a});if(_0x30dc10)_0xdddf61['push']({'chat':_0x2cf64c,'ok':!![],'id':_0x30dc10,'when':_0x384a0a[_0x12985a(0x416)+_0x12985a(0x30f)](DateTime[_0x12985a(0x1a0)+'ED'])});else _0xdddf61[_0x12985a(0x385)]({'chat':_0x2cf64c,'ok':![],'reason':'db_failed'});continue;}if(_0x129f92[_0x12985a(0x393)]==='hhmm'){const [_0x1521eb,_0x259f20]=_0x129f92[_0x12985a(0x3e6)]['split'](':')[_0x12985a(0x3fc)](Number);let _0x3a662b=DateTime[_0x12985a(0x3d8)]()['setZone'](_0x56410a),_0x452e6d=_0x3a662b['startOf'](_0x12985a(0x261))[_0x12985a(0x1ae)]({'hour':_0x1521eb,'minute':_0x259f20,'second':0x0,'millisecond':0x0});if(_0x52a8f6&&Number['isInteger'](_0x52a8f6)&&_0x52a8f6>=-0x875+0x3b*-0x9a+0x1*0x2bf4)_0x452e6d=_0x452e6d['plus']({'days':Number(_0x52a8f6)});else{if(_0x452e6d<=_0x3a662b)_0x452e6d=_0x452e6d[_0x12985a(0x1fe)]({'days':0x1});}const _0x1eb1a7=Math['floor'](_0x452e6d[_0x12985a(0x455)]()/(-0x1abf+-0x3*0x4e8+0x2d5f)),_0x298a67=await addScheduleRow({'chat_jid':_0x2cf64c,'message':_0x43c431,'time':null,'send_at':_0x1eb1a7,'frequency':_0x12985a(0x339),'timezone':_0x56410a,'creator_jid':_0x16379a});if(_0x298a67)_0xdddf61[_0x12985a(0x385)]({'chat':_0x2cf64c,'ok':!![],'id':_0x298a67,'when':_0x452e6d[_0x12985a(0x416)+_0x12985a(0x30f)](DateTime[_0x12985a(0x1a0)+'ED'])});else _0xdddf61[_0x12985a(0x385)]({'chat':_0x2cf64c,'ok':![],'reason':_0x12985a(0x2e3)});continue;}_0xdddf61['push']({'chat':_0x2cf64c,'ok':![],'reason':_0x12985a(0x359)+_0x12985a(0x311)});}const _0x48093b=_0xdddf61[_0x12985a(0x347)](_0x24332c=>_0x24332c['ok']),_0x3863af=_0xdddf61[_0x12985a(0x347)](_0x11edd0=>!_0x11edd0['ok']);let _0x2b72fb='';if(_0x48093b[_0x12985a(0x342)]){_0x2b72fb+=_0x12985a(0x212)+_0x12985a(0x3f7)+'r\x20'+_0x48093b[_0x12985a(0x342)]+('\x20target(s)'+':\x0a');for(const _0x51273b of _0x48093b)_0x2b72fb+='•\x20'+_0x51273b[_0x12985a(0x348)]+_0x12985a(0x2c1)+_0x51273b['id']+'\x20at\x20'+_0x51273b['when']+'\x0a';}if(_0x3863af[_0x12985a(0x342)]){_0x2b72fb+='Failed\x20for'+'\x20'+_0x3863af['length']+(_0x12985a(0x1e9)+':\x0a');for(const _0x5539cc of _0x3863af)_0x2b72fb+='•\x20'+_0x5539cc['chat']+_0x12985a(0x402)+_0x5539cc[_0x12985a(0x3be)]+'\x0a';}await sendWithRetry(_0x1d72a5,{'text':_0x2b72fb[_0x12985a(0x332)]()||'No\x20schedul'+'es\x20created'+'.'});return;}if(_0x533ed6===_0x12985a(0x221)){if(!_0x30c91b[-0xb5*0xb+0x1*0x106a+-0x8a1]){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x302)+_0x12985a(0x276)+_0x12985a(0x209)+_0x12985a(0x2c4)+'|in\x20N\x20hour'+_0x12985a(0x18f)+_0x12985a(0x31f)+_0x12985a(0x303)+_0x12985a(0x240)+_0x12985a(0x2b5)});return;}const _0x59969e=_0x30c91b[-0x2471+0x1*-0x15e6+0x3a59],_0xb78704=_0x30c91b[-0x2190+-0xfcb+0x315e]&&/^\d+$/[_0x12985a(0x3d0)](_0x30c91b[-0xb95*0x2+-0x298+0x19c5])?Number(_0x30c91b[0x1e1b+0x690+-0x4*0x92a]):null;let _0x3868a7=(_0x57e7e7||'')[_0x12985a(0x332)]();!_0x3868a7&&(_0x3868a7=extractInlineAfterToken(_0x37d805,_0x59969e));if(!_0x3868a7||_0x3868a7[_0x12985a(0x332)]()[_0x12985a(0x342)]===-0x18d7+-0x1623+0x2efa*0x1){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x419)+_0x12985a(0x2aa)+_0x12985a(0x18d)+'ame\x20line\x20a'+_0x12985a(0x367)+_0x12985a(0x304)+_0x12985a(0x226)+_0x12985a(0x29f)+'ias|jid|al'+'l>'});return;}const _0x4869ad=[];for(const _0x3c741a of _0x32548c){const _0x150348=await getChatTimezone(_0x3c741a)||DEFAULT_TIMEZONE,_0x202521=parseTimeToken(_0x59969e,_0x150348);if(!_0x202521){_0x4869ad['push']({'chat':_0x3c741a,'ok':![],'reason':'parse_fail'+'ed'});continue;}const _0x47d746=_0x16379a;if(_0x202521[_0x12985a(0x393)]==='datetime'){const _0x2cddb9=_0x202521['dt'],_0x106798=Math[_0x12985a(0x21f)](_0x2cddb9[_0x12985a(0x455)]()/(-0x376+-0xc89*-0x2+-0x11b4)),_0xdf7db2=await addScheduleRow({'chat_jid':_0x3c741a,'message':_0x3868a7,'time':null,'send_at':_0x106798,'frequency':_0x12985a(0x339),'timezone':_0x2cddb9[_0x12985a(0x3ac)]||_0x150348,'creator_jid':_0x47d746});if(_0xdf7db2)_0x4869ad[_0x12985a(0x385)]({'chat':_0x3c741a,'ok':!![],'id':_0xdf7db2,'when':_0x2cddb9[_0x12985a(0x416)+_0x12985a(0x30f)](DateTime[_0x12985a(0x1a0)+'ED'])});else _0x4869ad[_0x12985a(0x385)]({'chat':_0x3c741a,'ok':![],'reason':'db_failed'});continue;}if(_0x202521[_0x12985a(0x393)]===_0x12985a(0x3e6)){const _0x49cd8b=_0x202521['hhmm'];if(_0xb78704&&Number['isInteger'](_0xb78704)&&_0xb78704>=0xdd5+-0x189+-0x3*0x419){let _0x33c281=DateTime[_0x12985a(0x3d8)]()[_0x12985a(0x457)](_0x150348);const [_0x19384c,_0x3bd6e1]=_0x49cd8b[_0x12985a(0x242)](':')['map'](Number);let _0x509713=_0x33c281[_0x12985a(0x24b)](_0x12985a(0x261))[_0x12985a(0x1ae)]({'hour':_0x19384c,'minute':_0x3bd6e1,'second':0x0,'millisecond':0x0});_0x509713=_0x509713[_0x12985a(0x1fe)]({'days':Number(_0xb78704)});const _0x5d5584=Math[_0x12985a(0x21f)](_0x509713[_0x12985a(0x455)]()/(0xa7f+0x3be*0x1+-0xa55)),_0x597622=await addScheduleRow({'chat_jid':_0x3c741a,'message':_0x3868a7,'time':null,'send_at':_0x5d5584,'frequency':_0x12985a(0x339),'timezone':_0x150348,'creator_jid':_0x47d746});if(_0x597622)_0x4869ad[_0x12985a(0x385)]({'chat':_0x3c741a,'ok':!![],'id':_0x597622,'when':_0x509713[_0x12985a(0x416)+_0x12985a(0x30f)](DateTime[_0x12985a(0x1a0)+'ED'])});else _0x4869ad[_0x12985a(0x385)]({'chat':_0x3c741a,'ok':![],'reason':'db_failed'});continue;}const _0x179513=await addScheduleRow({'chat_jid':_0x3c741a,'message':_0x3868a7,'time':_0x49cd8b,'send_at':null,'frequency':_0x12985a(0x24a),'timezone':_0x150348,'creator_jid':_0x47d746});if(_0x179513)_0x4869ad['push']({'chat':_0x3c741a,'ok':!![],'id':_0x179513,'when':_0x49cd8b+'\x20('+_0x150348+')'});else _0x4869ad[_0x12985a(0x385)]({'chat':_0x3c741a,'ok':![],'reason':'db_failed'});continue;}_0x4869ad[_0x12985a(0x385)]({'chat':_0x3c741a,'ok':![],'reason':_0x12985a(0x359)+'d_time'});}const _0x12a24b=_0x4869ad['filter'](_0x521e3e=>_0x521e3e['ok']),_0x238b7d=_0x4869ad['filter'](_0x229cd3=>!_0x229cd3['ok']);let _0x486a6c='';if(_0x12a24b[_0x12985a(0x342)]){_0x486a6c+='Scheduled\x20'+_0x12985a(0x1d0)+_0x12a24b[_0x12985a(0x342)]+(_0x12985a(0x1e9)+':\x0a');for(const _0x513cd2 of _0x12a24b)_0x486a6c+='•\x20'+_0x513cd2[_0x12985a(0x348)]+_0x12985a(0x2c1)+_0x513cd2['id']+'\x20when:'+_0x513cd2[_0x12985a(0x33c)]+'\x0a';}if(_0x238b7d[_0x12985a(0x342)]){_0x486a6c+=_0x12985a(0x1eb)+'\x20'+_0x238b7d[_0x12985a(0x342)]+(_0x12985a(0x1e9)+':\x0a');for(const _0x5c2f74 of _0x238b7d)_0x486a6c+='•\x20'+_0x5c2f74[_0x12985a(0x348)]+_0x12985a(0x402)+_0x5c2f74['reason']+'\x0a';}await sendWithRetry(_0x1d72a5,{'text':_0x486a6c[_0x12985a(0x332)]()||_0x12985a(0x30d)+_0x12985a(0x290)+'.'});return;}if(_0x533ed6==='list'){const _0x49fc06=[];for(const _0x18ebd9 of _0x32548c){const _0x3e35b7=await listSchedulesForChat(_0x18ebd9);for(const _0x4cb312 of _0x3e35b7)_0x49fc06['push']({'chatJid':_0x18ebd9,..._0x4cb312});}if(!_0x49fc06['length']){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x3f6)+_0x12985a(0x42c)+'\x20messages\x20'+_0x12985a(0x459)+_0x12985a(0x376)+_0x12985a(0x448)});return;}let _0x122857='';for(const _0x1d0875 of _0x49fc06){const _0x2dceba=_0x1d0875[_0x12985a(0x241)]?DateTime[_0x12985a(0x20e)](Number(_0x1d0875[_0x12985a(0x241)])*(0x31*-0x93+-0x1b86+0xdd*0x45))[_0x12985a(0x457)](_0x1d0875['timezone']||DEFAULT_TIMEZONE)[_0x12985a(0x362)]({'suppressSeconds':!![]}):_0x1d0875[_0x12985a(0x428)]?_0x1d0875[_0x12985a(0x428)]+'\x20('+(_0x1d0875['timezone']||_0x12985a(0x260)+'ult\x20TZ')+')':_0x12985a(0x433),_0x318f49=(_0x1d0875[_0x12985a(0x208)]||'')[_0x12985a(0x242)]('\x0a')['map'](_0x100ac3=>_0x100ac3['trimEnd']())[_0x12985a(0x35f)]('\x0a'),_0x3b1353=_0x1d0875['chatJid']+':'+_0x1d0875['id']+'\x20when:'+_0x2dceba+_0x12985a(0x41e)+(_0x1d0875[_0x12985a(0x34d)]||_0x12985a(0x24a))+_0x12985a(0x1e0)+(_0x1d0875[_0x12985a(0x3b4)]?_0x12985a(0x2e5):'no')+_0x12985a(0x344)+_0x318f49+'\x0a\x0a';(_0x122857+_0x3b1353)[_0x12985a(0x342)]>-0x1265+0xd71+-0xad0*-0x1&&(await sendWithRetry(_0x1d72a5,{'text':_0x122857[_0x12985a(0x332)]()}),_0x122857=''),_0x122857+=_0x3b1353;}if(_0x122857['trim']())await sendWithRetry(_0x1d72a5,{'text':_0x122857['trim']()});return;}if(_0x533ed6===_0x12985a(0x33d)){const _0x40f76a=_0x30c91b['slice'](0x1f8c+-0x20ad+0x123);let _0x3ea188=_0x40f76a[_0x12985a(0x35f)]('\x20');if(!_0x3ea188&&_0x5c6a04)_0x3ea188=_0x5c6a04[_0x12985a(0x332)]();if(!_0x3ea188){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x302)+_0x12985a(0x33f)+_0x12985a(0x32f)+'mber,numbe'+_0x12985a(0x40e)+_0x12985a(0x442)+'|jid|all>'});return;}if(/^\s*all\s*$/i[_0x12985a(0x3d0)](_0x3ea188)){let _0x3ef541=0x1c09+0x79d+-0x3f6*0x9;for(const _0x366675 of _0x32548c){const _0x1468ae=await removeAllSchedulesForChat(_0x366675);_0x3ef541+=_0x1468ae;}await sendWithRetry(_0x1d72a5,{'text':'Deleted\x20'+_0x3ef541+(_0x12985a(0x23a)+_0x12985a(0x1d7)+_0x12985a(0x376)+_0x12985a(0x448))});return;}const _0x5c91cf=_0x3ea188[_0x12985a(0x242)](/[\s,]+/)['map'](_0x5956f8=>_0x5956f8[_0x12985a(0x332)]())[_0x12985a(0x347)](Boolean),_0x179ecb=_0x5c91cf[_0x12985a(0x3fc)](_0x4329c5=>Number(_0x4329c5))['filter'](_0x4c22de=>!Number['isNaN'](_0x4c22de)&&Number['isInteger'](_0x4c22de)&&_0x4c22de>-0x1f9*0x11+-0xd*-0x9b+0x9*0x2da);if(!_0x179ecb[_0x12985a(0x342)]){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x2b4)+_0x12985a(0x32a)+_0x12985a(0x1b9)+_0x12985a(0x335)+_0x12985a(0x2f3)+'\x203\x20OR\x20sche'+'d\x20delete\x201'+_0x12985a(0x414)+_0x12985a(0x31a)+'\x20all\x20gp:<a'+_0x12985a(0x3bf)+'ll>'});return;}const _0x419ab5=[...new Set(_0x179ecb)],_0x2cef8b=await getCombinedSchedulesForChats(_0x32548c),_0x5d3783=[],_0x1a189e=[];for(const _0x4ba9ed of _0x419ab5){if(_0x4ba9ed<-0x1a49+0x1cc9+-0x27f||_0x4ba9ed>_0x2cef8b[_0x12985a(0x342)]){_0x1a189e[_0x12985a(0x385)]({'n':_0x4ba9ed,'reason':_0x12985a(0x325)});continue;}const _0x30fb59=_0x2cef8b[_0x4ba9ed-(-0x2*0xc19+-0x1*-0x9e3+0xe50)]['id'],_0x8b87c3=await removeScheduleByDBId(_0x30fb59);if(_0x8b87c3)_0x5d3783['push']({'n':_0x4ba9ed,'id':_0x30fb59});else _0x1a189e[_0x12985a(0x385)]({'n':_0x4ba9ed,'reason':_0x12985a(0x443)+'failed'});}let _0x25b647='';if(_0x5d3783[_0x12985a(0x342)])_0x25b647+=_0x12985a(0x396)+_0x5d3783[_0x12985a(0x342)]+(_0x12985a(0x23a)+_0x12985a(0x3c6))+_0x5d3783[_0x12985a(0x3fc)](_0x2cd91f=>_0x2cd91f['n']+_0x12985a(0x200)+_0x2cd91f['id']+')')['join'](',\x20')+'.\x0a';if(_0x1a189e[_0x12985a(0x342)])_0x25b647+=_0x12985a(0x2a7)+_0x12985a(0x3d1)+_0x1a189e[_0x12985a(0x3fc)](_0x3dab6d=>_0x3dab6d['n']+'('+_0x3dab6d[_0x12985a(0x3be)]+')')[_0x12985a(0x35f)](',\x20')+'.';await sendWithRetry(_0x1d72a5,{'text':_0x25b647[_0x12985a(0x332)]()||'No\x20changes'+_0x12985a(0x324)});return;}if(_0x533ed6===_0x12985a(0x20d)){const _0x3a3305=Number(_0x30c91b[-0x1*-0x12c+0x1bde+-0x1d08]),_0xfc13b9=_0x30c91b[-0xc6a+-0x2648+-0x1*-0x32b5]||(_0x5c6a04?_0x5c6a04['split'](/\r?\n/)[0x1eed+0x12b5+-0x31a2][_0x12985a(0x332)]():null);if(!_0x3a3305||!_0xfc13b9){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x302)+'ed\x20edit\x20<n'+_0x12985a(0x3cf)+_0x12985a(0x3f0)+_0x12985a(0x1a2)+'MM-DDTHH:m'+_0x12985a(0x3cc)+_0x12985a(0x298)+'>'});return;}const _0xa164c1=await getCombinedSchedulesForChats(_0x32548c);if(!_0xa164c1||_0xa164c1['length']<_0x3a3305){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x30d)+_0x12985a(0x3d2)+_0x3a3305+(_0x12985a(0x3d4)+_0x12985a(0x2c3)+_0x12985a(0x269)+'s.')});return;}const _0x3c5a98=_0xa164c1[_0x3a3305-(-0x9e4+-0xb51+0x1536)]['id'];if(!_0x3c5a98){await sendWithRetry(_0x1d72a5,{'text':'No\x20schedul'+'e\x20#'+_0x3a3305+(_0x12985a(0x3d4)+_0x12985a(0x2c3)+_0x12985a(0x269)+'s.')});return;}const _0x57d411=parseTimeToken(_0xfc13b9,DEFAULT_TIMEZONE);if(!_0x57d411){await sendWithRetry(_0x1d72a5,{'text':'Failed\x20to\x20'+_0x12985a(0x375)+'time.'});return;}if(_0x57d411['type']===_0x12985a(0x441)){const _0x41eecb=_0x57d411['dt'],_0x5596ea=Math[_0x12985a(0x21f)](_0x41eecb[_0x12985a(0x455)]()/(-0x18*0x17e+0xbe0+0xa2*0x2c)),_0x481ec2=await updateScheduleFields(_0x3c5a98,{'send_at':_0x5596ea,'time':null,'frequency':_0x12985a(0x339),'timezone':_0x41eecb[_0x12985a(0x3ac)]||DEFAULT_TIMEZONE});if(_0x481ec2)await sendWithRetry(_0x1d72a5,{'text':'Schedule\x20#'+_0x3a3305+('\x20updated\x20t'+_0x12985a(0x1e2)+_0x12985a(0x1b3))+_0x41eecb['toLocaleSt'+_0x12985a(0x30f)](DateTime[_0x12985a(0x1a0)+'ED'])+'\x20('+_0x41eecb['zoneName']+')'});else await sendWithRetry(_0x1d72a5,{'text':'Failed\x20to\x20'+_0x12985a(0x300)+_0x12985a(0x254)});return;}else{if(_0x57d411[_0x12985a(0x393)]===_0x12985a(0x3e6)){const _0x11f8bb=_0x57d411[_0x12985a(0x3e6)],_0x59621a=_0xa164c1[_0x3a3305-(0x1e6d+-0x1559+-0x1*0x913)],_0x2d2f39=_0x59621a[_0x12985a(0x410)]||await getChatTimezone(_0x59621a[_0x12985a(0x43f)])||DEFAULT_TIMEZONE,_0x4486d5=await updateScheduleFields(_0x3c5a98,{'time':_0x11f8bb,'send_at':null,'frequency':'daily','timezone':_0x2d2f39});if(_0x4486d5)await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x41b)+_0x3a3305+(_0x12985a(0x1c6)+'o\x20recurrin'+_0x12985a(0x3b1))+_0x11f8bb+'\x20('+_0x2d2f39+')'});else await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x2a7)+_0x12985a(0x300)+_0x12985a(0x254)});return;}else{await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x368)+'d\x20time\x20for'+'mat\x20for\x20ed'+'it.'});return;}}}if(_0x533ed6===_0x12985a(0x34d)){const _0x392937=Number(_0x30c91b[0x1268+-0x1*-0x2f5+0x47*-0x4d]),_0x4bc547=Number(_0x30c91b[-0x10c5+-0x5*-0x252+0x52e]);if(!_0x392937||!_0x4bc547||_0x4bc547<-0x26c8+0x5af+0x211a){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x302)+_0x12985a(0x3a1)+_0x12985a(0x263)+_0x12985a(0x41d)+'1\x20daily,\x20n'+'=2\x20every\x202'+_0x12985a(0x1cd)+_0x12985a(0x1b5)+_0x12985a(0x298)+'>'});return;}const _0x429b31=await getCombinedSchedulesForChats(_0x32548c);if(!_0x429b31||_0x429b31['length']<_0x392937){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x30d)+_0x12985a(0x3d2)+_0x392937+(_0x12985a(0x3d4)+'oss\x20reques'+'ted\x20target'+'s.')});return;}const _0x13ba63=_0x429b31[_0x392937-(-0xd3d*0x2+-0x1ddd+0x3858)]['id'];if(!_0x13ba63){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x30d)+_0x12985a(0x3d2)+_0x392937+('\x20found\x20acr'+_0x12985a(0x2c3)+_0x12985a(0x269)+'s.')});return;}let _0x2186a0=_0x12985a(0x24a);if(_0x4bc547===-0x2135*-0x1+0x3d3*0x3+-0x2cad)_0x2186a0=_0x12985a(0x24a);else _0x2186a0=_0x12985a(0x1f5)+_0x12985a(0x2fc)+_0x4bc547;const _0x39ef4a=await updateScheduleFields(_0x13ba63,{'frequency':_0x2186a0});if(_0x39ef4a)await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x41b)+_0x392937+(_0x12985a(0x2b3)+_0x12985a(0x2c6))+_0x2186a0});else await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x2a7)+_0x12985a(0x3fa)+_0x12985a(0x2e1)});return;}if(_0x533ed6==='disable'||_0x533ed6===_0x12985a(0x44c)){const _0x21c0ef=Number(_0x30c91b[-0x17*-0x83+-0xe02*-0x2+0x27c7*-0x1]);if(!_0x21c0ef){await sendWithRetry(_0x1d72a5,{'text':'Usage:\x20sch'+'ed\x20'+_0x533ed6+(_0x12985a(0x23c)+_0x12985a(0x3bb)+_0x12985a(0x292))});return;}const _0x1c7ebc=await getCombinedSchedulesForChats(_0x32548c);if(!_0x1c7ebc||_0x1c7ebc[_0x12985a(0x342)]<_0x21c0ef){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x30d)+_0x12985a(0x3d2)+_0x21c0ef+(_0x12985a(0x3d4)+'oss\x20reques'+_0x12985a(0x269)+'s.')});return;}const _0x14e6f3=_0x1c7ebc[_0x21c0ef-(-0xc*-0x324+-0x67a*-0x4+-0x3f97)]['id'];if(!_0x14e6f3){await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x30d)+_0x12985a(0x3d2)+_0x21c0ef+(_0x12985a(0x3d4)+_0x12985a(0x2c3)+_0x12985a(0x269)+'s.')});return;}const _0x214ee0=await updateScheduleFields(_0x14e6f3,{'enabled':_0x533ed6===_0x12985a(0x44c)?-0x1*-0x1f47+-0x1857+-0x47*0x19:0x10e5*0x2+0xad2+-0x2c9c});if(_0x214ee0)await sendWithRetry(_0x1d72a5,{'text':_0x12985a(0x41b)+_0x21c0ef+'\x20'+_0x533ed6+'d.'});else await sendWithRetry(_0x1d72a5,{'text':'Failed\x20to\x20'+'update\x20ena'+_0x12985a(0x2ee)+'.'});return;}await sendWithRetry(_0x1d72a5,{'text':USAGE});}catch(_0x8490e7){warn(_0x12985a(0x22e)+_0x12985a(0x1f9)+_0x12985a(0x199)+'rror:\x20'+(_0x8490e7?.[_0x12985a(0x208)]||_0x8490e7));}}export async function initialize(_0x54edd5){const _0x1688c8=_0x25fc45;if(!_0x54edd5)throw new Error(_0x1688c8(0x237)+'ialize\x20req'+_0x1688c8(0x223)+_0x1688c8(0x1a5));setupSendApi(_0x54edd5),refreshConfig();try{await ensureSchema();}catch(_0xa606df){error(_0x1688c8(0x1bd)+_0x1688c8(0x29e)+_0x1688c8(0x250)+(_0xa606df?.[_0x1688c8(0x208)]||_0xa606df));throw _0xa606df;}try{startManagedListener({'botRef':_0x54edd5,'eventName':'connection'+_0x1688c8(0x1f3),'handler':_0x32e66f=>{const _0x38f410=_0x1688c8;try{info(_0x38f410(0x1d2)+_0x38f410(0x409)+_0x38f410(0x2e6)+_0x38f410(0x1d5)+'setup\x20send'+_0x38f410(0x24d)+_0x38f410(0x3d5)+'r)'),setupSendApi(_0x54edd5);}catch(_0x1e9672){warn('[sched]\x20co'+_0x38f410(0x409)+'pdate\x20hand'+_0x38f410(0x3d7)+'\x20'+(_0x1e9672?.['message']||_0x1e9672));}},'moduleName':name});}catch(_0x342455){warn(_0x1688c8(0x390)+_0x1688c8(0x412)+_0x1688c8(0x2cf)+_0x1688c8(0x338)+_0x1688c8(0x369)+_0x1688c8(0x278)+'r:\x20'+(_0x342455?.[_0x1688c8(0x208)]||_0x342455));}startSchedulerAligned(),info(_0x1688c8(0x1f0)+_0x1688c8(0x1a8)+_0x1688c8(0x468)+_0x1688c8(0x3ad)+_0x1688c8(0x230)+'ection\x20upd'+_0x1688c8(0x26c));}export async function cleanup(){const _0x462016=_0x25fc45;try{stopScheduler();try{stopManagedListener(name,_0x462016(0x2ce)+'.update');}catch(_0x1f340e){}}catch(_0x52e1c3){warn(_0x462016(0x256)+_0x462016(0x427)+'r:\x20'+(_0x52e1c3?.[_0x462016(0x208)]||_0x52e1c3));}finally{botRef=null,sendApi=null,info(_0x462016(0x256)+_0x462016(0x411));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};