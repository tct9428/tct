const _0x6de6b1=_0x207f;(function(_0x4ec83b,_0x4c520e){const _0x40918e=_0x207f,_0x4f2b63=_0x4ec83b();while(!![]){try{const _0x4addb4=-parseInt(_0x40918e(0x318))/(-0x10be*0x2+0xd80+0x13fd)+parseInt(_0x40918e(0x2b6))/(0x64e+0x11b1+-0x17*0x10b)+parseInt(_0x40918e(0x29d))/(0x1d*-0xe9+0xec2+0x6*0x1f1)+-parseInt(_0x40918e(0x2b3))/(-0x2*0xde5+-0x136a*-0x2+-0xb06)*(parseInt(_0x40918e(0x356))/(0x33b*-0x1+-0xbdd+-0x35*-0x49))+parseInt(_0x40918e(0x28d))/(0x1*-0x264b+-0x2067+0x46b8)+-parseInt(_0x40918e(0x2ca))/(0x18a9+0x3*0xb0b+-0x3*0x1341)+parseInt(_0x40918e(0x1e1))/(0x1eb*0x11+0x1*-0x1d59+-0x33a);if(_0x4addb4===_0x4c520e)break;else _0x4f2b63['push'](_0x4f2b63['shift']());}catch(_0x4ec35a){_0x4f2b63['push'](_0x4f2b63['shift']());}}}(_0x182f,0x4f*0x3095+0x817*-0x12b+0x2a170));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x31733e from'../utils/groups.js';function _0x182f(){const _0x17f3b6=['_RETRIES','=\x20OFF;','listRespon','at_jid)\x20DO','s_new\x20RENA','sock','created_at','selectedRo','-DDTHH:mm>','EY,\x0a\x20\x20\x20\x20\x20\x20','ewlines\x20pr','â€£\x20One-off\x20','once','nal\x20send\x20a','WHERE\x20chat','extendedTe','t\x20lines\x20â€”\x20','ATE\x20TABLE\x20','ROM\x20schedu','able\x20a\x20sch','participan','ids','filter','\x20UPDATE\x20SE','value','include\x20gp','backup_','time_at','itial\x20exec','\x20scheduler','MN\x20send_at','weekday','TEGER\x20DEFA','at\x20','finalize','oss\x20your\x20d','STS\x20schedu','lias|jid|a','Africa/Nai','=2`\x20every\x20','last_sent','for\x20','sent_at','quency.','K_INTERVAL','singleSele','\x20PRIMARY\x20K','toMillis','TEGER,\x0a\x20\x20\x20','catch','th\x20/setdef','at_jid\x20=\x20?','eanup\x20erro','c.\x0a\x0a>\x20*sch','send_at','author','bled\x20state','ed\x20edit*\x20`','set','enabled','split','delete','umber>\x20<HH','`<HH:mm\x20|\x20','created_by','\x20\x20\x20\x20send_a','DELETE\x20FRO','eator_jid)','UPDATE\x20sch','_settings\x20','slice','s\x20found\x20fo','ponseMessa','AUTOINCREM','ll>','selectedBu','LE\x20schedul','ings\x20(\x0a\x20\x20\x20','add','_schedules','shift','ler_settin','EX\x20IF\x20NOT\x20',',\x20send_at,',',\x20timezone','led\x20entrie','ommandGrou','PRAGMA\x20tab','targets.','ed\x20add*\x20`<','ommandPM\x20e','reviously\x20','>\x20<n>\x20\x20(n=','every_n_da','isNaN','able\x20(expl','(id:','vided.\x20Usa','[sched]\x20se','string','5329848mcABgk','t_sent\x20INT','lp\x20Command','ðŸ“…\x20*SchedHe','ed\x20delete\x20','forbidden','room','owing\x20line','ble','SCHED_INIT','schedules_','trim','ed\x20once\x20<H','Usage:\x20sch','\x20default\x20c','\x20failed:\x20','392595gCikZL',':mm|in\x20N\x20h','creator','resolve\x20gp','parse\x20new\x20','toLocaleSt','of\x20a\x20sched','ndleSchedC','=2\x20every\x202','ted\x20target','INTEGER\x20DE','recurrence','mat\x20for\x20ed','ULL','dules;','heduler\x20st','includes','s\x20WHERE\x20id','\x20is\x20provid','\x20schedule(','unrecovera','gs\x20(\x0a\x20\x20\x20\x20\x20','675788lYYCgT','\x20<number>\x20','\x20\x20\x20\x20creato','471502TTNjEW','GER\x20DEFAUL','EGER\x20DEFAU','SCHED_DEFA','from',':\x20\x22','day','isCommand','isValid','ek:','ur\x20default','ite_master','No\x20schedul','s).\x20gp:<al','enable','nce*\x20`<HH:','icit\x20targe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20e','timestamp','ge\x20text\x20(s','6927193LDYuzx','INSERT\x20INT','arted\x20(ali','startsWith','db\x20delete\x20',',\x27now\x27))','fromISO','edules\x20SET','\x20made.','efaults.','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','ys]\x20<messa','\x20daily,\x20`n','t_jid,\x20mes','schedule','PM\x20usage:\x20','chatid','`\x0aâ€£\x20Set\x20re','name','nd_at,\x20fre','\x0amsg:\x0a','\x20gp:<alias','normalizeT','HH:mm\x20|\x20YY','mber,numbe','text','Could\x20not\x20','remoteJid','led\x20messag','enable\x20a\x20p','ezone\x20FROM',',\x20last_sen','r\x20id=','\x20->\x20id:','ctReply','.)\x20gp:<ali','exec','ed\x20edit\x20<n','sendat','isInteger','scheduled_','.\x20Not\x20retr','defaults:\x20','=\x20?','default\x20wi','d|all>)','timezone','es\x20created','zone','@g.us','trimEnd','led\x20for\x20id','DEFAULT\x201,','group/defa','\x20WHERE\x20typ','\x0a\x20\x20\x20\x20\x20\x20\x20VA','update\x20ena','ys/minutes','DATETIME_M','\x20when:','tempt\x20INTE','number','ES\x20(?,\x20?,\x20','T\x20NOT\x20NULL','p\x20error:\x20','o\x20one-off\x20','\x20);','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','eign_keys\x20','not\x20set,\x20u','ncy*\x20`<num','le*\x20`<numb','\x20\x20\x20chat_ji','nnection)','utes>\x20<mes','Failed\x20for','=excluded.','sendMessag','931382RNJvcS','ttempts\x20IN','sage...>','type',')\x20id:','creator_ji','\x20?\x20ORDER\x20B','\x20timezone\x20','LUES\x20(?,\x20?','If\x20`Ndays`','list','M\x20schedule','s)\x20across\x20','alias,\x20gp:','MARY\x20KEY,\x0a','entries','all\x20or\x20a\x20g','ndexes\x20pro','>`\x20`<messa','floor','INTEGER\x20PR','sage,\x20time','\x20id\x20ASC','[sched]\x20Un','e\x20error\x20fo','ge:\x20sched\x20','fromMe','ONFLICT(ch','\x20->\x20','s\x20at\x20given','\x20lines\x0agp:','p:<alias|j','anaging\x20sc','ME\x20TO\x20sche','\x20NOT\x20NULL,','edit','es\x20(\x0a\x20\x20','TEXT\x20NOT\x20N','[sched]\x20ex','sched.init','disable','LT\x200','parse_fail','days_of_we','hed\x20delete','imageMessa','d_at)\x20VALU','edules_new','val:\x20`n=1`','\x20all\x20gp:<a','essage\x20TEX','days','diff','delete:\x20','<number>`\x20','\x20connectio','s):\x0a','edule.','cy\x20<number','TEXT','chat_jid\x20=','\x20|\x20YYYY-MM','30XfkMcH','instance','\x20id\x20INTEGE','found\x20for\x20','ime\x20inline','SELECT\x20*\x20F','SELECT\x20tim','sing\x20fallb','\x20\x20\x20\x20enable','schedules','send_attem','ple\x20schedu','[sched]\x20sc','plus','ed,\x20schedu','msg','prepare','ine\x20when\x20m','\x20error:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','solving\x20co','ault.','db_failed','\x20scheduled','EXISTS\x20idx','body','time.','ed\x20','Message\x20er','schedule.\x20','d\x20TEXT\x20PRI','\x20at\x20','SELECT\x20nam','s\x20WHERE\x20ch',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Unsupporte',':mm|YYYY-M','when','Please\x20pro','duler_sett','jid','Deleted\x20','push','onnection(','chat_jid','IAL_BACKOF','(using\x20sta','CREATE\x20TAB','uires\x20bot\x20','`\x0aâ€£\x20Change','\x20<number>','\x20target(s)','\x5c$&','E\x20schedule','tempts\x20INT','*sched\x20lis','nutes)','r_settings','mezone,\x20cr','gp:<alias|','unknown','datetime','day\x20+\x20Nday','d,\x20message','\x20(chat_jid','hat_jid);','reason','\x20\x20\x20\x20timezo','findings','eserved.\x0a\x0a','map','\x20|\x20number,','GER','_jid,\x20enab','getUniqueJ','last_attem','=\x20ON;','target_jid','join','all','YY-MM-DDTH','function','EFAULT\x20\x27da','HH:mm','s\x20ADD\x20COLU','startOf','ime','frequency','Scheduled\x20','\x20updated\x20t','\x20messages\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','\x20found\x20acr','oss\x20reques','CREATE\x20IND','ring','message','ts\x20(','update\x20sch','\x20days,\x20etc','seMessage','rarily\x20dis','sched\x20enab','s):\x20','hhmm','xtMessage','requested\x20','ge.\x0a\x0a>\x20*sc','keys','test','IF\x20NOT\x20EXI','No\x20valid\x20i','\x20enabled:','ge...>\x20\x20\x20(','CREMENT,\x0a\x20','TEXT\x20DEFAU','ias|jid|al','isArray','attempts,\x20','d_time','1\x20daily,\x20n','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','buttonsRes','e=\x27table\x27\x20','\x20chat:','now','[sched]\x20Fi','Failed\x20to\x20','pts','changes','o\x20recurrin','chatJid','replace','ULT\x200,\x0a\x20\x20\x20','ours|YYYY-','itialized\x20','ily\x27,\x0a\x20\x20\x20\x20','No\x20changes','chat_id','ialize\x20req','status','t_jid\x20TEXT','data','e\x20FROM\x20sql','\x20freq:','fromMillis','[sched]\x20No','not\x20found','Message\x20ca','yes','min','sage...>`\x0a','get','sage.\x0a\x0a>\x20*','s/days/min','H:mm>\x20[Nda','nabled\x20INT','O\x20schedule','ecutorTick','or\x20on\x20foll','_chat\x20ON\x20s','TEXT\x0a\x20\x20\x20\x20\x20','t*\x0aâ€£\x20View\x20','e\x20#','FAULT\x20(str','N\x20hours/da','vide\x20messa','r_jid\x20TEXT','as|jid|all','match','\x20set\x20to\x20','hed\x20freque','eduled\x20mes','ble\x20bot\x20co','H:mm\x20|\x20in\x20','3.0.1','caption','SCHED_CHEC','r:\x20','EGER,\x0a\x20\x20\x20\x20','daily','hed\x20add\x2009','t,\x20creator','run','opped','hasSame','zoneName','FAULT\x201','LT\x20\x27daily\x27','\x20\x20\x20\x20freque','ult\x20TZ','ys]`\x20`<mes','INTEGER','ed\x20disable','videoMessa','?,\x20?)\x20ON\x20C','original\x20n','it.','th:','uled\x20messa','setZone',',2,3\x20OR\x20sc','_jid\x20=\x20?','chat','17723464LLTMuN','n\x20follow\x20t','s\x20RENAME\x20T','ys:','>\x20*sched\x20o','padStart','*\x20`<number','|in\x20N\x20hour','ed\x20message','abled\x20INTE','sendAt','<number|nu','\x20\x20\x20timezon','disabled\x20m','unsupporte','alias','toLowerCas','\x20WHERE\x20id\x20','\x203\x20OR\x20sche','M-DDTHH:mm','SCHED_SEND','ber>`\x20`<n>','[sched]\x20in','update\x20fre','LT\x201,\x0a\x20\x20\x20\x20','delete\x201\x202','has','g\x20at\x20','time','led,\x20send_','\x20\x20\x20);\x0a\x20\x20\x20\x20','ncy\x20TEXT\x20D','wId','\x20\x20\x20\x20\x20\x20\x20cha','\x20\x20\x20\x20\x20\x20\x20las','help','sched','?,\x20?,\x20?,\x20?','d\x20time\x20for','REATE\x20TABL','ALTER\x20TABL','indexOf','failed','Schedule\x20#','length','PRAGMA\x20for','rget\x20avail','ENT','ge...>','chedules(c','fter\x20time\x20','peat\x20inter','ame\x20line\x20a','toISO','ttonId','T\x20timezone','conversati','2\x20days,\x20et','[sched]\x20re','\x22.\x20Use\x20gp:',':<alias|ji','e\x20or\x20multi','s.\x0a\x0a>\x20*sch','day_of_mon','\x20\x20\x20\x20\x20last_','ftime(\x27%s\x27','r,...|all>','jid|all>','key','ULT_TIMEZO','oUserJid','les\x20for\x20to'];_0x182f=function(){return _0x17f3b6;};return _0x182f();}import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x6de6b1(0x205);export const version=_0x6de6b1(0x1c4);export const priority=0x18bd+-0x18f4+-0x23*-0x4;export const commands=['sched',_0x6de6b1(0x2d8)];export const configKeys=[_0x6de6b1(0x1c6)+_0x6de6b1(0x255)+'_MS',_0x6de6b1(0x2b9)+'ULT_TIMEZO'+'NE',_0x6de6b1(0x1f5)+_0x6de6b1(0x229),_0x6de6b1(0x296)+_0x6de6b1(0x383)+'F_MS'];let botRef=null,sendApi=null,schedulerIntervalHandle=null,executorRunning=![],CHECK_INTERVAL_MS=(-0x4*0x8b7+-0x195d+0x4d*0xc9)*(0x3*0xb9d+0x6b7*0x2+-0x2c5d),DEFAULT_TIMEZONE=_0x6de6b1(0x24f)+'robi',SEND_RETRIES=0x22a5+-0x1*-0x485+0x2727*-0x1,INITIAL_BACKOFF_MS=-0x361*-0x4+-0x4f*0x3b+0x6a5*0x1;const MAX_DB_ATTEMPTS=0x203a+-0x2238+0x1b*0x13;function ensureArray(_0x1147c1){const _0xc2c10d=_0x6de6b1;if(!_0x1147c1)return[];if(Array[_0xc2c10d(0x18a)](_0x1147c1))return _0x1147c1;return[_0x1147c1];}function uniqArray(_0x4f7902){const _0x86220d=_0x6de6b1,_0x2d19ff=new Set(),_0x3993a5=[];for(const _0x11dc96 of _0x4f7902||[]){const _0x4bcbec=String(_0x11dc96||'')[_0x86220d(0x298)]();if(!_0x4bcbec)continue;!_0x2d19ff[_0x86220d(0x1fb)](_0x4bcbec)&&(_0x2d19ff[_0x86220d(0x277)](_0x4bcbec),_0x3993a5[_0x86220d(0x380)](_0x4bcbec));}return _0x3993a5;}async function tableExists(_0x268a43){const _0x2d77ee=_0x6de6b1;try{const _0x45f322=await db[_0x2d77ee(0x1ad)](_0x2d77ee(0x376)+_0x2d77ee(0x1a4)+_0x2d77ee(0x2c1)+_0x2d77ee(0x300)+_0x2d77ee(0x190)+'AND\x20name=?',[_0x268a43]);return!!_0x45f322;}catch(_0x412a93){return![];}}async function getTableColumns(_0x49b34b){const _0x52657d=_0x6de6b1;try{const _0xf8ebbf=await db[_0x52657d(0x164)](_0x52657d(0x280)+'le_info('+_0x49b34b+')');return(_0xf8ebbf||[])[_0x52657d(0x39c)](_0x4090fa=>_0x4090fa[_0x52657d(0x2dc)]);}catch(_0x522c8a){return[];}}function resolveChatJidFromRow(_0x74977f){const _0x4ab7ad=_0x6de6b1,_0xc6a28a=[_0x4ab7ad(0x382),_0x4ab7ad(0x2da),_0x4ab7ad(0x19f),'jid',_0x4ab7ad(0x1e0),_0x4ab7ad(0x293),_0x4ab7ad(0x162)];for(const _0x3e2717 of _0xc6a28a)if(_0x3e2717 in _0x74977f&&_0x74977f[_0x3e2717])return String(_0x74977f[_0x3e2717]);return null;}function resolveMessageFromRow(_0x547800){const _0x7b583e=_0x6de6b1,_0x50ef06=[_0x7b583e(0x175),'msg',_0x7b583e(0x2e3),_0x7b583e(0x36f),_0x7b583e(0x241)];for(const _0x508861 of _0x50ef06)if(_0x508861 in _0x547800&&_0x547800[_0x508861]!=null)return String(_0x547800[_0x508861]);return'';}function resolveWhenFromRow(_0x3d8643){const _0x1f2a34=_0x6de6b1,_0xac3434=['send_at',_0x1f2a34(0x1eb),_0x1f2a34(0x2f0),'send','timestamp','ts',_0x1f2a34(0x244)];for(const _0x414dad of _0xac3434){if(_0x414dad in _0x3d8643&&_0x3d8643[_0x414dad]){const _0x2885d7=Number(_0x3d8643[_0x414dad]);if(!Number['isNaN'](_0x2885d7)&&_0x2885d7>-0x61cf31cd+-0x2c9*-0x356c9+-0x9b704*-0xf3f)return{'send_at':_0x2885d7};}}const _0x4813f3=[_0x1f2a34(0x1fd),_0x1f2a34(0x17d),'schedule_t'+_0x1f2a34(0x16b),_0x1f2a34(0x2f2)+_0x1f2a34(0x1fd)];for(const _0x21bbf2 of _0x4813f3){if(_0x21bbf2 in _0x3d8643&&_0x3d8643[_0x21bbf2]){const _0x36054f=String(_0x3d8643[_0x21bbf2])[_0x1f2a34(0x298)]();if(/^\d{1,2}:\d{2}$/[_0x1f2a34(0x182)](_0x36054f))return{'time':_0x36054f};}}return{'time':null,'send_at':null};}async function readAndNormalizeExistingSchedules(){const _0x424192=_0x6de6b1;try{const _0x58faad=await db['all'](_0x424192(0x35b)+_0x424192(0x23b)+'les'),_0x11e704=[];for(const _0x49bb4a of _0x58faad||[]){const _0x5c914a=resolveChatJidFromRow(_0x49bb4a)||'',_0x18edca=resolveMessageFromRow(_0x49bb4a)||'',_0x1d8c28=resolveWhenFromRow(_0x49bb4a)||{};let _0x237ddc=_0x49bb4a['frequency']||_0x49bb4a['freq']||_0x49bb4a['repeat']||_0x49bb4a[_0x424192(0x2a8)]||_0x424192(0x1c9);if(typeof _0x237ddc===_0x424192(0x307))_0x237ddc=_0x424192(0x286)+_0x424192(0x1e4)+_0x237ddc;const _0x5d2e83=_0x49bb4a[_0x424192(0x2f8)]||_0x49bb4a['tz']||null,_0x3c18d=_0x49bb4a['creator_ji'+'d']||_0x49bb4a[_0x424192(0x269)]||_0x49bb4a[_0x424192(0x260)]||_0x49bb4a[_0x424192(0x29f)]||'';let _0x1be6b0=Number(_0x49bb4a[_0x424192(0x22f)]||_0x49bb4a['ts']||_0x49bb4a[_0x424192(0x2c8)]||-0x51c+0x25a*-0x1+-0xbf*-0xa);if(!_0x1be6b0)_0x1be6b0=Math[_0x424192(0x32b)](Date['now']()/(0x3*0x5f6+-0x5*0x6fb+0x14ed));_0x11e704['push']({'chat_jid':_0x5c914a,'message':_0x18edca,'time':_0x1d8c28[_0x424192(0x1fd)]||null,'send_at':_0x1d8c28['send_at']||null,'frequency':_0x237ddc||_0x424192(0x1c9),'timezone':_0x5d2e83,'last_sent':Number(_0x49bb4a[_0x424192(0x251)]||_0x49bb4a[_0x424192(0x253)]||-0x739+-0x7*-0x393+-0x11cc)||0x7+0x5*0x742+-0x1*0x2451,'creator_jid':_0x3c18d||'','created_at':_0x1be6b0});}return _0x11e704;}catch(_0x31fc82){return[];}}async function ensureSchema(){const _0x2daa3e=_0x6de6b1,_0xec708e={'id':_0x2daa3e(0x32c)+'IMARY\x20KEY\x20'+_0x2daa3e(0x272)+_0x2daa3e(0x210),'chat_jid':_0x2daa3e(0x33d)+_0x2daa3e(0x2aa),'message':_0x2daa3e(0x33d)+_0x2daa3e(0x2aa),'time':_0x2daa3e(0x353),'send_at':_0x2daa3e(0x1d5),'frequency':_0x2daa3e(0x188)+_0x2daa3e(0x1d1),'timezone':_0x2daa3e(0x353),'last_sent':_0x2daa3e(0x1d5),'creator_jid':_0x2daa3e(0x33d)+'ULL','enabled':_0x2daa3e(0x2a7)+_0x2daa3e(0x1d0),'send_attempts':_0x2daa3e(0x2a7)+'FAULT\x200','last_attempt':_0x2daa3e(0x1d5),'created_at':_0x2daa3e(0x2a7)+_0x2daa3e(0x1b9)+_0x2daa3e(0x222)+_0x2daa3e(0x2cf)};try{const _0x48b5f4=await tableExists(_0x2daa3e(0x35f));if(!_0x48b5f4){const _0xc57012=Object[_0x2daa3e(0x327)](_0xec708e)['map'](([_0x1e2c86,_0xa48e52])=>_0x1e2c86+'\x20'+_0xa48e52)[_0x2daa3e(0x163)](',\x0a\x20\x20');await db[_0x2daa3e(0x2ee)](_0x2daa3e(0x385)+_0x2daa3e(0x275)+_0x2daa3e(0x33c)+_0xc57012+'\x0a);');try{await db[_0x2daa3e(0x2ee)]('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+'EXISTS\x20idx'+'_schedules'+_0x2daa3e(0x1b5)+_0x2daa3e(0x212)+_0x2daa3e(0x397));}catch(_0xb179c6){}await db[_0x2daa3e(0x2ee)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20C'+'REATE\x20TABL'+'E\x20IF\x20NOT\x20E'+'XISTS\x20sche'+_0x2daa3e(0x37d)+_0x2daa3e(0x276)+'\x20\x20\x20\x20\x20\x20\x20cha'+_0x2daa3e(0x1a2)+_0x2daa3e(0x257)+_0x2daa3e(0x232)+_0x2daa3e(0x35e)+'d\x20INTEGER\x20'+_0x2daa3e(0x2fe)+_0x2daa3e(0x18e)+_0x2daa3e(0x31f)+_0x2daa3e(0x1b6)+_0x2daa3e(0x1ff)+'\x20\x20');return;}const _0x2b94ac=await getTableColumns(_0x2daa3e(0x35f)),_0x1375f0=_0x2b94ac[_0x2daa3e(0x2ad)]('chat_jid'),_0x4dbec6=_0x2b94ac['includes'](_0x2daa3e(0x175))||_0x2b94ac[_0x2daa3e(0x2ad)](_0x2daa3e(0x365))||_0x2b94ac['includes'](_0x2daa3e(0x36f))||_0x2b94ac[_0x2daa3e(0x2ad)](_0x2daa3e(0x2e3)),_0x5b1e26=_0x2b94ac['includes']('creator_ji'+'d')||_0x2b94ac[_0x2daa3e(0x2ad)](_0x2daa3e(0x269))||_0x2b94ac[_0x2daa3e(0x2ad)](_0x2daa3e(0x260));if(_0x1375f0&&_0x4dbec6&&_0x5b1e26){if(!_0x2b94ac[_0x2daa3e(0x2ad)]('send_attem'+_0x2daa3e(0x195)))try{await db[_0x2daa3e(0x2ee)](_0x2daa3e(0x209)+_0x2daa3e(0x38b)+_0x2daa3e(0x169)+_0x2daa3e(0x247)+_0x2daa3e(0x38c)+'EGER\x20DEFAU'+_0x2daa3e(0x341));}catch(_0x1184bd){}if(!_0x2b94ac[_0x2daa3e(0x2ad)](_0x2daa3e(0x160)+'pt'))try{await db['exec'](_0x2daa3e(0x209)+_0x2daa3e(0x38b)+'s\x20ADD\x20COLU'+'MN\x20last_at'+_0x2daa3e(0x306)+_0x2daa3e(0x39e));}catch(_0x125c2a){}try{await db['exec'](_0x2daa3e(0x173)+_0x2daa3e(0x27b)+_0x2daa3e(0x36e)+_0x2daa3e(0x278)+_0x2daa3e(0x1b5)+_0x2daa3e(0x212)+_0x2daa3e(0x397));}catch(_0x55343b){}await db[_0x2daa3e(0x2ee)](_0x2daa3e(0x369)+_0x2daa3e(0x208)+'E\x20IF\x20NOT\x20E'+'XISTS\x20sche'+_0x2daa3e(0x37d)+_0x2daa3e(0x276)+_0x2daa3e(0x202)+_0x2daa3e(0x1a2)+_0x2daa3e(0x257)+_0x2daa3e(0x232)+_0x2daa3e(0x35e)+'d\x20INTEGER\x20'+_0x2daa3e(0x2fe)+_0x2daa3e(0x18e)+'\x20timezone\x20'+_0x2daa3e(0x1b6)+_0x2daa3e(0x1ff)+'\x20\x20');return;}const _0x144d70=await readAndNormalizeExistingSchedules();await db['exec'](_0x2daa3e(0x20e)+_0x2daa3e(0x30e)+_0x2daa3e(0x22a));try{await db[_0x2daa3e(0x2ee)](_0x2daa3e(0x385)+'LE\x20IF\x20NOT\x20'+'EXISTS\x20sch'+_0x2daa3e(0x347)+_0x2daa3e(0x2d4)+_0x2daa3e(0x358)+'R\x20PRIMARY\x20'+'KEY\x20AUTOIN'+_0x2daa3e(0x187)+'\x20\x20\x20\x20\x20\x20\x20cha'+_0x2daa3e(0x1a2)+_0x2daa3e(0x33a)+_0x2daa3e(0x30d)+_0x2daa3e(0x34a)+_0x2daa3e(0x309)+_0x2daa3e(0x378)+'time\x20TEXT,'+_0x2daa3e(0x170)+'end_at\x20INT'+_0x2daa3e(0x1c8)+_0x2daa3e(0x1d2)+_0x2daa3e(0x200)+_0x2daa3e(0x167)+_0x2daa3e(0x19d)+_0x2daa3e(0x399)+'ne\x20TEXT,\x0a\x20'+_0x2daa3e(0x203)+_0x2daa3e(0x28e)+_0x2daa3e(0x1c8)+_0x2daa3e(0x2b5)+_0x2daa3e(0x1bc)+_0x2daa3e(0x33a)+_0x2daa3e(0x2c7)+_0x2daa3e(0x1b1)+_0x2daa3e(0x2b8)+_0x2daa3e(0x1f9)+_0x2daa3e(0x26a)+_0x2daa3e(0x319)+_0x2daa3e(0x249)+_0x2daa3e(0x19a)+_0x2daa3e(0x221)+'attempt\x20IN'+_0x2daa3e(0x259)+'\x20\x20\x20\x20\x20creat'+'ed_at\x20INTE'+_0x2daa3e(0x2b7)+'T\x20(strftim'+'e(\x27%s\x27,\x27no'+'w\x27))\x0a\x20\x20\x20\x20\x20'+_0x2daa3e(0x30c));}catch(_0x137801){}const _0x3e1722=await db[_0x2daa3e(0x366)](_0x2daa3e(0x2cb)+'O\x20schedule'+'s_new\x20(cha'+_0x2daa3e(0x2d7)+_0x2daa3e(0x32d)+_0x2daa3e(0x27c)+'\x20frequency'+_0x2daa3e(0x27d)+_0x2daa3e(0x2e9)+_0x2daa3e(0x1cb)+_0x2daa3e(0x15e)+_0x2daa3e(0x1fe)+_0x2daa3e(0x18b)+_0x2daa3e(0x160)+'pt,\x20create'+_0x2daa3e(0x346)+_0x2daa3e(0x308)+_0x2daa3e(0x206)+',\x20?,\x20?,\x20?,'+'\x20?,\x20?,\x20?)');try{for(const _0x1a59b9 of _0x144d70){try{await _0x3e1722[_0x2daa3e(0x1cc)](_0x1a59b9[_0x2daa3e(0x382)]||'',_0x1a59b9[_0x2daa3e(0x175)]||'',_0x1a59b9[_0x2daa3e(0x1fd)]||null,_0x1a59b9[_0x2daa3e(0x25f)]||null,_0x1a59b9['frequency']||_0x2daa3e(0x1c9),_0x1a59b9[_0x2daa3e(0x2f8)]||null,_0x1a59b9[_0x2daa3e(0x251)]||0x2ac+0x1260+-0x150c,_0x1a59b9[_0x2daa3e(0x31d)+'d']||'',-0x6*0x246+-0x23ed+-0x3*-0x1086,-0x1b0+0x91d+-0x76d,null,_0x1a59b9[_0x2daa3e(0x22f)]||Math[_0x2daa3e(0x32b)](Date[_0x2daa3e(0x192)]()/(-0x10df+0x1c88+-0x1*0x7c1)));}catch(_0x23af9b){}}}finally{try{await _0x3e1722[_0x2daa3e(0x24b)]();}catch(_0x9aaedf){}}try{const _0x5c139d=_0x2daa3e(0x297)+_0x2daa3e(0x243)+Math[_0x2daa3e(0x32b)](Date[_0x2daa3e(0x192)]()/(0x5*-0x137+-0x67c*0x4+-0xbf9*-0x3));await db[_0x2daa3e(0x2ee)]('ALTER\x20TABL'+_0x2daa3e(0x38b)+_0x2daa3e(0x1e3)+'O\x20'+_0x5c139d+';'),await db[_0x2daa3e(0x2ee)](_0x2daa3e(0x209)+_0x2daa3e(0x38b)+_0x2daa3e(0x22d)+_0x2daa3e(0x339)+_0x2daa3e(0x2ab));try{await db[_0x2daa3e(0x2ee)](_0x2daa3e(0x173)+_0x2daa3e(0x27b)+_0x2daa3e(0x36e)+_0x2daa3e(0x278)+_0x2daa3e(0x1b5)+_0x2daa3e(0x212)+_0x2daa3e(0x397));}catch(_0x2f9617){}}catch(_0x3c85b3){throw _0x3c85b3;}finally{await db['exec'](_0x2daa3e(0x20e)+_0x2daa3e(0x30e)+_0x2daa3e(0x161));}await db[_0x2daa3e(0x2ee)]('\x0a\x20\x20\x20\x20\x20\x20CRE'+_0x2daa3e(0x23a)+_0x2daa3e(0x183)+_0x2daa3e(0x24d)+_0x2daa3e(0x27a)+_0x2daa3e(0x2b2)+_0x2daa3e(0x312)+_0x2daa3e(0x374)+_0x2daa3e(0x326)+'\x20\x20\x20\x20\x20\x20\x20\x20en'+_0x2daa3e(0x1ea)+_0x2daa3e(0x2b7)+'T\x201,\x0a\x20\x20\x20\x20\x20'+_0x2daa3e(0x1ed)+'e\x20TEXT\x0a\x20\x20\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20');}catch(_0x4128fb){throw _0x4128fb;}}function refreshConfig(){const _0x53adb5=_0x6de6b1;try{const _0x1e469c=getConfig()||{};CHECK_INTERVAL_MS=Number(_0x1e469c[_0x53adb5(0x1c6)+_0x53adb5(0x255)+'_MS']??CHECK_INTERVAL_MS),DEFAULT_TIMEZONE=_0x1e469c['SCHED_DEFA'+_0x53adb5(0x226)+'NE']||DEFAULT_TIMEZONE,SEND_RETRIES=Number(_0x1e469c[_0x53adb5(0x1f5)+_0x53adb5(0x229)]??SEND_RETRIES),INITIAL_BACKOFF_MS=Number(_0x1e469c[_0x53adb5(0x296)+_0x53adb5(0x383)+'F_MS']??INITIAL_BACKOFF_MS);}catch(_0x2f5e2d){}}try{typeof hotReloadConfig==='function'&&hotReloadConfig((_0x41669a=[])=>{try{refreshConfig();}catch(_0x4faa5b){}});}catch(_0x10bf19){}refreshConfig();function tryBuildSendApiFromBot(_0x9ad5a7){const _0x5d65d2=_0x6de6b1;if(!_0x9ad5a7)return null;if(typeof _0x9ad5a7[_0x5d65d2(0x317)+'e']===_0x5d65d2(0x166))return async(_0x2c9195,_0x5218a5)=>_0x9ad5a7[_0x5d65d2(0x317)+'e'](_0x2c9195,_0x5218a5);else{if(_0x9ad5a7[_0x5d65d2(0x22e)]&&typeof _0x9ad5a7[_0x5d65d2(0x22e)][_0x5d65d2(0x317)+'e']===_0x5d65d2(0x166))return async(_0xfe465b,_0x260c14)=>_0x9ad5a7[_0x5d65d2(0x22e)][_0x5d65d2(0x317)+'e'](_0xfe465b,_0x260c14);}return null;}function setupSendApi(_0x515af8){botRef=_0x515af8,sendApi=tryBuildSendApiFromBot(botRef);}async function performSend(_0x3bac5c,_0x4ee50b){const _0x5279ea=_0x6de6b1,_0x3e3ccc=_0x3bac5c||null;if(!_0x3e3ccc)throw new Error('no\x20send\x20ta'+_0x5279ea(0x20f)+_0x5279ea(0x288)+_0x5279ea(0x2c6)+'t\x20required'+')');if(typeof sendApi==='function'){await sendApi(_0x3e3ccc,_0x4ee50b);return;}const _0x3ebcc5=tryBuildSendApiFromBot(botRef);if(typeof _0x3ebcc5===_0x5279ea(0x166)){warn(_0x5279ea(0x28b)+'ndApi\x20was\x20'+_0x5279ea(0x30f)+_0x5279ea(0x35d)+'ack\x20lookup'+'.'),sendApi=_0x3ebcc5,await sendApi(_0x3e3ccc,_0x4ee50b);return;}throw new Error('no\x20sendApi'+'\x20available');}async function sendWithRetry(_0x48b588,_0x1f795a){const _0xd9ea04=_0x6de6b1,_0x547010=Number(SEND_RETRIES||-0x18c5*0x1+-0x261c+0x23f*0x1c);let _0x157322=0x1*-0x93b+0x9e5*-0x2+0x13*0x187,_0xff5fc=Number(INITIAL_BACKOFF_MS||0x265f+-0x19+-0x2452);while(_0x157322<_0x547010){try{return await performSend(_0x48b588,_0x1f795a),!![];}catch(_0x40b5e0){_0x157322++;const _0x1e40c9=String(_0x40b5e0?.[_0xd9ea04(0x175)]||'')[_0xd9ea04(0x1f1)+'e']()[_0xd9ea04(0x2ad)]('rate')||_0x40b5e0?.[_0xd9ea04(0x1a1)]===-0xd4b+0xdf0+0x108;if(_0x157322>=_0x547010||!_0x1e40c9)return![];await new Promise(_0xcf4386=>setTimeout(_0xcf4386,_0xff5fc)),_0xff5fc*=-0x1c65+-0xb00+0x395*0xb;}}return![];}async function sendScheduledMessage(_0x341ded){const _0x5de230=_0x6de6b1,{id:_0x3598f1,chat_jid:_0x1f6c11,message:_0x56ac81}=_0x341ded,_0x292aea={'text':_0x56ac81},_0x2ed840=Number(SEND_RETRIES||-0xa*-0x18f+0x179f+-0x2732);let _0x8274b0=0x103d*-0x2+0x13*-0x12e+0x36e4,_0x37c48e=Number(INITIAL_BACKOFF_MS||0x3*0x51a+-0x67*0x3+-0xc25*0x1);while(_0x8274b0<_0x2ed840){_0x8274b0++;try{return await performSend(_0x1f6c11,_0x292aea),{'success':!![],'unrecoverable':![]};}catch(_0x2c84e1){const _0x19469e=_0x2c84e1?.['message']||String(_0x2c84e1),_0x360ce6=_0x19469e[_0x5de230(0x1f1)+'e']()[_0x5de230(0x2ad)](_0x5de230(0x292))||_0x2c84e1?.[_0x5de230(0x1a3)]===-0x11b5+0x6b*0x28+0x290,_0x3a4766=_0x19469e['toLowerCas'+'e']()[_0x5de230(0x2ad)]('not\x20found')||_0x2c84e1?.[_0x5de230(0x1a3)]===0x5*0x2ea+-0x2a*0xb0+0x7f1*0x2;warn('[sched]\x20se'+'nd\x20attempt'+'\x20'+_0x8274b0+'/'+_0x2ed840+'\x20for\x20id='+_0x3598f1+_0x5de230(0x29c)+_0x19469e);if(_0x360ce6||_0x3a4766)return error(_0x5de230(0x32f)+'recoverabl'+_0x5de230(0x330)+_0x5de230(0x2ea)+_0x3598f1+':\x20'+_0x19469e+(_0x5de230(0x2f3)+'ying.')),{'success':![],'unrecoverable':!![]};if(_0x8274b0>=_0x2ed840)return error(_0x5de230(0x193)+_0x5de230(0x236)+'ttempt\x20fai'+_0x5de230(0x2fd)+'='+_0x3598f1+'.'),{'success':![],'unrecoverable':![]};await new Promise(_0x108800=>setTimeout(_0x108800,_0x37c48e)),_0x37c48e*=-0x3d1+-0x4*0x281+0xdd7;}}return{'success':![],'unrecoverable':![]};}function parseTimeToken(_0x211e39,_0x5b2e6a=DEFAULT_TIMEZONE){const _0x280971=_0x6de6b1;if(!_0x211e39||typeof _0x211e39!==_0x280971(0x28c))return null;const _0x5c4c45=_0x211e39[_0x280971(0x298)](),_0x5e4ebe=_0x5c4c45[_0x280971(0x1be)](/^in\s+(\d+)\s*(minute|min|minutes|m|hour|hours|hr|h|day|days|d)$/i);if(_0x5e4ebe){const _0x1e1a03=Number(_0x5e4ebe[0x416*-0x2+0x1869+-0x1*0x103c]),_0x3e2378=_0x5e4ebe[0x1ba8+-0x21*-0x1d+-0x1f63][_0x280971(0x1f1)+'e']();let _0x5b80fc=DateTime[_0x280971(0x192)]()[_0x280971(0x1dd)](_0x5b2e6a);if(_0x3e2378[_0x280971(0x2cd)](_0x280971(0x1ab))||_0x3e2378==='m')_0x5b80fc=_0x5b80fc[_0x280971(0x363)]({'minutes':_0x1e1a03});else{if(_0x3e2378[_0x280971(0x2cd)]('h')||_0x3e2378[_0x280971(0x2cd)]('hr'))_0x5b80fc=_0x5b80fc[_0x280971(0x363)]({'hours':_0x1e1a03});else{if(_0x3e2378['startsWith']('d'))_0x5b80fc=_0x5b80fc[_0x280971(0x363)]({'days':_0x1e1a03});}}if(_0x5b80fc[_0x280971(0x2be)])return{'type':'datetime','dt':_0x5b80fc};}if(/^\d{4}-\d{2}-\d{2}[ T]\d{1,2}:\d{2}$/[_0x280971(0x182)](_0x5c4c45)){const _0x161f48=_0x5c4c45['replace']('\x20','T'),_0x2bc7ee=DateTime[_0x280971(0x2d0)](_0x161f48,{'zone':_0x5b2e6a});if(_0x2bc7ee['isValid'])return{'type':_0x280971(0x393),'dt':_0x2bc7ee};}if(/^\d{1,2}:\d{2}$/['test'](_0x5c4c45)){const [_0x5dd4bc,_0x5a8e83]=_0x5c4c45[_0x280971(0x265)](':')[_0x280971(0x39c)](Number);if(Number['isInteger'](_0x5dd4bc)&&Number[_0x280971(0x2f1)](_0x5a8e83)&&_0x5dd4bc>=0xab1+0x22bd+-0x2d6e&&_0x5dd4bc<=-0x244f+-0x13b8+0x381e&&_0x5a8e83>=-0x22a6+-0x1*0x1336+0x35dc&&_0x5a8e83<=-0xcb3+0x8dd+-0x1*-0x411)return{'type':_0x280971(0x17d),'hhmm':String(_0x5dd4bc)[_0x280971(0x1e6)](-0x1a*0x37+0x82b+-0x293,'0')+':'+String(_0x5a8e83)[_0x280971(0x1e6)](0x1*-0x228f+0x129f*-0x1+-0x6a6*-0x8,'0')};}return null;}function shouldSendSlot(_0x1cc5eb,_0x406547){const _0x3f11c1=_0x6de6b1,_0xca12c1=_0x1cc5eb['frequency']||'daily',_0xba817f=_0x1cc5eb[_0x3f11c1(0x251)]||-0x2457+0x1bbd+0x89a,_0x3cccc5=_0xba817f?DateTime[_0x3f11c1(0x1a6)](_0xba817f*(-0x10ab*0x1+0x227c+-0xde9))[_0x3f11c1(0x1dd)](_0x406547[_0x3f11c1(0x2fa)]):null;if(!_0x3cccc5)return!![];if(_0xca12c1===_0x3f11c1(0x1c9))return!_0x3cccc5[_0x3f11c1(0x1ce)](_0x406547,_0x3f11c1(0x2bc));if(_0xca12c1==='weekly')return _0x406547[_0x3f11c1(0x34c)](_0x3cccc5,'days')[_0x3f11c1(0x34b)]>=-0x1f1c*0x1+-0x778+0x1*0x269b;if(_0xca12c1['startsWith'](_0x3f11c1(0x286)+'ys:')){const _0x6461ab=parseInt(_0xca12c1[_0x3f11c1(0x265)](':')[-0x1fed+-0x9*-0x102+-0x5b7*-0x4],-0x2b5+-0xc62*0x2+0x1b83);if(isNaN(_0x6461ab)||_0x6461ab<-0x7*-0x3d+0x408*-0x5+0x127e)return![];return _0x406547[_0x3f11c1(0x34c)](_0x3cccc5,_0x3f11c1(0x34b))['days']>=_0x6461ab;}if(_0xca12c1[_0x3f11c1(0x2cd)](_0x3f11c1(0x343)+_0x3f11c1(0x2bf))){const _0x3c632c=_0xca12c1[_0x3f11c1(0x265)](':')[-0x2057*0x1+0x2484+-0x42c][_0x3f11c1(0x265)](',')[_0x3f11c1(0x39c)](_0x32cb6f=>parseInt(_0x32cb6f,0x1*0xfc7+-0x26*0x86+0x427))[_0x3f11c1(0x23f)](Boolean);return _0x3c632c['includes'](_0x406547[_0x3f11c1(0x248)])&&!_0x3cccc5[_0x3f11c1(0x1ce)](_0x406547,_0x3f11c1(0x2bc));}if(_0xca12c1[_0x3f11c1(0x2cd)](_0x3f11c1(0x220)+_0x3f11c1(0x1db))){const _0x4feacc=parseInt(_0xca12c1['split'](':')[0x1*-0xd5b+-0x5b4+-0x3d*-0x50],0x151+-0x1577+-0x26*-0x88);return _0x406547[_0x3f11c1(0x2bc)]===_0x4feacc&&!_0x3cccc5[_0x3f11c1(0x1ce)](_0x406547,_0x3f11c1(0x2bc));}return![];}async function addScheduleRow(_0xa0c719){const _0x3c3b8d=_0x6de6b1;try{const _0x2c8aa9=await db[_0x3c3b8d(0x1cc)](_0x3c3b8d(0x2cb)+_0x3c3b8d(0x1b2)+'s\x20(chat_ji'+_0x3c3b8d(0x395)+',\x20time,\x20se'+_0x3c3b8d(0x2dd)+'quency,\x20ti'+_0x3c3b8d(0x390)+_0x3c3b8d(0x26c)+_0x3c3b8d(0x301)+_0x3c3b8d(0x320)+',\x20?,\x20?,\x20?,'+'\x20?,\x20?)',[_0xa0c719['chat_jid'],_0xa0c719[_0x3c3b8d(0x175)],_0xa0c719[_0x3c3b8d(0x1fd)],_0xa0c719['send_at'],_0xa0c719[_0x3c3b8d(0x16c)]||'daily',_0xa0c719[_0x3c3b8d(0x2f8)]||null,_0xa0c719[_0x3c3b8d(0x31d)+'d']]);return _0x2c8aa9?.['lastID']||null;}catch(_0x158874){return null;}}async function listSchedulesForChat(_0x30eb07){const _0xc43b94=_0x6de6b1;try{const _0x41f51d=await db[_0xc43b94(0x164)](_0xc43b94(0x35b)+_0xc43b94(0x23b)+'les\x20WHERE\x20'+_0xc43b94(0x354)+_0xc43b94(0x31e)+'Y\x20id\x20ASC',[_0x30eb07]);return _0x41f51d||[];}catch(_0x4a2681){return[];}}async function removeScheduleByDBId(_0x48ac9c){const _0x170257=_0x6de6b1;try{const _0x80a7f9=await db[_0x170257(0x1cc)](_0x170257(0x26b)+_0x170257(0x323)+_0x170257(0x2ae)+'\x20=\x20?',[_0x48ac9c]);return _0x80a7f9?.['changes']?!![]:![];}catch(_0x3708d){return![];}}function _0x207f(_0xa6d18d,_0x5bfe70){_0xa6d18d=_0xa6d18d-(-0xffa+-0xd0c+0x1e64);const _0x113107=_0x182f();let _0x2f0770=_0x113107[_0xa6d18d];return _0x2f0770;}async function removeAllSchedulesForChat(_0x742bdd){const _0x3b33bd=_0x6de6b1;try{const _0x308d7c=await db[_0x3b33bd(0x1cc)]('DELETE\x20FRO'+_0x3b33bd(0x323)+_0x3b33bd(0x377)+_0x3b33bd(0x25c),[_0x742bdd]);return _0x308d7c?.['changes']||0x6ac+-0x2*0xe15+0x7*0x312;}catch(_0x3fe994){return 0x42f+0x2*0x423+0x427*-0x3;}}async function updateScheduleFields(_0x225a9b,_0x5e395c={}){const _0x2ca63a=_0x6de6b1;try{const _0x3500c1=[],_0x2409c1=[];for(const _0x241a95 of Object[_0x2ca63a(0x181)](_0x5e395c)){_0x3500c1[_0x2ca63a(0x380)](_0x241a95+'\x20=\x20?'),_0x2409c1['push'](_0x5e395c[_0x241a95]);}if(!_0x3500c1['length'])return![];_0x2409c1[_0x2ca63a(0x380)](_0x225a9b);const _0x3bdc0a=_0x2ca63a(0x26d)+_0x2ca63a(0x2d1)+'\x20'+_0x3500c1['join'](',\x20')+(_0x2ca63a(0x1f2)+_0x2ca63a(0x2f5)),_0x3542d4=await db[_0x2ca63a(0x1cc)](_0x3bdc0a,_0x2409c1);return _0x3542d4?.[_0x2ca63a(0x196)]?!![]:![];}catch(_0x33fdbf){return![];}}async function getChatTimezone(_0x5d0432){const _0x505835=_0x6de6b1;try{const _0x313110=await db[_0x505835(0x1ad)](_0x505835(0x35c)+_0x505835(0x2e8)+_0x505835(0x246)+_0x505835(0x26e)+_0x505835(0x237)+_0x505835(0x1df),[_0x5d0432]);return _0x313110?.[_0x505835(0x2f8)]||null;}catch(_0x412be9){return null;}}async function setChatTimezone(_0x18e3e4,_0xd38d09){const _0x2def64=_0x6de6b1;try{return await db['run']('INSERT\x20INT'+_0x2def64(0x1b2)+_0x2def64(0x38f)+_0x2def64(0x396)+',\x20timezone'+')\x20VALUES\x20('+_0x2def64(0x1d8)+_0x2def64(0x333)+_0x2def64(0x22c)+_0x2def64(0x240)+_0x2def64(0x218)+_0x2def64(0x316)+_0x2def64(0x2f8),[_0x18e3e4,_0xd38d09]),!![];}catch(_0x4f87d4){return![];}}async function executorTick(){const _0x5caf1d=_0x6de6b1;if(executorRunning)return;executorRunning=!![];try{const _0x305291=await db['all'](_0x5caf1d(0x35b)+_0x5caf1d(0x23b)+'les\x20WHERE\x20'+'enabled\x20=\x20'+'1\x20ORDER\x20BY'+_0x5caf1d(0x32e));if(!_0x305291||_0x305291[_0x5caf1d(0x20d)]===0x142b+-0xf12+-0x105*0x5)return;for(const _0xaf7f8d of _0x305291){try{const _0x1814f7=_0xaf7f8d['timezone']||await getChatTimezone(_0xaf7f8d[_0x5caf1d(0x382)])||DEFAULT_TIMEZONE,_0x5bdfcf=DateTime['now']()['setZone'](_0x1814f7),_0x3eb907=Math[_0x5caf1d(0x32b)](_0x5bdfcf['toSeconds']());let _0x55eb7c=![],_0x2be19b=![];if(_0xaf7f8d[_0x5caf1d(0x25f)]&&Number(_0xaf7f8d['send_at'])>0x105e+-0x8*-0x2c7+-0x2696)_0x2be19b=!![],Number(_0xaf7f8d[_0x5caf1d(0x25f)])<=_0x3eb907&&(_0x55eb7c=!![]);else{if(_0xaf7f8d[_0x5caf1d(0x1fd)]){const _0x23ae68=_0x5bdfcf['toFormat'](_0x5caf1d(0x168));if(_0x23ae68===_0xaf7f8d[_0x5caf1d(0x1fd)]){const _0x4a8557={'id':_0xaf7f8d['id'],'frequency':_0xaf7f8d[_0x5caf1d(0x16c)]||_0x5caf1d(0x1c9),'last_sent':_0xaf7f8d['last_sent']||-0x1172+0xc*0x31d+-0x9f5*0x2};shouldSendSlot(_0x4a8557,_0x5bdfcf)&&(_0x55eb7c=!![]);}}}if(!_0x55eb7c)continue;const _0x57fc4b=await sendScheduledMessage(_0xaf7f8d);if(_0x57fc4b['success']){if(_0x2be19b){const _0x5716c1=await removeScheduleByDBId(_0xaf7f8d['id']);!_0x5716c1&&await updateScheduleFields(_0xaf7f8d['id'],{'enabled':0x0,'last_sent':_0x3eb907});}else await updateScheduleFields(_0xaf7f8d['id'],{'last_sent':_0x3eb907,'send_attempts':0x0});}else{const _0x34d2c5=(_0xaf7f8d[_0x5caf1d(0x360)+'pts']||0x1*-0x1797+-0x167e*-0x1+0x119)+(0x6b1+0x1437+0x47*-0x61);_0x57fc4b[_0x5caf1d(0x2b1)+_0x5caf1d(0x295)]||_0x34d2c5>=MAX_DB_ATTEMPTS?await updateScheduleFields(_0xaf7f8d['id'],{'enabled':0x0,'last_attempt':_0x3eb907}):await updateScheduleFields(_0xaf7f8d['id'],{'send_attempts':_0x34d2c5,'last_attempt':_0x3eb907});}}catch(_0x353b5a){}}}catch(_0x1509b3){}finally{executorRunning=![];}}function startSchedulerAligned(){const _0x4a9018=_0x6de6b1;stopScheduler();const _0x1d7635=0x1*-0xcb9e+0x1b974+-0x1bb*0x2-Date[_0x4a9018(0x192)]()%(0xe326+0x1c8ea+-0x8*0x3836);setTimeout(()=>{const _0x97042d=_0x4a9018;executorTick()[_0x97042d(0x25a)](_0x4d7b02=>warn(_0x97042d(0x1f7)+_0x97042d(0x245)+'utor\x20error'+':\x20'+(_0x4d7b02?.[_0x97042d(0x175)]||_0x4d7b02))),schedulerIntervalHandle=setInterval(()=>{const _0x383f71=_0x97042d;executorTick()[_0x383f71(0x25a)](_0x301c5d=>warn(_0x383f71(0x33e)+_0x383f71(0x1b3)+_0x383f71(0x368)+(_0x301c5d?.[_0x383f71(0x175)]||_0x301c5d)));},CHECK_INTERVAL_MS),info(_0x97042d(0x362)+_0x97042d(0x2ac)+_0x97042d(0x2cc)+'gned\x20to\x20mi'+_0x97042d(0x38e));},_0x1d7635);}function stopScheduler(){const _0xb04ae7=_0x6de6b1;schedulerIntervalHandle&&(clearInterval(schedulerIntervalHandle),schedulerIntervalHandle=null,info(_0xb04ae7(0x362)+'heduler\x20st'+_0xb04ae7(0x1cd)));}function extractTextFromMessage(_0x51a9c0){const _0x50bd2c=_0x6de6b1;if(!_0x51a9c0||!_0x51a9c0[_0x50bd2c(0x175)])return'';const _0x41fee4=_0x51a9c0[_0x50bd2c(0x175)];if(_0x41fee4[_0x50bd2c(0x219)+'on'])return _0x41fee4[_0x50bd2c(0x219)+'on'];if(_0x41fee4[_0x50bd2c(0x238)+'xtMessage']?.[_0x50bd2c(0x2e3)])return _0x41fee4['extendedTe'+_0x50bd2c(0x17e)][_0x50bd2c(0x2e3)];if(_0x41fee4[_0x50bd2c(0x345)+'ge']?.[_0x50bd2c(0x1c5)])return _0x41fee4[_0x50bd2c(0x345)+'ge'][_0x50bd2c(0x1c5)];if(_0x41fee4[_0x50bd2c(0x1d7)+'ge']?.[_0x50bd2c(0x1c5)])return _0x41fee4[_0x50bd2c(0x1d7)+'ge']['caption'];if(_0x41fee4[_0x50bd2c(0x18f)+_0x50bd2c(0x271)+'ge']?.[_0x50bd2c(0x274)+'ttonId'])return _0x41fee4[_0x50bd2c(0x18f)+_0x50bd2c(0x271)+'ge'][_0x50bd2c(0x274)+_0x50bd2c(0x217)];if(_0x41fee4[_0x50bd2c(0x22b)+_0x50bd2c(0x179)]?.[_0x50bd2c(0x256)+_0x50bd2c(0x2ec)]?.[_0x50bd2c(0x230)+_0x50bd2c(0x201)])return _0x41fee4[_0x50bd2c(0x22b)+_0x50bd2c(0x179)][_0x50bd2c(0x256)+_0x50bd2c(0x2ec)]['selectedRo'+'wId'];return'';}function splitFirstLinePreserveRest(_0x4d9103){const _0x3aef66=_0x6de6b1,_0x1074e2=_0x4d9103['split'](/\r?\n/),_0x44c607=_0x1074e2[_0x3aef66(0x20d)]>0x6a*-0x46+-0x2079+0x3d75?_0x1074e2[_0x3aef66(0x279)]():'',_0x589282=_0x1074e2[_0x3aef66(0x163)]('\x0a'),_0x19f311=_0x44c607['trim']()[_0x3aef66(0x265)](/\s+/)[_0x3aef66(0x23f)](Boolean);return{'firstLine':_0x44c607,'restText':_0x589282,'firstTokens':_0x19f311};}function findGpAndCleanBodyFromRestAndFirst(_0x3f9871,_0xc63d60){const _0x56724f=_0x6de6b1,_0x19980b=(_0xc63d60&&_0xc63d60[_0x56724f(0x20d)]?_0xc63d60:'')+'\x0a'+(_0x3f9871||''),_0xcb9a1c=_0x19980b[_0x56724f(0x1be)](/\bgp[:\s]+(\S+)/i),_0x11f9b9=_0xcb9a1c?_0xcb9a1c[-0x2486+-0x65*-0xe+0x1f01][_0x56724f(0x298)]():null;let _0x34e14c=(_0xc63d60||'')[_0x56724f(0x265)](/\r?\n/);if(!_0x34e14c||_0x34e14c[_0x56724f(0x20d)]===-0x3c1*0x1+0x1e9*-0x1+0x5aa||_0x34e14c['every'](_0x169811=>!_0x169811['trim']()))return{'gpValue':_0x11f9b9,'cleanedBody':''};const _0x2c11e2=_0x34e14c[_0x56724f(0x39c)](_0x21943a=>_0x21943a[_0x56724f(0x199)](/^\s*gp[:\s]+\S+\s*$/i,'')[_0x56724f(0x199)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x56724f(0x2fc)]())['filter'](_0x3eb261=>_0x3eb261['length']>-0x1160+-0xd16+0x1e76),_0x4e21da=_0x2c11e2['join']('\x0a')[_0x56724f(0x298)]();return{'gpValue':_0x11f9b9,'cleanedBody':_0x4e21da};}function extractInlineAfterToken(_0x58ac9d,_0x574005){const _0x528de1=_0x6de6b1;if(!_0x58ac9d||!_0x574005)return'';try{const _0x3cd5ad=new RegExp('\x5cb'+_0x574005[_0x528de1(0x199)](/[.*+?^${}()|[\]\\]/g,_0x528de1(0x38a))+'\x5cb'),_0x42ebaa=_0x58ac9d[_0x528de1(0x1be)](_0x3cd5ad);if(!_0x42ebaa)return'';const _0x4b27d7=_0x58ac9d[_0x528de1(0x20a)](_0x42ebaa[0x7*0x480+-0x1a6*-0x5+-0x2*0x13df]),_0x3a07b5=_0x4b27d7+_0x42ebaa[-0x6*0x3bc+-0x1*0x1a2b+0x5*0x9b7][_0x528de1(0x20d)];let _0x13ad48=_0x58ac9d[_0x528de1(0x26f)](_0x3a07b5)['replace'](/^\s+/,'');return _0x13ad48=_0x13ad48['replace'](/\s*\bgp[:\s]+\S+\s*$/i,'')['trim'](),_0x13ad48;}catch(_0x301c47){return'';}}const USAGE=_0x6de6b1(0x290)+_0x6de6b1(0x28f)+'s*\x0a\x0a>\x20*sch'+_0x6de6b1(0x282)+_0x6de6b1(0x2e1)+_0x6de6b1(0x165)+_0x6de6b1(0x1c3)+_0x6de6b1(0x1ba)+_0x6de6b1(0x303)+_0x6de6b1(0x32a)+'ge...>`\x0aâ€£\x20'+_0x6de6b1(0x1a9)+_0x6de6b1(0x1e2)+_0x6de6b1(0x35a)+'\x20or\x20on\x20nex'+_0x6de6b1(0x239)+_0x6de6b1(0x1d9)+_0x6de6b1(0x233)+_0x6de6b1(0x39b)+_0x6de6b1(0x1e5)+_0x6de6b1(0x2c5)+'mm>`\x20`[Nda'+_0x6de6b1(0x1d4)+_0x6de6b1(0x1ac)+_0x6de6b1(0x234)+_0x6de6b1(0x373)+_0x6de6b1(0x321)+_0x6de6b1(0x2af)+_0x6de6b1(0x364)+_0x6de6b1(0x228)+_0x6de6b1(0x394)+_0x6de6b1(0x335)+'\x20time.\x0a\x0a>\x20'+_0x6de6b1(0x38d)+_0x6de6b1(0x1b7)+'all\x20schedu'+_0x6de6b1(0x2e6)+'es.\x0a\x0a>\x20*sc'+'hed\x20delete'+_0x6de6b1(0x1e7)+_0x6de6b1(0x39d)+'number,...'+'\x20|\x20all>`\x0aâ€£'+'\x20Delete\x20on'+_0x6de6b1(0x21e)+_0x6de6b1(0x361)+_0x6de6b1(0x27e)+_0x6de6b1(0x21f)+_0x6de6b1(0x262)+_0x6de6b1(0x34e)+_0x6de6b1(0x268)+'in\x20N\x20hours'+_0x6de6b1(0x355)+_0x6de6b1(0x231)+_0x6de6b1(0x387)+'\x20the\x20time\x20'+_0x6de6b1(0x2a3)+_0x6de6b1(0x1dc)+_0x6de6b1(0x180)+_0x6de6b1(0x1c0)+_0x6de6b1(0x310)+_0x6de6b1(0x1f6)+_0x6de6b1(0x2db)+_0x6de6b1(0x214)+_0x6de6b1(0x348)+_0x6de6b1(0x2d6)+_0x6de6b1(0x250)+_0x6de6b1(0x21a)+_0x6de6b1(0x25e)+_0x6de6b1(0x1d6)+_0x6de6b1(0x1e7)+'>`\x0aâ€£\x20Tempo'+_0x6de6b1(0x17a)+_0x6de6b1(0x23c)+_0x6de6b1(0x1c1)+_0x6de6b1(0x1ae)+_0x6de6b1(0x17b)+_0x6de6b1(0x311)+'er>`\x0aâ€£\x20Re-'+_0x6de6b1(0x2e7)+_0x6de6b1(0x284)+_0x6de6b1(0x1ee)+'essage.\x0a',processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x1282+-0x1191*-0x2+-0x108c)*(0x1*0x367+0x17e0+0xc1*-0x1f);function markCmdProcessed(_0x330290){const _0x4559cd=_0x6de6b1;if(!_0x330290)return;if(processedCmdKeys[_0x4559cd(0x1fb)](_0x330290))try{clearTimeout(processedCmdKeys[_0x4559cd(0x1ad)](_0x330290));}catch(_0x1037e3){}const _0x1c6dc6=setTimeout(()=>processedCmdKeys['delete'](_0x330290),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x4559cd(0x263)](_0x330290,_0x1c6dc6);}function isCmdProcessed(_0x39ecfc){const _0x40ade0=_0x6de6b1;return _0x39ecfc&&processedCmdKeys[_0x40ade0(0x1fb)](_0x39ecfc);}async function resolveDefaultChatJidsForUser(_0x524523){const _0x3d9410=_0x6de6b1;try{const _0x3cb146=await getDefault(_0x524523)[_0x3d9410(0x25a)](()=>null);if(!_0x3cb146||Array[_0x3d9410(0x18a)](_0x3cb146)&&_0x3cb146[_0x3d9410(0x20d)]===0xc6d+-0x1727*0x1+0xaba)return[];const _0x58529d=Array[_0x3d9410(0x18a)](_0x3cb146)?_0x3cb146:[_0x3cb146],_0x287833=[];for(const _0x4fcb2d of _0x58529d){try{const _0x69243=await getConnection(_0x4fcb2d)['catch'](()=>null);if(Array[_0x3d9410(0x18a)](_0x69243))_0x287833[_0x3d9410(0x380)](..._0x69243);else{if(_0x69243)_0x287833[_0x3d9410(0x380)](String(_0x69243));}}catch(_0x165b08){warn(_0x3d9410(0x21b)+_0x3d9410(0x36a)+'nnection\x20'+_0x4fcb2d+_0x3d9410(0x29c)+(_0x165b08?.[_0x3d9410(0x175)]||_0x165b08));}}return uniqArray(_0x287833);}catch(_0x289547){return[];}}async function getCombinedSchedulesForChats(_0x4dce5f){const _0x3a20fb=[];for(const _0x693d9a of _0x4dce5f){const _0x145815=await listSchedulesForChat(_0x693d9a);for(const _0x4be3f5 of _0x145815){_0x3a20fb['push'](Object['assign']({},_0x4be3f5,{'chat_jid':_0x693d9a}));}}return _0x3a20fb;}async function resolveNumberToDbId(_0x57ccba,_0x3d7e5d){const _0x171373=_0x6de6b1;if(!_0x57ccba||!Number[_0x171373(0x2f1)](_0x57ccba)||_0x57ccba<-0x1a84*-0x1+-0x872*-0x4+-0x3c4b)return null;const _0x36421e=await getCombinedSchedulesForChats(_0x3d7e5d);if(!_0x36421e||_0x36421e[_0x171373(0x20d)]<_0x57ccba)return null;return _0x36421e[_0x57ccba-(-0xb*-0x38+0x82e+-0xa95)]['id'];}async function findStoredMatchFromFindings(_0x2fb64e=[]){const _0x5f0c78=_0x6de6b1;try{const _0x405032=await listSudo();if(!Array[_0x5f0c78(0x18a)](_0x405032)||_0x405032[_0x5f0c78(0x20d)]===0xb49+-0x1*0x4a9+0x1*-0x6a0)return null;const _0x53c31e=new Set(_0x405032[_0x5f0c78(0x39c)](String));for(const _0x50a6b3 of _0x2fb64e||[]){if(!_0x50a6b3||typeof _0x50a6b3[_0x5f0c78(0x37e)]!==_0x5f0c78(0x28c))continue;const _0x35bf23=normalizeToJid(_0x50a6b3[_0x5f0c78(0x37e)]);if(_0x35bf23&&_0x53c31e[_0x5f0c78(0x1fb)](_0x35bf23))return _0x35bf23;if(_0x53c31e[_0x5f0c78(0x1fb)](_0x50a6b3[_0x5f0c78(0x37e)]))return _0x50a6b3[_0x5f0c78(0x37e)];const _0x50913b=String(_0x50a6b3[_0x5f0c78(0x37e)])[_0x5f0c78(0x265)]('@')[0x192c+-0x3*0x1ac+0x285*-0x8][_0x5f0c78(0x265)](':')[-0x2668+0x74*0xb+0x4*0x85b];if(_0x50913b)for(const _0x32a33a of _0x405032){const _0x54bed9=String(_0x32a33a)[_0x5f0c78(0x265)]('@')[0x3*-0x4ff+-0x1*0x9e7+0x18e4];if(_0x54bed9&&_0x54bed9===_0x50913b)return _0x32a33a;}}return null;}catch(_0x64d937){return null;}}export async function onMessage(_0x4b242f,_0x907a3){const _0x206294=_0x6de6b1;try{if(!_0x4b242f||!_0x4b242f[_0x206294(0x225)]||!_0x4b242f[_0x206294(0x175)]||!_0x907a3)return;const _0x243975=String(_0x4b242f[_0x206294(0x225)][_0x206294(0x2e5)]||'')+'::'+String(_0x4b242f[_0x206294(0x225)]['id']||_0x4b242f['key'][_0x206294(0x23d)+'t']||'');if(isCmdProcessed(_0x243975))return;markCmdProcessed(_0x243975);if(!_0x4b242f[_0x206294(0x2bd)])return;const _0x4bae38=typeof _0x4b242f[_0x206294(0x2e3)]===_0x206294(0x28c)&&_0x4b242f[_0x206294(0x2e3)]['trim']()[_0x206294(0x20d)]?_0x4b242f['text']:extractTextFromMessage(_0x4b242f)||'';if(!_0x4bae38)return;const _0x349810=_0x4b242f[_0x206294(0x225)]['remoteJid'],_0x240ee9=typeof _0x349810===_0x206294(0x28c)&&_0x349810['endsWith'](_0x206294(0x2fb));if(_0x240ee9){const _0x458545=await isadmin(botRef,_0x4b242f);if(!_0x458545)return;const _0x1dd783=String(_0x4bae38)['trim'](),{firstLine:_0x218753,restText:_0x51fa2b,firstTokens:_0x32d56f}=splitFirstLinePreserveRest(_0x1dd783),_0x16826e=(_0x32d56f[0x133e+-0x4*-0x963+-0x38ca]||'')['toLowerCas'+'e']();if(!commands[_0x206294(0x2ad)](_0x16826e))return;const _0x3dd8ef=(_0x32d56f[0x1*0x2523+0x18*0x18e+-0x4a72]||'')[_0x206294(0x1f1)+'e'](),_0x15c0d5=_0x4b242f['key'][_0x206294(0x23d)+'t']||_0x4b242f['key'][_0x206294(0x2ba)]||_0x4b242f[_0x206294(0x225)][_0x206294(0x2e5)]||'',_0xb7f0eb=(_0x15c0d5||'')[_0x206294(0x265)]('@')[0x1ac4+-0x1a8a+-0x1*0x3a],_0x308865=await resolveDefaultChatJidsForUser(_0xb7f0eb),_0x33790b=_0x349810;if(!_0x308865||_0x308865[_0x206294(0x20d)]===0x9e6+-0x52a+0x6*-0xca){await sendWithRetry(_0x33790b,{'text':'Could\x20not\x20'+'resolve\x20yo'+_0x206294(0x2c0)+_0x206294(0x34f)+'n(s).\x20Set\x20'+_0x206294(0x2f6)+_0x206294(0x25b)+_0x206294(0x36b)});return;}await handleSchedCommandGroup(_0x4b242f,{'firstLine':_0x218753,'restText':_0x51fa2b,'firstTokens':_0x32d56f,'sub':_0x3dd8ef,'defaultChatJids':_0x308865,'confirmationTarget':_0x33790b,'senderJid':_0x15c0d5});return;}const _0x98dabe=Boolean(_0x4b242f[_0x206294(0x225)][_0x206294(0x332)]);let _0x447ceb=null;if(_0x98dabe){const _0x419f23=getBotJid();if(!_0x419f23)return;_0x447ceb=_0x419f23;}else{let _0x2099b9=![];try{_0x2099b9=await isSudo(botRef,_0x4b242f);}catch(_0x32e1a5){_0x2099b9=![];}if(!_0x2099b9)return;const _0x3d10a8=userJidFromCtx(_0x4b242f)||{'findings':[]},_0x17cad2=await findStoredMatchFromFindings(_0x3d10a8[_0x206294(0x39a)]||[]);if(!_0x17cad2)return;_0x447ceb=_0x17cad2;}const _0x143817=String(_0x4bae38),{firstLine:_0x19f72b,restText:_0x32bda8,firstTokens:_0x1505f7}=splitFirstLinePreserveRest(_0x143817),_0x1cb464=(_0x1505f7[-0x956*0x3+0x190c+0x2*0x17b]||'')[_0x206294(0x1f1)+'e']();if(!commands[_0x206294(0x2ad)](_0x1cb464))return;const _0x441a16=(_0x1505f7[0x1*0xaf1+0x607+0x10f7*-0x1]||'')[_0x206294(0x1f1)+'e']();if(!_0x441a16||_0x441a16===_0x206294(0x204)){await sendWithRetry(_0x447ceb,{'text':USAGE});return;}const _0x205905=[_0x206294(0x235),_0x206294(0x277),_0x206294(0x322),_0x206294(0x266),_0x206294(0x33b),_0x206294(0x16c),_0x206294(0x340),_0x206294(0x2c4)],{gpValue:_0x76d589,cleanedBody:_0x75b75f}=findGpAndCleanBodyFromRestAndFirst(_0x19f72b,_0x32bda8);if(_0x205905[_0x206294(0x2ad)](_0x441a16)&&!_0x76d589){await sendWithRetry(_0x447ceb,{'text':_0x206294(0x2d9)+_0x206294(0x242)+_0x206294(0x21d)+'d|all>\x20inl'+_0x206294(0x367)+_0x206294(0x338)+'hedules.\x20E'+'xample:\x0asc'+_0x206294(0x1ca)+':00\x20Hello\x20'+'there\x0amore'+_0x206294(0x336)+_0x206294(0x1f0)});return;}let _0x1174fd=[];if(_0x76d589){const _0x1690ea=_0x76d589[_0x206294(0x298)]();if(_0x1690ea[_0x206294(0x1f1)+'e']()===_0x206294(0x164))_0x1174fd=await _0x31733e[_0x206294(0x15f)+_0x206294(0x23e)]();else{const _0x55c5a8=await _0x31733e['resolveNam'+'e'](_0x1690ea);if(_0x55c5a8)_0x1174fd=[_0x55c5a8];else{if(_0x1690ea[_0x206294(0x2ad)]('@'))_0x1174fd=[_0x31733e[_0x206294(0x2e0)+_0x206294(0x227)](_0x1690ea)];}}if(_0x205905[_0x206294(0x2ad)](_0x441a16)&&(!_0x1174fd||_0x1174fd['length']===0x15a5+-0x5*0x4b9+0x1f8)){await sendWithRetry(_0x447ceb,{'text':_0x206294(0x2e4)+_0x206294(0x2a0)+_0x206294(0x2bb)+_0x76d589+(_0x206294(0x21c)+_0x206294(0x325)+_0x206294(0x328)+'roup\x20JID.')});return;}}await handleSchedCommandPM(_0x4b242f,{'sub':_0x441a16,'firstLine':_0x19f72b,'restText':_0x32bda8,'firstTokens':_0x1505f7,'targetChatJids':_0x1174fd,'confirmationTarget':_0x447ceb,'senderJid':_0x4b242f['key']['participan'+'t']||_0x4b242f[_0x206294(0x225)][_0x206294(0x2ba)]||'','cleanedBody':_0x75b75f});return;}catch(_0x38d4ca){error('[sched]\x20on'+_0x206294(0x372)+'ror:\x20'+(_0x38d4ca?.['message']||_0x38d4ca));}}async function handleSchedCommandGroup(_0x41fd8d,{firstLine:_0x15a1ae,restText:_0x47dfb2,firstTokens:_0x1184b7,sub:_0x286e2e,defaultChatJids:_0x28a696,confirmationTarget:_0x5c4f22,senderJid:_0x570cce}){const _0x293762=_0x6de6b1;try{if(!_0x286e2e||_0x286e2e===_0x293762(0x204)){await sendWithRetry(_0x5c4f22,{'text':USAGE});return;}if(_0x286e2e==='once'){const _0x358fc3=_0x1184b7[-0xb*-0xf5+-0x2*-0x8b+-0xb9b*0x1],_0x15baa8=_0x1184b7[-0x146c+-0x15*-0xcf+-0x1ba*-0x2]&&/^\d+$/[_0x293762(0x182)](_0x1184b7[0x1*0x263f+-0x53*-0x11+0x3*-0xe95])?Number(_0x1184b7[-0x1*0x58f+-0x2014+0x25a6]):null;let _0x2b5c36='';if(_0x358fc3){const _0x9ecc7c=new RegExp('\x5cb'+_0x358fc3['replace'](/[.*+?^${}()|[\]\\]/g,_0x293762(0x38a))+'\x5cb'),_0x1e74b8=_0x15a1ae[_0x293762(0x1be)](_0x9ecc7c);if(_0x1e74b8){const _0x2fdbbc=_0x15a1ae[_0x293762(0x20a)](_0x1e74b8[0x1eaa+0x16*-0x11f+-0x600]),_0x1d9658=_0x2fdbbc+_0x1e74b8[0x45c+0x220c+-0x2668][_0x293762(0x20d)];_0x2b5c36=_0x15a1ae[_0x293762(0x26f)](_0x1d9658)['replace'](/^\s*/,'');if(_0x2b5c36&&/^\d+/[_0x293762(0x182)](_0x2b5c36))_0x2b5c36=_0x2b5c36[_0x293762(0x199)](/^\d+\s*/,'');}}const _0x386055=_0x2b5c36&&_0x47dfb2?_0x2b5c36+'\x0a'+_0x47dfb2:_0x2b5c36||_0x47dfb2||'';if(!_0x358fc3||!_0x386055||_0x386055['trim']()[_0x293762(0x20d)]===-0x4e0+0x234*0x2+0x14*0x6){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x29a)+_0x293762(0x299)+_0x293762(0x1b0)+_0x293762(0x2d5)+_0x293762(0x211)});return;}const _0x41476f=[];for(const _0x519fcb of _0x28a696){const _0xb793f8=await getChatTimezone(_0x519fcb)||DEFAULT_TIMEZONE,_0x150184=parseTimeToken(_0x358fc3,_0xb793f8);if(!_0x150184){_0x41476f['push']({'chat':_0x519fcb,'ok':![],'reason':'parse_fail'+'ed'});continue;}if(_0x150184[_0x293762(0x31b)]===_0x293762(0x393)){const _0x231305=_0x150184['dt'],_0x2dafe6=Math['floor'](_0x231305[_0x293762(0x258)]()/(0x2*0xd25+0x39c+-0x1*0x19fe)),_0x59b701=await addScheduleRow({'chat_jid':_0x519fcb,'message':_0x386055,'time':null,'send_at':_0x2dafe6,'frequency':_0x293762(0x235),'timezone':_0x231305[_0x293762(0x1cf)]||_0xb793f8,'creator_jid':_0x570cce});if(_0x59b701)_0x41476f['push']({'chat':_0x519fcb,'ok':!![],'id':_0x59b701,'when':_0x231305[_0x293762(0x2a2)+_0x293762(0x174)](DateTime[_0x293762(0x304)+'ED'])});else _0x41476f[_0x293762(0x380)]({'chat':_0x519fcb,'ok':![],'reason':_0x293762(0x36c)});continue;}if(_0x150184[_0x293762(0x31b)]==='hhmm'){const [_0x4894f9,_0x140da8]=_0x150184['hhmm'][_0x293762(0x265)](':')[_0x293762(0x39c)](Number);let _0x597bdb=DateTime[_0x293762(0x192)]()[_0x293762(0x1dd)](_0xb793f8),_0x54906b=_0x597bdb[_0x293762(0x16a)](_0x293762(0x2bc))[_0x293762(0x263)]({'hour':_0x4894f9,'minute':_0x140da8,'second':0x0,'millisecond':0x0});if(_0x15baa8&&Number[_0x293762(0x2f1)](_0x15baa8)&&_0x15baa8>=0xd3*0x28+0x88f*0x1+-0x2986)_0x54906b=_0x54906b[_0x293762(0x363)]({'days':Number(_0x15baa8)});else{if(_0x54906b<=_0x597bdb)_0x54906b=_0x54906b[_0x293762(0x363)]({'days':0x1});}const _0x467560=Math['floor'](_0x54906b[_0x293762(0x258)]()/(0xbbb+-0x1*0x135d+0x1a6*0x7)),_0x57989a=await addScheduleRow({'chat_jid':_0x519fcb,'message':_0x386055,'time':null,'send_at':_0x467560,'frequency':_0x293762(0x235),'timezone':_0xb793f8,'creator_jid':_0x570cce});if(_0x57989a)_0x41476f['push']({'chat':_0x519fcb,'ok':!![],'id':_0x57989a,'when':_0x54906b[_0x293762(0x2a2)+_0x293762(0x174)](DateTime['DATETIME_M'+'ED'])});else _0x41476f[_0x293762(0x380)]({'chat':_0x519fcb,'ok':![],'reason':_0x293762(0x36c)});continue;}_0x41476f[_0x293762(0x380)]({'chat':_0x519fcb,'ok':![],'reason':_0x293762(0x1ef)+_0x293762(0x18c)});}const _0x414bbb=_0x41476f['filter'](_0x4a40d3=>_0x4a40d3['ok']),_0x89b6fb=_0x41476f['filter'](_0x250739=>!_0x250739['ok']);let _0x3b4aa2='';if(_0x414bbb[_0x293762(0x20d)]){_0x3b4aa2+=_0x293762(0x16d)+'one-off\x20fo'+'r\x20'+_0x414bbb[_0x293762(0x20d)]+('\x20default\x20c'+'onnection('+_0x293762(0x350));for(const _0x1bc35f of _0x414bbb)_0x3b4aa2+='â€¢\x20'+_0x1bc35f[_0x293762(0x1e0)]+_0x293762(0x2eb)+_0x1bc35f['id']+'\x20at\x20'+_0x1bc35f[_0x293762(0x37b)]+'\x0a';}if(_0x89b6fb['length']){_0x3b4aa2+=_0x293762(0x315)+'\x20'+_0x89b6fb[_0x293762(0x20d)]+(_0x293762(0x29b)+'onnection('+_0x293762(0x350));for(const _0x33f224 of _0x89b6fb)_0x3b4aa2+='â€¢\x20'+_0x33f224[_0x293762(0x1e0)]+_0x293762(0x334)+_0x33f224[_0x293762(0x398)]+'\x0a';}await sendWithRetry(_0x5c4f22,{'text':_0x3b4aa2[_0x293762(0x298)]()||_0x293762(0x2c2)+_0x293762(0x2f9)+'.'});return;}if(_0x286e2e===_0x293762(0x277)){if(!_0x1184b7[-0x1*-0x1ce7+-0x37e+-0x1967]){await sendWithRetry(_0x5c4f22,{'text':'Usage:\x20sch'+'ed\x20add\x20<HH'+_0x293762(0x37a)+'M-DDTHH:mm'+'|in\x20N\x20hour'+_0x293762(0x1af)+_0x293762(0x314)+_0x293762(0x31a)});return;}const _0x573604=_0x1184b7[0x1cd4+0x1591+-0x3263],_0x170c38=_0x1184b7[-0xdc1+0xfb*0x5+-0x1*-0x8dd]&&/^\d+$/[_0x293762(0x182)](_0x1184b7[-0x1613+-0x22b8+0x38ce])?Number(_0x1184b7[0x33*-0x13+0x2345*-0x1+0x89*0x49]):null;let _0x153139='';const _0x538da7=new RegExp('\x5cb'+_0x573604['replace'](/[.*+?^${}()|[\]\\]/g,_0x293762(0x38a))+'\x5cb'),_0x255a79=_0x15a1ae[_0x293762(0x1be)](_0x538da7);if(_0x255a79){const _0x531f2d=_0x15a1ae[_0x293762(0x20a)](_0x255a79[0x1d4+0x56*0x63+-0x2316]),_0x2fa00d=_0x531f2d+_0x255a79[-0x1bd*0xa+-0x1*-0x2303+-0x11a1][_0x293762(0x20d)];_0x153139=_0x15a1ae[_0x293762(0x26f)](_0x2fa00d)[_0x293762(0x199)](/^\s*/,'');if(_0x153139&&/^\d+/['test'](_0x153139))_0x153139=_0x153139[_0x293762(0x199)](/^\d+\s*/,'');}const _0x163037=_0x153139&&_0x47dfb2?_0x153139+'\x0a'+_0x47dfb2:_0x153139||_0x47dfb2||'';if(!_0x163037||_0x163037['trim']()[_0x293762(0x20d)]===0x23a1*0x1+-0x95d+-0x691*0x4){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x37c)+_0x293762(0x1bb)+_0x293762(0x2c9)+_0x293762(0x215)+_0x293762(0x213)+_0x293762(0x1b4)+_0x293762(0x294)+'s).'});return;}const _0x2f4f84=[];for(const _0x281043 of _0x28a696){const _0x256167=await getChatTimezone(_0x281043)||DEFAULT_TIMEZONE,_0x2f487d=parseTimeToken(_0x573604,_0x256167);if(!_0x2f487d){_0x2f4f84['push']({'chat':_0x281043,'ok':![],'reason':'parse_fail'+'ed'});continue;}const _0x30e8f5=_0x570cce;if(_0x2f487d['type']===_0x293762(0x393)){const _0x182c51=_0x2f487d['dt'],_0x5c70b1=Math['floor'](_0x182c51[_0x293762(0x258)]()/(0x8b2+-0x257*-0x7+0x1*-0x152b)),_0x6e2a23=await addScheduleRow({'chat_jid':_0x281043,'message':_0x163037,'time':null,'send_at':_0x5c70b1,'frequency':_0x293762(0x235),'timezone':_0x182c51[_0x293762(0x1cf)]||_0x256167,'creator_jid':_0x30e8f5});if(_0x6e2a23)_0x2f4f84['push']({'chat':_0x281043,'ok':!![],'id':_0x6e2a23,'when':_0x182c51['toLocaleSt'+_0x293762(0x174)](DateTime[_0x293762(0x304)+'ED'])});else _0x2f4f84[_0x293762(0x380)]({'chat':_0x281043,'ok':![],'reason':_0x293762(0x36c)});continue;}if(_0x2f487d[_0x293762(0x31b)]===_0x293762(0x17d)){const _0x22254d=_0x2f487d[_0x293762(0x17d)];if(_0x170c38&&Number[_0x293762(0x2f1)](_0x170c38)&&_0x170c38>=-0x1*0x407+-0x1f38+0x1*0x2340){let _0x1be24b=DateTime[_0x293762(0x192)]()[_0x293762(0x1dd)](_0x256167);const [_0x17027f,_0x5c9052]=_0x22254d[_0x293762(0x265)](':')[_0x293762(0x39c)](Number);let _0x50537c=_0x1be24b[_0x293762(0x16a)](_0x293762(0x2bc))[_0x293762(0x263)]({'hour':_0x17027f,'minute':_0x5c9052,'second':0x0,'millisecond':0x0});_0x50537c=_0x50537c[_0x293762(0x363)]({'days':Number(_0x170c38)});const _0x4251f5=Math[_0x293762(0x32b)](_0x50537c[_0x293762(0x258)]()/(-0x362+-0xc33+-0x137d*-0x1)),_0x3a02c9=await addScheduleRow({'chat_jid':_0x281043,'message':_0x163037,'time':null,'send_at':_0x4251f5,'frequency':_0x293762(0x235),'timezone':_0x256167,'creator_jid':_0x30e8f5});if(_0x3a02c9)_0x2f4f84[_0x293762(0x380)]({'chat':_0x281043,'ok':!![],'id':_0x3a02c9,'when':_0x50537c[_0x293762(0x2a2)+_0x293762(0x174)](DateTime[_0x293762(0x304)+'ED'])});else _0x2f4f84['push']({'chat':_0x281043,'ok':![],'reason':_0x293762(0x36c)});continue;}const _0x1247cc=await addScheduleRow({'chat_jid':_0x281043,'message':_0x163037,'time':_0x22254d,'send_at':null,'frequency':_0x293762(0x1c9),'timezone':_0x256167,'creator_jid':_0x30e8f5});if(_0x1247cc)_0x2f4f84[_0x293762(0x380)]({'chat':_0x281043,'ok':!![],'id':_0x1247cc,'when':_0x22254d+'\x20('+_0x256167+')'});else _0x2f4f84[_0x293762(0x380)]({'chat':_0x281043,'ok':![],'reason':_0x293762(0x36c)});continue;}_0x2f4f84[_0x293762(0x380)]({'chat':_0x281043,'ok':![],'reason':'unsupporte'+_0x293762(0x18c)});}const _0x2c344b=_0x2f4f84[_0x293762(0x23f)](_0x99646c=>_0x99646c['ok']),_0x3cc305=_0x2f4f84[_0x293762(0x23f)](_0x5c1bcc=>!_0x5c1bcc['ok']);let _0x53bc22='';if(_0x2c344b[_0x293762(0x20d)]){_0x53bc22+=_0x293762(0x16d)+_0x293762(0x252)+_0x2c344b[_0x293762(0x20d)]+(_0x293762(0x29b)+_0x293762(0x381)+_0x293762(0x350));for(const _0x413dd5 of _0x2c344b)_0x53bc22+='â€¢\x20'+_0x413dd5[_0x293762(0x1e0)]+_0x293762(0x2eb)+_0x413dd5['id']+_0x293762(0x305)+_0x413dd5['when']+'\x0a';}if(_0x3cc305[_0x293762(0x20d)]){_0x53bc22+=_0x293762(0x315)+'\x20'+_0x3cc305['length']+(_0x293762(0x29b)+'onnection('+_0x293762(0x350));for(const _0x469f08 of _0x3cc305)_0x53bc22+='â€¢\x20'+_0x469f08['chat']+_0x293762(0x334)+_0x469f08[_0x293762(0x398)]+'\x0a';}await sendWithRetry(_0x5c4f22,{'text':_0x53bc22['trim']()||_0x293762(0x2c2)+'es\x20created'+'.'});return;}if(_0x286e2e===_0x293762(0x322)){const _0x53f89b=await getCombinedSchedulesForChats(_0x28a696);if(!_0x53f89b[_0x293762(0x20d)]){await sendWithRetry(_0x5c4f22,{'text':'No\x20schedul'+_0x293762(0x1e9)+_0x293762(0x270)+'r\x20defaults'+':\x20'+_0x28a696[_0x293762(0x163)](',\x20')});return;}const _0x16409b=_0x53f89b[_0x293762(0x39c)]((_0x3e5870,_0x45db84)=>{const _0x442c33=_0x293762,_0x45b2d3=_0x3e5870[_0x442c33(0x25f)]?DateTime[_0x442c33(0x1a6)](Number(_0x3e5870[_0x442c33(0x25f)])*(0xa07+0x26aa+-0x2cc9))[_0x442c33(0x1dd)](_0x3e5870[_0x442c33(0x2f8)]||DEFAULT_TIMEZONE)['toISO']({'suppressSeconds':!![]}):_0x3e5870[_0x442c33(0x1fd)]?_0x3e5870[_0x442c33(0x1fd)]+'\x20('+(_0x3e5870[_0x442c33(0x2f8)]||_0x442c33(0x2ff)+_0x442c33(0x1d3))+')':_0x442c33(0x392),_0x1c6c81=(_0x3e5870[_0x442c33(0x175)]||'')[_0x442c33(0x265)]('\x0a')['map'](_0x5a4102=>_0x5a4102[_0x442c33(0x2fc)]())[_0x442c33(0x163)]('\x0a');return _0x45db84+(0x1352+0x1*0xd0f+-0x4a0*0x7)+_0x442c33(0x31c)+_0x3e5870['id']+_0x442c33(0x191)+_0x3e5870[_0x442c33(0x382)]+_0x442c33(0x305)+_0x45b2d3+_0x442c33(0x1a5)+(_0x3e5870[_0x442c33(0x16c)]||'daily')+_0x442c33(0x185)+(_0x3e5870[_0x442c33(0x264)]?'yes':'no')+_0x442c33(0x2de)+_0x1c6c81;}),_0x14c551=_0x293762(0x16d)+'for\x20defaul'+_0x293762(0x176)+_0x28a696[_0x293762(0x163)](',\x20')+'):\x0a\x0a'+_0x16409b[_0x293762(0x163)]('\x0a\x0a');await sendWithRetry(_0x5c4f22,{'text':_0x14c551});return;}if(_0x286e2e==='delete'){const _0x19e9db=_0x1184b7['slice'](-0x9f9+0x198f*0x1+-0xf94);let _0x8ab762=_0x19e9db['join']('\x20');if(!_0x8ab762&&_0x47dfb2)_0x8ab762=_0x47dfb2[_0x293762(0x298)]();if(!_0x8ab762){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x29a)+_0x293762(0x291)+_0x293762(0x1ec)+'mber,numbe'+'r,...|all>'});return;}if(/^\s*all\s*$/i[_0x293762(0x182)](_0x8ab762)){let _0x284818=0x5*-0x495+0x3*-0x53+0x6*0x3fb;for(const _0x38d932 of _0x28a696){const _0x4679ae=await removeAllSchedulesForChat(_0x38d932);_0x284818+=_0x4679ae;}await sendWithRetry(_0x5c4f22,{'text':'Deleted\x20'+_0x284818+(_0x293762(0x2b0)+_0x293762(0x324)+_0x293762(0x2f4))+_0x28a696[_0x293762(0x163)](',\x20')});return;}const _0x925288=_0x8ab762['split'](/[\s,]+/)['map'](_0x4f3fe5=>_0x4f3fe5[_0x293762(0x298)]())['filter'](Boolean),_0x58c6c1=_0x925288[_0x293762(0x39c)](_0x34996d=>Number(_0x34996d))[_0x293762(0x23f)](_0xaf4611=>!Number[_0x293762(0x287)](_0xaf4611)&&Number[_0x293762(0x2f1)](_0xaf4611)&&_0xaf4611>0x10*0x16+-0x8dd*0x4+0x4*0x885);if(!_0x58c6c1[_0x293762(0x20d)]){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x184)+_0x293762(0x329)+_0x293762(0x28a)+_0x293762(0x331)+_0x293762(0x1fa)+'\x203\x20OR\x20sche'+'d\x20delete\x201'+_0x293762(0x1de)+_0x293762(0x344)+'\x20all'});return;}const _0x297d14=[...new Set(_0x58c6c1)],_0x4934c7=await getCombinedSchedulesForChats(_0x28a696),_0x41c2cc=[],_0x4f343d=[];for(const _0x26a3e1 of _0x297d14){if(_0x26a3e1<0x45*-0x55+-0xebb+0x1a3*0x17||_0x26a3e1>_0x4934c7['length']){_0x4f343d[_0x293762(0x380)]({'n':_0x26a3e1,'reason':_0x293762(0x1a8)});continue;}const _0x3209c8=_0x4934c7[_0x26a3e1-(0x2*0x55d+0x71b*-0x1+-0x39e)]['id'],_0x938c58=await removeScheduleByDBId(_0x3209c8);if(_0x938c58)_0x41c2cc[_0x293762(0x380)]({'n':_0x26a3e1,'id':_0x3209c8});else _0x4f343d[_0x293762(0x380)]({'n':_0x26a3e1,'reason':'db\x20delete\x20'+_0x293762(0x20b)});}let _0x4bdcca='';if(_0x41c2cc[_0x293762(0x20d)])_0x4bdcca+=_0x293762(0x37f)+_0x41c2cc['length']+('\x20schedule('+_0x293762(0x17c))+_0x41c2cc[_0x293762(0x39c)](_0x69508c=>_0x69508c['n']+_0x293762(0x289)+_0x69508c['id']+')')['join'](',\x20')+'.\x0a';if(_0x4f343d[_0x293762(0x20d)])_0x4bdcca+=_0x293762(0x194)+'delete:\x20'+_0x4f343d[_0x293762(0x39c)](_0x3f29dd=>_0x3f29dd['n']+'('+_0x3f29dd[_0x293762(0x398)]+')')[_0x293762(0x163)](',\x20')+'.';await sendWithRetry(_0x5c4f22,{'text':_0x4bdcca['trim']()||_0x293762(0x19e)+_0x293762(0x2d2)});return;}if(_0x286e2e===_0x293762(0x33b)){const _0xb40ab3=Number(_0x1184b7[0x3c0+-0x1239+0xe7b]),_0xd09cb0=_0x1184b7[-0x5*-0x7b1+0x1*0x12c3+-0x3935]||(_0x47dfb2?_0x47dfb2[_0x293762(0x265)](/\r?\n/)[0x1595+0xb05*0x2+-0x2b9f]['trim']():null);if(!_0xb40ab3||!_0xd09cb0){await sendWithRetry(_0x5c4f22,{'text':'Usage:\x20sch'+_0x293762(0x2ef)+_0x293762(0x267)+_0x293762(0x29e)+'ours|YYYY-'+'MM-DDTHH:m'+'m>'});return;}const _0x1c7269=await getCombinedSchedulesForChats(_0x28a696);if(!_0x1c7269||_0x1c7269[_0x293762(0x20d)]<_0xb40ab3){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x2c2)+_0x293762(0x1b8)+_0xb40ab3+(_0x293762(0x171)+'oss\x20your\x20d'+_0x293762(0x2d3))});return;}const _0x4143eb=_0x1c7269[_0xb40ab3-(0x191*0x3+-0x4*-0x305+0x13*-0xe2)]['id'];if(!_0x4143eb){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x2c2)+_0x293762(0x1b8)+_0xb40ab3+(_0x293762(0x171)+'oss\x20your\x20d'+_0x293762(0x2d3))});return;}const _0x2f9335=parseTimeToken(_0xd09cb0,DEFAULT_TIMEZONE);if(!_0x2f9335){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x194)+_0x293762(0x2a1)+_0x293762(0x370)});return;}if(_0x2f9335[_0x293762(0x31b)]==='datetime'){const _0x4e9d1d=_0x2f9335['dt'],_0x4d7a2a=Math[_0x293762(0x32b)](_0x4e9d1d[_0x293762(0x258)]()/(0x14ba+0x2626+-0xdbe*0x4)),_0x197b8d=await updateScheduleFields(_0x4143eb,{'send_at':_0x4d7a2a,'time':null,'frequency':_0x293762(0x235),'timezone':_0x4e9d1d['zoneName']||DEFAULT_TIMEZONE});if(_0x197b8d)await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x20c)+_0xb40ab3+(_0x293762(0x16e)+_0x293762(0x30b)+_0x293762(0x24a))+_0x4e9d1d[_0x293762(0x2a2)+_0x293762(0x174)](DateTime[_0x293762(0x304)+'ED'])+'\x20('+_0x4e9d1d[_0x293762(0x1cf)]+')'});else await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x194)+_0x293762(0x177)+_0x293762(0x351)});return;}else{if(_0x2f9335[_0x293762(0x31b)]===_0x293762(0x17d)){const _0x46fdf9=_0x2f9335[_0x293762(0x17d)],_0x562281=_0x1c7269[_0xb40ab3-(-0x5d*0x5e+0xcd3+0x1554)],_0x5828ed=_0x562281['timezone']||await getChatTimezone(_0x562281[_0x293762(0x382)])||DEFAULT_TIMEZONE,_0x17ca9a=await updateScheduleFields(_0x4143eb,{'time':_0x46fdf9,'send_at':null,'frequency':_0x293762(0x1c9),'timezone':_0x5828ed});if(_0x17ca9a)await sendWithRetry(_0x5c4f22,{'text':'Schedule\x20#'+_0xb40ab3+(_0x293762(0x16e)+_0x293762(0x197)+_0x293762(0x1fc))+_0x46fdf9+'\x20('+_0x5828ed+')'});else await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x194)+_0x293762(0x177)+_0x293762(0x351)});return;}else{await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x379)+_0x293762(0x207)+'mat\x20for\x20ed'+_0x293762(0x1da)});return;}}}if(_0x286e2e===_0x293762(0x16c)){const _0x2013e6=Number(_0x1184b7[0x1058+0x4*0x2da+-0x1*0x1bbe]),_0x4d721d=Number(_0x1184b7[0xb3*0x2+0x1*-0x2295+-0x2*-0x1099]);if(!_0x2013e6||!_0x4d721d||_0x4d721d<0x18a*-0x13+-0xdb5+0x157a*0x2){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x29a)+'ed\x20frequen'+_0x293762(0x352)+_0x293762(0x285)+_0x293762(0x18d)+_0x293762(0x2a5)+_0x293762(0x178)+'.)'});return;}const _0x432628=await getCombinedSchedulesForChats(_0x28a696);if(!_0x432628||_0x432628[_0x293762(0x20d)]<_0x2013e6){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x2c2)+_0x293762(0x1b8)+_0x2013e6+(_0x293762(0x171)+_0x293762(0x24c)+_0x293762(0x2d3))});return;}const _0x78e5ea=_0x432628[_0x2013e6-(-0x4*-0x2ee+-0x293*-0xf+0xc95*-0x4)]['id'];if(!_0x78e5ea){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x2c2)+_0x293762(0x1b8)+_0x2013e6+('\x20found\x20acr'+'oss\x20your\x20d'+'efaults.')});return;}let _0xdc732a=_0x293762(0x1c9);if(_0x4d721d===-0x265*-0x1+-0x1308+0x10a4*0x1)_0xdc732a=_0x293762(0x1c9);else _0xdc732a=_0x293762(0x286)+'ys:'+_0x4d721d;const _0x3302d9=await updateScheduleFields(_0x78e5ea,{'frequency':_0xdc732a});if(_0x3302d9)await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x20c)+_0x2013e6+('\x20frequency'+_0x293762(0x1bf))+_0xdc732a});else await sendWithRetry(_0x5c4f22,{'text':'Failed\x20to\x20'+_0x293762(0x1f8)+_0x293762(0x254)});return;}if(_0x286e2e===_0x293762(0x340)||_0x286e2e===_0x293762(0x2c4)){const _0x469215=Number(_0x1184b7[-0x18db+-0x9*0x27f+-0x34*-0xe9]);if(!_0x469215){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x29a)+_0x293762(0x371)+_0x286e2e+_0x293762(0x388)});return;}const _0x7256b9=await getCombinedSchedulesForChats(_0x28a696);if(!_0x7256b9||_0x7256b9[_0x293762(0x20d)]<_0x469215){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x2c2)+_0x293762(0x1b8)+_0x469215+(_0x293762(0x171)+_0x293762(0x24c)+_0x293762(0x2d3))});return;}const _0x2015b8=_0x7256b9[_0x469215-(0x1f4d+-0x9*-0x2b1+-0x3785)]['id'];if(!_0x2015b8){await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x2c2)+_0x293762(0x1b8)+_0x469215+(_0x293762(0x171)+'oss\x20your\x20d'+_0x293762(0x2d3))});return;}const _0x287236=await updateScheduleFields(_0x2015b8,{'enabled':_0x286e2e===_0x293762(0x2c4)?0x168+0x28b*-0x7+-0x1*-0x1066:-0x3d7*-0x3+0x698+0x121d*-0x1});if(_0x287236)await sendWithRetry(_0x5c4f22,{'text':_0x293762(0x20c)+_0x469215+'\x20'+_0x286e2e+'d.'});else await sendWithRetry(_0x5c4f22,{'text':'Failed\x20to\x20'+'update\x20ena'+'bled\x20state'+'.'});return;}await sendWithRetry(_0x5c4f22,{'text':USAGE});}catch(_0xe0e60b){warn('[sched]\x20ha'+_0x293762(0x2a4)+_0x293762(0x27f)+_0x293762(0x30a)+(_0xe0e60b?.[_0x293762(0x175)]||_0xe0e60b));}}async function handleSchedCommandPM(_0x319411,{sub:_0x1629e4,firstLine:_0x523512,restText:_0x6d048b,firstTokens:_0x5947d6,targetChatJids:_0x2ba757,confirmationTarget:_0x3df05b,senderJid:_0x128023,cleanedBody:_0x119dcc}){const _0x294eb2=_0x6de6b1;try{if(!_0x1629e4||_0x1629e4===_0x294eb2(0x204)){await sendWithRetry(_0x3df05b,{'text':USAGE});return;}if(_0x1629e4===_0x294eb2(0x235)){const _0x2fd748=_0x5947d6[0x1*0x24f5+-0x6c7+-0x1e2c],_0x5d7cf1=_0x5947d6[-0x2059+0x1537+-0xb25*-0x1]&&/^\d+$/[_0x294eb2(0x182)](_0x5947d6[0x37b+0xc86+-0x2*0x7ff])?Number(_0x5947d6[0x1*0x6a+0x21fb*-0x1+-0x4cc*-0x7]):null;let _0x4003a5=(_0x119dcc||'')[_0x294eb2(0x298)]();!_0x4003a5&&_0x2fd748&&(_0x4003a5=extractInlineAfterToken(_0x523512,_0x2fd748));if(!_0x2fd748||!_0x4003a5||_0x4003a5[_0x294eb2(0x298)]()['length']===-0x18e4+0x1036+0x8ae){await sendWithRetry(_0x3df05b,{'text':'Usage:\x20sch'+'ed\x20once\x20<H'+'H:mm>\x20[Nda'+_0x294eb2(0x2d5)+_0x294eb2(0x186)+_0x294eb2(0x242)+_0x294eb2(0x21d)+_0x294eb2(0x2f7)});return;}const _0xc78e86=[];for(const _0x4febee of _0x2ba757){const _0xb32576=await getChatTimezone(_0x4febee)||DEFAULT_TIMEZONE,_0x1eb02f=parseTimeToken(_0x2fd748,_0xb32576);if(!_0x1eb02f){_0xc78e86['push']({'chat':_0x4febee,'ok':![],'reason':_0x294eb2(0x342)+'ed'});continue;}if(_0x1eb02f['type']==='datetime'){const _0x4a5103=_0x1eb02f['dt'],_0xf472df=Math[_0x294eb2(0x32b)](_0x4a5103[_0x294eb2(0x258)]()/(0x4e3*0x4+-0x58e+-0xa16)),_0x3afdf7=await addScheduleRow({'chat_jid':_0x4febee,'message':_0x4003a5,'time':null,'send_at':_0xf472df,'frequency':_0x294eb2(0x235),'timezone':_0x4a5103[_0x294eb2(0x1cf)]||_0xb32576,'creator_jid':_0x128023});if(_0x3afdf7)_0xc78e86[_0x294eb2(0x380)]({'chat':_0x4febee,'ok':!![],'id':_0x3afdf7,'when':_0x4a5103[_0x294eb2(0x2a2)+_0x294eb2(0x174)](DateTime['DATETIME_M'+'ED'])});else _0xc78e86['push']({'chat':_0x4febee,'ok':![],'reason':_0x294eb2(0x36c)});continue;}if(_0x1eb02f[_0x294eb2(0x31b)]==='hhmm'){const [_0x40be9c,_0x368ad0]=_0x1eb02f[_0x294eb2(0x17d)][_0x294eb2(0x265)](':')['map'](Number);let _0x2ee356=DateTime[_0x294eb2(0x192)]()['setZone'](_0xb32576),_0xb893e6=_0x2ee356['startOf'](_0x294eb2(0x2bc))[_0x294eb2(0x263)]({'hour':_0x40be9c,'minute':_0x368ad0,'second':0x0,'millisecond':0x0});if(_0x5d7cf1&&Number[_0x294eb2(0x2f1)](_0x5d7cf1)&&_0x5d7cf1>=-0x178e+0xab6+0xcd9)_0xb893e6=_0xb893e6[_0x294eb2(0x363)]({'days':Number(_0x5d7cf1)});else{if(_0xb893e6<=_0x2ee356)_0xb893e6=_0xb893e6[_0x294eb2(0x363)]({'days':0x1});}const _0x3432ea=Math[_0x294eb2(0x32b)](_0xb893e6[_0x294eb2(0x258)]()/(0x1716+0x90*0x1d+0x76*-0x4d)),_0x41b199=await addScheduleRow({'chat_jid':_0x4febee,'message':_0x4003a5,'time':null,'send_at':_0x3432ea,'frequency':'once','timezone':_0xb32576,'creator_jid':_0x128023});if(_0x41b199)_0xc78e86['push']({'chat':_0x4febee,'ok':!![],'id':_0x41b199,'when':_0xb893e6[_0x294eb2(0x2a2)+_0x294eb2(0x174)](DateTime[_0x294eb2(0x304)+'ED'])});else _0xc78e86[_0x294eb2(0x380)]({'chat':_0x4febee,'ok':![],'reason':_0x294eb2(0x36c)});continue;}_0xc78e86[_0x294eb2(0x380)]({'chat':_0x4febee,'ok':![],'reason':'unsupporte'+'d_time'});}const _0x3390ff=_0xc78e86['filter'](_0x2a230b=>_0x2a230b['ok']),_0x31180c=_0xc78e86['filter'](_0x3bc573=>!_0x3bc573['ok']);let _0x5b5bce='';if(_0x3390ff[_0x294eb2(0x20d)]){_0x5b5bce+=_0x294eb2(0x16d)+'one-off\x20fo'+'r\x20'+_0x3390ff[_0x294eb2(0x20d)]+(_0x294eb2(0x389)+':\x0a');for(const _0x16003d of _0x3390ff)_0x5b5bce+='â€¢\x20'+_0x16003d[_0x294eb2(0x1e0)]+'\x20->\x20id:'+_0x16003d['id']+_0x294eb2(0x375)+_0x16003d[_0x294eb2(0x37b)]+'\x0a';}if(_0x31180c['length']){_0x5b5bce+='Failed\x20for'+'\x20'+_0x31180c[_0x294eb2(0x20d)]+(_0x294eb2(0x389)+':\x0a');for(const _0x4b3ee3 of _0x31180c)_0x5b5bce+='â€¢\x20'+_0x4b3ee3['chat']+'\x20->\x20'+_0x4b3ee3[_0x294eb2(0x398)]+'\x0a';}await sendWithRetry(_0x3df05b,{'text':_0x5b5bce[_0x294eb2(0x298)]()||_0x294eb2(0x2c2)+'es\x20created'+'.'});return;}if(_0x1629e4===_0x294eb2(0x277)){if(!_0x5947d6[0x16f5+0x1*0xb79+-0x226c]){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x29a)+'ed\x20add\x20<HH'+_0x294eb2(0x37a)+_0x294eb2(0x1f4)+_0x294eb2(0x1e8)+_0x294eb2(0x1af)+'utes>\x20<mes'+'sage...>\x20g'+_0x294eb2(0x337)+'id|all>'});return;}const _0x40ab64=_0x5947d6[0x65*-0x33+-0x6*-0x5a7+0x1*-0xdc9],_0x4510dc=_0x5947d6[-0xe45+0x5a9*0x2+0x2f6]&&/^\d+$/[_0x294eb2(0x182)](_0x5947d6[0xa47+-0x1505+0xac1])?Number(_0x5947d6[-0x7fd+0x1a4f+-0x6d*0x2b]):null;let _0x26fb93=(_0x119dcc||'')[_0x294eb2(0x298)]();!_0x26fb93&&(_0x26fb93=extractInlineAfterToken(_0x523512,_0x40ab64));if(!_0x26fb93||_0x26fb93['trim']()[_0x294eb2(0x20d)]===-0x16a4+0xa89+0xc1b*0x1){await sendWithRetry(_0x3df05b,{'text':'Please\x20pro'+_0x294eb2(0x1bb)+_0x294eb2(0x2c9)+_0x294eb2(0x215)+_0x294eb2(0x213)+_0x294eb2(0x1b4)+_0x294eb2(0x294)+_0x294eb2(0x2c3)+_0x294eb2(0x189)+'l>'});return;}const _0x4b7ec7=[];for(const _0x119a08 of _0x2ba757){const _0x16879d=await getChatTimezone(_0x119a08)||DEFAULT_TIMEZONE,_0xe9a6f3=parseTimeToken(_0x40ab64,_0x16879d);if(!_0xe9a6f3){_0x4b7ec7['push']({'chat':_0x119a08,'ok':![],'reason':_0x294eb2(0x342)+'ed'});continue;}const _0x305182=_0x128023;if(_0xe9a6f3['type']==='datetime'){const _0x4a87bc=_0xe9a6f3['dt'],_0x766559=Math[_0x294eb2(0x32b)](_0x4a87bc[_0x294eb2(0x258)]()/(0x13ef+-0x2205+-0x1*-0x11fe)),_0x1cafec=await addScheduleRow({'chat_jid':_0x119a08,'message':_0x26fb93,'time':null,'send_at':_0x766559,'frequency':_0x294eb2(0x235),'timezone':_0x4a87bc[_0x294eb2(0x1cf)]||_0x16879d,'creator_jid':_0x305182});if(_0x1cafec)_0x4b7ec7[_0x294eb2(0x380)]({'chat':_0x119a08,'ok':!![],'id':_0x1cafec,'when':_0x4a87bc[_0x294eb2(0x2a2)+_0x294eb2(0x174)](DateTime[_0x294eb2(0x304)+'ED'])});else _0x4b7ec7[_0x294eb2(0x380)]({'chat':_0x119a08,'ok':![],'reason':_0x294eb2(0x36c)});continue;}if(_0xe9a6f3[_0x294eb2(0x31b)]==='hhmm'){const _0x321689=_0xe9a6f3[_0x294eb2(0x17d)];if(_0x4510dc&&Number[_0x294eb2(0x2f1)](_0x4510dc)&&_0x4510dc>=0x5*0x36f+0x676*0x2+-0x1e16*0x1){let _0x192934=DateTime['now']()[_0x294eb2(0x1dd)](_0x16879d);const [_0x123cae,_0x334fbe]=_0x321689['split'](':')[_0x294eb2(0x39c)](Number);let _0xb7b491=_0x192934['startOf']('day')[_0x294eb2(0x263)]({'hour':_0x123cae,'minute':_0x334fbe,'second':0x0,'millisecond':0x0});_0xb7b491=_0xb7b491[_0x294eb2(0x363)]({'days':Number(_0x4510dc)});const _0x5cf732=Math[_0x294eb2(0x32b)](_0xb7b491['toMillis']()/(-0x1ab2+-0x1*0x1e16+-0x3cb0*-0x1)),_0x4a8bbf=await addScheduleRow({'chat_jid':_0x119a08,'message':_0x26fb93,'time':null,'send_at':_0x5cf732,'frequency':_0x294eb2(0x235),'timezone':_0x16879d,'creator_jid':_0x305182});if(_0x4a8bbf)_0x4b7ec7['push']({'chat':_0x119a08,'ok':!![],'id':_0x4a8bbf,'when':_0xb7b491[_0x294eb2(0x2a2)+'ring'](DateTime[_0x294eb2(0x304)+'ED'])});else _0x4b7ec7['push']({'chat':_0x119a08,'ok':![],'reason':_0x294eb2(0x36c)});continue;}const _0xd3365d=await addScheduleRow({'chat_jid':_0x119a08,'message':_0x26fb93,'time':_0x321689,'send_at':null,'frequency':_0x294eb2(0x1c9),'timezone':_0x16879d,'creator_jid':_0x305182});if(_0xd3365d)_0x4b7ec7[_0x294eb2(0x380)]({'chat':_0x119a08,'ok':!![],'id':_0xd3365d,'when':_0x321689+'\x20('+_0x16879d+')'});else _0x4b7ec7[_0x294eb2(0x380)]({'chat':_0x119a08,'ok':![],'reason':_0x294eb2(0x36c)});continue;}_0x4b7ec7['push']({'chat':_0x119a08,'ok':![],'reason':_0x294eb2(0x1ef)+_0x294eb2(0x18c)});}const _0x377ec9=_0x4b7ec7[_0x294eb2(0x23f)](_0x5aabae=>_0x5aabae['ok']),_0x1ae1d0=_0x4b7ec7[_0x294eb2(0x23f)](_0x44058e=>!_0x44058e['ok']);let _0x4ada5a='';if(_0x377ec9[_0x294eb2(0x20d)]){_0x4ada5a+=_0x294eb2(0x16d)+'for\x20'+_0x377ec9[_0x294eb2(0x20d)]+(_0x294eb2(0x389)+':\x0a');for(const _0x302617 of _0x377ec9)_0x4ada5a+='â€¢\x20'+_0x302617['chat']+_0x294eb2(0x2eb)+_0x302617['id']+_0x294eb2(0x305)+_0x302617['when']+'\x0a';}if(_0x1ae1d0[_0x294eb2(0x20d)]){_0x4ada5a+=_0x294eb2(0x315)+'\x20'+_0x1ae1d0[_0x294eb2(0x20d)]+('\x20target(s)'+':\x0a');for(const _0x1a1bca of _0x1ae1d0)_0x4ada5a+='â€¢\x20'+_0x1a1bca[_0x294eb2(0x1e0)]+_0x294eb2(0x334)+_0x1a1bca[_0x294eb2(0x398)]+'\x0a';}await sendWithRetry(_0x3df05b,{'text':_0x4ada5a[_0x294eb2(0x298)]()||'No\x20schedul'+_0x294eb2(0x2f9)+'.'});return;}if(_0x1629e4==='list'){const _0x4899f6=[];for(const _0x1778e4 of _0x2ba757){const _0x510716=await listSchedulesForChat(_0x1778e4);for(const _0xfc66a5 of _0x510716)_0x4899f6[_0x294eb2(0x380)]({'chatJid':_0x1778e4,..._0xfc66a5});}if(!_0x4899f6['length']){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x1a7)+_0x294eb2(0x36d)+_0x294eb2(0x16f)+_0x294eb2(0x359)+'requested\x20'+'targets.'});return;}let _0x33d3bf='';for(const _0x460cb6 of _0x4899f6){const _0x11b548=_0x460cb6[_0x294eb2(0x25f)]?DateTime[_0x294eb2(0x1a6)](Number(_0x460cb6['send_at'])*(0x729*-0x3+0xe9*0x1+0x187a))['setZone'](_0x460cb6[_0x294eb2(0x2f8)]||DEFAULT_TIMEZONE)[_0x294eb2(0x216)]({'suppressSeconds':!![]}):_0x460cb6[_0x294eb2(0x1fd)]?_0x460cb6[_0x294eb2(0x1fd)]+'\x20('+(_0x460cb6[_0x294eb2(0x2f8)]||_0x294eb2(0x2ff)+_0x294eb2(0x1d3))+')':_0x294eb2(0x392),_0x26d3b2=(_0x460cb6['message']||'')[_0x294eb2(0x265)]('\x0a')[_0x294eb2(0x39c)](_0x1cecd2=>_0x1cecd2['trimEnd']())[_0x294eb2(0x163)]('\x0a'),_0x390bc8=_0x460cb6[_0x294eb2(0x198)]+':'+_0x460cb6['id']+'\x20when:'+_0x11b548+_0x294eb2(0x1a5)+(_0x460cb6['frequency']||_0x294eb2(0x1c9))+_0x294eb2(0x185)+(_0x460cb6['enabled']?_0x294eb2(0x1aa):'no')+_0x294eb2(0x2de)+_0x26d3b2+'\x0a\x0a';(_0x33d3bf+_0x390bc8)[_0x294eb2(0x20d)]>-0x6*-0x3ad+0x21d*0x3+-0x1689&&(await sendWithRetry(_0x3df05b,{'text':_0x33d3bf['trim']()}),_0x33d3bf=''),_0x33d3bf+=_0x390bc8;}if(_0x33d3bf[_0x294eb2(0x298)]())await sendWithRetry(_0x3df05b,{'text':_0x33d3bf[_0x294eb2(0x298)]()});return;}if(_0x1629e4==='delete'){const _0x29edac=_0x5947d6[_0x294eb2(0x26f)](-0x1*0x160d+0x1685+0x3b*-0x2);let _0x34f535=_0x29edac[_0x294eb2(0x163)]('\x20');if(!_0x34f535&&_0x6d048b)_0x34f535=_0x6d048b[_0x294eb2(0x298)]();if(!_0x34f535){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x29a)+_0x294eb2(0x291)+_0x294eb2(0x1ec)+_0x294eb2(0x2e2)+_0x294eb2(0x223)+_0x294eb2(0x2df)+'|jid|all>'});return;}if(/^\s*all\s*$/i[_0x294eb2(0x182)](_0x34f535)){let _0x9f747e=0x1*-0x5bf+0x1*0x1bfc+-0x163d;for(const _0x520def of _0x2ba757){const _0x377309=await removeAllSchedulesForChat(_0x520def);_0x9f747e+=_0x377309;}await sendWithRetry(_0x3df05b,{'text':'Deleted\x20'+_0x9f747e+('\x20schedule('+_0x294eb2(0x324)+_0x294eb2(0x17f)+_0x294eb2(0x281))});return;}const _0x1dd346=_0x34f535[_0x294eb2(0x265)](/[\s,]+/)['map'](_0x17cd86=>_0x17cd86[_0x294eb2(0x298)]())[_0x294eb2(0x23f)](Boolean),_0xcff4d0=_0x1dd346['map'](_0x81e507=>Number(_0x81e507))[_0x294eb2(0x23f)](_0x5314cf=>!Number[_0x294eb2(0x287)](_0x5314cf)&&Number['isInteger'](_0x5314cf)&&_0x5314cf>-0xd93+0x512*-0x6+0x2bff);if(!_0xcff4d0[_0x294eb2(0x20d)]){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x184)+_0x294eb2(0x329)+_0x294eb2(0x28a)+_0x294eb2(0x331)+_0x294eb2(0x1fa)+_0x294eb2(0x1f3)+'d\x20delete\x201'+_0x294eb2(0x1de)+'hed\x20delete'+_0x294eb2(0x349)+_0x294eb2(0x24e)+_0x294eb2(0x273)});return;}const _0x5bd50d=[...new Set(_0xcff4d0)],_0x343cfe=await getCombinedSchedulesForChats(_0x2ba757),_0x481312=[],_0x46885e=[];for(const _0xde2ee6 of _0x5bd50d){if(_0xde2ee6<0x1*0x1cf9+-0x1d2+-0x1b26||_0xde2ee6>_0x343cfe[_0x294eb2(0x20d)]){_0x46885e[_0x294eb2(0x380)]({'n':_0xde2ee6,'reason':_0x294eb2(0x1a8)});continue;}const _0x32d1f9=_0x343cfe[_0xde2ee6-(0x4*-0x832+-0x1a0a+-0xb*-0x559)]['id'],_0x2e54d2=await removeScheduleByDBId(_0x32d1f9);if(_0x2e54d2)_0x481312[_0x294eb2(0x380)]({'n':_0xde2ee6,'id':_0x32d1f9});else _0x46885e['push']({'n':_0xde2ee6,'reason':_0x294eb2(0x2ce)+_0x294eb2(0x20b)});}let _0x156688='';if(_0x481312['length'])_0x156688+=_0x294eb2(0x37f)+_0x481312[_0x294eb2(0x20d)]+(_0x294eb2(0x2b0)+_0x294eb2(0x17c))+_0x481312['map'](_0x274095=>_0x274095['n']+_0x294eb2(0x289)+_0x274095['id']+')')[_0x294eb2(0x163)](',\x20')+'.\x0a';if(_0x46885e[_0x294eb2(0x20d)])_0x156688+=_0x294eb2(0x194)+_0x294eb2(0x34d)+_0x46885e['map'](_0x3b0fc8=>_0x3b0fc8['n']+'('+_0x3b0fc8['reason']+')')[_0x294eb2(0x163)](',\x20')+'.';await sendWithRetry(_0x3df05b,{'text':_0x156688[_0x294eb2(0x298)]()||'No\x20changes'+'\x20made.'});return;}if(_0x1629e4===_0x294eb2(0x33b)){const _0x23f138=Number(_0x5947d6[0x1df9*-0x1+0x7f+-0x2*-0xebe]),_0x5302fe=_0x5947d6[-0x1437+0x2583+-0x1149]||(_0x6d048b?_0x6d048b[_0x294eb2(0x265)](/\r?\n/)[0x8b*-0x3a+0x1*-0x76+0x1ff4][_0x294eb2(0x298)]():null);if(!_0x23f138||!_0x5302fe){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x29a)+_0x294eb2(0x2ef)+_0x294eb2(0x267)+':mm|in\x20N\x20h'+_0x294eb2(0x19b)+'MM-DDTHH:m'+'m>\x20gp:<ali'+_0x294eb2(0x1bd)+'>'});return;}const _0x17e473=await getCombinedSchedulesForChats(_0x2ba757);if(!_0x17e473||_0x17e473[_0x294eb2(0x20d)]<_0x23f138){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x2c2)+_0x294eb2(0x1b8)+_0x23f138+(_0x294eb2(0x171)+_0x294eb2(0x172)+_0x294eb2(0x2a6)+'s.')});return;}const _0x36014e=_0x17e473[_0x23f138-(0x162a+-0xd9*-0x1b+-0x2d0c)]['id'];if(!_0x36014e){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x2c2)+_0x294eb2(0x1b8)+_0x23f138+(_0x294eb2(0x171)+_0x294eb2(0x172)+_0x294eb2(0x2a6)+'s.')});return;}const _0x33772a=parseTimeToken(_0x5302fe,DEFAULT_TIMEZONE);if(!_0x33772a){await sendWithRetry(_0x3df05b,{'text':'Failed\x20to\x20'+_0x294eb2(0x2a1)+_0x294eb2(0x370)});return;}if(_0x33772a[_0x294eb2(0x31b)]===_0x294eb2(0x393)){const _0x3e06a4=_0x33772a['dt'],_0x43eec7=Math[_0x294eb2(0x32b)](_0x3e06a4['toMillis']()/(0x8aa+-0xca7+0x7e5)),_0x5618f1=await updateScheduleFields(_0x36014e,{'send_at':_0x43eec7,'time':null,'frequency':_0x294eb2(0x235),'timezone':_0x3e06a4[_0x294eb2(0x1cf)]||DEFAULT_TIMEZONE});if(_0x5618f1)await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x20c)+_0x23f138+(_0x294eb2(0x16e)+_0x294eb2(0x30b)+_0x294eb2(0x24a))+_0x3e06a4['toLocaleSt'+_0x294eb2(0x174)](DateTime['DATETIME_M'+'ED'])+'\x20('+_0x3e06a4[_0x294eb2(0x1cf)]+')'});else await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x194)+'update\x20sch'+_0x294eb2(0x351)});return;}else{if(_0x33772a[_0x294eb2(0x31b)]===_0x294eb2(0x17d)){const _0x12a64a=_0x33772a['hhmm'],_0x157a45=_0x17e473[_0x23f138-(-0x34b*0x5+-0x96d*-0x2+0x3d*-0xa)],_0x46fae5=_0x157a45[_0x294eb2(0x2f8)]||await getChatTimezone(_0x157a45[_0x294eb2(0x382)])||DEFAULT_TIMEZONE,_0xdab6ab=await updateScheduleFields(_0x36014e,{'time':_0x12a64a,'send_at':null,'frequency':_0x294eb2(0x1c9),'timezone':_0x46fae5});if(_0xdab6ab)await sendWithRetry(_0x3df05b,{'text':'Schedule\x20#'+_0x23f138+('\x20updated\x20t'+_0x294eb2(0x197)+'g\x20at\x20')+_0x12a64a+'\x20('+_0x46fae5+')'});else await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x194)+_0x294eb2(0x177)+_0x294eb2(0x351)});return;}else{await sendWithRetry(_0x3df05b,{'text':'Unsupporte'+_0x294eb2(0x207)+_0x294eb2(0x2a9)+_0x294eb2(0x1da)});return;}}}if(_0x1629e4===_0x294eb2(0x16c)){const _0x5c1e70=Number(_0x5947d6[0xec*0x7+-0x235c+0x1*0x1cea]),_0x35ade7=Number(_0x5947d6[-0x321*-0x5+0x532+0xa6a*-0x2]);if(!_0x5c1e70||!_0x35ade7||_0x35ade7<-0x9d+0x242f+-0x2391){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x29a)+'ed\x20frequen'+_0x294eb2(0x352)+_0x294eb2(0x285)+_0x294eb2(0x18d)+_0x294eb2(0x2a5)+_0x294eb2(0x178)+_0x294eb2(0x2ed)+_0x294eb2(0x1bd)+'>'});return;}const _0x310d98=await getCombinedSchedulesForChats(_0x2ba757);if(!_0x310d98||_0x310d98[_0x294eb2(0x20d)]<_0x5c1e70){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x2c2)+_0x294eb2(0x1b8)+_0x5c1e70+(_0x294eb2(0x171)+_0x294eb2(0x172)+_0x294eb2(0x2a6)+'s.')});return;}const _0x32a60a=_0x310d98[_0x5c1e70-(-0xe9*0xd+0x199+0xa3d)]['id'];if(!_0x32a60a){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x2c2)+_0x294eb2(0x1b8)+_0x5c1e70+(_0x294eb2(0x171)+_0x294eb2(0x172)+'ted\x20target'+'s.')});return;}let _0x388d48=_0x294eb2(0x1c9);if(_0x35ade7===0x3*-0x16f+0x1a76+-0x1628)_0x388d48=_0x294eb2(0x1c9);else _0x388d48=_0x294eb2(0x286)+'ys:'+_0x35ade7;const _0x217acb=await updateScheduleFields(_0x32a60a,{'frequency':_0x388d48});if(_0x217acb)await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x20c)+_0x5c1e70+('\x20frequency'+_0x294eb2(0x1bf))+_0x388d48});else await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x194)+'update\x20fre'+_0x294eb2(0x254)});return;}if(_0x1629e4===_0x294eb2(0x340)||_0x1629e4===_0x294eb2(0x2c4)){const _0x318dec=Number(_0x5947d6[0x23c9+0x1*0x30b+0x2*-0x1369]);if(!_0x318dec){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x29a)+_0x294eb2(0x371)+_0x1629e4+(_0x294eb2(0x2b4)+_0x294eb2(0x391)+_0x294eb2(0x224))});return;}const _0x341fa8=await getCombinedSchedulesForChats(_0x2ba757);if(!_0x341fa8||_0x341fa8[_0x294eb2(0x20d)]<_0x318dec){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x2c2)+_0x294eb2(0x1b8)+_0x318dec+(_0x294eb2(0x171)+_0x294eb2(0x172)+_0x294eb2(0x2a6)+'s.')});return;}const _0x5195f5=_0x341fa8[_0x318dec-(0xd*-0x1cd+-0x17d4+0x2f3e)]['id'];if(!_0x5195f5){await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x2c2)+_0x294eb2(0x1b8)+_0x318dec+(_0x294eb2(0x171)+_0x294eb2(0x172)+_0x294eb2(0x2a6)+'s.')});return;}const _0x1c72e7=await updateScheduleFields(_0x5195f5,{'enabled':_0x1629e4===_0x294eb2(0x2c4)?0x2254+0x1ee8+-0x413b*0x1:-0x527*0x1+0x1c2a+-0x1*0x1703});if(_0x1c72e7)await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x20c)+_0x318dec+'\x20'+_0x1629e4+'d.'});else await sendWithRetry(_0x3df05b,{'text':_0x294eb2(0x194)+_0x294eb2(0x302)+_0x294eb2(0x261)+'.'});return;}await sendWithRetry(_0x3df05b,{'text':USAGE});}catch(_0x2f74e1){warn('[sched]\x20ha'+_0x294eb2(0x2a4)+_0x294eb2(0x283)+'rror:\x20'+(_0x2f74e1?.['message']||_0x2f74e1));}}export async function initialize(_0x48a8f7){const _0xbcc744=_0x6de6b1;if(!_0x48a8f7)throw new Error(_0xbcc744(0x33f)+_0xbcc744(0x1a0)+_0xbcc744(0x386)+_0xbcc744(0x357));setupSendApi(_0x48a8f7),refreshConfig();try{await ensureSchema();}catch(_0xf91dc4){throw _0xf91dc4;}startSchedulerAligned(),info(_0xbcc744(0x1f7)+_0xbcc744(0x19c)+_0xbcc744(0x384)+_0xbcc744(0x1c2)+_0xbcc744(0x313));}export async function cleanup(){const _0x2290c1=_0x6de6b1;try{stopScheduler();}catch(_0x14b2d1){warn('[sched]\x20cl'+_0x2290c1(0x25d)+_0x2290c1(0x1c7)+(_0x14b2d1?.['message']||_0x14b2d1));}finally{botRef=null,sendApi=null,info('[sched]\x20cl'+'eaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};