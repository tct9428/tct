const _0x443c5e=_0x4a8a;(function(_0x47fbd1,_0x13c1e2){const _0xcebce1=_0x4a8a,_0x5e410d=_0x47fbd1();while(!![]){try{const _0x28489d=-parseInt(_0xcebce1(0x21d))/(0x1e35*-0x1+-0x2*0xba+0x1faa)+-parseInt(_0xcebce1(0x1ec))/(-0x213*0x2+-0x19a4*-0x1+-0x157c)+-parseInt(_0xcebce1(0x1f2))/(-0x1c65+-0x1102*0x2+-0x11*-0x3ac)+parseInt(_0xcebce1(0x192))/(-0x2b*0xdd+-0x8aa+0x1d5*0x19)*(parseInt(_0xcebce1(0x176))/(0x1f1*0xa+0x9b5+-0x95*0x32))+parseInt(_0xcebce1(0x1b2))/(-0x193a+0x539*-0x1+0x1e79)+-parseInt(_0xcebce1(0x1af))/(0x18b8+-0x216+-0x169b)*(-parseInt(_0xcebce1(0x1e2))/(-0x157e+0x9*0x3bf+0x1*-0xc31))+-parseInt(_0xcebce1(0x255))/(-0x363+-0x1*-0x1f90+0x2*-0xe12);if(_0x28489d===_0x13c1e2)break;else _0x5e410d['push'](_0x5e410d['shift']());}catch(_0x5e4d8a){_0x5e410d['push'](_0x5e410d['shift']());}}}(_0x2e4b,-0xe1e05+0xd43*0x16f+-0x1057*-0x79));import _0xc390a8 from'fs/promises';import _0x2e9017 from'path';import{exec as _0x6988ef}from'child_process';import{promisify}from'util';import{fileURLToPath}from'url';import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isSudo,listSudo,normalizeToJid,userJidFromCtx}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';function _0x2e4b(){const _0x5cc739=['oved\x20plugi','napshot','UPDATE\x20upd','close','lled\x20succe','filter','les\x20were\x20w','üîÑ\x20Updated\x20','ey\x20TEXT\x20PR','e\x20FROM\x20plu','28013BOsgDe','last_check','text','ROLLBACK;','update',']\x20Saved\x20sn','carl','\x20Applying.','get','Y\x20KEY,\x0a\x20\x20\x20','nents.',']\x20Could\x20no','\x20exclusion',']\x20cleaned\x20','readFile','ate_settin','DISABLED.','able.\x20Run\x20','boot`\x20comm','on|off','stall\x27...','ERE\x20settin','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','map','a\x20ensured.','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','gin_remove','l).\x20Skippe','üîÑ\x20Automati',']\x20Running\x20','\x20snapshot\x20','XT\x20PRIMARY','or:\x20','led','found\x20in\x20D','SACTION;','plus','auto-updat','bot.js','t_checked_','ng\x20without','toLowerCas','all',']\x20DB\x20schem','\x20\x20\x20\x20\x20\x20);\x0a\x20','apshot\x20to\x20','mkdir','botRef\x20exi','EXT\x20PRIMAR','finalize','isArray','ck:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20Please\x20tr','cies\x20insta','ng\x20to\x20appl','9051597AgHbov','TEGER\x20DEFA','lastModifi','writeFile','Updates\x20re','at\x20=\x20?,\x20ne','t\x20check\x20fo','package.js','e\x20applying','t\x20=\x20?\x20WHER','utoupdate\x20','d\x20plugin\x20u','sage\x20to\x20','bot\x20instan','INSERT\x20OR\x20','remoteJid','name','plugin\x20fil','status','te\x20Status*','enabled\x20IN','now','json','\x20is\x20alread','ed_at','sock\x20is\x20nu','method\x20ava','gs\x20SET\x20ena','e\x20is\x20avail','heck\x20times','\x20\x20\x20CREATE\x20','exec','irst\x20run..','SELECT\x20*\x20F','\x20removed).','\x20\x20\x20\x20\x20\x20\x20\x20\x20)','t\x20failed:\x20','key','\x20\x20\x20last_ch','ady\x20up\x20to\x20','M\x20plugin_s','ate:\x20nothi','_settings\x20','o\x20fetch\x20bu','o\x20get\x20auto','al\x20snapsho','ame,\x20origi','jid','y\x20up\x20to\x20da','g_key\x20TEXT','B.\x20Creatin','message','Updated\x20pl','\x20\x20mtime\x20IN','\x20(skipped\x20',']\x20Error\x20wh','BEGIN\x20TRAN','tes\x20to\x20app','includes','push','l\x20check\x20fo','date.','toRelative','end\x20to\x20','plugins:\x0a','ly\x20core\x20ch','g\x20\x27yarn\x20in','Not\x20schedu','TO\x20build_i','ROM\x20update','un\x20the\x20`re','_at','y\x20have\x20bee','\x20PRIMARY\x20K','e\x20check...','ild','e\x20than\x2010\x20','accurate.','\x20->\x20','te.','unbind\x20err','ed.\x20Runnin','tings\x20(\x0a\x20\x20','*\x0aNext\x20Che','üîÑ\x20Everythi',']\x20Wrote\x20up','\x20\x20\x20\x20name\x20T','c\x20updates\x20','pplied.\x0a\x0aS','run','TEXT,\x0a\x20\x20\x20\x20','üîÑ\x20Your\x20bot','string','nextCheckA','download)\x20','ing_key\x20=\x20','w`\x20to\x20appl','sock','O\x20update_s','readyState','nd\x20for\x20the','\x20\x20\x20\x20\x20\x20\x20\x20);',']\x20Auto-upd',']\x20Missing\x20','has','SELECT\x20las','endsWith','es...',');\x0a\x20\x20\x20\x20\x20\x20\x20',']\x20Failed\x20t','utf-8','th\x20no\x20dest','OT\x20EXISTS\x20','\x20for\x20updat',')\x20VALUES\x20(','üîÑ\x20No\x20appli','off','INSERT\x20INT','\x20\x20\x20origin\x20','napshot\x27','tamps','REPLACE\x20IN','y\x20again\x20la','kipped\x20upd','DELETE\x20FRO','\x20\x20\x20name\x20TE','n,\x20mtime,\x20','59845LLhqXk',']\x20cleanup\x20','e\x20effect.','\x20update\x20pr','pshot\x20(\x0a\x20\x20','pshot.\x20Upd','COMMIT;','TABLE\x20IF\x20N','and\x20to\x20app','ompleted.','ns\x20from\x20DB','ours.','download\x20f','bled\x20=\x20?,\x20','\x20\x20\x20\x20next_c','zation\x20fai','qrcode.js','join','dated.','NTEGER,\x0a\x20\x20','_info\x20WHER','\x0aPlease\x20ru','o\x20download','\x20‚Äî\x20content','üîÑ\x20Checking','every\x2024\x20h','catch','ROM\x20plugin','292zeadcb','length','wnloads\x20ma','ng\x20','update_set','url','`update\x20no','üîÑ\x20Starting','ecked_at\x20I','heck_at\x20IN',']\x20Schedule','reated\x20suc','cessfully.','ination.','key\x20=\x20\x27aut','fromSecond','t\x20create\x20i','replace','prepare',']\x20No\x20send\x20','null','led.','napshot\x20(n','nitial\x20sna','tModified\x20','t\x20get\x20upda','ate:\x20apply','d\x20core\x20upd','ler\x20starte','6776623aGsSTa','ritten\x20(do','open','7658670pVAySf','plugin_sna','sts','turned\x20no\x20','database.','nts.','\x20\x20\x20\x20\x20\x20\x20las','‚ÑπÔ∏è\x20Automati','autoupdate','g_key\x20=\x20\x27a','enabled','toSeconds','plugins:\x20M','dirname','floor','utoupdate\x27','mtime','g:\x0a','ate\x20applie','r\x20updates.',']\x20initiali','ugins:\x0a','VALUES\x20(?,','have\x20been\x20','\x20may\x20be\x20in','es\x20were\x20up','\x20removed\x20p','origin','ate:\x20no\x20fi','gs\x20SET\x20las','üîÑ\x20Update\x20f','E\x20setting_','fromMe','\x27autoupdat','ng\x20is\x20alre','resolve','<unknown>','nfo\x20(key,\x20','a\x20initiali','stall\x27\x20fai',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20',']\x20package.','download','tes\x20were\x20a','function','connection','next_check','update\x20set','8GJCLcz','ate\x20found\x20','FROM\x20build','sendMessag','o\x20save\x20loc','_at\x20=\x20?\x20WH','y\x20after\x20fi','ate\x20checks','üîÑ\x20Update\x20c','ore\x20than\x201','1425990OXMOcM','modules','json\x20chang','\x20unchanged','cable\x20upda','n\x20the\x20`reb','1633833cWReGv','split','iles\x20were\x20','üîÑ\x20Could\x20no','Updated\x20co','oupdate\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','ocess...','E\x20key\x20=\x20\x27s','ettings\x20(s',']\x20safeSend','ailed\x20whil','t\x20to\x20DB','c\x20Update\x20N','files','g\x20one\x20on\x20f','.\x20Cannot\x20s','otice:\x0a\x0a','\x20\x20\x20\x20\x20\x20\x20\x20\x20k','o\x20send\x20mes','.update','start.cjs','d\x20TEXT\x0a\x20\x20\x20','\x20updates.','o\x20update\x20c','writing\x20','tings','scheduled\x20','ating:\x0a','lugin(s).','botRef\x20is\x20','te\x20informa','ed\x20updatin'];_0x2e4b=function(){return _0x5cc739;};return _0x2e4b();}const exec=promisify(_0x6988ef);export const name=_0x443c5e(0x221);export const version='3.0.0';export const priority=0x22c*0x4+0x910+-0x118e;function _0x4a8a(_0x1b5853,_0x315987){const _0x1d7a5c=_0x2e4b();return _0x4a8a=function(_0x3a4a44,_0x3ac02c){_0x3a4a44=_0x3a4a44-(-0x1cb3+0x59*-0x1f+0x4*0xa1d);let _0x4aa405=_0x1d7a5c[_0x3a4a44];return _0x4aa405;},_0x4a8a(_0x1b5853,_0x315987);}export const commands=[_0x443c5e(0x221),'autoupdate'];let botRef=null,sendApi=null,schedulerInterval=null,schedulerRunning=![],connectionUpdateHandler=null;const API_URL='https://i-'+'tct.com/bu'+_0x443c5e(0x142),__filename=fileURLToPath(import.meta[_0x443c5e(0x197)]),__dirname=_0x2e9017['dirname'](__filename),projectRoot=_0x2e9017[_0x443c5e(0x1d5)](__dirname,'..');async function ensureSchema(){const _0x5aa5e6=_0x443c5e;try{await db['exec'](_0x5aa5e6(0x1f8)+_0x5aa5e6(0x115)+'TABLE\x20IF\x20N'+_0x5aa5e6(0x167)+_0x5aa5e6(0x196)+_0x5aa5e6(0x149)+_0x5aa5e6(0x233)+'\x20\x20\x20\x20settin'+_0x5aa5e6(0x128)+_0x5aa5e6(0x140)+'EY,\x0a\x20\x20\x20\x20\x20\x20'+_0x5aa5e6(0x233)+_0x5aa5e6(0x10b)+_0x5aa5e6(0x256)+'ULT\x200,\x0a\x20\x20\x20'+_0x5aa5e6(0x233)+_0x5aa5e6(0x11d)+_0x5aa5e6(0x19a)+_0x5aa5e6(0x189)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5aa5e6(0x184)+_0x5aa5e6(0x19b)+'TEGER\x0a\x20\x20\x20\x20'+_0x5aa5e6(0x15c)+_0x5aa5e6(0x251)),await db[_0x5aa5e6(0x116)](_0x5aa5e6(0x1f8)+'\x20\x20\x20CREATE\x20'+'TABLE\x20IF\x20N'+_0x5aa5e6(0x167)+'build_info'+_0x5aa5e6(0x236)+_0x5aa5e6(0x204)+_0x5aa5e6(0x21b)+'IMARY\x20KEY,'+_0x5aa5e6(0x1f8)+_0x5aa5e6(0x1b8)+_0x5aa5e6(0x1aa)+'INTEGER\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5aa5e6(0x163)+'\x20'),await db['exec'](_0x5aa5e6(0x1f8)+_0x5aa5e6(0x115)+_0x5aa5e6(0x17d)+_0x5aa5e6(0x167)+_0x5aa5e6(0x1b3)+_0x5aa5e6(0x17a)+_0x5aa5e6(0x233)+_0x5aa5e6(0x14d)+_0x5aa5e6(0x24d)+_0x5aa5e6(0x226)+_0x5aa5e6(0x233)+_0x5aa5e6(0x16d)+_0x5aa5e6(0x151)+_0x5aa5e6(0x233)+_0x5aa5e6(0x12c)+'TEGER,\x0a\x20\x20\x20'+_0x5aa5e6(0x233)+'\x20\x20\x20downloa'+_0x5aa5e6(0x208)+_0x5aa5e6(0x11a)+_0x5aa5e6(0x1da)),await db[_0x5aa5e6(0x116)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5aa5e6(0x115)+_0x5aa5e6(0x17d)+_0x5aa5e6(0x167)+'plugin_rem'+'oved\x20(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5aa5e6(0x174)+_0x5aa5e6(0x23c)+'\x20KEY,\x0a\x20\x20\x20\x20'+_0x5aa5e6(0x233)+'\x20\x20origin\x20T'+'EXT\x0a\x20\x20\x20\x20\x20\x20'+_0x5aa5e6(0x249)+'\x20\x20\x20\x20\x20\x20\x20');const _0x369b15=await db[_0x5aa5e6(0x225)](_0x5aa5e6(0x118)+_0x5aa5e6(0x13c)+_0x5aa5e6(0x121)+'WHERE\x20sett'+'ing_key\x20=\x20'+_0x5aa5e6(0x1d3)+'e\x27');!_0x369b15&&await db['run'](_0x5aa5e6(0x16c)+_0x5aa5e6(0x159)+_0x5aa5e6(0x1fb)+'etting_key'+_0x5aa5e6(0x169)+_0x5aa5e6(0x1d3)+'e\x27)'),info('['+name+(_0x5aa5e6(0x248)+_0x5aa5e6(0x235)));}catch(_0x49cf69){error(_0x49cf69,'['+name+(_0x5aa5e6(0x248)+_0x5aa5e6(0x1d8)+_0x5aa5e6(0x185)+_0x5aa5e6(0x23e)));throw _0x49cf69;}}async function getAutoUpdateSettings(){const _0x35717e=_0x443c5e;try{const _0x52cd6c=await db[_0x35717e(0x225)](_0x35717e(0x118)+_0x35717e(0x13c)+_0x35717e(0x121)+'WHERE\x20sett'+_0x35717e(0x156)+_0x35717e(0x1d3)+'e\x27');return{'enabled':!!_0x52cd6c?.['enabled'],'lastCheckedAt':_0x52cd6c?.[_0x35717e(0x21e)+_0x35717e(0x10f)]||null,'nextCheckAt':_0x52cd6c?.[_0x35717e(0x1e0)+_0x35717e(0x13e)]||null};}catch(_0x5b5af6){return error(_0x5b5af6,'['+name+(']\x20Failed\x20t'+_0x35717e(0x123)+_0x35717e(0x1e1)+_0x35717e(0x20c))),{'enabled':![],'lastCheckedAt':null,'nextCheckAt':null};}}async function setAutoUpdateStatus(_0x104cab){const _0x2a92b8=_0x443c5e;try{const _0x1faa53=_0x104cab?DateTime[_0x2a92b8(0x10c)]()[_0x2a92b8(0x241)]({'hours':0x18})['toSeconds']():null;await db[_0x2a92b8(0x150)](_0x2a92b8(0x215)+_0x2a92b8(0x22c)+_0x2a92b8(0x112)+_0x2a92b8(0x183)+_0x2a92b8(0x1e0)+_0x2a92b8(0x1e7)+_0x2a92b8(0x232)+_0x2a92b8(0x1bb)+_0x2a92b8(0x1c1),[_0x104cab?-0x1c5a*0x1+0x1*0x1b2f+0x12c:-0x1053+0x1*0x26f5+0x16a2*-0x1,_0x1faa53]);if(_0x104cab)await updateCheckTimestamps();return!![];}catch(_0x4aa3e3){return error(_0x4aa3e3,'['+name+(_0x2a92b8(0x164)+'o\x20set\x20auto'+'update\x20sta'+'tus')),![];}}async function updateCheckTimestamps(){const _0x3ec1c8=_0x443c5e;try{const _0x46b0e3=Math['floor'](Date[_0x3ec1c8(0x10c)]()/(0x135b+-0x1*-0x1cd0+-0x4eb*0x9)),_0x13fbf1=DateTime[_0x3ec1c8(0x10c)]()[_0x3ec1c8(0x241)]({'hours':0x18})[_0x3ec1c8(0x1bd)]();await db['run'](_0x3ec1c8(0x215)+_0x3ec1c8(0x22c)+_0x3ec1c8(0x1cf)+_0x3ec1c8(0x244)+_0x3ec1c8(0xfc)+'xt_check_a'+_0x3ec1c8(0x100)+_0x3ec1c8(0x1d1)+_0x3ec1c8(0x1a0)+_0x3ec1c8(0x1f7),[_0x46b0e3,Math[_0x3ec1c8(0x1c0)](_0x13fbf1)]);}catch(_0x49454d){error(_0x49454d,'['+name+(_0x3ec1c8(0x164)+_0x3ec1c8(0x20a)+_0x3ec1c8(0x114)+_0x3ec1c8(0x16f)));}}function setupApi(_0x33b9bb){const _0x2abeea=_0x443c5e;botRef=_0x33b9bb;if(botRef){if(typeof botRef[_0x2abeea(0x1e5)+'e']==='function')sendApi=async(_0x51203f,_0x38cc6f)=>await botRef['sendMessag'+'e'](_0x51203f,_0x38cc6f);else botRef[_0x2abeea(0x158)]&&typeof botRef[_0x2abeea(0x158)][_0x2abeea(0x1e5)+'e']===_0x2abeea(0x1de)?sendApi=async(_0x23805,_0x4ed543)=>await botRef[_0x2abeea(0x158)][_0x2abeea(0x1e5)+'e'](_0x23805,_0x4ed543):(sendApi=null,warn('['+name+(']\x20No\x20send\x20'+_0x2abeea(0x111)+'ilable\x20on\x20'+_0x2abeea(0x104)+'ce')));}}async function safeSend(_0x1c558e,_0x24e5b9){const _0x5a7dea=_0x443c5e;if(!_0x1c558e){warn('['+name+(_0x5a7dea(0x1fc)+'\x20called\x20wi'+_0x5a7dea(0x166)+_0x5a7dea(0x19f)));return;}try{if(sendApi)await sendApi(_0x1c558e,{'text':_0x24e5b9});else{const _0x245b37=botRef?_0x5a7dea(0x24c)+_0x5a7dea(0x1b4):_0x5a7dea(0x210)+_0x5a7dea(0x1a6),_0x5afa50=botRef?.[_0x5a7dea(0x158)]?'sock\x20exist'+'s':_0x5a7dea(0x110)+'ll';error('['+name+(_0x5a7dea(0x1a5)+'API\x20availa'+'ble.\x20')+_0x245b37+',\x20'+_0x5afa50+(_0x5a7dea(0x202)+_0x5a7dea(0x136))+_0x1c558e);}}catch(_0x241dfc){error(_0x241dfc,'['+name+(_0x5a7dea(0x164)+_0x5a7dea(0x205)+_0x5a7dea(0x103))+_0x1c558e);}}async function fetchBuildInfo(){const _0xbca83d=_0x443c5e;try{const _0x14cdb8=await fetch(API_URL);if(!_0x14cdb8['ok'])throw new Error('API\x20reques'+_0xbca83d(0x11b)+_0x14cdb8['status']);return await _0x14cdb8[_0xbca83d(0x10d)]();}catch(_0x2fec33){return error(_0x2fec33,'['+name+(']\x20Failed\x20t'+_0xbca83d(0x122)+'ild\x20info')),null;}}async function getLocalSnapshot(){const _0x5ee86d=_0x443c5e;try{const _0x154bc2=await db[_0x5ee86d(0x247)](_0x5ee86d(0x118)+_0x5ee86d(0x191)+'_snapshot'),_0x29f3b2=await db[_0x5ee86d(0x225)](_0x5ee86d(0x160)+_0x5ee86d(0x1aa)+_0x5ee86d(0x1e4)+_0x5ee86d(0x18a)+_0x5ee86d(0x1fa)+_0x5ee86d(0x16e));if(!_0x154bc2||!_0x29f3b2)return null;return{'files':_0x154bc2,'lastModified':_0x29f3b2[_0x5ee86d(0x257)+'ed']};}catch(_0x1762df){return null;}}async function saveLocalSnapshot(_0x44af10){const _0x250813=_0x443c5e;try{await db['exec'](_0x250813(0x12f)+_0x250813(0x240)),await db[_0x250813(0x116)](_0x250813(0x173)+_0x250813(0x11f)+_0x250813(0x214)),await db['run'](_0x250813(0x105)+_0x250813(0x170)+_0x250813(0x13b)+_0x250813(0x1d7)+_0x250813(0x257)+'ed)\x20VALUES'+'\x20(\x27snapsho'+'t\x27,\x20?)',[_0x44af10['lastModifi'+'ed']]);const _0x74522d=await db[_0x250813(0x1a4)](_0x250813(0x16c)+'O\x20plugin_s'+_0x250813(0x1a8)+_0x250813(0x125)+_0x250813(0x175)+_0x250813(0x155)+_0x250813(0x1c8)+'\x20?,\x20?,\x20?)');for(const _0x94e745 of _0x44af10[_0x250813(0x200)]){await _0x74522d[_0x250813(0x150)](_0x94e745[_0x250813(0x107)],_0x94e745[_0x250813(0x1cd)],_0x94e745[_0x250813(0x1c2)],_0x94e745[_0x250813(0x1dc)]);}await _0x74522d[_0x250813(0x24e)](),await db[_0x250813(0x116)](_0x250813(0x17c)),info('['+name+(_0x250813(0x222)+_0x250813(0x24a)+_0x250813(0x1b6)));}catch(_0x2e132e){await db[_0x250813(0x116)](_0x250813(0x220)),error(_0x2e132e,'['+name+(_0x250813(0x164)+_0x250813(0x1e6)+_0x250813(0x124)+_0x250813(0x1fe)));}}async function createInitialSnapshotIfNeeded(){const _0x3be9da=_0x443c5e,_0x22f8e4=await getLocalSnapshot();if(!_0x22f8e4){info('['+name+(']\x20No\x20local'+_0x3be9da(0x23b)+_0x3be9da(0x23f)+_0x3be9da(0x129)+_0x3be9da(0x201)+_0x3be9da(0x117)+'.'));const _0x2894ae=await fetchBuildInfo();_0x2894ae?(await saveLocalSnapshot(_0x2894ae),info('['+name+(']\x20Initial\x20'+'snapshot\x20c'+_0x3be9da(0x19d)+_0x3be9da(0x19e)))):warn('['+name+(_0x3be9da(0x228)+_0x3be9da(0x1a2)+_0x3be9da(0x1a9)+_0x3be9da(0x17b)+_0x3be9da(0x1e9)+_0x3be9da(0x1ca)+_0x3be9da(0x144)));}}function getDestinationPath(_0x5e870d){const _0x4db749=_0x443c5e,_0x1e3379=[_0x4db749(0x243),_0x4db749(0x207),_0x4db749(0xfe)+'on',_0x4db749(0x186)];if(_0x5e870d['origin']==='carl')return _0x2e9017[_0x4db749(0x187)](projectRoot,_0x4db749(0x223),_0x5e870d['name']);if(_0x5e870d[_0x4db749(0x1cd)]===_0x4db749(0x1ed))return _0x2e9017['join'](projectRoot,'modules',_0x5e870d[_0x4db749(0x107)]);if(_0x1e3379['includes'](_0x5e870d['name']))return _0x2e9017[_0x4db749(0x187)](projectRoot,_0x5e870d[_0x4db749(0x107)]);return _0x2e9017[_0x4db749(0x187)](projectRoot,'utils',_0x5e870d[_0x4db749(0x107)]);}async function applyUpdates(_0xf12487){const _0x370ef9=_0x443c5e;let _0x3da705=![];const _0x2fcacc=[],_0x5c1175=[];for(const _0x42036f of _0xf12487){if(!_0x42036f||!_0x42036f[_0x370ef9(0x1dc)]){warn('['+name+(_0x370ef9(0x15e)+_0x370ef9(0x182)+'or\x20')+(_0x42036f?.['name']??_0x370ef9(0x1d6))+(';\x20skipping'+'.'));continue;}const _0x3da873=getDestinationPath(_0x42036f);try{const _0x533c61=await fetch(_0x42036f[_0x370ef9(0x1dc)]);if(!_0x533c61['ok']){warn('['+name+(_0x370ef9(0x164)+_0x370ef9(0x18c)+'\x20')+_0x42036f['name']+':\x20'+_0x533c61[_0x370ef9(0x109)]);continue;}const _0x35fff1=await _0x533c61[_0x370ef9(0x21f)]();let _0x2b682a=null;try{_0x2b682a=await _0xc390a8[_0x370ef9(0x22b)](_0x3da873,_0x370ef9(0x165));}catch(_0x2d783e){_0x2b682a=null;}if(_0x2b682a!==null&&_0x2b682a===_0x35fff1){info('['+name+(']\x20Skipped\x20'+_0x370ef9(0x20b))+_0x42036f[_0x370ef9(0x107)]+(_0x370ef9(0x18d)+_0x370ef9(0x1ef)+'.'));continue;}await _0xc390a8[_0x370ef9(0x24b)](_0x2e9017[_0x370ef9(0x1bf)](_0x3da873),{'recursive':!![]}),await _0xc390a8[_0x370ef9(0xfa)](_0x3da873,_0x35fff1,_0x370ef9(0x165)),_0x42036f[_0x370ef9(0x1cd)]===_0x370ef9(0x223)||_0x42036f['origin']===_0x370ef9(0x1ed)?_0x2fcacc['push'](String(_0x42036f[_0x370ef9(0x107)])['replace'](/\.js$/,'')):_0x5c1175[_0x370ef9(0x132)](_0x42036f['name']),info('['+name+(_0x370ef9(0x14c)+'date\x20for\x20')+_0x42036f[_0x370ef9(0x107)]+_0x370ef9(0x145)+_0x3da873);}catch(_0x9450f4){warn(_0x9450f4,'['+name+(_0x370ef9(0x12e)+'ile\x20updati'+_0x370ef9(0x195))+_0x42036f['name']);}}const _0x54a8e5=_0x5c1175[_0x370ef9(0x131)]('package.js'+'on');if(_0x54a8e5)try{info('['+name+(_0x370ef9(0x1db)+_0x370ef9(0x1ee)+_0x370ef9(0x148)+_0x370ef9(0x139)+_0x370ef9(0x231))),await exec('yarn\x20insta'+'ll',{'cwd':projectRoot}),info('['+name+(']\x20Dependen'+_0x370ef9(0x253)+_0x370ef9(0x217)+'ssfully.'));}catch(_0x8dd84b){error(_0x8dd84b,'['+name+(']\x20\x27yarn\x20in'+_0x370ef9(0x1d9)+_0x370ef9(0x1a7)));}if(_0x5c1175[_0x370ef9(0x193)]>0x4*-0x4cf+-0x1*0x162d+0x2969)_0x3da705=!![];return{'updatedPluginFiles':_0x2fcacc,'updatedCoreFiles':_0x5c1175,'needsReboot':_0x3da705};}async function getRemovedPluginsSet(){const _0x19a526=_0x443c5e;try{const _0x38c07f=await db['all']('SELECT\x20nam'+_0x19a526(0x21c)+_0x19a526(0x237)+'d');if(!_0x38c07f)return new Set();const _0x5a3f56=_0x38c07f[_0x19a526(0x234)](_0x57fb13=>String(_0x57fb13['name'])[_0x19a526(0x246)+'e']()[_0x19a526(0x1a3)](/\.js$/,''));return new Set(_0x5a3f56);}catch(_0x5cbe5d){return warn(_0x5cbe5d,'['+name+(_0x19a526(0x228)+'t\x20read\x20rem'+_0x19a526(0x213)+_0x19a526(0x180)+';\x20proceedi'+_0x19a526(0x245)+_0x19a526(0x229)+'s.')),new Set();}}async function _schedulerTick(){const _0x4940e9=_0x443c5e;if(schedulerRunning)return;schedulerRunning=!![];try{const _0x56cc7e=await getAutoUpdateSettings();if(!_0x56cc7e[_0x4940e9(0x1bc)])return;const _0x227368=DateTime[_0x4940e9(0x10c)](),_0x5cbfa3=_0x56cc7e['nextCheckA'+'t']?DateTime[_0x4940e9(0x1a1)+'s'](_0x56cc7e[_0x4940e9(0x154)+'t']):_0x227368;_0x227368>=_0x5cbfa3&&(info('['+name+(_0x4940e9(0x23a)+_0x4940e9(0x20d)+_0x4940e9(0x242)+_0x4940e9(0x141))),await performAutomaticUpdate(),await updateCheckTimestamps());}catch(_0x405f7c){error(_0x405f7c,'['+name+(_0x4940e9(0x19c)+'r\x20tick\x20fai'+'led'));}finally{schedulerRunning=![];}}function startAutoUpdateScheduler(){const _0x2f0c9d=_0x443c5e;stopAutoUpdateScheduler();const _0x7cf3d9=-0x128e6+-0x15d43+-0x37089*-0x1-Date[_0x2f0c9d(0x10c)]()%(0x562f*0x3+0x1*0x11376+-0x12ba3);setTimeout(()=>{const _0x46a955=_0x2f0c9d;_schedulerTick()[_0x46a955(0x190)](()=>{}),schedulerInterval=setInterval(()=>_schedulerTick()[_0x46a955(0x190)](()=>{}),(0x17c9*-0x1+0x64f+0x11b6)*(-0x1*0x2150+0x1*-0x255d+-0x3d*-0x139));},_0x7cf3d9),info('['+name+(']\x20Auto-upd'+'ate\x20schedu'+_0x2f0c9d(0x1ae)+'d.'));}function stopAutoUpdateScheduler(){schedulerInterval&&(clearInterval(schedulerInterval),schedulerInterval=null);}async function findStoredMatchFromFindings(_0x1e518e=[]){const _0x39d0c0=_0x443c5e;try{const _0x2c1cd9=await listSudo();if(!Array[_0x39d0c0(0x24f)](_0x2c1cd9)||_0x2c1cd9['length']===0x29*0x6d+-0x2100+0xf8b)return null;const _0x4983db=new Set(_0x2c1cd9[_0x39d0c0(0x234)](String));for(const _0x2820f9 of _0x1e518e||[]){if(!_0x2820f9||typeof _0x2820f9[_0x39d0c0(0x126)]!==_0x39d0c0(0x153))continue;const _0x61a976=normalizeToJid(_0x2820f9[_0x39d0c0(0x126)]);if(_0x61a976&&_0x4983db[_0x39d0c0(0x15f)](_0x61a976))return _0x61a976;if(_0x4983db['has'](_0x2820f9[_0x39d0c0(0x126)]))return _0x2820f9[_0x39d0c0(0x126)];}return null;}catch(_0xb1ea37){return null;}}async function handleManualUpdateCheck(_0x8a26aa){const _0xeff327=_0x443c5e;await safeSend(_0x8a26aa,_0xeff327(0x18e)+_0xeff327(0x168)+_0xeff327(0x162));const _0x26174c=await fetchBuildInfo();if(!_0x26174c){await safeSend(_0x8a26aa,_0xeff327(0x1f5)+_0xeff327(0xfd)+_0xeff327(0x1c5)+_0xeff327(0x252)+_0xeff327(0x171)+'ter.');return;}const _0x158541=await getLocalSnapshot();!_0x158541||_0x26174c['lastModifi'+'ed']!==_0x158541[_0xeff327(0x257)+'ed']?await safeSend(_0x8a26aa,'üîÑ\x20An\x20updat'+_0xeff327(0x113)+_0xeff327(0x22e)+_0xeff327(0x198)+_0xeff327(0x157)+'y.'):await safeSend(_0x8a26aa,_0xeff327(0x152)+_0xeff327(0x10e)+_0xeff327(0x127)+_0xeff327(0x146));}async function handleManualUpdateNow(_0x38a2e1){const _0x36aac6=_0x443c5e;await safeSend(_0x38a2e1,_0x36aac6(0x199)+_0x36aac6(0x179)+_0x36aac6(0x1f9));const _0x1e540d=await fetchBuildInfo(),_0x5aab0b=await getLocalSnapshot();if(!_0x1e540d||!_0x5aab0b){await safeSend(_0x38a2e1,_0x36aac6(0x1f5)+_0x36aac6(0x1ab)+_0x36aac6(0x211)+'tion.\x20Abor'+'ting.');return;}const _0x3bd6d1=await getRemovedPluginsSet(),_0x26d126=new Map(_0x5aab0b[_0x36aac6(0x200)][_0x36aac6(0x234)](_0x19e07e=>[_0x19e07e[_0x36aac6(0x107)],_0x19e07e])),_0x116845=_0x1e540d[_0x36aac6(0x200)]['filter'](_0xda6a7c=>_0x26d126[_0x36aac6(0x225)](_0xda6a7c[_0x36aac6(0x107)])?.[_0x36aac6(0x1c2)]!==_0xda6a7c[_0x36aac6(0x1c2)]),_0x393af0=[],_0x52187e=[];for(const _0x346a4f of _0x116845){if(!_0x346a4f||!_0x346a4f[_0x36aac6(0x1cd)]){_0x52187e[_0x36aac6(0x132)](_0x346a4f);continue;}if([_0x36aac6(0x223),_0x36aac6(0x1ed)][_0x36aac6(0x131)](_0x346a4f[_0x36aac6(0x1cd)])){const _0x34e87b=String(_0x346a4f['name'])[_0x36aac6(0x246)+'e']()[_0x36aac6(0x1a3)](/\.js$/,'');if(_0x3bd6d1[_0x36aac6(0x15f)](_0x34e87b)){_0x393af0[_0x36aac6(0x132)](_0x34e87b);continue;}}_0x52187e[_0x36aac6(0x132)](_0x346a4f);}if(_0x52187e[_0x36aac6(0x193)]===-0xd96+0x11*0x122+-0x5ac){await saveLocalSnapshot(_0x1e540d);if(_0x393af0[_0x36aac6(0x193)]>0x676*-0x5+0xb50+-0x1*-0x14fe){const _0x379a6e=_0x393af0[_0x36aac6(0x234)]((_0x4cfc08,_0x180b46)=>_0x180b46+(0x7*0x115+0x1*0xd13+0x14a5*-0x1)+'.\x20'+_0x4cfc08)[_0x36aac6(0x187)]('\x0a');await safeSend(_0x38a2e1,_0x36aac6(0x16a)+_0x36aac6(0x1f0)+_0x36aac6(0x130)+'ly.\x0a\x0aSkipp'+_0x36aac6(0x212)+_0x36aac6(0x1c3)+_0x379a6e);}else await safeSend(_0x38a2e1,_0x36aac6(0x14b)+_0x36aac6(0x1d4)+_0x36aac6(0x11e)+'date.');return;}const _0x2ac687=await applyUpdates(_0x52187e);if(!_0x2ac687){await safeSend(_0x38a2e1,_0x36aac6(0x1d0)+_0x36aac6(0x1fd)+_0x36aac6(0xff)+_0x36aac6(0x209));return;}const {updatedPluginFiles:_0x21c86b,updatedCoreFiles:_0x17eb9a,needsReboot:_0xa0f51}=_0x2ac687;if(_0x21c86b[_0x36aac6(0x193)]===0x2*-0x1dc+-0x1113*-0x2+-0x1e6e&&_0x17eb9a[_0x36aac6(0x193)]===0xcef*-0x1+0x80*0x42+-0x1411){await saveLocalSnapshot(_0x1e540d);if(_0x393af0[_0x36aac6(0x193)]>-0x472*0x2+0x14ee+0x1*-0xc0a){const _0x30ef8d=_0x393af0[_0x36aac6(0x234)]((_0x4e38e7,_0x4cb994)=>_0x4cb994+(-0x4*-0x18+0xd07+-0xd66)+'.\x20'+_0x4e38e7)[_0x36aac6(0x187)]('\x0a');await safeSend(_0x38a2e1,_0x36aac6(0x16a)+_0x36aac6(0x1f0)+_0x36aac6(0x1dd)+_0x36aac6(0x14f)+_0x36aac6(0x172)+_0x36aac6(0x20e)+_0x30ef8d);}else await safeSend(_0x38a2e1,'üîÑ\x20Everythi'+_0x36aac6(0x1d4)+_0x36aac6(0x11e)+_0x36aac6(0x134));return;}const _0x39a960=[];if(_0x21c86b[_0x36aac6(0x193)]>0xca4*0x1+-0x1*0x26cb+-0x67*-0x41){if(_0x21c86b['length']<=0x1d79+0x11dc+0x1*-0x2f4b){const _0xacba86=_0x21c86b[_0x36aac6(0x234)]((_0x13ea80,_0x357cc8)=>_0x357cc8+(-0x2649+0x19fd*0x1+0xc4d)+'.\x20'+_0x13ea80)['join']('\x0a');_0x39a960[_0x36aac6(0x132)](_0x36aac6(0x21a)+_0x36aac6(0x137)+_0xacba86);}else _0x39a960[_0x36aac6(0x132)]('üîÑ\x20Updated\x20'+_0x36aac6(0x1be)+_0x36aac6(0x1eb)+'0\x20plugin\x20f'+_0x36aac6(0x1f4)+'updated.');}_0x17eb9a[_0x36aac6(0x193)]>0x2*0x1198+-0x6c7*0x2+-0x6*0x39b&&_0x39a960[_0x36aac6(0x132)](_0x36aac6(0x21a)+'core\x20compo'+_0x36aac6(0x227));if(_0x39a960['length']===0x6*0x4c7+-0x13c5+-0x21*0x45)_0x39a960[_0x36aac6(0x132)](_0x36aac6(0x1ea)+_0x36aac6(0x17f));(_0x17eb9a[_0x36aac6(0x193)]>0x1795+-0x10b1+-0x62*0x12||_0xa0f51)&&_0x39a960[_0x36aac6(0x132)](_0x36aac6(0x18b)+_0x36aac6(0x1f1)+'oot`\x20comma'+_0x36aac6(0x15b)+'\x20core\x20chan'+'ges\x20to\x20tak'+_0x36aac6(0x178));const _0xde4fc3=_0x39a960[_0x36aac6(0x187)]('\x0a\x0a');await safeSend(_0x38a2e1,_0xde4fc3),await saveLocalSnapshot(_0x1e540d);}async function performAutomaticUpdate(){const _0x27fbc8=_0x443c5e,_0x34f510=await fetchBuildInfo(),_0x21ac30=await getLocalSnapshot();if(!_0x34f510||!_0x21ac30||_0x34f510[_0x27fbc8(0x257)+'ed']===_0x21ac30['lastModifi'+'ed'])return;const _0x387c53=await getRemovedPluginsSet(),_0x3ef793=new Map(_0x21ac30[_0x27fbc8(0x200)][_0x27fbc8(0x234)](_0x263f76=>[_0x263f76['name'],_0x263f76])),_0x572952=_0x34f510['files'][_0x27fbc8(0x218)](_0xe507d7=>_0x3ef793[_0x27fbc8(0x225)](_0xe507d7[_0x27fbc8(0x107)])?.['mtime']!==_0xe507d7[_0x27fbc8(0x1c2)]);if(_0x572952[_0x27fbc8(0x193)]===0x1*-0xf61+-0x25f*0x7+-0x2*-0xffd){await saveLocalSnapshot(_0x34f510);return;}const _0x4d3a08=[],_0x21686=[];for(const _0xc113c9 of _0x572952){if(!_0xc113c9||!_0xc113c9[_0x27fbc8(0x1cd)]){_0x21686[_0x27fbc8(0x132)](_0xc113c9);continue;}if([_0x27fbc8(0x223),_0x27fbc8(0x1ed)][_0x27fbc8(0x131)](_0xc113c9[_0x27fbc8(0x1cd)])){const _0x15a36f=String(_0xc113c9['name']||'')[_0x27fbc8(0x246)+'e']()[_0x27fbc8(0x1a3)](/\.js$/,'');if(_0x387c53[_0x27fbc8(0x15f)](_0x15a36f)){_0x4d3a08[_0x27fbc8(0x132)](_0x15a36f);continue;}}_0x21686['push'](_0xc113c9);}if(_0x21686['length']===0xea3+0x1e+-0xec1){info('['+name+(']\x20Auto-upd'+_0x27fbc8(0x120)+_0x27fbc8(0x254)+_0x27fbc8(0x1e8)+'ltering\x20')+_0x4d3a08[_0x27fbc8(0x193)]+(_0x27fbc8(0x1cc)+_0x27fbc8(0x20f))),await saveLocalSnapshot(_0x34f510);return;}info('['+name+(']\x20Auto-upd'+_0x27fbc8(0x1e3))+_0x21686[_0x27fbc8(0x193)]+('\x20new\x20files'+_0x27fbc8(0x12d))+_0x4d3a08[_0x27fbc8(0x193)]+(_0x27fbc8(0x119)+_0x27fbc8(0x224)+'..'));const _0x2f8004=await applyUpdates(_0x21686);if(!_0x2f8004){warn('['+name+(_0x27fbc8(0x15d)+_0x27fbc8(0x1ac)+_0x27fbc8(0xfb)+_0x27fbc8(0x1b5)+'result.')),await saveLocalSnapshot(_0x34f510);return;}const {updatedPluginFiles:_0x2f63cc,updatedCoreFiles:_0xeca05e,needsReboot:_0x157856}=_0x2f8004;if(_0x2f63cc[_0x27fbc8(0x193)]===-0x8e9*0x2+-0x1e68+0x303a&&_0xeca05e[_0x27fbc8(0x193)]===-0x5e7*0x3+0xa*-0x11b+0x1cc3){info('['+name+(_0x27fbc8(0x15d)+_0x27fbc8(0x1ce)+_0x27fbc8(0x219)+_0x27fbc8(0x1b0)+_0x27fbc8(0x194)+_0x27fbc8(0x13f)+'n\x20identica'+_0x27fbc8(0x238)+'d\x20')+_0x4d3a08[_0x27fbc8(0x193)]+(_0x27fbc8(0x1cc)+_0x27fbc8(0x20f))),await saveLocalSnapshot(_0x34f510);return;}if(_0xeca05e[_0x27fbc8(0x193)]>0x3*0x4a3+0x13ed+0x3d*-0x8e){info('['+name+(_0x27fbc8(0x15d)+_0x27fbc8(0x1c4)+_0x27fbc8(0x1ad)+'ates.\x20Noti'+'fying\x20owne'+'r.'));const _0x505ede=getBotJid();if(_0x505ede){const _0x5c9556=[];_0x2f63cc[_0x27fbc8(0x193)]>0x1bac+-0x11b4+-0x9f8&&(_0x2f63cc['length']<=0x1*0x595+0x102+-0x68d?_0x5c9556[_0x27fbc8(0x132)](_0x27fbc8(0x12b)+_0x27fbc8(0x1c7)+_0x2f63cc[_0x27fbc8(0x234)]((_0x1060b8,_0x2d7952)=>_0x2d7952+(-0x1c*0x97+0xe27*-0x2+0x2cd3)+'.\x20'+_0x1060b8)[_0x27fbc8(0x187)]('\x0a')):_0x5c9556[_0x27fbc8(0x132)](_0x27fbc8(0x12b)+'ugins:\x20Mor'+_0x27fbc8(0x143)+_0x27fbc8(0x108)+_0x27fbc8(0x1cb)+_0x27fbc8(0x188))),_0x5c9556[_0x27fbc8(0x132)](_0x27fbc8(0x1f6)+'re\x20compone'+_0x27fbc8(0x1b7)),await safeSend(_0x505ede,_0x27fbc8(0x1b9)+_0x27fbc8(0x1ff)+_0x27fbc8(0x203)+_0x5c9556[_0x27fbc8(0x187)]('\x0a\x0a')+('\x0a\x0aPlease\x20r'+_0x27fbc8(0x13d)+_0x27fbc8(0x22f)+_0x27fbc8(0x17e)+_0x27fbc8(0x138)+'anges.'));}}else info('['+name+(']\x20Auto-upd'+_0x27fbc8(0x1c4)+_0x27fbc8(0x102)+'pdates:\x20')+_0x2f63cc[_0x27fbc8(0x193)]+'\x20item(s).');await saveLocalSnapshot(_0x34f510),info('['+name+(_0x27fbc8(0x15d)+'ate\x20applie'+'d\x20successf'+'ully.'));}export async function initialize(_0x5df540){const _0x2ccfd3=_0x443c5e;botRef=_0x5df540,setupApi(_0x5df540),await ensureSchema(),await createInitialSnapshotIfNeeded(),connectionUpdateHandler=_0x3f0624=>{const _0x2b87cb=_0x4a8a;if(_0x3f0624[_0x2b87cb(0x1df)]===_0x2b87cb(0x1b1))startAutoUpdateScheduler();else{if(_0x3f0624[_0x2b87cb(0x1df)]===_0x2b87cb(0x216))stopAutoUpdateScheduler();}},_0x5df540['on']('connection'+_0x2ccfd3(0x206),connectionUpdateHandler),(botRef['ws']?.[_0x2ccfd3(0x15a)]===-0x8c+0x20e2+-0x1*0x2055||botRef[_0x2ccfd3(0x158)]?.['ws']?.['readyState']===-0xf43+-0x1431+0x2375)&&startAutoUpdateScheduler(),info('['+name+(_0x2ccfd3(0x1c6)+'zed.'));}export async function onMessage(_0x36066c,_0x1d4f65){const _0x5b18fe=_0x443c5e;try{if(!_0x36066c||!_0x36066c[_0x5b18fe(0x11c)]||!_0x1d4f65)return;const _0x41758e=_0x36066c[_0x5b18fe(0x11c)]?.[_0x5b18fe(0x106)];if(!_0x41758e||_0x41758e[_0x5b18fe(0x161)]('@g.us'))return;const _0x26a4a8=(_0x36066c['text']||'')['trim']()[_0x5b18fe(0x246)+'e'](),_0x226e3d=_0x26a4a8[_0x5b18fe(0x1f3)](/\s+/),_0x1c1a04=_0x226e3d[-0x5*0x2da+0xd*0x1ff+0x49*-0x29];if(!commands[_0x5b18fe(0x131)](_0x1c1a04))return;const _0x3ea11d=!!_0x36066c[_0x5b18fe(0x11c)][_0x5b18fe(0x1d2)],_0xe379b8=await isSudo(botRef,_0x36066c);if(!_0x3ea11d&&!_0xe379b8)return;let _0x5754ca=_0x3ea11d?getBotJid():await findStoredMatchFromFindings(userJidFromCtx(_0x36066c)['findings']);if(!_0x5754ca)return;if(_0x1c1a04==='update'){const _0x177848=_0x226e3d[-0x5e*-0x56+-0x1033+-0xf60];if(_0x177848===_0x5b18fe(0x10c))await handleManualUpdateNow(_0x5754ca);else await handleManualUpdateCheck(_0x5754ca);}else{if(_0x1c1a04===_0x5b18fe(0x1ba)){const _0x54ac82=_0x226e3d[-0x150e+0xdf0+0x71f];if(_0x54ac82==='on')await setAutoUpdateStatus(!![]),await safeSend(_0x5754ca,_0x5b18fe(0x239)+'c\x20updates\x20'+'have\x20been\x20'+'ENABLED.\x20T'+'he\x20bot\x20wil'+_0x5b18fe(0x133)+'r\x20updates\x20'+_0x5b18fe(0x18f)+_0x5b18fe(0x181));else{if(_0x54ac82===_0x5b18fe(0x16b))await setAutoUpdateStatus(![]),await safeSend(_0x5754ca,'üîÑ\x20Automati'+_0x5b18fe(0x14e)+_0x5b18fe(0x1c9)+_0x5b18fe(0x22d));else{const _0x2013a8=await getAutoUpdateSettings(),_0x579764=_0x2013a8['enabled']?'ENABLED':'DISABLED',_0x2d722f=_0x2013a8[_0x5b18fe(0x154)+'t']?DateTime['fromSecond'+'s'](_0x2013a8['nextCheckA'+'t'])[_0x5b18fe(0x135)]():_0x5b18fe(0x13a)+_0x5b18fe(0x23e);await safeSend(_0x5754ca,'*Auto-Upda'+_0x5b18fe(0x10a)+'\x0a\x0aStatus:\x20'+'*'+_0x579764+(_0x5b18fe(0x14a)+_0x5b18fe(0x250))+_0x2d722f+('\x0a\x0aUsage:\x20a'+_0x5b18fe(0x101)+_0x5b18fe(0x230)));}}}}}catch(_0x2609be){error(_0x2609be,'['+name+(']\x20onMessag'+'e\x20error'));}}export async function cleanup(){const _0x17f602=_0x443c5e;stopAutoUpdateScheduler();try{botRef&&typeof botRef[_0x17f602(0x16b)]===_0x17f602(0x1de)&&connectionUpdateHandler&&botRef[_0x17f602(0x16b)](_0x17f602(0x1df)+_0x17f602(0x206),connectionUpdateHandler);}catch(_0x476957){warn('['+name+(_0x17f602(0x177)+_0x17f602(0x147)+_0x17f602(0x23d))+_0x476957[_0x17f602(0x12a)]);}botRef=null,sendApi=null,connectionUpdateHandler=null,info('['+name+(_0x17f602(0x22a)+'up.'));}export default{'name':name,'version':version,'priority':priority,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};