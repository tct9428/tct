const _0xa7ae12=_0x3f0f;(function(_0x16fd06,_0x176efe){const _0x58d21c=_0x3f0f,_0x29630d=_0x16fd06();while(!![]){try{const _0x10c9a7=parseInt(_0x58d21c(0xd5))/(0x2384+-0x10b*-0x5+0x1a*-0x191)+-parseInt(_0x58d21c(0x94))/(-0x128+-0xb2b*0x2+0x1780)*(parseInt(_0x58d21c(0x164))/(-0x2*0x8eb+-0xd54+-0x15b*-0x17))+parseInt(_0x58d21c(0x16c))/(0x8*-0x193+-0x26cc+0x3368)*(parseInt(_0x58d21c(0x114))/(-0x975*-0x1+0x1f*0xb+0x3*-0x397))+parseInt(_0x58d21c(0x97))/(-0x11c8+0x2*-0xe8a+0x2ee2)+parseInt(_0x58d21c(0x152))/(-0xbfb*-0x2+0x55*-0x3+-0x16f*0x10)+parseInt(_0x58d21c(0x9a))/(-0x1544+-0xfe*0x27+0x2*0x1dff)*(parseInt(_0x58d21c(0x10d))/(0x1252+-0x1ffd*-0x1+0xa5*-0x4e))+-parseInt(_0x58d21c(0xe9))/(-0x1d7e+-0x1336*-0x2+-0x1*0x8e4);if(_0x10c9a7===_0x176efe)break;else _0x29630d['push'](_0x29630d['shift']());}catch(_0x62827c){_0x29630d['push'](_0x29630d['shift']());}}}(_0x40e7,0x1c9*-0x1e1+0xad37b+0xaa2));import _0x3c2aad from'fs/promises';import _0x251d85 from'path';import{exec as _0x2f5bdb}from'child_process';import{promisify}from'util';import{fileURLToPath}from'url';function _0x3f0f(_0x18ed35,_0x26aa51){_0x18ed35=_0x18ed35-(0x11*0x3e+0x511+-0x171*0x6);const _0x63d048=_0x40e7();let _0x338ab1=_0x63d048[_0x18ed35];return _0x338ab1;}import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isSudo,listSudo,normalizeToJid,userJidFromCtx}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';const exec=promisify(_0x2f5bdb);export const name=_0xa7ae12(0x1cd);export const version=_0xa7ae12(0x117);export const priority=-0x8*-0x65+-0x2184+0x1e8e;export const commands=[_0xa7ae12(0x1cd),_0xa7ae12(0xe4)];let botRef=null,sendApi=null,schedulerInterval=null,schedulerRunning=![],connectionUpdateHandler=null;function _0x40e7(){const _0x1051d4=['re\x20compone','460wkHaIk','\x20update\x20pr','EXT\x20PRIMAR','he\x20bot\x20wil','t\x20create\x20i','and\x20to\x20app','FROM\x20build','\x20\x20\x20\x20\x20\x20);\x0a\x20','remoteJid','ges\x20to\x20tak','\x20\x20origin\x20T','ates.\x20Noti','\x20updates.',']\x20onMessag','zation\x20fai','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','.update','\x20core\x20chan','Y\x20KEY,\x0a\x20\x20\x20','ey\x20TEXT\x20PR','SELECT\x20las','th\x20no\x20dest','join','ed.\x20Runnin','download)\x20','\x20new\x20files','COMMIT;','modules','o\x20save\x20loc',']\x20No\x20local','les\x20were\x20w','\x0a\x0aPlease\x20r','\x20is\x20alread','update\x20set','B.\x20Creatin',']\x20Initial\x20','ate\x20schedu','ady\x20up\x20to\x20','es\x20were\x20up','\x0aPlease\x20ru','ate\x20found\x20','XT\x20PRIMARY','ate\x20applie','üîÑ\x20Everythi','tes\x20to\x20app','key\x20=\x20\x27aut','ination.',']\x20cleaned\x20','üîÑ\x20Automati','end\x20to\x20',']\x20package.','ilable\x20on\x20','fying\x20owne','endsWith',']\x20Saved\x20sn','sock','O\x20update_s','jid','_info\x20WHER','\x20KEY,\x0a\x20\x20\x20\x20','have\x20been\x20','INSERT\x20OR\x20','al\x20snapsho','\x27autoupdat','SELECT\x20nam','\x20PRIMARY\x20K','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','json','run','build_info','o\x20get\x20auto','nd\x20for\x20the','oved\x20(\x0a\x20\x20\x20','bot\x20instan','ugins:\x0a','tus','botRef\x20exi','cable\x20upda','TEXT,\x0a\x20\x20\x20\x20','\x0a\x0aUsage:\x20a','e\x20error','ile\x20updati','t\x20check\x20fo','t\x20failed:\x20','text','y\x20have\x20bee','`update\x20no','map','pshot.\x20Upd','SELECT\x20*\x20F','cies\x20insta','napshot',']\x20Error\x20wh','download\x20f','iles\x20were\x20','tes\x20were\x20a','_at','update','floor','ritten\x20(do','irst\x20run..','e\x20FROM\x20plu','gs\x20SET\x20las','ng\x20without','ecked_at\x20I','w`\x20to\x20appl','mtime',']\x20Skipped\x20','up.','connection','string','pplied.\x0a\x0aS','\x20\x20\x20CREATE\x20',';\x20proceedi','stall\x27\x20fai','plus','\x20removed).','writeFile','ate_settin','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','TEGER\x0a\x20\x20\x20\x20',']\x20Dependen','dirname','toLowerCas','ailed\x20whil','ugins:\x20Mor','tModified\x20','toRelative','o\x20fetch\x20bu','boot`\x20comm','origin','g_key\x20=\x20\x27a','yarn\x20insta','158RZkGBo','_at\x20=\x20?\x20WH','ly.\x0a\x0aSkipp','585840wigUvO','üîÑ\x20Could\x20no','all','831656xFPRQp','a\x20initiali','snapshot\x20c','API\x20availa','WHERE\x20sett','ERE\x20settin','ng\x20','c\x20Update\x20N',']\x20Missing\x20','t\x20get\x20upda','‚ÑπÔ∏è\x20Automati','\x20\x20\x20origin\x20','TEGER\x20DEFA','<unknown>','https://i-','*\x0aNext\x20Che','enabled','filter','finalize','ild\x20info','oupdate\x27','l\x20check\x20fo','plugin_sna','üîÑ\x20Updated\x20','botRef\x20is\x20','includes','now','y\x20up\x20to\x20da','ed)\x20VALUES','t\x20to\x20DB','\x20\x20\x20\x20\x20\x20\x20\x20);','e\x20effect.','or:\x20','function','d\x20successf','t\x20read\x20rem','accurate.','ully.','package.js','TEGER,\x0a\x20\x20\x20','status','Updates\x20re','üîÑ\x20No\x20appli','E\x20setting_','OT\x20EXISTS\x20','nfo\x20(key,\x20','utils','ate:\x20nothi','API\x20reques','ame,\x20origi','gs\x20SET\x20ena','reated\x20suc','VALUES\x20(?,','split','ing_key\x20=\x20','result.','\x20removed\x20p','utoupdate\x27','enabled\x20IN','18635yjQzrK','ns\x20from\x20DB','toSeconds','stall\x27...','\x20\x20\x20downloa','plugin_rem','E\x20key\x20=\x20\x27s','e\x20is\x20avail',']\x20\x27yarn\x20in','on|off','key','push','has','d\x20core\x20upd','writing\x20','autoupdate','TO\x20build_i','led','oot`\x20comma','date.','5339980xmubGc','message','EXT\x0a\x20\x20\x20\x20\x20\x20',']\x20Failed\x20t','dated.','wnloads\x20ma',']\x20Could\x20no','*Auto-Upda','g:\x0a','method\x20ava','ler\x20starte','ate:\x20apply','json\x20chang','off','DISABLED','lugin(s).','\x20\x20\x20\x20\x20\x20\x20\x20\x20)','auto-updat','apshot\x20to\x20','üîÑ\x20Checking','_settings\x20','start.cjs','_snapshot','ed_at',']\x20Auto-upd',']\x20DB\x20schem','\x20unchanged','\x20\x20\x20\x20\x20\x20\x20\x20\x20k',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20','c\x20updates\x20','readFile','last_check','nitial\x20sna','O\x20plugin_s','\x20‚Äî\x20content','sendMessag','27kpbbho','ck:\x20','led.','BEGIN\x20TRAN','lastModifi','catch','g\x20one\x20on\x20f','23575YTqZhc','te\x20Status*','tings\x20(\x0a\x20\x20','3.0.0','DISABLED.','\x20item(s).','napshot\x27','üîÑ\x20Update\x20c','\x20\x20\x20\x20\x20\x20\x20las','close','üîÑ\x20Your\x20bot','plugins:\x20M','carl','null','o\x20set\x20auto','ate\x20checks','readyState','\x20called\x20wi','ore\x20than\x201','TABLE\x20IF\x20N','UPDATE\x20upd','exec','at\x20=\x20?,\x20ne','ours.','get','M\x20plugin_s','\x20Applying.','tct.com/bu',']\x20safeSend','sage\x20to\x20','files','length','ed\x20updatin','nextCheckA','e\x27)','a\x20ensured.','\x20exclusion',']\x20Wrote\x20up','sock\x20exist','download','Updated\x20pl','gin_remove','IMARY\x20KEY,','ROM\x20plugin','pdates:\x20','name','üîÑ\x20Starting','cessfully.','INTEGER\x0a\x20\x20','ENABLED','NTEGER,\x0a\x20\x20',']\x20cleanup\x20','\x20\x20\x20\x20name\x20T','found\x20in\x20D','n\x20the\x20`reb','r\x20updates\x20','open','fromSecond','isArray',']\x20No\x20send\x20','ROM\x20update','n\x20identica','1838312aLxcUN','utf-8','INSERT\x20INT','\x20\x20\x20\x20next_c','ocess...','\x20?,\x20?,\x20?)','e\x20applying','\x20(\x27snapsho','replace','next_check','mkdir','updated.','ting.','anges.','@g.us','e\x20than\x2010\x20','SACTION;','turned\x20no\x20','7845yzEkrb','\x20snapshot\x20','\x20\x20\x20\x20\x20\x20\x20','sock\x20is\x20nu','\x20->\x20',';\x20skipping','plugins:\x0a'];_0x40e7=function(){return _0x1051d4;};return _0x40e7();}const API_URL=_0xa7ae12(0xa8)+_0xa7ae12(0x12f)+'ild',__filename=fileURLToPath(import.meta.url),__dirname=_0x251d85[_0xa7ae12(0x89)](__filename),projectRoot=_0x251d85['resolve'](__dirname,'..');async function ensureSchema(){const _0x49048b=_0xa7ae12;try{await db[_0x49048b(0x129)](_0x49048b(0x17b)+'\x20\x20\x20CREATE\x20'+_0x49048b(0x127)+_0x49048b(0xc6)+'update_set'+_0x49048b(0x116)+_0x49048b(0x1e3)+'\x20\x20\x20\x20settin'+'g_key\x20TEXT'+_0x49048b(0x1ad)+'EY,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x49048b(0xd4)+_0x49048b(0xa6)+'ULT\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20last_ch'+_0x49048b(0x1d4)+_0x49048b(0x146)+_0x49048b(0x1e3)+_0x49048b(0x155)+'heck_at\x20IN'+_0x49048b(0x1e4)+_0x49048b(0xb8)+_0x49048b(0x1ae)),await db['exec'](_0x49048b(0x17b)+_0x49048b(0x1dc)+'TABLE\x20IF\x20N'+_0x49048b(0xc6)+_0x49048b(0x1b1)+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x49048b(0x104)+_0x49048b(0x17f)+_0x49048b(0x13e)+_0x49048b(0x17b)+_0x49048b(0x11c)+_0x49048b(0x8d)+_0x49048b(0x144)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20'),await db[_0x49048b(0x129)](_0x49048b(0x17b)+_0x49048b(0x1dc)+_0x49048b(0x127)+_0x49048b(0xc6)+_0x49048b(0xb0)+'pshot\x20(\x0a\x20\x20'+_0x49048b(0x1e3)+_0x49048b(0x148)+_0x49048b(0x16e)+_0x49048b(0x17e)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x49048b(0xa5)+_0x49048b(0x1ba)+_0x49048b(0x1e3)+'\x20\x20mtime\x20IN'+_0x49048b(0xc1)+_0x49048b(0x1e3)+_0x49048b(0xd9)+'d\x20TEXT\x0a\x20\x20\x20'+_0x49048b(0xf9)+_0x49048b(0x105)),await db[_0x49048b(0x129)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x49048b(0x1dc)+'TABLE\x20IF\x20N'+_0x49048b(0xc6)+_0x49048b(0xda)+_0x49048b(0x1b4)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20name\x20TE'+_0x49048b(0x195)+_0x49048b(0x1a7)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x49048b(0x176)+_0x49048b(0xeb)+_0x49048b(0x173)+_0x49048b(0x166));const _0x297980=await db[_0x49048b(0x12c)](_0x49048b(0x1c5)+'ROM\x20update'+_0x49048b(0xfd)+_0x49048b(0x9e)+_0x49048b(0xd0)+_0x49048b(0x1ab)+'e\x27');!_0x297980&&await db[_0x49048b(0x1b0)]('INSERT\x20INT'+_0x49048b(0x1a4)+'ettings\x20(s'+'etting_key'+')\x20VALUES\x20('+'\x27autoupdat'+_0x49048b(0x136)),info('['+name+(_0x49048b(0x102)+_0x49048b(0x137)));}catch(_0x49dff8){error(_0x49dff8,'['+name+(']\x20DB\x20schem'+_0x49048b(0x9b)+_0x49048b(0x17a)+_0x49048b(0xe6)));throw _0x49dff8;}}async function getAutoUpdateSettings(){const _0x4d075d=_0xa7ae12;try{const _0x9aef67=await db[_0x4d075d(0x12c)](_0x4d075d(0x1c5)+_0x4d075d(0x150)+_0x4d075d(0xfd)+_0x4d075d(0x9e)+_0x4d075d(0xd0)+_0x4d075d(0x1ab)+'e\x27');return{'enabled':!!_0x9aef67?.[_0x4d075d(0xaa)],'lastCheckedAt':_0x9aef67?.[_0x4d075d(0x108)+_0x4d075d(0x100)]||null,'nextCheckAt':_0x9aef67?.[_0x4d075d(0x15b)+_0x4d075d(0x1cc)]||null};}catch(_0x54150e){return error(_0x54150e,'['+name+(_0x4d075d(0xec)+_0x4d075d(0x1b2)+_0x4d075d(0x18d)+'tings')),{'enabled':![],'lastCheckedAt':null,'nextCheckAt':null};}}async function setAutoUpdateStatus(_0x59b663){const _0x5cf853=_0xa7ae12;try{const _0x288d69=_0x59b663?DateTime[_0x5cf853(0xb4)]()[_0x5cf853(0x1df)]({'hours':0x18})[_0x5cf853(0xd7)]():null;await db[_0x5cf853(0x1b0)](_0x5cf853(0x128)+_0x5cf853(0x1e2)+_0x5cf853(0xcc)+'bled\x20=\x20?,\x20'+'next_check'+_0x5cf853(0x95)+_0x5cf853(0x9f)+_0x5cf853(0x92)+_0x5cf853(0xd3),[_0x59b663?-0x8c8+-0xe78+0x1741:0x94d+0x1*-0x3a8+-0x5a5,_0x288d69]);if(_0x59b663)await updateCheckTimestamps();return!![];}catch(_0x498a3b){return error(_0x498a3b,'['+name+(_0x5cf853(0xec)+_0x5cf853(0x122)+'update\x20sta'+_0x5cf853(0x1b7))),![];}}async function updateCheckTimestamps(){const _0x47bc12=_0xa7ae12;try{const _0x3cc081=Math[_0x47bc12(0x1ce)](Date[_0x47bc12(0xb4)]()/(-0x416*0x1+-0x254*0xc+0x23ee)),_0x8e2094=DateTime['now']()[_0x47bc12(0x1df)]({'hours':0x18})['toSeconds']();await db['run'](_0x47bc12(0x128)+_0x47bc12(0x1e2)+_0x47bc12(0x1d2)+'t_checked_'+_0x47bc12(0x12a)+'xt_check_a'+'t\x20=\x20?\x20WHER'+_0x47bc12(0xc5)+_0x47bc12(0x199)+_0x47bc12(0xae),[_0x3cc081,Math[_0x47bc12(0x1ce)](_0x8e2094)]);}catch(_0x3e815f){error(_0x3e815f,'['+name+(']\x20Failed\x20t'+'o\x20update\x20c'+'heck\x20times'+'tamps'));}}function setupApi(_0x3fe89b){const _0x96561a=_0xa7ae12;botRef=_0x3fe89b;if(botRef){if(typeof botRef['sendMessag'+'e']===_0x96561a(0xbb))sendApi=async(_0x1b8ce8,_0x52be0c)=>await botRef['sendMessag'+'e'](_0x1b8ce8,_0x52be0c);else botRef[_0x96561a(0x1a3)]&&typeof botRef[_0x96561a(0x1a3)][_0x96561a(0x10c)+'e']===_0x96561a(0xbb)?sendApi=async(_0x5c41ce,_0x4116ed)=>await botRef[_0x96561a(0x1a3)][_0x96561a(0x10c)+'e'](_0x5c41ce,_0x4116ed):(sendApi=null,warn('['+name+(_0x96561a(0x14f)+_0x96561a(0xf2)+_0x96561a(0x19f)+_0x96561a(0x1b5)+'ce')));}}async function safeSend(_0x29b1c1,_0x16e791){const _0x4fe613=_0xa7ae12;if(!_0x29b1c1){warn('['+name+(_0x4fe613(0x130)+_0x4fe613(0x125)+_0x4fe613(0x181)+_0x4fe613(0x19a)));return;}try{if(sendApi)await sendApi(_0x29b1c1,{'text':_0x16e791});else{const _0x2ca8da=botRef?_0x4fe613(0x1b8)+'sts':_0x4fe613(0xb2)+_0x4fe613(0x121),_0x56f928=botRef?.[_0x4fe613(0x1a3)]?_0x4fe613(0x13a)+'s':_0x4fe613(0x167)+'ll';error('['+name+(']\x20No\x20send\x20'+_0x4fe613(0x9d)+'ble.\x20')+_0x2ca8da+',\x20'+_0x56f928+('.\x20Cannot\x20s'+_0x4fe613(0x19d))+_0x29b1c1);}}catch(_0x5ecacc){error(_0x5ecacc,'['+name+(_0x4fe613(0xec)+'o\x20send\x20mes'+_0x4fe613(0x131))+_0x29b1c1);}}async function fetchBuildInfo(){const _0x330294=_0xa7ae12;try{const _0x59a69b=await fetch(API_URL);if(!_0x59a69b['ok'])throw new Error(_0x330294(0xca)+_0x330294(0x1bf)+_0x59a69b[_0x330294(0xc2)]);return await _0x59a69b[_0x330294(0x1af)]();}catch(_0x4d3cef){return error(_0x4d3cef,'['+name+(_0x330294(0xec)+_0x330294(0x8f)+_0x330294(0xad))),null;}}async function getLocalSnapshot(){const _0x2a02a9=_0xa7ae12;try{const _0x302a19=await db[_0x2a02a9(0x99)]('SELECT\x20*\x20F'+_0x2a02a9(0x13f)+_0x2a02a9(0xff)),_0x59b199=await db[_0x2a02a9(0x12c)](_0x2a02a9(0x180)+'tModified\x20'+_0x2a02a9(0x172)+_0x2a02a9(0x1a6)+_0x2a02a9(0xdb)+_0x2a02a9(0x11a));if(!_0x302a19||!_0x59b199)return null;return{'files':_0x302a19,'lastModified':_0x59b199[_0x2a02a9(0x111)+'ed']};}catch(_0x168d29){return null;}}async function saveLocalSnapshot(_0x5b0361){const _0x4212b7=_0xa7ae12;try{await db[_0x4212b7(0x129)](_0x4212b7(0x110)+_0x4212b7(0x162)),await db[_0x4212b7(0x129)]('DELETE\x20FRO'+_0x4212b7(0x12d)+_0x4212b7(0x1c7)),await db[_0x4212b7(0x1b0)](_0x4212b7(0x1a9)+'REPLACE\x20IN'+_0x4212b7(0xe5)+_0x4212b7(0xc7)+_0x4212b7(0x111)+_0x4212b7(0xb6)+_0x4212b7(0x159)+'t\x27,\x20?)',[_0x5b0361[_0x4212b7(0x111)+'ed']]);const _0x4af249=await db['prepare'](_0x4212b7(0x154)+_0x4212b7(0x10a)+'napshot\x20(n'+_0x4212b7(0xcb)+'n,\x20mtime,\x20'+_0x4212b7(0x184)+_0x4212b7(0xce)+_0x4212b7(0x157));for(const _0x55f368 of _0x5b0361['files']){await _0x4af249[_0x4212b7(0x1b0)](_0x55f368[_0x4212b7(0x141)],_0x55f368[_0x4212b7(0x91)],_0x55f368[_0x4212b7(0x1d6)],_0x55f368['download']);}await _0x4af249[_0x4212b7(0xac)](),await db['exec'](_0x4212b7(0x186)),info('['+name+(_0x4212b7(0x1a2)+_0x4212b7(0xfb)+'database.'));}catch(_0x41a046){await db['exec']('ROLLBACK;'),error(_0x41a046,'['+name+(_0x4212b7(0xec)+_0x4212b7(0x188)+_0x4212b7(0x1aa)+_0x4212b7(0xb7)));}}async function createInitialSnapshotIfNeeded(){const _0x19e1ad=_0xa7ae12,_0x150f8e=await getLocalSnapshot();if(!_0x150f8e){info('['+name+(_0x19e1ad(0x189)+_0x19e1ad(0x165)+_0x19e1ad(0x149)+_0x19e1ad(0x18e)+_0x19e1ad(0x113)+_0x19e1ad(0x1d0)+'.'));const _0x298277=await fetchBuildInfo();_0x298277?(await saveLocalSnapshot(_0x298277),info('['+name+(_0x19e1ad(0x18f)+_0x19e1ad(0x9c)+_0x19e1ad(0xcd)+_0x19e1ad(0x143)))):warn('['+name+(_0x19e1ad(0xef)+_0x19e1ad(0x170)+_0x19e1ad(0x109)+_0x19e1ad(0x1c4)+_0x19e1ad(0x123)+'\x20may\x20be\x20in'+_0x19e1ad(0xbe)));}}function getDestinationPath(_0x17e8de){const _0x1ea8c8=_0xa7ae12,_0x1e9c23=['bot.js',_0x1ea8c8(0xfe),_0x1ea8c8(0xc0)+'on','qrcode.js'];if(_0x17e8de[_0x1ea8c8(0x91)]===_0x1ea8c8(0x120))return _0x251d85['join'](projectRoot,_0x1ea8c8(0x120),_0x17e8de[_0x1ea8c8(0x141)]);if(_0x17e8de[_0x1ea8c8(0x91)]===_0x1ea8c8(0x187))return _0x251d85[_0x1ea8c8(0x182)](projectRoot,'modules',_0x17e8de[_0x1ea8c8(0x141)]);if(_0x1e9c23['includes'](_0x17e8de[_0x1ea8c8(0x141)]))return _0x251d85[_0x1ea8c8(0x182)](projectRoot,_0x17e8de[_0x1ea8c8(0x141)]);return _0x251d85['join'](projectRoot,_0x1ea8c8(0xc8),_0x17e8de[_0x1ea8c8(0x141)]);}async function applyUpdates(_0x3acb9f){const _0x3cc2ba=_0xa7ae12;let _0x8aae7d=![];const _0x4eb7f4=[],_0x1f6e1a=[];for(const _0x84e5d1 of _0x3acb9f){if(!_0x84e5d1||!_0x84e5d1[_0x3cc2ba(0x13b)]){warn('['+name+(_0x3cc2ba(0xa2)+_0x3cc2ba(0x1c9)+'or\x20')+(_0x84e5d1?.[_0x3cc2ba(0x141)]??_0x3cc2ba(0xa7))+(_0x3cc2ba(0x169)+'.'));continue;}const _0x511098=getDestinationPath(_0x84e5d1);try{const _0x3ded42=await fetch(_0x84e5d1[_0x3cc2ba(0x13b)]);if(!_0x3ded42['ok']){warn('['+name+(']\x20Failed\x20t'+'o\x20download'+'\x20')+_0x84e5d1[_0x3cc2ba(0x141)]+':\x20'+_0x3ded42[_0x3cc2ba(0xc2)]);continue;}const _0x430782=await _0x3ded42[_0x3cc2ba(0x1c0)]();let _0x3ba83c=null;try{_0x3ba83c=await _0x3c2aad[_0x3cc2ba(0x107)](_0x511098,'utf-8');}catch(_0x58a8b4){_0x3ba83c=null;}if(_0x3ba83c!==null&&_0x3ba83c===_0x430782){info('['+name+(_0x3cc2ba(0x1d7)+_0x3cc2ba(0xe3))+_0x84e5d1[_0x3cc2ba(0x141)]+(_0x3cc2ba(0x10b)+_0x3cc2ba(0x103)+'.'));continue;}await _0x3c2aad[_0x3cc2ba(0x15c)](_0x251d85['dirname'](_0x511098),{'recursive':!![]}),await _0x3c2aad[_0x3cc2ba(0x1e1)](_0x511098,_0x430782,_0x3cc2ba(0x153)),_0x84e5d1[_0x3cc2ba(0x91)]===_0x3cc2ba(0x120)||_0x84e5d1[_0x3cc2ba(0x91)]===_0x3cc2ba(0x187)?_0x4eb7f4[_0x3cc2ba(0xe0)](String(_0x84e5d1[_0x3cc2ba(0x141)])[_0x3cc2ba(0x15a)](/\.js$/,'')):_0x1f6e1a['push'](_0x84e5d1[_0x3cc2ba(0x141)]),info('['+name+(_0x3cc2ba(0x139)+'date\x20for\x20')+_0x84e5d1[_0x3cc2ba(0x141)]+_0x3cc2ba(0x168)+_0x511098);}catch(_0x1cf2f5){warn(_0x1cf2f5,'['+name+(_0x3cc2ba(0x1c8)+_0x3cc2ba(0x1bd)+_0x3cc2ba(0xa0))+_0x84e5d1[_0x3cc2ba(0x141)]);}}const _0x26eea6=_0x1f6e1a['includes']('package.js'+'on');if(_0x26eea6)try{info('['+name+(_0x3cc2ba(0x19e)+_0x3cc2ba(0xf5)+_0x3cc2ba(0x183)+'g\x20\x27yarn\x20in'+_0x3cc2ba(0xd8))),await exec(_0x3cc2ba(0x93)+'ll',{'cwd':projectRoot}),info('['+name+(_0x3cc2ba(0x1e5)+_0x3cc2ba(0x1c6)+'lled\x20succe'+'ssfully.'));}catch(_0xe138b7){error(_0xe138b7,'['+name+(_0x3cc2ba(0xdd)+_0x3cc2ba(0x1de)+_0x3cc2ba(0x10f)));}if(_0x1f6e1a[_0x3cc2ba(0x133)]>-0x1d8e+0x1435+0x959)_0x8aae7d=!![];return{'updatedPluginFiles':_0x4eb7f4,'updatedCoreFiles':_0x1f6e1a,'needsReboot':_0x8aae7d};}async function getRemovedPluginsSet(){const _0x434ee4=_0xa7ae12;try{const _0x8fec82=await db['all'](_0x434ee4(0x1ac)+_0x434ee4(0x1d1)+_0x434ee4(0x13d)+'d');if(!_0x8fec82)return new Set();const _0xd547f0=_0x8fec82[_0x434ee4(0x1c3)](_0xa2e5c7=>String(_0xa2e5c7[_0x434ee4(0x141)])['toLowerCas'+'e']()[_0x434ee4(0x15a)](/\.js$/,''));return new Set(_0xd547f0);}catch(_0x1cab7f){return warn(_0x1cab7f,'['+name+(_0x434ee4(0xef)+_0x434ee4(0xbd)+'oved\x20plugi'+_0x434ee4(0xd6)+_0x434ee4(0x1dd)+_0x434ee4(0x1d3)+_0x434ee4(0x138)+'s.')),new Set();}}async function _schedulerTick(){const _0x5a845e=_0xa7ae12;if(schedulerRunning)return;schedulerRunning=!![];try{const _0x36d630=await getAutoUpdateSettings();if(!_0x36d630['enabled'])return;const _0x2bef8c=DateTime[_0x5a845e(0xb4)](),_0x1a87c=_0x36d630[_0x5a845e(0x135)+'t']?DateTime[_0x5a845e(0x14d)+'s'](_0x36d630['nextCheckA'+'t']):_0x2bef8c;_0x2bef8c>=_0x1a87c&&(info('['+name+(']\x20Running\x20'+'scheduled\x20'+_0x5a845e(0xfa)+'e\x20check...')),await performAutomaticUpdate(),await updateCheckTimestamps());}catch(_0x4b83f5){error(_0x4b83f5,'['+name+(']\x20Schedule'+'r\x20tick\x20fai'+_0x5a845e(0xe6)));}finally{schedulerRunning=![];}}function startAutoUpdateScheduler(){const _0x3f17b3=_0xa7ae12;stopAutoUpdateScheduler();const _0x169dca=0x3663+0xff49+-0x4*0x12d3-Date[_0x3f17b3(0xb4)]()%(0xfbbd+0x1*-0x14717+-0x2*-0x9add);setTimeout(()=>{const _0x2db729=_0x3f17b3;_schedulerTick()['catch'](()=>{}),schedulerInterval=setInterval(()=>_schedulerTick()[_0x2db729(0x112)](()=>{}),(-0x121e+0x79+-0x17*-0xc7)*(0xeb1*-0x1+0x1f1f*-0x1+0x31b8));},_0x169dca),info('['+name+(_0x3f17b3(0x101)+_0x3f17b3(0x190)+_0x3f17b3(0xf3)+'d.'));}function stopAutoUpdateScheduler(){schedulerInterval&&(clearInterval(schedulerInterval),schedulerInterval=null);}async function findStoredMatchFromFindings(_0x2d4112=[]){const _0x1c7096=_0xa7ae12;try{const _0x486ac4=await listSudo();if(!Array[_0x1c7096(0x14e)](_0x486ac4)||_0x486ac4[_0x1c7096(0x133)]===-0x2*0x294+0xf2*0x17+-0xb*0x182)return null;const _0x3d301b=new Set(_0x486ac4[_0x1c7096(0x1c3)](String));for(const _0x2b7325 of _0x2d4112||[]){if(!_0x2b7325||typeof _0x2b7325[_0x1c7096(0x1a5)]!==_0x1c7096(0x1da))continue;const _0x39b86a=normalizeToJid(_0x2b7325[_0x1c7096(0x1a5)]);if(_0x39b86a&&_0x3d301b[_0x1c7096(0xe1)](_0x39b86a))return _0x39b86a;if(_0x3d301b[_0x1c7096(0xe1)](_0x2b7325['jid']))return _0x2b7325[_0x1c7096(0x1a5)];}return null;}catch(_0x22808b){return null;}}async function handleManualUpdateCheck(_0x2e2ce1){const _0x4436ff=_0xa7ae12;await safeSend(_0x2e2ce1,_0x4436ff(0xfc)+'\x20for\x20updat'+'es...');const _0x533f2e=await fetchBuildInfo();if(!_0x533f2e){await safeSend(_0x2e2ce1,_0x4436ff(0x98)+_0x4436ff(0x1be)+'r\x20updates.'+'\x20Please\x20tr'+'y\x20again\x20la'+'ter.');return;}const _0x330da2=await getLocalSnapshot();!_0x330da2||_0x533f2e['lastModifi'+'ed']!==_0x330da2[_0x4436ff(0x111)+'ed']?await safeSend(_0x2e2ce1,'üîÑ\x20An\x20updat'+_0x4436ff(0xdc)+'able.\x20Run\x20'+_0x4436ff(0x1c2)+_0x4436ff(0x1d5)+'y.'):await safeSend(_0x2e2ce1,_0x4436ff(0x11e)+_0x4436ff(0x18c)+_0x4436ff(0xb5)+'te.');}async function handleManualUpdateNow(_0x4166a6){const _0x1c9a00=_0xa7ae12;await safeSend(_0x4166a6,_0x1c9a00(0x142)+_0x1c9a00(0x16d)+_0x1c9a00(0x156));const _0x1ecbc1=await fetchBuildInfo(),_0x52dde=await getLocalSnapshot();if(!_0x1ecbc1||!_0x52dde){await safeSend(_0x4166a6,_0x1c9a00(0x98)+_0x1c9a00(0xa3)+'te\x20informa'+'tion.\x20Abor'+_0x1c9a00(0x15e));return;}const _0x1852a7=await getRemovedPluginsSet(),_0x6ce07=new Map(_0x52dde['files'][_0x1c9a00(0x1c3)](_0x509c97=>[_0x509c97['name'],_0x509c97])),_0x978b55=_0x1ecbc1[_0x1c9a00(0x132)][_0x1c9a00(0xab)](_0x3c1064=>_0x6ce07[_0x1c9a00(0x12c)](_0x3c1064[_0x1c9a00(0x141)])?.[_0x1c9a00(0x1d6)]!==_0x3c1064['mtime']),_0x234a74=[],_0x173ee1=[];for(const _0x31dbaa of _0x978b55){if(!_0x31dbaa||!_0x31dbaa[_0x1c9a00(0x91)]){_0x173ee1[_0x1c9a00(0xe0)](_0x31dbaa);continue;}if([_0x1c9a00(0x120),'modules'][_0x1c9a00(0xb3)](_0x31dbaa[_0x1c9a00(0x91)])){const _0xa8722e=String(_0x31dbaa[_0x1c9a00(0x141)])[_0x1c9a00(0x8a)+'e']()[_0x1c9a00(0x15a)](/\.js$/,'');if(_0x1852a7[_0x1c9a00(0xe1)](_0xa8722e)){_0x234a74['push'](_0xa8722e);continue;}}_0x173ee1[_0x1c9a00(0xe0)](_0x31dbaa);}if(_0x173ee1['length']===-0x6*0x59e+-0x1*-0x9a3+0x1811){await saveLocalSnapshot(_0x1ecbc1);if(_0x234a74[_0x1c9a00(0x133)]>0x1c9*0xd+-0x1*0x1f75+0x840){const _0x387b6c=_0x234a74[_0x1c9a00(0x1c3)]((_0x383d17,_0x357994)=>_0x357994+(-0x5c*0x23+0x1*-0x20b7+0x4*0xb53)+'.\x20'+_0x383d17)[_0x1c9a00(0x182)]('\x0a');await safeSend(_0x4166a6,_0x1c9a00(0xc4)+'cable\x20upda'+_0x1c9a00(0x198)+_0x1c9a00(0x96)+_0x1c9a00(0x134)+_0x1c9a00(0xf1)+_0x387b6c);}else await safeSend(_0x4166a6,_0x1c9a00(0x197)+'ng\x20is\x20alre'+_0x1c9a00(0x191)+_0x1c9a00(0xe8));return;}const _0x475f42=await applyUpdates(_0x173ee1);if(!_0x475f42){await safeSend(_0x4166a6,'üîÑ\x20Update\x20f'+_0x1c9a00(0x8b)+_0x1c9a00(0x158)+_0x1c9a00(0x178));return;}const {updatedPluginFiles:_0x574eda,updatedCoreFiles:_0x16ffce,needsReboot:_0x11d5ed}=_0x475f42;if(_0x574eda[_0x1c9a00(0x133)]===0x3f1*-0x7+-0x19*-0x6b+0x4*0x449&&_0x16ffce[_0x1c9a00(0x133)]===-0x1e69+0x16d7*0x1+0x66*0x13){await saveLocalSnapshot(_0x1ecbc1);if(_0x234a74[_0x1c9a00(0x133)]>-0x11f*-0x3+-0x1*-0xb57+-0x75a*0x2){const _0xdd1e63=_0x234a74['map']((_0x5d593b,_0x576a73)=>_0x576a73+(-0x5a0+-0x7*0x545+0x2a84*0x1)+'.\x20'+_0x5d593b)['join']('\x0a');await safeSend(_0x4166a6,_0x1c9a00(0xc4)+_0x1c9a00(0x1b9)+_0x1c9a00(0x1cb)+_0x1c9a00(0x1db)+'kipped\x20upd'+'ating:\x0a'+_0xdd1e63);}else await safeSend(_0x4166a6,_0x1c9a00(0x197)+'ng\x20is\x20alre'+_0x1c9a00(0x191)+_0x1c9a00(0xe8));return;}const _0x1e39b8=[];if(_0x574eda[_0x1c9a00(0x133)]>-0x1*-0x1bef+0x1b7a*-0x1+-0x75){if(_0x574eda['length']<=-0x15df+-0x1727+0x2d10){const _0x455142=_0x574eda[_0x1c9a00(0x1c3)]((_0x5dc332,_0x473988)=>_0x473988+(0x2122*0x1+-0x2*-0x98e+-0x343d)+'.\x20'+_0x5dc332)[_0x1c9a00(0x182)]('\x0a');_0x1e39b8[_0x1c9a00(0xe0)](_0x1c9a00(0xb1)+_0x1c9a00(0x16a)+_0x455142);}else _0x1e39b8[_0x1c9a00(0xe0)]('üîÑ\x20Updated\x20'+_0x1c9a00(0x11f)+_0x1c9a00(0x126)+'0\x20plugin\x20f'+_0x1c9a00(0x1ca)+_0x1c9a00(0x15d));}_0x16ffce[_0x1c9a00(0x133)]>0x15af+0x4*0x73c+-0x329f&&_0x1e39b8[_0x1c9a00(0xe0)](_0x1c9a00(0xb1)+'core\x20compo'+'nents.');if(_0x1e39b8[_0x1c9a00(0x133)]===0xa*-0x10a+0x2390+-0x192c)_0x1e39b8[_0x1c9a00(0xe0)](_0x1c9a00(0x11b)+'ompleted.');(_0x16ffce['length']>0xa36*0x1+-0x1ebe+0x1488||_0x11d5ed)&&_0x1e39b8[_0x1c9a00(0xe0)](_0x1c9a00(0x193)+_0x1c9a00(0x14a)+_0x1c9a00(0xe7)+_0x1c9a00(0x1b3)+_0x1c9a00(0x17d)+_0x1c9a00(0x175)+_0x1c9a00(0xb9));const _0x1e07bb=_0x1e39b8[_0x1c9a00(0x182)]('\x0a\x0a');await safeSend(_0x4166a6,_0x1e07bb),await saveLocalSnapshot(_0x1ecbc1);}async function performAutomaticUpdate(){const _0x2daebc=_0xa7ae12,_0x19bb25=await fetchBuildInfo(),_0x5a1c87=await getLocalSnapshot();if(!_0x19bb25||!_0x5a1c87||_0x19bb25['lastModifi'+'ed']===_0x5a1c87[_0x2daebc(0x111)+'ed'])return;const _0x2abec5=await getRemovedPluginsSet(),_0x1e2db5=new Map(_0x5a1c87[_0x2daebc(0x132)][_0x2daebc(0x1c3)](_0x1424c5=>[_0x1424c5['name'],_0x1424c5])),_0x57728c=_0x19bb25[_0x2daebc(0x132)][_0x2daebc(0xab)](_0x4917c9=>_0x1e2db5[_0x2daebc(0x12c)](_0x4917c9[_0x2daebc(0x141)])?.[_0x2daebc(0x1d6)]!==_0x4917c9[_0x2daebc(0x1d6)]);if(_0x57728c['length']===-0x49a+0xd52+-0x6*0x174){await saveLocalSnapshot(_0x19bb25);return;}const _0xd32dee=[],_0x212fad=[];for(const _0x4259ac of _0x57728c){if(!_0x4259ac||!_0x4259ac['origin']){_0x212fad[_0x2daebc(0xe0)](_0x4259ac);continue;}if([_0x2daebc(0x120),_0x2daebc(0x187)]['includes'](_0x4259ac[_0x2daebc(0x91)])){const _0xaa0f57=String(_0x4259ac[_0x2daebc(0x141)]||'')[_0x2daebc(0x8a)+'e']()[_0x2daebc(0x15a)](/\.js$/,'');if(_0x2abec5[_0x2daebc(0xe1)](_0xaa0f57)){_0xd32dee[_0x2daebc(0xe0)](_0xaa0f57);continue;}}_0x212fad[_0x2daebc(0xe0)](_0x4259ac);}if(_0x212fad[_0x2daebc(0x133)]===0x3*0x346+0xb3b+0x150d*-0x1){info('['+name+(_0x2daebc(0x101)+_0x2daebc(0xc9)+'ng\x20to\x20appl'+'y\x20after\x20fi'+'ltering\x20')+_0xd32dee['length']+(_0x2daebc(0xd2)+_0x2daebc(0xf8))),await saveLocalSnapshot(_0x19bb25);return;}info('['+name+(_0x2daebc(0x101)+_0x2daebc(0x194))+_0x212fad[_0x2daebc(0x133)]+(_0x2daebc(0x185)+'\x20(skipped\x20')+_0xd32dee[_0x2daebc(0x133)]+(_0x2daebc(0x1e0)+_0x2daebc(0x12e)+'..'));const _0x16d4e6=await applyUpdates(_0x212fad);if(!_0x16d4e6){warn('['+name+(_0x2daebc(0x101)+_0x2daebc(0xf4)+_0x2daebc(0xc3)+_0x2daebc(0x163)+_0x2daebc(0xd1))),await saveLocalSnapshot(_0x19bb25);return;}const {updatedPluginFiles:_0x1be91a,updatedCoreFiles:_0x26f6e0,needsReboot:_0x5e50fe}=_0x16d4e6;if(_0x1be91a[_0x2daebc(0x133)]===0xd14+-0x1e89+0x1175&&_0x26f6e0['length']===-0x17f*-0x14+-0xa2*0x13+-0x11e6){info('['+name+(']\x20Auto-upd'+'ate:\x20no\x20fi'+_0x2daebc(0x18a)+_0x2daebc(0x1cf)+_0x2daebc(0xee)+_0x2daebc(0x1c1)+_0x2daebc(0x151)+'l).\x20Skippe'+'d\x20')+_0xd32dee[_0x2daebc(0x133)]+(_0x2daebc(0xd2)+_0x2daebc(0xf8))),await saveLocalSnapshot(_0x19bb25);return;}if(_0x26f6e0[_0x2daebc(0x133)]>0x1f51+0x14e5+-0x3436){info('['+name+(_0x2daebc(0x101)+_0x2daebc(0x196)+_0x2daebc(0xe2)+_0x2daebc(0x177)+_0x2daebc(0x1a0)+'r.'));const _0x11135a=getBotJid();if(_0x11135a){const _0x364f5a=[];_0x1be91a['length']>-0x1d9f+0x38f+-0x1a10*-0x1&&(_0x1be91a[_0x2daebc(0x133)]<=-0xaa*-0x26+-0x2600+0x667*0x2?_0x364f5a[_0x2daebc(0xe0)]('Updated\x20pl'+_0x2daebc(0x1b6)+_0x1be91a[_0x2daebc(0x1c3)]((_0xd94815,_0x2c9c55)=>_0x2c9c55+(0x5*0x74+-0x1759+0x1516)+'.\x20'+_0xd94815)[_0x2daebc(0x182)]('\x0a')):_0x364f5a[_0x2daebc(0xe0)](_0x2daebc(0x13c)+_0x2daebc(0x8c)+_0x2daebc(0x161)+'plugin\x20fil'+_0x2daebc(0x192)+_0x2daebc(0xed))),_0x364f5a[_0x2daebc(0xe0)]('Updated\x20co'+_0x2daebc(0x16b)+'nts.'),await safeSend(_0x11135a,_0x2daebc(0xa4)+_0x2daebc(0xa1)+'otice:\x0a\x0a'+_0x364f5a['join']('\x0a\x0a')+(_0x2daebc(0x18b)+'un\x20the\x20`re'+_0x2daebc(0x90)+_0x2daebc(0x171)+'ly\x20core\x20ch'+_0x2daebc(0x15f)));}}else info('['+name+(_0x2daebc(0x101)+_0x2daebc(0x196)+'d\x20plugin\x20u'+_0x2daebc(0x140))+_0x1be91a['length']+_0x2daebc(0x119));await saveLocalSnapshot(_0x19bb25),info('['+name+(_0x2daebc(0x101)+_0x2daebc(0x196)+_0x2daebc(0xbc)+_0x2daebc(0xbf)));}export async function initialize(_0x5ef566){const _0xd1f850=_0xa7ae12;botRef=_0x5ef566,setupApi(_0x5ef566),await ensureSchema(),await createInitialSnapshotIfNeeded(),connectionUpdateHandler=_0x20b1e3=>{const _0x5c98c1=_0x3f0f;if(_0x20b1e3[_0x5c98c1(0x1d9)]===_0x5c98c1(0x14c))startAutoUpdateScheduler();else{if(_0x20b1e3['connection']===_0x5c98c1(0x11d))stopAutoUpdateScheduler();}},_0x5ef566['on'](_0xd1f850(0x1d9)+'.update',connectionUpdateHandler),(botRef['ws']?.[_0xd1f850(0x124)]===-0x271*-0xf+0x9*-0x269+-0xeed||botRef[_0xd1f850(0x1a3)]?.['ws']?.[_0xd1f850(0x124)]===0x1*-0x1b8f+0x2f*-0x73+0x30ad)&&startAutoUpdateScheduler(),info('['+name+(']\x20initiali'+'zed.'));}export async function onMessage(_0x31688b,_0x33bd0d){const _0x5559f4=_0xa7ae12;try{if(!_0x31688b||!_0x31688b[_0x5559f4(0xdf)]||!_0x33bd0d)return;const _0x2f1849=_0x31688b[_0x5559f4(0xdf)]?.[_0x5559f4(0x174)];if(!_0x2f1849||_0x2f1849[_0x5559f4(0x1a1)](_0x5559f4(0x160)))return;const _0x4cbb17=(_0x31688b['text']||'')['trim']()['toLowerCas'+'e'](),_0x2311d8=_0x4cbb17[_0x5559f4(0xcf)](/\s+/),_0x31b6d0=_0x2311d8[-0xd*-0x2cb+-0x1*-0x682+-0x1*0x2ad1];if(!commands['includes'](_0x31b6d0))return;const _0x222fd2=!!_0x31688b[_0x5559f4(0xdf)]['fromMe'],_0x4cbeb4=await isSudo(botRef,_0x31688b);if(!_0x222fd2&&!_0x4cbeb4)return;let _0x438d80=_0x222fd2?getBotJid():await findStoredMatchFromFindings(userJidFromCtx(_0x31688b)['findings']);if(!_0x438d80)return;if(_0x31b6d0===_0x5559f4(0x1cd)){const _0x24e77a=_0x2311d8[-0x1*-0x1231+-0x1e88+-0x278*-0x5];if(_0x24e77a===_0x5559f4(0xb4))await handleManualUpdateNow(_0x438d80);else await handleManualUpdateCheck(_0x438d80);}else{if(_0x31b6d0===_0x5559f4(0xe4)){const _0x5e4853=_0x2311d8[0x1*0x16d9+0x1acf*-0x1+0x1d*0x23];if(_0x5e4853==='on')await setAutoUpdateStatus(!![]),await safeSend(_0x438d80,'üîÑ\x20Automati'+_0x5559f4(0x106)+_0x5559f4(0x1a8)+'ENABLED.\x20T'+_0x5559f4(0x16f)+_0x5559f4(0xaf)+_0x5559f4(0x14b)+'every\x2024\x20h'+_0x5559f4(0x12b));else{if(_0x5e4853===_0x5559f4(0xf6))await setAutoUpdateStatus(![]),await safeSend(_0x438d80,_0x5559f4(0x19c)+_0x5559f4(0x106)+'have\x20been\x20'+_0x5559f4(0x118));else{const _0x209fd5=await getAutoUpdateSettings(),_0x299269=_0x209fd5[_0x5559f4(0xaa)]?_0x5559f4(0x145):_0x5559f4(0xf7),_0x12978e=_0x209fd5['nextCheckA'+'t']?DateTime[_0x5559f4(0x14d)+'s'](_0x209fd5['nextCheckA'+'t'])[_0x5559f4(0x8e)]():'Not\x20schedu'+_0x5559f4(0xe6);await safeSend(_0x438d80,_0x5559f4(0xf0)+_0x5559f4(0x115)+'\x0a\x0aStatus:\x20'+'*'+_0x299269+(_0x5559f4(0xa9)+_0x5559f4(0x10e))+_0x12978e+(_0x5559f4(0x1bb)+'utoupdate\x20'+_0x5559f4(0xde)));}}}}}catch(_0x453394){error(_0x453394,'['+name+(_0x5559f4(0x179)+_0x5559f4(0x1bc)));}}export async function cleanup(){const _0x2a753f=_0xa7ae12;stopAutoUpdateScheduler();try{botRef&&typeof botRef[_0x2a753f(0xf6)]===_0x2a753f(0xbb)&&connectionUpdateHandler&&botRef[_0x2a753f(0xf6)](_0x2a753f(0x1d9)+_0x2a753f(0x17c),connectionUpdateHandler);}catch(_0x10abd9){warn('['+name+(_0x2a753f(0x147)+'unbind\x20err'+_0x2a753f(0xba))+_0x10abd9[_0x2a753f(0xea)]);}botRef=null,sendApi=null,connectionUpdateHandler=null,info('['+name+(_0x2a753f(0x19b)+_0x2a753f(0x1d8)));}export default{'name':name,'version':version,'priority':priority,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};