const _0x1247e2=_0x2905;(function(_0x34b076,_0x562649){const _0x9de6b7=_0x2905,_0x76f4f3=_0x34b076();while(!![]){try{const _0x22fde0=-parseInt(_0x9de6b7(0xe7))/(0x27*-0x5b+-0xfb*-0x1d+0x71*-0x21)*(parseInt(_0x9de6b7(0x8e))/(-0x425*0x2+0x1*-0xf2b+0x1777))+parseInt(_0x9de6b7(0x10c))/(-0x1*0x116d+0x1d21*-0x1+-0x7*-0x6a7)+-parseInt(_0x9de6b7(0x114))/(0x1dcd+0x606*0x1+0x23cf*-0x1)+parseInt(_0x9de6b7(0xeb))/(0x520*-0x1+-0x1*0x2582+-0x3d*-0xb3)*(parseInt(_0x9de6b7(0xef))/(-0x12fb*-0x2+0xf50+-0x11c*0x30))+parseInt(_0x9de6b7(0xa3))/(0x5*-0x6dd+-0x1655+-0xb*-0x527)+-parseInt(_0x9de6b7(0x112))/(-0x23ae+-0xc67+0x301d)+-parseInt(_0x9de6b7(0xcd))/(0x1554+-0x1*-0x746+-0x1c91)*(-parseInt(_0x9de6b7(0x73))/(0xdc3*0x1+0x4b*0x36+0x3*-0x9d9));if(_0x22fde0===_0x562649)break;else _0x76f4f3['push'](_0x76f4f3['shift']());}catch(_0x5e7796){_0x76f4f3['push'](_0x76f4f3['shift']());}}}(_0x2ccb,0x39352+-0x33d*-0x4d1+-0x1b3*0x614));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getBotJid}from'../utils/bot-state.js';import{userjid}from'../utils/sudo.js';import{getSenderForMsg}from'./sudonumber.js';export const name='edit-logge'+'r';export const version='1.7.0';export const priority=-0xe6b*0x1+0xcfd+0x68*0x4;let botInstance=null,cleanupInterval=null;const FALLBACKS={'EDIT_WINDOW_MINUTES':0xf,'CLEANUP_INTERVAL_MS':(0x359+0xc4a+-0xf67)*(0xa7*0xb+-0x7*0x2bf+0xff4),'MAX_SEND_RETRIES':0x3,'INITIAL_BACKOFF_MS':0x1f4};let EDIT_WINDOW_MINUTES=FALLBACKS['EDIT_WINDO'+_0x1247e2(0x77)],CLEANUP_INTERVAL_MS=FALLBACKS[_0x1247e2(0xe3)+_0x1247e2(0x10a)],MAX_SEND_RETRIES=FALLBACKS[_0x1247e2(0x9a)+_0x1247e2(0xfe)],INITIAL_BACKOFF_MS=FALLBACKS[_0x1247e2(0x12a)+_0x1247e2(0x103)];async function ensureTable(){const _0x25da12=_0x1247e2;await db[_0x25da12(0x78)](_0x25da12(0xc0)+_0x25da12(0xbe)+_0x25da12(0xb7)+_0x25da12(0x10e)+_0x25da12(0xc1)+_0x25da12(0xf6)+'Y\x20AUTOINCR'+_0x25da12(0xaf)+_0x25da12(0xa2)+'XT,\x0a\x20\x20\x20\x20ch'+_0x25da12(0x90)+_0x25da12(0xad)+'t\x20TEXT,\x0a\x20\x20'+'\x20\x20raw_json'+_0x25da12(0xe1)+_0x25da12(0x9e)+_0x25da12(0x9f)+'NTEGER\x20DEF'+_0x25da12(0x111)+_0x25da12(0x7d)+_0x25da12(0xda)+'\x20);');}function nowSeconds(){const _0x468dff=_0x1247e2;return Math[_0x468dff(0x119)](Date[_0x468dff(0x121)]()/(0xa5d+0xef2+-0x1567));}function _0x2905(_0x51b038,_0x3b5d67){const _0x5d4ee5=_0x2ccb();return _0x2905=function(_0x2c6bb,_0x3373bc){_0x2c6bb=_0x2c6bb-(-0x76f+0x35f+0x47e);let _0x1e16bd=_0x5d4ee5[_0x2c6bb];return _0x1e16bd;},_0x2905(_0x51b038,_0x3b5d67);}async function insertEditVersion(_0x1643c4,_0x14b094,_0x2578d2,_0x2fd73b,_0x14ba85=-0x1052*-0x1+0x343+-0x1c*0xb3){const _0x549668=_0x1247e2,_0x24ceda=nowSeconds();await db[_0x549668(0xa9)](_0x549668(0xbf)+'O\x20edits\x20(m'+_0x549668(0xb0)+'t_jid,\x20tex'+'t,\x20raw_jso'+_0x549668(0x74)+_0x549668(0x122)+_0x549668(0xb1)+_0x549668(0xe5)+'UES\x20(?,\x20?,'+_0x549668(0xd8)+'?)',[_0x1643c4||null,_0x14b094||null,_0x2578d2||'',_0x2fd73b||null,_0x14ba85?-0x1*0x1dea+-0xbf5+0x1*0x29e0:0x834+-0x277*-0x9+-0x1*0x1e63,_0x24ceda]);}async function fetchLatestEditForMsg(_0x1735e3){const _0x577b6c=_0x1247e2;if(!_0x1735e3)return null;const _0x46812c=await db[_0x577b6c(0x8a)](_0x577b6c(0x129)+_0x577b6c(0xd9)+_0x577b6c(0xd1)+'ext,\x20raw_j'+_0x577b6c(0x9c)+'ed_from_ed'+'it,\x20saved_'+_0x577b6c(0x11d)+_0x577b6c(0x7a)+'msg_id\x20=\x20?'+_0x577b6c(0xa5)+'saved_at\x20D'+_0x577b6c(0xf9)+'1',[_0x1735e3]);return _0x46812c||null;}async function countEditsForMsg(_0x5a4e33){const _0x578518=_0x1247e2;if(!_0x5a4e33)return 0x9*0x174+-0x103*-0x18+-0xc*0x31d;const _0x28b246=await db[_0x578518(0x8a)](_0x578518(0x97)+_0x578518(0xb2)+_0x578518(0xca)+_0x578518(0x72)+_0x578518(0x12b)+_0x578518(0xe2)+'_from_edit'+_0x578518(0xcc),[_0x5a4e33]);return _0x28b246&&typeof _0x28b246['c']===_0x578518(0xc4)?_0x28b246['c']:-0xe1+0xc7d+0x4*-0x2e7;}async function cleanupOldEdits(){const _0x5d7240=_0x1247e2,_0x2d2521=nowSeconds()-Number(EDIT_WINDOW_MINUTES||FALLBACKS['EDIT_WINDO'+_0x5d7240(0x77)])*(-0x143b+0x19aa+-0x79*0xb),_0x41c56a=await db[_0x5d7240(0x86)](_0x5d7240(0x75)+'FROM\x20edits'+'\x20WHERE\x20sav'+_0x5d7240(0x76)+_0x5d7240(0x91)+'D\x20saved_at'+_0x5d7240(0x11c),[_0x2d2521]);if(!_0x41c56a||_0x41c56a['length']===-0x2036+-0x19+0x204f)return;const _0x26c485=_0x41c56a[_0x5d7240(0x84)](_0x4baeac=>_0x4baeac['id']),_0x42a87d=0x1d1e*-0x1+-0x1129+0x2f0f;for(let _0x5862a4=0x257*0xb+0x139*-0x1f+0x2*0x615;_0x5862a4<_0x26c485[_0x5d7240(0xae)];_0x5862a4+=_0x42a87d){const _0x5188bf=_0x26c485[_0x5d7240(0x108)](_0x5862a4,_0x5862a4+_0x42a87d),_0x1d7f06=_0x5188bf[_0x5d7240(0x84)](()=>'?')[_0x5d7240(0x11b)](',');await db['run'](_0x5d7240(0x99)+_0x5d7240(0x10b)+'ERE\x20id\x20IN\x20'+'('+_0x1d7f06+')',_0x5188bf);}info(_0x5d7240(0x7c)+_0x5d7240(0xf0)+'\x20'+_0x41c56a[_0x5d7240(0xae)]+(_0x5d7240(0x128)+_0x5d7240(0x10d)));}async function cleanupOldEditsSafe(){const _0x1f9dd4=_0x1247e2;try{await cleanupOldEdits();}catch(_0x566149){warn(_0x1f9dd4(0x7c)+_0x1f9dd4(0x8b)+_0x1f9dd4(0x11a)+_0x1f9dd4(0x8c)+(_0x566149?.[_0x1f9dd4(0x8f)]||_0x566149));}}function extractText(_0x445eb0,_0xa9c643=!![]){const _0xecc361=_0x1247e2;if(!_0x445eb0)return'';if(_0xa9c643){if(typeof _0x445eb0[_0xecc361(0x83)]==='string')return _0x445eb0[_0xecc361(0x83)];if(typeof _0x445eb0[_0xecc361(0x124)]===_0xecc361(0xc3))return _0x445eb0[_0xecc361(0x124)];}else{if(typeof _0x445eb0[_0xecc361(0x82)]===_0xecc361(0xc3))return _0x445eb0['oldText'];if(typeof _0x445eb0[_0xecc361(0x104)]==='string')return _0x445eb0[_0xecc361(0x104)];}const _0xf75e4=_0xa9c643?_0x445eb0[_0xecc361(0x92)]||_0x445eb0[_0xecc361(0x8f)]||_0x445eb0['new_messag'+'e']:_0x445eb0[_0xecc361(0xb4)]||_0x445eb0[_0xecc361(0x8f)]||_0x445eb0[_0xecc361(0x115)+'e'];if(_0xf75e4&&typeof _0xf75e4===_0xecc361(0x110)){if(_0xf75e4[_0xecc361(0x127)+'on'])return _0xf75e4[_0xecc361(0x127)+'on'];if(_0xf75e4[_0xecc361(0x9d)+_0xecc361(0x120)]?.[_0xecc361(0xff)])return _0xf75e4['extendedTe'+_0xecc361(0x120)]['text'];if(_0xf75e4[_0xecc361(0xe8)+'ge']?.['caption'])return _0xf75e4[_0xecc361(0xe8)+'ge']['caption'];if(_0xf75e4[_0xecc361(0xbd)+'ge']?.[_0xecc361(0xab)])return _0xf75e4[_0xecc361(0xbd)+'ge'][_0xecc361(0xab)];if(_0xf75e4[_0xecc361(0xa0)+'ponseMessa'+'ge']?.[_0xecc361(0xba)+_0xecc361(0xdb)])return _0xf75e4[_0xecc361(0xa0)+_0xecc361(0xdc)+'ge']['selectedBu'+_0xecc361(0xdb)];if(_0xf75e4[_0xecc361(0xf1)+_0xecc361(0xdf)]?.[_0xecc361(0x100)+'ctReply']?.['selectedRo'+'wId'])return _0xf75e4[_0xecc361(0xf1)+_0xecc361(0xdf)][_0xecc361(0x100)+'ctReply'][_0xecc361(0x105)+_0xecc361(0x117)];}if(typeof _0x445eb0['text']===_0xecc361(0xc3))return _0x445eb0['text'];return'';}function numberFromRawJid(_0x497d02){const _0x274f8f=_0x1247e2;if(!_0x497d02)return'';try{const _0x49b3d9=String(_0x497d02),_0xea2de8=_0x49b3d9[_0x274f8f(0xaa)]('@'),_0x463eec=_0xea2de8===-(-0x24f1*0x1+-0x2017+0x4509)?_0x49b3d9:_0x49b3d9[_0x274f8f(0x108)](0x13*-0xb1+0x12c*0x1d+-0x14d9,_0xea2de8),_0x378a97=_0x463eec[_0x274f8f(0xaa)](':'),_0x1a3db6=_0x378a97===-(-0x2017+0x1d*0xb7+0xb5d)?_0x463eec:_0x463eec['slice'](0x1852*0x1+-0x3b9+0x1499*-0x1,_0x378a97);return _0x1a3db6[_0x274f8f(0x10f)](/^\+/,'');}catch{return'';}}function isGroupJid(_0xce0f27){const _0x30d4c8=_0x1247e2;return typeof _0xce0f27===_0x30d4c8(0xc3)&&_0xce0f27[_0x30d4c8(0xe6)](_0x30d4c8(0xcb));}async function sendWithRetry(_0x48a3d6,_0x1fa95c){const _0x39658f=_0x1247e2,_0xb95e2f=Number(MAX_SEND_RETRIES||FALLBACKS[_0x39658f(0x9a)+'ETRIES']);let _0x4262cf=0x2343+-0x9bb*-0x4+0x4a2f*-0x1,_0x28fa80=Number(INITIAL_BACKOFF_MS||FALLBACKS['INITIAL_BA'+'CKOFF_MS']);const _0x2d74e1=[];if(_0x1fa95c)_0x2d74e1[_0x39658f(0x7b)](_0x1fa95c);try{const _0x18a803=await db[_0x39658f(0x8a)](_0x39658f(0x95)+_0x39658f(0xd3)+_0x39658f(0x93)+_0x39658f(0xe9)+_0x39658f(0x109)+_0x39658f(0xa7));if(_0x18a803&&_0x18a803[_0x39658f(0xde)])_0x2d74e1[_0x39658f(0x7b)](String(_0x18a803[_0x39658f(0xde)]));}catch{}const _0x1241cf=getBotJid();if(_0x1241cf)_0x2d74e1[_0x39658f(0x7b)](_0x1241cf);const _0xb48c69=Array[_0x39658f(0xa1)](new Set(_0x2d74e1[_0x39658f(0x6f)](Boolean)));if(_0xb48c69[_0x39658f(0xae)]===-0x4*0x8db+-0x55*-0x5+0x21c3)return warn(_0x39658f(0x7c)+'r]\x20no\x20send'+_0x39658f(0xe0)+_0x39658f(0xa6)+_0x39658f(0xb8)+'nd.'),![];const _0x55c231=_0xb48c69[-0x14c9+0xa75+0xa54];while(_0x4262cf<_0xb95e2f){_0x4262cf++;try{if(!botInstance||typeof botInstance[_0x39658f(0xee)+'e']!==_0x39658f(0xcf))throw new Error(_0x39658f(0xf4)+'e.sendMess'+_0x39658f(0x98)+'g');return await botInstance['sendMessag'+'e'](_0x55c231,_0x48a3d6),!![];}catch(_0x13e8d3){warn(_0x39658f(0x7c)+_0x39658f(0xfa)+_0x39658f(0xe4)+_0x4262cf+'\x20failed:\x20'+(_0x13e8d3?.[_0x39658f(0x8f)]||_0x13e8d3));const _0x5d6d23=String(_0x13e8d3?.[_0x39658f(0x8f)]||'')['toLowerCas'+'e']()[_0x39658f(0x87)]('rate')||_0x13e8d3?.[_0x39658f(0xbc)]===-0x4*0x3e+0x14f3+0x42*-0x47;if(_0x4262cf>=_0xb95e2f||!_0x5d6d23)return![];await new Promise(_0x1fd208=>setTimeout(_0x1fd208,_0x28fa80)),_0x28fa80*=-0x4*0x97e+-0x22be*0x1+0x34*0x166;}}return![];}async function buildAndSendLog({chatJid:_0x357281,msgId:_0x1dc7c3,originalText:_0x4cf1ff,newText:_0x28a3b0,senderNumber:_0x52e99c,editCount:_0x59f110}){const _0x567957=_0x1247e2;let _0x2bb039=null;if(isGroupJid(_0x357281)&&botInstance?.[_0x567957(0x8d)]?.[_0x567957(0x80)+_0x567957(0xc6)])try{const _0x1d70d8=await botInstance[_0x567957(0x8d)]['groupMetad'+_0x567957(0xc6)](_0x357281);if(_0x1d70d8?.[_0x567957(0xdd)])_0x2bb039=_0x1d70d8[_0x567957(0xdd)];}catch{}const _0x45b38c=_0x567957(0x89)+'\x20Edited*\x0a\x0a',_0x267926='👤\x20*User:*\x20'+'@'+(_0x52e99c||''),_0x4b2f1c=_0x567957(0xea)+(_0x2bb039?_0x2bb039+'\x20('+_0x357281+')':_0x357281||_0x567957(0xf8)),_0x54f379=_0x567957(0x107)+_0x567957(0xf3)+(_0x1dc7c3||'(unknown)'),_0x4b9ed9=typeof _0x59f110===_0x567957(0xc4)&&_0x59f110>0x848+-0x6ef+0x45*-0x5?_0x567957(0x123)+_0x59f110+'\x20'+(_0x59f110===-0x2139+0x9cd+0x176d?_0x567957(0x11e):'times')+')':'',_0x468efe=_0x567957(0x70)+_0x567957(0xb3)+_0x4b9ed9+_0x567957(0xb5)+(_0x4cf1ff||_0x567957(0x94)+_0x567957(0xd7)+_0x567957(0xf7)+']')+'\x0a```',_0x253823=_0x567957(0x116)+'To:*\x0a```\x0a'+(_0x28a3b0||'')+_0x567957(0xc2),_0x3e061f=[_0x45b38c,_0x267926,_0x4b2f1c,_0x54f379,'',_0x468efe,'',_0x253823]['join']('\x0a');return await sendWithRetry({'text':_0x3e061f},null);}async function handleMessageEdit(_0x44b699){const _0x2abc0c=_0x1247e2;try{if(!_0x44b699)return;let _0x56f8ed=[],_0x374300=null;try{const _0x566941=userjid(_0x44b699);_0x56f8ed=_0x566941?.[_0x2abc0c(0x7f)]||[],_0x374300=_0x566941?.['id']||null;}catch(_0x3c1c5e){}let _0x56b7db=_0x374300||_0x44b699[_0x2abc0c(0x6e)+_0x2abc0c(0x11f)]||_0x44b699[_0x2abc0c(0x113)]||_0x44b699[_0x2abc0c(0x85)]||_0x44b699['id']||_0x44b699[_0x2abc0c(0x8f)]?.['key']?.['id']||null,_0x1aa773=_0x44b699[_0x2abc0c(0x102)]||_0x44b699[_0x2abc0c(0x79)]||_0x44b699['message']?.[_0x2abc0c(0xa8)]?.[_0x2abc0c(0xfd)]||null,_0x290ab0='';try{if(_0x56b7db){const _0x456f81=await getSenderForMsg(_0x56b7db);_0x456f81&&(_0x290ab0=_0x456f81[_0x2abc0c(0x88)+_0x2abc0c(0xc7)]&&String(_0x456f81[_0x2abc0c(0x88)+_0x2abc0c(0xc7)])[_0x2abc0c(0xed)]()?String(_0x456f81[_0x2abc0c(0x88)+_0x2abc0c(0xc7)])[_0x2abc0c(0xed)]():numberFromRawJid(_0x456f81['sender_jid']));}}catch(_0x47b7cc){}if(!_0x290ab0&&Array[_0x2abc0c(0xd6)](_0x56f8ed)&&_0x56f8ed[_0x2abc0c(0xae)]){const _0x2f07d5=[_0x2abc0c(0x106)+'lt',_0x2abc0c(0xc9),_0x2abc0c(0xb9)+_0x2abc0c(0x118),_0x2abc0c(0xb9)+_0x2abc0c(0xce)];let _0x5139d7=null;for(const _0x434c1d of _0x2f07d5){_0x5139d7=_0x56f8ed[_0x2abc0c(0x126)](_0x5bcf61=>_0x5bcf61[_0x2abc0c(0xfb)]===_0x434c1d&&typeof _0x5bcf61[_0x2abc0c(0x101)]==='string');if(_0x5139d7)break;}if(!_0x5139d7)_0x5139d7=_0x56f8ed[0x10ea+-0xa4*0x3a+-0xa1f*-0x2];_0x5139d7&&_0x5139d7[_0x2abc0c(0x101)]&&(_0x290ab0=numberFromRawJid(_0x5139d7[_0x2abc0c(0x101)]));}const _0x1b3ce1=extractText(_0x44b699,!![])||'',_0x3d1cff=_0x56b7db?await fetchLatestEditForMsg(_0x56b7db):null,_0x151b7b=_0x3d1cff&&typeof _0x3d1cff[_0x2abc0c(0xff)]===_0x2abc0c(0xc3)&&_0x3d1cff[_0x2abc0c(0xff)][_0x2abc0c(0xae)]?_0x3d1cff[_0x2abc0c(0xff)]:extractText(_0x44b699,![])||_0x2abc0c(0x94)+'message\x20no'+_0x2abc0c(0xf7)+']',_0x346ec0=_0x56b7db?await countEditsForMsg(_0x56b7db):-0x652*-0x2+0x11be+0xf31*-0x2,_0x554e1f=await buildAndSendLog({'chatJid':_0x1aa773,'msgId':_0x56b7db,'originalText':_0x151b7b,'newText':_0x1b3ce1,'senderNumber':_0x290ab0,'editCount':_0x346ec0}),_0x69c73=((()=>{const _0x111eb1=_0x2abc0c;try{return JSON[_0x111eb1(0xa4)](_0x44b699)['slice'](0x26*0x57+-0x1a*-0x95+0x5*-0x59c,0x2a716+-0x2e12e+0x1c0b8);}catch{return null;}})());return await insertEditVersion(_0x56b7db,_0x1aa773,_0x1b3ce1,_0x69c73,-0x4*-0xf8+-0x1*0xaf1+0x712),_0x554e1f;}catch(_0x56f638){warn(_0x2abc0c(0x7c)+_0x2abc0c(0xd4)+_0x2abc0c(0xc8)+_0x2abc0c(0x71)+(_0x56f638?.[_0x2abc0c(0x8f)]||_0x56f638));}}function _0x2ccb(){const _0x44fea9=['botInstanc','ze\x20require','PRIMARY\x20KE','t\x20in\x20cache','(unknown)','ESC\x20LIMIT\x20','r]\x20send\x20at','field','\x20error:\x20','remoteJid','ETRIES','text','singleSele','jid','chatId','CKOFF_MS','old_text','selectedRo','remoteJidA','🆔\x20*Message','slice','=\x27target_j','TERVAL_MS','M\x20edits\x20WH','188454kYbMFd','rows','ts\x20(\x0a\x20\x20\x20\x20i','replace','object','AULT\x200,\x0a\x20\x20','946120ytonRJ','msgId','838416xMRoJc','old_messag','✏️\x20*Edited\x20','wId','tAlt','floor','OldEditsSa','join','\x20<\x20?','at\x20FROM\x20ed','time','ssageId','xtMessage','now','_from_edit','\x20(edited\x20','new_text','r\x20initiali','find','conversati','\x20old\x20edit\x20','SELECT\x20id,','INITIAL_BA','g_id\x20=\x20?\x20A','originalMe','filter','🔁\x20*Origina','r\x20error:\x20','s\x20WHERE\x20ms','854860ttyEEH','n,\x20created','SELECT\x20id\x20','ed_at\x20IS\x20N','W_MINUTES','exec','chat','its\x20WHERE\x20','push','[EditLogge','\x20\x20saved_at','r]\x20initial','findings','groupMetad','removeList','oldText','newText','map','msg_id','all','includes','sender_num','✏️\x20*Message','get','r]\x20cleanup','fe\x20error:\x20','sock','147354sHYSQV','message','at_jid\x20TEX','OT\x20NULL\x20AN','newMessage','lete_prefs','[Original\x20','SELECT\x20val','ized','SELECT\x20COU','age\x20missin','DELETE\x20FRO','MAX_SEND_R','r]\x20failed\x20','son,\x20creat','extendedTe','\x20created_f','rom_edit\x20I','buttonsRes','from','\x20msg_id\x20TE','2501464ERyIoK','stringify','\x20ORDER\x20BY\x20','ailable;\x20d','id\x27','key','run','indexOf','caption','\x20failed:\x20','T,\x0a\x20\x20\x20\x20tex','length','EMENT,\x0a\x20\x20\x20','sg_id,\x20cha',',\x20saved_at','NT(*)\x20AS\x20c','l\x20Message:','oldMessage','*\x0a```\x0a','r]\x20attache','EXISTS\x20edi','ropping\x20se','participan','selectedBu','catch','status','videoMessa','LE\x20IF\x20NOT\x20','INSERT\x20INT','CREATE\x20TAB','d\x20INTEGER\x20','\x0a```','string','number','edit-logge','ata','ber','ted\x20handle','sender_pn','\x20FROM\x20edit','@g.us','\x20=\x201','18CNiJoh','t_pn','function','ener','hat_jid,\x20t','message.ed','ue\x20FROM\x20de','r]\x20unexpec','s\x20bot\x20arg','isArray','message\x20no','\x20?,\x20?,\x20?,\x20','\x20msg_id,\x20c','\x20INTEGER\x0a\x20','ttonId','ponseMessa','subject','value','seMessage','\x20target\x20av','\x20TEXT,\x0a\x20\x20\x20','ND\x20created','CLEANUP_IN','tempt\x20',')\x0a\x20\x20\x20\x20\x20VAL','endsWith','2ZOgZDd','imageMessa','\x20WHERE\x20key','💬\x20*Chat:*\x20','46370GRlFSp','ge.edit','trim','sendMessag','300yAXWrI','r]\x20cleaned','listRespon','it:\x20','\x20ID:*\x20'];_0x2ccb=function(){return _0x44fea9;};return _0x2ccb();}export function initialize(_0x32c059){const _0x2e2b98=_0x1247e2;if(!_0x32c059)throw new Error(_0x2e2b98(0xc5)+_0x2e2b98(0x125)+_0x2e2b98(0xf5)+_0x2e2b98(0xd5));botInstance=_0x32c059,ensureTable()[_0x2e2b98(0xbb)](_0x5c6d4f=>{const _0x522370=_0x2e2b98;error(_0x5c6d4f,'[EditLogge'+'r]\x20DB\x20init'+_0x522370(0xac)+(_0x5c6d4f?.[_0x522370(0x8f)]||_0x5c6d4f));throw _0x5c6d4f;});try{botInstance['on']('message.ed'+'it',handleMessageEdit),info(_0x2e2b98(0x7c)+_0x2e2b98(0xb6)+'d\x20to\x20messa'+_0x2e2b98(0xec));}catch(_0x2c9cdc){warn('[EditLogge'+_0x2e2b98(0x9b)+'to\x20attach\x20'+_0x2e2b98(0xd2)+_0x2e2b98(0xf2)+(_0x2c9cdc?.[_0x2e2b98(0x8f)]||_0x2c9cdc));}if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=setInterval(cleanupOldEditsSafe,Number(CLEANUP_INTERVAL_MS||FALLBACKS[_0x2e2b98(0xe3)+_0x2e2b98(0x10a)])),info(_0x2e2b98(0x7c)+_0x2e2b98(0x7e)+_0x2e2b98(0x96));}export function cleanup(){const _0x519c53=_0x1247e2;try{if(botInstance&&typeof botInstance[_0x519c53(0x81)+_0x519c53(0xd0)]===_0x519c53(0xcf))botInstance[_0x519c53(0x81)+_0x519c53(0xd0)](_0x519c53(0xd2)+'it',handleMessageEdit);if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=null;}catch(_0xc11599){warn('[EditLogge'+_0x519c53(0x8b)+_0x519c53(0xfc)+(_0xc11599?.['message']||_0xc11599));}finally{botInstance=null;}}export default{'name':name,'version':version,'priority':priority,'initialize':initialize,'cleanup':cleanup};