const _0x4f8d25=_0x4d9e;(function(_0x475705,_0x6ac38f){const _0x10d7b6=_0x4d9e,_0x607be3=_0x475705();while(!![]){try{const _0x3e8156=parseInt(_0x10d7b6(0x1a1))/(-0x1*0x139d+-0x1bc7+0x2f65)*(parseInt(_0x10d7b6(0x15a))/(0x138d+-0x2493+0x1108))+-parseInt(_0x10d7b6(0x1ce))/(0x2a*-0x13+-0xc53*0x2+-0x223*-0xd)*(parseInt(_0x10d7b6(0x179))/(-0x2615+-0xf1f+0xd*0x418))+parseInt(_0x10d7b6(0x12d))/(-0x5*-0x109+-0x88f*0x3+0x1485)+-parseInt(_0x10d7b6(0x131))/(0x2ae*0xd+-0x1*-0x502+-0x27d2)+parseInt(_0x10d7b6(0x1d3))/(0x1b5c+0x23b7+-0x3f0c)*(-parseInt(_0x10d7b6(0x15f))/(0x5*-0x7b5+0x38d*0x5+-0x90*-0x25))+-parseInt(_0x10d7b6(0x1c0))/(-0x1029+-0x5*0xc3+-0x6ab*-0x3)+parseInt(_0x10d7b6(0x156))/(0x4*-0x575+-0x51b+0x1af9);if(_0x3e8156===_0x6ac38f)break;else _0x607be3['push'](_0x607be3['shift']());}catch(_0x1b9ce2){_0x607be3['push'](_0x607be3['shift']());}}}(_0x47ff,0x2d41f+-0xd*-0x6ad2+-0x41f55));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getBotJid}from'../utils/bot-state.js';import{userjid}from'../utils/sudo.js';import{getSenderForMsg}from'./sudonumber.js';export const name=_0x4f8d25(0x18f)+'r';export const version=_0x4f8d25(0x1b1);export const priority=-0x1*-0x2f1+-0x1d2b+0x1a6c;let botInstance=null,cleanupInterval=null;const FALLBACKS={'EDIT_WINDOW_MINUTES':0xf,'CLEANUP_INTERVAL_MS':(-0x4*-0x5a7+0x1e9*0x13+-0x1*0x3aab)*(0x1acf*-0x1+0x15fc+-0x1*-0x8bb),'MAX_SEND_RETRIES':0x3,'INITIAL_BACKOFF_MS':0x1f4};let EDIT_WINDOW_MINUTES=FALLBACKS['EDIT_WINDO'+'W_MINUTES'],CLEANUP_INTERVAL_MS=FALLBACKS[_0x4f8d25(0x192)+_0x4f8d25(0x12c)],MAX_SEND_RETRIES=FALLBACKS[_0x4f8d25(0x140)+_0x4f8d25(0x177)],INITIAL_BACKOFF_MS=FALLBACKS[_0x4f8d25(0x13e)+_0x4f8d25(0x158)];async function ensureTable(){const _0xb393a5=_0x4f8d25;await db['exec'](_0xb393a5(0x1c5)+_0xb393a5(0x1cc)+'EXISTS\x20edi'+_0xb393a5(0x138)+'d\x20INTEGER\x20'+_0xb393a5(0x187)+_0xb393a5(0x1d5)+_0xb393a5(0x189)+_0xb393a5(0x122)+'XT,\x0a\x20\x20\x20\x20ch'+_0xb393a5(0x178)+'T,\x0a\x20\x20\x20\x20tex'+_0xb393a5(0x17b)+_0xb393a5(0x1b4)+'\x20TEXT,\x0a\x20\x20\x20'+'\x20created_f'+'rom_edit\x20I'+_0xb393a5(0x121)+_0xb393a5(0x148)+_0xb393a5(0x176)+_0xb393a5(0x141)+'\x20);');}function nowSeconds(){const _0x5844ad=_0x4f8d25;return Math[_0x5844ad(0x1bd)](Date[_0x5844ad(0x12b)]()/(0xa93*-0x2+-0xfba+0x28c8));}function _0x47ff(){const _0x496f74=['SELECT\x20id\x20','string','\x20failed:\x20','saved_at\x20D','find','edit-logge','t\x20in\x20cache','O\x20edits\x20(m','CLEANUP_IN','r]\x20failed\x20','id\x27','r]\x20initial','tAlt','slice','üë§\x20*User:*\x20','ttonId','value','xtMessage','endsWith','=\x27target_j','DELETE\x20FRO','seMessage','remoteJidA','404848zDzUTJ','r]\x20attache','s\x20bot\x20arg','ener','number','UES\x20(?,\x20?,','To:*\x0a```\x0a','SELECT\x20id,','‚úèÔ∏è\x20*Edited\x20','field','isArray','originalMe','_from_edit','indexOf','message.ed','groupMetad','1.7.0',',\x20saved_at','replace','\x20\x20raw_json','videoMessa','ropping\x20se','W_MINUTES','listRespon','M\x20edits\x20WH','msg_id','ata','d\x20to\x20messa','floor','rate','\x0a```','3459474pfpQWU','findings','jid','sender_pn','object','CREATE\x20TAB','selectedBu','singleSele','chat','filter','nd.','ze\x20require','LE\x20IF\x20NOT\x20','map','3rCKvaE','üÜî\x20*Message','t_pn','sender_num','NT(*)\x20AS\x20c','63SjHkWk','participan','Y\x20AUTOINCR','at\x20FROM\x20ed','r]\x20send\x20at','botInstanc','r]\x20no\x20send','\x20FROM\x20edit','ue\x20FROM\x20de','length','NTEGER\x20DEF','\x20msg_id\x20TE','\x20WHERE\x20key','age\x20missin','üí¨\x20*Chat:*\x20','ssageId','its\x20WHERE\x20','wId','ponseMessa','buttonsRes','now','TERVAL_MS','1676820XbhbLS','ber','D\x20saved_at','newMessage','3176412duUQgV','‚úèÔ∏è\x20*Message','message','[Original\x20','SELECT\x20COU','OT\x20NULL\x20AN','t_jid,\x20tex','ts\x20(\x0a\x20\x20\x20\x20i','join','\x20ID:*\x20','ed_from_ed','extendedTe','ERE\x20id\x20IN\x20','INITIAL_BA','OldEditsSa','MAX_SEND_R','\x20INTEGER\x0a\x20','imageMessa','t,\x20raw_jso','*\x0a```\x0a','stringify','FROM\x20edits','r\x20error:\x20','AULT\x200,\x0a\x20\x20','times','ctReply','\x20ORDER\x20BY\x20','rows','ext,\x20raw_j','selectedRo','remoteJid','r]\x20DB\x20init','oldMessage','conversati','ND\x20created','removeList','caption','8990170PXZExl','old_messag','CKOFF_MS','r]\x20unexpec','2hrphjD','ge.edit','\x20target\x20av','old_text','EDIT_WINDO','302928VXlREt','catch','sock','ted\x20handle','\x20(edited\x20','newText','üîÅ\x20*Origina','chatId','\x20WHERE\x20sav','@g.us','sender_jid','sg_id,\x20cha','e.sendMess','ized','\x20msg_id,\x20c','get','sendMessag','to\x20attach\x20','[EditLogge','\x20?,\x20?,\x20?,\x20','text','\x20Edited*\x0a\x0a','oldText','\x20\x20saved_at','ETRIES','at_jid\x20TEX','455756aiGuQn','function','t\x20TEXT,\x0a\x20\x20','\x20error:\x20','ed_at\x20IS\x20N','INSERT\x20INT','toLowerCas','trim','lete_prefs','s\x20WHERE\x20ms','g_id\x20=\x20?\x20A','r]\x20cleanup','new_messag','key','PRIMARY\x20KE','run','EMENT,\x0a\x20\x20\x20'];_0x47ff=function(){return _0x496f74;};return _0x47ff();}async function insertEditVersion(_0x2e10e7,_0x11c992,_0x54a53d,_0x559e3a,_0x1c179e=-0x1c53+0x1270+-0xc*-0xd3){const _0x28bd0a=_0x4f8d25,_0x2b4786=nowSeconds();await db[_0x28bd0a(0x188)](_0x28bd0a(0x17e)+_0x28bd0a(0x191)+_0x28bd0a(0x16a)+_0x28bd0a(0x137)+_0x28bd0a(0x143)+'n,\x20created'+_0x28bd0a(0x1ad)+_0x28bd0a(0x1b2)+')\x0a\x20\x20\x20\x20\x20VAL'+_0x28bd0a(0x1a6)+_0x28bd0a(0x172)+'?)',[_0x2e10e7||null,_0x11c992||null,_0x54a53d||'',_0x559e3a||null,_0x1c179e?0x4*0x334+-0x31*0x71+0x8d2:0x24d0+-0x4bb*0x3+-0x169f,_0x2b4786]);}async function fetchLatestEditForMsg(_0x3df032){const _0x5a72de=_0x4f8d25;if(!_0x3df032)return null;const _0x120819=await db[_0x5a72de(0x16e)](_0x5a72de(0x1a8)+_0x5a72de(0x16d)+'hat_jid,\x20t'+_0x5a72de(0x14d)+'son,\x20creat'+_0x5a72de(0x13b)+'it,\x20saved_'+_0x5a72de(0x1d6)+_0x5a72de(0x127)+'msg_id\x20=\x20?'+_0x5a72de(0x14b)+_0x5a72de(0x18d)+'ESC\x20LIMIT\x20'+'1',[_0x3df032]);return _0x120819||null;}async function countEditsForMsg(_0x2481e8){const _0x5d21ce=_0x4f8d25;if(!_0x2481e8)return 0xe3e+-0x2624+0x36a*0x7;const _0x7c8a59=await db[_0x5d21ce(0x16e)](_0x5d21ce(0x135)+_0x5d21ce(0x1d2)+_0x5d21ce(0x11e)+_0x5d21ce(0x182)+_0x5d21ce(0x183)+_0x5d21ce(0x153)+_0x5d21ce(0x1ad)+'\x20=\x201',[_0x2481e8]);return _0x7c8a59&&typeof _0x7c8a59['c']===_0x5d21ce(0x1a5)?_0x7c8a59['c']:0x11ad+-0x745+-0x2*0x534;}async function cleanupOldEdits(){const _0x6ae035=_0x4f8d25,_0x160247=nowSeconds()-Number(EDIT_WINDOW_MINUTES||FALLBACKS[_0x6ae035(0x15e)+_0x6ae035(0x1b7)])*(0x1d7c+0x5*-0xb3+0x19c1*-0x1),_0x4ac0fc=await db['all'](_0x6ae035(0x18a)+_0x6ae035(0x146)+_0x6ae035(0x167)+_0x6ae035(0x17d)+_0x6ae035(0x136)+_0x6ae035(0x12f)+'\x20<\x20?',[_0x160247]);if(!_0x4ac0fc||_0x4ac0fc[_0x6ae035(0x120)]===0x1e99+-0x5ee*0x2+-0x3*0x63f)return;const _0x482650=_0x4ac0fc[_0x6ae035(0x1cd)](_0x5124d8=>_0x5124d8['id']),_0x5738a4=-0x1e3+0x5b*-0x59+0x224e;for(let _0x28280e=0xd*0xa9+0x59*0x2f+-0x74*0x37;_0x28280e<_0x482650[_0x6ae035(0x120)];_0x28280e+=_0x5738a4){const _0x4a07f1=_0x482650['slice'](_0x28280e,_0x28280e+_0x5738a4),_0x206216=_0x4a07f1[_0x6ae035(0x1cd)](()=>'?')[_0x6ae035(0x139)](',');await db['run'](_0x6ae035(0x19e)+_0x6ae035(0x1b9)+_0x6ae035(0x13d)+'('+_0x206216+')',_0x4a07f1);}info(_0x6ae035(0x171)+'r]\x20cleaned'+'\x20'+_0x4ac0fc[_0x6ae035(0x120)]+('\x20old\x20edit\x20'+_0x6ae035(0x14c)));}async function cleanupOldEditsSafe(){const _0x1c2ee2=_0x4f8d25;try{await cleanupOldEdits();}catch(_0x5224d3){warn(_0x1c2ee2(0x171)+_0x1c2ee2(0x184)+_0x1c2ee2(0x13f)+'fe\x20error:\x20'+(_0x5224d3?.[_0x1c2ee2(0x133)]||_0x5224d3));}}function _0x4d9e(_0x39f6fe,_0x112c55){_0x39f6fe=_0x39f6fe-(0x5db*-0x5+-0x1b7d+0x39e1);const _0x527c9c=_0x47ff();let _0x4b1745=_0x527c9c[_0x39f6fe];return _0x4b1745;}function extractText(_0x1902cd,_0xc59594=!![]){const _0x43249f=_0x4f8d25;if(!_0x1902cd)return'';if(_0xc59594){if(typeof _0x1902cd[_0x43249f(0x164)]==='string')return _0x1902cd[_0x43249f(0x164)];if(typeof _0x1902cd['new_text']==='string')return _0x1902cd['new_text'];}else{if(typeof _0x1902cd[_0x43249f(0x175)]===_0x43249f(0x18b))return _0x1902cd[_0x43249f(0x175)];if(typeof _0x1902cd[_0x43249f(0x15d)]===_0x43249f(0x18b))return _0x1902cd[_0x43249f(0x15d)];}const _0x529782=_0xc59594?_0x1902cd[_0x43249f(0x130)]||_0x1902cd[_0x43249f(0x133)]||_0x1902cd[_0x43249f(0x185)+'e']:_0x1902cd[_0x43249f(0x151)]||_0x1902cd['message']||_0x1902cd[_0x43249f(0x157)+'e'];if(_0x529782&&typeof _0x529782===_0x43249f(0x1c4)){if(_0x529782['conversati'+'on'])return _0x529782[_0x43249f(0x152)+'on'];if(_0x529782[_0x43249f(0x13c)+_0x43249f(0x19b)]?.[_0x43249f(0x173)])return _0x529782[_0x43249f(0x13c)+_0x43249f(0x19b)][_0x43249f(0x173)];if(_0x529782[_0x43249f(0x142)+'ge']?.[_0x43249f(0x155)])return _0x529782[_0x43249f(0x142)+'ge'][_0x43249f(0x155)];if(_0x529782[_0x43249f(0x1b5)+'ge']?.['caption'])return _0x529782['videoMessa'+'ge'][_0x43249f(0x155)];if(_0x529782[_0x43249f(0x12a)+'ponseMessa'+'ge']?.[_0x43249f(0x1c6)+_0x43249f(0x199)])return _0x529782[_0x43249f(0x12a)+_0x43249f(0x129)+'ge'][_0x43249f(0x1c6)+'ttonId'];if(_0x529782[_0x43249f(0x1b8)+_0x43249f(0x19f)]?.[_0x43249f(0x1c7)+_0x43249f(0x14a)]?.[_0x43249f(0x14e)+_0x43249f(0x128)])return _0x529782['listRespon'+_0x43249f(0x19f)]['singleSele'+_0x43249f(0x14a)]['selectedRo'+'wId'];}if(typeof _0x1902cd[_0x43249f(0x173)]==='string')return _0x1902cd[_0x43249f(0x173)];return'';}function numberFromRawJid(_0x36a806){const _0x3c6855=_0x4f8d25;if(!_0x36a806)return'';try{const _0x417e25=String(_0x36a806),_0x3bb615=_0x417e25[_0x3c6855(0x1ae)]('@'),_0x2cdd49=_0x3bb615===-(-0xb*-0xb+-0x1f12+0x1e9a)?_0x417e25:_0x417e25['slice'](-0x231f+-0x1*0x1dd7+0x40f6,_0x3bb615),_0x301e07=_0x2cdd49[_0x3c6855(0x1ae)](':'),_0x1b0eee=_0x301e07===-(-0x76e+0x32*-0x3a+0x12c3)?_0x2cdd49:_0x2cdd49[_0x3c6855(0x197)](-0x1646+-0xe99+0x24df*0x1,_0x301e07);return _0x1b0eee[_0x3c6855(0x1b3)](/^\+/,'');}catch{return'';}}function isGroupJid(_0x2a73d9){const _0xbbe055=_0x4f8d25;return typeof _0x2a73d9==='string'&&_0x2a73d9[_0xbbe055(0x19c)](_0xbbe055(0x168));}async function sendWithRetry(_0x131ac3,_0x5a4f49){const _0x17fe99=_0x4f8d25,_0x193196=Number(MAX_SEND_RETRIES||FALLBACKS['MAX_SEND_R'+_0x17fe99(0x177)]);let _0x5dc29e=0x2210+0x4*-0x648+-0x8f0,_0x4b7e99=Number(INITIAL_BACKOFF_MS||FALLBACKS['INITIAL_BA'+_0x17fe99(0x158)]);const _0x496776=[];if(_0x5a4f49)_0x496776['push'](_0x5a4f49);try{const _0x17a7d4=await db[_0x17fe99(0x16e)]('SELECT\x20val'+_0x17fe99(0x11f)+_0x17fe99(0x181)+_0x17fe99(0x123)+_0x17fe99(0x19d)+_0x17fe99(0x194));if(_0x17a7d4&&_0x17a7d4[_0x17fe99(0x19a)])_0x496776['push'](String(_0x17a7d4['value']));}catch{}const _0xd1a116=getBotJid();if(_0xd1a116)_0x496776['push'](_0xd1a116);const _0x1525bd=Array['from'](new Set(_0x496776[_0x17fe99(0x1c9)](Boolean)));if(_0x1525bd[_0x17fe99(0x120)]===0x83*-0x2+0x7e+0x44*0x2)return warn(_0x17fe99(0x171)+_0x17fe99(0x11d)+_0x17fe99(0x15c)+'ailable;\x20d'+_0x17fe99(0x1b6)+_0x17fe99(0x1ca)),![];const _0x234128=_0x1525bd[-0xb15*0x3+0x143c+0x1*0xd03];while(_0x5dc29e<_0x193196){_0x5dc29e++;try{if(!botInstance||typeof botInstance[_0x17fe99(0x16f)+'e']!==_0x17fe99(0x17a))throw new Error(_0x17fe99(0x1d8)+_0x17fe99(0x16b)+_0x17fe99(0x124)+'g');return await botInstance['sendMessag'+'e'](_0x234128,_0x131ac3),!![];}catch(_0x39be38){warn(_0x17fe99(0x171)+_0x17fe99(0x1d7)+'tempt\x20'+_0x5dc29e+'\x20failed:\x20'+(_0x39be38?.['message']||_0x39be38));const _0x58d54e=String(_0x39be38?.[_0x17fe99(0x133)]||'')[_0x17fe99(0x17f)+'e']()['includes'](_0x17fe99(0x1be))||_0x39be38?.['status']===-0x1*-0x1256+-0x1a5c+0x9b3;if(_0x5dc29e>=_0x193196||!_0x58d54e)return![];await new Promise(_0xf10a3c=>setTimeout(_0xf10a3c,_0x4b7e99)),_0x4b7e99*=0x42*-0x67+-0x9f*-0x1c+-0x92c*-0x1;}}return![];}async function buildAndSendLog({chatJid:_0x41e51f,msgId:_0x4086cf,originalText:_0x3b1a5f,newText:_0x24390d,senderNumber:_0xe5c328,editCount:_0x4788e6}){const _0x4df190=_0x4f8d25;let _0x2fcb24=null;if(isGroupJid(_0x41e51f)&&botInstance?.[_0x4df190(0x161)]?.[_0x4df190(0x1b0)+_0x4df190(0x1bb)])try{const _0x442349=await botInstance[_0x4df190(0x161)]['groupMetad'+_0x4df190(0x1bb)](_0x41e51f);if(_0x442349?.['subject'])_0x2fcb24=_0x442349['subject'];}catch{}const _0x4d1230=_0x4df190(0x132)+_0x4df190(0x174),_0xbae953=_0x4df190(0x198)+'@'+(_0xe5c328||''),_0x5b3fcc=_0x4df190(0x125)+(_0x2fcb24?_0x2fcb24+'\x20('+_0x41e51f+')':_0x41e51f||'(unknown)'),_0xa53152=_0x4df190(0x1cf)+_0x4df190(0x13a)+(_0x4086cf||'(unknown)'),_0x299ec3=typeof _0x4788e6===_0x4df190(0x1a5)&&_0x4788e6>0x2a+0xba4+-0x2*0x5e7?_0x4df190(0x163)+_0x4788e6+'\x20'+(_0x4788e6===0x1a40+0x1*0x156a+-0x2fa9?'time':_0x4df190(0x149))+')':'',_0x1e7a11=_0x4df190(0x165)+'l\x20Message:'+_0x299ec3+_0x4df190(0x144)+(_0x3b1a5f||_0x4df190(0x134)+'message\x20no'+_0x4df190(0x190)+']')+_0x4df190(0x1bf),_0x3db73a=_0x4df190(0x1a9)+_0x4df190(0x1a7)+(_0x24390d||'')+_0x4df190(0x1bf),_0x1144d8=[_0x4d1230,_0xbae953,_0x5b3fcc,_0xa53152,'',_0x1e7a11,'',_0x3db73a][_0x4df190(0x139)]('\x0a');return await sendWithRetry({'text':_0x1144d8},null);}async function handleMessageEdit(_0x26d77a){const _0x2ecab4=_0x4f8d25;try{if(!_0x26d77a)return;let _0xb92016=[],_0x3b4e6b=null;try{const _0x53b148=userjid(_0x26d77a);_0xb92016=_0x53b148?.[_0x2ecab4(0x1c1)]||[],_0x3b4e6b=_0x53b148?.['id']||null;}catch(_0x4a5df7){}let _0x294bdb=_0x3b4e6b||_0x26d77a[_0x2ecab4(0x1ac)+_0x2ecab4(0x126)]||_0x26d77a['msgId']||_0x26d77a[_0x2ecab4(0x1ba)]||_0x26d77a['id']||_0x26d77a[_0x2ecab4(0x133)]?.[_0x2ecab4(0x186)]?.['id']||null,_0x9eae03=_0x26d77a[_0x2ecab4(0x166)]||_0x26d77a[_0x2ecab4(0x1c8)]||_0x26d77a[_0x2ecab4(0x133)]?.[_0x2ecab4(0x186)]?.[_0x2ecab4(0x14f)]||null,_0xc6f9d7='';try{if(_0x294bdb){const _0xe45421=await getSenderForMsg(_0x294bdb);_0xe45421&&(_0xc6f9d7=_0xe45421[_0x2ecab4(0x1d1)+_0x2ecab4(0x12e)]&&String(_0xe45421[_0x2ecab4(0x1d1)+_0x2ecab4(0x12e)])['trim']()?String(_0xe45421[_0x2ecab4(0x1d1)+'ber'])[_0x2ecab4(0x180)]():numberFromRawJid(_0xe45421[_0x2ecab4(0x169)]));}}catch(_0x52e37e){}if(!_0xc6f9d7&&Array[_0x2ecab4(0x1ab)](_0xb92016)&&_0xb92016[_0x2ecab4(0x120)]){const _0x19bc02=[_0x2ecab4(0x1a0)+'lt',_0x2ecab4(0x1c3),'participan'+_0x2ecab4(0x196),_0x2ecab4(0x1d4)+_0x2ecab4(0x1d0)];let _0x7e43b9=null;for(const _0x146e3c of _0x19bc02){_0x7e43b9=_0xb92016[_0x2ecab4(0x18e)](_0x336777=>_0x336777[_0x2ecab4(0x1aa)]===_0x146e3c&&typeof _0x336777[_0x2ecab4(0x1c2)]===_0x2ecab4(0x18b));if(_0x7e43b9)break;}if(!_0x7e43b9)_0x7e43b9=_0xb92016[0x1*0x1429+0x3*0x9d1+-0x18ce*0x2];_0x7e43b9&&_0x7e43b9[_0x2ecab4(0x1c2)]&&(_0xc6f9d7=numberFromRawJid(_0x7e43b9[_0x2ecab4(0x1c2)]));}const _0x43922e=extractText(_0x26d77a,!![])||'',_0x35e41f=_0x294bdb?await fetchLatestEditForMsg(_0x294bdb):null,_0x3e47dd=_0x35e41f&&typeof _0x35e41f[_0x2ecab4(0x173)]==='string'&&_0x35e41f['text']['length']?_0x35e41f[_0x2ecab4(0x173)]:extractText(_0x26d77a,![])||_0x2ecab4(0x134)+'message\x20no'+_0x2ecab4(0x190)+']',_0x7039f2=_0x294bdb?await countEditsForMsg(_0x294bdb):0x22cf+0x2*0x44+-0x2357,_0x2428e4=await buildAndSendLog({'chatJid':_0x9eae03,'msgId':_0x294bdb,'originalText':_0x3e47dd,'newText':_0x43922e,'senderNumber':_0xc6f9d7,'editCount':_0x7039f2}),_0x492beb=((()=>{const _0x385457=_0x2ecab4;try{return JSON[_0x385457(0x145)](_0x26d77a)[_0x385457(0x197)](0x1*0x13f+-0x27d+0x9f*0x2,-0x279b0+0x7225*-0x2+-0x1b3b*-0x2e);}catch{return null;}})());return await insertEditVersion(_0x294bdb,_0x9eae03,_0x43922e,_0x492beb,-0x3f*-0x7e+0x1e4d*-0x1+-0x4*0x2d),_0x2428e4;}catch(_0x15d598){warn(_0x2ecab4(0x171)+_0x2ecab4(0x159)+_0x2ecab4(0x162)+_0x2ecab4(0x147)+(_0x15d598?.[_0x2ecab4(0x133)]||_0x15d598));}}export function initialize(_0x215701){const _0x1665bd=_0x4f8d25;if(!_0x215701)throw new Error(_0x1665bd(0x18f)+'r\x20initiali'+_0x1665bd(0x1cb)+_0x1665bd(0x1a3));botInstance=_0x215701,ensureTable()[_0x1665bd(0x160)](_0x45ed18=>{const _0x40254a=_0x1665bd;error(_0x45ed18,'[EditLogge'+_0x40254a(0x150)+_0x40254a(0x18c)+(_0x45ed18?.['message']||_0x45ed18));throw _0x45ed18;});try{botInstance['on']('message.ed'+'it',handleMessageEdit),info(_0x1665bd(0x171)+_0x1665bd(0x1a2)+_0x1665bd(0x1bc)+_0x1665bd(0x15b));}catch(_0x2b9b28){warn(_0x1665bd(0x171)+_0x1665bd(0x193)+_0x1665bd(0x170)+_0x1665bd(0x1af)+'it:\x20'+(_0x2b9b28?.[_0x1665bd(0x133)]||_0x2b9b28));}if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=setInterval(cleanupOldEditsSafe,Number(CLEANUP_INTERVAL_MS||FALLBACKS[_0x1665bd(0x192)+'TERVAL_MS'])),info(_0x1665bd(0x171)+_0x1665bd(0x195)+_0x1665bd(0x16c));}export function cleanup(){const _0x4abf2b=_0x4f8d25;try{if(botInstance&&typeof botInstance[_0x4abf2b(0x154)+_0x4abf2b(0x1a4)]===_0x4abf2b(0x17a))botInstance[_0x4abf2b(0x154)+'ener'](_0x4abf2b(0x1af)+'it',handleMessageEdit);if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=null;}catch(_0xfb25ad){warn(_0x4abf2b(0x171)+_0x4abf2b(0x184)+_0x4abf2b(0x17c)+(_0xfb25ad?.[_0x4abf2b(0x133)]||_0xfb25ad));}finally{botInstance=null;}}export default{'name':name,'version':version,'priority':priority,'initialize':initialize,'cleanup':cleanup};