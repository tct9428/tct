const _0x310f9d=_0x3a2d;function _0x3a2d(_0x1182c8,_0x291cd7){const _0x1e25f8=_0x598d();return _0x3a2d=function(_0x169234,_0x453038){_0x169234=_0x169234-(-0x120e+0x2549+-0x117d);let _0x1fba59=_0x1e25f8[_0x169234];return _0x1fba59;},_0x3a2d(_0x1182c8,_0x291cd7);}(function(_0x2773a5,_0x281da6){const _0x1233c5=_0x3a2d,_0x5d0898=_0x2773a5();while(!![]){try{const _0x227faa=parseInt(_0x1233c5(0x1e0))/(0x11a8*-0x2+0xd21*0x2+0x90f)+parseInt(_0x1233c5(0x268))/(-0x26a8+0x2654+0x56)+-parseInt(_0x1233c5(0x230))/(-0x1*0xf0e+-0x1453+0x25c*0xf)*(parseInt(_0x1233c5(0x244))/(0x826+0x2113+-0x5e3*0x7))+parseInt(_0x1233c5(0x21c))/(-0x11cc+0x2af*-0x9+0x29f8)+parseInt(_0x1233c5(0x270))/(0x1127+-0x256e+0x1*0x144d)*(-parseInt(_0x1233c5(0x1f5))/(0x24c1*0x1+0x11*-0xa7+0x19a3*-0x1))+-parseInt(_0x1233c5(0x1f3))/(0x1f8+-0xa44+0x854)*(-parseInt(_0x1233c5(0x23f))/(-0xc81*-0x3+0x1d8a+-0x2182*0x2))+-parseInt(_0x1233c5(0x1f1))/(0x1*-0x1b9e+-0xa28+0x50*0x79)*(parseInt(_0x1233c5(0x255))/(-0x6*-0x2d9+-0x2*-0x567+-0x1*0x1bd9));if(_0x227faa===_0x281da6)break;else _0x5d0898['push'](_0x5d0898['shift']());}catch(_0x1917a3){_0x5d0898['push'](_0x5d0898['shift']());}}}(_0x598d,0xa3*0x1aff+-0x21ac9*0x2+-0xf5*-0x1d3));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getBotJid}from'../utils/bot-state.js';import{userjid}from'../utils/sudo.js';import{getSenderForMsg}from'./sudonumber.js';export const name=_0x310f9d(0x1e6)+'r';export const version='1.7.0';export const priority=-0x6*0x22e+-0x260a+-0x8*-0x66a;let botInstance=null,cleanupInterval=null;const FALLBACKS={'EDIT_WINDOW_MINUTES':0xf,'CLEANUP_INTERVAL_MS':(0x2066+-0xf*0xbd+0x1517*-0x1)*(-0x2608+-0x147*-0x15+0xf1d*0x1),'MAX_SEND_RETRIES':0x3,'INITIAL_BACKOFF_MS':0x1f4};let EDIT_WINDOW_MINUTES=FALLBACKS['EDIT_WINDO'+_0x310f9d(0x1ce)],CLEANUP_INTERVAL_MS=FALLBACKS['CLEANUP_IN'+'TERVAL_MS'],MAX_SEND_RETRIES=FALLBACKS[_0x310f9d(0x1ff)+_0x310f9d(0x20d)],INITIAL_BACKOFF_MS=FALLBACKS[_0x310f9d(0x20b)+_0x310f9d(0x21d)];async function ensureTable(){const _0x5ad024=_0x310f9d;await db['exec'](_0x5ad024(0x1c3)+_0x5ad024(0x260)+_0x5ad024(0x250)+_0x5ad024(0x26c)+_0x5ad024(0x22a)+_0x5ad024(0x208)+_0x5ad024(0x216)+_0x5ad024(0x231)+_0x5ad024(0x239)+'XT,\x0a\x20\x20\x20\x20ch'+_0x5ad024(0x220)+'T,\x0a\x20\x20\x20\x20tex'+'t\x20TEXT,\x0a\x20\x20'+_0x5ad024(0x219)+_0x5ad024(0x22e)+_0x5ad024(0x22b)+'rom_edit\x20I'+_0x5ad024(0x240)+'AULT\x200,\x0a\x20\x20'+_0x5ad024(0x1d9)+_0x5ad024(0x221)+_0x5ad024(0x1f9));}function nowSeconds(){const _0x56d44a=_0x310f9d;return Math[_0x56d44a(0x1db)](Date[_0x56d44a(0x233)]()/(-0x1fa9*-0x1+-0x1279+-0x948));}async function insertEditVersion(_0x479337,_0x17a448,_0x1ee477,_0x2174d6,_0x1ba23f=-0x1108+0x21b5+0xc2*-0x16){const _0x35aff4=_0x310f9d,_0xa0de72=nowSeconds();await db[_0x35aff4(0x259)](_0x35aff4(0x210)+_0x35aff4(0x21e)+_0x35aff4(0x205)+'t_jid,\x20tex'+'t,\x20raw_jso'+_0x35aff4(0x1d1)+_0x35aff4(0x21b)+_0x35aff4(0x22d)+')\x0a\x20\x20\x20\x20\x20VAL'+_0x35aff4(0x202)+_0x35aff4(0x24d)+'?)',[_0x479337||null,_0x17a448||null,_0x1ee477||'',_0x2174d6||null,_0x1ba23f?0x1f01*0x1+0x1*0x186e+-0x376e:-0x8a1*0x1+0x1*-0x1638+0x1ed9,_0xa0de72]);}async function fetchLatestEditForMsg(_0x4b9610){const _0x12ab50=_0x310f9d;if(!_0x4b9610)return null;const _0x3cc0db=await db[_0x12ab50(0x22c)](_0x12ab50(0x272)+_0x12ab50(0x201)+_0x12ab50(0x224)+'ext,\x20raw_j'+'son,\x20creat'+_0x12ab50(0x1e8)+_0x12ab50(0x1da)+_0x12ab50(0x24c)+_0x12ab50(0x214)+_0x12ab50(0x254)+'\x20ORDER\x20BY\x20'+_0x12ab50(0x1e3)+'ESC\x20LIMIT\x20'+'1',[_0x4b9610]);return _0x3cc0db||null;}async function countEditsForMsg(_0xec1c95){const _0x39049b=_0x310f9d;if(!_0xec1c95)return-0x24c0+0x22e2+0x1de;const _0x34ea0f=await db['get']('SELECT\x20COU'+'NT(*)\x20AS\x20c'+_0x39049b(0x21a)+'s\x20WHERE\x20ms'+_0x39049b(0x258)+_0x39049b(0x24a)+_0x39049b(0x21b)+'\x20=\x201',[_0xec1c95]);return _0x34ea0f&&typeof _0x34ea0f['c']===_0x39049b(0x237)?_0x34ea0f['c']:-0xbfe+0x36*-0x5c+-0xfb3*-0x2;}async function cleanupOldEdits(){const _0x14e8df=_0x310f9d,_0x5cd1d4=nowSeconds()-Number(EDIT_WINDOW_MINUTES||FALLBACKS[_0x14e8df(0x25a)+_0x14e8df(0x1ce)])*(0x3a6+0x330+-0x69a),_0x1860f8=await db[_0x14e8df(0x273)](_0x14e8df(0x1e2)+_0x14e8df(0x200)+_0x14e8df(0x263)+_0x14e8df(0x229)+_0x14e8df(0x243)+'D\x20saved_at'+_0x14e8df(0x257),[_0x5cd1d4]);if(!_0x1860f8||_0x1860f8[_0x14e8df(0x217)]===-0x224*0x3+-0x1f4b+0x25b7*0x1)return;const _0x3731e7=_0x1860f8[_0x14e8df(0x261)](_0x1ed221=>_0x1ed221['id']),_0x4e289b=-0x92e+0x1*-0x481+0xe77;for(let _0x286209=-0x11*0x242+-0x7c8+0x2e2a*0x1;_0x286209<_0x3731e7[_0x14e8df(0x217)];_0x286209+=_0x4e289b){const _0x146bab=_0x3731e7[_0x14e8df(0x1f6)](_0x286209,_0x286209+_0x4e289b),_0x48a268=_0x146bab[_0x14e8df(0x261)](()=>'?')[_0x14e8df(0x252)](',');await db['run'](_0x14e8df(0x232)+_0x14e8df(0x247)+_0x14e8df(0x25c)+'('+_0x48a268+')',_0x146bab);}info('[EditLogge'+_0x14e8df(0x218)+'\x20'+_0x1860f8[_0x14e8df(0x217)]+('\x20old\x20edit\x20'+_0x14e8df(0x267)));}async function cleanupOldEditsSafe(){const _0x375f72=_0x310f9d;try{await cleanupOldEdits();}catch(_0x1371ba){warn(_0x375f72(0x25b)+_0x375f72(0x1c0)+_0x375f72(0x1ca)+_0x375f72(0x26d)+(_0x1371ba?.['message']||_0x1371ba));}}function extractText(_0x6c1132,_0xc986c9=!![]){const _0x31bab5=_0x310f9d;if(!_0x6c1132)return'';if(_0xc986c9){if(typeof _0x6c1132[_0x31bab5(0x1cc)]===_0x31bab5(0x222))return _0x6c1132[_0x31bab5(0x1cc)];if(typeof _0x6c1132[_0x31bab5(0x1c6)]==='string')return _0x6c1132['new_text'];}else{if(typeof _0x6c1132[_0x31bab5(0x207)]===_0x31bab5(0x222))return _0x6c1132['oldText'];if(typeof _0x6c1132[_0x31bab5(0x248)]===_0x31bab5(0x222))return _0x6c1132[_0x31bab5(0x248)];}const _0x151900=_0xc986c9?_0x6c1132[_0x31bab5(0x274)]||_0x6c1132[_0x31bab5(0x226)]||_0x6c1132[_0x31bab5(0x1fe)+'e']:_0x6c1132[_0x31bab5(0x1d5)]||_0x6c1132[_0x31bab5(0x226)]||_0x6c1132['old_messag'+'e'];if(_0x151900&&typeof _0x151900==='object'){if(_0x151900['conversati'+'on'])return _0x151900['conversati'+'on'];if(_0x151900[_0x31bab5(0x265)+_0x31bab5(0x1c8)]?.[_0x31bab5(0x1f8)])return _0x151900[_0x31bab5(0x265)+_0x31bab5(0x1c8)][_0x31bab5(0x1f8)];if(_0x151900[_0x31bab5(0x1ea)+'ge']?.[_0x31bab5(0x238)])return _0x151900[_0x31bab5(0x1ea)+'ge'][_0x31bab5(0x238)];if(_0x151900[_0x31bab5(0x1c2)+'ge']?.[_0x31bab5(0x238)])return _0x151900[_0x31bab5(0x1c2)+'ge'][_0x31bab5(0x238)];if(_0x151900[_0x31bab5(0x1c1)+_0x31bab5(0x1f7)+'ge']?.[_0x31bab5(0x251)+'ttonId'])return _0x151900[_0x31bab5(0x1c1)+_0x31bab5(0x1f7)+'ge'][_0x31bab5(0x251)+'ttonId'];if(_0x151900['listRespon'+_0x31bab5(0x256)]?.[_0x31bab5(0x1c5)+_0x31bab5(0x1f0)]?.[_0x31bab5(0x1dc)+_0x31bab5(0x1e1)])return _0x151900[_0x31bab5(0x1fa)+_0x31bab5(0x256)][_0x31bab5(0x1c5)+_0x31bab5(0x1f0)]['selectedRo'+_0x31bab5(0x1e1)];}if(typeof _0x6c1132[_0x31bab5(0x1f8)]===_0x31bab5(0x222))return _0x6c1132[_0x31bab5(0x1f8)];return'';}function numberFromRawJid(_0x3c8eec){const _0x48bffd=_0x310f9d;if(!_0x3c8eec)return'';try{const _0x288a6b=String(_0x3c8eec),_0x383916=_0x288a6b[_0x48bffd(0x24e)]('@'),_0x308b41=_0x383916===-(-0x6c2+-0x479+0xb3c)?_0x288a6b:_0x288a6b[_0x48bffd(0x1f6)](0x15f8+0x86*-0x44+0xda0,_0x383916),_0x50ff7c=_0x308b41['indexOf'](':'),_0x40ccf8=_0x50ff7c===-(0x10b3+0x6bf+-0x1771)?_0x308b41:_0x308b41[_0x48bffd(0x1f6)](0x1c3a*-0x1+0x109e+0xb9c*0x1,_0x50ff7c);return _0x40ccf8['replace'](/^\+/,'');}catch{return'';}}function isGroupJid(_0x3901ff){const _0x226037=_0x310f9d;return typeof _0x3901ff===_0x226037(0x222)&&_0x3901ff[_0x226037(0x1ef)](_0x226037(0x1d3));}function _0x598d(){const _0x5ad33f=['jid','remoteJidA','message\x20no','9tTqEUe','NTEGER\x20DEF','toLowerCas','nd.','OT\x20NULL\x20AN','136028KjJPdZ','(unknown)','r]\x20attache','M\x20edits\x20WH','old_text','find','ND\x20created','msg_id','at\x20FROM\x20ed','\x20?,\x20?,\x20?,\x20','indexOf','ted\x20handle','EXISTS\x20edi','selectedBu','join','r]\x20DB\x20init','msg_id\x20=\x20?','11SNrEcE','seMessage','\x20<\x20?','g_id\x20=\x20?\x20A','run','EDIT_WINDO','[EditLogge','ERE\x20id\x20IN\x20','r]\x20unexpec','ssageId','stringify','LE\x20IF\x20NOT\x20','map','\x20Edited*\x0a\x0a','\x20WHERE\x20sav','includes','extendedTe','lete_prefs','rows','3088634LXeQvs','sender_jid','function','subject','ts\x20(\x0a\x20\x20\x20\x20i','fe\x20error:\x20','ðŸ†”\x20*Message','message.ed','126GUhxHV','trim','SELECT\x20id,','all','newMessage','id\x27','msgId','ze\x20require','r]\x20send\x20at','r]\x20cleanup','buttonsRes','videoMessa','CREATE\x20TAB','chat','singleSele','new_text','ropping\x20se','xtMessage','ber','OldEditsSa','r]\x20no\x20send','newText','field','W_MINUTES','CLEANUP_IN','groupMetad','n,\x20created','isArray','@g.us','times','oldMessage','findings','it:\x20','rate','\x20\x20saved_at','it,\x20saved_','floor','selectedRo','ener','\x20ID:*\x20','time','1489865zdUjKa','wId','SELECT\x20id\x20','saved_at\x20D','tempt\x20','\x20target\x20av','edit-logge','filter','ed_from_ed','\x20WHERE\x20key','imageMessa','l\x20Message:','r]\x20failed\x20','key','participan','endsWith','ctReply','16586920uPFTzu','\x20error:\x20','2752184pwRKTa','\x0a```','258391OpOLSG','slice','ponseMessa','text','\x20);','listRespon','ata','removeList','\x20failed:\x20','new_messag','MAX_SEND_R','FROM\x20edits','\x20msg_id,\x20c','UES\x20(?,\x20?,','âœï¸\x20*Message','ge.edit','sg_id,\x20cha','tAlt','oldText','PRIMARY\x20KE','value','=\x27target_j','INITIAL_BA','s\x20bot\x20arg','ETRIES','originalMe','ailable;\x20d','INSERT\x20INT','to\x20attach\x20','t\x20in\x20cache','r\x20error:\x20','its\x20WHERE\x20','botInstanc','Y\x20AUTOINCR','length','r]\x20cleaned','\x20\x20raw_json','\x20FROM\x20edit','_from_edit','5714705PrEeze','CKOFF_MS','O\x20edits\x20(m','[Original\x20','at_jid\x20TEX','\x20INTEGER\x0a\x20','string','TERVAL_MS','hat_jid,\x20t','sock','message','*\x0a```\x0a','age\x20missin','ed_at\x20IS\x20N','d\x20INTEGER\x20','\x20created_f','get',',\x20saved_at','\x20TEXT,\x0a\x20\x20\x20','âœï¸\x20*Edited\x20','99qUHRYK','EMENT,\x0a\x20\x20\x20','DELETE\x20FRO','now','sendMessag','chatId','\x20(edited\x20','number','caption','\x20msg_id\x20TE','push','SELECT\x20val'];_0x598d=function(){return _0x5ad33f;};return _0x598d();}async function sendWithRetry(_0x5a6bac,_0x5c4120){const _0x2fc65e=_0x310f9d,_0xda020d=Number(MAX_SEND_RETRIES||FALLBACKS[_0x2fc65e(0x1ff)+'ETRIES']);let _0xff55e9=0x1ee*-0x10+-0x12be+0x18cf*0x2,_0x2d02fd=Number(INITIAL_BACKOFF_MS||FALLBACKS[_0x2fc65e(0x20b)+_0x2fc65e(0x21d)]);const _0x1e8353=[];if(_0x5c4120)_0x1e8353['push'](_0x5c4120);try{const _0x1f38cf=await db['get'](_0x2fc65e(0x23b)+'ue\x20FROM\x20de'+_0x2fc65e(0x266)+_0x2fc65e(0x1e9)+_0x2fc65e(0x20a)+_0x2fc65e(0x275));if(_0x1f38cf&&_0x1f38cf[_0x2fc65e(0x209)])_0x1e8353[_0x2fc65e(0x23a)](String(_0x1f38cf['value']));}catch{}const _0x95ee21=getBotJid();if(_0x95ee21)_0x1e8353[_0x2fc65e(0x23a)](_0x95ee21);const _0x79777b=Array['from'](new Set(_0x1e8353[_0x2fc65e(0x1e7)](Boolean)));if(_0x79777b[_0x2fc65e(0x217)]===0x7*0x4c7+-0x25ed+0x47c)return warn(_0x2fc65e(0x25b)+_0x2fc65e(0x1cb)+_0x2fc65e(0x1e5)+_0x2fc65e(0x20f)+_0x2fc65e(0x1c7)+_0x2fc65e(0x242)),![];const _0x20c4ad=_0x79777b[-0x902+-0xb*-0x266+-0x1160];while(_0xff55e9<_0xda020d){_0xff55e9++;try{if(!botInstance||typeof botInstance[_0x2fc65e(0x234)+'e']!==_0x2fc65e(0x26a))throw new Error(_0x2fc65e(0x215)+'e.sendMess'+_0x2fc65e(0x228)+'g');return await botInstance[_0x2fc65e(0x234)+'e'](_0x20c4ad,_0x5a6bac),!![];}catch(_0x5635c4){warn(_0x2fc65e(0x25b)+_0x2fc65e(0x1bf)+_0x2fc65e(0x1e4)+_0xff55e9+_0x2fc65e(0x1fd)+(_0x5635c4?.['message']||_0x5635c4));const _0x46caf9=String(_0x5635c4?.[_0x2fc65e(0x226)]||'')[_0x2fc65e(0x241)+'e']()[_0x2fc65e(0x264)](_0x2fc65e(0x1d8))||_0x5635c4?.['status']===-0x3*0x33b+0x1*0x79+0x1*0xae5;if(_0xff55e9>=_0xda020d||!_0x46caf9)return![];await new Promise(_0x11beaa=>setTimeout(_0x11beaa,_0x2d02fd)),_0x2d02fd*=-0x327+-0x194*0x4+0x19*0x61;}}return![];}async function buildAndSendLog({chatJid:_0x595e86,msgId:_0x17ead7,originalText:_0xf33893,newText:_0x1d9c11,senderNumber:_0x5a85a3,editCount:_0x38afcd}){const _0x417321=_0x310f9d;let _0x317488=null;if(isGroupJid(_0x595e86)&&botInstance?.[_0x417321(0x225)]?.[_0x417321(0x1d0)+_0x417321(0x1fb)])try{const _0x4e898d=await botInstance[_0x417321(0x225)]['groupMetad'+_0x417321(0x1fb)](_0x595e86);if(_0x4e898d?.[_0x417321(0x26b)])_0x317488=_0x4e898d[_0x417321(0x26b)];}catch{}const _0x521851=_0x417321(0x203)+_0x417321(0x262),_0xa3d525='ðŸ‘¤\x20*User:*\x20'+'@'+(_0x5a85a3||''),_0x418d05='ðŸ’¬\x20*Chat:*\x20'+(_0x317488?_0x317488+'\x20('+_0x595e86+')':_0x595e86||_0x417321(0x245)),_0xf02d21=_0x417321(0x26e)+_0x417321(0x1de)+(_0x17ead7||_0x417321(0x245)),_0x836c29=typeof _0x38afcd==='number'&&_0x38afcd>-0x148*-0x1a+-0x7*-0x48a+-0x4116?_0x417321(0x236)+_0x38afcd+'\x20'+(_0x38afcd===-0x1893+0xb*0x2e3+0xb*-0xa7?_0x417321(0x1df):_0x417321(0x1d4))+')':'',_0x100207='ðŸ”\x20*Origina'+_0x417321(0x1eb)+_0x836c29+_0x417321(0x227)+(_0xf33893||'[Original\x20'+'message\x20no'+_0x417321(0x212)+']')+_0x417321(0x1f4),_0xd5455=_0x417321(0x22f)+'To:*\x0a```\x0a'+(_0x1d9c11||'')+_0x417321(0x1f4),_0x330fca=[_0x521851,_0xa3d525,_0x418d05,_0xf02d21,'',_0x100207,'',_0xd5455][_0x417321(0x252)]('\x0a');return await sendWithRetry({'text':_0x330fca},null);}async function handleMessageEdit(_0x4fcc5c){const _0x147907=_0x310f9d;try{if(!_0x4fcc5c)return;let _0x124389=[],_0x337884=null;try{const _0x4df952=userjid(_0x4fcc5c);_0x124389=_0x4df952?.[_0x147907(0x1d6)]||[],_0x337884=_0x4df952?.['id']||null;}catch(_0x6739f9){}let _0x2437a9=_0x337884||_0x4fcc5c[_0x147907(0x20e)+_0x147907(0x25e)]||_0x4fcc5c[_0x147907(0x276)]||_0x4fcc5c[_0x147907(0x24b)]||_0x4fcc5c['id']||_0x4fcc5c[_0x147907(0x226)]?.[_0x147907(0x1ed)]?.['id']||null,_0x4503c3=_0x4fcc5c[_0x147907(0x235)]||_0x4fcc5c[_0x147907(0x1c4)]||_0x4fcc5c['message']?.[_0x147907(0x1ed)]?.['remoteJid']||null,_0x13cc6e='';try{if(_0x2437a9){const _0x54b50f=await getSenderForMsg(_0x2437a9);_0x54b50f&&(_0x13cc6e=_0x54b50f['sender_num'+_0x147907(0x1c9)]&&String(_0x54b50f['sender_num'+_0x147907(0x1c9)])[_0x147907(0x271)]()?String(_0x54b50f['sender_num'+_0x147907(0x1c9)])[_0x147907(0x271)]():numberFromRawJid(_0x54b50f[_0x147907(0x269)]));}}catch(_0x12f75e){}if(!_0x13cc6e&&Array[_0x147907(0x1d2)](_0x124389)&&_0x124389['length']){const _0x57d968=[_0x147907(0x23d)+'lt','sender_pn',_0x147907(0x1ee)+_0x147907(0x206),_0x147907(0x1ee)+'t_pn'];let _0x1ed438=null;for(const _0x725d5c of _0x57d968){_0x1ed438=_0x124389[_0x147907(0x249)](_0x197228=>_0x197228[_0x147907(0x1cd)]===_0x725d5c&&typeof _0x197228[_0x147907(0x23c)]===_0x147907(0x222));if(_0x1ed438)break;}if(!_0x1ed438)_0x1ed438=_0x124389[0x1625*0x1+0x2636+-0x1*0x3c5b];_0x1ed438&&_0x1ed438[_0x147907(0x23c)]&&(_0x13cc6e=numberFromRawJid(_0x1ed438['jid']));}const _0x5d085a=extractText(_0x4fcc5c,!![])||'',_0x15ccc5=_0x2437a9?await fetchLatestEditForMsg(_0x2437a9):null,_0x2be814=_0x15ccc5&&typeof _0x15ccc5['text']===_0x147907(0x222)&&_0x15ccc5['text'][_0x147907(0x217)]?_0x15ccc5[_0x147907(0x1f8)]:extractText(_0x4fcc5c,![])||_0x147907(0x21f)+_0x147907(0x23e)+_0x147907(0x212)+']',_0x6d043=_0x2437a9?await countEditsForMsg(_0x2437a9):0x16c0+-0x4*0x87b+0x2cb*0x4,_0x11d70b=await buildAndSendLog({'chatJid':_0x4503c3,'msgId':_0x2437a9,'originalText':_0x2be814,'newText':_0x5d085a,'senderNumber':_0x13cc6e,'editCount':_0x6d043}),_0x342fd8=((()=>{const _0x118575=_0x147907;try{return JSON[_0x118575(0x25f)](_0x4fcc5c)[_0x118575(0x1f6)](0x531+0x2654+-0x2b85,0x1a41d+-0x219c*-0x1+0x1d*-0x22d);}catch{return null;}})());return await insertEditVersion(_0x2437a9,_0x4503c3,_0x5d085a,_0x342fd8,-0x92*0x3a+0x1*0x2633+-0x2*0x28f),_0x11d70b;}catch(_0x4a4186){warn('[EditLogge'+_0x147907(0x25d)+_0x147907(0x24f)+_0x147907(0x213)+(_0x4a4186?.['message']||_0x4a4186));}}export function initialize(_0x2f2ad3){const _0x176beb=_0x310f9d;if(!_0x2f2ad3)throw new Error(_0x176beb(0x1e6)+'r\x20initiali'+_0x176beb(0x1be)+_0x176beb(0x20c));botInstance=_0x2f2ad3,ensureTable()['catch'](_0x3778e5=>{const _0x50a49d=_0x176beb;error(_0x3778e5,'[EditLogge'+_0x50a49d(0x253)+_0x50a49d(0x1fd)+(_0x3778e5?.[_0x50a49d(0x226)]||_0x3778e5));throw _0x3778e5;});try{botInstance['on'](_0x176beb(0x26f)+'it',handleMessageEdit),info(_0x176beb(0x25b)+_0x176beb(0x246)+'d\x20to\x20messa'+_0x176beb(0x204));}catch(_0x3454a4){warn(_0x176beb(0x25b)+_0x176beb(0x1ec)+_0x176beb(0x211)+_0x176beb(0x26f)+_0x176beb(0x1d7)+(_0x3454a4?.[_0x176beb(0x226)]||_0x3454a4));}if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=setInterval(cleanupOldEditsSafe,Number(CLEANUP_INTERVAL_MS||FALLBACKS[_0x176beb(0x1cf)+_0x176beb(0x223)])),info(_0x176beb(0x25b)+'r]\x20initial'+'ized');}export function cleanup(){const _0x9d9b77=_0x310f9d;try{if(botInstance&&typeof botInstance[_0x9d9b77(0x1fc)+_0x9d9b77(0x1dd)]===_0x9d9b77(0x26a))botInstance[_0x9d9b77(0x1fc)+_0x9d9b77(0x1dd)](_0x9d9b77(0x26f)+'it',handleMessageEdit);if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=null;}catch(_0x183eb3){warn(_0x9d9b77(0x25b)+_0x9d9b77(0x1c0)+_0x9d9b77(0x1f2)+(_0x183eb3?.[_0x9d9b77(0x226)]||_0x183eb3));}finally{botInstance=null;}}export default{'name':name,'version':version,'priority':priority,'initialize':initialize,'cleanup':cleanup};