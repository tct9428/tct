const _0x17e5e2=_0x52ad;(function(_0x518f8e,_0x344d03){const _0x1d06d2=_0x52ad,_0x1f875a=_0x518f8e();while(!![]){try{const _0x47661d=parseInt(_0x1d06d2(0x1f2))/(0x1*-0x23d1+0x62+0x2370)*(-parseInt(_0x1d06d2(0x169))/(0xad+0x9*0x241+0x4*-0x53d))+-parseInt(_0x1d06d2(0x1a4))/(-0x163*-0x5+-0x1*-0x62+0x3a7*-0x2)*(parseInt(_0x1d06d2(0xd8))/(0x1f94+0x1*-0x593+-0x19fd))+-parseInt(_0x1d06d2(0x178))/(-0x12db+0x143+0x119d)+-parseInt(_0x1d06d2(0xdc))/(-0x31*-0x49+-0x120f+0x41c)*(-parseInt(_0x1d06d2(0x167))/(0x23e2+-0x22ef+-0xec))+parseInt(_0x1d06d2(0x10d))/(0x118*0xb+0x7d*-0x5+-0x98f*0x1)*(parseInt(_0x1d06d2(0x1bd))/(-0xaa*0x27+0x5*0x247+0xe8c))+-parseInt(_0x1d06d2(0x187))/(-0x8af+-0x1*0x1e2+0xa9b)*(parseInt(_0x1d06d2(0x15b))/(-0x72b+0x17b8+0x1*-0x1082))+parseInt(_0x1d06d2(0x20f))/(0x1*-0x1501+-0x2*0x425+0x25*0xcb);if(_0x47661d===_0x344d03)break;else _0x1f875a['push'](_0x1f875a['shift']());}catch(_0x3de455){_0x1f875a['push'](_0x1f875a['shift']());}}}(_0x4279,0x104e57+-0x15b701+0x10c6a7));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import*as _0x400059 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x17e5e2(0xe6);export const version=_0x17e5e2(0x1c8);export const priority=-0x1*-0x1651+-0x1ca8+0x6d1;export const configKeys=[_0x17e5e2(0x20a)];export const commands=[_0x17e5e2(0xef),'delwlc'];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(0x1d50+-0x3*0xade+0x34f)*(0x2*-0x979+0x2662+-0x4*0x4cd)*(0xeb0+-0x220b+-0x4a7*-0x5),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),profilePicCache=new Map(),PROFILE_PIC_TTL_MS=(0xfc+0x1b69+-0x1c60)*(0x3*0xce3+0x135d*-0x2+-0x1*-0x4d)*(0x38*-0x4c+0x1*0x1ac9+0x1*-0x641),DEDUPE_TTL_MS=(0x22bc+-0xdd1+-0x14cd)*(-0x1*-0x34b+-0x1ba1*-0x1+-0x1b04),processedMessageKeys=new Map();function markProcessed(_0x4ec19e){const _0x3c7ecb=_0x17e5e2;if(!_0x4ec19e)return;if(processedMessageKeys[_0x3c7ecb(0x1ed)](_0x4ec19e))try{clearTimeout(processedMessageKeys[_0x3c7ecb(0x1dc)](_0x4ec19e));}catch(_0x250659){}const _0x45b6d8=setTimeout(()=>processedMessageKeys[_0x3c7ecb(0x204)](_0x4ec19e),DEDUPE_TTL_MS);processedMessageKeys[_0x3c7ecb(0x191)](_0x4ec19e,_0x45b6d8);}function isProcessed(_0x29aea0){const _0x59be29=_0x17e5e2;return _0x29aea0&&processedMessageKeys[_0x59be29(0x1ed)](_0x29aea0);}async function ensureSchema(){const _0x5af150=_0x17e5e2;try{await db[_0x5af150(0x155)](_0x5af150(0x170)+'ATE\x20TABLE\x20'+_0x5af150(0x149)+_0x5af150(0x1a7)+_0x5af150(0x1f9)+_0x5af150(0x206)+'id\x20TEXT\x20PR'+_0x5af150(0xd5)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+_0x5af150(0x127)+'T\x20NOT\x20NULL'+_0x5af150(0x1fd)+_0x5af150(0x210)+_0x5af150(0x103)+_0x5af150(0x217)+_0x5af150(0x1ff)+_0x5af150(0x186)+_0x5af150(0xf5)+'T\x20NULL,\x0a\x20\x20'+_0x5af150(0x17c)+_0x5af150(0x10a)+_0x5af150(0x19a)+_0x5af150(0x129)+_0x5af150(0x108)+_0x5af150(0x126)+_0x5af150(0x103)+_0x5af150(0x109)+_0x5af150(0x1e5)+'\x20');try{await db[_0x5af150(0x155)](_0x5af150(0x185)+'E\x20welcomes'+'\x20ADD\x20COLUM'+'N\x20send_pro'+_0x5af150(0x21c)+'TEGER\x20DEFA'+'ULT\x200;');}catch(_0x11347c){}info(_0x5af150(0x14d)+_0x5af150(0x19b)+'ensured');}catch(_0x7f6787){error(_0x7f6787,_0x5af150(0x14d)+'ensureSche'+_0x5af150(0x100));throw _0x7f6787;}}async function saveWelcomeToDb(_0xcf47c9,_0x20f79c,_0x188f9f=0x2*-0x100f+-0x1833+0x3851,_0x20d8a8=null,_0x4f5da8=0x1dcd+-0x1*0x270d+0x940){const _0x40dfad=_0x17e5e2;try{const _0x35f29a=Math['floor'](Date[_0x40dfad(0x19f)]()/(-0x1*0xa67+0x9c7*0x2+0x4f*-0x11));return await db[_0x40dfad(0x11c)]('INSERT\x20INT'+_0x40dfad(0x159)+_0x40dfad(0x22b)+'d,\x20message'+_0x40dfad(0x15d)+_0x40dfad(0x132)+_0x40dfad(0x14e)+'_profilepi'+_0x40dfad(0x113)+_0x40dfad(0x1f8)+_0x40dfad(0x133)+_0x40dfad(0x1a0)+_0x40dfad(0x23c)+_0x40dfad(0x1d8)+_0x40dfad(0x125)+_0x40dfad(0x146)+'UPDATE\x20SET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+_0x40dfad(0x1cc)+_0x40dfad(0x1a1)+_0x40dfad(0xe4)+_0x40dfad(0xf1)+_0x40dfad(0x18d)+_0x40dfad(0xeb)+_0x40dfad(0x153)+_0x40dfad(0xf1)+_0x40dfad(0xe9)+_0x40dfad(0xdd)+'st_msg_id,'+_0x40dfad(0x1c3)+_0x40dfad(0xf2)+_0x40dfad(0x1d6)+'luded.send'+_0x40dfad(0x10a)+_0x40dfad(0x1e1)+'\x20updated_a'+_0x40dfad(0xe7)+_0x40dfad(0x18c)+_0x40dfad(0x182),[_0xcf47c9,String(_0x20f79c||''),Number(_0x188f9f||0xebe+0x3*-0x311+0x21*-0x2b),_0x20d8a8||null,Number(_0x4f5da8||0x10a6*-0x1+-0x1*-0x478+0xc2e),_0x35f29a]),info('[welcome]\x20'+_0x40dfad(0x138)+_0x40dfad(0x143)+_0xcf47c9+('\x20(profilep'+_0x40dfad(0x14b))+_0x4f5da8+')'),!![];}catch(_0x4e921e){return warn(_0x40dfad(0x14d)+_0x40dfad(0x22a)+_0x40dfad(0x224)+_0x40dfad(0x192)+_0xcf47c9+':\x20'+(_0x4e921e?.[_0x40dfad(0x161)]||_0x4e921e)),![];}}async function deleteWelcomeFromDb(_0x271607){const _0xda6211=_0x17e5e2;try{const _0x5db2d0=await db[_0xda6211(0x11c)](_0xda6211(0x225)+_0xda6211(0x10e)+_0xda6211(0xec)+_0xda6211(0x23e),[_0x271607]);return info(_0xda6211(0x14d)+'deleted\x20we'+_0xda6211(0x13c)+_0x271607),_0x5db2d0?.[_0xda6211(0xde)]||0x260*-0x4+-0x1*0x2476+0x2df6;}catch(_0x5ba376){return warn(_0xda6211(0x14d)+_0xda6211(0x1e4)+_0xda6211(0x104)+'failed\x20for'+'\x20'+_0x271607+':\x20'+(_0x5ba376?.[_0xda6211(0x161)]||_0x5ba376)),-0xd45+-0x14b7+0x21fc;}}async function getWelcomeFromDb(_0x420172){const _0x17906f=_0x17e5e2;try{const _0x2b8ad0=await db[_0x17906f(0x1dc)](_0x17906f(0x1a9)+_0x17906f(0x1ae)+'_size,\x20las'+_0x17906f(0x1b1)+_0x17906f(0x1b3)+'lepic,\x20upd'+_0x17906f(0x11f)+_0x17906f(0x12e)+_0x17906f(0x1e8)+'oup_jid\x20=\x20'+'?',[_0x420172]);return _0x2b8ad0||null;}catch(_0x579a3e){return warn('[welcome]\x20'+_0x17906f(0x17b)+_0x17906f(0x1d5)+_0x17906f(0x1f1)+_0x420172+':\x20'+(_0x579a3e?.[_0x17906f(0x161)]||_0x579a3e)),null;}}async function updateLastMsgIdInDb(_0x2634e1,_0x506358){const _0x313221=_0x17e5e2;try{const _0x5086b9=Math['floor'](Date['now']()/(-0x24a+0x1d6a+0x2e7*-0x8));return await db[_0x313221(0x11c)](_0x313221(0x1a6)+_0x313221(0x140)+_0x313221(0x106)+_0x313221(0x1ea)+_0x313221(0x1e3)+_0x313221(0x13a)+_0x313221(0x1da)+'?',[_0x506358||null,_0x5086b9,_0x2634e1]),!![];}catch(_0x38f8fd){return warn(_0x313221(0x14d)+_0x313221(0x121)+_0x313221(0x214)+_0x313221(0x105)+'\x20'+_0x2634e1+':\x20'+(_0x38f8fd?.[_0x313221(0x161)]||_0x38f8fd)),![];}}function tryBuildSendApiFromBot(_0x23381a){const _0xb91710=_0x17e5e2;if(!_0x23381a)return null;if(typeof _0x23381a[_0xb91710(0x151)+'e']===_0xb91710(0x144))return async(_0x413995,_0x5f1553)=>_0x23381a[_0xb91710(0x151)+'e'](_0x413995,_0x5f1553);if(_0x23381a[_0xb91710(0x14f)]&&typeof _0x23381a[_0xb91710(0x14f)][_0xb91710(0x151)+'e']===_0xb91710(0x144))return async(_0x1d6140,_0xc29f37)=>_0x23381a[_0xb91710(0x14f)][_0xb91710(0x151)+'e'](_0x1d6140,_0xc29f37);return null;}function setupSendApi(_0x5cf443){botRef=_0x5cf443,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x439db1,_0x2b021a,_0x1d6639=[]){const _0x3644cc=_0x17e5e2;try{if(!_0x439db1||!_0x2b021a)return null;const _0x175649=typeof _0x2b021a==='string'?{'text':String(_0x2b021a)}:_0x2b021a;if(Array[_0x3644cc(0x107)](_0x1d6639)&&_0x1d6639[_0x3644cc(0x220)])_0x175649['mentions']=_0x1d6639;if(sendApi)try{const _0x2da51d=await sendApi(_0x439db1,_0x175649);return _0x2da51d;}catch(_0x3d7d40){return warn(_0x3644cc(0x14d)+_0x3644cc(0x15a)+'iled:\x20'+(_0x3d7d40?.[_0x3644cc(0x161)]||_0x3d7d40)),null;}else try{if(botRef&&typeof botRef[_0x3644cc(0x151)+'e']===_0x3644cc(0x144))return await botRef['sendMessag'+'e'](_0x439db1,_0x175649);else return botRef&&botRef[_0x3644cc(0x14f)]&&typeof botRef[_0x3644cc(0x14f)]['sendMessag'+'e']==='function'?await botRef[_0x3644cc(0x14f)][_0x3644cc(0x151)+'e'](_0x439db1,_0x175649):(warn(_0x3644cc(0x14d)+_0x3644cc(0x179)+_0x3644cc(0x17a)+'lable\x20for\x20'+_0x439db1),null);}catch(_0x52075d){return warn('[welcome]\x20'+_0x3644cc(0x1fa)+_0x3644cc(0x1ee)+':\x20'+(_0x52075d?.[_0x3644cc(0x161)]||_0x52075d)),null;}}catch(_0x198a89){return warn(_0x3644cc(0x14d)+_0x3644cc(0x13d)+_0x3644cc(0x237)+_0x3644cc(0x10f)+(_0x198a89?.[_0x3644cc(0x161)]||_0x198a89)),null;}}function extractTextFromMessage(_0x1917d2){const _0x8db13d=_0x17e5e2;if(!_0x1917d2||!_0x1917d2['message'])return'';const _0x5f1880=_0x1917d2[_0x8db13d(0x161)];if(_0x5f1880[_0x8db13d(0x1b9)+'on'])return _0x5f1880[_0x8db13d(0x1b9)+'on'];if(_0x5f1880[_0x8db13d(0x1a3)+_0x8db13d(0x180)]?.[_0x8db13d(0x1c9)])return _0x5f1880[_0x8db13d(0x1a3)+_0x8db13d(0x180)][_0x8db13d(0x1c9)];if(_0x5f1880[_0x8db13d(0x1b0)+'ge']?.['caption'])return _0x5f1880[_0x8db13d(0x1b0)+'ge'][_0x8db13d(0x16f)];if(_0x5f1880[_0x8db13d(0x1a8)+'ge']?.['caption'])return _0x5f1880[_0x8db13d(0x1a8)+'ge'][_0x8db13d(0x16f)];if(_0x5f1880[_0x8db13d(0x1d1)+_0x8db13d(0xf3)+'ge']?.[_0x8db13d(0xf9)+_0x8db13d(0x1f3)])return _0x5f1880['buttonsRes'+_0x8db13d(0xf3)+'ge'][_0x8db13d(0xf9)+_0x8db13d(0x1f3)];if(_0x5f1880['listRespon'+_0x8db13d(0x216)]?.[_0x8db13d(0x154)+_0x8db13d(0x135)]?.['selectedRo'+_0x8db13d(0x128)])return _0x5f1880[_0x8db13d(0x21d)+'seMessage'][_0x8db13d(0x154)+'ctReply']['selectedRo'+_0x8db13d(0x128)];return'';}async function resolveDefaultsToChatJids(_0x11e6f8){const _0x1590f3=_0x17e5e2;try{let _0x32ab7c;try{_0x32ab7c=await getDefault(_0x11e6f8)[_0x1590f3(0x12f)](()=>null);}catch(_0x178bee){_0x32ab7c=null;}if(!_0x32ab7c||Array[_0x1590f3(0x107)](_0x32ab7c)&&_0x32ab7c['length']===0x3fa+0x195d+-0x1d57)return[];const _0x334c59=Array[_0x1590f3(0x107)](_0x32ab7c)?_0x32ab7c:[_0x32ab7c],_0x4505c5=[];for(const _0x85c28b of _0x334c59){try{const _0x4c5535=await getConnection(_0x85c28b)[_0x1590f3(0x12f)](()=>null);if(Array[_0x1590f3(0x107)](_0x4c5535))_0x4505c5['push'](..._0x4c5535);else{if(_0x4c5535)_0x4505c5[_0x1590f3(0x218)](String(_0x4c5535));}}catch(_0x3b27bd){warn(_0x1590f3(0x14d)+_0x1590f3(0x115)+_0x1590f3(0xd7)+'\x20for\x20defau'+_0x1590f3(0x209)+_0x85c28b+':\x20'+(_0x3b27bd?.[_0x1590f3(0x161)]||_0x3b27bd));}}const _0x18cfeb=new Set(),_0x3645e8=[];for(const _0x218bc0 of _0x4505c5){const _0x54fb98=String(_0x218bc0||'')[_0x1590f3(0x1e0)]();if(!_0x54fb98)continue;!_0x18cfeb[_0x1590f3(0x1ed)](_0x54fb98)&&(_0x18cfeb['add'](_0x54fb98),_0x3645e8[_0x1590f3(0x218)](_0x54fb98));}return _0x3645e8;}catch(_0x4baf3){return warn('[welcome]\x20'+_0x1590f3(0x234)+_0x1590f3(0x1d4)+'tJids\x20fail'+'ed:\x20'+(_0x4baf3?.[_0x1590f3(0x161)]||_0x4baf3)),[];}}async function fetchGroupMetadata(_0x165faa){const _0x11a6be=_0x17e5e2;if(!botRef)return null;try{if(botRef[_0x11a6be(0x14f)]&&typeof botRef[_0x11a6be(0x14f)][_0x11a6be(0xfb)+'ata']===_0x11a6be(0x144))return await botRef[_0x11a6be(0x14f)][_0x11a6be(0xfb)+'ata'](_0x165faa);if(typeof botRef[_0x11a6be(0xfb)+_0x11a6be(0xdf)]===_0x11a6be(0x144))return await botRef[_0x11a6be(0xfb)+_0x11a6be(0xdf)](_0x165faa);return null;}catch(_0x59acc1){return warn(_0x11a6be(0x14d)+_0x11a6be(0x228)+_0x11a6be(0x1e7)+'ailed:\x20'+(_0x59acc1?.['message']||_0x59acc1)),null;}}async function fetchProfilePictureUrl(_0x287e04){const _0x3740ac=_0x17e5e2;if(!botRef||!_0x287e04)return null;try{let _0x30e0d0=null;if(botRef[_0x3740ac(0x14f)]&&typeof botRef['sock']['profilePic'+_0x3740ac(0x15f)]===_0x3740ac(0x144))_0x30e0d0=await botRef[_0x3740ac(0x14f)]['profilePic'+'tureUrl'](_0x287e04,_0x3740ac(0x22d))[_0x3740ac(0x12f)](()=>null);else typeof botRef['profilePic'+_0x3740ac(0x15f)]==='function'&&(_0x30e0d0=await botRef['profilePic'+_0x3740ac(0x15f)](_0x287e04,_0x3740ac(0x22d))[_0x3740ac(0x12f)](()=>null));return _0x30e0d0;}catch(_0x3ce3e1){return warn('[welcome]\x20'+'fetchProfi'+_0x3740ac(0x141)+_0x3740ac(0x18f)+_0x287e04+'\x20failed:\x20'+(_0x3ce3e1?.[_0x3740ac(0x161)]||_0x3ce3e1)),null;}}function _0x52ad(_0x33af6e,_0x1b9ef0){const _0x368f35=_0x4279();return _0x52ad=function(_0x551fbb,_0x4aed81){_0x551fbb=_0x551fbb-(0x26*-0x3+0x266a+-0x2525);let _0xcb5ff0=_0x368f35[_0x551fbb];return _0xcb5ff0;},_0x52ad(_0x33af6e,_0x1b9ef0);}function getCachedProfilePic(_0x63bb42){const _0x322ca1=_0x17e5e2,_0x28f3ba=profilePicCache[_0x322ca1(0x1dc)](_0x63bb42);if(!_0x28f3ba)return null;if(Date['now']()>_0x28f3ba[_0x322ca1(0x12a)])return profilePicCache[_0x322ca1(0x204)](_0x63bb42),null;return _0x28f3ba['url'];}function setCachedProfilePic(_0x166dc3,_0x2cda5f){const _0xa91cdb=_0x17e5e2;if(!_0x166dc3)return;profilePicCache[_0xa91cdb(0x191)](_0x166dc3,{'url':_0x2cda5f||null,'expiresAt':Date[_0xa91cdb(0x19f)]()+PROFILE_PIC_TTL_MS});}function getCachedGroupSize(_0x2a289c){const _0x3f2dfb=_0x17e5e2,_0x1f145f=groupSizeCache[_0x3f2dfb(0x1dc)](_0x2a289c);if(!_0x1f145f)return null;if(Date[_0x3f2dfb(0x19f)]()>_0x1f145f[_0x3f2dfb(0x12a)])return groupSizeCache[_0x3f2dfb(0x204)](_0x2a289c),null;return _0x1f145f[_0x3f2dfb(0x1a2)];}function setCachedGroupSize(_0x4bf064,_0x2d5f27){const _0x44e3b0=_0x17e5e2;groupSizeCache[_0x44e3b0(0x191)](_0x4bf064,{'size':Number(_0x2d5f27||0x818+0x1c*-0x4e+-0x7*-0x10),'expiresAt':Date[_0x44e3b0(0x19f)]()+(CFG[_0x44e3b0(0x120)+_0x44e3b0(0x189)+_0x44e3b0(0xdb)]||DEFAULTS[_0x44e3b0(0x120)+_0x44e3b0(0x189)+_0x44e3b0(0xdb)])});}async function resolveDisplayName(_0x21125b){const _0x11bd79=_0x17e5e2;try{if(!botRef||!_0x21125b)return _0x21125b?.['split']?.('@')?.[0x207b+-0x1aeb+0x2c8*-0x2]??_0x21125b;try{if(typeof botRef[_0x11bd79(0x23d)]===_0x11bd79(0x144)){const _0xc8ba96=await botRef[_0x11bd79(0x23d)](_0x21125b);if(Array[_0x11bd79(0x107)](_0xc8ba96)&&_0xc8ba96['length']>0xb*0x8d+0x15d*0x5+-0xce0){const _0x102f62=_0xc8ba96[0x2*0x5b9+0x7*-0x1d+-0xaa7];if(_0x102f62&&(_0x102f62[_0x11bd79(0x175)]||_0x102f62[_0x11bd79(0xd9)]||_0x102f62[_0x11bd79(0x172)]))return _0x102f62[_0x11bd79(0x175)]||_0x102f62[_0x11bd79(0xd9)]||_0x102f62['name'];}}if(botRef[_0x11bd79(0x14f)]&&typeof botRef[_0x11bd79(0x14f)]['onWhatsApp']===_0x11bd79(0x144)){const _0x10df71=await botRef['sock'][_0x11bd79(0x23d)](_0x21125b);if(Array[_0x11bd79(0x107)](_0x10df71)&&_0x10df71['length']>0x86a+0x1*-0x449+-0x421){const _0x4ddc27=_0x10df71[0xe8d*0x1+-0x595*0x1+-0x11f*0x8];if(_0x4ddc27&&(_0x4ddc27['notify']||_0x4ddc27['vname']||_0x4ddc27['name']))return _0x4ddc27[_0x11bd79(0x175)]||_0x4ddc27[_0x11bd79(0xd9)]||_0x4ddc27[_0x11bd79(0x172)];}}}catch(_0x3021f9){}return String(_0x21125b)['split']('@')[0xd*0x4f+-0x5f7*-0x3+-0xaf4*0x2]||_0x21125b;}catch(_0x22e658){return _0x21125b?.['split']?.('@')?.[-0x957+0x8b*-0x29+0x1f9a]??_0x21125b;}}async function findStoredMatchFromFindings(_0x37ebb8=[]){const _0x227886=_0x17e5e2;try{const _0x58a4a4=await listSudo();if(!Array['isArray'](_0x58a4a4)||_0x58a4a4[_0x227886(0x220)]===0xf*0x13+0x2*-0x353+0xd*0x6d)return null;const _0x3a2c4e=new Set(_0x58a4a4['map'](String));for(const _0x29d766 of _0x37ebb8||[]){if(!_0x29d766||typeof _0x29d766['jid']!==_0x227886(0x1ad))continue;const _0x34f29e=normalizeToJid(_0x29d766[_0x227886(0x163)]);if(_0x34f29e&&_0x3a2c4e[_0x227886(0x1ed)](_0x34f29e))return _0x34f29e;if(_0x3a2c4e['has'](_0x29d766[_0x227886(0x163)]))return _0x29d766[_0x227886(0x163)];const _0x3dd78d=String(_0x29d766[_0x227886(0x163)])['split']('@')[-0x6f4+-0x1b97+0x25*0xef][_0x227886(0x17f)](':')[0x62*0x3+0x2452+-0x2578];if(_0x3dd78d)for(const _0x3a554c of _0x58a4a4){const _0x37f3f6=String(_0x3a554c)[_0x227886(0x17f)]('@')[0x1*0x991+0x4*-0x448+0x5*0x183];if(_0x37f3f6&&_0x37f3f6===_0x3dd78d)return _0x3a554c;}}return null;}catch(_0x1b9c00){return warn(_0x227886(0x14d)+_0x227886(0xea)+_0x227886(0x15c)+_0x227886(0x112)+_0x227886(0xf6)+(_0x1b9c00?.[_0x227886(0x161)]||_0x1b9c00)),null;}}const WELCOME_MEDIA_BASE='https://i-'+_0x17e5e2(0x196)+_0x17e5e2(0x1dd),WELCOME_MAX=-0xf*-0x221+0x65*-0x40+0x17*-0x4a;function _0x4279(){const _0x492311=['notify','registered','ome\x20','6460070bCmisH','no\x20send\x20su','rface\x20avai','getWelcome','\x20\x20\x20\x20\x20\x20send','floor',',\x20using\x20fa','split','xtMessage','come\x20resul','_at;','\x20unless\x20th','participan','ALTER\x20TABL','t_msg_id\x20T','10BYPSDo','toLowerCas','_CACHE_TTL','stopped\x20ma','come\x20','ed.updated','size\x20=\x20exc','il.getUniq','rl\x20for\x20','group-part','set','ed\x20for\x20','deleted\x20pr','isCommand','type','tct.com/me','ndler\x20erro','delwlc','y\x20to\x20have\x20','c\x20INTEGER\x20','DB\x20schema\x20','clear','ed_at\x20=\x20?\x20','@g.us','now','?,\x20?,\x20?,\x20?','xcluded.me','size','extendedTe','10512neKEap','\x20line\x20\x22pro','UPDATE\x20wel','STS\x20welcom','videoMessa','SELECT\x20mes','boolean','istener\x20fo','me\x20for\x20','string','sage,\x20last','to\x20the\x20cur','imageMessa','t_msg_id,\x20','ting\x20for\x20','send_profi','esent','Unknown\x20gp','subject','eToMember\x20','ids','conversati','deletion\x20o','r\x20ensure\x20y','onMessage\x20','393273Oeitzy','\x20first.','last_size','failed:\x20','values','wlc\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','deleting\x20f','filepic\x20on','ID.','\x20connectio','3.5.1','text','Usage\x20(gro','config\x20loa','essage\x20=\x20e','ailed.','register\x20m','figured.','s\x20a\x20full\x20J','buttonsRes','Saved\x20welc','solution\x20f','aultsToCha','FromDb\x20fai','epic\x20=\x20exc','ur\x20default','\x20\x20\x20\x20ON\x20CON','Deleted\x20we','oup_jid\x20=\x20','anaged\x20lis','get','dia/',':\x20\x22','you!','trim','c,\x0a\x20\x20\x20\x20\x20\x20\x20','\x20managed\x20l','ated_at\x20=\x20','deleteWelc','\x20\x20\x20\x20);\x0a\x20\x20\x20','et\x20default','Metadata\x20f','s\x20WHERE\x20gr','t\x20groupsUt','d\x20=\x20?,\x20upd','initialize','vious\x20welc','has','end\x20failed','r\x20group-pa','<your\x20mult','led\x20for\x20','15ItrhOU','ttonId','\x20to\x20add\x20al','\x20message\x20f','bodyLines','map','_at)\x0a\x20\x20\x20\x20\x20','es\x20(\x0a\x20\x20\x20\x20\x20','fallback\x20s','flushGroup','\x20item\x20fail',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','WHATSAPP_G','\x20\x20\x20\x20\x20\x20\x20las','naged\x20list','error:\x20','Failed\x20to\x20','come\x20messa','delete','dmin-only)','\x20\x20\x20group_j','come\x20(sock','ler\x20error:','lt\x20name\x20','WELCOME','lts.','max','welcome.in','all','22619916ipJPqH','last_size\x20','1203632853','ed\x20keys:\x20','onfig\x20appl','MsgIdInDb\x20','pdate','seMessage','FAULT\x200,\x0a\x20','push','ts:\x0a','\x20in\x20','sent\x20welco','filepic\x20IN','listRespon','ome\x20result','includes','length','rent\x20group','ilepic\x20off','stration\x20f','eToDb\x20fail','DELETE\x20FRO','d\x20failed,\x20','DEBOUNCE_M','fetchGroup','Error\x20savi','saveWelcom','\x20(group_ji','\x20missing\x20f','image','cleanup\x20er','setdefault','AULT\x20conne','in\x20your\x20de','match','o\x20your\x20DEF','resolveDef','join','\x22\x20to\x20toggl','allback\x20fa','oUserJid','add','ROUP_MAX','save\x20welco',',\x20?,\x20?)\x0a\x20\x20','onWhatsApp','up_jid\x20=\x20?','from','r:\x20','IMARY\x20KEY,','\x22.\x20Use\x20gro','ion\x20failed','444wGqrrH','vname','\x20available','_MS','24OhJbRu','xcluded.la','changes','ata','tdefault\x20o','normalizeT','number','Hi\x20','ssage,\x0a\x20\x20\x20','faults.\x20Se','welcome','t\x20=\x20exclud','for\x20','msg_id\x20=\x20e','findStored','luded.last','\x20WHERE\x20gro','random','getUniqueJ','wlc','groupId','\x20\x20\x20\x20\x20last_','end_profil','ponseMessa','i-line\x20wel','EXT\x20DEFAUL','ror:\x20','Error\x20dele','\x20disabled\x20','selectedBu','equires\x20bo','groupMetad','resolveNam','WelcomeBot','p_jid\x20=\x20?','olution\x20fa','ma\x20failed','hotReloadC','at\x20group\x20i','INTEGER\x20DE','omeFromDb\x20','failed\x20for','last_msg_i','isArray','\x0a\x20\x20\x20\x20\x20\x20\x20\x20u','FAULT\x200\x0a\x20\x20','_profilepi','n(s).\x20Use\x20','off','32JAldXv','M\x20welcomes','iled:\x20','Delete\x20wel','tener:\x20','indings\x20er','c,\x20updated','itialize\x20r','getConnect','irstLine','ults','eck\x20failed','groupJid','gpUpdateHa','\x20error:\x20','run','t\x20instance','gp:all\x20res','ated_at\x20FR','GROUP_SIZE','updateLast','\x20(profilep','ge>\x0a','ng\x20for\x20','FLICT(grou','pdated_at\x20','essage\x20TEX','wId','DEFAULT\x200,','expiresAt','ener\x20if\x20pr','action','ups\x20helper','OM\x20welcome','catch','profilepic','.update','e,\x20last_ms','\x20\x20VALUES\x20(','t\x20with\x20/se','ctReply','slice','invite','saved\x20welc','ailed:\x20','?\x20WHERE\x20gr','rticipants','lcome\x20for\x20','sendApiOrF','\x20found\x20for','gp:\x20all\x20re','comes\x20SET\x20','lePictureU','We\x27re\x20happ','ome\x20for\x20','function','onfig\x20regi','p_jid)\x20DO\x20','our\x20defaul','up-only,\x20a','IF\x20NOT\x20EXI','ABLED','ic=','or\x20','[welcome]\x20','g_id,\x20send','sock','icipants.u','sendMessag','evious\x20wel','_size,\x0a\x20\x20\x20','singleSele','exec','sanitizedF','DEFAULT_EN','isInteger','O\x20welcomes','sendApi\x20fa','8052121UjPPFs','MatchFromF',',\x20last_siz','>\x20👤YOU\x27RE\x20','tureUrl','f\x20previous','message','\x20failed:\x20','jid','ts_added','.jpg','lepic','2574775GtHema','Optionally','49754cqICLQ','remoteJid','ied.\x20Chang','llback\x20ima','key','No\x20target\x20','caption','\x0a\x20\x20\x20\x20\x20\x20CRE','replace','name','\x20include\x20a','failed\x20to\x20'];_0x4279=function(){return _0x492311;};return _0x4279();}function pickRandomCardImage(){const _0x352849=_0x17e5e2,_0x25c4aa=Math[_0x352849(0x17d)](Math[_0x352849(0xed)]()*WELCOME_MAX)+(0xfc+0xf12+-0x100d);return WELCOME_MEDIA_BASE+_0x352849(0xe6)+_0x25c4aa+_0x352849(0x165);}async function sendWelcomeToMember(_0x20ad18,_0x43e847){const _0x41502c=_0x17e5e2;try{const _0x9e3b02=await getWelcomeFromDb(_0x20ad18);if(!_0x9e3b02||!_0x9e3b02[_0x41502c(0x161)])return![];let _0x5c2d03=await fetchGroupMetadata(_0x20ad18),_0x1bac39=_0x5c2d03&&_0x5c2d03[_0x41502c(0x1b6)]?_0x5c2d03[_0x41502c(0x1b6)]:_0x20ad18,_0x266a13=getCachedGroupSize(_0x20ad18);if(!_0x266a13||_0x266a13<=0x11e+-0x1b2*-0x6+-0xb4a){if(_0x5c2d03&&Array['isArray'](_0x5c2d03[_0x41502c(0x184)+'ts']))_0x266a13=_0x5c2d03[_0x41502c(0x184)+'ts'][_0x41502c(0x220)];else{if(_0x5c2d03&&typeof _0x5c2d03['size']==='number')_0x266a13=_0x5c2d03[_0x41502c(0x1a2)];else{_0x5c2d03=_0x5c2d03||await fetchGroupMetadata(_0x20ad18);if(_0x5c2d03&&Array[_0x41502c(0x107)](_0x5c2d03[_0x41502c(0x184)+'ts']))_0x266a13=_0x5c2d03['participan'+'ts'][_0x41502c(0x220)];}}if(!_0x266a13||_0x266a13<=0x610*-0x2+0x90b+0x315)_0x266a13=Number(_0x9e3b02[_0x41502c(0x1bf)]||0x3a*-0x6b+-0x316*0x3+-0x4*-0x860);else setCachedGroupSize(_0x20ad18,_0x266a13);}const _0x2c4347=CFG[_0x41502c(0x1fe)+_0x41502c(0x23a)]||DEFAULTS[_0x41502c(0x1fe)+'ROUP_MAX'],_0x289f1f=await resolveDisplayName(_0x43e847),_0xac3fed='@'+String(_0x289f1f)['replace'](/\s+/g,'\x20'),_0x3eb0d7=[];_0x3eb0d7[_0x41502c(0x218)](_0x41502c(0xe3)+_0xac3fed+('\x20Welcome\x20t'+'o\x20the\x20')+_0x1bac39),_0x3eb0d7[_0x41502c(0x218)](String(_0x9e3b02[_0x41502c(0x161)])[_0x41502c(0x1e0)]()),_0x3eb0d7[_0x41502c(0x218)](_0x41502c(0x15e)+'MEMBER:\x20\x20'+_0x266a13+'/'+_0x2c4347);const _0x3a5f8d=_0x3eb0d7[_0x41502c(0x235)]('\x0a\x0a'),_0xefd70b=[_0x43e847],_0x383554=_0x9e3b02[_0x41502c(0x106)+'d']||null,_0x24b529=Number(_0x9e3b02[_0x41502c(0x1b3)+_0x41502c(0x166)]||0x7f*0x16+-0x1f0c+0x1422)===-0x86*0x37+0x2*-0x7d6+-0x2c77*-0x1;let _0x678a2e=null;_0x24b529&&(_0x678a2e=getCachedProfilePic(_0x43e847),!_0x678a2e&&(_0x678a2e=await fetchProfilePictureUrl(_0x43e847),setCachedProfilePic(_0x43e847,_0x678a2e)));!_0x678a2e&&(_0x678a2e=pickRandomCardImage(),!_0x24b529?info('[welcome]\x20'+_0x41502c(0x130)+_0x41502c(0xf8)+_0x41502c(0xe8)+_0x20ad18+(_0x41502c(0x17e)+_0x41502c(0x16c)+'ge\x20for\x20')+_0x43e847):info(_0x41502c(0x14d)+_0x41502c(0x130)+_0x41502c(0x22c)+'or\x20'+_0x43e847+(_0x41502c(0x17e)+_0x41502c(0x16c)+'ge.')));const _0xca5fe={'title':'Welcome\x20to'+'\x20'+_0x1bac39,'body':_0x41502c(0x142)+_0x41502c(0x199)+_0x41502c(0x1df),'thumbnailUrl':_0x678a2e,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x4c6cf7=await sendApiOrFallback(_0x20ad18,{'text':_0x3a5f8d,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x41502c(0x211)+'88090068@n'+'ewsletter','newsletterName':_0x41502c(0xfd),'serverMessageId':0x7b},'externalAdReply':_0xca5fe}},_0xefd70b);let _0x37120=null;try{_0x4c6cf7&&(_0x37120=_0x4c6cf7?.[_0x41502c(0x16d)]&&_0x4c6cf7['key']['id']?_0x4c6cf7[_0x41502c(0x16d)]['id']:_0x4c6cf7?.[_0x41502c(0x161)]&&_0x4c6cf7[_0x41502c(0x161)]?.['id']?_0x4c6cf7[_0x41502c(0x161)]['id']:_0x4c6cf7?.['id']?_0x4c6cf7['id']:null);}catch(_0x3bf177){}if(_0x383554&&_0x383554!==_0x37120)try{if(botRef&&typeof botRef[_0x41502c(0x151)+'e']===_0x41502c(0x144))try{await botRef[_0x41502c(0x151)+'e'](_0x20ad18,{'delete':{'id':_0x383554,'remoteJid':_0x20ad18,'fromMe':!![]}}),info('[welcome]\x20'+_0x41502c(0x193)+_0x41502c(0x152)+_0x41502c(0x18b)+_0x383554+_0x41502c(0x21a)+_0x20ad18);}catch(_0x5f3949){try{await botRef[_0x41502c(0x14f)]?.[_0x41502c(0x151)+'e']?.(_0x20ad18,{'delete':{'id':_0x383554,'remoteJid':_0x20ad18,'fromMe':!![]}}),info(_0x41502c(0x14d)+_0x41502c(0x193)+_0x41502c(0x152)+_0x41502c(0x207)+')\x20'+_0x383554+_0x41502c(0x21a)+_0x20ad18);}catch(_0x150034){warn(_0x41502c(0x14d)+_0x41502c(0x174)+'delete\x20pre'+_0x41502c(0x1ec)+_0x41502c(0x177)+_0x383554+_0x41502c(0x21a)+_0x20ad18+':\x20'+(_0x150034?.[_0x41502c(0x161)]||_0x150034));}}}catch(_0x55f7d5){warn(_0x41502c(0x14d)+_0x41502c(0x1ba)+_0x41502c(0x160)+_0x41502c(0x1f5)+_0x41502c(0x139)+(_0x55f7d5?.[_0x41502c(0x161)]||_0x55f7d5));}try{_0x37120?await updateLastMsgIdInDb(_0x20ad18,_0x37120):await updateLastMsgIdInDb(_0x20ad18,null);}catch(_0x3533aa){}const _0x33c2c6=Number(_0x9e3b02[_0x41502c(0x1bf)]||-0xcc3+0x1a9b+0x4*-0x376);if(_0x266a13&&_0x266a13!==_0x33c2c6)try{await db['run'](_0x41502c(0x1a6)+_0x41502c(0x140)+'last_size\x20'+'=\x20?,\x20updat'+_0x41502c(0x19d)+'WHERE\x20grou'+_0x41502c(0xfe),[_0x266a13,Math[_0x41502c(0x17d)](Date[_0x41502c(0x19f)]()/(-0x1b65+-0x1*0x10c1+-0x1807*-0x2)),_0x20ad18]),setCachedGroupSize(_0x20ad18,_0x266a13);}catch(_0x63192f){}return info(_0x41502c(0x14d)+_0x41502c(0x21b)+'me\x20to\x20'+_0x43e847+_0x41502c(0x21a)+_0x20ad18),!![];}catch(_0x5ed398){return warn(_0x41502c(0x14d)+'sendWelcom'+_0x41502c(0x1b7)+_0x41502c(0x1c0)+(_0x5ed398?.[_0x41502c(0x161)]||_0x5ed398)),![];}}async function flushGroup(_0x29eefc){const _0x46774e=_0x17e5e2;try{const _0xf7c418=groupQueues[_0x46774e(0x1dc)](_0x29eefc);if(!_0xf7c418||_0xf7c418[_0x46774e(0x1a2)]===-0x239a+-0x2*-0x1236+-0xd2){if(groupTimers[_0x46774e(0x1ed)](_0x29eefc)){try{clearTimeout(groupTimers[_0x46774e(0x1dc)](_0x29eefc));}catch(_0x53c462){}groupTimers['delete'](_0x29eefc);}groupQueues['delete'](_0x29eefc);return;}const _0xd132cd=Array[_0x46774e(0xd3)](_0xf7c418);for(const _0x478421 of _0xd132cd){try{await sendWelcomeToMember(_0x29eefc,_0x478421)[_0x46774e(0x12f)](()=>{});}catch(_0x471b35){warn(_0x46774e(0x14d)+'flushGroup'+_0x46774e(0x1fc)+'ed:\x20'+(_0x471b35?.['message']||_0x471b35));}}}catch(_0x542856){warn(_0x46774e(0x14d)+_0x46774e(0x1fb)+_0x46774e(0x11b)+(_0x542856?.['message']||_0x542856));}finally{if(groupTimers['has'](_0x29eefc)){try{clearTimeout(groupTimers[_0x46774e(0x1dc)](_0x29eefc));}catch(_0x47ad4a){}groupTimers['delete'](_0x29eefc);}groupQueues[_0x46774e(0x204)](_0x29eefc);}}async function gpUpdateHandler(_0x52be08){const _0x312833=_0x17e5e2;try{if(!_0x52be08)return;const _0x4956c3=(_0x52be08[_0x312833(0x12c)]||_0x52be08[_0x312833(0x195)]||'')['toString']()[_0x312833(0x188)+'e']();if(_0x4956c3!==_0x312833(0x239)&&_0x4956c3!==_0x312833(0x137))return;const _0x2799df=_0x52be08['id']||_0x52be08[_0x312833(0xf0)]||_0x52be08['jid']||_0x52be08[_0x312833(0x119)];if(!_0x2799df)return;const _0x516f2d=Array[_0x312833(0x107)](_0x52be08['participan'+'ts'])?_0x52be08[_0x312833(0x184)+'ts']:Array['isArray'](_0x52be08['participan'+'ts_added'])?_0x52be08[_0x312833(0x184)+_0x312833(0x164)]:[];if(!_0x516f2d||_0x516f2d[_0x312833(0x220)]===0x5ab*0x6+-0xbec*-0x3+-0x4e*0xe5)return;let _0x31364c=[];if(_0x516f2d[_0x312833(0x220)]===-0x24f7+-0x4db*0x2+0x2eae)_0x31364c=[_0x516f2d[-0x170e+-0x9*0x8a+0x1be8]];else{const _0x2f1a7c=_0x516f2d[_0x516f2d[_0x312833(0x220)]-(-0x3*-0x955+0xfb*0x1f+-0x3a63)];_0x31364c=[_0x2f1a7c];}if(!groupQueues[_0x312833(0x1ed)](_0x2799df))groupQueues[_0x312833(0x191)](_0x2799df,new Set());const _0x1f2d29=groupQueues[_0x312833(0x1dc)](_0x2799df);for(const _0x2b0262 of _0x31364c)_0x1f2d29[_0x312833(0x239)](_0x2b0262);if(groupTimers[_0x312833(0x1ed)](_0x2799df))try{clearTimeout(groupTimers[_0x312833(0x1dc)](_0x2799df));}catch(_0x1feb03){}const _0x251605=Math[_0x312833(0x20c)](-0x247*-0x8+-0x38*-0x2e+-0x1be4,Number(CFG[_0x312833(0x227)+'S']||DEFAULTS['DEBOUNCE_M'+'S'])),_0xb21c37=setTimeout(()=>{const _0x412513=_0x312833;flushGroup(_0x2799df)['catch'](_0x50b0f5=>warn(_0x412513(0x14d)+_0x412513(0x1fb)+_0x412513(0x162)+(_0x50b0f5?.[_0x412513(0x161)]||_0x50b0f5)));},_0x251605);groupTimers[_0x312833(0x191)](_0x2799df,_0xb21c37);}catch(_0x2cd2fd){warn(_0x312833(0x14d)+_0x312833(0x11a)+_0x312833(0x197)+_0x312833(0xd4)+(_0x2cd2fd?.['message']||_0x2cd2fd));}}export async function initialize(_0x185208){const _0x5d6daf=_0x17e5e2;if(!_0x185208)throw new Error(_0x5d6daf(0x20d)+_0x5d6daf(0x114)+_0x5d6daf(0xfa)+_0x5d6daf(0x11d));botRef=_0x185208,setupSendApi(_0x185208);try{const _0x3a6d30=getConfig()||{},_0x5c0042=_0x3a6d30&&_0x3a6d30[_0x5d6daf(0x20a)]?_0x3a6d30[_0x5d6daf(0x20a)]:{};CFG[_0x5d6daf(0x157)+_0x5d6daf(0x14a)]=typeof _0x5c0042[_0x5d6daf(0x157)+'ABLED']==='boolean'?_0x5c0042[_0x5d6daf(0x157)+_0x5d6daf(0x14a)]:DEFAULTS['DEFAULT_EN'+_0x5d6daf(0x14a)],CFG[_0x5d6daf(0x120)+_0x5d6daf(0x189)+_0x5d6daf(0xdb)]=Number[_0x5d6daf(0x158)](_0x5c0042[_0x5d6daf(0x120)+'_CACHE_TTL'+'_MS'])?_0x5c0042[_0x5d6daf(0x120)+_0x5d6daf(0x189)+_0x5d6daf(0xdb)]:DEFAULTS['GROUP_SIZE'+_0x5d6daf(0x189)+_0x5d6daf(0xdb)],CFG[_0x5d6daf(0x1fe)+'ROUP_MAX']=Number['isInteger'](_0x5c0042[_0x5d6daf(0x1fe)+'ROUP_MAX'])?_0x5c0042[_0x5d6daf(0x1fe)+_0x5d6daf(0x23a)]:DEFAULTS[_0x5d6daf(0x1fe)+_0x5d6daf(0x23a)],CFG[_0x5d6daf(0x227)+'S']=Number[_0x5d6daf(0x158)](_0x5c0042[_0x5d6daf(0x227)+'S'])?_0x5c0042[_0x5d6daf(0x227)+'S']:DEFAULTS[_0x5d6daf(0x227)+'S'];}catch(_0x1f3256){warn('[welcome]\x20'+_0x5d6daf(0x1cb)+_0x5d6daf(0x226)+'using\x20defa'+_0x5d6daf(0x117)),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x4bea7e=[])=>{const _0x3b6399=_0x5d6daf;try{const _0x3f77e1=getConfig()||{},_0x35f269=_0x3f77e1&&_0x3f77e1[_0x3b6399(0x20a)]?_0x3f77e1[_0x3b6399(0x20a)]:{};CFG[_0x3b6399(0x157)+_0x3b6399(0x14a)]=typeof _0x35f269[_0x3b6399(0x157)+_0x3b6399(0x14a)]===_0x3b6399(0x1aa)?_0x35f269['DEFAULT_EN'+_0x3b6399(0x14a)]:DEFAULTS[_0x3b6399(0x157)+_0x3b6399(0x14a)],CFG[_0x3b6399(0x120)+_0x3b6399(0x189)+_0x3b6399(0xdb)]=Number[_0x3b6399(0x158)](_0x35f269['GROUP_SIZE'+_0x3b6399(0x189)+_0x3b6399(0xdb)])?_0x35f269[_0x3b6399(0x120)+_0x3b6399(0x189)+_0x3b6399(0xdb)]:DEFAULTS[_0x3b6399(0x120)+'_CACHE_TTL'+_0x3b6399(0xdb)],CFG['WHATSAPP_G'+_0x3b6399(0x23a)]=Number['isInteger'](_0x35f269[_0x3b6399(0x1fe)+_0x3b6399(0x23a)])?_0x35f269[_0x3b6399(0x1fe)+'ROUP_MAX']:DEFAULTS[_0x3b6399(0x1fe)+_0x3b6399(0x23a)],CFG[_0x3b6399(0x227)+'S']=Number[_0x3b6399(0x158)](_0x35f269[_0x3b6399(0x227)+'S'])?_0x35f269['DEBOUNCE_M'+'S']:DEFAULTS[_0x3b6399(0x227)+'S'],info(_0x3b6399(0x14d)+_0x3b6399(0x101)+_0x3b6399(0x213)+_0x3b6399(0x16b)+_0x3b6399(0x212)+(_0x4bea7e||[])[_0x3b6399(0x235)](',\x20'));}catch(_0x4fe8d6){warn('[welcome]\x20'+_0x3b6399(0x101)+'onfig\x20hand'+_0x3b6399(0x208)+'\x20'+(_0x4fe8d6?.['message']||_0x4fe8d6));}});}catch(_0x21e9b6){warn(_0x5d6daf(0x14d)+_0x5d6daf(0x101)+_0x5d6daf(0x145)+_0x5d6daf(0x223)+'ailed:\x20'+(_0x21e9b6?.[_0x5d6daf(0x161)]||_0x21e9b6));}try{await ensureSchema();try{startManagedListener({'botRef':botRef,'eventName':'group-part'+_0x5d6daf(0x150)+_0x5d6daf(0x215),'handler':gpUpdateHandler,'moduleName':name}),info(_0x5d6daf(0x14d)+_0x5d6daf(0x176)+_0x5d6daf(0x1e2)+_0x5d6daf(0x1ab)+_0x5d6daf(0x1ef)+_0x5d6daf(0x13b)+_0x5d6daf(0x131));}catch(_0x751233){warn('[welcome]\x20'+'failed\x20to\x20'+_0x5d6daf(0x1ce)+_0x5d6daf(0x1db)+_0x5d6daf(0x111)+(_0x751233?.[_0x5d6daf(0x161)]||_0x751233));}info(_0x5d6daf(0x14d)+_0x5d6daf(0x1eb)+'d');}catch(_0x15f640){error(_0x15f640,_0x5d6daf(0x14d)+_0x5d6daf(0x1eb)+'\x20fatal:\x20'+(_0x15f640?.[_0x5d6daf(0x161)]||_0x15f640));throw _0x15f640;}}function extractGpFromText(_0x4011f0){const _0x58e3fa=_0x17e5e2;if(!_0x4011f0)return null;const _0x3077b3=_0x4011f0[_0x58e3fa(0x17f)](/\r?\n/)[_0x58e3fa(0x1f7)](_0x1b09ac=>_0x1b09ac['replace'](/\r/g,''));if(!_0x3077b3[_0x58e3fa(0x220)])return null;let _0x5bb4fb=(_0x3077b3[-0x571+0x1*-0x2363+-0x10c*-0x27]||'')[_0x58e3fa(0x1e0)](),_0x47219f=_0x3077b3[_0x58e3fa(0x136)](0x3b7*0x3+0x253+-0xd77);const _0x2cfac3=_0x5bb4fb[_0x58e3fa(0x232)](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);if(_0x2cfac3){const _0x35eb39=(_0x2cfac3[0x1077+-0xa37+-0x31f*0x2]||'')[_0x58e3fa(0x1e0)]();return{'gp':_0x35eb39,'sanitizedFirstLine':(_0x2cfac3[-0x1640+-0x26f6+-0x3d37*-0x1]||'')[_0x58e3fa(0x1e0)](),'bodyLines':_0x47219f};}let _0x8615ec=-(-0xc95+-0x1825+0x24bb*0x1);for(let _0x46c3f2=_0x47219f['length']-(0x1*0x8c3+0xb62+-0x1424);_0x46c3f2>=-0x1d03+0x19d9+0x1e*0x1b;_0x46c3f2--){if(String(_0x47219f[_0x46c3f2]||'')['trim']()[_0x58e3fa(0x220)]>0x3e2+-0x8e3*0x3+0x16c7){_0x8615ec=_0x46c3f2;break;}}if(_0x8615ec>=-0x2028+-0x23ea+0x4412){const _0x518d16=String(_0x47219f[_0x8615ec]||'')['trim'](),_0x2f21bd=_0x518d16[_0x58e3fa(0x232)](/^gp[:\s]*([^\s,]+)\s*$/i);if(_0x2f21bd){const _0x1a8197=(_0x2f21bd[-0x1*-0x2bd+0x6*0x5bc+-0x2524]||'')['trim']();return _0x47219f['splice'](_0x8615ec,0xfa5+0x2*-0x12bb+0x15d2),{'gp':_0x1a8197,'sanitizedFirstLine':_0x5bb4fb,'bodyLines':_0x47219f};}}return{'gp':null,'sanitizedFirstLine':_0x5bb4fb,'bodyLines':_0x47219f};}export async function onMessage(_0x3c8e63){const _0x183228=_0x17e5e2;try{if(!_0x3c8e63||!_0x3c8e63[_0x183228(0x16d)]||!_0x3c8e63[_0x183228(0x161)])return;const _0x2ba883=String(_0x3c8e63[_0x183228(0x16d)]['remoteJid']||'')+'::'+String(_0x3c8e63['key']['id']||_0x3c8e63[_0x183228(0x16d)][_0x183228(0x184)+'t']||'');if(isProcessed(_0x2ba883))return;markProcessed(_0x2ba883);const _0x378c5f=String(extractTextFromMessage(_0x3c8e63)||'');if(!_0x378c5f[_0x183228(0x1e0)]())return;let _0x8a9dbe='',_0x1c394a=![];if(_0x3c8e63[_0x183228(0x194)]){const _0x313867=(_0x378c5f[_0x183228(0x1e0)]()['split'](/\s+/)[0x1b12+0x23f*-0x5+-0xfd7]||'')[_0x183228(0x188)+'e']();commands['includes'](_0x313867)&&(_0x8a9dbe=_0x313867,_0x1c394a=!![]);}else{const _0x2f7924=(_0x378c5f[_0x183228(0x17f)](/\r?\n/)[-0x1b01+-0x2597+0x4098]||'')[_0x183228(0x1e0)](),_0x29d5c7=(_0x2f7924['split'](/\s+/)[0x116b+-0x1b5c+0x5*0x1fd]||'')[_0x183228(0x188)+'e']();commands[_0x183228(0x21f)](_0x29d5c7)&&(_0x8a9dbe=_0x29d5c7,_0x1c394a=!![]);}if(!_0x1c394a)return;const _0x8bb7d=_0x3c8e63['key'][_0x183228(0x16a)],_0x286ef4=typeof _0x8bb7d===_0x183228(0x1ad)&&_0x8bb7d['endsWith'](_0x183228(0x19e));if(!_0x286ef4)return;let _0x25c46d=![];try{_0x25c46d=await isadmin(botRef,_0x3c8e63);}catch(_0x958325){warn(_0x183228(0x14d)+'isadmin\x20ch'+_0x183228(0x118)),_0x25c46d=![];}if(!_0x25c46d)return;const _0x421fe7=_0x3c8e63[_0x183228(0x16d)]?.['participan'+'t']||_0x3c8e63[_0x183228(0x16d)]?.[_0x183228(0xd3)]||_0x3c8e63[_0x183228(0x16d)]?.[_0x183228(0x16a)]||'',_0x38eac8=String(_0x421fe7||'')[_0x183228(0x17f)]('@')[0x1*0x36b+-0xa0a+0x1*0x69f],_0x34c008=_0x8bb7d;info(_0x183228(0x14d)+'command\x20\x27'+_0x8a9dbe+'\x27\x20from\x20'+_0x421fe7+_0x183228(0x21a)+_0x8bb7d);const _0x59e9c2=extractGpFromText(_0x378c5f),_0x59c8d7=_0x59e9c2&&_0x59e9c2[_0x183228(0x156)+_0x183228(0x116)]?_0x59e9c2[_0x183228(0x156)+_0x183228(0x116)]:_0x378c5f[_0x183228(0x17f)](/\r?\n/)[0x6a1*-0x1+-0x15ff*0x1+0x1ca0]||'',_0x3cbb79=_0x59e9c2&&_0x59e9c2[_0x183228(0x1f6)]?_0x59e9c2['bodyLines']:_0x378c5f['split'](/\r?\n/)['slice'](0xa33*0x2+0xe2*-0x1f+0x6f9),_0x179c41=_0x59e9c2&&_0x59e9c2['gp']?_0x59e9c2['gp']:null,_0x5ecade=[],_0x2525ac=[],_0x16843b=_0x59c8d7[_0x183228(0x171)](new RegExp('^'+_0x8a9dbe+'\x5cb','i'),'')['trim']();if(_0x16843b)_0x5ecade['push'](_0x16843b);_0x5ecade[_0x183228(0x218)](..._0x3cbb79);const _0x10723f=[];for(const _0x211ab3 of _0x5ecade){const _0x3bc7f3=_0x211ab3[_0x183228(0x1e0)]()['match'](/^profilepic\s+(on|off)$/i);if(_0x3bc7f3){_0x2525ac['push'](_0x3bc7f3[0x939+-0x7ef+-0x1*0x149][_0x183228(0x188)+'e']());continue;}_0x10723f['push'](_0x211ab3);}const _0x28adb1=_0x10723f[_0x183228(0x235)]('\x0a')[_0x183228(0x1e0)]();let _0x59b016=null;if(_0x2525ac[_0x183228(0x220)]>-0x22af+0x11de+0x10d1){const _0x4d2a8c=_0x2525ac[_0x2525ac[_0x183228(0x220)]-(0x6*-0x1eb+0x7*0x457+-0x12de)];_0x59b016=_0x4d2a8c==='on'?0x1a9e+0x1ad+0x47*-0x66:-0xd*-0x63+-0x1999*0x1+-0x2*-0xa49;}if(_0x8a9dbe===_0x183228(0xef)){if(!_0x28adb1){await sendApiOrFallback(_0x34c008,_0x183228(0x1ca)+_0x183228(0x148)+_0x183228(0x205)+':\x0a'+_0x183228(0x1c2)+(_0x183228(0x1f0)+_0x183228(0xf4)+_0x183228(0x203)+_0x183228(0x123))+(_0x183228(0x168)+_0x183228(0x173)+_0x183228(0x1a5)+_0x183228(0x1c5)+'\x22\x20or\x20\x22prof'+_0x183228(0x222)+_0x183228(0x236)+'e\x20per-targ'+_0x183228(0x1e6)+'s.\x0a')+('This\x20comma'+'nd\x20saves\x20t'+_0x183228(0x233)+_0x183228(0x230)+'ction(s)\x20('+'set\x20with\x20/'+_0x183228(0x22f)+').\x20It\x20will'+'\x20NOT\x20save\x20'+_0x183228(0x1af)+_0x183228(0x221)+_0x183228(0x183)+_0x183228(0x102)+'s\x20part\x20of\x20'+'your\x20defau'+_0x183228(0x20b)));return;}let _0x22cfbb=[];if(_0x179c41){const _0x58e7af=_0x179c41['trim']();if(_0x58e7af[_0x183228(0x188)+'e']()===_0x183228(0x20e))try{if(typeof _0x400059[_0x183228(0xee)+_0x183228(0x1b8)]==='function')_0x22cfbb=await _0x400059[_0x183228(0xee)+_0x183228(0x1b8)]();else{await sendApiOrFallback(_0x34c008,_0x183228(0x13f)+'quested\x20bu'+_0x183228(0x1e9)+'il.getUniq'+'ueJids\x20not'+'\x20available'+'.');return;}}catch(_0x2c6eda){warn(_0x183228(0x14d)+'gp:all\x20res'+_0x183228(0xff)+_0x183228(0x10f)+(_0x2c6eda?.[_0x183228(0x161)]||_0x2c6eda)),await sendApiOrFallback(_0x34c008,_0x183228(0x13f)+_0x183228(0x1d3)+_0x183228(0x1cd));return;}else{const _0x1fa62b=await _0x400059[_0x183228(0xfc)+'e']?.(_0x58e7af)[_0x183228(0x12f)](()=>null);if(_0x1fa62b)_0x22cfbb=[_0x1fa62b];else{if(_0x58e7af[_0x183228(0x21f)]('@'))_0x22cfbb=[_0x400059[_0x183228(0xe1)+_0x183228(0x238)]?.(_0x58e7af)||_0x58e7af];else{await sendApiOrFallback(_0x34c008,_0x183228(0x1b5)+'\x20alias/jid'+_0x183228(0x1de)+_0x58e7af+(_0x183228(0xd6)+_0x183228(0x12d)+_0x183228(0x1f4)+'ias\x20or\x20pas'+_0x183228(0x1d0)+_0x183228(0x1c6)));return;}}}}else{const _0x3f3dfc=await resolveDefaultsToChatJids(_0x38eac8);if(!_0x3f3dfc||_0x3f3dfc[_0x183228(0x220)]===-0x12+0x20b*-0x4+-0xd3*-0xa){await sendApiOrFallback(_0x34c008,'Could\x20not\x20'+'resolve\x20yo'+_0x183228(0x1d7)+_0x183228(0x1c7)+_0x183228(0x10b)+_0x183228(0x22f)+_0x183228(0x1be));return;}_0x22cfbb=_0x3f3dfc;}const _0x35035d=[];for(const _0x590ecf of _0x22cfbb){try{let _0x5beea5=await fetchGroupMetadata(_0x590ecf),_0x4aa443=null;if(_0x5beea5&&Array[_0x183228(0x107)](_0x5beea5[_0x183228(0x184)+'ts']))_0x4aa443=_0x5beea5[_0x183228(0x184)+'ts'][_0x183228(0x220)];else{if(_0x5beea5&&typeof _0x5beea5[_0x183228(0x1a2)]===_0x183228(0xe2))_0x4aa443=_0x5beea5[_0x183228(0x1a2)];}const _0x508f09=await getWelcomeFromDb(_0x590ecf),_0x3cf23e=_0x508f09?Number(_0x508f09[_0x183228(0x1bf)]||0x1214*0x2+-0x26c*-0x5+-0x3044):-0x2*-0x1238+-0x2174*0x1+-0x2fc,_0x4909c4=_0x4aa443&&_0x4aa443>-0x132a+-0x3*-0x994+0x31*-0x32?_0x4aa443:_0x3cf23e,_0x3bee09=_0x508f09?Number(_0x508f09[_0x183228(0x1b3)+_0x183228(0x166)]||-0x1*-0x1be9+0x2*0xe09+0x34b*-0x11):0x2506+0x368*-0x9+-0x65e,_0x650af9=_0x59b016===null?_0x3bee09:_0x59b016,_0x5a49b5=await saveWelcomeToDb(_0x590ecf,_0x28adb1,_0x4909c4,_0x508f09&&_0x508f09[_0x183228(0x106)+'d']?_0x508f09[_0x183228(0x106)+'d']:null,_0x650af9);if(_0x5a49b5){if(_0x4909c4&&_0x4909c4>-0x1*0x1661+-0x1906+0x2f67)setCachedGroupSize(_0x590ecf,_0x4909c4);_0x35035d[_0x183228(0x218)]({'ok':!![],'msg':_0x183228(0x1d2)+_0x183228(0x143)+_0x590ecf+(_0x183228(0x122)+'ic:\x20')+(_0x650af9?'on':_0x183228(0x10c))+')'});}else _0x35035d[_0x183228(0x218)]({'ok':![],'msg':_0x183228(0x202)+_0x183228(0x23b)+_0x183228(0x1ac)+_0x590ecf});}catch(_0x2b10be){warn(_0x183228(0x14d)+'saving\x20for'+'\x20'+_0x590ecf+_0x183228(0x162)+(_0x2b10be?.['message']||_0x2b10be)),_0x35035d[_0x183228(0x218)]({'ok':![],'msg':_0x183228(0x229)+_0x183228(0x124)+_0x590ecf+':\x20'+(_0x2b10be?.[_0x183228(0x161)]||_0x2b10be)});}}const _0x41aa05=_0x35035d[_0x183228(0x1f7)](_0x336603=>(_0x336603['ok']?'✅\x20':'❌\x20')+_0x336603['msg']);await sendApiOrFallback(_0x34c008,_0x183228(0x1d2)+_0x183228(0x21e)+'s:\x0a'+_0x41aa05[_0x183228(0x235)]('\x0a'));return;}if(_0x8a9dbe===_0x183228(0x198)){let _0x3492ae=[];if(_0x179c41){const _0x131e7a=_0x179c41[_0x183228(0x1e0)]();if(_0x131e7a[_0x183228(0x188)+'e']()===_0x183228(0x20e))try{if(typeof _0x400059[_0x183228(0xee)+_0x183228(0x1b8)]==='function')_0x3492ae=await _0x400059[_0x183228(0xee)+_0x183228(0x1b8)]();else{await sendApiOrFallback(_0x34c008,_0x183228(0x13f)+'quested\x20bu'+_0x183228(0x1e9)+_0x183228(0x18e)+'ueJids\x20not'+_0x183228(0xda)+'.');return;}}catch(_0x27b3de){warn(_0x183228(0x14d)+_0x183228(0x11e)+_0x183228(0xff)+_0x183228(0x10f)+(_0x27b3de?.[_0x183228(0x161)]||_0x27b3de)),await sendApiOrFallback(_0x34c008,_0x183228(0x13f)+_0x183228(0x1d3)+_0x183228(0x1cd));return;}else{const _0x54cd30=await _0x400059[_0x183228(0xfc)+'e']?.(_0x131e7a)[_0x183228(0x12f)](()=>null);if(_0x54cd30)_0x3492ae=[_0x54cd30];else{if(_0x131e7a[_0x183228(0x21f)]('@'))_0x3492ae=[_0x400059[_0x183228(0xe1)+_0x183228(0x238)]?.(_0x131e7a)||_0x131e7a];else{await sendApiOrFallback(_0x34c008,_0x183228(0x1b5)+'\x20alias/jid'+':\x20\x22'+_0x131e7a+'\x22.');return;}}}}else{const _0x43884b=await resolveDefaultsToChatJids(_0x38eac8);if(!_0x43884b||_0x43884b[_0x183228(0x220)]===-0x1ef2+-0x1118*0x1+0x8f*0x56){await sendApiOrFallback(_0x34c008,_0x183228(0x16e)+'connection'+'(s)\x20found\x20'+_0x183228(0x231)+_0x183228(0xe5)+'t\x20a\x20defaul'+_0x183228(0x134)+_0x183228(0xe0)+_0x183228(0x1bb)+_0x183228(0x147)+'ts\x20are\x20con'+_0x183228(0x1cf));return;}_0x3492ae=_0x43884b;}const _0x46a155=[];for(const _0x1ce151 of _0x3492ae){try{const _0x3639e5=await deleteWelcomeFromDb(_0x1ce151);_0x3639e5?(groupSizeCache[_0x183228(0x204)](_0x1ce151),_0x46a155[_0x183228(0x218)]({'ok':!![],'msg':_0x183228(0x1d9)+_0x183228(0x13c)+_0x1ce151})):_0x46a155['push']({'ok':![],'msg':'No\x20welcome'+_0x183228(0x13e)+'\x20'+_0x1ce151});}catch(_0x189d8b){warn(_0x183228(0x14d)+_0x183228(0x1c4)+_0x183228(0x14c)+_0x1ce151+_0x183228(0x162)+(_0x189d8b?.[_0x183228(0x161)]||_0x189d8b)),_0x46a155[_0x183228(0x218)]({'ok':![],'msg':_0x183228(0xf7)+_0x183228(0x1b2)+_0x1ce151+':\x20'+(_0x189d8b?.[_0x183228(0x161)]||_0x189d8b)});}}const _0x49c1a2=_0x46a155['map'](_0x4fc7e0=>(_0x4fc7e0['ok']?'✅\x20':'❌\x20')+_0x4fc7e0['msg']);await sendApiOrFallback(_0x34c008,_0x183228(0x110)+_0x183228(0x181)+_0x183228(0x219)+_0x49c1a2[_0x183228(0x235)]('\x0a'));return;}return;}catch(_0x126102){error(_0x126102,_0x183228(0x14d)+_0x183228(0x1bc)+_0x183228(0x201)+(_0x126102?.[_0x183228(0x161)]||_0x126102));}}export async function cleanup(){const _0x22528d=_0x17e5e2;try{for(const _0x3a41b6 of groupTimers[_0x22528d(0x1c1)]())try{clearTimeout(_0x3a41b6);}catch(_0x2b648b){}groupTimers[_0x22528d(0x19c)](),groupQueues[_0x22528d(0x19c)](),groupSizeCache['clear']();try{stopManagedListener(name,_0x22528d(0x190)+'icipants.u'+_0x22528d(0x215));}catch(_0x3d277c){}info(_0x22528d(0x14d)+_0x22528d(0x18a)+_0x22528d(0x200)+_0x22528d(0x12b)+_0x22528d(0x1b4));for(const _0x24cfb5 of processedMessageKeys[_0x22528d(0x1c1)]())try{clearTimeout(_0x24cfb5);}catch(_0x59d689){}processedMessageKeys['clear'](),profilePicCache[_0x22528d(0x19c)]();}catch(_0x28888b){warn(_0x22528d(0x14d)+_0x22528d(0x22e)+_0x22528d(0xf6)+(_0x28888b?.[_0x22528d(0x161)]||_0x28888b));}finally{botRef=null,sendApi=null,info('[welcome]\x20'+'cleaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};