const _0x3afba6=_0x42f9;(function(_0x1118a5,_0x365547){const _0x13ef0d=_0x42f9,_0x454b51=_0x1118a5();while(!![]){try{const _0x146b95=-parseInt(_0x13ef0d(0x18f))/(-0x1045+0x1*-0x16e1+0x2727)*(-parseInt(_0x13ef0d(0xfa))/(-0x6*-0x499+-0x164*-0x13+-0x30*0x120))+parseInt(_0x13ef0d(0x1f1))/(0x40*0x5b+0x14ed+-0x2baa)+-parseInt(_0x13ef0d(0x196))/(0x1d0+-0x28+-0x1a4)+-parseInt(_0x13ef0d(0x1cb))/(-0x47d*-0x3+0x121d+-0x1f8f)*(-parseInt(_0x13ef0d(0x182))/(-0x2141+0x1*0x2185+-0x1*0x3e))+parseInt(_0x13ef0d(0x20b))/(0xf5b+0xdc*0x11+-0x1df0)+parseInt(_0x13ef0d(0x1e5))/(-0x3*-0x4ef+-0x12bc+-0x7*-0x91)*(-parseInt(_0x13ef0d(0x102))/(-0xebc*-0x2+-0x4*-0x62f+-0x362b*0x1))+-parseInt(_0x13ef0d(0x203))/(0x10e4+0x1b1*0x1+0x128b*-0x1);if(_0x146b95===_0x365547)break;else _0x454b51['push'](_0x454b51['shift']());}catch(_0x369657){_0x454b51['push'](_0x454b51['shift']());}}}(_0x4022,-0xf91a1+0x29e0f*-0x1+0xbb*0x2819));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x503953 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x3afba6(0x1d3);export const version=_0x3afba6(0x118);export const priority=0x1628+-0x2308*0x1+0xd5a;export const configKeys=[_0x3afba6(0x200)];export const commands=[_0x3afba6(0x151),_0x3afba6(0x188)];function _0x4022(){const _0x39e5ca=['https://i-','normalizeT','dmin-only)','dia/','me\x20for\x20','_CACHE_TTL','t\x20a\x20defaul','participan','last_msg_i','sendMessag','ensureSche','No\x20welcome','in\x20your\x20de','2348872GvCRZz','O\x20welcomes','ueJids\x20not','connection','gp:\x20all\x20re','88090068@n','cleaned\x20up','N\x20send_pro',':\x20\x22','ROUP_MAX','il.getUniq','sock','3844206WIrcPX','floor','ATE\x20TABLE\x20','setdefault','map','UPDATE\x20wel','end_profil','[welcome]\x20','\x20\x20\x20\x20ON\x20CON','\x22.\x20Use\x20gro','y\x20to\x20have\x20','equires\x20bo','o\x20the\x20','stener','oup_jid\x20=\x20','WELCOME','profilePic','d\x20=\x20?,\x20upd','22131470moLEzc','resolve\x20yo','?,\x20?,\x20?,\x20?','luded.send','t\x20=\x20exclud','subject','\x20\x20VALUES\x20(','_profilepi','6207740vvWRNW','t\x20with\x20/se','DEFAULT_EN','quested\x20bu','to\x20the\x20cur','ewsletter','invite','s.\x0a','80AomKpr','splice',',\x20?,\x20?)\x0a\x20\x20','id\x20TEXT\x20PR','ABLED','WelcomeBot','s\x20a\x20full\x20J','delete','27OxQIKZ','welcome.in','our\x20defaul','comes\x20SET\x20','caption','ic:\x20','isCommand','selectedRo','remoteJid','add','e\x20per-targ','icipants.u','gp:all\x20res','failed\x20to\x20','ALTER\x20TABL','Unknown\x20gp','ctReply','c,\x20updated','notify','come\x20resul','faults.\x20Se','Error\x20savi','3.6.2','\x20unless\x20th','tureUrl','ts\x20are\x20con','FLICT(grou','\x20\x20\x20\x20);\x0a\x20\x20\x20','UPDATE\x20SET','ttonId','send_profi','initialize','ata','filepic\x20IN','\x20failed:\x20','register\x20l','save\x20welco','g_id,\x20send','url','istener:\x20','now','listRespon','sanitizedF','slice','from','tct.com/me','\x20Welcome\x20t','ts:\x0a','\x20found\x20for','error:\x20','number',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','FAULT\x200,\x0a\x20','vname','p_jid)\x20DO\x20','Error\x20dele','type','o\x20your\x20DEF','trim','off','s\x20WHERE\x20gr','\x20\x20\x20\x20\x20last_','max','ias\x20or\x20pas','conversati','\x20to\x20add\x20al','\x20available','msg','includes','DEFAULT\x200,','imageMessa','ated_at\x20FR','run','Saved\x20welc','key','es\x20(\x0a\x20\x20\x20\x20\x20','getUniqueJ','n(s).\x20Use\x20','msg_id\x20=\x20e','wlc','length','oUserJid','you!','ts_added','values','\x20(profilep','figured.','c,\x0a\x20\x20\x20\x20\x20\x20\x20','epic\x20=\x20exc','WHERE\x20grou','\x20\x20\x20\x20\x20\x20send','videoMessa','last_size','essage\x20TEX','s:\x0a','\x20first.','DEBOUNCE_M','sage,\x20last','ponseMessa','tdefault\x20o','t\x20groupsUt','function','Welcome\x20to','selectedBu','split','\x20listener\x20','seMessage','essage\x20=\x20e','OM\x20welcome','has','\x20include\x20a','No\x20target\x20','last_size\x20','catch','match','\x20alias/jid','.jpg','WHATSAPP_G','all','registered','saving\x20for','push','t\x20instance','toLowerCas',',\x20last_siz','exec','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','@g.us','6982134ItXupq','resolveNam','expiresAt','irstLine','ts.update','olution\x20fa','delwlc','join','set','ailed.','at\x20group\x20i','ed_at\x20=\x20?\x20','\x20fatal:\x20','16453oEQTbq','This\x20comma','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','get','_MS','groupJid','size','673432OKxoxd','INTEGER\x20DE','lts.','solution\x20f','ma\x20failed','name','message','\x20updated_a','Delete\x20wel','TEGER\x20DEFA','ID.','extendedTe','deleting\x20f','ng\x20for\x20','\x20WHERE\x20gro','SELECT\x20mes','ome\x20for\x20','Could\x20not\x20','buttonsRes','luded.last','t_msg_id,\x20','bodyLines','lepic','wId','GROUP_SIZE','onWhatsApp','E\x20welcomes','filter','singleSele','iled:\x20','i-line\x20wel','pdate','string','for\x20group-','xcluded.la','image','ror:\x20','INSERT\x20INT','clear','isInteger','boolean','d,\x20message','toString','Deleted\x20we','t_msg_id\x20T','1203632853','EXT\x20DEFAUL','ction(s)\x20(','cleanup\x20er','ids','STS\x20welcom','lepic,\x20upd','IF\x20NOT\x20EXI','5RPcfMr','changes','groupMetad','isArray','MEMBER:\x20\x20','_at)\x0a\x20\x20\x20\x20\x20','_size,\x0a\x20\x20\x20','random','welcome','endsWith','filepic\x20on','>\x20üë§YOU\x27RE\x20','T\x20NOT\x20NULL'];_0x4022=function(){return _0x39e5ca;};return _0x4022();}let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(-0x8*-0x137+-0x7*-0x15b+-0x266*0x8)*(0x18*0x36+-0x1*-0x1bf7+-0x20cb)*(-0x21af*0x1+-0x25e7*-0x1+-0x50),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),profilePicCache=new Map(),PROFILE_PIC_TTL_MS=(0x3*-0x2cf+0x15b4+-0xd42)*(-0x254f+0xacb*-0x2+0x3b21)*(0x1c11*-0x1+-0x1fa1+0x3f9a),DEDUPE_TTL_MS=(-0xc23*0x2+-0x1dc6+0x362a)*(-0x6c6+0x2634+-0x1b86),processedMessageKeys=new Map();function _0x42f9(_0x56ab39,_0x11472d){_0x56ab39=_0x56ab39-(-0xcd2*-0x2+-0xfce+0x2*-0x471);const _0x3808c1=_0x4022();let _0x4abb02=_0x3808c1[_0x56ab39];return _0x4abb02;}function markProcessed(_0x6782f8){const _0x40f1d1=_0x3afba6;if(!_0x6782f8)return;if(processedMessageKeys[_0x40f1d1(0x16f)](_0x6782f8))try{clearTimeout(processedMessageKeys[_0x40f1d1(0x192)](_0x6782f8));}catch(_0x2c16d6){}const _0x4b769b=setTimeout(()=>processedMessageKeys['delete'](_0x6782f8),DEDUPE_TTL_MS);processedMessageKeys[_0x40f1d1(0x18a)](_0x6782f8,_0x4b769b);}function isProcessed(_0x12e527){return _0x12e527&&processedMessageKeys['has'](_0x12e527);}async function ensureSchema(){const _0x40a804=_0x3afba6;try{await db[_0x40a804(0x17f)]('\x0a\x20\x20\x20\x20\x20\x20CRE'+_0x40a804(0x1f3)+_0x40a804(0x1ca)+_0x40a804(0x1c8)+_0x40a804(0x14d)+'\x20\x20\x20group_j'+_0x40a804(0xfd)+'IMARY\x20KEY,'+_0x40a804(0x191)+_0x40a804(0x15f)+_0x40a804(0x1d7)+_0x40a804(0x135)+_0x40a804(0x172)+_0x40a804(0x197)+_0x40a804(0x136)+'\x20\x20\x20\x20\x20\x20\x20las'+_0x40a804(0x1c2)+_0x40a804(0x1c4)+'T\x20NULL,\x0a\x20\x20'+_0x40a804(0x15c)+_0x40a804(0x20a)+'c\x20INTEGER\x20'+_0x40a804(0x147)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'pdated_at\x20'+_0x40a804(0x197)+'FAULT\x200\x0a\x20\x20'+_0x40a804(0x11d)+'\x20');try{await db[_0x40a804(0x17f)](_0x40a804(0x110)+_0x40a804(0x1b0)+'\x20ADD\x20COLUM'+_0x40a804(0x1ec)+_0x40a804(0x123)+_0x40a804(0x19f)+'ULT\x200;');}catch(_0x53101e){}}catch(_0x3be18f){error(_0x3be18f,_0x40a804(0x1f8)+_0x40a804(0x1e2)+_0x40a804(0x19a));throw _0x3be18f;}}async function saveWelcomeToDb(_0x495bf4,_0x51e4a1,_0x7cafde=-0x100*0xb+-0x1b*0x34+-0x1a6*-0xa,_0x3109dc=null,_0x4156b1=0x211e+0x1594*-0x1+-0xb8a){const _0x22fcd7=_0x3afba6;try{const _0x1dccfd=Math[_0x22fcd7(0x1f2)](Date[_0x22fcd7(0x12a)]()/(-0x1f6d+0x94*0x3d+0x11*0x1));return await db[_0x22fcd7(0x14a)](_0x22fcd7(0x1bb)+_0x22fcd7(0x1e6)+'\x20(group_ji'+_0x22fcd7(0x1bf)+_0x22fcd7(0x17e)+'e,\x20last_ms'+_0x22fcd7(0x127)+_0x22fcd7(0x20a)+_0x22fcd7(0x113)+_0x22fcd7(0x1d0)+_0x22fcd7(0x209)+_0x22fcd7(0x205)+_0x22fcd7(0xfc)+_0x22fcd7(0x1f9)+_0x22fcd7(0x11c)+_0x22fcd7(0x138)+_0x22fcd7(0x11e)+_0x22fcd7(0x191)+_0x22fcd7(0x16d)+'xcluded.me'+'ssage,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20last_'+'size\x20=\x20exc'+_0x22fcd7(0x1a9)+_0x22fcd7(0x1d1)+_0x22fcd7(0x13f)+_0x22fcd7(0x150)+_0x22fcd7(0x1b8)+'st_msg_id,'+_0x22fcd7(0x180)+_0x22fcd7(0x1f7)+_0x22fcd7(0x15a)+_0x22fcd7(0x206)+_0x22fcd7(0x20a)+_0x22fcd7(0x159)+_0x22fcd7(0x19d)+_0x22fcd7(0x207)+'ed.updated'+'_at;',[_0x495bf4,String(_0x51e4a1||''),Number(_0x7cafde||-0x37*-0x7f+-0x11a7+-0x3*0x336),_0x3109dc||null,Number(_0x4156b1||0x1*-0x1e71+-0x1b*0x28+0x22a9),_0x1dccfd]),!![];}catch(_0xf007a1){return![];}}async function deleteWelcomeFromDb(_0x2601f2){const _0x1c3303=_0x3afba6;try{const _0x4998ed=await db['run']('DELETE\x20FRO'+'M\x20welcomes'+_0x1c3303(0x1a4)+'up_jid\x20=\x20?',[_0x2601f2]);return _0x4998ed?.[_0x1c3303(0x1cc)]||-0x1ad4+-0x232+-0x2e7*-0xa;}catch(_0x5a9914){return-0x5c0+0x8ce+-0x30e;}}async function getWelcomeFromDb(_0x66e5d2){const _0x3dbe11=_0x3afba6;try{const _0x25c036=await db['get'](_0x3dbe11(0x1a5)+_0x3dbe11(0x163)+'_size,\x20las'+_0x3dbe11(0x1aa)+_0x3dbe11(0x120)+_0x3dbe11(0x1c9)+_0x3dbe11(0x149)+_0x3dbe11(0x16e)+_0x3dbe11(0x13e)+'oup_jid\x20=\x20'+'?',[_0x66e5d2]);return _0x25c036||null;}catch(_0x2a5d72){return null;}}async function updateLastMsgIdInDb(_0x358fb5,_0x3ce02c){const _0x51fce0=_0x3afba6;try{const _0x5082dd=Math[_0x51fce0(0x1f2)](Date['now']()/(0x12d1*-0x1+0xa91+0xc28));return await db['run'](_0x51fce0(0x1f6)+_0x51fce0(0x105)+'last_msg_i'+_0x51fce0(0x202)+'ated_at\x20=\x20'+'?\x20WHERE\x20gr'+_0x51fce0(0x1ff)+'?',[_0x3ce02c||null,_0x5082dd,_0x358fb5]),!![];}catch(_0x45fc22){return![];}}function tryBuildSendApiFromBot(_0x29abb3){const _0xdccd46=_0x3afba6;if(!_0x29abb3)return null;if(typeof _0x29abb3[_0xdccd46(0x1e1)+'e']==='function')return async(_0xcd1825,_0x38f1b5)=>_0x29abb3[_0xdccd46(0x1e1)+'e'](_0xcd1825,_0x38f1b5);if(_0x29abb3['sock']&&typeof _0x29abb3[_0xdccd46(0x1f0)][_0xdccd46(0x1e1)+'e']===_0xdccd46(0x167))return async(_0x3de68b,_0x48aa87)=>_0x29abb3['sock'][_0xdccd46(0x1e1)+'e'](_0x3de68b,_0x48aa87);return null;}function setupSendApi(_0x30c200){botRef=_0x30c200,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x16f756,_0x132a12,_0x47c772=[]){const _0x343293=_0x3afba6;try{if(!_0x16f756||!_0x132a12)return null;const _0x40fc72=typeof _0x132a12===_0x343293(0x1b6)?{'text':String(_0x132a12)}:_0x132a12;if(Array[_0x343293(0x1ce)](_0x47c772)&&_0x47c772['length'])_0x40fc72['mentions']=_0x47c772;if(sendApi)try{const _0x2ddfb6=await sendApi(_0x16f756,_0x40fc72);return _0x2ddfb6;}catch(_0x45c0e7){return null;}else try{if(botRef&&typeof botRef[_0x343293(0x1e1)+'e']===_0x343293(0x167))return await botRef[_0x343293(0x1e1)+'e'](_0x16f756,_0x40fc72);else return botRef&&botRef[_0x343293(0x1f0)]&&typeof botRef[_0x343293(0x1f0)]['sendMessag'+'e']===_0x343293(0x167)?await botRef[_0x343293(0x1f0)][_0x343293(0x1e1)+'e'](_0x16f756,_0x40fc72):null;}catch(_0x21fc50){return null;}}catch(_0x5b816d){return null;}}function extractTextFromMessage(_0x58d490){const _0x55db1a=_0x3afba6;if(!_0x58d490||!_0x58d490[_0x55db1a(0x19c)])return'';const _0xc9e04=_0x58d490[_0x55db1a(0x19c)];if(_0xc9e04['conversati'+'on'])return _0xc9e04[_0x55db1a(0x142)+'on'];if(_0xc9e04[_0x55db1a(0x1a1)+'xtMessage']?.['text'])return _0xc9e04[_0x55db1a(0x1a1)+'xtMessage']['text'];if(_0xc9e04[_0x55db1a(0x148)+'ge']?.[_0x55db1a(0x106)])return _0xc9e04[_0x55db1a(0x148)+'ge']['caption'];if(_0xc9e04[_0x55db1a(0x15d)+'ge']?.[_0x55db1a(0x106)])return _0xc9e04['videoMessa'+'ge'][_0x55db1a(0x106)];if(_0xc9e04[_0x55db1a(0x1a8)+_0x55db1a(0x164)+'ge']?.[_0x55db1a(0x169)+'ttonId'])return _0xc9e04['buttonsRes'+_0x55db1a(0x164)+'ge'][_0x55db1a(0x169)+_0x55db1a(0x11f)];if(_0xc9e04['listRespon'+_0x55db1a(0x16c)]?.[_0x55db1a(0x1b2)+_0x55db1a(0x112)]?.['selectedRo'+'wId'])return _0xc9e04[_0x55db1a(0x12b)+_0x55db1a(0x16c)][_0x55db1a(0x1b2)+_0x55db1a(0x112)][_0x55db1a(0x109)+_0x55db1a(0x1ad)];return'';}async function resolveDefaultsToChatJids(_0x376a72){const _0x4063a2=_0x3afba6;try{let _0xba21b3;try{_0xba21b3=await getDefault(_0x376a72)[_0x4063a2(0x173)](()=>null);}catch(_0x38ec0a){_0xba21b3=null;}if(!_0xba21b3||Array[_0x4063a2(0x1ce)](_0xba21b3)&&_0xba21b3['length']===0x1*0x2189+-0x1d11+-0x478)return[];const _0x2da280=Array[_0x4063a2(0x1ce)](_0xba21b3)?_0xba21b3:[_0xba21b3],_0x188b00=[];for(const _0x559894 of _0x2da280){try{const _0xfad34e=await getConnection(_0x559894)[_0x4063a2(0x173)](()=>null);if(Array[_0x4063a2(0x1ce)](_0xfad34e))_0x188b00[_0x4063a2(0x17b)](..._0xfad34e);else{if(_0xfad34e)_0x188b00[_0x4063a2(0x17b)](String(_0xfad34e));}}catch(_0x2528a1){}}const _0x18177f=new Set(),_0x5cdd23=[];for(const _0x4997b4 of _0x188b00){const _0x4c3829=String(_0x4997b4||'')['trim']();if(!_0x4c3829)continue;!_0x18177f['has'](_0x4c3829)&&(_0x18177f[_0x4063a2(0x10b)](_0x4c3829),_0x5cdd23[_0x4063a2(0x17b)](_0x4c3829));}return _0x5cdd23;}catch(_0x5e03d3){return[];}}async function fetchGroupMetadata(_0x27de29){const _0x287744=_0x3afba6;if(!botRef)return null;try{if(botRef['sock']&&typeof botRef[_0x287744(0x1f0)][_0x287744(0x1cd)+'ata']===_0x287744(0x167))return await botRef[_0x287744(0x1f0)][_0x287744(0x1cd)+_0x287744(0x122)](_0x27de29);if(typeof botRef[_0x287744(0x1cd)+_0x287744(0x122)]===_0x287744(0x167))return await botRef[_0x287744(0x1cd)+_0x287744(0x122)](_0x27de29);return null;}catch(_0xb64026){return null;}}async function fetchProfilePictureUrl(_0x25fd95){const _0x309daa=_0x3afba6;if(!botRef||!_0x25fd95)return null;try{let _0x514f61=null;if(botRef[_0x309daa(0x1f0)]&&typeof botRef[_0x309daa(0x1f0)]['profilePic'+'tureUrl']===_0x309daa(0x167))_0x514f61=await botRef[_0x309daa(0x1f0)][_0x309daa(0x201)+'tureUrl'](_0x25fd95,_0x309daa(0x1b9))[_0x309daa(0x173)](()=>null);else typeof botRef[_0x309daa(0x201)+_0x309daa(0x11a)]==='function'&&(_0x514f61=await botRef[_0x309daa(0x201)+_0x309daa(0x11a)](_0x25fd95,_0x309daa(0x1b9))['catch'](()=>null));return _0x514f61;}catch(_0x44ddb5){return null;}}function getCachedProfilePic(_0x145aa0){const _0x26f21e=_0x3afba6,_0x11e540=profilePicCache[_0x26f21e(0x192)](_0x145aa0);if(!_0x11e540)return null;if(Date[_0x26f21e(0x12a)]()>_0x11e540[_0x26f21e(0x184)])return profilePicCache[_0x26f21e(0x101)](_0x145aa0),null;return _0x11e540[_0x26f21e(0x128)];}function setCachedProfilePic(_0x3a2385,_0x469892){const _0x297043=_0x3afba6;if(!_0x3a2385)return;profilePicCache['set'](_0x3a2385,{'url':_0x469892||null,'expiresAt':Date[_0x297043(0x12a)]()+PROFILE_PIC_TTL_MS});}function getCachedGroupSize(_0x24a18b){const _0x3ddbb7=_0x3afba6,_0x14f882=groupSizeCache[_0x3ddbb7(0x192)](_0x24a18b);if(!_0x14f882)return null;if(Date[_0x3ddbb7(0x12a)]()>_0x14f882['expiresAt'])return groupSizeCache[_0x3ddbb7(0x101)](_0x24a18b),null;return _0x14f882[_0x3ddbb7(0x195)];}function setCachedGroupSize(_0x3e90d9,_0x30e19f){const _0xd6b91=_0x3afba6;groupSizeCache[_0xd6b91(0x18a)](_0x3e90d9,{'size':Number(_0x30e19f||-0x298*0x1+-0x318+0x16c*0x4),'expiresAt':Date[_0xd6b91(0x12a)]()+(CFG['GROUP_SIZE'+_0xd6b91(0x1dd)+_0xd6b91(0x193)]||DEFAULTS[_0xd6b91(0x1ae)+_0xd6b91(0x1dd)+_0xd6b91(0x193)])});}async function resolveDisplayName(_0x34a2ef){const _0x1ad74d=_0x3afba6;try{if(!botRef||!_0x34a2ef)return _0x34a2ef?.['split']?.('@')?.[0x1*0x2692+0x94e*-0x1+-0x2*0xea2]??_0x34a2ef;try{if(typeof botRef[_0x1ad74d(0x1af)]===_0x1ad74d(0x167)){const _0x55cc7b=await botRef[_0x1ad74d(0x1af)](_0x34a2ef);if(Array[_0x1ad74d(0x1ce)](_0x55cc7b)&&_0x55cc7b[_0x1ad74d(0x152)]>0x263f+0x1cf*-0xe+-0xced*0x1){const _0x2cd626=_0x55cc7b[-0x1*-0x2342+-0x20e0+0x3d*-0xa];if(_0x2cd626&&(_0x2cd626[_0x1ad74d(0x114)]||_0x2cd626[_0x1ad74d(0x137)]||_0x2cd626['name']))return _0x2cd626['notify']||_0x2cd626[_0x1ad74d(0x137)]||_0x2cd626[_0x1ad74d(0x19b)];}}if(botRef[_0x1ad74d(0x1f0)]&&typeof botRef['sock']['onWhatsApp']===_0x1ad74d(0x167)){const _0x1b5956=await botRef['sock'][_0x1ad74d(0x1af)](_0x34a2ef);if(Array['isArray'](_0x1b5956)&&_0x1b5956[_0x1ad74d(0x152)]>0x11ad*-0x2+0x7*-0xab+0x2807){const _0x354128=_0x1b5956[-0x24de+-0x23b*0xd+-0x41dd*-0x1];if(_0x354128&&(_0x354128[_0x1ad74d(0x114)]||_0x354128[_0x1ad74d(0x137)]||_0x354128['name']))return _0x354128[_0x1ad74d(0x114)]||_0x354128[_0x1ad74d(0x137)]||_0x354128[_0x1ad74d(0x19b)];}}}catch(_0x5f4066){}return String(_0x34a2ef)[_0x1ad74d(0x16a)]('@')[-0xc5c+0xfc1+-0x365]||_0x34a2ef;}catch(_0x4b7f2a){return _0x34a2ef?.[_0x1ad74d(0x16a)]?.('@')?.[0xae3+-0x2*-0xce+-0x1*0xc7f]??_0x34a2ef;}}const WELCOME_MEDIA_BASE=_0x3afba6(0x1d8)+_0x3afba6(0x12f)+_0x3afba6(0x1db),WELCOME_MAX=-0x1230+0x1*-0x25f6+0x382f;function pickRandomCardImage(){const _0x45d580=_0x3afba6,_0x169355=Math[_0x45d580(0x1f2)](Math[_0x45d580(0x1d2)]()*WELCOME_MAX)+(0x11e4+-0x6be*0x4+0x915);return WELCOME_MEDIA_BASE+_0x45d580(0x1d3)+_0x169355+_0x45d580(0x176);}async function sendWelcomeToMember(_0x2af375,_0x35734a){const _0x583d1f=_0x3afba6;try{const _0x383389=await getWelcomeFromDb(_0x2af375);if(!_0x383389||!_0x383389[_0x583d1f(0x19c)])return![];let _0x4c2a59=await fetchGroupMetadata(_0x2af375),_0x22b81f=_0x4c2a59&&_0x4c2a59[_0x583d1f(0x208)]?_0x4c2a59[_0x583d1f(0x208)]:_0x2af375,_0x372211=getCachedGroupSize(_0x2af375);if(!_0x372211||_0x372211<=-0x1bbf*-0x1+-0x16f1+0xcd*-0x6){if(_0x4c2a59&&Array[_0x583d1f(0x1ce)](_0x4c2a59[_0x583d1f(0x1df)+'ts']))_0x372211=_0x4c2a59[_0x583d1f(0x1df)+'ts'][_0x583d1f(0x152)];else{if(_0x4c2a59&&typeof _0x4c2a59[_0x583d1f(0x195)]===_0x583d1f(0x134))_0x372211=_0x4c2a59[_0x583d1f(0x195)];else{_0x4c2a59=_0x4c2a59||await fetchGroupMetadata(_0x2af375);if(_0x4c2a59&&Array[_0x583d1f(0x1ce)](_0x4c2a59[_0x583d1f(0x1df)+'ts']))_0x372211=_0x4c2a59['participan'+'ts'][_0x583d1f(0x152)];}}if(!_0x372211||_0x372211<=0x1*0x50+0x1724*-0x1+0x2*0xb6a)_0x372211=Number(_0x383389[_0x583d1f(0x15e)]||-0x61*0x15+0x2321+-0x4a*0x5e);else setCachedGroupSize(_0x2af375,_0x372211);}const _0x3d3b56=CFG[_0x583d1f(0x177)+_0x583d1f(0x1ee)]||DEFAULTS[_0x583d1f(0x177)+_0x583d1f(0x1ee)],_0x25c5c6=await resolveDisplayName(_0x35734a),_0x2abba6='@'+String(_0x25c5c6)['replace'](/\s+/g,'\x20'),_0x5a858d=[];_0x5a858d['push']('Hi\x20'+_0x2abba6+(_0x583d1f(0x130)+_0x583d1f(0x1fd))+_0x22b81f),_0x5a858d[_0x583d1f(0x17b)](String(_0x383389['message'])[_0x583d1f(0x13c)]()),_0x5a858d['push'](_0x583d1f(0x1d6)+_0x583d1f(0x1cf)+_0x372211+'/'+_0x3d3b56);const _0x2fc2e8=_0x5a858d[_0x583d1f(0x189)]('\x0a\x0a'),_0x2ac2cc=[_0x35734a],_0x26f14b=_0x383389[_0x583d1f(0x1e0)+'d']||null,_0x2961f7=Number(_0x383389[_0x583d1f(0x120)+_0x583d1f(0x1ac)]||-0x3*-0x962+-0x23*-0xf9+-0x105*0x3d)===0x1d69+-0x24a1+0x2b*0x2b;let _0x491842=null;_0x2961f7&&(_0x491842=getCachedProfilePic(_0x35734a),!_0x491842&&(_0x491842=await fetchProfilePictureUrl(_0x35734a),setCachedProfilePic(_0x35734a,_0x491842)));!_0x491842&&(_0x491842=pickRandomCardImage());const _0x35ed67={'title':_0x583d1f(0x168)+'\x20'+_0x22b81f,'body':'We\x27re\x20happ'+_0x583d1f(0x1fb)+_0x583d1f(0x154),'thumbnailUrl':_0x491842,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x2b0081=await sendApiOrFallback(_0x2af375,{'text':_0x2fc2e8,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x583d1f(0x1c3)+_0x583d1f(0x1ea)+_0x583d1f(0xf7),'newsletterName':_0x583d1f(0xff),'serverMessageId':0x7b},'externalAdReply':_0x35ed67}},_0x2ac2cc);let _0x4219ed=null;try{_0x2b0081&&(_0x4219ed=_0x2b0081?.[_0x583d1f(0x14c)]&&_0x2b0081['key']['id']?_0x2b0081['key']['id']:_0x2b0081?.[_0x583d1f(0x19c)]&&_0x2b0081[_0x583d1f(0x19c)]?.['id']?_0x2b0081[_0x583d1f(0x19c)]['id']:_0x2b0081?.['id']?_0x2b0081['id']:null);}catch(_0x6b0693){}if(_0x26f14b&&_0x26f14b!==_0x4219ed)try{if(botRef&&typeof botRef[_0x583d1f(0x1e1)+'e']==='function')try{await botRef[_0x583d1f(0x1e1)+'e'](_0x2af375,{'delete':{'id':_0x26f14b,'remoteJid':_0x2af375,'fromMe':!![]}});}catch(_0x58eb97){try{await botRef[_0x583d1f(0x1f0)]?.[_0x583d1f(0x1e1)+'e']?.(_0x2af375,{'delete':{'id':_0x26f14b,'remoteJid':_0x2af375,'fromMe':!![]}});}catch(_0xd9b708){}}}catch(_0x345433){}try{_0x4219ed?await updateLastMsgIdInDb(_0x2af375,_0x4219ed):await updateLastMsgIdInDb(_0x2af375,null);}catch(_0x1f8fde){}const _0x547325=Number(_0x383389[_0x583d1f(0x15e)]||0x15b1+-0x10eb+-0x4c6);if(_0x372211&&_0x372211!==_0x547325)try{await db[_0x583d1f(0x14a)]('UPDATE\x20wel'+_0x583d1f(0x105)+_0x583d1f(0x172)+'=\x20?,\x20updat'+_0x583d1f(0x18d)+_0x583d1f(0x15b)+'p_jid\x20=\x20?',[_0x372211,Math['floor'](Date['now']()/(0x1e86*-0x1+-0xd*0x3d+0x2e3*0xd)),_0x2af375]),setCachedGroupSize(_0x2af375,_0x372211);}catch(_0x40d33c){}return!![];}catch(_0x53d32e){return![];}}async function flushGroup(_0x4272b0){const _0x4c5242=_0x3afba6;try{const _0x3c5600=groupQueues[_0x4c5242(0x192)](_0x4272b0);if(!_0x3c5600||_0x3c5600['size']===0x4*0x94d+0x1d2*0x4+-0xd*0x36c){if(groupTimers['has'](_0x4272b0)){try{clearTimeout(groupTimers[_0x4c5242(0x192)](_0x4272b0));}catch(_0x2f82f2){}groupTimers[_0x4c5242(0x101)](_0x4272b0);}groupQueues[_0x4c5242(0x101)](_0x4272b0);return;}const _0x5a345b=Array[_0x4c5242(0x12e)](_0x3c5600);for(const _0x358eaa of _0x5a345b){try{await sendWelcomeToMember(_0x4272b0,_0x358eaa)[_0x4c5242(0x173)](()=>{});}catch(_0x47cf0f){}}}catch(_0x24ab3b){}finally{if(groupTimers[_0x4c5242(0x16f)](_0x4272b0)){try{clearTimeout(groupTimers['get'](_0x4272b0));}catch(_0x166212){}groupTimers[_0x4c5242(0x101)](_0x4272b0);}groupQueues[_0x4c5242(0x101)](_0x4272b0);}}async function gpUpdateHandler(_0x190d29){const _0x25e68f=_0x3afba6;try{if(!_0x190d29)return;const _0x4f7e1d=(_0x190d29['action']||_0x190d29[_0x25e68f(0x13a)]||'')[_0x25e68f(0x1c0)]()[_0x25e68f(0x17d)+'e']();if(_0x4f7e1d!=='add'&&_0x4f7e1d!==_0x25e68f(0xf8))return;const _0x4179b8=_0x190d29['id']||_0x190d29['groupId']||_0x190d29['jid']||_0x190d29[_0x25e68f(0x194)];if(!_0x4179b8)return;const _0x5e7e7a=Array[_0x25e68f(0x1ce)](_0x190d29[_0x25e68f(0x1df)+'ts'])?_0x190d29[_0x25e68f(0x1df)+'ts']:Array[_0x25e68f(0x1ce)](_0x190d29[_0x25e68f(0x1df)+_0x25e68f(0x155)])?_0x190d29[_0x25e68f(0x1df)+_0x25e68f(0x155)]:[];if(!_0x5e7e7a||_0x5e7e7a[_0x25e68f(0x152)]===-0x1db7+0x1e68+-0xb1)return;const _0x5af15c=_0x5e7e7a[_0x25e68f(0x1f5)](_0x1521e9=>_0x1521e9['id'])[_0x25e68f(0x1b1)](Boolean);if(!_0x5af15c['length'])return;let _0x2540c3=[];if(_0x5af15c[_0x25e68f(0x152)]===-0x1794+0x3e2+0x29*0x7b)_0x2540c3=[_0x5af15c[-0x1*0x2005+-0x2b*0xc1+0x4070]];else{const _0x2be03d=_0x5af15c[_0x5af15c['length']-(0xca0*-0x1+-0x1454+0x20f5)];_0x2540c3=[_0x2be03d];}if(!groupQueues[_0x25e68f(0x16f)](_0x4179b8))groupQueues[_0x25e68f(0x18a)](_0x4179b8,new Set());const _0x526e21=groupQueues['get'](_0x4179b8);for(const _0x135549 of _0x2540c3)_0x526e21[_0x25e68f(0x10b)](_0x135549);if(groupTimers[_0x25e68f(0x16f)](_0x4179b8))try{clearTimeout(groupTimers['get'](_0x4179b8));}catch(_0x2d6226){}const _0x15af2f=Math[_0x25e68f(0x140)](0x1*-0x6e9+0x256d+0x788*-0x4,Number(CFG[_0x25e68f(0x162)+'S']||DEFAULTS[_0x25e68f(0x162)+'S'])),_0x3e6de3=setTimeout(()=>{const _0x1b881e=_0x25e68f;flushGroup(_0x4179b8)[_0x1b881e(0x173)](_0x4b6745=>{});},_0x15af2f);groupTimers[_0x25e68f(0x18a)](_0x4179b8,_0x3e6de3);}catch(_0x24efec){}}function extractGpFromText(_0x537966){const _0x2babeb=_0x3afba6;if(!_0x537966)return null;const _0x99ee7a=_0x537966[_0x2babeb(0x16a)](/\r?\n/)[_0x2babeb(0x1f5)](_0x180f69=>_0x180f69['replace'](/\r/g,''));if(!_0x99ee7a[_0x2babeb(0x152)])return null;let _0x31a51f=(_0x99ee7a[-0x1578+0x25*0xa3+-0x217*0x1]||'')[_0x2babeb(0x13c)](),_0x2a35d8=_0x99ee7a[_0x2babeb(0x12d)](0x1*-0x1fde+0x5*0x3b+0x4*0x7ae);const _0x4c20f9=_0x31a51f[_0x2babeb(0x174)](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);if(_0x4c20f9){const _0x1fa1b4=(_0x4c20f9[0x123+0x1fa9+-0x20ca]||'')[_0x2babeb(0x13c)]();return{'gp':_0x1fa1b4,'sanitizedFirstLine':(_0x4c20f9[0x1*0x1270+0xb2d*-0x1+-0x3a1*0x2]||'')[_0x2babeb(0x13c)](),'bodyLines':_0x2a35d8};}let _0x23613f=-(0x3b9+0x1*-0x127+0xdb*-0x3);for(let _0x41b281=_0x2a35d8[_0x2babeb(0x152)]-(0x2a*-0xc2+-0xb3f+0x2b14);_0x41b281>=-0x2fa+-0x1e8e+0x2188;_0x41b281--){if(String(_0x2a35d8[_0x41b281]||'')[_0x2babeb(0x13c)]()[_0x2babeb(0x152)]>0x3*0x112+-0x1*0x138b+0x1055){_0x23613f=_0x41b281;break;}}if(_0x23613f>=-0x1451*0x1+-0x25f9+0x67a*0x9){const _0x3744a3=String(_0x2a35d8[_0x23613f]||'')['trim'](),_0x75f227=_0x3744a3[_0x2babeb(0x174)](/^gp[:\s]*([^\s,]+)\s*$/i);if(_0x75f227){const _0x15bbcc=(_0x75f227[-0x138d+-0x99d+-0x189*-0x13]||'')[_0x2babeb(0x13c)]();return _0x2a35d8[_0x2babeb(0xfb)](_0x23613f,-0x90*-0xb+0x6bf+-0xcee),{'gp':_0x15bbcc,'sanitizedFirstLine':_0x31a51f,'bodyLines':_0x2a35d8};}}return{'gp':null,'sanitizedFirstLine':_0x31a51f,'bodyLines':_0x2a35d8};}export async function initialize(_0x4371a1){const _0x52730d=_0x3afba6;if(!_0x4371a1)throw new Error(_0x52730d(0x103)+'itialize\x20r'+_0x52730d(0x1fc)+_0x52730d(0x17c));botRef=_0x4371a1,setupSendApi(_0x4371a1);try{const _0x4c9571=getConfig()||{},_0x347b38=_0x4c9571&&_0x4c9571['WELCOME']?_0x4c9571['WELCOME']:{};CFG[_0x52730d(0xf4)+_0x52730d(0xfe)]=typeof _0x347b38[_0x52730d(0xf4)+_0x52730d(0xfe)]===_0x52730d(0x1be)?_0x347b38['DEFAULT_EN'+_0x52730d(0xfe)]:DEFAULTS[_0x52730d(0xf4)+_0x52730d(0xfe)],CFG[_0x52730d(0x1ae)+_0x52730d(0x1dd)+'_MS']=Number[_0x52730d(0x1bd)](_0x347b38[_0x52730d(0x1ae)+_0x52730d(0x1dd)+'_MS'])?_0x347b38[_0x52730d(0x1ae)+_0x52730d(0x1dd)+_0x52730d(0x193)]:DEFAULTS[_0x52730d(0x1ae)+_0x52730d(0x1dd)+'_MS'],CFG[_0x52730d(0x177)+_0x52730d(0x1ee)]=Number[_0x52730d(0x1bd)](_0x347b38[_0x52730d(0x177)+_0x52730d(0x1ee)])?_0x347b38['WHATSAPP_G'+_0x52730d(0x1ee)]:DEFAULTS[_0x52730d(0x177)+'ROUP_MAX'],CFG[_0x52730d(0x162)+'S']=Number[_0x52730d(0x1bd)](_0x347b38[_0x52730d(0x162)+'S'])?_0x347b38['DEBOUNCE_M'+'S']:DEFAULTS[_0x52730d(0x162)+'S'];}catch(_0x4f0402){CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x1fc914=[])=>{const _0x16d5cd=_0x52730d;try{const _0x3261d8=getConfig()||{},_0x5a1c23=_0x3261d8&&_0x3261d8[_0x16d5cd(0x200)]?_0x3261d8['WELCOME']:{};CFG['DEFAULT_EN'+_0x16d5cd(0xfe)]=typeof _0x5a1c23[_0x16d5cd(0xf4)+_0x16d5cd(0xfe)]==='boolean'?_0x5a1c23[_0x16d5cd(0xf4)+_0x16d5cd(0xfe)]:DEFAULTS[_0x16d5cd(0xf4)+_0x16d5cd(0xfe)],CFG[_0x16d5cd(0x1ae)+_0x16d5cd(0x1dd)+_0x16d5cd(0x193)]=Number[_0x16d5cd(0x1bd)](_0x5a1c23[_0x16d5cd(0x1ae)+'_CACHE_TTL'+'_MS'])?_0x5a1c23[_0x16d5cd(0x1ae)+_0x16d5cd(0x1dd)+'_MS']:DEFAULTS['GROUP_SIZE'+_0x16d5cd(0x1dd)+_0x16d5cd(0x193)],CFG['WHATSAPP_G'+'ROUP_MAX']=Number['isInteger'](_0x5a1c23['WHATSAPP_G'+'ROUP_MAX'])?_0x5a1c23[_0x16d5cd(0x177)+'ROUP_MAX']:DEFAULTS[_0x16d5cd(0x177)+_0x16d5cd(0x1ee)],CFG[_0x16d5cd(0x162)+'S']=Number[_0x16d5cd(0x1bd)](_0x5a1c23[_0x16d5cd(0x162)+'S'])?_0x5a1c23['DEBOUNCE_M'+'S']:DEFAULTS[_0x16d5cd(0x162)+'S'];}catch(_0x2fa031){}});}catch(_0x13f6c8){}try{await ensureSchema();try{botRef['on']('group-part'+_0x52730d(0x10d)+'pdate',gpUpdateHandler),info(_0x52730d(0x1f8)+_0x52730d(0x179)+_0x52730d(0x16b)+_0x52730d(0x1b7)+_0x52730d(0x1df)+_0x52730d(0x186));}catch(_0x586748){warn(_0x52730d(0x1f8)+_0x52730d(0x10f)+_0x52730d(0x125)+_0x52730d(0x129)+(_0x586748?.[_0x52730d(0x19c)]||_0x586748));}info(_0x52730d(0x1f8)+'initialize'+'d');}catch(_0x478de1){error(_0x478de1,_0x52730d(0x1f8)+_0x52730d(0x121)+_0x52730d(0x18e)+(_0x478de1?.[_0x52730d(0x19c)]||_0x478de1));throw _0x478de1;}}export async function onMessage(_0x7cb80a,_0x420da8){const _0x42edfd=_0x3afba6;try{if(!_0x7cb80a||!_0x7cb80a[_0x42edfd(0x14c)]||!_0x7cb80a[_0x42edfd(0x19c)]||!_0x420da8)return;const _0x5f4d1b=String(_0x7cb80a['key'][_0x42edfd(0x10a)]||'')+'::'+String(_0x7cb80a[_0x42edfd(0x14c)]['id']||_0x7cb80a[_0x42edfd(0x14c)][_0x42edfd(0x1df)+'t']||'');if(isProcessed(_0x5f4d1b))return;markProcessed(_0x5f4d1b);const _0x1f4aa4=String(extractTextFromMessage(_0x7cb80a)||'');if(!_0x1f4aa4[_0x42edfd(0x13c)]())return;let _0x188778='',_0x5bd29c=![];if(_0x7cb80a[_0x42edfd(0x108)]){const _0x5315cc=(_0x1f4aa4[_0x42edfd(0x13c)]()[_0x42edfd(0x16a)](/\s+/)[0x15c5+-0x65d+-0x3a*0x44]||'')[_0x42edfd(0x17d)+'e']();commands[_0x42edfd(0x146)](_0x5315cc)&&(_0x188778=_0x5315cc,_0x5bd29c=!![]);}else{const _0x518d3b=(_0x1f4aa4['split'](/\r?\n/)[-0x247b+-0xd13*0x2+0x3ea1]||'')[_0x42edfd(0x13c)](),_0x317086=(_0x518d3b[_0x42edfd(0x16a)](/\s+/)[-0x4c2+0x1ea5+-0x19e3]||'')[_0x42edfd(0x17d)+'e']();commands[_0x42edfd(0x146)](_0x317086)&&(_0x188778=_0x317086,_0x5bd29c=!![]);}if(!_0x5bd29c)return;const _0x90755e=_0x7cb80a[_0x42edfd(0x14c)][_0x42edfd(0x10a)],_0x38d4d0=typeof _0x90755e===_0x42edfd(0x1b6)&&_0x90755e[_0x42edfd(0x1d4)](_0x42edfd(0x181));if(!_0x38d4d0)return;if(!await isadmin(botRef,_0x7cb80a))return;const _0x140fca=_0x7cb80a['key']?.[_0x42edfd(0x1df)+'t']||_0x7cb80a['key']?.['from']||_0x7cb80a[_0x42edfd(0x14c)]?.[_0x42edfd(0x10a)]||'',_0x537e06=String(_0x140fca||'')['split']('@')[-0x1b*-0x19+0x1296+-0x1539],_0x39e87f=_0x90755e,_0x590d31=extractGpFromText(_0x1f4aa4),_0x46daca=_0x590d31&&_0x590d31[_0x42edfd(0x12c)+'irstLine']?_0x590d31[_0x42edfd(0x12c)+_0x42edfd(0x185)]:_0x1f4aa4[_0x42edfd(0x16a)](/\r?\n/)[-0x342*0x5+0x1858+-0x80e]||'',_0x405f79=_0x590d31&&_0x590d31[_0x42edfd(0x1ab)]?_0x590d31[_0x42edfd(0x1ab)]:_0x1f4aa4[_0x42edfd(0x16a)](/\r?\n/)[_0x42edfd(0x12d)](-0x230c+0x1b1c+0x7f1),_0x470e15=_0x590d31&&_0x590d31['gp']?_0x590d31['gp']:null,_0x4d72ce=[],_0x46f430=[],_0x3c2cc6=_0x46daca['replace'](new RegExp('^'+_0x188778+'\x5cb','i'),'')[_0x42edfd(0x13c)]();if(_0x3c2cc6)_0x4d72ce[_0x42edfd(0x17b)](_0x3c2cc6);_0x4d72ce[_0x42edfd(0x17b)](..._0x405f79);const _0x3a178a=[];for(const _0x9785a8 of _0x4d72ce){const _0x1403e7=_0x9785a8[_0x42edfd(0x13c)]()[_0x42edfd(0x174)](/^profilepic\s+(on|off)$/i);if(_0x1403e7){_0x46f430[_0x42edfd(0x17b)](_0x1403e7[0x6a3*0x1+-0xb39+0x1*0x497][_0x42edfd(0x17d)+'e']());continue;}_0x3a178a['push'](_0x9785a8);}const _0x5fd0e8=_0x3a178a[_0x42edfd(0x189)]('\x0a')[_0x42edfd(0x13c)]();let _0x28e630=null;if(_0x46f430['length']>0x928*0x2+0x15d*0xb+-0x1*0x214f){const _0x1caf1c=_0x46f430[_0x46f430[_0x42edfd(0x152)]-(0x6a0+-0xbca+0x52b)];_0x28e630=_0x1caf1c==='on'?0x529+-0x4f*-0x71+-0x2807:0x8*0x443+0x4c5*-0x3+0x5*-0x3f5;}if(_0x188778===_0x42edfd(0x151)){if(!_0x5fd0e8){await sendApiOrFallback(_0x39e87f,'Usage\x20(gro'+'up-only,\x20a'+_0x42edfd(0x1da)+':\x0a'+'wlc\x0a'+('<your\x20mult'+_0x42edfd(0x1b4)+'come\x20messa'+'ge>\x0a')+('Optionally'+_0x42edfd(0x170)+'\x20line\x20\x22pro'+_0x42edfd(0x1d5)+'\x22\x20or\x20\x22prof'+'ilepic\x20off'+'\x22\x20to\x20toggl'+_0x42edfd(0x10c)+'et\x20default'+_0x42edfd(0xf9))+(_0x42edfd(0x190)+'nd\x20saves\x20t'+_0x42edfd(0x13b)+'AULT\x20conne'+_0x42edfd(0x1c5)+'set\x20with\x20/'+'setdefault'+').\x20It\x20will'+'\x20NOT\x20save\x20'+_0x42edfd(0xf6)+'rent\x20group'+_0x42edfd(0x119)+_0x42edfd(0x18c)+'s\x20part\x20of\x20'+'your\x20defau'+_0x42edfd(0x198)));return;}let _0x583077=[];if(_0x470e15){const _0x278e2c=_0x470e15[_0x42edfd(0x13c)]();if(_0x278e2c[_0x42edfd(0x17d)+'e']()===_0x42edfd(0x178))try{if(typeof _0x503953[_0x42edfd(0x14e)+_0x42edfd(0x1c7)]===_0x42edfd(0x167))_0x583077=await _0x503953[_0x42edfd(0x14e)+'ids']();else{await sendApiOrFallback(_0x39e87f,_0x42edfd(0x1e9)+_0x42edfd(0xf5)+_0x42edfd(0x166)+_0x42edfd(0x1ef)+_0x42edfd(0x1e7)+_0x42edfd(0x144)+'.');return;}}catch(_0x5520b5){warn(_0x42edfd(0x1f8)+_0x42edfd(0x10e)+_0x42edfd(0x187)+_0x42edfd(0x1b3)+(_0x5520b5?.[_0x42edfd(0x19c)]||_0x5520b5)),await sendApiOrFallback(_0x39e87f,_0x42edfd(0x1e9)+_0x42edfd(0x199)+_0x42edfd(0x18b));return;}else{const _0x5b2bd1=await _0x503953[_0x42edfd(0x183)+'e']?.(_0x278e2c)[_0x42edfd(0x173)](()=>null);if(_0x5b2bd1)_0x583077=[_0x5b2bd1];else{if(_0x278e2c['includes']('@'))_0x583077=[_0x503953[_0x42edfd(0x1d9)+_0x42edfd(0x153)]?.(_0x278e2c)||_0x278e2c];else{await sendApiOrFallback(_0x39e87f,_0x42edfd(0x111)+_0x42edfd(0x175)+_0x42edfd(0x1ed)+_0x278e2c+(_0x42edfd(0x1fa)+'ups\x20helper'+_0x42edfd(0x143)+_0x42edfd(0x141)+_0x42edfd(0x100)+_0x42edfd(0x1a0)));return;}}}}else{const _0x1d0ed2=await resolveDefaultsToChatJids(_0x537e06);if(!_0x1d0ed2||_0x1d0ed2['length']===0xa6e+0x312*-0x2+-0x44a){await sendApiOrFallback(_0x39e87f,_0x42edfd(0x1a7)+_0x42edfd(0x204)+'ur\x20default'+'\x20connectio'+_0x42edfd(0x14f)+_0x42edfd(0x1f4)+_0x42edfd(0x161));return;}_0x583077=_0x1d0ed2;}const _0x4a6566=[];for(const _0x5e7e0a of _0x583077){try{let _0x3c96ab=await fetchGroupMetadata(_0x5e7e0a),_0x17f160=null;if(_0x3c96ab&&Array[_0x42edfd(0x1ce)](_0x3c96ab['participan'+'ts']))_0x17f160=_0x3c96ab[_0x42edfd(0x1df)+'ts']['length'];else{if(_0x3c96ab&&typeof _0x3c96ab['size']===_0x42edfd(0x134))_0x17f160=_0x3c96ab[_0x42edfd(0x195)];}const _0x11e075=await getWelcomeFromDb(_0x5e7e0a),_0xce0995=_0x11e075?Number(_0x11e075[_0x42edfd(0x15e)]||0x1dae+-0x10a2+-0xd0c):-0x114c+0x3*0xd01+0x11*-0x147,_0x5ae727=_0x17f160&&_0x17f160>-0xda6+-0x3ad*-0x2+0x1*0x64c?_0x17f160:_0xce0995,_0x43f408=_0x11e075?Number(_0x11e075['send_profi'+_0x42edfd(0x1ac)]||0x2004+0x22f5+-0x42f9):-0x1c28+0x1*0x63d+0x15eb,_0x26c089=_0x28e630===null?_0x43f408:_0x28e630,_0xa1dac8=await saveWelcomeToDb(_0x5e7e0a,_0x5fd0e8,_0x5ae727,_0x11e075&&_0x11e075[_0x42edfd(0x1e0)+'d']?_0x11e075[_0x42edfd(0x1e0)+'d']:null,_0x26c089);if(_0xa1dac8){if(_0x5ae727&&_0x5ae727>0x95+0xc48*-0x2+0x17fb)setCachedGroupSize(_0x5e7e0a,_0x5ae727);_0x4a6566[_0x42edfd(0x17b)]({'ok':!![],'msg':'Saved\x20welc'+_0x42edfd(0x1a6)+_0x5e7e0a+(_0x42edfd(0x157)+_0x42edfd(0x107))+(_0x26c089?'on':_0x42edfd(0x13d))+')'});}else _0x4a6566[_0x42edfd(0x17b)]({'ok':![],'msg':'Failed\x20to\x20'+_0x42edfd(0x126)+_0x42edfd(0x1dc)+_0x5e7e0a});}catch(_0xfe1b40){warn(_0x42edfd(0x1f8)+_0x42edfd(0x17a)+'\x20'+_0x5e7e0a+'\x20failed:\x20'+(_0xfe1b40?.[_0x42edfd(0x19c)]||_0xfe1b40)),_0x4a6566[_0x42edfd(0x17b)]({'ok':![],'msg':_0x42edfd(0x117)+_0x42edfd(0x1a3)+_0x5e7e0a+':\x20'+(_0xfe1b40?.[_0x42edfd(0x19c)]||_0xfe1b40)});}}const _0x304b30=_0x4a6566[_0x42edfd(0x1f5)](_0x2d4db0=>(_0x2d4db0['ok']?'‚úÖ\x20':'‚ùå\x20')+_0x2d4db0[_0x42edfd(0x145)]);await sendApiOrFallback(_0x39e87f,_0x42edfd(0x14b)+'ome\x20result'+_0x42edfd(0x160)+_0x304b30['join']('\x0a'));return;}if(_0x188778===_0x42edfd(0x188)){let _0x330015=[];if(_0x470e15){const _0x532f45=_0x470e15[_0x42edfd(0x13c)]();if(_0x532f45[_0x42edfd(0x17d)+'e']()===_0x42edfd(0x178))try{if(typeof _0x503953[_0x42edfd(0x14e)+_0x42edfd(0x1c7)]===_0x42edfd(0x167))_0x330015=await _0x503953[_0x42edfd(0x14e)+'ids']();else{await sendApiOrFallback(_0x39e87f,'gp:\x20all\x20re'+_0x42edfd(0xf5)+_0x42edfd(0x166)+_0x42edfd(0x1ef)+'ueJids\x20not'+'\x20available'+'.');return;}}catch(_0x5b16ce){warn('[welcome]\x20'+_0x42edfd(0x10e)+_0x42edfd(0x187)+_0x42edfd(0x1b3)+(_0x5b16ce?.[_0x42edfd(0x19c)]||_0x5b16ce)),await sendApiOrFallback(_0x39e87f,_0x42edfd(0x1e9)+'solution\x20f'+_0x42edfd(0x18b));return;}else{const _0x399f0c=await _0x503953[_0x42edfd(0x183)+'e']?.(_0x532f45)[_0x42edfd(0x173)](()=>null);if(_0x399f0c)_0x330015=[_0x399f0c];else{if(_0x532f45[_0x42edfd(0x146)]('@'))_0x330015=[_0x503953[_0x42edfd(0x1d9)+'oUserJid']?.(_0x532f45)||_0x532f45];else{await sendApiOrFallback(_0x39e87f,_0x42edfd(0x111)+_0x42edfd(0x175)+_0x42edfd(0x1ed)+_0x532f45+'\x22.');return;}}}}else{const _0x220903=await resolveDefaultsToChatJids(_0x537e06);if(!_0x220903||_0x220903[_0x42edfd(0x152)]===0x22*-0xf3+-0x2115+0x415b){await sendApiOrFallback(_0x39e87f,_0x42edfd(0x171)+_0x42edfd(0x1e8)+'(s)\x20found\x20'+_0x42edfd(0x1e4)+_0x42edfd(0x116)+_0x42edfd(0x1de)+_0x42edfd(0x20c)+_0x42edfd(0x165)+'r\x20ensure\x20y'+_0x42edfd(0x104)+_0x42edfd(0x11b)+_0x42edfd(0x158));return;}_0x330015=_0x220903;}const _0x544c01=[];for(const _0x10e078 of _0x330015){try{const _0x4d0473=await deleteWelcomeFromDb(_0x10e078);_0x4d0473?(groupSizeCache[_0x42edfd(0x101)](_0x10e078),_0x544c01[_0x42edfd(0x17b)]({'ok':!![],'msg':_0x42edfd(0x1c1)+'lcome\x20for\x20'+_0x10e078})):_0x544c01[_0x42edfd(0x17b)]({'ok':![],'msg':_0x42edfd(0x1e3)+_0x42edfd(0x132)+'\x20'+_0x10e078});}catch(_0xe00a07){warn(_0x42edfd(0x1f8)+_0x42edfd(0x1a2)+'or\x20'+_0x10e078+_0x42edfd(0x124)+(_0xe00a07?.[_0x42edfd(0x19c)]||_0xe00a07)),_0x544c01[_0x42edfd(0x17b)]({'ok':![],'msg':_0x42edfd(0x139)+'ting\x20for\x20'+_0x10e078+':\x20'+(_0xe00a07?.[_0x42edfd(0x19c)]||_0xe00a07)});}}const _0xf5cc56=_0x544c01[_0x42edfd(0x1f5)](_0x3ab296=>(_0x3ab296['ok']?'‚úÖ\x20':'‚ùå\x20')+_0x3ab296[_0x42edfd(0x145)]);await sendApiOrFallback(_0x39e87f,_0x42edfd(0x19e)+_0x42edfd(0x115)+_0x42edfd(0x131)+_0xf5cc56[_0x42edfd(0x189)]('\x0a'));return;}return;}catch(_0xbe7dfd){error(_0xbe7dfd,_0x42edfd(0x1f8)+'onMessage\x20'+_0x42edfd(0x133)+(_0xbe7dfd?.[_0x42edfd(0x19c)]||_0xbe7dfd));}}export async function cleanup(){const _0x974f02=_0x3afba6;try{for(const _0x2b12dc of groupTimers['values']())try{clearTimeout(_0x2b12dc);}catch(_0x8c34b5){}groupTimers[_0x974f02(0x1bc)](),groupQueues[_0x974f02(0x1bc)](),groupSizeCache[_0x974f02(0x1bc)]();try{botRef&&typeof botRef['off']===_0x974f02(0x167)&&botRef[_0x974f02(0x13d)]('group-part'+_0x974f02(0x10d)+_0x974f02(0x1b5),gpUpdateHandler),info(_0x974f02(0x1f8)+'stopped\x20li'+_0x974f02(0x1fe));}catch(_0x43003d){}for(const _0x237b68 of processedMessageKeys[_0x974f02(0x156)]())try{clearTimeout(_0x237b68);}catch(_0x2f002e){}processedMessageKeys[_0x974f02(0x1bc)](),profilePicCache[_0x974f02(0x1bc)]();}catch(_0x53bcae){warn('[welcome]\x20'+_0x974f02(0x1c6)+_0x974f02(0x1ba)+(_0x53bcae?.[_0x974f02(0x19c)]||_0x53bcae));}finally{botRef=null,sendApi=null,info(_0x974f02(0x1f8)+_0x974f02(0x1eb));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};