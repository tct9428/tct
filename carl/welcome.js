const _0x4aa74c=_0x1ede;(function(_0x2e06ce,_0x32d077){const _0x519ac7=_0x1ede,_0x45fdc4=_0x2e06ce();while(!![]){try{const _0xa0eb50=parseInt(_0x519ac7(0x13d))/(-0x20f6+-0x6a3+0x279a)*(parseInt(_0x519ac7(0x1ac))/(0x15e+-0xca1+0xb45))+parseInt(_0x519ac7(0x24c))/(0x153*-0xd+-0x1*-0xffd+0x13d)+-parseInt(_0x519ac7(0x1a0))/(0xf99*-0x2+0x1a67+-0x4cf*-0x1)+-parseInt(_0x519ac7(0x231))/(-0x1020+0x3c0+0xc65*0x1)+parseInt(_0x519ac7(0x21d))/(-0x1*-0x1d21+0x3*-0x57e+-0x3d*0x35)*(parseInt(_0x519ac7(0x27f))/(0x1*0x9d+-0x1bfe+0x1b68))+-parseInt(_0x519ac7(0x237))/(0x7f+-0x12*0x19b+0x1c6f)*(parseInt(_0x519ac7(0x195))/(0xa5b+0x14*-0x15b+0x10ca))+parseInt(_0x519ac7(0x1f0))/(-0x11d2+0x1c3a+-0x1*0xa5e)*(parseInt(_0x519ac7(0x149))/(0x17cb+-0x34b*0x4+0x4*-0x2a5));if(_0xa0eb50===_0x32d077)break;else _0x45fdc4['push'](_0x45fdc4['shift']());}catch(_0x3b0366){_0x45fdc4['push'](_0x45fdc4['shift']());}}}(_0x4a96,-0x6c0c5+-0x7*0x2555+0xc88d3));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x51784c from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x4aa74c(0x201);export const version=_0x4aa74c(0x1a4);export const priority=-0xc10+-0x1386+0x2010;export const configKeys=['WELCOME'];export const commands=[_0x4aa74c(0x173),_0x4aa74c(0x20d)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(-0x23f0+-0xb65*-0x3+0x1c6)*(-0x24b*0x3+0x1*0xc20+-0x503)*(-0x209d+0x2*0x12c3+-0x101),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),profilePicCache=new Map(),PROFILE_PIC_TTL_MS=(0x594+0x2548+0x1*-0x2ad7)*(-0x84*0x26+0x1550+0xbe*-0x2)*(0x3a6*-0x7+-0x1*0x242d+0x419f),DEDUPE_TTL_MS=(-0x1d47+-0x2225+0x3f8a)*(-0x5a6*-0x5+0x2122+-0x3978),processedMessageKeys=new Map();function markProcessed(_0x49a2bc){const _0x1de274=_0x4aa74c;if(!_0x49a2bc)return;if(processedMessageKeys['has'](_0x49a2bc))try{clearTimeout(processedMessageKeys['get'](_0x49a2bc));}catch(_0x4c68ae){}const _0x4fc629=setTimeout(()=>processedMessageKeys[_0x1de274(0x193)](_0x49a2bc),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x49a2bc,_0x4fc629);}function isProcessed(_0x4d9dcd){return _0x4d9dcd&&processedMessageKeys['has'](_0x4d9dcd);}async function ensureSchema(){const _0x53e7b8=_0x4aa74c;try{await db['exec'](_0x53e7b8(0x280)+_0x53e7b8(0x153)+'IF\x20NOT\x20EXI'+'STS\x20welcom'+_0x53e7b8(0x166)+_0x53e7b8(0x290)+_0x53e7b8(0x1c3)+_0x53e7b8(0x24d)+_0x53e7b8(0x19a)+_0x53e7b8(0x1ad)+_0x53e7b8(0x158)+_0x53e7b8(0x15d)+'last_size\x20'+_0x53e7b8(0x179)+'FAULT\x200,\x0a\x20'+_0x53e7b8(0x206)+_0x53e7b8(0x284)+_0x53e7b8(0x1b2)+_0x53e7b8(0x281)+_0x53e7b8(0x29e)+'_profilepi'+_0x53e7b8(0x12d)+_0x53e7b8(0x24a)+_0x53e7b8(0x1e9)+_0x53e7b8(0x234)+_0x53e7b8(0x179)+'FAULT\x200\x0a\x20\x20'+_0x53e7b8(0x286)+'\x20');try{await db[_0x53e7b8(0x147)]('ALTER\x20TABL'+_0x53e7b8(0x1f1)+_0x53e7b8(0x23a)+'N\x20send_pro'+_0x53e7b8(0x151)+_0x53e7b8(0x1a2)+_0x53e7b8(0x1cb));}catch(_0x5b77c0){}info(_0x53e7b8(0x191)+_0x53e7b8(0x260)+_0x53e7b8(0x211));}catch(_0x48b95c){error(_0x48b95c,'[welcome]\x20'+_0x53e7b8(0x265)+_0x53e7b8(0x17a));throw _0x48b95c;}}async function saveWelcomeToDb(_0x582563,_0x215cd8,_0x715af7=-0x17f0+-0x2533+0x3d23,_0x37686f=null,_0x7c7363=0x1ce1*-0x1+-0x1*-0x23cf+-0x6ee*0x1){const _0x25b3ed=_0x4aa74c;try{const _0x426d9a=Math['floor'](Date[_0x25b3ed(0x28e)]()/(-0x2*-0xbbd+-0xf*0x19b+0x4d*0xf));return await db[_0x25b3ed(0x200)](_0x25b3ed(0x24e)+'O\x20welcomes'+_0x25b3ed(0x28b)+'d,\x20message'+_0x25b3ed(0x21f)+'e,\x20last_ms'+_0x25b3ed(0x139)+_0x25b3ed(0x19b)+_0x25b3ed(0x1d4)+'_at)\x0a\x20\x20\x20\x20\x20'+'\x20\x20VALUES\x20('+_0x25b3ed(0x230)+_0x25b3ed(0x223)+'\x20\x20\x20\x20ON\x20CON'+_0x25b3ed(0x244)+'p_jid)\x20DO\x20'+_0x25b3ed(0x13e)+_0x25b3ed(0x19a)+_0x25b3ed(0x16b)+_0x25b3ed(0x1e8)+_0x25b3ed(0x25e)+_0x25b3ed(0x219)+_0x25b3ed(0x1d8)+_0x25b3ed(0x194)+_0x25b3ed(0x161)+'\x20\x20\x20\x20\x20last_'+_0x25b3ed(0x145)+_0x25b3ed(0x28f)+_0x25b3ed(0x1f8)+_0x25b3ed(0x252)+_0x25b3ed(0x287)+'epic\x20=\x20exc'+_0x25b3ed(0x183)+_0x25b3ed(0x19b)+_0x25b3ed(0x1e3)+_0x25b3ed(0x256)+_0x25b3ed(0x1c6)+_0x25b3ed(0x22d)+'_at;',[_0x582563,String(_0x215cd8||''),Number(_0x715af7||0x1e4d+-0x727+-0x1726),_0x37686f||null,Number(_0x7c7363||-0x2611+-0x57*-0x1+0x25ba),_0x426d9a]),info(_0x25b3ed(0x191)+_0x25b3ed(0x152)+'ome\x20for\x20'+_0x582563+('\x20(profilep'+'ic=')+_0x7c7363+')'),!![];}catch(_0x3efee4){return warn(_0x25b3ed(0x191)+_0x25b3ed(0x172)+_0x25b3ed(0x217)+'ed\x20for\x20'+_0x582563+':\x20'+(_0x3efee4?.[_0x25b3ed(0x243)]||_0x3efee4)),![];}}async function deleteWelcomeFromDb(_0x54d1a8){const _0x306a35=_0x4aa74c;try{const _0x2c4592=await db[_0x306a35(0x200)](_0x306a35(0x29b)+_0x306a35(0x1d3)+_0x306a35(0x23f)+'up_jid\x20=\x20?',[_0x54d1a8]);return info(_0x306a35(0x191)+_0x306a35(0x222)+_0x306a35(0x278)+_0x54d1a8),_0x2c4592?.['changes']||-0x23e8+0xf28*-0x2+0x4238;}catch(_0x562795){return warn('[welcome]\x20'+_0x306a35(0x29c)+_0x306a35(0x239)+_0x306a35(0x13a)+'\x20'+_0x54d1a8+':\x20'+(_0x562795?.[_0x306a35(0x243)]||_0x562795)),-0xb4c+-0x1fd3+0x53*0x85;}}function _0x4a96(){const _0x407cdf=['ULT\x200;','.jpg','lepic','gp:all\x20res','participan','\x20in\x20','registered','SELECT\x20mes','M\x20welcomes','c,\x20updated','ailed.','iled:\x20','comes\x20SET\x20','size\x20=\x20exc','onfig\x20appl','last_size','onMessage\x20','replace','initialize','\x20found\x20for','No\x20target\x20','https://i-','AULT\x20conne','buttonsRes','c,\x0a\x20\x20\x20\x20\x20\x20\x20','sock','number','d\x20failed,\x20','n(s).\x20Use\x20','xcluded.me','\x0a\x20\x20\x20\x20\x20\x20\x20\x20u','add','ID.','or\x20','sendMessag','o\x20the\x20','tdefault\x20o','26190qcRNBq','E\x20welcomes','come\x20messa','type','_size,\x20las','ated_at\x20FR','url','onWhatsApp','st_msg_id,','et\x20default','me\x20to\x20','deleted\x20pr','subject','rface\x20avai','WHATSAPP_G','ur\x20default','run','welcome','onfig\x20regi','\x20failed:\x20','last_size\x20',').\x20It\x20will','\x20\x20\x20\x20\x20\x20\x20las','wlc\x0a','olution\x20fa','tJids\x20fail','max','values','aultsToCha','delwlc','ome\x20result','you!','sendApi\x20fa','ensured','expiresAt','Welcome\x20to','key','findStored','s\x20part\x20of\x20','eToDb\x20fail','saving\x20for','\x20\x20\x20\x20\x20last_','vious\x20welc','ups\x20helper','oup_jid\x20=\x20','6uPEoUN','t\x20with\x20/se',',\x20last_siz','MEMBER:\x20\x20','getWelcome','deleted\x20we',',\x20?,\x20?)\x0a\x20\x20','notify','\x20listener\x20','rent\x20group','image','tureUrl','onfig\x20hand','\x20to\x20add\x20al','\x20Welcome\x20t','Hi\x20','ed.updated','extendedTe','_CACHE_TTL','?,\x20?,\x20?,\x20?','855715Ezfbeo','\x20(profilep','toString','pdated_at\x20','fetchGroup','(s)\x20found\x20','40fIFQUK','vname','omeFromDb\x20','\x20ADD\x20COLUM','stener','\x20message\x20f','singleSele','\x20missing\x20f','\x20WHERE\x20gro','ge>\x0a','filepic\x20on','resolveNam','message','FLICT(grou','slice','selectedBu','failed\x20to\x20','getConnect','DEFAULT_EN','DEFAULT\x200,','size','499413QoOqaS','IMARY\x20KEY,','INSERT\x20INT','WHERE\x20grou','isInteger','welcome.in','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','imageMessa','includes','ailed:\x20','\x20updated_a','boolean','ler\x20error:','mentions','ttonId','indings\x20er','wId','groupJid','ssage,\x0a\x20\x20\x20','t\x20groupsUt','DB\x20schema\x20','videoMessa','d\x20=\x20?,\x20upd','s\x20WHERE\x20gr','setdefault','ensureSche','oUserJid','msg','llback\x20ima','\x20first.','Error\x20dele','ts_added','s.\x0a','\x20include\x20a','\x20for\x20defau','MatchFromF','fallback\x20s','save\x20welco','WELCOME','sendApiOrF','ROUP_MAX','remoteJid','lts.','i-line\x20wel','lcome\x20for\x20','lt\x20name\x20','ilepic\x20off','\x20alias/jid','resolve\x20yo','ids','quested\x20bu','308854uHFukI','\x0a\x20\x20\x20\x20\x20\x20CRE','T\x20NULL,\x0a\x20\x20','gpUpdateHa','string','t_msg_id\x20T','name','\x20\x20\x20\x20);\x0a\x20\x20\x20','end_profil','stration\x20f','ABLED','ata','\x20(group_ji','r\x20ensure\x20y','Saved\x20welc','now','xcluded.la','\x20\x20\x20group_j','action','FromDb\x20fai','\x22.\x20Use\x20gro','ctReply','toLowerCas','error:\x20','t\x20instance','\x20unless\x20th','xtMessage','random','DELETE\x20FRO','deleteWelc','GROUP_SIZE','\x20\x20\x20\x20\x20\x20send','in\x20your\x20de','push','c\x20INTEGER\x20','last_msg_i','p_jid\x20=\x20?','Could\x20not\x20','DEBOUNCE_M',',\x20using\x20fa','ome\x20','sent\x20welco','itialize\x20r','up-only,\x20a','gp:\x20all\x20re','eToMember\x20','g_id,\x20send','failed\x20for','me\x20for\x20','get','32575RklTWS','UPDATE\x20SET','ts\x20are\x20con','ias\x20or\x20pas','figured.','_MS','length','Unknown\x20gp','msg_id\x20=\x20e','floor','exec','getUniqueJ','2321DILHER','il.getUniq','No\x20welcome','t\x20a\x20defaul','sage,\x20last','profilePic','=\x20?,\x20updat','listRespon','filepic\x20IN','saved\x20welc','ATE\x20TABLE\x20','ueJids\x20not','irstLine','ed\x20keys:\x20','pdate','T\x20NOT\x20NULL','This\x20comma','istener:\x20','\x22\x20to\x20toggl','Usage\x20(gro',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ied.\x20Chang','isAdmin','?\x20WHERE\x20gr','_size,\x0a\x20\x20\x20','@g.us','We\x27re\x20happ','rl\x20for\x20','ults','es\x20(\x0a\x20\x20\x20\x20\x20','ed_at\x20=\x20?\x20','group-part','conversati','r:\x20','essage\x20=\x20e','>\x20üë§YOU\x27RE\x20','ge\x20for\x20','\x20error:\x20','Deleted\x20we','match','ction(s)\x20(','saveWelcom','wlc','caption','for\x20group-','has','ts:\x0a','groupMetad','INTEGER\x20DE','ma\x20failed','invite','jid','failed:\x20','split','send_profi','allback\x20fa','bodyLines','ponseMessa','luded.send','ion\x20failed','seMessage','profilepic','\x20line\x20\x22pro','ated_at\x20=\x20','text','map','delete\x20pre','\x20available','cleaned\x20up','OM\x20welcome','flushGroup','resolveDef','[welcome]\x20','\x27\x20from\x20','delete','luded.last','90603WpUUfx','faults.\x20Se','off','equires\x20bo','Optionally','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','_profilepi','come\x20resul','fetchProfi','set','trim','1179516QGtfOz','no\x20send\x20su','TEGER\x20DEFA','from','3.6.1','o\x20your\x20DEF','updateLast','stopped\x20li','hotReloadC','normalizeT','to\x20the\x20cur','join','4cAkNmy','essage\x20TEX','deleting\x20f','s:\x0a','UPDATE\x20wel','selectedRo','EXT\x20DEFAUL','icipants.u','Delete\x20wel','y\x20to\x20have\x20','ror:\x20','isArray','ewsletter',':\x20\x22','dia/','function','ge.','sanitizedF','ic:\x20','connection','solution\x20f','ed:\x20','filter','id\x20TEXT\x20PR','deletion\x20o','88090068@n','t\x20=\x20exclud','ome\x20for\x20','clear','catch','e\x20per-targ'];_0x4a96=function(){return _0x407cdf;};return _0x4a96();}async function getWelcomeFromDb(_0x545db9){const _0x54ac44=_0x4aa74c;try{const _0x1b189d=await db['get'](_0x54ac44(0x1d2)+_0x54ac44(0x14d)+_0x54ac44(0x1f4)+'t_msg_id,\x20'+_0x54ac44(0x17f)+'lepic,\x20upd'+_0x54ac44(0x1f5)+_0x54ac44(0x18e)+_0x54ac44(0x263)+_0x54ac44(0x21c)+'?',[_0x545db9]);return _0x1b189d||null;}catch(_0x4907d5){return warn(_0x54ac44(0x191)+_0x54ac44(0x221)+_0x54ac44(0x292)+'led\x20for\x20'+_0x545db9+':\x20'+(_0x4907d5?.[_0x54ac44(0x243)]||_0x4907d5)),null;}}async function updateLastMsgIdInDb(_0x137838,_0x49ba60){const _0x3a2c5e=_0x4aa74c;try{const _0x43c4c3=Math['floor'](Date['now']()/(-0x260+-0x262b*-0x1+-0x38b*0x9));return await db[_0x3a2c5e(0x200)](_0x3a2c5e(0x1b0)+'comes\x20SET\x20'+_0x3a2c5e(0x12e)+_0x3a2c5e(0x262)+_0x3a2c5e(0x188)+_0x3a2c5e(0x160)+'oup_jid\x20=\x20'+'?',[_0x49ba60||null,_0x43c4c3,_0x137838]),!![];}catch(_0x3788f7){return warn(_0x3a2c5e(0x191)+_0x3a2c5e(0x1a6)+'MsgIdInDb\x20'+_0x3a2c5e(0x13a)+'\x20'+_0x137838+':\x20'+(_0x3788f7?.[_0x3a2c5e(0x243)]||_0x3788f7)),![];}}function tryBuildSendApiFromBot(_0xc2c938){const _0x4b13d8=_0x4aa74c;if(!_0xc2c938)return null;if(typeof _0xc2c938['sendMessag'+'e']===_0x4b13d8(0x1bb))return async(_0x11a41d,_0x566f9c)=>_0xc2c938[_0x4b13d8(0x1ed)+'e'](_0x11a41d,_0x566f9c);if(_0xc2c938[_0x4b13d8(0x1e4)]&&typeof _0xc2c938[_0x4b13d8(0x1e4)][_0x4b13d8(0x1ed)+'e']===_0x4b13d8(0x1bb))return async(_0x30cdd6,_0x5b9120)=>_0xc2c938[_0x4b13d8(0x1e4)][_0x4b13d8(0x1ed)+'e'](_0x30cdd6,_0x5b9120);return null;}function setupSendApi(_0xef5855){botRef=_0xef5855,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x1b112a,_0x2f4087,_0x29a8dc=[]){const _0x3faf3c=_0x4aa74c;try{if(!_0x1b112a||!_0x2f4087)return null;const _0x326a05=typeof _0x2f4087===_0x3faf3c(0x283)?{'text':String(_0x2f4087)}:_0x2f4087;if(Array[_0x3faf3c(0x1b7)](_0x29a8dc)&&_0x29a8dc['length'])_0x326a05[_0x3faf3c(0x259)]=_0x29a8dc;if(sendApi)try{const _0x58ec46=await sendApi(_0x1b112a,_0x326a05);return _0x58ec46;}catch(_0x66a5e3){return warn('[welcome]\x20'+_0x3faf3c(0x210)+_0x3faf3c(0x1d6)+(_0x66a5e3?.[_0x3faf3c(0x243)]||_0x66a5e3)),null;}else try{if(botRef&&typeof botRef[_0x3faf3c(0x1ed)+'e']==='function')return await botRef[_0x3faf3c(0x1ed)+'e'](_0x1b112a,_0x326a05);else return botRef&&botRef['sock']&&typeof botRef[_0x3faf3c(0x1e4)]['sendMessag'+'e']==='function'?await botRef[_0x3faf3c(0x1e4)][_0x3faf3c(0x1ed)+'e'](_0x1b112a,_0x326a05):(warn(_0x3faf3c(0x191)+_0x3faf3c(0x1a1)+_0x3faf3c(0x1fd)+'lable\x20for\x20'+_0x1b112a),null);}catch(_0x17daad){return warn('[welcome]\x20'+_0x3faf3c(0x270)+'end\x20failed'+':\x20'+(_0x17daad?.['message']||_0x17daad)),null;}}catch(_0x5bb282){return warn(_0x3faf3c(0x191)+_0x3faf3c(0x273)+_0x3faf3c(0x180)+_0x3faf3c(0x1d6)+(_0x5bb282?.[_0x3faf3c(0x243)]||_0x5bb282)),null;}}function extractTextFromMessage(_0x93dc8c){const _0x2794e4=_0x4aa74c;if(!_0x93dc8c||!_0x93dc8c[_0x2794e4(0x243)])return'';const _0x488301=_0x93dc8c[_0x2794e4(0x243)];if(_0x488301['conversati'+'on'])return _0x488301[_0x2794e4(0x169)+'on'];if(_0x488301[_0x2794e4(0x22e)+_0x2794e4(0x299)]?.[_0x2794e4(0x189)])return _0x488301[_0x2794e4(0x22e)+_0x2794e4(0x299)][_0x2794e4(0x189)];if(_0x488301[_0x2794e4(0x253)+'ge']?.['caption'])return _0x488301[_0x2794e4(0x253)+'ge'][_0x2794e4(0x174)];if(_0x488301[_0x2794e4(0x261)+'ge']?.[_0x2794e4(0x174)])return _0x488301[_0x2794e4(0x261)+'ge']['caption'];if(_0x488301[_0x2794e4(0x1e2)+_0x2794e4(0x182)+'ge']?.[_0x2794e4(0x246)+_0x2794e4(0x25a)])return _0x488301[_0x2794e4(0x1e2)+_0x2794e4(0x182)+'ge']['selectedBu'+_0x2794e4(0x25a)];if(_0x488301[_0x2794e4(0x150)+_0x2794e4(0x185)]?.[_0x2794e4(0x23d)+_0x2794e4(0x294)]?.[_0x2794e4(0x1b1)+'wId'])return _0x488301[_0x2794e4(0x150)+_0x2794e4(0x185)]['singleSele'+_0x2794e4(0x294)][_0x2794e4(0x1b1)+_0x2794e4(0x25c)];return'';}async function resolveDefaultsToChatJids(_0x262eba){const _0x460472=_0x4aa74c;try{let _0x584a01;try{_0x584a01=await getDefault(_0x262eba)['catch'](()=>null);}catch(_0x3cbaa3){_0x584a01=null;}if(!_0x584a01||Array['isArray'](_0x584a01)&&_0x584a01[_0x460472(0x143)]===-0xf*0x2f+0x112f+-0xe6e)return[];const _0x33465f=Array[_0x460472(0x1b7)](_0x584a01)?_0x584a01:[_0x584a01],_0x1d5099=[];for(const _0x5044fe of _0x33465f){try{const _0xb3dad3=await getConnection(_0x5044fe)[_0x460472(0x1c9)](()=>null);if(Array['isArray'](_0xb3dad3))_0x1d5099[_0x460472(0x2a0)](..._0xb3dad3);else{if(_0xb3dad3)_0x1d5099[_0x460472(0x2a0)](String(_0xb3dad3));}}catch(_0xc71b8){warn(_0x460472(0x191)+_0x460472(0x248)+_0x460472(0x184)+_0x460472(0x26e)+_0x460472(0x279)+_0x5044fe+':\x20'+(_0xc71b8?.[_0x460472(0x243)]||_0xc71b8));}}const _0x1bcfc5=new Set(),_0x68c000=[];for(const _0x2c554d of _0x1d5099){const _0x1097d2=String(_0x2c554d||'')[_0x460472(0x19f)]();if(!_0x1097d2)continue;!_0x1bcfc5[_0x460472(0x176)](_0x1097d2)&&(_0x1bcfc5[_0x460472(0x1ea)](_0x1097d2),_0x68c000[_0x460472(0x2a0)](_0x1097d2));}return _0x68c000;}catch(_0x604b1a){return warn(_0x460472(0x191)+_0x460472(0x190)+_0x460472(0x20c)+_0x460472(0x209)+_0x460472(0x1c1)+(_0x604b1a?.[_0x460472(0x243)]||_0x604b1a)),[];}}async function fetchGroupMetadata(_0x23ca17){const _0x4c86d1=_0x4aa74c;if(!botRef)return null;try{if(botRef[_0x4c86d1(0x1e4)]&&typeof botRef[_0x4c86d1(0x1e4)]['groupMetad'+_0x4c86d1(0x28a)]===_0x4c86d1(0x1bb))return await botRef['sock']['groupMetad'+_0x4c86d1(0x28a)](_0x23ca17);if(typeof botRef[_0x4c86d1(0x178)+_0x4c86d1(0x28a)]===_0x4c86d1(0x1bb))return await botRef[_0x4c86d1(0x178)+_0x4c86d1(0x28a)](_0x23ca17);return null;}catch(_0x329f73){return warn('[welcome]\x20'+_0x4c86d1(0x235)+'Metadata\x20f'+_0x4c86d1(0x255)+(_0x329f73?.[_0x4c86d1(0x243)]||_0x329f73)),null;}}async function fetchProfilePictureUrl(_0x3b9677){const _0x1f99b1=_0x4aa74c;if(!botRef||!_0x3b9677)return null;try{let _0x5d5102=null;if(botRef[_0x1f99b1(0x1e4)]&&typeof botRef[_0x1f99b1(0x1e4)]['profilePic'+'tureUrl']===_0x1f99b1(0x1bb))_0x5d5102=await botRef['sock'][_0x1f99b1(0x14e)+_0x1f99b1(0x228)](_0x3b9677,_0x1f99b1(0x227))[_0x1f99b1(0x1c9)](()=>null);else typeof botRef[_0x1f99b1(0x14e)+_0x1f99b1(0x228)]===_0x1f99b1(0x1bb)&&(_0x5d5102=await botRef[_0x1f99b1(0x14e)+'tureUrl'](_0x3b9677,'image')[_0x1f99b1(0x1c9)](()=>null));return _0x5d5102;}catch(_0x316c57){return warn(_0x1f99b1(0x191)+_0x1f99b1(0x19d)+'lePictureU'+_0x1f99b1(0x164)+_0x3b9677+'\x20failed:\x20'+(_0x316c57?.[_0x1f99b1(0x243)]||_0x316c57)),null;}}function getCachedProfilePic(_0x420c69){const _0x2a10ff=_0x4aa74c,_0x3aaee9=profilePicCache[_0x2a10ff(0x13c)](_0x420c69);if(!_0x3aaee9)return null;if(Date['now']()>_0x3aaee9[_0x2a10ff(0x212)])return profilePicCache[_0x2a10ff(0x193)](_0x420c69),null;return _0x3aaee9[_0x2a10ff(0x1f6)];}function setCachedProfilePic(_0x525d90,_0x3f186a){const _0x46fec0=_0x4aa74c;if(!_0x525d90)return;profilePicCache['set'](_0x525d90,{'url':_0x3f186a||null,'expiresAt':Date[_0x46fec0(0x28e)]()+PROFILE_PIC_TTL_MS});}function getCachedGroupSize(_0x2f7e96){const _0x4bbcf8=_0x4aa74c,_0x5f20f6=groupSizeCache['get'](_0x2f7e96);if(!_0x5f20f6)return null;if(Date[_0x4bbcf8(0x28e)]()>_0x5f20f6['expiresAt'])return groupSizeCache[_0x4bbcf8(0x193)](_0x2f7e96),null;return _0x5f20f6['size'];}function setCachedGroupSize(_0x14902f,_0x59b9f5){const _0x5541af=_0x4aa74c;groupSizeCache[_0x5541af(0x19e)](_0x14902f,{'size':Number(_0x59b9f5||-0x1*-0x1a15+-0x2a4+0x1771*-0x1),'expiresAt':Date['now']()+(CFG[_0x5541af(0x29d)+_0x5541af(0x22f)+'_MS']||DEFAULTS['GROUP_SIZE'+_0x5541af(0x22f)+'_MS'])});}async function resolveDisplayName(_0x37fb8f){const _0x45ecfc=_0x4aa74c;try{if(!botRef||!_0x37fb8f)return _0x37fb8f?.[_0x45ecfc(0x17e)]?.('@')?.[-0x1142+-0x1*-0x1802+0x36*-0x20]??_0x37fb8f;try{if(typeof botRef[_0x45ecfc(0x1f7)]===_0x45ecfc(0x1bb)){const _0xd7f150=await botRef[_0x45ecfc(0x1f7)](_0x37fb8f);if(Array['isArray'](_0xd7f150)&&_0xd7f150[_0x45ecfc(0x143)]>-0x1bd8+-0xebe*-0x2+-0x1a4){const _0x1ca40b=_0xd7f150[0x73*0x5+-0x1d93+-0x91c*-0x3];if(_0x1ca40b&&(_0x1ca40b[_0x45ecfc(0x224)]||_0x1ca40b[_0x45ecfc(0x238)]||_0x1ca40b[_0x45ecfc(0x285)]))return _0x1ca40b[_0x45ecfc(0x224)]||_0x1ca40b[_0x45ecfc(0x238)]||_0x1ca40b[_0x45ecfc(0x285)];}}if(botRef[_0x45ecfc(0x1e4)]&&typeof botRef[_0x45ecfc(0x1e4)][_0x45ecfc(0x1f7)]==='function'){const _0x3522fc=await botRef[_0x45ecfc(0x1e4)][_0x45ecfc(0x1f7)](_0x37fb8f);if(Array[_0x45ecfc(0x1b7)](_0x3522fc)&&_0x3522fc[_0x45ecfc(0x143)]>0x2582+0x335*-0x4+-0x18ae){const _0x33fdb0=_0x3522fc[-0x7*-0x179+-0x44*0x3+-0x983];if(_0x33fdb0&&(_0x33fdb0[_0x45ecfc(0x224)]||_0x33fdb0['vname']||_0x33fdb0[_0x45ecfc(0x285)]))return _0x33fdb0[_0x45ecfc(0x224)]||_0x33fdb0['vname']||_0x33fdb0['name'];}}}catch(_0xd807cb){}return String(_0x37fb8f)[_0x45ecfc(0x17e)]('@')[-0x5*0x1f3+-0x4c7*0x5+0x21a2]||_0x37fb8f;}catch(_0x189316){return _0x37fb8f?.[_0x45ecfc(0x17e)]?.('@')?.[0x1*0x1bbf+-0x1319+-0x2*0x453]??_0x37fb8f;}}async function findStoredMatchFromFindings(_0x1d1e50=[]){const _0x429714=_0x4aa74c;try{const _0x332f15=await listSudo();if(!Array[_0x429714(0x1b7)](_0x332f15)||_0x332f15['length']===0x22af+-0xab+-0x2204)return null;const _0x2b1f30=new Set(_0x332f15[_0x429714(0x18a)](String));for(const _0x3b8c2c of _0x1d1e50||[]){if(!_0x3b8c2c||typeof _0x3b8c2c[_0x429714(0x17c)]!==_0x429714(0x283))continue;const _0x2afd2e=normalizeToJid(_0x3b8c2c[_0x429714(0x17c)]);if(_0x2afd2e&&_0x2b1f30[_0x429714(0x176)](_0x2afd2e))return _0x2afd2e;if(_0x2b1f30[_0x429714(0x176)](_0x3b8c2c[_0x429714(0x17c)]))return _0x3b8c2c['jid'];const _0x16de3a=String(_0x3b8c2c['jid'])[_0x429714(0x17e)]('@')[0x2251+0x1f32+-0x4183][_0x429714(0x17e)](':')[-0x711+0x5*-0x2c9+0x14fe];if(_0x16de3a)for(const _0x33e9b7 of _0x332f15){const _0x1df807=String(_0x33e9b7)[_0x429714(0x17e)]('@')[-0x5*-0x79d+-0xd*-0x1bd+-0x5*0xc22];if(_0x1df807&&_0x1df807===_0x16de3a)return _0x33e9b7;}}return null;}catch(_0x13d675){return warn(_0x429714(0x191)+_0x429714(0x215)+_0x429714(0x26f)+_0x429714(0x25b)+_0x429714(0x1b6)+(_0x13d675?.[_0x429714(0x243)]||_0x13d675)),null;}}const WELCOME_MEDIA_BASE=_0x4aa74c(0x1e0)+'tct.com/me'+_0x4aa74c(0x1ba),WELCOME_MAX=0x209a+-0x25e*-0x9+-0x35df;function pickRandomCardImage(){const _0x51fe82=_0x4aa74c,_0x3e29fd=Math[_0x51fe82(0x146)](Math[_0x51fe82(0x29a)]()*WELCOME_MAX)+(-0x1d2d+-0x1a9c+-0x1be5*-0x2);return WELCOME_MEDIA_BASE+_0x51fe82(0x201)+_0x3e29fd+_0x51fe82(0x1cc);}function _0x1ede(_0x341a7f,_0x4ac682){const _0x6e5b3e=_0x4a96();return _0x1ede=function(_0x20f6bd,_0x17db9f){_0x20f6bd=_0x20f6bd-(-0x2*0x47+0x2e7*0xd+-0x2400);let _0xa841bd=_0x6e5b3e[_0x20f6bd];return _0xa841bd;},_0x1ede(_0x341a7f,_0x4ac682);}async function sendWelcomeToMember(_0xe4ee03,_0x514bce){const _0x3d6a25=_0x4aa74c;try{const _0x122a08=await getWelcomeFromDb(_0xe4ee03);if(!_0x122a08||!_0x122a08[_0x3d6a25(0x243)])return![];let _0x25c4e3=await fetchGroupMetadata(_0xe4ee03),_0x44b259=_0x25c4e3&&_0x25c4e3[_0x3d6a25(0x1fc)]?_0x25c4e3[_0x3d6a25(0x1fc)]:_0xe4ee03,_0x2c47cb=getCachedGroupSize(_0xe4ee03);if(!_0x2c47cb||_0x2c47cb<=-0x806+0x236+0x2e8*0x2){if(_0x25c4e3&&Array[_0x3d6a25(0x1b7)](_0x25c4e3[_0x3d6a25(0x1cf)+'ts']))_0x2c47cb=_0x25c4e3[_0x3d6a25(0x1cf)+'ts'][_0x3d6a25(0x143)];else{if(_0x25c4e3&&typeof _0x25c4e3[_0x3d6a25(0x24b)]===_0x3d6a25(0x1e5))_0x2c47cb=_0x25c4e3['size'];else{_0x25c4e3=_0x25c4e3||await fetchGroupMetadata(_0xe4ee03);if(_0x25c4e3&&Array[_0x3d6a25(0x1b7)](_0x25c4e3['participan'+'ts']))_0x2c47cb=_0x25c4e3['participan'+'ts'][_0x3d6a25(0x143)];}}if(!_0x2c47cb||_0x2c47cb<=0x35*-0x16+-0x2*-0x71f+-0x50*0x1f)_0x2c47cb=Number(_0x122a08[_0x3d6a25(0x1da)]||0x5a*0x25+0xa20*-0x3+0x115e);else setCachedGroupSize(_0xe4ee03,_0x2c47cb);}const _0xb4587b=CFG[_0x3d6a25(0x1fe)+'ROUP_MAX']||DEFAULTS['WHATSAPP_G'+_0x3d6a25(0x274)],_0x102dc9=await resolveDisplayName(_0x514bce),_0x4f53c0='@'+String(_0x102dc9)['replace'](/\s+/g,'\x20'),_0x281528=[];_0x281528[_0x3d6a25(0x2a0)](_0x3d6a25(0x22c)+_0x4f53c0+(_0x3d6a25(0x22b)+_0x3d6a25(0x1ee))+_0x44b259),_0x281528[_0x3d6a25(0x2a0)](String(_0x122a08[_0x3d6a25(0x243)])[_0x3d6a25(0x19f)]()),_0x281528['push'](_0x3d6a25(0x16c)+_0x3d6a25(0x220)+_0x2c47cb+'/'+_0xb4587b);const _0x518681=_0x281528[_0x3d6a25(0x1ab)]('\x0a\x0a'),_0x49218f=[_0x514bce],_0x4545b2=_0x122a08[_0x3d6a25(0x12e)+'d']||null,_0x4b6a51=Number(_0x122a08['send_profi'+_0x3d6a25(0x1cd)]||0x1406+-0x36e*-0x2+-0x1ae2)===0x3d1+0x463+-0x833;let _0xbb7736=null;_0x4b6a51&&(_0xbb7736=getCachedProfilePic(_0x514bce),!_0xbb7736&&(_0xbb7736=await fetchProfilePictureUrl(_0x514bce),setCachedProfilePic(_0x514bce,_0xbb7736)));!_0xbb7736&&(_0xbb7736=pickRandomCardImage(),!_0x4b6a51?info(_0x3d6a25(0x191)+_0x3d6a25(0x186)+'\x20disabled\x20'+'for\x20'+_0xe4ee03+(_0x3d6a25(0x132)+_0x3d6a25(0x268)+_0x3d6a25(0x16d))+_0x514bce):info(_0x3d6a25(0x191)+_0x3d6a25(0x186)+_0x3d6a25(0x23e)+_0x3d6a25(0x1ec)+_0x514bce+(',\x20using\x20fa'+_0x3d6a25(0x268)+_0x3d6a25(0x1bc))));const _0x226211={'title':_0x3d6a25(0x213)+'\x20'+_0x44b259,'body':_0x3d6a25(0x163)+_0x3d6a25(0x1b5)+_0x3d6a25(0x20f),'thumbnailUrl':_0xbb7736,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x31ee8b=await sendApiOrFallback(_0xe4ee03,{'text':_0x518681,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':'1203632853'+_0x3d6a25(0x1c5)+_0x3d6a25(0x1b8),'newsletterName':'WelcomeBot','serverMessageId':0x7b},'externalAdReply':_0x226211}},_0x49218f);let _0x23a1eb=null;try{_0x31ee8b&&(_0x23a1eb=_0x31ee8b?.[_0x3d6a25(0x214)]&&_0x31ee8b[_0x3d6a25(0x214)]['id']?_0x31ee8b[_0x3d6a25(0x214)]['id']:_0x31ee8b?.[_0x3d6a25(0x243)]&&_0x31ee8b['message']?.['id']?_0x31ee8b['message']['id']:_0x31ee8b?.['id']?_0x31ee8b['id']:null);}catch(_0x49b399){}if(_0x4545b2&&_0x4545b2!==_0x23a1eb)try{if(botRef&&typeof botRef['sendMessag'+'e']===_0x3d6a25(0x1bb))try{await botRef[_0x3d6a25(0x1ed)+'e'](_0xe4ee03,{'delete':{'id':_0x4545b2,'remoteJid':_0xe4ee03,'fromMe':!![]}}),info(_0x3d6a25(0x191)+_0x3d6a25(0x1fb)+'evious\x20wel'+'come\x20'+_0x4545b2+_0x3d6a25(0x1d0)+_0xe4ee03);}catch(_0x2991f7){try{await botRef[_0x3d6a25(0x1e4)]?.[_0x3d6a25(0x1ed)+'e']?.(_0xe4ee03,{'delete':{'id':_0x4545b2,'remoteJid':_0xe4ee03,'fromMe':!![]}}),info(_0x3d6a25(0x191)+_0x3d6a25(0x1fb)+'evious\x20wel'+'come\x20(sock'+')\x20'+_0x4545b2+_0x3d6a25(0x1d0)+_0xe4ee03);}catch(_0x376072){warn(_0x3d6a25(0x191)+_0x3d6a25(0x247)+_0x3d6a25(0x18b)+_0x3d6a25(0x21a)+_0x3d6a25(0x133)+_0x4545b2+_0x3d6a25(0x1d0)+_0xe4ee03+':\x20'+(_0x376072?.[_0x3d6a25(0x243)]||_0x376072));}}}catch(_0x5c01e6){warn(_0x3d6a25(0x191)+_0x3d6a25(0x1c4)+'f\x20previous'+_0x3d6a25(0x23c)+_0x3d6a25(0x255)+(_0x5c01e6?.['message']||_0x5c01e6));}try{_0x23a1eb?await updateLastMsgIdInDb(_0xe4ee03,_0x23a1eb):await updateLastMsgIdInDb(_0xe4ee03,null);}catch(_0x25b0ec){}const _0x91ac9c=Number(_0x122a08[_0x3d6a25(0x1da)]||0xbec+-0x1*-0xbb1+-0xc3*0x1f);if(_0x2c47cb&&_0x2c47cb!==_0x91ac9c)try{await db[_0x3d6a25(0x200)](_0x3d6a25(0x1b0)+_0x3d6a25(0x1d7)+_0x3d6a25(0x204)+_0x3d6a25(0x14f)+_0x3d6a25(0x167)+_0x3d6a25(0x24f)+_0x3d6a25(0x12f),[_0x2c47cb,Math[_0x3d6a25(0x146)](Date[_0x3d6a25(0x28e)]()/(-0xac*0x2+-0x15a2+0x5d*0x4a)),_0xe4ee03]),setCachedGroupSize(_0xe4ee03,_0x2c47cb);}catch(_0x395551){}return info(_0x3d6a25(0x191)+_0x3d6a25(0x134)+_0x3d6a25(0x1fa)+_0x514bce+_0x3d6a25(0x1d0)+_0xe4ee03),!![];}catch(_0x590fd9){return warn(_0x3d6a25(0x191)+'sendWelcom'+_0x3d6a25(0x138)+_0x3d6a25(0x17d)+(_0x590fd9?.[_0x3d6a25(0x243)]||_0x590fd9)),![];}}async function flushGroup(_0x386268){const _0x4c1769=_0x4aa74c;try{const _0x5c74da=groupQueues[_0x4c1769(0x13c)](_0x386268);if(!_0x5c74da||_0x5c74da[_0x4c1769(0x24b)]===-0x3*0x929+0xa*0x180+0xc7b){if(groupTimers['has'](_0x386268)){try{clearTimeout(groupTimers[_0x4c1769(0x13c)](_0x386268));}catch(_0x480b3c){}groupTimers[_0x4c1769(0x193)](_0x386268);}groupQueues[_0x4c1769(0x193)](_0x386268);return;}const _0x1aa516=Array[_0x4c1769(0x1a3)](_0x5c74da);for(const _0x155305 of _0x1aa516){try{await sendWelcomeToMember(_0x386268,_0x155305)[_0x4c1769(0x1c9)](()=>{});}catch(_0x10e0d2){warn('[welcome]\x20'+'flushGroup'+'\x20item\x20fail'+_0x4c1769(0x1c1)+(_0x10e0d2?.[_0x4c1769(0x243)]||_0x10e0d2));}}}catch(_0x224ec5){warn(_0x4c1769(0x191)+_0x4c1769(0x18f)+_0x4c1769(0x16e)+(_0x224ec5?.[_0x4c1769(0x243)]||_0x224ec5));}finally{if(groupTimers[_0x4c1769(0x176)](_0x386268)){try{clearTimeout(groupTimers[_0x4c1769(0x13c)](_0x386268));}catch(_0x9c3ccb){}groupTimers['delete'](_0x386268);}groupQueues[_0x4c1769(0x193)](_0x386268);}}async function gpUpdateHandler(_0x5b48b5){const _0xec16b1=_0x4aa74c;try{if(!_0x5b48b5)return;const _0x300da6=(_0x5b48b5[_0xec16b1(0x291)]||_0x5b48b5[_0xec16b1(0x1f3)]||'')[_0xec16b1(0x233)]()[_0xec16b1(0x295)+'e']();if(_0x300da6!==_0xec16b1(0x1ea)&&_0x300da6!==_0xec16b1(0x17b))return;const _0x4288ed=_0x5b48b5['id']||_0x5b48b5['groupId']||_0x5b48b5[_0xec16b1(0x17c)]||_0x5b48b5[_0xec16b1(0x25d)];if(!_0x4288ed)return;const _0x4d31fb=Array[_0xec16b1(0x1b7)](_0x5b48b5['participan'+'ts'])?_0x5b48b5[_0xec16b1(0x1cf)+'ts']:Array[_0xec16b1(0x1b7)](_0x5b48b5[_0xec16b1(0x1cf)+_0xec16b1(0x26b)])?_0x5b48b5['participan'+'ts_added']:[];if(!_0x4d31fb||_0x4d31fb['length']===-0x2643+0x63d*0x3+0x138c)return;const _0xd1c7c3=_0x4d31fb['map'](_0x226965=>_0x226965['id'])[_0xec16b1(0x1c2)](Boolean);if(!_0xd1c7c3[_0xec16b1(0x143)])return;let _0x19da0e=[];if(_0xd1c7c3[_0xec16b1(0x143)]===0x41*0x11+-0x4*-0x57c+-0x1a40)_0x19da0e=[_0xd1c7c3[-0x8c2+0x1e38+-0x1576]];else{const _0x44f125=_0xd1c7c3[_0xd1c7c3[_0xec16b1(0x143)]-(0x2*-0x903+-0x3a*0x1c+0x185f)];_0x19da0e=[_0x44f125];}if(!groupQueues[_0xec16b1(0x176)](_0x4288ed))groupQueues[_0xec16b1(0x19e)](_0x4288ed,new Set());const _0x93b7f1=groupQueues[_0xec16b1(0x13c)](_0x4288ed);for(const _0x4d024e of _0x19da0e)_0x93b7f1[_0xec16b1(0x1ea)](_0x4d024e);if(groupTimers[_0xec16b1(0x176)](_0x4288ed))try{clearTimeout(groupTimers['get'](_0x4288ed));}catch(_0x295acd){}const _0x947bea=Math[_0xec16b1(0x20a)](-0x882+0x4*0x139+0x1b*0x26,Number(CFG[_0xec16b1(0x131)+'S']||DEFAULTS[_0xec16b1(0x131)+'S'])),_0x3fc01b=setTimeout(()=>{const _0x5aa570=_0xec16b1;flushGroup(_0x4288ed)[_0x5aa570(0x1c9)](_0x5c066e=>warn(_0x5aa570(0x191)+_0x5aa570(0x18f)+_0x5aa570(0x203)+(_0x5c066e?.[_0x5aa570(0x243)]||_0x5c066e)));},_0x947bea);groupTimers[_0xec16b1(0x19e)](_0x4288ed,_0x3fc01b);}catch(_0x1c5eeb){warn(_0xec16b1(0x191)+_0xec16b1(0x282)+'ndler\x20erro'+_0xec16b1(0x16a)+(_0x1c5eeb?.[_0xec16b1(0x243)]||_0x1c5eeb));}}export async function initialize(_0x4cc9b5){const _0x1d1161=_0x4aa74c;if(!_0x4cc9b5)throw new Error(_0x1d1161(0x251)+_0x1d1161(0x135)+_0x1d1161(0x198)+_0x1d1161(0x297));botRef=_0x4cc9b5,setupSendApi(_0x4cc9b5);try{const _0x4a81f8=getConfig()||{},_0x20dfb8=_0x4a81f8&&_0x4a81f8[_0x1d1161(0x272)]?_0x4a81f8[_0x1d1161(0x272)]:{};CFG[_0x1d1161(0x249)+_0x1d1161(0x289)]=typeof _0x20dfb8[_0x1d1161(0x249)+_0x1d1161(0x289)]===_0x1d1161(0x257)?_0x20dfb8[_0x1d1161(0x249)+_0x1d1161(0x289)]:DEFAULTS['DEFAULT_EN'+'ABLED'],CFG[_0x1d1161(0x29d)+_0x1d1161(0x22f)+_0x1d1161(0x142)]=Number[_0x1d1161(0x250)](_0x20dfb8['GROUP_SIZE'+'_CACHE_TTL'+'_MS'])?_0x20dfb8['GROUP_SIZE'+'_CACHE_TTL'+_0x1d1161(0x142)]:DEFAULTS[_0x1d1161(0x29d)+_0x1d1161(0x22f)+_0x1d1161(0x142)],CFG[_0x1d1161(0x1fe)+'ROUP_MAX']=Number[_0x1d1161(0x250)](_0x20dfb8[_0x1d1161(0x1fe)+_0x1d1161(0x274)])?_0x20dfb8['WHATSAPP_G'+_0x1d1161(0x274)]:DEFAULTS[_0x1d1161(0x1fe)+_0x1d1161(0x274)],CFG['DEBOUNCE_M'+'S']=Number['isInteger'](_0x20dfb8[_0x1d1161(0x131)+'S'])?_0x20dfb8['DEBOUNCE_M'+'S']:DEFAULTS[_0x1d1161(0x131)+'S'];}catch(_0x1b7e74){warn(_0x1d1161(0x191)+'config\x20loa'+_0x1d1161(0x1e6)+'using\x20defa'+_0x1d1161(0x165)),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x2e9dc7=[])=>{const _0x53f0f6=_0x1d1161;try{const _0x2ca1d2=getConfig()||{},_0x5d336b=_0x2ca1d2&&_0x2ca1d2[_0x53f0f6(0x272)]?_0x2ca1d2[_0x53f0f6(0x272)]:{};CFG[_0x53f0f6(0x249)+_0x53f0f6(0x289)]=typeof _0x5d336b[_0x53f0f6(0x249)+_0x53f0f6(0x289)]===_0x53f0f6(0x257)?_0x5d336b[_0x53f0f6(0x249)+_0x53f0f6(0x289)]:DEFAULTS[_0x53f0f6(0x249)+'ABLED'],CFG['GROUP_SIZE'+_0x53f0f6(0x22f)+_0x53f0f6(0x142)]=Number[_0x53f0f6(0x250)](_0x5d336b[_0x53f0f6(0x29d)+_0x53f0f6(0x22f)+_0x53f0f6(0x142)])?_0x5d336b[_0x53f0f6(0x29d)+_0x53f0f6(0x22f)+_0x53f0f6(0x142)]:DEFAULTS[_0x53f0f6(0x29d)+_0x53f0f6(0x22f)+_0x53f0f6(0x142)],CFG[_0x53f0f6(0x1fe)+_0x53f0f6(0x274)]=Number['isInteger'](_0x5d336b[_0x53f0f6(0x1fe)+'ROUP_MAX'])?_0x5d336b[_0x53f0f6(0x1fe)+_0x53f0f6(0x274)]:DEFAULTS['WHATSAPP_G'+_0x53f0f6(0x274)],CFG['DEBOUNCE_M'+'S']=Number['isInteger'](_0x5d336b['DEBOUNCE_M'+'S'])?_0x5d336b['DEBOUNCE_M'+'S']:DEFAULTS[_0x53f0f6(0x131)+'S'],info(_0x53f0f6(0x191)+_0x53f0f6(0x1a8)+_0x53f0f6(0x1d9)+_0x53f0f6(0x15e)+_0x53f0f6(0x156)+(_0x2e9dc7||[])[_0x53f0f6(0x1ab)](',\x20'));}catch(_0x2f226e){warn(_0x53f0f6(0x191)+_0x53f0f6(0x1a8)+_0x53f0f6(0x229)+_0x53f0f6(0x258)+'\x20'+(_0x2f226e?.[_0x53f0f6(0x243)]||_0x2f226e));}});}catch(_0x30f4d8){warn(_0x1d1161(0x191)+'hotReloadC'+_0x1d1161(0x202)+_0x1d1161(0x288)+_0x1d1161(0x255)+(_0x30f4d8?.[_0x1d1161(0x243)]||_0x30f4d8));}try{await ensureSchema();try{botRef['on'](_0x1d1161(0x168)+'icipants.u'+_0x1d1161(0x157),gpUpdateHandler),info(_0x1d1161(0x191)+_0x1d1161(0x1d1)+_0x1d1161(0x225)+_0x1d1161(0x175)+_0x1d1161(0x1cf)+'ts.update');}catch(_0x35876d){warn(_0x1d1161(0x191)+'failed\x20to\x20'+'register\x20l'+_0x1d1161(0x15a)+(_0x35876d?.[_0x1d1161(0x243)]||_0x35876d));}info('[welcome]\x20'+_0x1d1161(0x1dd)+'d');}catch(_0x8fc9a0){error(_0x8fc9a0,'[welcome]\x20'+_0x1d1161(0x1dd)+'\x20fatal:\x20'+(_0x8fc9a0?.[_0x1d1161(0x243)]||_0x8fc9a0));throw _0x8fc9a0;}}function extractGpFromText(_0x883cd7){const _0x3e27a0=_0x4aa74c;if(!_0x883cd7)return null;const _0x1f755e=_0x883cd7[_0x3e27a0(0x17e)](/\r?\n/)[_0x3e27a0(0x18a)](_0xf27a56=>_0xf27a56[_0x3e27a0(0x1dc)](/\r/g,''));if(!_0x1f755e['length'])return null;let _0x3ff1bb=(_0x1f755e[-0xc*0x1f6+0x9*-0x1e9+-0xf*-0x2b7]||'')[_0x3e27a0(0x19f)](),_0x44edff=_0x1f755e[_0x3e27a0(0x245)](0x1*0x15cb+-0x8*-0x16b+-0x1*0x2122);const _0x4391a3=_0x3ff1bb[_0x3e27a0(0x170)](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);if(_0x4391a3){const _0x1dab82=(_0x4391a3[-0xe10+-0x1*0x154b+0x235d]||'')[_0x3e27a0(0x19f)]();return{'gp':_0x1dab82,'sanitizedFirstLine':(_0x4391a3[-0x1d59+-0x54c+-0x2*-0x1153]||'')[_0x3e27a0(0x19f)](),'bodyLines':_0x44edff};}let _0x2f9048=-(0x1*-0xdbe+-0x1613+0x23d2);for(let _0x46419a=_0x44edff[_0x3e27a0(0x143)]-(0x216c+-0x21c0+0x55);_0x46419a>=-0x1034+-0x1ad1+0x2b05*0x1;_0x46419a--){if(String(_0x44edff[_0x46419a]||'')['trim']()['length']>0x8c9+-0x1081+0x98*0xd){_0x2f9048=_0x46419a;break;}}if(_0x2f9048>=-0x2*-0xea6+-0x1151+-0xbfb){const _0x41de84=String(_0x44edff[_0x2f9048]||'')[_0x3e27a0(0x19f)](),_0x1c3a43=_0x41de84['match'](/^gp[:\s]*([^\s,]+)\s*$/i);if(_0x1c3a43){const _0x13c23d=(_0x1c3a43[-0x1fc2+-0x1*-0x69d+0x1926]||'')[_0x3e27a0(0x19f)]();return _0x44edff['splice'](_0x2f9048,-0x11*-0x142+-0x378+0x5*-0x395),{'gp':_0x13c23d,'sanitizedFirstLine':_0x3ff1bb,'bodyLines':_0x44edff};}}return{'gp':null,'sanitizedFirstLine':_0x3ff1bb,'bodyLines':_0x44edff};}export async function onMessage(_0x1b0387,_0x176dda){const _0x3ef7a2=_0x4aa74c;try{if(!_0x1b0387||!_0x1b0387['key']||!_0x1b0387['message']||!_0x176dda)return;const _0x16971a=String(_0x1b0387[_0x3ef7a2(0x214)][_0x3ef7a2(0x275)]||'')+'::'+String(_0x1b0387['key']['id']||_0x1b0387[_0x3ef7a2(0x214)][_0x3ef7a2(0x1cf)+'t']||'');if(isProcessed(_0x16971a))return;markProcessed(_0x16971a);const _0x1d6989=String(extractTextFromMessage(_0x1b0387)||'');if(!_0x1d6989[_0x3ef7a2(0x19f)]())return;let _0x2f6043='',_0x812138=![];if(_0x1b0387['isCommand']){const _0x513f87=(_0x1d6989[_0x3ef7a2(0x19f)]()['split'](/\s+/)[-0x2e2+-0x2*-0x86+0x1*0x1d6]||'')['toLowerCas'+'e']();commands[_0x3ef7a2(0x254)](_0x513f87)&&(_0x2f6043=_0x513f87,_0x812138=!![]);}else{const _0xccd68=(_0x1d6989[_0x3ef7a2(0x17e)](/\r?\n/)[-0x1b62+-0x16da+0x323c]||'')[_0x3ef7a2(0x19f)](),_0x4a5603=(_0xccd68[_0x3ef7a2(0x17e)](/\s+/)[0xb8d*-0x1+0x1*0x51b+0x1*0x672]||'')[_0x3ef7a2(0x295)+'e']();commands[_0x3ef7a2(0x254)](_0x4a5603)&&(_0x2f6043=_0x4a5603,_0x812138=!![]);}if(!_0x812138)return;const _0x3fc8d0=_0x1b0387[_0x3ef7a2(0x214)][_0x3ef7a2(0x275)],_0x34b62c=typeof _0x3fc8d0===_0x3ef7a2(0x283)&&_0x3fc8d0['endsWith'](_0x3ef7a2(0x162));if(!_0x34b62c)return;if(!_0x176dda[_0x3ef7a2(0x15f)])return;const _0x38be18=_0x1b0387[_0x3ef7a2(0x214)]?.[_0x3ef7a2(0x1cf)+'t']||_0x1b0387[_0x3ef7a2(0x214)]?.[_0x3ef7a2(0x1a3)]||_0x1b0387[_0x3ef7a2(0x214)]?.[_0x3ef7a2(0x275)]||'',_0x140752=String(_0x38be18||'')['split']('@')[-0x1cf0*0x1+-0x33*0xbf+0x617*0xb],_0x53e3f4=_0x3fc8d0;info(_0x3ef7a2(0x191)+'command\x20\x27'+_0x2f6043+_0x3ef7a2(0x192)+_0x38be18+'\x20in\x20'+_0x3fc8d0);const _0x4d0244=extractGpFromText(_0x1d6989),_0x2ebced=_0x4d0244&&_0x4d0244[_0x3ef7a2(0x1bd)+'irstLine']?_0x4d0244[_0x3ef7a2(0x1bd)+_0x3ef7a2(0x155)]:_0x1d6989[_0x3ef7a2(0x17e)](/\r?\n/)[-0x1c4*-0xd+-0x232a+0x6*0x209]||'',_0xd9a106=_0x4d0244&&_0x4d0244[_0x3ef7a2(0x181)]?_0x4d0244[_0x3ef7a2(0x181)]:_0x1d6989[_0x3ef7a2(0x17e)](/\r?\n/)[_0x3ef7a2(0x245)](-0x36*0x74+0x146+0x1733),_0x2e76de=_0x4d0244&&_0x4d0244['gp']?_0x4d0244['gp']:null,_0x1201b5=[],_0x5c5b3c=[],_0x228bd6=_0x2ebced[_0x3ef7a2(0x1dc)](new RegExp('^'+_0x2f6043+'\x5cb','i'),'')[_0x3ef7a2(0x19f)]();if(_0x228bd6)_0x1201b5['push'](_0x228bd6);_0x1201b5['push'](..._0xd9a106);const _0x1c2367=[];for(const _0xad1949 of _0x1201b5){const _0xf03f6e=_0xad1949['trim']()[_0x3ef7a2(0x170)](/^profilepic\s+(on|off)$/i);if(_0xf03f6e){_0x5c5b3c[_0x3ef7a2(0x2a0)](_0xf03f6e[-0x1b7d+-0x17*-0xb1+0xb97][_0x3ef7a2(0x295)+'e']());continue;}_0x1c2367['push'](_0xad1949);}const _0x1d9cad=_0x1c2367[_0x3ef7a2(0x1ab)]('\x0a')[_0x3ef7a2(0x19f)]();let _0x1fc10f=null;if(_0x5c5b3c[_0x3ef7a2(0x143)]>-0xefb+-0x137f+0x227a){const _0x30ddb7=_0x5c5b3c[_0x5c5b3c['length']-(0x1*0x469+0x1cf6+-0x215e)];_0x1fc10f=_0x30ddb7==='on'?0x60e*0x5+-0x1939+0x1*-0x50c:-0x44a+-0x1*0xd79+0x11c3;}if(_0x2f6043===_0x3ef7a2(0x173)){if(!_0x1d9cad){await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x15c)+_0x3ef7a2(0x136)+'dmin-only)'+':\x0a'+_0x3ef7a2(0x207)+('<your\x20mult'+_0x3ef7a2(0x277)+_0x3ef7a2(0x1f2)+_0x3ef7a2(0x240))+(_0x3ef7a2(0x199)+_0x3ef7a2(0x26d)+_0x3ef7a2(0x187)+_0x3ef7a2(0x241)+'\x22\x20or\x20\x22prof'+_0x3ef7a2(0x27a)+_0x3ef7a2(0x15b)+_0x3ef7a2(0x1ca)+_0x3ef7a2(0x1f9)+_0x3ef7a2(0x26c))+(_0x3ef7a2(0x159)+'nd\x20saves\x20t'+_0x3ef7a2(0x1a5)+_0x3ef7a2(0x1e1)+_0x3ef7a2(0x171)+'set\x20with\x20/'+'setdefault'+_0x3ef7a2(0x205)+'\x20NOT\x20save\x20'+_0x3ef7a2(0x1aa)+_0x3ef7a2(0x226)+_0x3ef7a2(0x298)+'at\x20group\x20i'+_0x3ef7a2(0x216)+'your\x20defau'+_0x3ef7a2(0x276)));return;}let _0x214315=[];if(_0x2e76de){const _0x4c3347=_0x2e76de[_0x3ef7a2(0x19f)]();if(_0x4c3347[_0x3ef7a2(0x295)+'e']()==='all')try{if(typeof _0x51784c[_0x3ef7a2(0x148)+_0x3ef7a2(0x27d)]==='function')_0x214315=await _0x51784c[_0x3ef7a2(0x148)+_0x3ef7a2(0x27d)]();else{await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x137)+_0x3ef7a2(0x27e)+_0x3ef7a2(0x25f)+_0x3ef7a2(0x14a)+_0x3ef7a2(0x154)+_0x3ef7a2(0x18c)+'.');return;}}catch(_0x4f090c){warn(_0x3ef7a2(0x191)+'gp:all\x20res'+_0x3ef7a2(0x208)+_0x3ef7a2(0x1d6)+(_0x4f090c?.['message']||_0x4f090c)),await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x137)+_0x3ef7a2(0x1c0)+'ailed.');return;}else{const _0x5887c9=await _0x51784c[_0x3ef7a2(0x242)+'e']?.(_0x4c3347)[_0x3ef7a2(0x1c9)](()=>null);if(_0x5887c9)_0x214315=[_0x5887c9];else{if(_0x4c3347['includes']('@'))_0x214315=[_0x51784c[_0x3ef7a2(0x1a9)+_0x3ef7a2(0x266)]?.(_0x4c3347)||_0x4c3347];else{await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x144)+_0x3ef7a2(0x27b)+_0x3ef7a2(0x1b9)+_0x4c3347+(_0x3ef7a2(0x293)+_0x3ef7a2(0x21b)+_0x3ef7a2(0x22a)+_0x3ef7a2(0x140)+'s\x20a\x20full\x20J'+_0x3ef7a2(0x1eb)));return;}}}}else{const _0x5e8da5=await resolveDefaultsToChatJids(_0x140752);if(!_0x5e8da5||_0x5e8da5[_0x3ef7a2(0x143)]===-0xc7*0x1a+0x5*-0x16+0x14a4){await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x130)+_0x3ef7a2(0x27c)+_0x3ef7a2(0x1ff)+'\x20connectio'+_0x3ef7a2(0x1e7)+_0x3ef7a2(0x264)+_0x3ef7a2(0x269));return;}_0x214315=_0x5e8da5;}const _0x32c17c=[];for(const _0x3613cd of _0x214315){try{let _0x10f4e6=await fetchGroupMetadata(_0x3613cd),_0x315503=null;if(_0x10f4e6&&Array[_0x3ef7a2(0x1b7)](_0x10f4e6[_0x3ef7a2(0x1cf)+'ts']))_0x315503=_0x10f4e6[_0x3ef7a2(0x1cf)+'ts']['length'];else{if(_0x10f4e6&&typeof _0x10f4e6['size']===_0x3ef7a2(0x1e5))_0x315503=_0x10f4e6[_0x3ef7a2(0x24b)];}const _0x4bfc91=await getWelcomeFromDb(_0x3613cd),_0x3a1bc5=_0x4bfc91?Number(_0x4bfc91[_0x3ef7a2(0x1da)]||0x37a*-0x5+0x1235+-0xd3):-0x1*-0x1dbe+0x2003+-0x3dc1,_0x348b5f=_0x315503&&_0x315503>-0x1*0x1fc3+-0x1*0x23bb+0x437e?_0x315503:_0x3a1bc5,_0x50bf92=_0x4bfc91?Number(_0x4bfc91[_0x3ef7a2(0x17f)+_0x3ef7a2(0x1cd)]||-0x132d+0x245b+-0x897*0x2):0x57f+-0x12*-0x12f+0x1*-0x1acd,_0x349054=_0x1fc10f===null?_0x50bf92:_0x1fc10f,_0x59eb40=await saveWelcomeToDb(_0x3613cd,_0x1d9cad,_0x348b5f,_0x4bfc91&&_0x4bfc91[_0x3ef7a2(0x12e)+'d']?_0x4bfc91[_0x3ef7a2(0x12e)+'d']:null,_0x349054);if(_0x59eb40){if(_0x348b5f&&_0x348b5f>0x14b4+0x115*0x4+-0x1908)setCachedGroupSize(_0x3613cd,_0x348b5f);_0x32c17c['push']({'ok':!![],'msg':_0x3ef7a2(0x28d)+_0x3ef7a2(0x1c7)+_0x3613cd+(_0x3ef7a2(0x232)+_0x3ef7a2(0x1be))+(_0x349054?'on':_0x3ef7a2(0x197))+')'});}else _0x32c17c[_0x3ef7a2(0x2a0)]({'ok':![],'msg':'Failed\x20to\x20'+_0x3ef7a2(0x271)+_0x3ef7a2(0x13b)+_0x3613cd});}catch(_0x1792dd){warn(_0x3ef7a2(0x191)+_0x3ef7a2(0x218)+'\x20'+_0x3613cd+_0x3ef7a2(0x203)+(_0x1792dd?.[_0x3ef7a2(0x243)]||_0x1792dd)),_0x32c17c[_0x3ef7a2(0x2a0)]({'ok':![],'msg':'Error\x20savi'+'ng\x20for\x20'+_0x3613cd+':\x20'+(_0x1792dd?.[_0x3ef7a2(0x243)]||_0x1792dd)});}}const _0xccf5b3=_0x32c17c['map'](_0x5d55a5=>(_0x5d55a5['ok']?'‚úÖ\x20':'‚ùå\x20')+_0x5d55a5[_0x3ef7a2(0x267)]);await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x28d)+_0x3ef7a2(0x20e)+_0x3ef7a2(0x1af)+_0xccf5b3[_0x3ef7a2(0x1ab)]('\x0a'));return;}if(_0x2f6043===_0x3ef7a2(0x20d)){let _0x5a02c0=[];if(_0x2e76de){const _0x140549=_0x2e76de['trim']();if(_0x140549['toLowerCas'+'e']()==='all')try{if(typeof _0x51784c['getUniqueJ'+'ids']==='function')_0x5a02c0=await _0x51784c[_0x3ef7a2(0x148)+_0x3ef7a2(0x27d)]();else{await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x137)+_0x3ef7a2(0x27e)+'t\x20groupsUt'+'il.getUniq'+_0x3ef7a2(0x154)+'\x20available'+'.');return;}}catch(_0x3ad905){warn(_0x3ef7a2(0x191)+_0x3ef7a2(0x1ce)+_0x3ef7a2(0x208)+_0x3ef7a2(0x1d6)+(_0x3ad905?.[_0x3ef7a2(0x243)]||_0x3ad905)),await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x137)+'solution\x20f'+_0x3ef7a2(0x1d5));return;}else{const _0x141c17=await _0x51784c['resolveNam'+'e']?.(_0x140549)[_0x3ef7a2(0x1c9)](()=>null);if(_0x141c17)_0x5a02c0=[_0x141c17];else{if(_0x140549[_0x3ef7a2(0x254)]('@'))_0x5a02c0=[_0x51784c[_0x3ef7a2(0x1a9)+_0x3ef7a2(0x266)]?.(_0x140549)||_0x140549];else{await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x144)+_0x3ef7a2(0x27b)+_0x3ef7a2(0x1b9)+_0x140549+'\x22.');return;}}}}else{const _0x3833a8=await resolveDefaultsToChatJids(_0x140752);if(!_0x3833a8||_0x3833a8[_0x3ef7a2(0x143)]===-0x1f23+0x1309+-0x1*-0xc1a){await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x1df)+_0x3ef7a2(0x1bf)+_0x3ef7a2(0x236)+_0x3ef7a2(0x29f)+_0x3ef7a2(0x196)+_0x3ef7a2(0x14c)+_0x3ef7a2(0x21e)+_0x3ef7a2(0x1ef)+_0x3ef7a2(0x28c)+'our\x20defaul'+_0x3ef7a2(0x13f)+_0x3ef7a2(0x141));return;}_0x5a02c0=_0x3833a8;}const _0x48800f=[];for(const _0x97547f of _0x5a02c0){try{const _0x1bdd71=await deleteWelcomeFromDb(_0x97547f);_0x1bdd71?(groupSizeCache[_0x3ef7a2(0x193)](_0x97547f),_0x48800f['push']({'ok':!![],'msg':_0x3ef7a2(0x16f)+_0x3ef7a2(0x278)+_0x97547f})):_0x48800f[_0x3ef7a2(0x2a0)]({'ok':![],'msg':_0x3ef7a2(0x14b)+_0x3ef7a2(0x1de)+'\x20'+_0x97547f});}catch(_0x57e0c1){warn(_0x3ef7a2(0x191)+_0x3ef7a2(0x1ae)+_0x3ef7a2(0x1ec)+_0x97547f+_0x3ef7a2(0x203)+(_0x57e0c1?.[_0x3ef7a2(0x243)]||_0x57e0c1)),_0x48800f[_0x3ef7a2(0x2a0)]({'ok':![],'msg':_0x3ef7a2(0x26a)+'ting\x20for\x20'+_0x97547f+':\x20'+(_0x57e0c1?.[_0x3ef7a2(0x243)]||_0x57e0c1)});}}const _0x1df2af=_0x48800f['map'](_0x38fbc3=>(_0x38fbc3['ok']?'‚úÖ\x20':'‚ùå\x20')+_0x38fbc3[_0x3ef7a2(0x267)]);await sendApiOrFallback(_0x53e3f4,_0x3ef7a2(0x1b4)+_0x3ef7a2(0x19c)+_0x3ef7a2(0x177)+_0x1df2af[_0x3ef7a2(0x1ab)]('\x0a'));return;}return;}catch(_0x3fdbde){error(_0x3fdbde,_0x3ef7a2(0x191)+_0x3ef7a2(0x1db)+_0x3ef7a2(0x296)+(_0x3fdbde?.[_0x3ef7a2(0x243)]||_0x3fdbde));}}export async function cleanup(){const _0x5383ab=_0x4aa74c;try{for(const _0x1e1248 of groupTimers[_0x5383ab(0x20b)]())try{clearTimeout(_0x1e1248);}catch(_0x7cf435){}groupTimers['clear'](),groupQueues[_0x5383ab(0x1c8)](),groupSizeCache[_0x5383ab(0x1c8)]();try{botRef&&typeof botRef[_0x5383ab(0x197)]==='function'&&botRef['off'](_0x5383ab(0x168)+_0x5383ab(0x1b3)+_0x5383ab(0x157),gpUpdateHandler),info('[welcome]\x20'+_0x5383ab(0x1a7)+_0x5383ab(0x23b));}catch(_0x26f653){}for(const _0x78eb1c of processedMessageKeys[_0x5383ab(0x20b)]())try{clearTimeout(_0x78eb1c);}catch(_0x553922){}processedMessageKeys['clear'](),profilePicCache[_0x5383ab(0x1c8)]();}catch(_0xe12723){warn('[welcome]\x20'+'cleanup\x20er'+_0x5383ab(0x1b6)+(_0xe12723?.[_0x5383ab(0x243)]||_0xe12723));}finally{botRef=null,sendApi=null,info(_0x5383ab(0x191)+_0x5383ab(0x18d));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};