const _0x10c8e4=_0x4fd7;(function(_0x53998d,_0x2bf723){const _0x2f4611=_0x4fd7,_0x462871=_0x53998d();while(!![]){try{const _0x5985dd=-parseInt(_0x2f4611(0xb1))/(-0x1166+-0x1f68+0x30cf)+parseInt(_0x2f4611(0xb6))/(-0x19bb*-0x1+-0x6b3*-0x3+-0x11*0x2b2)+-parseInt(_0x2f4611(0x11c))/(-0x652+0x14bf+-0xe6a)*(-parseInt(_0x2f4611(0xcd))/(-0x18b9+-0x313*-0xb+0x245*-0x4))+-parseInt(_0x2f4611(0x9f))/(-0x12b9*0x2+0x1*-0x1b2b+0x2*0x2051)*(parseInt(_0x2f4611(0xe0))/(-0x172*0x1b+0x1*0xc1f+0x71*0x3d))+parseInt(_0x2f4611(0x13f))/(0x1cd*0x5+-0x5f+-0x89b*0x1)+-parseInt(_0x2f4611(0x185))/(-0x3*-0x5b4+0x8*-0x232+0x7c)*(-parseInt(_0x2f4611(0x1d7))/(-0x13*0xb5+-0x2*0x844+-0x8*-0x3c0))+-parseInt(_0x2f4611(0x1a5))/(0x1a26+0x2120+-0x3b3c);if(_0x5985dd===_0x2bf723)break;else _0x462871['push'](_0x462871['shift']());}catch(_0x4eecd7){_0x462871['push'](_0x462871['shift']());}}}(_0x5f9f,-0x15*-0x3e3+-0x635b7*0x1+0x1*0x98915));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';function _0x5f9f(){const _0x4e26bb=['\x20found\x20for','groupJid','ction(s)\x20(','notify','\x20ADD\x20COLUM','error:\x20','from','922488eFPRmu','essage\x20=\x20e','We\x27re\x20happ','\x20for\x20defau','for\x20','set\x20with\x20/','itialize\x20r','floor','anaged\x20lis','<your\x20mult','et\x20default','splice','push','1203632853','cleaned\x20up','initialize','groupId','s.\x0a','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','IF\x20NOT\x20EXI','Deleted\x20we','gp:\x20all\x20re','fallback\x20s','size','\x20available','r\x20ensure\x20y','replace','\x20in\x20','olution\x20fa','oUserJid','catch','n(s).\x20Use\x20','2605440FjWpdG','\x20Welcome\x20t','Error\x20savi','quested\x20bu','DEFAULT\x200,','f\x20previous','values','ilepic\x20off','pdated_at\x20','EXT\x20DEFAUL','conversati','Failed\x20to\x20','getConnect','indings\x20er','fetchGroup','E\x20welcomes','\x20\x20\x20\x20\x20\x20\x20las','set','st_msg_id,','registered','off','onfig\x20regi','e,\x20last_ms','group-part','t\x20with\x20/se','ied.\x20Chang','Delete\x20wel','Hi\x20','T\x20NULL,\x0a\x20\x20','esent','last_size\x20','wlc\x0a','delwlc','resolve\x20yo','msg','ponseMessa','jid','\x22\x20to\x20toggl','deletion\x20o','hotReloadC','invite','profilepic','sendApiOrF','setdefault','tureUrl','equires\x20bo','xcluded.la','delete','icipants.u','FAULT\x200,\x0a\x20','9qSuNvz','map','videoMessa','iled:\x20','pdate','i-line\x20wel','last_msg_i','epic\x20=\x20exc','\x22.\x20Use\x20gro','wlc','gp:all\x20res','\x20NOT\x20save\x20','\x20disabled\x20','IMARY\x20KEY,','Usage\x20(gro',',\x20?,\x20?)\x0a\x20\x20','ts:\x0a','send_profi','groupMetad','UPDATE\x20SET','c\x20INTEGER\x20','o\x20the\x20','allback\x20fa','size\x20=\x20exc','mentions','ULT\x200;','split','profilePic','welcome.in','O\x20welcomes','UPDATE\x20wel','DEFAULT_EN','our\x20defaul','ids','bodyLines','ueJids\x20not','exec','xcluded.me','.update','stopped\x20ma','Saved\x20welc','This\x20comma','essage\x20TEX','Unknown\x20gp','ge>\x0a','get','sanitizedF','ctReply','come\x20(sock','istener\x20fo','gpUpdateHa','MsgIdInDb\x20','3990bugsEr','join','OM\x20welcome','ic=','max','in\x20your\x20de','message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','changes',':\x20\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20u','es\x20(\x0a\x20\x20\x20\x20\x20','last_size',').\x20It\x20will','flushGroup','oup_jid\x20=\x20','getUniqueJ','or\x20','182832JZMlmm','end_profil','\x22\x20or\x20\x22prof','saving\x20for','ttonId','822430OShKSx','subject','clear','trim','deleted\x20pr','t\x20groupsUt','d,\x20message','FLICT(grou','register\x20m','WHATSAPP_G','ts_added','_profilepi','action','MatchFromF','WelcomeBot','tct.com/me','no\x20send\x20su','3.5.1','tener:\x20','ndler\x20erro','r\x20group-pa','endsWith','expiresAt','45884JPHUUY','?\x20WHERE\x20gr','DEBOUNCE_M','dmin-only)','\x20(profilep','@g.us','ma\x20failed','fetchProfi','il.getUniq','saveWelcom','length','config\x20loa','irstLine','key','e\x20per-targ','seMessage','ailed.','has','all','3270NpJxTZ','lable\x20for\x20','deleted\x20we','ALTER\x20TABL','\x20\x20\x20\x20ON\x20CON','ler\x20error:','ur\x20default','\x20(group_ji','isArray','faults.\x20Se','rl\x20for\x20','buttonsRes','c,\x0a\x20\x20\x20\x20\x20\x20\x20','ssage,\x0a\x20\x20\x20','Welcome\x20to','ome\x20result','\x20\x20VALUES\x20(','s\x20part\x20of\x20','xtMessage','d\x20=\x20?,\x20upd','\x20first.','image','ups\x20helper','lepic','ID.','ata','tJids\x20fail','toLowerCas','\x20\x20\x20\x20\x20last_','now','ROUP_MAX','Optionally','sent\x20welco','Metadata\x20f','vname','saved\x20welc','ensured','No\x20welcome','boolean','me\x20to\x20','evious\x20wel','lcome\x20for\x20','STS\x20welcom','to\x20the\x20cur','N\x20send_pro','t_msg_id\x20T','connection','delete\x20pre','ome\x20for\x20','ts\x20are\x20con','ror:\x20','=\x20?,\x20updat','AULT\x20conne','TEGER\x20DEFA','GROUP_SIZE','ener\x20if\x20pr','t\x20instance','add','wId','rticipants','63fZPJFG','come\x20resul','sock','me\x20for\x20','id\x20TEXT\x20PR','\x20connectio','eck\x20failed','selectedBu','slice','come\x20messa','FAULT\x200\x0a\x20\x20','match','failed:\x20','\x20\x20\x20group_j','\x20updated_a','name','ewsletter','lePictureU','INTEGER\x20DE','p_jid\x20=\x20?','failed\x20to\x20','you!','T\x20NOT\x20NULL','sendMessag',',\x20using\x20fa','_MS','toString','come\x20','DELETE\x20FRO','ome\x20',',\x20last_siz','\x20failed:\x20','\x20managed\x20l','_at;','function','2447998JEPgfn','DB\x20schema\x20','string','isInteger','\x20error:\x20','run','includes','singleSele','updateLast','c,\x20updated','eToDb\x20fail','\x20line\x20\x22pro','resolveNam','No\x20target\x20','findStored','imageMessa','t_msg_id,\x20','failed\x20for','welcome','rface\x20avai','aultsToCha','eToMember\x20','d\x20failed,\x20','caption','ng\x20for\x20','cleanup\x20er','ABLED','p_jid)\x20DO\x20','\x20unless\x20th','onfig\x20appl','sage,\x20last','normalizeT','tdefault\x20o','deleting\x20f','using\x20defa','?,\x20?,\x20?,\x20?','WELCOME','number','ed_at\x20=\x20?\x20','FromDb\x20fai','y\x20to\x20have\x20','Error\x20dele','type','ed.updated','led\x20for\x20','participan','\x20alias/jid','M\x20welcomes','ed:\x20','_CACHE_TTL','figured.','solution\x20f','onWhatsApp','[welcome]\x20','msg_id\x20=\x20e','ailed:\x20','llback\x20ima','\x0a\x20\x20\x20\x20\x20\x20CRE','extendedTe','\x20WHERE\x20gro','o\x20your\x20DEF','lt\x20name\x20','remoteJid'];_0x5f9f=function(){return _0x4e26bb;};return _0x5f9f();}import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import*as _0x3161f5 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x10c8e4(0x151);export const version=_0x10c8e4(0xc7);export const priority=0x1a63+-0x2033+0x64a;export const configKeys=['WELCOME'];export const commands=['wlc','delwlc'];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(-0x838*0x3+0x62*0x5e+-0xc1*0xf)*(0x1c3d+-0x1012+-0xd*0xeb)*(-0x85+-0xb70+0xfdd),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};function _0x4fd7(_0x103f55,_0x5d81f2){const _0x137718=_0x5f9f();return _0x4fd7=function(_0x120a2b,_0x4fe44a){_0x120a2b=_0x120a2b-(0x3e3+-0x2ec*0x6+0xe36);let _0x863805=_0x137718[_0x120a2b];return _0x863805;},_0x4fd7(_0x103f55,_0x5d81f2);}let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),profilePicCache=new Map(),PROFILE_PIC_TTL_MS=(0x1112+-0xa*0xff+-0x25d*0x3)*(-0x47*0x38+0x3*-0x85f+0x28e1)*(-0xe*0x26e+0x10fd*0x1+0x14ef),DEDUPE_TTL_MS=(-0xcbc+-0x14e9+0xb41*0x3)*(-0x7*0x581+0xf7c+0x1af3),processedMessageKeys=new Map();function markProcessed(_0x28746c){const _0x1e5f22=_0x10c8e4;if(!_0x28746c)return;if(processedMessageKeys[_0x1e5f22(0xde)](_0x28746c))try{clearTimeout(processedMessageKeys['get'](_0x28746c));}catch(_0x5db55a){}const _0x51dbc7=setTimeout(()=>processedMessageKeys[_0x1e5f22(0x1d4)](_0x28746c),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x28746c,_0x51dbc7);}function isProcessed(_0x210a25){const _0x5e2c15=_0x10c8e4;return _0x210a25&&processedMessageKeys[_0x5e2c15(0xde)](_0x210a25);}async function ensureSchema(){const _0x220000=_0x10c8e4;try{await db[_0x220000(0x1fb)](_0x220000(0x178)+'ATE\x20TABLE\x20'+_0x220000(0x198)+_0x220000(0x10a)+_0x220000(0xaa)+_0x220000(0x129)+_0x220000(0x120)+_0x220000(0x1e4)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+_0x220000(0x95)+_0x220000(0x132)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x220000(0x1c3)+'INTEGER\x20DE'+_0x220000(0x1d6)+_0x220000(0x1b5)+_0x220000(0x10d)+_0x220000(0x1ae)+_0x220000(0x1c1)+'\x20\x20\x20\x20\x20\x20send'+'_profilepi'+_0x220000(0x1eb)+_0x220000(0x1a9)+_0x220000(0xa9)+_0x220000(0x1ad)+_0x220000(0x12e)+_0x220000(0x126)+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20');try{await db['exec'](_0x220000(0xe3)+_0x220000(0x1b4)+_0x220000(0x182)+_0x220000(0x10c)+'filepic\x20IN'+_0x220000(0x115)+_0x220000(0x1f0));}catch(_0x4de404){}info(_0x220000(0x174)+_0x220000(0x140)+_0x220000(0x104));}catch(_0x3d42bc){error(_0x3d42bc,_0x220000(0x174)+'ensureSche'+_0x220000(0xd3));throw _0x3d42bc;}}async function saveWelcomeToDb(_0x2a93d7,_0x3bdf20,_0x3c15bc=-0x2*-0x41b+0x14fe+-0x1d34,_0x5f23e2=null,_0x308132=-0x1f16+0x1635+-0x1*-0x8e1){const _0xd2183e=_0x10c8e4;try{const _0x9aab58=Math[_0xd2183e(0x18c)](Date[_0xd2183e(0xfd)]()/(-0x1c1+-0xd95+0x133e));return await db[_0xd2183e(0x144)]('INSERT\x20INT'+_0xd2183e(0x1f4)+_0xd2183e(0xe7)+_0xd2183e(0xbc)+_0xd2183e(0x13a)+_0xd2183e(0x1bb)+'g_id,\x20send'+_0xd2183e(0xc1)+_0xd2183e(0x148)+'_at)\x0a\x20\x20\x20\x20\x20'+_0xd2183e(0xf0)+_0xd2183e(0x162)+_0xd2183e(0x1e6)+_0xd2183e(0xe4)+_0xd2183e(0xbd)+_0xd2183e(0x15a)+_0xd2183e(0x1ea)+_0xd2183e(0x197)+_0xd2183e(0x186)+_0xd2183e(0x1fc)+_0xd2183e(0xed)+_0xd2183e(0xfc)+_0xd2183e(0x1ee)+'luded.last'+'_size,\x0a\x20\x20\x20'+_0xd2183e(0xfc)+_0xd2183e(0x175)+_0xd2183e(0x1d3)+_0xd2183e(0x1b7)+_0xd2183e(0xa6)+_0xd2183e(0xb2)+_0xd2183e(0x1de)+'luded.send'+'_profilepi'+_0xd2183e(0xec)+_0xd2183e(0x12a)+'t\x20=\x20exclud'+_0xd2183e(0x16a)+_0xd2183e(0x13d),[_0x2a93d7,String(_0x3bdf20||''),Number(_0x3c15bc||-0xc2e+0x1d33+0x1105*-0x1),_0x5f23e2||null,Number(_0x308132||0x966+-0x1*-0x53a+-0xea0),_0x9aab58]),info(_0xd2183e(0x174)+_0xd2183e(0x103)+_0xd2183e(0x110)+_0x2a93d7+(_0xd2183e(0xd1)+_0xd2183e(0xa2))+_0x308132+')'),!![];}catch(_0x157745){return warn(_0xd2183e(0x174)+_0xd2183e(0xd6)+_0xd2183e(0x149)+'ed\x20for\x20'+_0x2a93d7+':\x20'+(_0x157745?.[_0xd2183e(0xa5)]||_0x157745)),![];}}async function deleteWelcomeFromDb(_0x527500){const _0x5e2ea2=_0x10c8e4;try{const _0xe97c66=await db[_0x5e2ea2(0x144)](_0x5e2ea2(0x138)+_0x5e2ea2(0x16e)+_0x5e2ea2(0x17a)+'up_jid\x20=\x20?',[_0x527500]);return info(_0x5e2ea2(0x174)+_0x5e2ea2(0xe2)+_0x5e2ea2(0x109)+_0x527500),_0xe97c66?.[_0x5e2ea2(0xa7)]||-0x1*0x100d+-0x1526+-0x2533*-0x1;}catch(_0x41714c){return warn(_0x5e2ea2(0x174)+'deleteWelc'+'omeFromDb\x20'+_0x5e2ea2(0x150)+'\x20'+_0x527500+':\x20'+(_0x41714c?.['message']||_0x41714c)),0x5*-0xde+-0x21c3+0x3*0xcb3;}}async function getWelcomeFromDb(_0x5d77dc){const _0x48203d=_0x10c8e4;try{const _0x358ddc=await db[_0x48203d(0x98)]('SELECT\x20mes'+_0x48203d(0x15d)+'_size,\x20las'+_0x48203d(0x14f)+_0x48203d(0x1e8)+'lepic,\x20upd'+'ated_at\x20FR'+_0x48203d(0xa1)+'s\x20WHERE\x20gr'+'oup_jid\x20=\x20'+'?',[_0x5d77dc]);return _0x358ddc||null;}catch(_0x557a1c){return warn(_0x48203d(0x174)+'getWelcome'+_0x48203d(0x166)+_0x48203d(0x16b)+_0x5d77dc+':\x20'+(_0x557a1c?.[_0x48203d(0xa5)]||_0x557a1c)),null;}}async function updateLastMsgIdInDb(_0x228c5c,_0x38bede){const _0x48f0d0=_0x10c8e4;try{const _0x2415fa=Math['floor'](Date['now']()/(0x205*0x1+-0x168f+0x12a*0x15));return await db[_0x48f0d0(0x144)](_0x48f0d0(0x1f5)+'comes\x20SET\x20'+_0x48f0d0(0x1dd)+_0x48f0d0(0xf3)+'ated_at\x20=\x20'+_0x48f0d0(0xce)+_0x48f0d0(0xae)+'?',[_0x38bede||null,_0x2415fa,_0x228c5c]),!![];}catch(_0x25e8d9){return warn(_0x48f0d0(0x174)+_0x48f0d0(0x147)+_0x48f0d0(0x9e)+_0x48f0d0(0x150)+'\x20'+_0x228c5c+':\x20'+(_0x25e8d9?.[_0x48f0d0(0xa5)]||_0x25e8d9)),![];}}function tryBuildSendApiFromBot(_0x2e7848){const _0x31f7ef=_0x10c8e4;if(!_0x2e7848)return null;if(typeof _0x2e7848['sendMessag'+'e']==='function')return async(_0x5e17ce,_0x5f384d)=>_0x2e7848[_0x31f7ef(0x133)+'e'](_0x5e17ce,_0x5f384d);if(_0x2e7848['sock']&&typeof _0x2e7848[_0x31f7ef(0x11e)][_0x31f7ef(0x133)+'e']===_0x31f7ef(0x13e))return async(_0x2aac01,_0x1cba0e)=>_0x2e7848[_0x31f7ef(0x11e)][_0x31f7ef(0x133)+'e'](_0x2aac01,_0x1cba0e);return null;}function setupSendApi(_0x4ef1b4){botRef=_0x4ef1b4,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x3ab5c5,_0x1cea25,_0x57b362=[]){const _0x1e2f11=_0x10c8e4;try{if(!_0x3ab5c5||!_0x1cea25)return null;const _0x3349b6=typeof _0x1cea25===_0x1e2f11(0x141)?{'text':String(_0x1cea25)}:_0x1cea25;if(Array[_0x1e2f11(0xe8)](_0x57b362)&&_0x57b362[_0x1e2f11(0xd7)])_0x3349b6[_0x1e2f11(0x1ef)]=_0x57b362;if(sendApi)try{const _0x254c60=await sendApi(_0x3ab5c5,_0x3349b6);return _0x254c60;}catch(_0x4487bd){return warn('[welcome]\x20'+'sendApi\x20fa'+_0x1e2f11(0x1da)+(_0x4487bd?.[_0x1e2f11(0xa5)]||_0x4487bd)),null;}else try{if(botRef&&typeof botRef[_0x1e2f11(0x133)+'e']===_0x1e2f11(0x13e))return await botRef[_0x1e2f11(0x133)+'e'](_0x3ab5c5,_0x3349b6);else return botRef&&botRef[_0x1e2f11(0x11e)]&&typeof botRef[_0x1e2f11(0x11e)][_0x1e2f11(0x133)+'e']===_0x1e2f11(0x13e)?await botRef[_0x1e2f11(0x11e)]['sendMessag'+'e'](_0x3ab5c5,_0x3349b6):(warn(_0x1e2f11(0x174)+_0x1e2f11(0xc6)+_0x1e2f11(0x152)+_0x1e2f11(0xe1)+_0x3ab5c5),null);}catch(_0x40240c){return warn(_0x1e2f11(0x174)+_0x1e2f11(0x19b)+'end\x20failed'+':\x20'+(_0x40240c?.[_0x1e2f11(0xa5)]||_0x40240c)),null;}}catch(_0x5b539c){return warn(_0x1e2f11(0x174)+_0x1e2f11(0x1cf)+_0x1e2f11(0x1ed)+_0x1e2f11(0x1da)+(_0x5b539c?.[_0x1e2f11(0xa5)]||_0x5b539c)),null;}}function extractTextFromMessage(_0x899151){const _0x1cc98c=_0x10c8e4;if(!_0x899151||!_0x899151[_0x1cc98c(0xa5)])return'';const _0xa702f8=_0x899151[_0x1cc98c(0xa5)];if(_0xa702f8[_0x1cc98c(0x1af)+'on'])return _0xa702f8[_0x1cc98c(0x1af)+'on'];if(_0xa702f8[_0x1cc98c(0x179)+_0x1cc98c(0xf2)]?.['text'])return _0xa702f8['extendedTe'+'xtMessage']['text'];if(_0xa702f8[_0x1cc98c(0x14e)+'ge']?.['caption'])return _0xa702f8[_0x1cc98c(0x14e)+'ge']['caption'];if(_0xa702f8[_0x1cc98c(0x1d9)+'ge']?.[_0x1cc98c(0x156)])return _0xa702f8[_0x1cc98c(0x1d9)+'ge'][_0x1cc98c(0x156)];if(_0xa702f8[_0x1cc98c(0xeb)+_0x1cc98c(0x1c8)+'ge']?.[_0x1cc98c(0x123)+_0x1cc98c(0xb5)])return _0xa702f8[_0x1cc98c(0xeb)+_0x1cc98c(0x1c8)+'ge'][_0x1cc98c(0x123)+_0x1cc98c(0xb5)];if(_0xa702f8['listRespon'+_0x1cc98c(0xdc)]?.[_0x1cc98c(0x146)+'ctReply']?.['selectedRo'+_0x1cc98c(0x11a)])return _0xa702f8['listRespon'+_0x1cc98c(0xdc)]['singleSele'+_0x1cc98c(0x9a)]['selectedRo'+_0x1cc98c(0x11a)];return'';}async function resolveDefaultsToChatJids(_0x62247){const _0x102e7c=_0x10c8e4;try{let _0x4b862a;try{_0x4b862a=await getDefault(_0x62247)[_0x102e7c(0x1a3)](()=>null);}catch(_0x54cce7){_0x4b862a=null;}if(!_0x4b862a||Array[_0x102e7c(0xe8)](_0x4b862a)&&_0x4b862a[_0x102e7c(0xd7)]===-0x4bd+0x4b*0x23+-0x584*0x1)return[];const _0x16696d=Array['isArray'](_0x4b862a)?_0x4b862a:[_0x4b862a],_0xf086b8=[];for(const _0x15f817 of _0x16696d){try{const _0x3a93e9=await getConnection(_0x15f817)['catch'](()=>null);if(Array['isArray'](_0x3a93e9))_0xf086b8['push'](..._0x3a93e9);else{if(_0x3a93e9)_0xf086b8[_0x102e7c(0x191)](String(_0x3a93e9));}}catch(_0x568796){warn(_0x102e7c(0x174)+_0x102e7c(0x1b1)+'ion\x20failed'+_0x102e7c(0x188)+_0x102e7c(0x17c)+_0x15f817+':\x20'+(_0x568796?.['message']||_0x568796));}}const _0xd09f2e=new Set(),_0x16450a=[];for(const _0x253eee of _0xf086b8){const _0x15fe91=String(_0x253eee||'')['trim']();if(!_0x15fe91)continue;!_0xd09f2e[_0x102e7c(0xde)](_0x15fe91)&&(_0xd09f2e[_0x102e7c(0x119)](_0x15fe91),_0x16450a[_0x102e7c(0x191)](_0x15fe91));}return _0x16450a;}catch(_0x3bc3e1){return warn('[welcome]\x20'+'resolveDef'+_0x102e7c(0x153)+_0x102e7c(0xfa)+_0x102e7c(0x16f)+(_0x3bc3e1?.[_0x102e7c(0xa5)]||_0x3bc3e1)),[];}}async function fetchGroupMetadata(_0x35c5e5){const _0xea5966=_0x10c8e4;if(!botRef)return null;try{if(botRef['sock']&&typeof botRef[_0xea5966(0x11e)]['groupMetad'+_0xea5966(0xf9)]===_0xea5966(0x13e))return await botRef[_0xea5966(0x11e)][_0xea5966(0x1e9)+'ata'](_0x35c5e5);if(typeof botRef[_0xea5966(0x1e9)+_0xea5966(0xf9)]==='function')return await botRef['groupMetad'+_0xea5966(0xf9)](_0x35c5e5);return null;}catch(_0x2e0ca8){return warn('[welcome]\x20'+_0xea5966(0x1b3)+_0xea5966(0x101)+_0xea5966(0x176)+(_0x2e0ca8?.[_0xea5966(0xa5)]||_0x2e0ca8)),null;}}async function fetchProfilePictureUrl(_0x1ff978){const _0x22ce65=_0x10c8e4;if(!botRef||!_0x1ff978)return null;try{let _0x44f51f=null;if(botRef[_0x22ce65(0x11e)]&&typeof botRef[_0x22ce65(0x11e)][_0x22ce65(0x1f2)+_0x22ce65(0x1d1)]===_0x22ce65(0x13e))_0x44f51f=await botRef[_0x22ce65(0x11e)]['profilePic'+_0x22ce65(0x1d1)](_0x1ff978,_0x22ce65(0xf5))[_0x22ce65(0x1a3)](()=>null);else typeof botRef[_0x22ce65(0x1f2)+'tureUrl']==='function'&&(_0x44f51f=await botRef[_0x22ce65(0x1f2)+_0x22ce65(0x1d1)](_0x1ff978,_0x22ce65(0xf5))[_0x22ce65(0x1a3)](()=>null));return _0x44f51f;}catch(_0x518545){return warn(_0x22ce65(0x174)+_0x22ce65(0xd4)+_0x22ce65(0x12d)+_0x22ce65(0xea)+_0x1ff978+_0x22ce65(0x13b)+(_0x518545?.[_0x22ce65(0xa5)]||_0x518545)),null;}}function getCachedProfilePic(_0xdbe2ed){const _0x3eda8=_0x10c8e4,_0x41f774=profilePicCache['get'](_0xdbe2ed);if(!_0x41f774)return null;if(Date[_0x3eda8(0xfd)]()>_0x41f774[_0x3eda8(0xcc)])return profilePicCache[_0x3eda8(0x1d4)](_0xdbe2ed),null;return _0x41f774['url'];}function setCachedProfilePic(_0x4b0558,_0x1753fa){const _0x1c673c=_0x10c8e4;if(!_0x4b0558)return;profilePicCache[_0x1c673c(0x1b6)](_0x4b0558,{'url':_0x1753fa||null,'expiresAt':Date[_0x1c673c(0xfd)]()+PROFILE_PIC_TTL_MS});}function getCachedGroupSize(_0x38cc4f){const _0x3a7169=_0x10c8e4,_0x51a068=groupSizeCache['get'](_0x38cc4f);if(!_0x51a068)return null;if(Date[_0x3a7169(0xfd)]()>_0x51a068[_0x3a7169(0xcc)])return groupSizeCache[_0x3a7169(0x1d4)](_0x38cc4f),null;return _0x51a068[_0x3a7169(0x19c)];}function setCachedGroupSize(_0xb3e558,_0xbc7dd){const _0x592181=_0x10c8e4;groupSizeCache[_0x592181(0x1b6)](_0xb3e558,{'size':Number(_0xbc7dd||0x1d1f+-0x1daa+-0x1*-0x8b),'expiresAt':Date[_0x592181(0xfd)]()+(CFG[_0x592181(0x116)+'_CACHE_TTL'+'_MS']||DEFAULTS[_0x592181(0x116)+'_CACHE_TTL'+_0x592181(0x135)])});}async function resolveDisplayName(_0x4c052d){const _0x4c3cc8=_0x10c8e4;try{if(!botRef||!_0x4c052d)return _0x4c052d?.[_0x4c3cc8(0x1f1)]?.('@')?.[-0x3*0x100+0x1*-0x1ca3+0x1fa3]??_0x4c052d;try{if(typeof botRef[_0x4c3cc8(0x173)]===_0x4c3cc8(0x13e)){const _0x4224da=await botRef[_0x4c3cc8(0x173)](_0x4c052d);if(Array[_0x4c3cc8(0xe8)](_0x4224da)&&_0x4224da['length']>-0x208*0x1+-0xb*-0xbb+-0x1*0x601){const _0x8e78aa=_0x4224da[0x7*-0x4d9+0x1*0x1a96+0x759];if(_0x8e78aa&&(_0x8e78aa['notify']||_0x8e78aa[_0x4c3cc8(0x102)]||_0x8e78aa[_0x4c3cc8(0x12b)]))return _0x8e78aa[_0x4c3cc8(0x181)]||_0x8e78aa[_0x4c3cc8(0x102)]||_0x8e78aa['name'];}}if(botRef[_0x4c3cc8(0x11e)]&&typeof botRef[_0x4c3cc8(0x11e)][_0x4c3cc8(0x173)]==='function'){const _0x3a5f83=await botRef[_0x4c3cc8(0x11e)]['onWhatsApp'](_0x4c052d);if(Array[_0x4c3cc8(0xe8)](_0x3a5f83)&&_0x3a5f83[_0x4c3cc8(0xd7)]>0x1*0x24af+0x5*0x424+-0x3963){const _0x134a25=_0x3a5f83[0x2566*-0x1+-0x5e5*0x3+-0x3715*-0x1];if(_0x134a25&&(_0x134a25[_0x4c3cc8(0x181)]||_0x134a25[_0x4c3cc8(0x102)]||_0x134a25[_0x4c3cc8(0x12b)]))return _0x134a25['notify']||_0x134a25['vname']||_0x134a25[_0x4c3cc8(0x12b)];}}}catch(_0xe3163d){}return String(_0x4c052d)[_0x4c3cc8(0x1f1)]('@')[0x90*0x13+0x22dd+-0x2d8d]||_0x4c052d;}catch(_0x4f6b83){return _0x4c052d?.[_0x4c3cc8(0x1f1)]?.('@')?.[-0x1808+0x14bc*-0x1+0x2cc4]??_0x4c052d;}}async function findStoredMatchFromFindings(_0x38d4dd=[]){const _0x223c18=_0x10c8e4;try{const _0x310660=await listSudo();if(!Array[_0x223c18(0xe8)](_0x310660)||_0x310660[_0x223c18(0xd7)]===0x14de+0x19e1+0x1*-0x2ebf)return null;const _0x165df1=new Set(_0x310660[_0x223c18(0x1d8)](String));for(const _0x46b664 of _0x38d4dd||[]){if(!_0x46b664||typeof _0x46b664['jid']!==_0x223c18(0x141))continue;const _0x29a7e8=normalizeToJid(_0x46b664['jid']);if(_0x29a7e8&&_0x165df1[_0x223c18(0xde)](_0x29a7e8))return _0x29a7e8;if(_0x165df1[_0x223c18(0xde)](_0x46b664[_0x223c18(0x1c9)]))return _0x46b664['jid'];const _0x4602da=String(_0x46b664[_0x223c18(0x1c9)])[_0x223c18(0x1f1)]('@')[0x1276+-0xc10+-0x666][_0x223c18(0x1f1)](':')[-0x14ae+0x1261+0x24d];if(_0x4602da)for(const _0x10982b of _0x310660){const _0x35bd02=String(_0x10982b)[_0x223c18(0x1f1)]('@')[0x1c68*-0x1+0x25e+0xb*0x25e];if(_0x35bd02&&_0x35bd02===_0x4602da)return _0x10982b;}}return null;}catch(_0x5a75fe){return warn(_0x223c18(0x174)+_0x223c18(0x14d)+_0x223c18(0xc3)+_0x223c18(0x1b2)+_0x223c18(0x112)+(_0x5a75fe?.[_0x223c18(0xa5)]||_0x5a75fe)),null;}}const WELCOME_MEDIA_BASE='https://i-'+_0x10c8e4(0xc5)+'dia/',WELCOME_MAX=-0x5*-0x4c7+-0x201e+0x844;function pickRandomCardImage(){const _0x4b4a4c=_0x10c8e4,_0x367581=Math[_0x4b4a4c(0x18c)](Math['random']()*WELCOME_MAX)+(0x62*0x11+-0x1*0x111+-0x570);return WELCOME_MEDIA_BASE+_0x4b4a4c(0x151)+_0x367581+'.jpg';}async function sendWelcomeToMember(_0x5f5724,_0x2ac4c8){const _0x10f114=_0x10c8e4;try{const _0x10c7f0=await getWelcomeFromDb(_0x5f5724);if(!_0x10c7f0||!_0x10c7f0[_0x10f114(0xa5)])return![];let _0x11e861=await fetchGroupMetadata(_0x5f5724),_0x5ba371=_0x11e861&&_0x11e861[_0x10f114(0xb7)]?_0x11e861['subject']:_0x5f5724,_0x6b010c=getCachedGroupSize(_0x5f5724);if(!_0x6b010c||_0x6b010c<=-0xad0+0x2617*-0x1+-0x141*-0x27){if(_0x11e861&&Array['isArray'](_0x11e861['participan'+'ts']))_0x6b010c=_0x11e861[_0x10f114(0x16c)+'ts']['length'];else{if(_0x11e861&&typeof _0x11e861[_0x10f114(0x19c)]==='number')_0x6b010c=_0x11e861['size'];else{_0x11e861=_0x11e861||await fetchGroupMetadata(_0x5f5724);if(_0x11e861&&Array[_0x10f114(0xe8)](_0x11e861[_0x10f114(0x16c)+'ts']))_0x6b010c=_0x11e861[_0x10f114(0x16c)+'ts'][_0x10f114(0xd7)];}}if(!_0x6b010c||_0x6b010c<=0x136e+-0x1*-0x2291+-0x35ff)_0x6b010c=Number(_0x10c7f0['last_size']||-0x12dd+-0x8af+0x1b8c);else setCachedGroupSize(_0x5f5724,_0x6b010c);}const _0x5d0bec=CFG['WHATSAPP_G'+_0x10f114(0xfe)]||DEFAULTS['WHATSAPP_G'+_0x10f114(0xfe)],_0x5c45ed=await resolveDisplayName(_0x2ac4c8),_0x315d91='@'+String(_0x5c45ed)[_0x10f114(0x19f)](/\s+/g,'\x20'),_0xe3cb4e=[];_0xe3cb4e['push'](_0x10f114(0x1c0)+_0x315d91+(_0x10f114(0x1a6)+_0x10f114(0x1ec))+_0x5ba371),_0xe3cb4e[_0x10f114(0x191)](String(_0x10c7f0[_0x10f114(0xa5)])[_0x10f114(0xb9)]()),_0xe3cb4e['push']('>\x20👤YOU\x27RE\x20'+'MEMBER:\x20\x20'+_0x6b010c+'/'+_0x5d0bec);const _0x312caf=_0xe3cb4e['join']('\x0a\x0a'),_0x4fefc4=[_0x2ac4c8],_0x1d59b7=_0x10c7f0[_0x10f114(0x1dd)+'d']||null,_0x108ba0=Number(_0x10c7f0[_0x10f114(0x1e8)+_0x10f114(0xf7)]||0x175*0x3+-0x3*0xbb9+0x1ecc)===0x2678+0x9f9+-0x136*0x28;let _0x403fb9=null;_0x108ba0&&(_0x403fb9=getCachedProfilePic(_0x2ac4c8),!_0x403fb9&&(_0x403fb9=await fetchProfilePictureUrl(_0x2ac4c8),setCachedProfilePic(_0x2ac4c8,_0x403fb9)));!_0x403fb9&&(_0x403fb9=pickRandomCardImage(),!_0x108ba0?info('[welcome]\x20'+_0x10f114(0x1ce)+_0x10f114(0x1e3)+_0x10f114(0x189)+_0x5f5724+(_0x10f114(0x134)+_0x10f114(0x177)+'ge\x20for\x20')+_0x2ac4c8):info(_0x10f114(0x174)+_0x10f114(0x1ce)+'\x20missing\x20f'+_0x10f114(0xb0)+_0x2ac4c8+(_0x10f114(0x134)+_0x10f114(0x177)+'ge.')));const _0x48873d={'title':_0x10f114(0xee)+'\x20'+_0x5ba371,'body':_0x10f114(0x187)+_0x10f114(0x167)+_0x10f114(0x131),'thumbnailUrl':_0x403fb9,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x5905bc=await sendApiOrFallback(_0x5f5724,{'text':_0x312caf,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x10f114(0x192)+'88090068@n'+_0x10f114(0x12c),'newsletterName':_0x10f114(0xc4),'serverMessageId':0x7b},'externalAdReply':_0x48873d}},_0x4fefc4);let _0x3e3339=null;try{_0x5905bc&&(_0x3e3339=_0x5905bc?.[_0x10f114(0xda)]&&_0x5905bc[_0x10f114(0xda)]['id']?_0x5905bc['key']['id']:_0x5905bc?.[_0x10f114(0xa5)]&&_0x5905bc[_0x10f114(0xa5)]?.['id']?_0x5905bc['message']['id']:_0x5905bc?.['id']?_0x5905bc['id']:null);}catch(_0x14d776){}if(_0x1d59b7&&_0x1d59b7!==_0x3e3339)try{if(botRef&&typeof botRef[_0x10f114(0x133)+'e']===_0x10f114(0x13e))try{await botRef[_0x10f114(0x133)+'e'](_0x5f5724,{'delete':{'id':_0x1d59b7,'remoteJid':_0x5f5724,'fromMe':!![]}}),info('[welcome]\x20'+_0x10f114(0xba)+_0x10f114(0x108)+_0x10f114(0x137)+_0x1d59b7+_0x10f114(0x1a0)+_0x5f5724);}catch(_0x418031){try{await botRef[_0x10f114(0x11e)]?.[_0x10f114(0x133)+'e']?.(_0x5f5724,{'delete':{'id':_0x1d59b7,'remoteJid':_0x5f5724,'fromMe':!![]}}),info(_0x10f114(0x174)+_0x10f114(0xba)+'evious\x20wel'+_0x10f114(0x9b)+')\x20'+_0x1d59b7+_0x10f114(0x1a0)+_0x5f5724);}catch(_0x1bed98){warn(_0x10f114(0x174)+'failed\x20to\x20'+_0x10f114(0x10f)+'vious\x20welc'+_0x10f114(0x139)+_0x1d59b7+_0x10f114(0x1a0)+_0x5f5724+':\x20'+(_0x1bed98?.['message']||_0x1bed98));}}}catch(_0x30664c){warn('[welcome]\x20'+_0x10f114(0x1cb)+_0x10f114(0x1aa)+'\x20message\x20f'+_0x10f114(0x176)+(_0x30664c?.[_0x10f114(0xa5)]||_0x30664c));}try{_0x3e3339?await updateLastMsgIdInDb(_0x5f5724,_0x3e3339):await updateLastMsgIdInDb(_0x5f5724,null);}catch(_0x54f0b5){}const _0x2ec0c0=Number(_0x10c7f0[_0x10f114(0xab)]||-0xc24+-0x1*-0x1449+-0x3*0x2b7);if(_0x6b010c&&_0x6b010c!==_0x2ec0c0)try{await db[_0x10f114(0x144)](_0x10f114(0x1f5)+'comes\x20SET\x20'+_0x10f114(0x1c3)+_0x10f114(0x113)+_0x10f114(0x165)+'WHERE\x20grou'+_0x10f114(0x12f),[_0x6b010c,Math[_0x10f114(0x18c)](Date['now']()/(-0x1c17*0x1+-0x4*0x2f7+-0x1*-0x2bdb)),_0x5f5724]),setCachedGroupSize(_0x5f5724,_0x6b010c);}catch(_0x5755ab){}return info(_0x10f114(0x174)+_0x10f114(0x100)+_0x10f114(0x107)+_0x2ac4c8+_0x10f114(0x1a0)+_0x5f5724),!![];}catch(_0x34d119){return warn(_0x10f114(0x174)+'sendWelcom'+_0x10f114(0x154)+_0x10f114(0x128)+(_0x34d119?.[_0x10f114(0xa5)]||_0x34d119)),![];}}async function flushGroup(_0x33755b){const _0x4eee0a=_0x10c8e4;try{const _0x5027e9=groupQueues[_0x4eee0a(0x98)](_0x33755b);if(!_0x5027e9||_0x5027e9['size']===0x1*0x9a1+-0x1*0x1b7a+0x3*0x5f3){if(groupTimers[_0x4eee0a(0xde)](_0x33755b)){try{clearTimeout(groupTimers[_0x4eee0a(0x98)](_0x33755b));}catch(_0x3ad3e5){}groupTimers[_0x4eee0a(0x1d4)](_0x33755b);}groupQueues['delete'](_0x33755b);return;}const _0x138c25=Array[_0x4eee0a(0x184)](_0x5027e9);for(const _0x5de09d of _0x138c25){try{await sendWelcomeToMember(_0x33755b,_0x5de09d)['catch'](()=>{});}catch(_0x8e000){warn(_0x4eee0a(0x174)+'flushGroup'+'\x20item\x20fail'+_0x4eee0a(0x16f)+(_0x8e000?.[_0x4eee0a(0xa5)]||_0x8e000));}}}catch(_0x3ea8eb){warn(_0x4eee0a(0x174)+_0x4eee0a(0xad)+_0x4eee0a(0x143)+(_0x3ea8eb?.['message']||_0x3ea8eb));}finally{if(groupTimers['has'](_0x33755b)){try{clearTimeout(groupTimers['get'](_0x33755b));}catch(_0x4ca7c6){}groupTimers['delete'](_0x33755b);}groupQueues['delete'](_0x33755b);}}async function gpUpdateHandler(_0x5bb442){const _0x519e28=_0x10c8e4;try{if(!_0x5bb442)return;const _0x1d29d0=(_0x5bb442[_0x519e28(0xc2)]||_0x5bb442[_0x519e28(0x169)]||'')[_0x519e28(0x136)]()[_0x519e28(0xfb)+'e']();if(_0x1d29d0!==_0x519e28(0x119)&&_0x1d29d0!==_0x519e28(0x1cd))return;const _0x483e90=_0x5bb442['id']||_0x5bb442[_0x519e28(0x195)]||_0x5bb442[_0x519e28(0x1c9)]||_0x5bb442[_0x519e28(0x17f)];if(!_0x483e90)return;const _0x3c2733=Array['isArray'](_0x5bb442[_0x519e28(0x16c)+'ts'])?_0x5bb442[_0x519e28(0x16c)+'ts']:Array['isArray'](_0x5bb442[_0x519e28(0x16c)+_0x519e28(0xc0)])?_0x5bb442[_0x519e28(0x16c)+_0x519e28(0xc0)]:[];if(!_0x3c2733||_0x3c2733[_0x519e28(0xd7)]===0x20d*-0x4+0x1821*-0x1+0x2055)return;let _0x2cf620=[];if(_0x3c2733[_0x519e28(0xd7)]===0x1d53*0x1+0xfd*0x1f+-0x3bf5)_0x2cf620=[_0x3c2733[-0x16*0xf3+-0xe67+-0x1*-0x2349]];else{const _0x10f3e0=_0x3c2733[_0x3c2733[_0x519e28(0xd7)]-(0x571*0x4+-0x1451+-0x172)];_0x2cf620=[_0x10f3e0];}if(!groupQueues[_0x519e28(0xde)](_0x483e90))groupQueues[_0x519e28(0x1b6)](_0x483e90,new Set());const _0x214920=groupQueues[_0x519e28(0x98)](_0x483e90);for(const _0x4e36a5 of _0x2cf620)_0x214920['add'](_0x4e36a5);if(groupTimers['has'](_0x483e90))try{clearTimeout(groupTimers['get'](_0x483e90));}catch(_0x3adcf5){}const _0x5e6859=Math[_0x519e28(0xa3)](0x1*0xbfe+-0x2*-0x41+-0xc1c,Number(CFG[_0x519e28(0xcf)+'S']||DEFAULTS[_0x519e28(0xcf)+'S'])),_0x1b9842=setTimeout(()=>{const _0x394cbb=_0x519e28;flushGroup(_0x483e90)[_0x394cbb(0x1a3)](_0x19e1e9=>warn('[welcome]\x20'+'flushGroup'+_0x394cbb(0x13b)+(_0x19e1e9?.[_0x394cbb(0xa5)]||_0x19e1e9)));},_0x5e6859);groupTimers['set'](_0x483e90,_0x1b9842);}catch(_0x1def21){warn(_0x519e28(0x174)+_0x519e28(0x9d)+_0x519e28(0xc9)+'r:\x20'+(_0x1def21?.[_0x519e28(0xa5)]||_0x1def21));}}export async function initialize(_0x534d25){const _0x27f64a=_0x10c8e4;if(!_0x534d25)throw new Error(_0x27f64a(0x1f3)+_0x27f64a(0x18b)+_0x27f64a(0x1d2)+_0x27f64a(0x118));botRef=_0x534d25,setupSendApi(_0x534d25);try{const _0x144d91=getConfig()||{},_0x45719e=_0x144d91&&_0x144d91['WELCOME']?_0x144d91[_0x27f64a(0x163)]:{};CFG[_0x27f64a(0x1f6)+_0x27f64a(0x159)]=typeof _0x45719e[_0x27f64a(0x1f6)+_0x27f64a(0x159)]==='boolean'?_0x45719e['DEFAULT_EN'+_0x27f64a(0x159)]:DEFAULTS['DEFAULT_EN'+_0x27f64a(0x159)],CFG[_0x27f64a(0x116)+'_CACHE_TTL'+'_MS']=Number[_0x27f64a(0x142)](_0x45719e[_0x27f64a(0x116)+'_CACHE_TTL'+_0x27f64a(0x135)])?_0x45719e[_0x27f64a(0x116)+'_CACHE_TTL'+'_MS']:DEFAULTS[_0x27f64a(0x116)+_0x27f64a(0x170)+_0x27f64a(0x135)],CFG[_0x27f64a(0xbf)+_0x27f64a(0xfe)]=Number['isInteger'](_0x45719e[_0x27f64a(0xbf)+_0x27f64a(0xfe)])?_0x45719e[_0x27f64a(0xbf)+_0x27f64a(0xfe)]:DEFAULTS[_0x27f64a(0xbf)+_0x27f64a(0xfe)],CFG[_0x27f64a(0xcf)+'S']=Number[_0x27f64a(0x142)](_0x45719e[_0x27f64a(0xcf)+'S'])?_0x45719e[_0x27f64a(0xcf)+'S']:DEFAULTS[_0x27f64a(0xcf)+'S'];}catch(_0x28eeb0){warn(_0x27f64a(0x174)+_0x27f64a(0xd8)+_0x27f64a(0x155)+_0x27f64a(0x161)+'ults'),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x56236e=[])=>{const _0x3db354=_0x27f64a;try{const _0x359b48=getConfig()||{},_0x31e560=_0x359b48&&_0x359b48[_0x3db354(0x163)]?_0x359b48[_0x3db354(0x163)]:{};CFG[_0x3db354(0x1f6)+_0x3db354(0x159)]=typeof _0x31e560[_0x3db354(0x1f6)+_0x3db354(0x159)]===_0x3db354(0x106)?_0x31e560[_0x3db354(0x1f6)+'ABLED']:DEFAULTS['DEFAULT_EN'+'ABLED'],CFG['GROUP_SIZE'+_0x3db354(0x170)+_0x3db354(0x135)]=Number[_0x3db354(0x142)](_0x31e560[_0x3db354(0x116)+_0x3db354(0x170)+_0x3db354(0x135)])?_0x31e560['GROUP_SIZE'+_0x3db354(0x170)+'_MS']:DEFAULTS[_0x3db354(0x116)+_0x3db354(0x170)+'_MS'],CFG[_0x3db354(0xbf)+_0x3db354(0xfe)]=Number['isInteger'](_0x31e560[_0x3db354(0xbf)+_0x3db354(0xfe)])?_0x31e560[_0x3db354(0xbf)+_0x3db354(0xfe)]:DEFAULTS[_0x3db354(0xbf)+_0x3db354(0xfe)],CFG['DEBOUNCE_M'+'S']=Number[_0x3db354(0x142)](_0x31e560[_0x3db354(0xcf)+'S'])?_0x31e560['DEBOUNCE_M'+'S']:DEFAULTS['DEBOUNCE_M'+'S'],info(_0x3db354(0x174)+'hotReloadC'+_0x3db354(0x15c)+_0x3db354(0x1be)+'ed\x20keys:\x20'+(_0x56236e||[])['join'](',\x20'));}catch(_0x5e5ed6){warn(_0x3db354(0x174)+'hotReloadC'+'onfig\x20hand'+_0x3db354(0xe5)+'\x20'+(_0x5e5ed6?.[_0x3db354(0xa5)]||_0x5e5ed6));}});}catch(_0x50fdd0){warn(_0x27f64a(0x174)+_0x27f64a(0x1cc)+_0x27f64a(0x1ba)+'stration\x20f'+_0x27f64a(0x176)+(_0x50fdd0?.[_0x27f64a(0xa5)]||_0x50fdd0));}try{await ensureSchema();try{startManagedListener({'botRef':botRef,'eventName':_0x27f64a(0x1bc)+_0x27f64a(0x1d5)+_0x27f64a(0x1db),'handler':gpUpdateHandler,'moduleName':name}),info(_0x27f64a(0x174)+_0x27f64a(0x1b8)+_0x27f64a(0x13c)+_0x27f64a(0x9c)+_0x27f64a(0xca)+_0x27f64a(0x11b)+_0x27f64a(0x91));}catch(_0x2db91f){warn('[welcome]\x20'+_0x27f64a(0x130)+_0x27f64a(0xbe)+_0x27f64a(0x18d)+_0x27f64a(0xc8)+(_0x2db91f?.[_0x27f64a(0xa5)]||_0x2db91f));}info(_0x27f64a(0x174)+'initialize'+'d');}catch(_0x168890){error(_0x168890,_0x27f64a(0x174)+_0x27f64a(0x194)+'\x20fatal:\x20'+(_0x168890?.['message']||_0x168890));throw _0x168890;}}function extractGpFromText(_0x1b908f){const _0x21738a=_0x10c8e4;if(!_0x1b908f)return null;const _0x331b01=_0x1b908f[_0x21738a(0x1f1)](/\r?\n/)[_0x21738a(0x1d8)](_0x39034c=>_0x39034c[_0x21738a(0x19f)](/\r/g,''));if(!_0x331b01[_0x21738a(0xd7)])return null;let _0x38f7ae=(_0x331b01[0x1c62+0x141d+-0x3bb*0xd]||'')[_0x21738a(0xb9)](),_0x337725=_0x331b01[_0x21738a(0x124)](0x2429+-0x1b77*0x1+-0x8b1);const _0x49e0c2=_0x38f7ae[_0x21738a(0x127)](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);if(_0x49e0c2){const _0xb944d3=(_0x49e0c2[0x1ddb+-0x26f2+0x919]||'')[_0x21738a(0xb9)]();return{'gp':_0xb944d3,'sanitizedFirstLine':(_0x49e0c2[0x14e5+-0xf9f+-0x47*0x13]||'')['trim'](),'bodyLines':_0x337725};}let _0x23c8e4=-(-0x26*-0x13+0x19e4+0x1cb5*-0x1);for(let _0x6ab55d=_0x337725['length']-(-0x98e+-0x1b72+0x1*0x2501);_0x6ab55d>=-0x841*-0x1+0x1686+-0x1ec7;_0x6ab55d--){if(String(_0x337725[_0x6ab55d]||'')[_0x21738a(0xb9)]()[_0x21738a(0xd7)]>-0x1*0x47f+0x1*-0x13d5+-0x3*-0x81c){_0x23c8e4=_0x6ab55d;break;}}if(_0x23c8e4>=-0x10d7+-0x1e8c+0x6c5*0x7){const _0x4d3acf=String(_0x337725[_0x23c8e4]||'')[_0x21738a(0xb9)](),_0x1c96f1=_0x4d3acf[_0x21738a(0x127)](/^gp[:\s]*([^\s,]+)\s*$/i);if(_0x1c96f1){const _0x197e0c=(_0x1c96f1[-0x4*0x5d3+-0x50d+-0x26*-0xbf]||'')[_0x21738a(0xb9)]();return _0x337725[_0x21738a(0x190)](_0x23c8e4,-0x241*0xc+-0x19df+0x34ec),{'gp':_0x197e0c,'sanitizedFirstLine':_0x38f7ae,'bodyLines':_0x337725};}}return{'gp':null,'sanitizedFirstLine':_0x38f7ae,'bodyLines':_0x337725};}export async function onMessage(_0x50fe01){const _0x354478=_0x10c8e4;try{if(!_0x50fe01||!_0x50fe01[_0x354478(0xda)]||!_0x50fe01[_0x354478(0xa5)])return;const _0x59d94b=String(_0x50fe01[_0x354478(0xda)][_0x354478(0x17d)]||'')+'::'+String(_0x50fe01[_0x354478(0xda)]['id']||_0x50fe01[_0x354478(0xda)][_0x354478(0x16c)+'t']||'');if(isProcessed(_0x59d94b))return;markProcessed(_0x59d94b);const _0x30110a=String(extractTextFromMessage(_0x50fe01)||'');if(!_0x30110a['trim']())return;let _0x4af315='',_0x2ab85d=![];if(_0x50fe01['isCommand']){const _0x49b6fa=(_0x30110a[_0x354478(0xb9)]()[_0x354478(0x1f1)](/\s+/)[0x177e+0x1891*0x1+0x300f*-0x1]||'')['toLowerCas'+'e']();commands[_0x354478(0x145)](_0x49b6fa)&&(_0x4af315=_0x49b6fa,_0x2ab85d=!![]);}else{const _0x2b6603=(_0x30110a[_0x354478(0x1f1)](/\r?\n/)[0xfa*-0x6+0x95*-0x11+0xfc1]||'')[_0x354478(0xb9)](),_0x3887da=(_0x2b6603['split'](/\s+/)[-0xffe+0x8b*-0x15+0x1b65]||'')[_0x354478(0xfb)+'e']();commands[_0x354478(0x145)](_0x3887da)&&(_0x4af315=_0x3887da,_0x2ab85d=!![]);}if(!_0x2ab85d)return;const _0x320a17=_0x50fe01[_0x354478(0xda)][_0x354478(0x17d)],_0xf5f026=typeof _0x320a17===_0x354478(0x141)&&_0x320a17[_0x354478(0xcb)](_0x354478(0xd2));if(!_0xf5f026)return;let _0x102e54=![];try{_0x102e54=await isadmin(botRef,_0x50fe01);}catch(_0x26011c){warn('[welcome]\x20'+'isadmin\x20ch'+_0x354478(0x122)),_0x102e54=![];}if(!_0x102e54)return;const _0x3cc968=_0x50fe01[_0x354478(0xda)]?.[_0x354478(0x16c)+'t']||_0x50fe01[_0x354478(0xda)]?.[_0x354478(0x184)]||_0x50fe01[_0x354478(0xda)]?.[_0x354478(0x17d)]||'',_0x3b89a4=String(_0x3cc968||'')['split']('@')[0x239b+0x168f+0x5d1*-0xa],_0x525a95=_0x320a17;info('[welcome]\x20'+'command\x20\x27'+_0x4af315+'\x27\x20from\x20'+_0x3cc968+_0x354478(0x1a0)+_0x320a17);const _0x23e7a7=extractGpFromText(_0x30110a),_0x424b9e=_0x23e7a7&&_0x23e7a7[_0x354478(0x99)+_0x354478(0xd9)]?_0x23e7a7['sanitizedF'+_0x354478(0xd9)]:_0x30110a[_0x354478(0x1f1)](/\r?\n/)[-0x3*0x3fd+0x31d*-0x1+0xf14]||'',_0x2ebaec=_0x23e7a7&&_0x23e7a7[_0x354478(0x1f9)]?_0x23e7a7[_0x354478(0x1f9)]:_0x30110a['split'](/\r?\n/)[_0x354478(0x124)](-0x4*0x3c5+-0x1ccf+0x1*0x2be4),_0x5bb171=_0x23e7a7&&_0x23e7a7['gp']?_0x23e7a7['gp']:null,_0x1b9d61=[],_0x2e8a6d=[],_0xec0bb7=_0x424b9e[_0x354478(0x19f)](new RegExp('^'+_0x4af315+'\x5cb','i'),'')[_0x354478(0xb9)]();if(_0xec0bb7)_0x1b9d61[_0x354478(0x191)](_0xec0bb7);_0x1b9d61['push'](..._0x2ebaec);const _0x31a21c=[];for(const _0x40d7b1 of _0x1b9d61){const _0x44a14c=_0x40d7b1[_0x354478(0xb9)]()[_0x354478(0x127)](/^profilepic\s+(on|off)$/i);if(_0x44a14c){_0x2e8a6d[_0x354478(0x191)](_0x44a14c[-0x292+0x13*0xc7+-0xc32][_0x354478(0xfb)+'e']());continue;}_0x31a21c[_0x354478(0x191)](_0x40d7b1);}const _0x73f0de=_0x31a21c[_0x354478(0xa0)]('\x0a')['trim']();let _0x4b9df4=null;if(_0x2e8a6d[_0x354478(0xd7)]>-0x3*0x3e1+0x1*0x48b+0x718){const _0x42ffa1=_0x2e8a6d[_0x2e8a6d[_0x354478(0xd7)]-(0x2333*0x1+0x31*-0x95+-0x6ad)];_0x4b9df4=_0x42ffa1==='on'?-0x70d+0x22ca+-0x8e*0x32:0x1*-0x1057+0x1566+0x1*-0x50f;}if(_0x4af315===_0x354478(0x1e0)){if(!_0x73f0de){await sendApiOrFallback(_0x525a95,_0x354478(0x1e5)+'up-only,\x20a'+_0x354478(0xd0)+':\x0a'+_0x354478(0x1c4)+(_0x354478(0x18e)+_0x354478(0x1dc)+_0x354478(0x125)+_0x354478(0x97))+(_0x354478(0xff)+'\x20include\x20a'+_0x354478(0x14a)+'filepic\x20on'+_0x354478(0xb3)+_0x354478(0x1ac)+_0x354478(0x1ca)+_0x354478(0xdb)+_0x354478(0x18f)+_0x354478(0x196))+(_0x354478(0x94)+'nd\x20saves\x20t'+_0x354478(0x17b)+_0x354478(0x114)+_0x354478(0x180)+_0x354478(0x18a)+'setdefault'+_0x354478(0xac)+_0x354478(0x1e2)+_0x354478(0x10b)+'rent\x20group'+_0x354478(0x15b)+'at\x20group\x20i'+_0x354478(0xf1)+'your\x20defau'+'lts.'));return;}let _0x56dafe=[];if(_0x5bb171){const _0x1792d2=_0x5bb171[_0x354478(0xb9)]();if(_0x1792d2['toLowerCas'+'e']()===_0x354478(0xdf))try{if(typeof _0x3161f5[_0x354478(0xaf)+_0x354478(0x1f8)]===_0x354478(0x13e))_0x56dafe=await _0x3161f5[_0x354478(0xaf)+_0x354478(0x1f8)]();else{await sendApiOrFallback(_0x525a95,_0x354478(0x19a)+_0x354478(0x1a8)+_0x354478(0xbb)+_0x354478(0xd5)+_0x354478(0x1fa)+_0x354478(0x19d)+'.');return;}}catch(_0x2b83b6){warn('[welcome]\x20'+_0x354478(0x1e1)+_0x354478(0x1a1)+_0x354478(0x1da)+(_0x2b83b6?.['message']||_0x2b83b6)),await sendApiOrFallback(_0x525a95,'gp:\x20all\x20re'+_0x354478(0x172)+_0x354478(0xdd));return;}else{const _0x51586d=await _0x3161f5[_0x354478(0x14b)+'e']?.(_0x1792d2)['catch'](()=>null);if(_0x51586d)_0x56dafe=[_0x51586d];else{if(_0x1792d2[_0x354478(0x145)]('@'))_0x56dafe=[_0x3161f5['normalizeT'+_0x354478(0x1a2)]?.(_0x1792d2)||_0x1792d2];else{await sendApiOrFallback(_0x525a95,_0x354478(0x96)+'\x20alias/jid'+_0x354478(0xa8)+_0x1792d2+(_0x354478(0x1df)+_0x354478(0xf6)+'\x20to\x20add\x20al'+'ias\x20or\x20pas'+'s\x20a\x20full\x20J'+_0x354478(0xf8)));return;}}}}else{const _0x415128=await resolveDefaultsToChatJids(_0x3b89a4);if(!_0x415128||_0x415128[_0x354478(0xd7)]===-0x2*-0x8e1+0x2364+0x1*-0x3526){await sendApiOrFallback(_0x525a95,'Could\x20not\x20'+_0x354478(0x1c6)+_0x354478(0xe6)+_0x354478(0x121)+_0x354478(0x1a4)+_0x354478(0x1d0)+_0x354478(0xf4));return;}_0x56dafe=_0x415128;}const _0x5f2a1f=[];for(const _0x5b057c of _0x56dafe){try{let _0x164e24=await fetchGroupMetadata(_0x5b057c),_0x3d9e25=null;if(_0x164e24&&Array['isArray'](_0x164e24[_0x354478(0x16c)+'ts']))_0x3d9e25=_0x164e24[_0x354478(0x16c)+'ts']['length'];else{if(_0x164e24&&typeof _0x164e24['size']===_0x354478(0x164))_0x3d9e25=_0x164e24[_0x354478(0x19c)];}const _0x3d4649=await getWelcomeFromDb(_0x5b057c),_0x5e598c=_0x3d4649?Number(_0x3d4649[_0x354478(0xab)]||0x1f15+0x1070+-0x2f85):-0x29*0x1d+-0x1d28+0x21cd,_0x4ba659=_0x3d9e25&&_0x3d9e25>0x554+0x6b8+-0x4*0x303?_0x3d9e25:_0x5e598c,_0x2cd31f=_0x3d4649?Number(_0x3d4649['send_profi'+_0x354478(0xf7)]||-0x1f85+-0x21f6+0x417b):-0x542*-0x2+0x1*-0x17f+-0x905,_0x442097=_0x4b9df4===null?_0x2cd31f:_0x4b9df4,_0x12aa1d=await saveWelcomeToDb(_0x5b057c,_0x73f0de,_0x4ba659,_0x3d4649&&_0x3d4649['last_msg_i'+'d']?_0x3d4649[_0x354478(0x1dd)+'d']:null,_0x442097);if(_0x12aa1d){if(_0x4ba659&&_0x4ba659>-0x445*-0x8+-0xe36+-0x13f2)setCachedGroupSize(_0x5b057c,_0x4ba659);_0x5f2a1f['push']({'ok':!![],'msg':_0x354478(0x93)+_0x354478(0x110)+_0x5b057c+('\x20(profilep'+'ic:\x20')+(_0x442097?'on':_0x354478(0x1b9))+')'});}else _0x5f2a1f[_0x354478(0x191)]({'ok':![],'msg':_0x354478(0x1b0)+'save\x20welco'+_0x354478(0x11f)+_0x5b057c});}catch(_0x3c6402){warn(_0x354478(0x174)+_0x354478(0xb4)+'\x20'+_0x5b057c+_0x354478(0x13b)+(_0x3c6402?.[_0x354478(0xa5)]||_0x3c6402)),_0x5f2a1f[_0x354478(0x191)]({'ok':![],'msg':_0x354478(0x1a7)+_0x354478(0x157)+_0x5b057c+':\x20'+(_0x3c6402?.['message']||_0x3c6402)});}}const _0x3ead21=_0x5f2a1f[_0x354478(0x1d8)](_0x5c2d55=>(_0x5c2d55['ok']?'✅\x20':'❌\x20')+_0x5c2d55[_0x354478(0x1c7)]);await sendApiOrFallback(_0x525a95,_0x354478(0x93)+_0x354478(0xef)+'s:\x0a'+_0x3ead21[_0x354478(0xa0)]('\x0a'));return;}if(_0x4af315===_0x354478(0x1c5)){let _0x329f71=[];if(_0x5bb171){const _0x77defb=_0x5bb171['trim']();if(_0x77defb[_0x354478(0xfb)+'e']()==='all')try{if(typeof _0x3161f5[_0x354478(0xaf)+'ids']==='function')_0x329f71=await _0x3161f5[_0x354478(0xaf)+_0x354478(0x1f8)]();else{await sendApiOrFallback(_0x525a95,_0x354478(0x19a)+_0x354478(0x1a8)+'t\x20groupsUt'+_0x354478(0xd5)+_0x354478(0x1fa)+_0x354478(0x19d)+'.');return;}}catch(_0x42ea9a){warn('[welcome]\x20'+_0x354478(0x1e1)+_0x354478(0x1a1)+_0x354478(0x1da)+(_0x42ea9a?.[_0x354478(0xa5)]||_0x42ea9a)),await sendApiOrFallback(_0x525a95,_0x354478(0x19a)+_0x354478(0x172)+_0x354478(0xdd));return;}else{const _0x376b36=await _0x3161f5[_0x354478(0x14b)+'e']?.(_0x77defb)['catch'](()=>null);if(_0x376b36)_0x329f71=[_0x376b36];else{if(_0x77defb['includes']('@'))_0x329f71=[_0x3161f5[_0x354478(0x15e)+_0x354478(0x1a2)]?.(_0x77defb)||_0x77defb];else{await sendApiOrFallback(_0x525a95,'Unknown\x20gp'+_0x354478(0x16d)+_0x354478(0xa8)+_0x77defb+'\x22.');return;}}}}else{const _0x158b07=await resolveDefaultsToChatJids(_0x3b89a4);if(!_0x158b07||_0x158b07[_0x354478(0xd7)]===-0x6bb*0x1+0x2132+0x19*-0x10f){await sendApiOrFallback(_0x525a95,_0x354478(0x14c)+_0x354478(0x10e)+'(s)\x20found\x20'+_0x354478(0xa4)+_0x354478(0xe9)+'t\x20a\x20defaul'+_0x354478(0x1bd)+_0x354478(0x15f)+_0x354478(0x19e)+_0x354478(0x1f7)+_0x354478(0x111)+_0x354478(0x171));return;}_0x329f71=_0x158b07;}const _0x216ea0=[];for(const _0xb72278 of _0x329f71){try{const _0x2c30cd=await deleteWelcomeFromDb(_0xb72278);_0x2c30cd?(groupSizeCache['delete'](_0xb72278),_0x216ea0[_0x354478(0x191)]({'ok':!![],'msg':_0x354478(0x199)+_0x354478(0x109)+_0xb72278})):_0x216ea0['push']({'ok':![],'msg':_0x354478(0x105)+_0x354478(0x17e)+'\x20'+_0xb72278});}catch(_0x189f10){warn(_0x354478(0x174)+_0x354478(0x160)+'or\x20'+_0xb72278+_0x354478(0x13b)+(_0x189f10?.[_0x354478(0xa5)]||_0x189f10)),_0x216ea0['push']({'ok':![],'msg':_0x354478(0x168)+'ting\x20for\x20'+_0xb72278+':\x20'+(_0x189f10?.['message']||_0x189f10)});}}const _0x10a5b6=_0x216ea0['map'](_0xce465c=>(_0xce465c['ok']?'✅\x20':'❌\x20')+_0xce465c[_0x354478(0x1c7)]);await sendApiOrFallback(_0x525a95,_0x354478(0x1bf)+_0x354478(0x11d)+_0x354478(0x1e7)+_0x10a5b6[_0x354478(0xa0)]('\x0a'));return;}return;}catch(_0x29d928){error(_0x29d928,'[welcome]\x20'+'onMessage\x20'+_0x354478(0x183)+(_0x29d928?.[_0x354478(0xa5)]||_0x29d928));}}export async function cleanup(){const _0x584408=_0x10c8e4;try{for(const _0x313646 of groupTimers['values']())try{clearTimeout(_0x313646);}catch(_0x5f066c){}groupTimers['clear'](),groupQueues[_0x584408(0xb8)](),groupSizeCache[_0x584408(0xb8)]();try{stopManagedListener(name,_0x584408(0x1bc)+_0x584408(0x1d5)+_0x584408(0x1db));}catch(_0x12230f){}info(_0x584408(0x174)+_0x584408(0x92)+'naged\x20list'+_0x584408(0x117)+_0x584408(0x1c2));for(const _0x2e3cae of processedMessageKeys[_0x584408(0x1ab)]())try{clearTimeout(_0x2e3cae);}catch(_0x53d206){}processedMessageKeys[_0x584408(0xb8)](),profilePicCache[_0x584408(0xb8)]();}catch(_0x5dcfcd){warn(_0x584408(0x174)+_0x584408(0x158)+_0x584408(0x112)+(_0x5dcfcd?.[_0x584408(0xa5)]||_0x5dcfcd));}finally{botRef=null,sendApi=null,info(_0x584408(0x174)+_0x584408(0x193));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};