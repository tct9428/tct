const _0x1f4585=_0x30b4;(function(_0x382765,_0x2fa7ea){const _0x5206ab=_0x30b4,_0x19fdb7=_0x382765();while(!![]){try{const _0x21825a=parseInt(_0x5206ab(0x10a))/(0x47*0x66+-0x1f8e+0x9*0x5d)+parseInt(_0x5206ab(0x116))/(-0x8d3+0x2490+-0x1bbb)+-parseInt(_0x5206ab(0x17f))/(-0x23eb+-0x1867*-0x1+0xb87)+-parseInt(_0x5206ab(0x147))/(-0x7db+-0x1857*0x1+0x2036)+parseInt(_0x5206ab(0x115))/(0x3*-0xa07+0x2386*-0x1+0x41a0)+parseInt(_0x5206ab(0x1a3))/(0x1cae+-0x44f+-0x1859)*(parseInt(_0x5206ab(0xd0))/(0x89f*0x1+0x59*-0x5c+0x1764))+-parseInt(_0x5206ab(0x230))/(0x1*-0x916+-0x221*-0xd+-0x128f)*(parseInt(_0x5206ab(0xcf))/(-0x1eb3+-0x16f1*-0x1+0x7cb));if(_0x21825a===_0x2fa7ea)break;else _0x19fdb7['push'](_0x19fdb7['shift']());}catch(_0x319f80){_0x19fdb7['push'](_0x19fdb7['shift']());}}}(_0x5b8e,-0x2cb13+-0xba63+-0x6b0d3*-0x1));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import*as _0x57debe from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x1f4585(0x13e);function _0x5b8e(){const _0x45b5f5=['ATE\x20TABLE\x20','ids','delete\x20pre','wId','initialize','ed:\x20','come\x20resul','t_msg_id\x20T','ensured','Error\x20savi','\x20\x20\x20\x20\x20last_','3.5.1','t\x20groupsUt','updateLast','singleSele','\x20(profilep','tdefault\x20o','ndler\x20erro','r\x20group-pa','ic=','onWhatsApp','ng\x20for\x20','onfig\x20regi','TEGER\x20DEFA','\x20NOT\x20save\x20','action','failed:\x20','tureUrl','groupId','length','end\x20failed','sendApiOrF','conversati','?\x20WHERE\x20gr','ailed.','ctReply','_at;','UPDATE\x20SET','\x20message\x20f',').\x20It\x20will','normalizeT','set','c,\x20updated','deleted\x20pr','lepic','t\x20a\x20defaul','ts\x20are\x20con','boolean','tct.com/me','toString','AULT\x20conne','icipants.u','oup_jid\x20=\x20','M\x20welcomes','xcluded.la','MEMBER:\x20\x20','ated_at\x20FR','at\x20group\x20i','254952cTPNAO','ion\x20failed','s\x20part\x20of\x20','map','your\x20defau','cleanup\x20er','ias\x20or\x20pas','quested\x20bu','essage\x20TEX','mentions','p_jid\x20=\x20?','isInteger','gp:\x20all\x20re','il.getUniq','c,\x0a\x20\x20\x20\x20\x20\x20\x20','ed\x20keys:\x20','figured.','This\x20comma','command\x20\x27','ponseMessa','luded.send','18yjzxwk','7zDRzbd','lable\x20for\x20','faults.\x20Se','d\x20failed,\x20','ed\x20for\x20','eToDb\x20fail','naged\x20list','name','\x22\x20or\x20\x22prof','\x20\x20\x20\x20\x20\x20\x20las','image','evious\x20wel','ata','comes\x20SET\x20','y\x20to\x20have\x20','eToMember\x20','off','STS\x20welcom','splice','\x20unless\x20th','\x20alias/jid','groupJid','values','ts:\x0a','\x20(group_ji','hotReloadC','sage,\x20last','istener\x20fo','https://i-','We\x27re\x20happ','me\x20to\x20','gp:all\x20res','resolveNam','last_size','using\x20defa','llback\x20ima','Deleted\x20we','DEFAULT\x200,','_at)\x0a\x20\x20\x20\x20\x20','Could\x20not\x20','wlc','IMARY\x20KEY,','ttonId','anaged\x20lis','vious\x20welc','dia/','sock','ups\x20helper','FAULT\x200\x0a\x20\x20','\x20connectio','send_profi','jid','ed.updated','MsgIdInDb\x20','\x22.\x20Use\x20gro','sanitizedF','\x20\x20\x20\x20ON\x20CON','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','146784nvuWeY','failed\x20for','exec','text','has','save\x20welco','_profilepi','e,\x20last_ms','ge>\x0a','SELECT\x20mes','resolve\x20yo','453390gmMXTx','467968eLXUOp','\x20\x20VALUES\x20(','GROUP_SIZE','come\x20(sock','g_id,\x20send','push','Delete\x20wel','group-part','in\x20your\x20de','clear','solution\x20f','come\x20messa','deleting\x20f','toLowerCas','\x20WHERE\x20gro','st_msg_id,','catch','_size,\x0a\x20\x20\x20','from','olution\x20fa','number','DEFAULT_EN','ome\x20result','ts_added','match','t\x20instance','deleteWelc','size\x20=\x20exc','invite','for\x20','Optionally','ic:\x20','Hi\x20','profilePic','size','participan','up-only,\x20a','register\x20m','add','tJids\x20fail','welcome','o\x20the\x20','key','filepic\x20on','\x20failed:\x20','e\x20per-targ','ler\x20error:','message','ABLED','706204bjdMCE','\x20\x20\x20\x20\x20\x20send','\x20in\x20','ge.','up_jid\x20=\x20?','lepic,\x20upd','FLICT(grou','id\x20TEXT\x20PR','\x20include\x20a','buttonsRes','rl\x20for\x20','last_msg_i','bodyLines','xtMessage','Metadata\x20f','isadmin\x20ch','\x20ADD\x20COLUM','nd\x20saves\x20t','notify','sendMessag','ROUP_MAX','ied.\x20Chang','s\x20a\x20full\x20J','selectedRo','extendedTe','getWelcome','T\x20NULL,\x0a\x20\x20','vname','\x20found\x20for','groupMetad','esent','sendWelcom','Failed\x20to\x20','onMessage\x20','epic\x20=\x20exc','MatchFromF','trim','changes',',\x20last_siz','endsWith','come\x20','_MS','delete','slice','failed\x20to\x20','getUniqueJ',',\x20?,\x20?)\x0a\x20\x20','lt\x20name\x20','flushGroup','Usage\x20(gro','expiresAt','.update','et\x20default','lts.','FromDb\x20fai','EXT\x20DEFAUL','497031dScIOL','allback\x20fa','led\x20for\x20','ensureSche','connection','isCommand','to\x20the\x20cur','sendApi\x20fa','WHATSAPP_G','end_profil','floor',',\x20using\x20fa','type','imageMessa','\x22\x20to\x20toggl','(s)\x20found\x20','join','ults','our\x20defaul','dmin-only)','INSERT\x20INT','deletion\x20o','selectedBu','profilepic','essage\x20=\x20e','rticipants','now','omeFromDb\x20','ALTER\x20TABL','luded.last','\x20line\x20\x22pro','function','setdefault','eck\x20failed','UPDATE\x20wel','includes','853374kyiJPb','\x0a\x20\x20\x20\x20\x20\x20\x20\x20u','deleted\x20we','ueJids\x20not','\x20managed\x20l','DELETE\x20FRO','ULT\x200;','N\x20send_pro','O\x20welcomes','DEBOUNCE_M','ailed:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','[welcome]\x20','DB\x20schema\x20','ome\x20for\x20','isArray','all','seMessage','t\x20with\x20/se','r\x20ensure\x20y','ewsletter','irstLine','ilepic\x20off','s\x20WHERE\x20gr','\x20fatal:\x20','oUserJid','getConnect','lePictureU','set\x20with\x20/','FAULT\x200,\x0a\x20','or\x20','WELCOME','get','ror:\x20','_size,\x20las','lcome\x20for\x20','resolveDef','videoMessa','\x20for\x20defau','aultsToCha','replace','msg','r:\x20','Unknown\x20gp','OM\x20welcome','\x20error:\x20','run','\x27\x20from\x20','string','\x20updated_a','saved\x20welc','error:\x20','t_msg_id,\x20','me\x20for\x20','n(s).\x20Use\x20','Saved\x20welc','sent\x20welco','f\x20previous','saving\x20for','_CACHE_TTL','88090068@n','wlc\x0a','you!','last_size\x20','caption','\x20first.','E\x20welcomes','ur\x20default',':\x20\x22','url',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','iled:\x20','welcome.in','remoteJid','s.\x0a','random','gpUpdateHa','\x20available','subject','split','ome\x20','ge\x20for\x20','=\x20?,\x20updat'];_0x5b8e=function(){return _0x45b5f5;};return _0x5b8e();}export const version=_0x1f4585(0x201);export const priority=0x67e+0x11dd+-0x17e1;export const configKeys=[_0x1f4585(0x1c2)];export const commands=[_0x1f4585(0xf8),'delwlc'];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(0x40a+0x2e+-0x433)*(0x5*0x139+-0x1*0x110a+-0xb29*-0x1)*(-0x1*0x12af+-0x13*-0x2a+-0x5*-0x3e5),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),profilePicCache=new Map(),PROFILE_PIC_TTL_MS=(0x1724+0x2518+0xc0b*-0x5)*(-0x939*0x3+-0xba1+0x1*0x2788)*(-0x4*-0x878+-0x1d5b+-0x9d),DEDUPE_TTL_MS=(-0x1f*-0x61+0x1*-0x3a6+-0x7fb)*(0x9*-0x1bd+0x1e9d+-0xb10),processedMessageKeys=new Map();function markProcessed(_0x38efc4){const _0x8176a=_0x1f4585;if(!_0x38efc4)return;if(processedMessageKeys[_0x8176a(0x10e)](_0x38efc4))try{clearTimeout(processedMessageKeys['get'](_0x38efc4));}catch(_0x6df10f){}const _0x3e792a=setTimeout(()=>processedMessageKeys[_0x8176a(0x171)](_0x38efc4),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x38efc4,_0x3e792a);}function isProcessed(_0x1979fb){const _0x343670=_0x1f4585;return _0x1979fb&&processedMessageKeys[_0x343670(0x10e)](_0x1979fb);}async function ensureSchema(){const _0x1ab63b=_0x1f4585;try{await db[_0x1ab63b(0x10c)]('\x0a\x20\x20\x20\x20\x20\x20CRE'+_0x1ab63b(0x1f6)+'IF\x20NOT\x20EXI'+_0x1ab63b(0xe1)+'es\x20(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20group_j'+_0x1ab63b(0x14e)+_0x1ab63b(0xf9)+_0x1ab63b(0x1ae)+_0x1ab63b(0x238)+'T\x20NOT\x20NULL'+_0x1ab63b(0x1e9)+_0x1ab63b(0x1e2)+'INTEGER\x20DE'+_0x1ab63b(0x1c0)+_0x1ab63b(0xd9)+_0x1ab63b(0x1fd)+_0x1ab63b(0x17e)+_0x1ab63b(0x161)+_0x1ab63b(0x148)+_0x1ab63b(0x110)+'c\x20INTEGER\x20'+_0x1ab63b(0xf5)+_0x1ab63b(0x1a4)+'pdated_at\x20'+'INTEGER\x20DE'+_0x1ab63b(0x100)+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20');try{await db['exec'](_0x1ab63b(0x19b)+_0x1ab63b(0x1e5)+_0x1ab63b(0x157)+_0x1ab63b(0x1aa)+'filepic\x20IN'+_0x1ab63b(0x20d)+_0x1ab63b(0x1a9));}catch(_0x247d01){}info('[welcome]\x20'+_0x1ab63b(0x1b0)+_0x1ab63b(0x1fe));}catch(_0x3748fd){error(_0x3748fd,_0x1ab63b(0x1af)+_0x1ab63b(0x182)+'ma\x20failed');throw _0x3748fd;}}async function saveWelcomeToDb(_0x47361b,_0x2b0856,_0xc1efde=-0x1462+-0x773+-0x19*-0x11d,_0x55ea86=null,_0x4d6a66=-0x1*0x1fb9+0x1f85+0x34){const _0x2f1a69=_0x1f4585;try{const _0x52a1c4=Math['floor'](Date[_0x2f1a69(0x199)]()/(-0x4*-0x959+0x497*0x8+-0x4634*0x1));return await db[_0x2f1a69(0x1d1)](_0x2f1a69(0x193)+_0x2f1a69(0x1ab)+_0x2f1a69(0xe8)+'d,\x20message'+_0x2f1a69(0x16d)+_0x2f1a69(0x111)+_0x2f1a69(0x11a)+_0x2f1a69(0x110)+_0x2f1a69(0x220)+_0x2f1a69(0xf6)+_0x2f1a69(0x117)+'?,\x20?,\x20?,\x20?'+_0x2f1a69(0x175)+_0x2f1a69(0x108)+_0x2f1a69(0x14d)+'p_jid)\x20DO\x20'+_0x2f1a69(0x21b)+_0x2f1a69(0x1ae)+_0x2f1a69(0x197)+'xcluded.me'+'ssage,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20last_'+_0x2f1a69(0x131)+_0x2f1a69(0x19c)+_0x2f1a69(0x127)+_0x2f1a69(0x200)+'msg_id\x20=\x20e'+_0x2f1a69(0x22c)+_0x2f1a69(0x125)+_0x2f1a69(0x109)+_0x2f1a69(0x188)+_0x2f1a69(0x169)+_0x2f1a69(0xce)+_0x2f1a69(0x110)+_0x2f1a69(0xc8)+_0x2f1a69(0x1d4)+'t\x20=\x20exclud'+_0x2f1a69(0x104)+_0x2f1a69(0x21a),[_0x47361b,String(_0x2b0856||''),Number(_0xc1efde||-0x821*0x1+0x5*-0x64b+0x2798),_0x55ea86||null,Number(_0x4d6a66||0xa75+0x2b*-0x76+0x95d),_0x52a1c4]),info('[welcome]\x20'+_0x2f1a69(0x1d5)+_0x2f1a69(0x1b1)+_0x47361b+(_0x2f1a69(0x205)+_0x2f1a69(0x209))+_0x4d6a66+')'),!![];}catch(_0x58d56d){return warn(_0x2f1a69(0x1af)+'saveWelcom'+_0x2f1a69(0xd5)+_0x2f1a69(0xd4)+_0x47361b+':\x20'+(_0x58d56d?.[_0x2f1a69(0x145)]||_0x58d56d)),![];}}async function deleteWelcomeFromDb(_0x223751){const _0xa870f5=_0x1f4585;try{const _0x310d2e=await db[_0xa870f5(0x1d1)](_0xa870f5(0x1a8)+_0xa870f5(0x22b)+_0xa870f5(0x124)+_0xa870f5(0x14b),[_0x223751]);return info(_0xa870f5(0x1af)+_0xa870f5(0x1a5)+_0xa870f5(0x1c6)+_0x223751),_0x310d2e?.[_0xa870f5(0x16c)]||-0x413*-0x3+-0xb*-0x272+-0x271f;}catch(_0x4a52c4){return warn(_0xa870f5(0x1af)+_0xa870f5(0x130)+_0xa870f5(0x19a)+_0xa870f5(0x10b)+'\x20'+_0x223751+':\x20'+(_0x4a52c4?.['message']||_0x4a52c4)),-0xa7*0x7+0x215b+-0x43*0x6e;}}async function getWelcomeFromDb(_0x1bb78a){const _0x3ac3e3=_0x1f4585;try{const _0x4cf9f2=await db['get'](_0x3ac3e3(0x113)+_0x3ac3e3(0xea)+_0x3ac3e3(0x1c5)+_0x3ac3e3(0x1d7)+_0x3ac3e3(0x102)+_0x3ac3e3(0x14c)+_0x3ac3e3(0x22e)+_0x3ac3e3(0x1cf)+_0x3ac3e3(0x1ba)+_0x3ac3e3(0x22a)+'?',[_0x1bb78a]);return _0x4cf9f2||null;}catch(_0x22a2f8){return warn(_0x3ac3e3(0x1af)+_0x3ac3e3(0x160)+_0x3ac3e3(0x17d)+_0x3ac3e3(0x181)+_0x1bb78a+':\x20'+(_0x22a2f8?.[_0x3ac3e3(0x145)]||_0x22a2f8)),null;}}async function updateLastMsgIdInDb(_0x550cc8,_0x2b9601){const _0xea9222=_0x1f4585;try{const _0x1d0bbe=Math[_0xea9222(0x189)](Date[_0xea9222(0x199)]()/(-0x4*-0x61f+-0x1*0xb25+-0x96f));return await db['run'](_0xea9222(0x1a1)+_0xea9222(0xdd)+_0xea9222(0x152)+'d\x20=\x20?,\x20upd'+'ated_at\x20=\x20'+_0xea9222(0x217)+_0xea9222(0x22a)+'?',[_0x2b9601||null,_0x1d0bbe,_0x550cc8]),!![];}catch(_0x3a5b58){return warn(_0xea9222(0x1af)+_0xea9222(0x203)+_0xea9222(0x105)+'failed\x20for'+'\x20'+_0x550cc8+':\x20'+(_0x3a5b58?.[_0xea9222(0x145)]||_0x3a5b58)),![];}}function tryBuildSendApiFromBot(_0x2680ca){const _0x445e48=_0x1f4585;if(!_0x2680ca)return null;if(typeof _0x2680ca[_0x445e48(0x15a)+'e']===_0x445e48(0x19e))return async(_0x2e1265,_0x327566)=>_0x2680ca[_0x445e48(0x15a)+'e'](_0x2e1265,_0x327566);if(_0x2680ca['sock']&&typeof _0x2680ca[_0x445e48(0xfe)]['sendMessag'+'e']===_0x445e48(0x19e))return async(_0x22e350,_0x710c06)=>_0x2680ca[_0x445e48(0xfe)][_0x445e48(0x15a)+'e'](_0x22e350,_0x710c06);return null;}function setupSendApi(_0x5aa4e6){botRef=_0x5aa4e6,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x2e9b80,_0x3a2a7d,_0x11ca7f=[]){const _0x41958e=_0x1f4585;try{if(!_0x2e9b80||!_0x3a2a7d)return null;const _0x1894d2=typeof _0x3a2a7d===_0x41958e(0x1d3)?{'text':String(_0x3a2a7d)}:_0x3a2a7d;if(Array[_0x41958e(0x1b2)](_0x11ca7f)&&_0x11ca7f['length'])_0x1894d2[_0x41958e(0x239)]=_0x11ca7f;if(sendApi)try{const _0x334dea=await sendApi(_0x2e9b80,_0x1894d2);return _0x334dea;}catch(_0x4736ec){return warn(_0x41958e(0x1af)+_0x41958e(0x186)+_0x41958e(0x1ea)+(_0x4736ec?.['message']||_0x4736ec)),null;}else try{if(botRef&&typeof botRef[_0x41958e(0x15a)+'e']===_0x41958e(0x19e))return await botRef['sendMessag'+'e'](_0x2e9b80,_0x1894d2);else return botRef&&botRef[_0x41958e(0xfe)]&&typeof botRef[_0x41958e(0xfe)][_0x41958e(0x15a)+'e']===_0x41958e(0x19e)?await botRef[_0x41958e(0xfe)]['sendMessag'+'e'](_0x2e9b80,_0x1894d2):(warn(_0x41958e(0x1af)+'no\x20send\x20su'+'rface\x20avai'+_0x41958e(0xd1)+_0x2e9b80),null);}catch(_0x313dda){return warn('[welcome]\x20'+'fallback\x20s'+_0x41958e(0x214)+':\x20'+(_0x313dda?.['message']||_0x313dda)),null;}}catch(_0x4f1c87){return warn(_0x41958e(0x1af)+_0x41958e(0x215)+_0x41958e(0x180)+'iled:\x20'+(_0x4f1c87?.['message']||_0x4f1c87)),null;}}function extractTextFromMessage(_0x28a9aa){const _0x53f1b4=_0x1f4585;if(!_0x28a9aa||!_0x28a9aa[_0x53f1b4(0x145)])return'';const _0x33c35a=_0x28a9aa['message'];if(_0x33c35a[_0x53f1b4(0x216)+'on'])return _0x33c35a[_0x53f1b4(0x216)+'on'];if(_0x33c35a[_0x53f1b4(0x15f)+_0x53f1b4(0x154)]?.[_0x53f1b4(0x10d)])return _0x33c35a['extendedTe'+_0x53f1b4(0x154)][_0x53f1b4(0x10d)];if(_0x33c35a[_0x53f1b4(0x18c)+'ge']?.['caption'])return _0x33c35a['imageMessa'+'ge'][_0x53f1b4(0x1e3)];if(_0x33c35a[_0x53f1b4(0x1c8)+'ge']?.['caption'])return _0x33c35a['videoMessa'+'ge'][_0x53f1b4(0x1e3)];if(_0x33c35a[_0x53f1b4(0x150)+_0x53f1b4(0xcd)+'ge']?.[_0x53f1b4(0x195)+_0x53f1b4(0xfa)])return _0x33c35a[_0x53f1b4(0x150)+_0x53f1b4(0xcd)+'ge'][_0x53f1b4(0x195)+'ttonId'];if(_0x33c35a['listRespon'+_0x53f1b4(0x1b4)]?.[_0x53f1b4(0x204)+_0x53f1b4(0x219)]?.[_0x53f1b4(0x15e)+_0x53f1b4(0x1f9)])return _0x33c35a['listRespon'+_0x53f1b4(0x1b4)][_0x53f1b4(0x204)+_0x53f1b4(0x219)][_0x53f1b4(0x15e)+_0x53f1b4(0x1f9)];return'';}async function resolveDefaultsToChatJids(_0x3a2e6f){const _0x2e31f1=_0x1f4585;try{let _0x37e18e;try{_0x37e18e=await getDefault(_0x3a2e6f)[_0x2e31f1(0x126)](()=>null);}catch(_0x363cb3){_0x37e18e=null;}if(!_0x37e18e||Array[_0x2e31f1(0x1b2)](_0x37e18e)&&_0x37e18e[_0x2e31f1(0x213)]===-0x220e+-0x1d74+0x3f82*0x1)return[];const _0x22090e=Array[_0x2e31f1(0x1b2)](_0x37e18e)?_0x37e18e:[_0x37e18e],_0x4bef65=[];for(const _0xc6f346 of _0x22090e){try{const _0x4df5a3=await getConnection(_0xc6f346)[_0x2e31f1(0x126)](()=>null);if(Array['isArray'](_0x4df5a3))_0x4bef65[_0x2e31f1(0x11b)](..._0x4df5a3);else{if(_0x4df5a3)_0x4bef65['push'](String(_0x4df5a3));}}catch(_0x3def9f){warn(_0x2e31f1(0x1af)+_0x2e31f1(0x1bd)+_0x2e31f1(0x231)+_0x2e31f1(0x1c9)+_0x2e31f1(0x176)+_0xc6f346+':\x20'+(_0x3def9f?.[_0x2e31f1(0x145)]||_0x3def9f));}}const _0x255152=new Set(),_0x12dc20=[];for(const _0x49a15c of _0x4bef65){const _0xeb1091=String(_0x49a15c||'')['trim']();if(!_0xeb1091)continue;!_0x255152[_0x2e31f1(0x10e)](_0xeb1091)&&(_0x255152['add'](_0xeb1091),_0x12dc20['push'](_0xeb1091));}return _0x12dc20;}catch(_0x2e0a77){return warn(_0x2e31f1(0x1af)+_0x2e31f1(0x1c7)+_0x2e31f1(0x1ca)+_0x2e31f1(0x13d)+_0x2e31f1(0x1fb)+(_0x2e0a77?.['message']||_0x2e0a77)),[];}}async function fetchGroupMetadata(_0x1e3147){const _0x132132=_0x1f4585;if(!botRef)return null;try{if(botRef[_0x132132(0xfe)]&&typeof botRef[_0x132132(0xfe)][_0x132132(0x164)+_0x132132(0xdc)]==='function')return await botRef[_0x132132(0xfe)][_0x132132(0x164)+_0x132132(0xdc)](_0x1e3147);if(typeof botRef[_0x132132(0x164)+_0x132132(0xdc)]===_0x132132(0x19e))return await botRef[_0x132132(0x164)+_0x132132(0xdc)](_0x1e3147);return null;}catch(_0x3f36a6){return warn(_0x132132(0x1af)+'fetchGroup'+_0x132132(0x155)+_0x132132(0x1ad)+(_0x3f36a6?.[_0x132132(0x145)]||_0x3f36a6)),null;}}async function fetchProfilePictureUrl(_0x4515ad){const _0x140c1c=_0x1f4585;if(!botRef||!_0x4515ad)return null;try{let _0x32eafb=null;if(botRef[_0x140c1c(0xfe)]&&typeof botRef[_0x140c1c(0xfe)][_0x140c1c(0x137)+'tureUrl']===_0x140c1c(0x19e))_0x32eafb=await botRef[_0x140c1c(0xfe)][_0x140c1c(0x137)+_0x140c1c(0x211)](_0x4515ad,_0x140c1c(0xda))[_0x140c1c(0x126)](()=>null);else typeof botRef[_0x140c1c(0x137)+_0x140c1c(0x211)]===_0x140c1c(0x19e)&&(_0x32eafb=await botRef[_0x140c1c(0x137)+_0x140c1c(0x211)](_0x4515ad,_0x140c1c(0xda))[_0x140c1c(0x126)](()=>null));return _0x32eafb;}catch(_0x1f49dc){return warn(_0x140c1c(0x1af)+'fetchProfi'+_0x140c1c(0x1be)+_0x140c1c(0x151)+_0x4515ad+_0x140c1c(0x142)+(_0x1f49dc?.[_0x140c1c(0x145)]||_0x1f49dc)),null;}}function getCachedProfilePic(_0x2bc39f){const _0x19488c=_0x1f4585,_0x5dd89b=profilePicCache['get'](_0x2bc39f);if(!_0x5dd89b)return null;if(Date[_0x19488c(0x199)]()>_0x5dd89b[_0x19488c(0x179)])return profilePicCache['delete'](_0x2bc39f),null;return _0x5dd89b[_0x19488c(0x1e8)];}function setCachedProfilePic(_0xd8c709,_0x57ed2b){const _0x381947=_0x1f4585;if(!_0xd8c709)return;profilePicCache['set'](_0xd8c709,{'url':_0x57ed2b||null,'expiresAt':Date[_0x381947(0x199)]()+PROFILE_PIC_TTL_MS});}function getCachedGroupSize(_0x5c918e){const _0x58751c=_0x1f4585,_0x431152=groupSizeCache[_0x58751c(0x1c3)](_0x5c918e);if(!_0x431152)return null;if(Date[_0x58751c(0x199)]()>_0x431152[_0x58751c(0x179)])return groupSizeCache[_0x58751c(0x171)](_0x5c918e),null;return _0x431152[_0x58751c(0x138)];}function setCachedGroupSize(_0x4d4e7b,_0x579017){const _0x47092b=_0x1f4585;groupSizeCache[_0x47092b(0x21f)](_0x4d4e7b,{'size':Number(_0x579017||0x4*-0x2f+-0x1f5c+0x2018),'expiresAt':Date[_0x47092b(0x199)]()+(CFG[_0x47092b(0x118)+_0x47092b(0x1de)+'_MS']||DEFAULTS[_0x47092b(0x118)+_0x47092b(0x1de)+_0x47092b(0x170)])});}async function resolveDisplayName(_0xb3885f){const _0x26c0cb=_0x1f4585;try{if(!botRef||!_0xb3885f)return _0xb3885f?.[_0x26c0cb(0x1f2)]?.('@')?.[-0x1*0x22ea+0x1024*-0x2+-0x2*-0x2199]??_0xb3885f;try{if(typeof botRef[_0x26c0cb(0x20a)]===_0x26c0cb(0x19e)){const _0x3bce77=await botRef['onWhatsApp'](_0xb3885f);if(Array[_0x26c0cb(0x1b2)](_0x3bce77)&&_0x3bce77[_0x26c0cb(0x213)]>0x9d5+0xff9+-0x19ce){const _0x1aafde=_0x3bce77[-0x51*0x6+-0x414+0x5fa];if(_0x1aafde&&(_0x1aafde['notify']||_0x1aafde[_0x26c0cb(0x162)]||_0x1aafde[_0x26c0cb(0xd7)]))return _0x1aafde[_0x26c0cb(0x159)]||_0x1aafde[_0x26c0cb(0x162)]||_0x1aafde[_0x26c0cb(0xd7)];}}if(botRef[_0x26c0cb(0xfe)]&&typeof botRef[_0x26c0cb(0xfe)][_0x26c0cb(0x20a)]===_0x26c0cb(0x19e)){const _0x36e8ce=await botRef[_0x26c0cb(0xfe)][_0x26c0cb(0x20a)](_0xb3885f);if(Array[_0x26c0cb(0x1b2)](_0x36e8ce)&&_0x36e8ce['length']>0x1ca3+0x85*0xf+0x1237*-0x2){const _0x2eacb3=_0x36e8ce[-0x1*-0x4cf+-0x72*-0x20+-0x130f];if(_0x2eacb3&&(_0x2eacb3['notify']||_0x2eacb3[_0x26c0cb(0x162)]||_0x2eacb3[_0x26c0cb(0xd7)]))return _0x2eacb3[_0x26c0cb(0x159)]||_0x2eacb3['vname']||_0x2eacb3[_0x26c0cb(0xd7)];}}}catch(_0xbf7c99){}return String(_0xb3885f)[_0x26c0cb(0x1f2)]('@')[0x23b2+0x34b*-0x5+-0x669*0x3]||_0xb3885f;}catch(_0x43a525){return _0xb3885f?.['split']?.('@')?.[-0x1cd3+-0x111e+0x2df1]??_0xb3885f;}}async function findStoredMatchFromFindings(_0x278e5d=[]){const _0x11bf47=_0x1f4585;try{const _0x1e974d=await listSudo();if(!Array[_0x11bf47(0x1b2)](_0x1e974d)||_0x1e974d[_0x11bf47(0x213)]===-0x580+-0x71b*-0x3+0xfd1*-0x1)return null;const _0x4c5f11=new Set(_0x1e974d['map'](String));for(const _0x20a4ea of _0x278e5d||[]){if(!_0x20a4ea||typeof _0x20a4ea[_0x11bf47(0x103)]!==_0x11bf47(0x1d3))continue;const _0x3000b8=normalizeToJid(_0x20a4ea[_0x11bf47(0x103)]);if(_0x3000b8&&_0x4c5f11['has'](_0x3000b8))return _0x3000b8;if(_0x4c5f11[_0x11bf47(0x10e)](_0x20a4ea['jid']))return _0x20a4ea['jid'];const _0x3a7158=String(_0x20a4ea[_0x11bf47(0x103)])[_0x11bf47(0x1f2)]('@')[-0x16d1+0xc8c+0xa45][_0x11bf47(0x1f2)](':')[0x1207+-0x773+-0xa94];if(_0x3a7158)for(const _0x34c3ad of _0x1e974d){const _0x3fad6f=String(_0x34c3ad)[_0x11bf47(0x1f2)]('@')[0x32*-0x1d+-0x1666+-0x1c10*-0x1];if(_0x3fad6f&&_0x3fad6f===_0x3a7158)return _0x34c3ad;}}return null;}catch(_0x3baed6){return warn(_0x11bf47(0x1af)+'findStored'+_0x11bf47(0x16a)+'indings\x20er'+_0x11bf47(0x1c4)+(_0x3baed6?.[_0x11bf47(0x145)]||_0x3baed6)),null;}}const WELCOME_MEDIA_BASE=_0x1f4585(0xec)+_0x1f4585(0x226)+_0x1f4585(0xfd),WELCOME_MAX=0x821*-0x1+0x885*0x4+-0x19ea;function pickRandomCardImage(){const _0x294050=_0x1f4585,_0x5eca27=Math[_0x294050(0x189)](Math[_0x294050(0x1ee)]()*WELCOME_MAX)+(0x18d7*0x1+0x496+-0x1d6c);return WELCOME_MEDIA_BASE+_0x294050(0x13e)+_0x5eca27+'.jpg';}async function sendWelcomeToMember(_0x444189,_0x35cc23){const _0x330aef=_0x1f4585;try{const _0x2320bc=await getWelcomeFromDb(_0x444189);if(!_0x2320bc||!_0x2320bc['message'])return![];let _0x3f7f8d=await fetchGroupMetadata(_0x444189),_0x2812eb=_0x3f7f8d&&_0x3f7f8d[_0x330aef(0x1f1)]?_0x3f7f8d['subject']:_0x444189,_0x16f82c=getCachedGroupSize(_0x444189);if(!_0x16f82c||_0x16f82c<=0x855*-0x1+0x8*-0x188+-0xb*-0x1df){if(_0x3f7f8d&&Array[_0x330aef(0x1b2)](_0x3f7f8d['participan'+'ts']))_0x16f82c=_0x3f7f8d[_0x330aef(0x139)+'ts'][_0x330aef(0x213)];else{if(_0x3f7f8d&&typeof _0x3f7f8d['size']===_0x330aef(0x12a))_0x16f82c=_0x3f7f8d[_0x330aef(0x138)];else{_0x3f7f8d=_0x3f7f8d||await fetchGroupMetadata(_0x444189);if(_0x3f7f8d&&Array['isArray'](_0x3f7f8d[_0x330aef(0x139)+'ts']))_0x16f82c=_0x3f7f8d[_0x330aef(0x139)+'ts'][_0x330aef(0x213)];}}if(!_0x16f82c||_0x16f82c<=0x121*0x17+0xa81*0x1+-0x2*0x123c)_0x16f82c=Number(_0x2320bc[_0x330aef(0xf1)]||0x2e7*-0xd+0x260a+-0x4f);else setCachedGroupSize(_0x444189,_0x16f82c);}const _0x32299d=CFG[_0x330aef(0x187)+_0x330aef(0x15b)]||DEFAULTS[_0x330aef(0x187)+_0x330aef(0x15b)],_0x51f380=await resolveDisplayName(_0x35cc23),_0x42f5e3='@'+String(_0x51f380)[_0x330aef(0x1cb)](/\s+/g,'\x20'),_0xc29a3f=[];_0xc29a3f[_0x330aef(0x11b)](_0x330aef(0x136)+_0x42f5e3+('\x20Welcome\x20t'+_0x330aef(0x13f))+_0x2812eb),_0xc29a3f['push'](String(_0x2320bc[_0x330aef(0x145)])[_0x330aef(0x16b)]()),_0xc29a3f[_0x330aef(0x11b)]('>\x20👤YOU\x27RE\x20'+_0x330aef(0x22d)+_0x16f82c+'/'+_0x32299d);const _0x2921ab=_0xc29a3f['join']('\x0a\x0a'),_0x13a89a=[_0x35cc23],_0x59af38=_0x2320bc[_0x330aef(0x152)+'d']||null,_0x33187e=Number(_0x2320bc[_0x330aef(0x102)+_0x330aef(0x222)]||0x2*0xae+-0x832+0x6d6)===0x241c+0x1*-0x12fd+-0x111e;let _0x19109d=null;_0x33187e&&(_0x19109d=getCachedProfilePic(_0x35cc23),!_0x19109d&&(_0x19109d=await fetchProfilePictureUrl(_0x35cc23),setCachedProfilePic(_0x35cc23,_0x19109d)));!_0x19109d&&(_0x19109d=pickRandomCardImage(),!_0x33187e?info(_0x330aef(0x1af)+_0x330aef(0x196)+'\x20disabled\x20'+_0x330aef(0x133)+_0x444189+(_0x330aef(0x18a)+'llback\x20ima'+_0x330aef(0x1f4))+_0x35cc23):info(_0x330aef(0x1af)+_0x330aef(0x196)+'\x20missing\x20f'+_0x330aef(0x1c1)+_0x35cc23+(_0x330aef(0x18a)+_0x330aef(0xf3)+_0x330aef(0x14a))));const _0x28ebce={'title':'Welcome\x20to'+'\x20'+_0x2812eb,'body':_0x330aef(0xed)+_0x330aef(0xde)+_0x330aef(0x1e1),'thumbnailUrl':_0x19109d,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x10929f=await sendApiOrFallback(_0x444189,{'text':_0x2921ab,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':'1203632853'+_0x330aef(0x1df)+_0x330aef(0x1b7),'newsletterName':'WelcomeBot','serverMessageId':0x7b},'externalAdReply':_0x28ebce}},_0x13a89a);let _0x578f17=null;try{_0x10929f&&(_0x578f17=_0x10929f?.[_0x330aef(0x140)]&&_0x10929f[_0x330aef(0x140)]['id']?_0x10929f[_0x330aef(0x140)]['id']:_0x10929f?.[_0x330aef(0x145)]&&_0x10929f[_0x330aef(0x145)]?.['id']?_0x10929f[_0x330aef(0x145)]['id']:_0x10929f?.['id']?_0x10929f['id']:null);}catch(_0x25c8a8){}if(_0x59af38&&_0x59af38!==_0x578f17)try{if(botRef&&typeof botRef[_0x330aef(0x15a)+'e']==='function')try{await botRef[_0x330aef(0x15a)+'e'](_0x444189,{'delete':{'id':_0x59af38,'remoteJid':_0x444189,'fromMe':!![]}}),info(_0x330aef(0x1af)+_0x330aef(0x221)+_0x330aef(0xdb)+_0x330aef(0x16f)+_0x59af38+_0x330aef(0x149)+_0x444189);}catch(_0x489a26){try{await botRef[_0x330aef(0xfe)]?.[_0x330aef(0x15a)+'e']?.(_0x444189,{'delete':{'id':_0x59af38,'remoteJid':_0x444189,'fromMe':!![]}}),info(_0x330aef(0x1af)+'deleted\x20pr'+_0x330aef(0xdb)+_0x330aef(0x119)+')\x20'+_0x59af38+'\x20in\x20'+_0x444189);}catch(_0x29ead1){warn(_0x330aef(0x1af)+_0x330aef(0x173)+_0x330aef(0x1f8)+_0x330aef(0xfc)+_0x330aef(0x1f3)+_0x59af38+_0x330aef(0x149)+_0x444189+':\x20'+(_0x29ead1?.[_0x330aef(0x145)]||_0x29ead1));}}}catch(_0x3d8422){warn(_0x330aef(0x1af)+_0x330aef(0x194)+_0x330aef(0x1dc)+_0x330aef(0x21c)+_0x330aef(0x1ad)+(_0x3d8422?.[_0x330aef(0x145)]||_0x3d8422));}try{_0x578f17?await updateLastMsgIdInDb(_0x444189,_0x578f17):await updateLastMsgIdInDb(_0x444189,null);}catch(_0x51db26){}const _0x369c4b=Number(_0x2320bc[_0x330aef(0xf1)]||0x2*0x157+0x1723+-0x19d1);if(_0x16f82c&&_0x16f82c!==_0x369c4b)try{await db[_0x330aef(0x1d1)]('UPDATE\x20wel'+'comes\x20SET\x20'+_0x330aef(0x1e2)+_0x330aef(0x1f5)+'ed_at\x20=\x20?\x20'+'WHERE\x20grou'+_0x330aef(0x23a),[_0x16f82c,Math[_0x330aef(0x189)](Date['now']()/(0x165a+0xda8+0x7*-0x496)),_0x444189]),setCachedGroupSize(_0x444189,_0x16f82c);}catch(_0x2008c5){}return info(_0x330aef(0x1af)+_0x330aef(0x1db)+_0x330aef(0xee)+_0x35cc23+_0x330aef(0x149)+_0x444189),!![];}catch(_0x5e557f){return warn(_0x330aef(0x1af)+_0x330aef(0x166)+_0x330aef(0xdf)+_0x330aef(0x210)+(_0x5e557f?.[_0x330aef(0x145)]||_0x5e557f)),![];}}async function flushGroup(_0x57de08){const _0x4bddf1=_0x1f4585;try{const _0x833e87=groupQueues[_0x4bddf1(0x1c3)](_0x57de08);if(!_0x833e87||_0x833e87[_0x4bddf1(0x138)]===0x261c+0x1*-0x1f17+-0x705){if(groupTimers['has'](_0x57de08)){try{clearTimeout(groupTimers['get'](_0x57de08));}catch(_0x54fddc){}groupTimers[_0x4bddf1(0x171)](_0x57de08);}groupQueues['delete'](_0x57de08);return;}const _0x2937b2=Array[_0x4bddf1(0x128)](_0x833e87);for(const _0x47136f of _0x2937b2){try{await sendWelcomeToMember(_0x57de08,_0x47136f)['catch'](()=>{});}catch(_0x48f4d8){warn(_0x4bddf1(0x1af)+_0x4bddf1(0x177)+'\x20item\x20fail'+_0x4bddf1(0x1fb)+(_0x48f4d8?.[_0x4bddf1(0x145)]||_0x48f4d8));}}}catch(_0x2c3637){warn(_0x4bddf1(0x1af)+_0x4bddf1(0x177)+_0x4bddf1(0x1d0)+(_0x2c3637?.['message']||_0x2c3637));}finally{if(groupTimers[_0x4bddf1(0x10e)](_0x57de08)){try{clearTimeout(groupTimers[_0x4bddf1(0x1c3)](_0x57de08));}catch(_0x337109){}groupTimers[_0x4bddf1(0x171)](_0x57de08);}groupQueues[_0x4bddf1(0x171)](_0x57de08);}}async function gpUpdateHandler(_0x10d2be){const _0x37ee31=_0x1f4585;try{if(!_0x10d2be)return;const _0x5e0d32=(_0x10d2be[_0x37ee31(0x20f)]||_0x10d2be[_0x37ee31(0x18b)]||'')[_0x37ee31(0x227)]()[_0x37ee31(0x123)+'e']();if(_0x5e0d32!==_0x37ee31(0x13c)&&_0x5e0d32!==_0x37ee31(0x132))return;const _0x49c9a1=_0x10d2be['id']||_0x10d2be[_0x37ee31(0x212)]||_0x10d2be[_0x37ee31(0x103)]||_0x10d2be[_0x37ee31(0xe5)];if(!_0x49c9a1)return;const _0x12001a=Array[_0x37ee31(0x1b2)](_0x10d2be[_0x37ee31(0x139)+'ts'])?_0x10d2be[_0x37ee31(0x139)+'ts']:Array['isArray'](_0x10d2be[_0x37ee31(0x139)+_0x37ee31(0x12d)])?_0x10d2be['participan'+_0x37ee31(0x12d)]:[];if(!_0x12001a||_0x12001a[_0x37ee31(0x213)]===0x603+0x26fb+-0x2cfe*0x1)return;let _0x46ee71=[];if(_0x12001a['length']===0x641*0x1+-0x1ba*-0xd+-0x1cb2)_0x46ee71=[_0x12001a[0x1f51+-0x24fd+-0x1e4*-0x3]];else{const _0x26bfa5=_0x12001a[_0x12001a['length']-(0x1*-0x25bd+-0x19c0+-0x3f*-0x102)];_0x46ee71=[_0x26bfa5];}if(!groupQueues[_0x37ee31(0x10e)](_0x49c9a1))groupQueues[_0x37ee31(0x21f)](_0x49c9a1,new Set());const _0x44c5fc=groupQueues[_0x37ee31(0x1c3)](_0x49c9a1);for(const _0x5d5e44 of _0x46ee71)_0x44c5fc[_0x37ee31(0x13c)](_0x5d5e44);if(groupTimers['has'](_0x49c9a1))try{clearTimeout(groupTimers[_0x37ee31(0x1c3)](_0x49c9a1));}catch(_0x4c7e98){}const _0x46bbb5=Math['max'](0x2*0x1369+0xe81*0x1+-0x34ef,Number(CFG[_0x37ee31(0x1ac)+'S']||DEFAULTS[_0x37ee31(0x1ac)+'S'])),_0x5a4464=setTimeout(()=>{const _0x4f9f92=_0x37ee31;flushGroup(_0x49c9a1)[_0x4f9f92(0x126)](_0x523aee=>warn(_0x4f9f92(0x1af)+_0x4f9f92(0x177)+'\x20failed:\x20'+(_0x523aee?.['message']||_0x523aee)));},_0x46bbb5);groupTimers[_0x37ee31(0x21f)](_0x49c9a1,_0x5a4464);}catch(_0x2251ca){warn(_0x37ee31(0x1af)+_0x37ee31(0x1ef)+_0x37ee31(0x207)+_0x37ee31(0x1cd)+(_0x2251ca?.['message']||_0x2251ca));}}export async function initialize(_0x2b461f){const _0x3ac108=_0x1f4585;if(!_0x2b461f)throw new Error(_0x3ac108(0x1eb)+'itialize\x20r'+'equires\x20bo'+_0x3ac108(0x12f));botRef=_0x2b461f,setupSendApi(_0x2b461f);try{const _0x472484=getConfig()||{},_0xd3b516=_0x472484&&_0x472484[_0x3ac108(0x1c2)]?_0x472484[_0x3ac108(0x1c2)]:{};CFG[_0x3ac108(0x12b)+_0x3ac108(0x146)]=typeof _0xd3b516[_0x3ac108(0x12b)+_0x3ac108(0x146)]===_0x3ac108(0x225)?_0xd3b516[_0x3ac108(0x12b)+_0x3ac108(0x146)]:DEFAULTS['DEFAULT_EN'+'ABLED'],CFG[_0x3ac108(0x118)+_0x3ac108(0x1de)+_0x3ac108(0x170)]=Number['isInteger'](_0xd3b516[_0x3ac108(0x118)+'_CACHE_TTL'+_0x3ac108(0x170)])?_0xd3b516[_0x3ac108(0x118)+_0x3ac108(0x1de)+_0x3ac108(0x170)]:DEFAULTS['GROUP_SIZE'+_0x3ac108(0x1de)+_0x3ac108(0x170)],CFG[_0x3ac108(0x187)+'ROUP_MAX']=Number[_0x3ac108(0x23b)](_0xd3b516[_0x3ac108(0x187)+_0x3ac108(0x15b)])?_0xd3b516[_0x3ac108(0x187)+_0x3ac108(0x15b)]:DEFAULTS[_0x3ac108(0x187)+_0x3ac108(0x15b)],CFG[_0x3ac108(0x1ac)+'S']=Number[_0x3ac108(0x23b)](_0xd3b516[_0x3ac108(0x1ac)+'S'])?_0xd3b516[_0x3ac108(0x1ac)+'S']:DEFAULTS['DEBOUNCE_M'+'S'];}catch(_0x6f3420){warn(_0x3ac108(0x1af)+'config\x20loa'+_0x3ac108(0xd3)+_0x3ac108(0xf2)+_0x3ac108(0x190)),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x6c2ee3=[])=>{const _0x2e0c46=_0x3ac108;try{const _0x354d5a=getConfig()||{},_0x5386d4=_0x354d5a&&_0x354d5a[_0x2e0c46(0x1c2)]?_0x354d5a[_0x2e0c46(0x1c2)]:{};CFG['DEFAULT_EN'+_0x2e0c46(0x146)]=typeof _0x5386d4['DEFAULT_EN'+'ABLED']===_0x2e0c46(0x225)?_0x5386d4[_0x2e0c46(0x12b)+_0x2e0c46(0x146)]:DEFAULTS[_0x2e0c46(0x12b)+_0x2e0c46(0x146)],CFG['GROUP_SIZE'+_0x2e0c46(0x1de)+'_MS']=Number[_0x2e0c46(0x23b)](_0x5386d4['GROUP_SIZE'+_0x2e0c46(0x1de)+'_MS'])?_0x5386d4[_0x2e0c46(0x118)+_0x2e0c46(0x1de)+_0x2e0c46(0x170)]:DEFAULTS['GROUP_SIZE'+_0x2e0c46(0x1de)+_0x2e0c46(0x170)],CFG[_0x2e0c46(0x187)+_0x2e0c46(0x15b)]=Number[_0x2e0c46(0x23b)](_0x5386d4[_0x2e0c46(0x187)+_0x2e0c46(0x15b)])?_0x5386d4[_0x2e0c46(0x187)+_0x2e0c46(0x15b)]:DEFAULTS[_0x2e0c46(0x187)+_0x2e0c46(0x15b)],CFG[_0x2e0c46(0x1ac)+'S']=Number['isInteger'](_0x5386d4[_0x2e0c46(0x1ac)+'S'])?_0x5386d4[_0x2e0c46(0x1ac)+'S']:DEFAULTS['DEBOUNCE_M'+'S'],info('[welcome]\x20'+_0x2e0c46(0xe9)+'onfig\x20appl'+_0x2e0c46(0x15c)+_0x2e0c46(0xc9)+(_0x6c2ee3||[])[_0x2e0c46(0x18f)](',\x20'));}catch(_0x48a467){warn(_0x2e0c46(0x1af)+_0x2e0c46(0xe9)+'onfig\x20hand'+_0x2e0c46(0x144)+'\x20'+(_0x48a467?.[_0x2e0c46(0x145)]||_0x48a467));}});}catch(_0x43b6df){warn('[welcome]\x20'+'hotReloadC'+_0x3ac108(0x20c)+'stration\x20f'+_0x3ac108(0x1ad)+(_0x43b6df?.[_0x3ac108(0x145)]||_0x43b6df));}try{await ensureSchema();try{startManagedListener({'botRef':botRef,'eventName':_0x3ac108(0x11d)+_0x3ac108(0x229)+'pdate','handler':gpUpdateHandler,'moduleName':name}),info(_0x3ac108(0x1af)+'registered'+_0x3ac108(0x1a7)+_0x3ac108(0xeb)+_0x3ac108(0x208)+_0x3ac108(0x198)+_0x3ac108(0x17a));}catch(_0x2273b9){warn(_0x3ac108(0x1af)+_0x3ac108(0x173)+_0x3ac108(0x13b)+_0x3ac108(0xfb)+'tener:\x20'+(_0x2273b9?.['message']||_0x2273b9));}info(_0x3ac108(0x1af)+'initialize'+'d');}catch(_0x18d849){error(_0x18d849,_0x3ac108(0x1af)+_0x3ac108(0x1fa)+_0x3ac108(0x1bb)+(_0x18d849?.['message']||_0x18d849));throw _0x18d849;}}function extractGpFromText(_0x4b8f5d){const _0x4084a8=_0x1f4585;if(!_0x4b8f5d)return null;const _0xe737e6=_0x4b8f5d[_0x4084a8(0x1f2)](/\r?\n/)[_0x4084a8(0x233)](_0x4e7d79=>_0x4e7d79[_0x4084a8(0x1cb)](/\r/g,''));if(!_0xe737e6['length'])return null;let _0x1ac112=(_0xe737e6[-0x1861+-0x2166+0x39c7]||'')[_0x4084a8(0x16b)](),_0x577f55=_0xe737e6[_0x4084a8(0x172)](0xc4c+0x1040+0x1*-0x1c8b);const _0x4fb321=_0x1ac112['match'](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);if(_0x4fb321){const _0x1a0232=(_0x4fb321[0x10c*-0x7+-0x1b91*-0x1+-0x143b]||'')[_0x4084a8(0x16b)]();return{'gp':_0x1a0232,'sanitizedFirstLine':(_0x4fb321[-0x7cd*0x5+0x2ac*0x2+0x21aa]||'')[_0x4084a8(0x16b)](),'bodyLines':_0x577f55};}let _0x3d8081=-(0xdb7+-0x1*0x250b+-0x7c7*-0x3);for(let _0x319012=_0x577f55[_0x4084a8(0x213)]-(-0x1*-0xba8+0x26+-0x1*0xbcd);_0x319012>=0x1fe9+-0xc62+-0x1*0x1387;_0x319012--){if(String(_0x577f55[_0x319012]||'')[_0x4084a8(0x16b)]()[_0x4084a8(0x213)]>-0x1bb3+-0x1*-0x1d59+-0xd3*0x2){_0x3d8081=_0x319012;break;}}if(_0x3d8081>=-0x5*0x73b+0x1*-0x2541+0x4968){const _0x5d3ea4=String(_0x577f55[_0x3d8081]||'')[_0x4084a8(0x16b)](),_0x342fa5=_0x5d3ea4['match'](/^gp[:\s]*([^\s,]+)\s*$/i);if(_0x342fa5){const _0x1259e8=(_0x342fa5[-0x1312+-0x1481+-0x2794*-0x1]||'')['trim']();return _0x577f55[_0x4084a8(0xe2)](_0x3d8081,-0xaf1+0x8f*0x1d+-0x541),{'gp':_0x1259e8,'sanitizedFirstLine':_0x1ac112,'bodyLines':_0x577f55};}}return{'gp':null,'sanitizedFirstLine':_0x1ac112,'bodyLines':_0x577f55};}export async function onMessage(_0x21d5d4){const _0x54d885=_0x1f4585;try{if(!_0x21d5d4||!_0x21d5d4[_0x54d885(0x140)]||!_0x21d5d4[_0x54d885(0x145)])return;const _0x106bf3=String(_0x21d5d4[_0x54d885(0x140)][_0x54d885(0x1ec)]||'')+'::'+String(_0x21d5d4['key']['id']||_0x21d5d4['key'][_0x54d885(0x139)+'t']||'');if(isProcessed(_0x106bf3))return;markProcessed(_0x106bf3);const _0x4f9bce=String(extractTextFromMessage(_0x21d5d4)||'');if(!_0x4f9bce[_0x54d885(0x16b)]())return;let _0x46fdea='',_0x286dad=![];if(_0x21d5d4[_0x54d885(0x184)]){const _0x4888ed=(_0x4f9bce[_0x54d885(0x16b)]()[_0x54d885(0x1f2)](/\s+/)[0x1eb5+0x1*0x1519+-0x33ce]||'')[_0x54d885(0x123)+'e']();commands['includes'](_0x4888ed)&&(_0x46fdea=_0x4888ed,_0x286dad=!![]);}else{const _0x1054cc=(_0x4f9bce['split'](/\r?\n/)[-0x2390*-0x1+-0x1426+-0xf6a]||'')[_0x54d885(0x16b)](),_0x48d7b9=(_0x1054cc['split'](/\s+/)[-0x985*0x2+0x11e7*0x1+0x1*0x123]||'')[_0x54d885(0x123)+'e']();commands[_0x54d885(0x1a2)](_0x48d7b9)&&(_0x46fdea=_0x48d7b9,_0x286dad=!![]);}if(!_0x286dad)return;const _0x5c1dfe=_0x21d5d4[_0x54d885(0x140)][_0x54d885(0x1ec)],_0x63580c=typeof _0x5c1dfe===_0x54d885(0x1d3)&&_0x5c1dfe[_0x54d885(0x16e)]('@g.us');if(!_0x63580c)return;let _0x1cbc62=![];try{_0x1cbc62=await isadmin(botRef,_0x21d5d4);}catch(_0x3b3cc4){warn(_0x54d885(0x1af)+_0x54d885(0x156)+_0x54d885(0x1a0)),_0x1cbc62=![];}if(!_0x1cbc62)return;const _0x310c0f=_0x21d5d4[_0x54d885(0x140)]?.[_0x54d885(0x139)+'t']||_0x21d5d4[_0x54d885(0x140)]?.[_0x54d885(0x128)]||_0x21d5d4[_0x54d885(0x140)]?.['remoteJid']||'',_0x1def39=String(_0x310c0f||'')[_0x54d885(0x1f2)]('@')[-0x1167+0x3*-0x7d3+0x28e0],_0x2f3424=_0x5c1dfe;info(_0x54d885(0x1af)+_0x54d885(0xcc)+_0x46fdea+_0x54d885(0x1d2)+_0x310c0f+_0x54d885(0x149)+_0x5c1dfe);const _0xdc2b67=extractGpFromText(_0x4f9bce),_0x44ad6b=_0xdc2b67&&_0xdc2b67[_0x54d885(0x107)+'irstLine']?_0xdc2b67[_0x54d885(0x107)+_0x54d885(0x1b8)]:_0x4f9bce['split'](/\r?\n/)[0x164f+0x179*0x11+0x2f58*-0x1]||'',_0x461fc3=_0xdc2b67&&_0xdc2b67[_0x54d885(0x153)]?_0xdc2b67[_0x54d885(0x153)]:_0x4f9bce[_0x54d885(0x1f2)](/\r?\n/)[_0x54d885(0x172)](-0x7*-0x249+-0x3*0x34a+-0x620),_0xa57747=_0xdc2b67&&_0xdc2b67['gp']?_0xdc2b67['gp']:null,_0x495a38=[],_0x5a9b2f=[],_0x30aec5=_0x44ad6b[_0x54d885(0x1cb)](new RegExp('^'+_0x46fdea+'\x5cb','i'),'')[_0x54d885(0x16b)]();if(_0x30aec5)_0x495a38[_0x54d885(0x11b)](_0x30aec5);_0x495a38[_0x54d885(0x11b)](..._0x461fc3);const _0x4fdf6d=[];for(const _0x4328cf of _0x495a38){const _0x5c14e1=_0x4328cf['trim']()[_0x54d885(0x12e)](/^profilepic\s+(on|off)$/i);if(_0x5c14e1){_0x5a9b2f['push'](_0x5c14e1[0x1d8+0x1971+0x6*-0x48c][_0x54d885(0x123)+'e']());continue;}_0x4fdf6d[_0x54d885(0x11b)](_0x4328cf);}const _0x40f69d=_0x4fdf6d['join']('\x0a')[_0x54d885(0x16b)]();let _0x4b115c=null;if(_0x5a9b2f[_0x54d885(0x213)]>0xf9e*-0x1+-0x13f8+0x2396){const _0x1016f4=_0x5a9b2f[_0x5a9b2f[_0x54d885(0x213)]-(0x43e+0x37*-0x71+0x140a)];_0x4b115c=_0x1016f4==='on'?-0xac7+0x1aa7*0x1+0x1*-0xfdf:-0x1*-0x8b5+0x2a*0x2b+-0xfc3;}if(_0x46fdea==='wlc'){if(!_0x40f69d){await sendApiOrFallback(_0x2f3424,_0x54d885(0x178)+_0x54d885(0x13a)+_0x54d885(0x192)+':\x0a'+_0x54d885(0x1e0)+('<your\x20mult'+'i-line\x20wel'+_0x54d885(0x121)+_0x54d885(0x112))+(_0x54d885(0x134)+_0x54d885(0x14f)+_0x54d885(0x19d)+_0x54d885(0x141)+_0x54d885(0xd8)+_0x54d885(0x1b9)+_0x54d885(0x18d)+_0x54d885(0x143)+_0x54d885(0x17b)+_0x54d885(0x1ed))+(_0x54d885(0xcb)+_0x54d885(0x158)+'o\x20your\x20DEF'+_0x54d885(0x228)+'ction(s)\x20('+_0x54d885(0x1bf)+_0x54d885(0x19f)+_0x54d885(0x21d)+_0x54d885(0x20e)+_0x54d885(0x185)+'rent\x20group'+_0x54d885(0xe3)+_0x54d885(0x22f)+_0x54d885(0x232)+_0x54d885(0x234)+_0x54d885(0x17c)));return;}let _0x45fa24=[];if(_0xa57747){const _0x151633=_0xa57747['trim']();if(_0x151633[_0x54d885(0x123)+'e']()===_0x54d885(0x1b3))try{if(typeof _0x57debe['getUniqueJ'+_0x54d885(0x1f7)]===_0x54d885(0x19e))_0x45fa24=await _0x57debe['getUniqueJ'+'ids']();else{await sendApiOrFallback(_0x2f3424,'gp:\x20all\x20re'+_0x54d885(0x237)+_0x54d885(0x202)+_0x54d885(0xc7)+_0x54d885(0x1a6)+_0x54d885(0x1f0)+'.');return;}}catch(_0x414b6d){warn('[welcome]\x20'+_0x54d885(0xef)+_0x54d885(0x129)+_0x54d885(0x1ea)+(_0x414b6d?.[_0x54d885(0x145)]||_0x414b6d)),await sendApiOrFallback(_0x2f3424,_0x54d885(0xc6)+_0x54d885(0x120)+_0x54d885(0x218));return;}else{const _0x45c3e6=await _0x57debe['resolveNam'+'e']?.(_0x151633)['catch'](()=>null);if(_0x45c3e6)_0x45fa24=[_0x45c3e6];else{if(_0x151633[_0x54d885(0x1a2)]('@'))_0x45fa24=[_0x57debe[_0x54d885(0x21e)+_0x54d885(0x1bc)]?.(_0x151633)||_0x151633];else{await sendApiOrFallback(_0x2f3424,_0x54d885(0x1ce)+_0x54d885(0xe4)+_0x54d885(0x1e7)+_0x151633+(_0x54d885(0x106)+_0x54d885(0xff)+'\x20to\x20add\x20al'+_0x54d885(0x236)+_0x54d885(0x15d)+'ID.'));return;}}}}else{const _0x3a8a29=await resolveDefaultsToChatJids(_0x1def39);if(!_0x3a8a29||_0x3a8a29[_0x54d885(0x213)]===-0x697+-0x105*-0x25+-0x63a*0x5){await sendApiOrFallback(_0x2f3424,_0x54d885(0xf7)+_0x54d885(0x114)+_0x54d885(0x1e6)+_0x54d885(0x101)+_0x54d885(0x1d9)+'setdefault'+_0x54d885(0x1e4));return;}_0x45fa24=_0x3a8a29;}const _0x49815c=[];for(const _0x2a07ca of _0x45fa24){try{let _0x54b305=await fetchGroupMetadata(_0x2a07ca),_0x595662=null;if(_0x54b305&&Array[_0x54d885(0x1b2)](_0x54b305[_0x54d885(0x139)+'ts']))_0x595662=_0x54b305[_0x54d885(0x139)+'ts'][_0x54d885(0x213)];else{if(_0x54b305&&typeof _0x54b305[_0x54d885(0x138)]===_0x54d885(0x12a))_0x595662=_0x54b305[_0x54d885(0x138)];}const _0x234dda=await getWelcomeFromDb(_0x2a07ca),_0x4951ff=_0x234dda?Number(_0x234dda[_0x54d885(0xf1)]||0x26c3*-0x1+0x18f5*-0x1+0x8*0x7f7):-0xe16+-0x15f*0x3+0x1233,_0x312bf4=_0x595662&&_0x595662>-0xa*-0x32b+-0xec4+-0x10ea?_0x595662:_0x4951ff,_0x3845f7=_0x234dda?Number(_0x234dda[_0x54d885(0x102)+'lepic']||0xd5c+-0x1*0x9a0+-0x3bc):0x6*0x5ee+0x106e+-0x15*0x27a,_0x4497a0=_0x4b115c===null?_0x3845f7:_0x4b115c,_0xc952bd=await saveWelcomeToDb(_0x2a07ca,_0x40f69d,_0x312bf4,_0x234dda&&_0x234dda[_0x54d885(0x152)+'d']?_0x234dda[_0x54d885(0x152)+'d']:null,_0x4497a0);if(_0xc952bd){if(_0x312bf4&&_0x312bf4>-0x1*-0x1fba+0x268f*-0x1+-0x35*-0x21)setCachedGroupSize(_0x2a07ca,_0x312bf4);_0x49815c[_0x54d885(0x11b)]({'ok':!![],'msg':_0x54d885(0x1da)+_0x54d885(0x1b1)+_0x2a07ca+(_0x54d885(0x205)+_0x54d885(0x135))+(_0x4497a0?'on':_0x54d885(0xe0))+')'});}else _0x49815c[_0x54d885(0x11b)]({'ok':![],'msg':_0x54d885(0x167)+_0x54d885(0x10f)+_0x54d885(0x1d8)+_0x2a07ca});}catch(_0x2719d7){warn('[welcome]\x20'+_0x54d885(0x1dd)+'\x20'+_0x2a07ca+_0x54d885(0x142)+(_0x2719d7?.['message']||_0x2719d7)),_0x49815c['push']({'ok':![],'msg':_0x54d885(0x1ff)+_0x54d885(0x20b)+_0x2a07ca+':\x20'+(_0x2719d7?.[_0x54d885(0x145)]||_0x2719d7)});}}const _0x45f14d=_0x49815c['map'](_0x3b84ab=>(_0x3b84ab['ok']?'✅\x20':'❌\x20')+_0x3b84ab[_0x54d885(0x1cc)]);await sendApiOrFallback(_0x2f3424,_0x54d885(0x1da)+_0x54d885(0x12c)+'s:\x0a'+_0x45f14d[_0x54d885(0x18f)]('\x0a'));return;}if(_0x46fdea==='delwlc'){let _0x4b30c2=[];if(_0xa57747){const _0x51bf2d=_0xa57747[_0x54d885(0x16b)]();if(_0x51bf2d['toLowerCas'+'e']()===_0x54d885(0x1b3))try{if(typeof _0x57debe[_0x54d885(0x174)+'ids']===_0x54d885(0x19e))_0x4b30c2=await _0x57debe['getUniqueJ'+_0x54d885(0x1f7)]();else{await sendApiOrFallback(_0x2f3424,_0x54d885(0xc6)+'quested\x20bu'+'t\x20groupsUt'+_0x54d885(0xc7)+_0x54d885(0x1a6)+_0x54d885(0x1f0)+'.');return;}}catch(_0x573207){warn(_0x54d885(0x1af)+_0x54d885(0xef)+_0x54d885(0x129)+_0x54d885(0x1ea)+(_0x573207?.[_0x54d885(0x145)]||_0x573207)),await sendApiOrFallback(_0x2f3424,_0x54d885(0xc6)+_0x54d885(0x120)+_0x54d885(0x218));return;}else{const _0x3dc871=await _0x57debe[_0x54d885(0xf0)+'e']?.(_0x51bf2d)['catch'](()=>null);if(_0x3dc871)_0x4b30c2=[_0x3dc871];else{if(_0x51bf2d[_0x54d885(0x1a2)]('@'))_0x4b30c2=[_0x57debe[_0x54d885(0x21e)+'oUserJid']?.(_0x51bf2d)||_0x51bf2d];else{await sendApiOrFallback(_0x2f3424,'Unknown\x20gp'+_0x54d885(0xe4)+_0x54d885(0x1e7)+_0x51bf2d+'\x22.');return;}}}}else{const _0xd89f04=await resolveDefaultsToChatJids(_0x1def39);if(!_0xd89f04||_0xd89f04['length']===-0x70f+-0x1c53+0x2362){await sendApiOrFallback(_0x2f3424,'No\x20target\x20'+_0x54d885(0x183)+_0x54d885(0x18e)+_0x54d885(0x11e)+_0x54d885(0xd2)+_0x54d885(0x223)+_0x54d885(0x1b5)+_0x54d885(0x206)+_0x54d885(0x1b6)+_0x54d885(0x191)+_0x54d885(0x224)+_0x54d885(0xca));return;}_0x4b30c2=_0xd89f04;}const _0x48f485=[];for(const _0x1fa54d of _0x4b30c2){try{const _0x506999=await deleteWelcomeFromDb(_0x1fa54d);_0x506999?(groupSizeCache[_0x54d885(0x171)](_0x1fa54d),_0x48f485[_0x54d885(0x11b)]({'ok':!![],'msg':_0x54d885(0xf4)+_0x54d885(0x1c6)+_0x1fa54d})):_0x48f485[_0x54d885(0x11b)]({'ok':![],'msg':'No\x20welcome'+_0x54d885(0x163)+'\x20'+_0x1fa54d});}catch(_0x1c736a){warn('[welcome]\x20'+_0x54d885(0x122)+_0x54d885(0x1c1)+_0x1fa54d+_0x54d885(0x142)+(_0x1c736a?.[_0x54d885(0x145)]||_0x1c736a)),_0x48f485['push']({'ok':![],'msg':'Error\x20dele'+'ting\x20for\x20'+_0x1fa54d+':\x20'+(_0x1c736a?.[_0x54d885(0x145)]||_0x1c736a)});}}const _0x4a0dd5=_0x48f485[_0x54d885(0x233)](_0x13f34c=>(_0x13f34c['ok']?'✅\x20':'❌\x20')+_0x13f34c['msg']);await sendApiOrFallback(_0x2f3424,_0x54d885(0x11c)+_0x54d885(0x1fc)+_0x54d885(0xe7)+_0x4a0dd5[_0x54d885(0x18f)]('\x0a'));return;}return;}catch(_0x3180ab){error(_0x3180ab,_0x54d885(0x1af)+_0x54d885(0x168)+_0x54d885(0x1d6)+(_0x3180ab?.[_0x54d885(0x145)]||_0x3180ab));}}function _0x30b4(_0x5d1cff,_0x3b33a2){const _0x2886ba=_0x5b8e();return _0x30b4=function(_0x379d2a,_0x457dd5){_0x379d2a=_0x379d2a-(0x1*0x399+-0x1fab+-0xd*-0x238);let _0x1675cc=_0x2886ba[_0x379d2a];return _0x1675cc;},_0x30b4(_0x5d1cff,_0x3b33a2);}export async function cleanup(){const _0xa533aa=_0x1f4585;try{for(const _0x3d1f83 of groupTimers[_0xa533aa(0xe6)]())try{clearTimeout(_0x3d1f83);}catch(_0x36a0c9){}groupTimers[_0xa533aa(0x11f)](),groupQueues[_0xa533aa(0x11f)](),groupSizeCache['clear']();try{stopManagedListener(name,_0xa533aa(0x11d)+_0xa533aa(0x229)+'pdate');}catch(_0xf07cd3){}info(_0xa533aa(0x1af)+'stopped\x20ma'+_0xa533aa(0xd6)+'ener\x20if\x20pr'+_0xa533aa(0x165));for(const _0x418fa0 of processedMessageKeys[_0xa533aa(0xe6)]())try{clearTimeout(_0x418fa0);}catch(_0x264e8d){}processedMessageKeys[_0xa533aa(0x11f)](),profilePicCache[_0xa533aa(0x11f)]();}catch(_0x279e28){warn(_0xa533aa(0x1af)+_0xa533aa(0x235)+_0xa533aa(0x1c4)+(_0x279e28?.[_0xa533aa(0x145)]||_0x279e28));}finally{botRef=null,sendApi=null,info(_0xa533aa(0x1af)+'cleaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};