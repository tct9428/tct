const _0x3cba63=_0x32ce;(function(_0x1353e1,_0x17024e){const _0x3e10ac=_0x32ce,_0x5de6ae=_0x1353e1();while(!![]){try{const _0x2536f3=-parseInt(_0x3e10ac(0x2c9))/(0x44*-0x57+-0xc49*-0x3+-0x2*0x6df)*(-parseInt(_0x3e10ac(0x216))/(-0xc*-0xc+0x822+-0x8b0*0x1))+parseInt(_0x3e10ac(0x3b7))/(0x3*0x2e4+0x1f32+0xd49*-0x3)+parseInt(_0x3e10ac(0x354))/(0x1319+-0x7b*-0x47+-0x3532)+-parseInt(_0x3e10ac(0x292))/(0x11b*-0xb+-0xcd0+0x1c9*0xe)+-parseInt(_0x3e10ac(0x2fc))/(0x67f*-0x3+0x1*0x1b45+-0x6*0x14b)*(parseInt(_0x3e10ac(0x395))/(-0x5*0x107+-0x1928+0x1e52))+-parseInt(_0x3e10ac(0x2b8))/(0x25a2+-0x7ff+-0x8f*0x35)+-parseInt(_0x3e10ac(0x3e7))/(0x142b+-0x298+-0x118a);if(_0x2536f3===_0x17024e)break;else _0x5de6ae['push'](_0x5de6ae['shift']());}catch(_0x10acef){_0x5de6ae['push'](_0x5de6ae['shift']());}}}(_0x35e0,0x1c17*0x95+-0xc5300+-0x378*-0x147));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x20480e from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name='lock';export const version=_0x3cba63(0x1d9);export const priority=0x207+-0x124b+-0x6*-0x2ca;export const configKeys=[_0x3cba63(0x38c)];export const commands=['listlock',_0x3cba63(0x1e9),'unlockall',_0x3cba63(0x2d9),'delock','unlocklock',_0x3cba63(0x307),_0x3cba63(0x38d),_0x3cba63(0x239)];let botRef=null,sendApi=null;function _0x35e0(){const _0x49f91f=['2BMavmD','INTEGER\x20PR','t\x20ON\x20locks','d\x20locknoti','output','slice','hat_jid,\x20p','hrase,\x20typ','ks\x20table\x20a','\x27invalid_r','✔️\x20Saved\x20','line\x20usage','\x20DEFAULT\x200','eteLockByP','QUE\x20INDEX\x20','eteWithRet','\x20\x20\x20\x20\x20type\x20','ks_new\x20(\x0a\x20','ocknotify\x20','s_valid_re','notify',')\x20VALUES\x20(','get','cks\x20table','E\x20chat_jid','remoteJid','[lock]\x20ski','NFD','earch\x20fail','\x20phrase)\x0a\x20','e,\x20created','|jid|all>','is\x20not\x20all','\x20lock(s)\x20f','\x20phrase,\x20t','locknotify','\x0aMatched:\x20','min','[lock]\x20cre','lock\x20bad1,','\x20&\x20regex\x20v','trim','ed\x20(fallba','CURRENCY','(?<![\x5cp{L}','cted\x20->\x20pe','split','ue(s).','ration\x20com','<alias|jid','=\x20excluded','\x20\x20\x20\x20create','ration\x20swa','eign_keys\x20','INTEGER\x20DE','floor','[lock]\x20add','[lock]\x20isa','\x20Example:\x20','n\x20characte','|jid|all>\x0a','xtMessage','DEFAULT_EN','d_at\x20=\x20exc','ns\x20error\x20f','EX\x20IF\x20NOT\x20','cks_unique','i\x20unavaila','oaded\x20','\x20locknotif',':\x20lock\x20tri','nection(s)','available','CONFLICT\x20i','size','(chat_jid)','r\x20default\x20','R\x20DEFAULT\x20','ify;','ify\x20FROM\x20l','\x20locks\x20loa','\x22\x20@\x20','.created_b','Corasick\x20b','\x20(INVALID\x20','fig\x20load\x20f','p{N}_])','\x20type,\x20cre','d.type,\x0a\x20\x20','Lock:\x20inva','or\x20','message','ROM\x20locks','eparated>\x20','includes','ard\x20for\x20id','dWarning\x20f','\x20\x20\x20\x20\x20);','cluded.not','\x20DO\x20UPDATE','ut\x20UNIQUE\x20','ies\x20to\x20you','REMOVE_DIA','NORMALIZE_','NFKC','resolveNam','egex','\x200,\x0a\x20\x20\x20\x20\x20\x20','alidation\x20','max','w\x20(chat_ji','d\x20=\x20?','lid\x20stored','hit_count','ion','e\x20TEXT\x20NOT','eteAllLock','toISOStrin','created_at','jid','clear','conversati','LT\x20\x27normal','UPDATE\x20loc','2269230cIscTK','r:\x20','ration\x20ins','eteLockByI','\x20@\x20','\x201\x20WHERE\x20i','OFF','e\x20FROM\x20sql','ex)\x0a\x20\x20\x20\x20\x20\x20','hat_jid\x20TE','ed_at,\x20hit','idateStore','ERE\x20id\x20=\x20?','hat\x20error\x20','fromMe','ry\x20failed:','unknown','[lock]\x20inv',':\x20lock\x20<tr',',\x20?,\x20?,\x20?,','\x20=\x20?\x20ORDER','sForChat\x20e','\x20lock\x20entr','Corasick\x20s','it_count\x20+','alize\x20requ','ALTER\x20TABL','ry:\x20sendAp','tification','O\x20locks_ne','[lock]\x20ini','[lock]\x20val','\x20phrase=\x22','creator','ABLED','\x20\x20\x20chat_ji','push','SELECT\x20nam','586688UDSeFH','isArray','type','d\x20error:\x20','startsWith','chat_jid','\x20\x20\x20\x20\x20\x20\x20\x20\x20i',':\x20locknoti','L_MS','LT\x201,\x0a\x20\x20\x20\x20','lete_prefs','ttonId','EXISTS\x20idx','delete','INSERT\x20INT','\x20=\x20\x27target','fy\x20on|off\x0a','503771yWoqVN','[lock]\x20loc','hrase\x20erro','❌\x20PM:\x20incl','ids','build','map','[lock]\x20ens',',\x0a\x20\x20','listlock','Lock\x20fallb','fs\x20(chat_j','es\x20lock\x20no','SSAGE','tion(s):\x20','dWarning:\x20','dellock','led\x20for\x20','gp:<alias|','CREATE\x20UNI','\x20created_b','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','fy\x20message','nodes','selectedBu','(?![\x5cp{L}\x5c','[lock]\x20set','ed\x20to\x20','afe\x20migrat','AUTOINCREM','GLOBAL_CON','onnection(','eue\x20fail:\x20','[lock]\x20pro','REATE\x20TABL','t\x20connecti','IMARY\x20KEY\x20','Keywords','ount\x20INTEG','BATCH_DELA','for\x20','chFromFind','\x20BY\x20id','jid)\x20DO\x20UP','le_info(','pping\x20inva','LockNotify','find','To\x20query\x20s','fail','rs\x20besides','989904AWKBTL','REGEX)','ed\x20lock\x20\x22','oUserJid','gex\x20=\x20?\x20WH','entries','now','(?,\x20?,\x20?,\x20','✔️\x20Locknoti','unlockall','d\x20for\x20','delall','\x20ON\x20CONFLI','phrase','\x20hit_count','ULT\x200,\x0a\x20\x20\x20','ult\x20connec','SELECT\x20id\x20','gp\x20alias/j','ailed,\x20usi','ER\x20DEFAULT','owed.','p\x20failed:\x20','tialize\x20fa','IF\x20NOT\x20EXI','mns)','❌\x20Could\x20no','?,\x20created','set','participan','dmin\x20check','_at\x20=\x20?,\x20i','ex)\x20VALUES','chatJid','NAME\x20TO\x20','[lock]\x20enf','sendMessag','OR\x20type\x20=\x20','DELETE\x20FRO','[lock]\x20ON\x20','join','\x20\x20\x20\x20\x20\x20\x20id\x20','values','sendApi\x20un','HERE\x20type\x20','ded\x20for\x20re','quested\x20ta','\x20failed\x20fo','plete;\x20old','_count,\x20is','_jid\x20=\x20?','E\x20locks\x20RE','cessChatQu','.\x20Please\x20c','\x20WHERE\x20key','search','@g.us','ks\x20SET\x20hit','changes','text',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20','TableColum','extendedTe','❌\x20Usage\x20(g','FAULT\x200','LT\x20\x27\x27','ed_by,\x20cre','d,\x20phrase)','dText\x20fail','\x20\x20\x20\x20','match','=\x20\x27regex\x27\x20','name','ock_prefs\x20','status:\x0a','[lock]\x20tab','off','_valid_reg','_new\x20witho','toLowerCas','string','is_valid_r','nection\x20','=\x20OFF;','normalize','up_','same\x20line.','ack\x20failed','3221592sIYGfJ',',\x20valid=','\x20\x20\x20\x20\x20\x20\x20cre','t\x20resolve\x20','ite_master','WARNING_ME','ated_by\x20=\x20','SELECT\x20*\x20F','s|jid|all>','tatus:\x20loc','table\x20dete','roup-only)','key','?,\x20?,\x200,\x20?','\x20by\x20@','\x20lock(s).','XT\x20PRIMARY','Lock\x20faile','k_prefs\x20(c','pop','ias','unlocklock','your\x20defau','id-or-phra','d|all>','nonical)','d,\x20phrase,','serialized','TEGER\x20DEFA','\x20?,\x20?)','\x20gp:<alias','y\x20[on|off]','word','olving\x20con','✔️\x20[lock]\x20l','[lock]\x20mig','it_count,\x20','WARNING_TT','❌\x20Unknown\x20','lid_regex;','PRAGMA\x20tab','CT(chat_ji','heck\x20/setd','\x20default\x20c','\x5cp{N}_])','\x20\x20\x20\x20\x20);\x0a\x20\x20','STS\x20idx_lo','ted_at,\x0a\x20\x20','CREATE\x20IND','\x20\x20is_valid','luded.crea','dRegexes\x20e','}_]*','ENT,\x0a\x20\x20\x20\x20\x20','ated_at,\x20h','rror:\x20','LOCKS','clearlocks','\x20WHERE\x20typ','acy\x20locks\x20','dler\x20error','aho','ERE\x20chat_j','LICT(chat_','E\x20locks\x20(\x0a','14VyKuAC','locks\x20WHER','ed\x20is_vali','{user}','created_by','\x20KEY,\x20noti','egex\x27\x20AND\x20','endsWith','s).','getUniqueJ','buttonsRes','AND\x20phrase','EXISTS\x20loc','user','ger2','ckup','keys',',2\x20OR\x20unlo','nsert\x20fail','E\x20id\x20=\x20?','\x20phrase\x20=\x20','izeExistin','test','ockall\x20fai','[lock]\x20sen','\x20gp:alias','regex\x20colu','lt\x20connect','o\x20delete\x20l','led:\x20','filter','e\x20=\x20?,\x20cre','M\x20locks\x20WH','on(s):\x20','1760331meLxPD','chat_jid,\x20','replace','sock',':\x20unlockal','\x20is_valid_','_locks_cha','SEND_WARNI','SELECT\x20id,','length','\x20type\x20=\x20\x27r','\x20=\x20?',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','x\x20=\x200\x20WHER','\x5c$&','\x0aMessage:\x0a','\x20\x20\x20\x20\x20hit_c','knotify\x20ch','id:\x20\x22','isInteger','delock','imageMessa','catch','PER_CHAT_Q',',phrase2','dStoredMat','[lock]\x20res','\x20);','[lock]\x20get','normalizeT','otify\x20=\x20ex','CRITICS','led\x20to\x20add','\x20\x20UNIQUE(c','Y_MS','ck):\x20','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','phrase);','E\x20locks_ne','keyword',':\x20listlock','ks\x20SET\x20is_','ires\x20bot\x20i','❌\x20PM:\x20one-','ude\x20gp\x20in\x20','led\x20to\x20sen','AND\x20name=?','_regex\x20INT','4361769gVqRxC','ponseMessa','[lock]\x20cle','lock.initi','AULT\x20\x27\x27,\x0a\x20','ng\x20default','⚠️\x20{user},\x20','\x20=\x20exclude','shift','function','our\x20defaul','\x22:\x20','DATE\x20SET\x20n','eck\x20failed','regex','from','ks\x20SET\x20typ','\x20ON\x20locks(','\x20DEFAULT\x20c','body','This\x20toggl','gger2>\x20gp:','chat','locks','BATCH_SIZE','lid\x20regex\x20','all','t_jid\x20=\x20?\x20','alid\x20wildc','y\x20TEXT\x20DEF','LE\x20IF\x20NOT\x20','❌\x20PM\x20one-l','[lock]\x20Aho','chat_id','TEXT\x20DEFAU','splice','[lock]\x20rea','ype,\x20creat','\x20SET\x0a\x20\x20\x20\x20\x20','SELECT\x20val','caption','unlock\x201,2','regex:','2.3.2','id\x20=\x20?\x20AND','ine\x20usage:','id\x20=\x20?','s\x20for\x20your','egex\x20FROM\x20','efault\x20con','vailable','e=\x27table\x27\x20','\x20(type=','next','(s):\x20','hrase)\x0a\x20\x20\x20','videoMessa','has','d\x20regex\x20fo','unlock','x\x20=\x201\x20WHER','tLocksForC','[lock]\x20leg','\x20\x20\x20ON\x20CONF','fy\x20','_by,\x20creat',':\x20unlock\x20<','exec','provided:\x20','fy\x20INTEGER','rforming\x20s','that\x20word\x20','prepare','lready\x20can','[\x5cp{L}\x5cp{N','dApi\x20not\x20a','bad2\x20gp:al','add','PRAGMA\x20for','\x20failed','|all>','WHERE\x20chat','normal','_regex)\x20VA','UEUE_LIMIT','y,\x0a\x20\x20\x20\x20\x20\x20\x20','✔️\x20Deleted\x20','value','locks_back','CREATE\x20TAB','[lock]\x20del','efault\x20val','reated_at,','\x20NULL,\x0a\x20\x20\x20','mentions','\x20locks\x20for','run','ert\x20failed','as\x20fallbac',',\x20is_valid','valid_rege','wildcard','EGER\x20DEFAU','FAULT\x201'];_0x35e0=function(){return _0x49f91f;};return _0x35e0();}const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x3cba63(0x1b4)+_0x3cba63(0x1f5)+_0x3cba63(0x236)+_0x3cba63(0x311),'WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x522b49){const _0x341bf8=_0x3cba63;if(!_0x522b49)return[];const _0x4fdc08=new Set(),_0x360b25=[];for(const _0xbd4d5b of _0x522b49){const _0x21705e=_0xbd4d5b===undefined||_0xbd4d5b===null?'':String(_0xbd4d5b)[_0x341bf8(0x23f)]();if(!_0x21705e)continue;!_0x4fdc08['has'](_0x21705e)&&(_0x4fdc08[_0x341bf8(0x1fb)](_0x21705e),_0x360b25[_0x341bf8(0x2b6)](_0x21705e));}return _0x360b25;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=-0x25fc+0x187a+0xd*0x10a,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(-0x10db+-0x4*-0x765+-0xc7d)*(-0x1*-0x1e4+-0x134+-0xce*-0x4);function markProcessed(_0x21b765){const _0x4e5adf=_0x3cba63;if(!_0x21b765)return;if(processedMessageKeys[_0x4e5adf(0x1e7)](_0x21b765))try{clearTimeout(processedMessageKeys[_0x4e5adf(0x22c)](_0x21b765));}catch(_0x5ea3fa){}const _0xce4942=setTimeout(()=>processedMessageKeys['delete'](_0x21b765),DEDUPE_TTL_MS);processedMessageKeys[_0x4e5adf(0x318)](_0x21b765,_0xce4942);}function isProcessed(_0x5d31ab){const _0x494687=_0x3cba63;return _0x5d31ab&&processedMessageKeys[_0x494687(0x1e7)](_0x5d31ab);}const sleep=_0x3cf4d2=>new Promise(_0x2f457b=>setTimeout(_0x2f457b,_0x3cf4d2));function nowSec(){const _0x1fde86=_0x3cba63;return Math[_0x1fde86(0x24d)](Date[_0x1fde86(0x302)]()/(0x1a9e+0x1f0a+-0x35c0));}function escapeRegex(_0x22b196){const _0x4df6ac=_0x3cba63;return String(_0x22b196||'')[_0x4df6ac(0x3b9)](/[.*+?^${}()|[\]\\]/g,_0x4df6ac(0x3c5));}function normalizeForMatch(_0x3b5d79){const _0x29405b=_0x3cba63;let _0x53c4bc=String(_0x3b5d79||'');try{_0x53c4bc=_0x53c4bc[_0x29405b(0x350)](_0x29405b(0x27e));}catch(_0x593ead){}if(CFG[_0x29405b(0x27d)+'REMOVE_DIA'+_0x29405b(0x3d6)])try{_0x53c4bc=_0x53c4bc[_0x29405b(0x350)](_0x29405b(0x231))['replace'](/\p{M}/gu,'')[_0x29405b(0x350)](_0x29405b(0x27e));}catch(_0x50ff12){}return _0x53c4bc['toLowerCas'+'e']();}class AhoCorasick{constructor(_0xace2d7=[]){const _0x5e1aa0=_0x3cba63;this['nodes']=[{'next':{},'fail':0x0,'output':[]}];if(_0xace2d7&&_0xace2d7['length'])this[_0x5e1aa0(0x2ce)](_0xace2d7);}[_0x3cba63(0x2ce)](_0x524be5){const _0x4407db=_0x3cba63;this[_0x4407db(0x2e0)]=[{'next':{},'fail':0x0,'output':[]}];for(const _0x3f9d65 of _0x524be5){let _0x361178=0x95*0x1b+0xaf8+0x9*-0x2f7;for(const _0x3b2d05 of _0x3f9d65){const _0x229730=_0x3b2d05;!this[_0x4407db(0x2e0)][_0x361178][_0x4407db(0x1e3)][_0x229730]&&(this[_0x4407db(0x2e0)][_0x361178][_0x4407db(0x1e3)][_0x229730]=this[_0x4407db(0x2e0)][_0x4407db(0x3c0)],this['nodes']['push']({'next':{},'fail':0x0,'output':[]})),_0x361178=this[_0x4407db(0x2e0)][_0x361178][_0x4407db(0x1e3)][_0x229730];}this[_0x4407db(0x2e0)][_0x361178][_0x4407db(0x21a)][_0x4407db(0x2b6)](_0x3f9d65);}const _0xe68960=[];for(const _0x387cce in this['nodes'][-0x1494+0xf76+0x51e*0x1][_0x4407db(0x1e3)]){const _0x3eae44=this[_0x4407db(0x2e0)][-0x227*0xa+-0x2f*-0xc7+-0xf03]['next'][_0x387cce];this[_0x4407db(0x2e0)][_0x3eae44][_0x4407db(0x2fa)]=0x1*0xc1b+0x25d2+-0x31ed*0x1,_0xe68960[_0x4407db(0x2b6)](_0x3eae44);}while(_0xe68960['length']){const _0x5864dc=_0xe68960['shift']();for(const _0x510303 in this[_0x4407db(0x2e0)][_0x5864dc][_0x4407db(0x1e3)]){const _0x1696c3=this['nodes'][_0x5864dc]['next'][_0x510303];let _0x3723bf=this[_0x4407db(0x2e0)][_0x5864dc][_0x4407db(0x2fa)];while(_0x3723bf&&!this['nodes'][_0x3723bf][_0x4407db(0x1e3)][_0x510303])_0x3723bf=this['nodes'][_0x3723bf][_0x4407db(0x2fa)];if(this[_0x4407db(0x2e0)][_0x3723bf][_0x4407db(0x1e3)][_0x510303])this[_0x4407db(0x2e0)][_0x1696c3]['fail']=this[_0x4407db(0x2e0)][_0x3723bf][_0x4407db(0x1e3)][_0x510303];else this[_0x4407db(0x2e0)][_0x1696c3][_0x4407db(0x2fa)]=0xe3b*0x2+0xed3+0x1*-0x2b49;this[_0x4407db(0x2e0)][_0x1696c3][_0x4407db(0x21a)][_0x4407db(0x2b6)](...this['nodes'][this['nodes'][_0x1696c3]['fail']][_0x4407db(0x21a)]),_0xe68960[_0x4407db(0x2b6)](_0x1696c3);}}}[_0x3cba63(0x333)](_0x540dea){const _0x4963dc=_0x3cba63,_0x28d9c3=[];let _0x51ce82=-0x124c+0x801*-0x1+-0x1a4d*-0x1;for(let _0x432b97=0x84e*0x3+0x1386+-0x2c70;_0x432b97<_0x540dea['length'];_0x432b97++){const _0x5ac503=_0x540dea[_0x432b97];while(_0x51ce82&&!this[_0x4963dc(0x2e0)][_0x51ce82][_0x4963dc(0x1e3)][_0x5ac503])_0x51ce82=this[_0x4963dc(0x2e0)][_0x51ce82]['fail'];if(this['nodes'][_0x51ce82][_0x4963dc(0x1e3)][_0x5ac503])_0x51ce82=this['nodes'][_0x51ce82][_0x4963dc(0x1e3)][_0x5ac503];else _0x51ce82=-0x26dc+-0x17e+-0x285a*-0x1;if(this[_0x4963dc(0x2e0)][_0x51ce82][_0x4963dc(0x21a)][_0x4963dc(0x3c0)])for(const _0x52aa66 of this[_0x4963dc(0x2e0)][_0x51ce82]['output']){_0x28d9c3[_0x4963dc(0x2b6)]({'keyword':_0x52aa66,'index':_0x432b97-_0x52aa66[_0x4963dc(0x3c0)]+(0x1d71+-0xfbb+-0xdb5)});}}return _0x28d9c3;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x4d7946){const _0x2735fa=_0x3cba63,_0x45ef1e=String(_0x4d7946||'')[_0x2735fa(0x23f)](),_0x9afa60=escapeRegex(_0x45ef1e);try{const _0x43458d=_0x2735fa(0x242)+_0x2735fa(0x380)+_0x9afa60+(_0x2735fa(0x2e2)+_0x2735fa(0x26c));return new RegExp(_0x43458d,'iu');}catch(_0x404712){try{return new RegExp('\x5cb'+_0x9afa60+'\x5cb','i');}catch(_0x8f3779){return new RegExp(_0x9afa60,'i');}}}function wildcardToRegex(_0x2c9051){const _0x3a456c=_0x3cba63,_0x57fb6e=String(_0x2c9051||'')[_0x3a456c(0x23f)](),_0x409f98=_0x57fb6e['replace'](/\*/g,'')[_0x3a456c(0x3c0)]>-0x4ba+-0x85+0x53f;if(!_0x409f98)throw new Error('Wildcard\x20m'+'ust\x20contai'+_0x3a456c(0x251)+_0x3a456c(0x2fb)+'\x20*');const _0x4d8670=_0x57fb6e[_0x3a456c(0x244)]('*')['map'](_0x72f2cd=>escapeRegex(_0x72f2cd)),_0x3d338c=_0x4d8670[_0x3a456c(0x324)](_0x3a456c(0x1f8)+_0x3a456c(0x388));try{const _0x39bdbb=_0x3a456c(0x242)+_0x3a456c(0x380)+_0x3d338c+(_0x3a456c(0x2e2)+'p{N}_])');return new RegExp(_0x39bdbb,'iu');}catch(_0xd345bc){const _0x5b9b80=_0x4d8670[_0x3a456c(0x324)]('.*');try{return new RegExp(''+_0x5b9b80,'i');}catch(_0x5c2c8f){return new RegExp(_0x4d8670[_0x3a456c(0x324)](''),'i');}}}function setupSendApi(){const _0x1317bd=_0x3cba63;if(!botRef)return;if(typeof botRef[_0x1317bd(0x320)+'e']==='function')sendApi=async(_0x4bb4b7,_0x4e4fd6)=>await botRef[_0x1317bd(0x320)+'e'](_0x4bb4b7,_0x4e4fd6);else botRef[_0x1317bd(0x3ba)]&&typeof botRef[_0x1317bd(0x3ba)]['sendMessag'+'e']===_0x1317bd(0x1b7)?sendApi=async(_0x37937c,_0x5726ab)=>await botRef[_0x1317bd(0x3ba)][_0x1317bd(0x320)+'e'](_0x37937c,_0x5726ab):sendApi=null;}async function sendText(_0x195219,_0x232072,_0x58e833=[]){const _0x2dec6a=_0x3cba63;if(!_0x232072||!_0x195219)return;const _0x28eca5={'text':String(_0x232072)};if(Array['isArray'](_0x58e833)&&_0x58e833[_0x2dec6a(0x3c0)])_0x28eca5[_0x2dec6a(0x20c)]=_0x58e833;try{if(!sendApi){warn(_0x2dec6a(0x3ad)+_0x2dec6a(0x1f9)+_0x2dec6a(0x1e0));return;}await sendApi(_0x195219,_0x28eca5);}catch(_0x29419d){warn(_0x2dec6a(0x3ad)+_0x2dec6a(0x340)+_0x2dec6a(0x2e4)+_0x195219+':\x20'+(_0x29419d?.[_0x2dec6a(0x271)]||_0x29419d));}}async function tableExists(_0x394e4e){const _0x1f65fa=_0x3cba63;try{const _0x766a08=await db['get'](_0x1f65fa(0x2b7)+_0x1f65fa(0x299)+_0x1f65fa(0x358)+_0x1f65fa(0x38e)+_0x1f65fa(0x1e1)+_0x1f65fa(0x3e5),[_0x394e4e]);return!!_0x766a08;}catch(_0x27a790){return warn(_0x1f65fa(0x347)+'leExists\x20e'+_0x1f65fa(0x38b)+(_0x27a790?.[_0x1f65fa(0x271)]||_0x27a790)),![];}}async function getTableColumns(_0x39ef27){const _0x3c8ef5=_0x3cba63;try{const _0x46bb0f=await db[_0x3c8ef5(0x1c8)](_0x3c8ef5(0x37c)+_0x3c8ef5(0x2f5)+_0x39ef27+')');return(_0x46bb0f||[])['map'](_0x1c57bb=>_0x1c57bb[_0x3c8ef5(0x344)]);}catch(_0x5712fd){return warn(_0x3c8ef5(0x3d3)+_0x3c8ef5(0x339)+_0x3c8ef5(0x256)+_0x3c8ef5(0x270)+_0x39ef27+':\x20'+(_0x5712fd?.[_0x3c8ef5(0x271)]||_0x5712fd)),[];}}async function readAndNormalizeExistingLocks(){const _0xf4fbf1=_0x3cba63;try{const _0x366353=await db[_0xf4fbf1(0x1c8)](_0xf4fbf1(0x35b)+_0xf4fbf1(0x272)),_0x510a53=new Map();for(const _0x1775e4 of _0x366353||[]){const _0x33b79d=[_0xf4fbf1(0x2bd),'chatid',_0xf4fbf1(0x1cf),'jid',_0xf4fbf1(0x1c4)],_0x378c3d=[_0xf4fbf1(0x309),_0xf4fbf1(0x374),'trigger',_0xf4fbf1(0x3de),_0xf4fbf1(0x205),_0xf4fbf1(0x1c1),_0xf4fbf1(0x271)];let _0x1ce02e=null;for(const _0xbe2c06 of _0x33b79d)if(_0xbe2c06 in _0x1775e4&&_0x1775e4[_0xbe2c06]){_0x1ce02e=String(_0x1775e4[_0xbe2c06]);break;}let _0xf4e824=null;for(const _0x14e849 of _0x378c3d)if(_0x14e849 in _0x1775e4&&_0x1775e4[_0x14e849]){_0xf4e824=String(_0x1775e4[_0x14e849]);break;}if(!_0x1ce02e||!_0xf4e824)for(const _0x96dcc of Object[_0xf4fbf1(0x3a5)](_0x1775e4)){const _0x5ecaa7=_0x1775e4[_0x96dcc];if(!_0x1ce02e&&typeof _0x5ecaa7==='string'&&_0x5ecaa7['includes']('@'))_0x1ce02e=_0x5ecaa7;if(!_0xf4e824&&typeof _0x5ecaa7===_0xf4fbf1(0x34c)&&_0x5ecaa7[_0xf4fbf1(0x3c0)]<-0x126a+-0xd03+0x3*0xaff&&!_0x5ecaa7['includes']('@'))_0xf4e824=_0x5ecaa7;}if(!_0x1ce02e||!_0xf4e824)continue;let _0x49494d=_0xf4e824['trim'](),_0xd587e0='normal';if(_0x49494d[_0xf4fbf1(0x34b)+'e']()['startsWith'](_0xf4fbf1(0x1d8)))_0xd587e0='regex',_0x49494d=_0x49494d[_0xf4fbf1(0x21b)](-0x74d*-0x1+0x5*-0x287+-0x62*-0xe)[_0xf4fbf1(0x23f)]();else{if(_0x49494d[_0xf4fbf1(0x274)]('*'))_0xd587e0=_0xf4fbf1(0x213);else _0xd587e0=_0xf4fbf1(0x200);}const _0x265866=_0x1775e4[_0xf4fbf1(0x399)]||_0x1775e4[_0xf4fbf1(0x2b3)]||_0x1775e4['author']||_0x1775e4[_0xf4fbf1(0x3a2)]||'',_0x22f133=Number(_0x1775e4[_0xf4fbf1(0x28c)]||_0x1775e4['ts']||_0x1775e4['timestamp']||0x1d94+-0x23ef*-0x1+-0x4183*0x1)||nowSec(),_0x36bd3e=_0x1ce02e+'||'+_0x49494d;if(!_0x510a53['has'](_0x36bd3e))_0x510a53[_0xf4fbf1(0x318)](_0x36bd3e,{'chat_jid':_0x1ce02e,'phrase':_0x49494d,'type':_0xd587e0,'created_by':_0x265866,'created_at':_0x22f133,'hit_count':Number(_0x1775e4['hit_count']||-0x1759*0x1+-0x6e*-0x4+0x15a1)});else{const _0x4ea931=_0x510a53[_0xf4fbf1(0x22c)](_0x36bd3e);_0x4ea931[_0xf4fbf1(0x28c)]=Math[_0xf4fbf1(0x23b)](_0x4ea931['created_at']||_0x22f133,_0x22f133),_0x4ea931[_0xf4fbf1(0x287)]=(_0x4ea931[_0xf4fbf1(0x287)]||0x2*0xf5c+-0x270f+0x857)+(Number(_0x1775e4[_0xf4fbf1(0x287)])||0xb2*0xb+-0xd98+0x2f9*0x2);}}return Array[_0xf4fbf1(0x1bd)](_0x510a53[_0xf4fbf1(0x326)]());}catch(_0x2c7d0e){return warn(_0xf4fbf1(0x1d2)+'dAndNormal'+_0xf4fbf1(0x3aa)+'gLocks\x20fai'+_0xf4fbf1(0x3b2)+(_0x2c7d0e?.['message']||_0x2c7d0e)),[];}}async function ensureSchema(){const _0x24e9d9=_0x3cba63,_0x3d7821={'id':_0x24e9d9(0x217)+_0x24e9d9(0x2ed)+_0x24e9d9(0x2e6)+'ENT','chat_jid':'TEXT\x20NOT\x20N'+'ULL','phrase':'TEXT\x20NOT\x20N'+'ULL','type':_0x24e9d9(0x1d0)+'LT\x20\x27normal'+'\x27','created_by':_0x24e9d9(0x1d0)+_0x24e9d9(0x33d),'created_at':'INTEGER\x20DE'+_0x24e9d9(0x33c),'hit_count':_0x24e9d9(0x24c)+'FAULT\x200','is_valid_regex':_0x24e9d9(0x24c)+_0x24e9d9(0x215)};try{const _0x387860=await tableExists('locks');if(!_0x387860){const _0x3854f0=Object[_0x24e9d9(0x301)](_0x3d7821)[_0x24e9d9(0x2cf)](([_0x3501c9,_0x17127f])=>_0x3501c9+'\x20'+_0x17127f)['join'](_0x24e9d9(0x2d1));await db[_0x24e9d9(0x1f1)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20C'+_0x24e9d9(0x2eb)+_0x24e9d9(0x394)+_0x24e9d9(0x3db)+_0x3854f0+(_0x24e9d9(0x3c3)+_0x24e9d9(0x3d8)+_0x24e9d9(0x21c)+_0x24e9d9(0x1e5)+_0x24e9d9(0x381)+_0x24e9d9(0x341)));try{await db[_0x24e9d9(0x1f1)](_0x24e9d9(0x384)+_0x24e9d9(0x257)+_0x24e9d9(0x2c4)+_0x24e9d9(0x3bd)+_0x24e9d9(0x218)+_0x24e9d9(0x261)+';');}catch(_0x5860aa){}try{await db['exec']('CREATE\x20UNI'+_0x24e9d9(0x224)+_0x24e9d9(0x314)+_0x24e9d9(0x382)+'cks_unique'+_0x24e9d9(0x1bf)+_0x24e9d9(0x3b8)+'phrase);');}catch(_0x47242e){}info(_0x24e9d9(0x23c)+'ated\x20locks'+'\x20table\x20(ca'+_0x24e9d9(0x36d));try{await db[_0x24e9d9(0x1f1)](_0x24e9d9(0x207)+'LE\x20IF\x20NOT\x20'+_0x24e9d9(0x3a1)+_0x24e9d9(0x366)+_0x24e9d9(0x29b)+_0x24e9d9(0x364)+_0x24e9d9(0x39a)+_0x24e9d9(0x1f3)+_0x24e9d9(0x222)+');');}catch(_0x4f25c2){}return;}const _0x2e927e=await getTableColumns(_0x24e9d9(0x1c5)),_0x56f0cf=_0x2e927e[_0x24e9d9(0x274)]('chat_jid'),_0x1f6f08=_0x2e927e[_0x24e9d9(0x274)](_0x24e9d9(0x309)),_0x14aa63=_0x2e927e[_0x24e9d9(0x274)]('type');if(_0x56f0cf&&_0x1f6f08&&_0x14aa63){if(!_0x2e927e['includes'](_0x24e9d9(0x34d)+_0x24e9d9(0x280)))try{await db[_0x24e9d9(0x1f1)]('ALTER\x20TABL'+'E\x20locks\x20AD'+'D\x20COLUMN\x20i'+_0x24e9d9(0x229)+'gex\x20INTEGE'+_0x24e9d9(0x263)+'1;'),info(_0x24e9d9(0x24e)+_0x24e9d9(0x397)+'d_regex\x20co'+'lumn\x20to\x20lo'+_0x24e9d9(0x22d));}catch(_0x5b5b89){warn('[lock]\x20fai'+_0x24e9d9(0x3d7)+_0x24e9d9(0x3bc)+_0x24e9d9(0x3af)+'mn:\x20'+(_0x5b5b89?.['message']||_0x5b5b89));}try{await db['exec'](_0x24e9d9(0x384)+'EX\x20IF\x20NOT\x20'+_0x24e9d9(0x2c4)+_0x24e9d9(0x3bd)+_0x24e9d9(0x218)+_0x24e9d9(0x261)+';');}catch(_0x5b1c8b){}try{await db['exec']('CREATE\x20UNI'+_0x24e9d9(0x224)+_0x24e9d9(0x314)+_0x24e9d9(0x382)+_0x24e9d9(0x258)+_0x24e9d9(0x1bf)+_0x24e9d9(0x3b8)+_0x24e9d9(0x3dc));}catch(_0x318606){}try{await db[_0x24e9d9(0x1f1)](_0x24e9d9(0x207)+_0x24e9d9(0x1cc)+_0x24e9d9(0x3a1)+_0x24e9d9(0x366)+'hat_jid\x20TE'+_0x24e9d9(0x364)+_0x24e9d9(0x39a)+_0x24e9d9(0x1f3)+_0x24e9d9(0x222)+');');}catch(_0x127a3f){}info('[lock]\x20loc'+_0x24e9d9(0x21e)+_0x24e9d9(0x1f7)+'onical\x20(en'+'sured\x20indi'+'ces\x20&\x20colu'+_0x24e9d9(0x315));return;}info(_0x24e9d9(0x1ec)+_0x24e9d9(0x38f)+_0x24e9d9(0x35e)+_0x24e9d9(0x243)+_0x24e9d9(0x1f4)+_0x24e9d9(0x2e5)+_0x24e9d9(0x288));const _0x42f8ab=await readAndNormalizeExistingLocks();await db['exec'](_0x24e9d9(0x1fc)+_0x24e9d9(0x24b)+_0x24e9d9(0x34f));try{await db[_0x24e9d9(0x1f1)](_0x24e9d9(0x207)+_0x24e9d9(0x1cc)+_0x24e9d9(0x3a1)+_0x24e9d9(0x227)+_0x24e9d9(0x325)+'INTEGER\x20PR'+_0x24e9d9(0x2ed)+_0x24e9d9(0x2e6)+_0x24e9d9(0x389)+_0x24e9d9(0x2b5)+'d\x20TEXT\x20NOT'+_0x24e9d9(0x20b)+'\x20\x20\x20\x20\x20phras'+'e\x20TEXT\x20NOT'+'\x20NULL,\x0a\x20\x20\x20'+_0x24e9d9(0x226)+'TEXT\x20DEFAU'+_0x24e9d9(0x290)+_0x24e9d9(0x2de)+_0x24e9d9(0x2dd)+'y\x20TEXT\x20DEF'+_0x24e9d9(0x3eb)+_0x24e9d9(0x356)+'ated_at\x20IN'+_0x24e9d9(0x370)+'ULT\x200,\x0a\x20\x20\x20'+_0x24e9d9(0x3c7)+_0x24e9d9(0x2ef)+_0x24e9d9(0x310)+_0x24e9d9(0x281)+'\x20\x20is_valid'+'_regex\x20INT'+'EGER\x20DEFAU'+_0x24e9d9(0x2c1)+'\x20\x20\x20\x20UNIQUE'+'(chat_jid,'+_0x24e9d9(0x233)+_0x24e9d9(0x277));}catch(_0x3b72b3){await db[_0x24e9d9(0x1f1)](_0x24e9d9(0x207)+_0x24e9d9(0x1cc)+_0x24e9d9(0x3a1)+'ks_new\x20(\x0a\x20'+_0x24e9d9(0x325)+'INTEGER\x20PR'+_0x24e9d9(0x2ed)+_0x24e9d9(0x2e6)+_0x24e9d9(0x389)+_0x24e9d9(0x2b5)+'d\x20TEXT\x20NOT'+_0x24e9d9(0x20b)+'\x20\x20\x20\x20\x20phras'+_0x24e9d9(0x289)+_0x24e9d9(0x20b)+_0x24e9d9(0x226)+_0x24e9d9(0x1d0)+'LT\x20\x27normal'+_0x24e9d9(0x2de)+_0x24e9d9(0x2dd)+_0x24e9d9(0x1cb)+_0x24e9d9(0x3eb)+_0x24e9d9(0x356)+'ated_at\x20IN'+'TEGER\x20DEFA'+_0x24e9d9(0x30b)+_0x24e9d9(0x3c7)+'ount\x20INTEG'+'ER\x20DEFAULT'+_0x24e9d9(0x281)+_0x24e9d9(0x385)+_0x24e9d9(0x3e6)+_0x24e9d9(0x214)+'LT\x201\x0a\x20\x20\x20\x20\x20'+_0x24e9d9(0x3d2)),warn(_0x24e9d9(0x23c)+'ated\x20locks'+_0x24e9d9(0x34a)+_0x24e9d9(0x27a)+_0x24e9d9(0x210)+'k');}const _0x9ab412=await db[_0x24e9d9(0x1f6)](_0x24e9d9(0x2c6)+_0x24e9d9(0x2af)+_0x24e9d9(0x284)+_0x24e9d9(0x36e)+_0x24e9d9(0x26d)+'ated_by,\x20c'+_0x24e9d9(0x20a)+_0x24e9d9(0x30a)+_0x24e9d9(0x211)+_0x24e9d9(0x201)+'LUES\x20(?,\x20?'+_0x24e9d9(0x2a5)+_0x24e9d9(0x371));try{for(const _0x1f9d5a of _0x42f8ab){try{let _0x2f4bfa=0x1410+0x1195*-0x2+0xf1b*0x1;if(_0x1f9d5a['type']==='regex')try{new RegExp(_0x1f9d5a[_0x24e9d9(0x309)]);}catch(_0x35a36b){_0x2f4bfa=-0x218b*-0x1+0x18+-0x4f*0x6d;}await _0x9ab412[_0x24e9d9(0x20e)](_0x1f9d5a['chat_jid'],_0x1f9d5a[_0x24e9d9(0x309)],_0x1f9d5a[_0x24e9d9(0x2ba)]||'normal',_0x1f9d5a[_0x24e9d9(0x399)]||'',Number(_0x1f9d5a[_0x24e9d9(0x28c)]||nowSec()),Number(_0x1f9d5a[_0x24e9d9(0x287)]||-0x232c+-0x2c*-0x95+0x990),_0x2f4bfa);}catch(_0x507b61){warn('[lock]\x20mig'+_0x24e9d9(0x294)+_0x24e9d9(0x20f)+'\x20for\x20'+_0x1f9d5a[_0x24e9d9(0x2bd)]+'@'+_0x1f9d5a['phrase']+':\x20'+(_0x507b61?.[_0x24e9d9(0x271)]||_0x507b61));}}}finally{try{await _0x9ab412['finalize']();}catch(_0x41b575){}}try{const _0x3218b3=_0x24e9d9(0x206)+_0x24e9d9(0x351)+Math['floor'](Date[_0x24e9d9(0x302)]()/(-0x2*0xf89+0x203c+-0x12*-0x27));await db['exec'](_0x24e9d9(0x2ac)+_0x24e9d9(0x32f)+_0x24e9d9(0x31e)+_0x3218b3+';'),await db['exec']('ALTER\x20TABL'+_0x24e9d9(0x3dd)+'w\x20RENAME\x20T'+'O\x20locks;');try{await db['exec'](_0x24e9d9(0x384)+_0x24e9d9(0x257)+_0x24e9d9(0x2c4)+_0x24e9d9(0x3bd)+_0x24e9d9(0x218)+'(chat_jid)'+';');}catch(_0x4bd8e8){}try{await db[_0x24e9d9(0x1f1)](_0x24e9d9(0x2dc)+'QUE\x20INDEX\x20'+_0x24e9d9(0x314)+'STS\x20idx_lo'+_0x24e9d9(0x258)+_0x24e9d9(0x1bf)+_0x24e9d9(0x3b8)+_0x24e9d9(0x3dc));}catch(_0x438128){}try{await db['exec'](_0x24e9d9(0x207)+_0x24e9d9(0x1cc)+_0x24e9d9(0x3a1)+_0x24e9d9(0x366)+_0x24e9d9(0x29b)+_0x24e9d9(0x364)+_0x24e9d9(0x39a)+'fy\x20INTEGER'+_0x24e9d9(0x222)+');');}catch(_0x4e0fbd){}info(_0x24e9d9(0x377)+_0x24e9d9(0x246)+_0x24e9d9(0x32c)+'\x20table\x20ren'+'amed\x20to\x20ba'+_0x24e9d9(0x3a4));}catch(_0x3087ef){warn(_0x24e9d9(0x377)+_0x24e9d9(0x24a)+_0x24e9d9(0x312)+(_0x3087ef?.[_0x24e9d9(0x271)]||_0x3087ef));throw _0x3087ef;}finally{await db[_0x24e9d9(0x1f1)](_0x24e9d9(0x1fc)+_0x24e9d9(0x24b)+'=\x20ON;');}return;}catch(_0x562396){error(_0x562396,_0x24e9d9(0x2d0)+'ureSchema\x20'+'fatal');throw _0x562396;}}async function addLock(_0x3c5bb6,_0x234767,_0x396f8a){const _0x1dc41b=_0x3cba63;try{if(!_0x3c5bb6||!_0x234767)return![];let _0x8690ad=String(_0x234767)[_0x1dc41b(0x23f)]();if(!_0x8690ad)return![];let _0x3c5348=_0x1dc41b(0x200),_0x194bd4=-0xb*-0xb4+0x3*-0xc5+-0x56c;if(_0x8690ad[_0x1dc41b(0x34b)+'e']()[_0x1dc41b(0x2bc)](_0x1dc41b(0x1d8))){_0x3c5348=_0x1dc41b(0x1bc),_0x8690ad=_0x8690ad['slice'](0x254d+-0xabb*0x2+-0x1*0xfd1)[_0x1dc41b(0x23f)]();try{new RegExp(_0x8690ad),_0x194bd4=0x1365+-0x1*-0x1c67+-0x2fcb;}catch(_0x1bd147){_0x194bd4=-0xc0a+0xf8*-0x15+0x2062,warn(_0x1dc41b(0x24e)+_0x1dc41b(0x26f)+_0x1dc41b(0x1c7)+_0x1dc41b(0x1f2)+_0x8690ad);}}else _0x8690ad['includes']('*')?_0x3c5348=_0x1dc41b(0x213):_0x3c5348=_0x1dc41b(0x200);try{const _0x4de05e=await db[_0x1dc41b(0x20e)]('INSERT\x20INT'+'O\x20locks\x20(c'+'hat_jid,\x20p'+_0x1dc41b(0x21d)+_0x1dc41b(0x234)+_0x1dc41b(0x1ef)+_0x1dc41b(0x29c)+_0x1dc41b(0x32d)+'_valid_reg'+_0x1dc41b(0x29a)+'\x20\x20\x20VALUES\x20'+_0x1dc41b(0x303)+_0x1dc41b(0x361)+_0x1dc41b(0x338)+_0x1dc41b(0x308)+_0x1dc41b(0x37d)+_0x1dc41b(0x33f)+_0x1dc41b(0x279)+_0x1dc41b(0x1d4)+'\x20\x20\x20\x20\x20\x20type'+_0x1dc41b(0x1b5)+_0x1dc41b(0x26e)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'reated_by\x20'+_0x1dc41b(0x248)+_0x1dc41b(0x268)+_0x1dc41b(0x203)+_0x1dc41b(0x249)+_0x1dc41b(0x255)+_0x1dc41b(0x386)+_0x1dc41b(0x383)+_0x1dc41b(0x2be)+_0x1dc41b(0x229)+'gex\x20=\x20excl'+'uded.is_va'+_0x1dc41b(0x37b),[_0x3c5bb6,_0x8690ad,_0x3c5348,_0x396f8a||'',nowSec(),_0x194bd4]);return ahoCache[_0x1dc41b(0x2c5)](_0x3c5bb6),info('[lock]\x20add'+_0x1dc41b(0x2fe)+_0x8690ad+_0x1dc41b(0x267)+_0x3c5bb6+_0x1dc41b(0x1e2)+_0x3c5348+_0x1dc41b(0x355)+_0x194bd4+')'),!![];}catch(_0x4d1950){warn(_0x1dc41b(0x323)+_0x1dc41b(0x25f)+_0x1dc41b(0x3a7)+_0x1dc41b(0x240)+_0x1dc41b(0x3da)+(_0x4d1950?.[_0x1dc41b(0x271)]||_0x4d1950));try{const _0x56cc3e=await db[_0x1dc41b(0x22c)](_0x1dc41b(0x30d)+'FROM\x20locks'+'\x20WHERE\x20cha'+_0x1dc41b(0x1c9)+_0x1dc41b(0x3a0)+_0x1dc41b(0x3c2),[_0x3c5bb6,_0x8690ad]);return _0x56cc3e?await db[_0x1dc41b(0x20e)]('UPDATE\x20loc'+_0x1dc41b(0x1be)+_0x1dc41b(0x3b4)+_0x1dc41b(0x35a)+_0x1dc41b(0x317)+_0x1dc41b(0x31b)+_0x1dc41b(0x229)+_0x1dc41b(0x300)+_0x1dc41b(0x29e),[_0x3c5348,_0x396f8a||'',nowSec(),_0x194bd4,_0x56cc3e['id']]):await db[_0x1dc41b(0x20e)](_0x1dc41b(0x2c6)+'O\x20locks\x20(c'+_0x1dc41b(0x21c)+_0x1dc41b(0x21d)+_0x1dc41b(0x234)+_0x1dc41b(0x1ef)+'ed_at,\x20hit'+_0x1dc41b(0x32d)+_0x1dc41b(0x349)+_0x1dc41b(0x31c)+'\x20(?,\x20?,\x20?,'+'\x20?,\x20?,\x200,\x20'+'?)',[_0x3c5bb6,_0x8690ad,_0x3c5348,_0x396f8a||'',nowSec(),_0x194bd4]),ahoCache[_0x1dc41b(0x2c5)](_0x3c5bb6),!![];}catch(_0x168237){return error(_0x168237,_0x1dc41b(0x24e)+_0x1dc41b(0x2d3)+_0x1dc41b(0x353)+'\x20for\x20'+_0x8690ad+_0x1dc41b(0x296)+_0x3c5bb6),![];}}}catch(_0x3aee8d){return error(_0x3aee8d,_0x1dc41b(0x24e)+_0x1dc41b(0x365)+'d\x20for\x20'+_0x234767+_0x1dc41b(0x296)+_0x3c5bb6),![];}}async function deleteLockByPhrase(_0x3ea4f6,_0x3a8705){const _0x2241dc=_0x3cba63;try{if(!_0x3ea4f6||!_0x3a8705)return 0xe82*0x1+0x1f*-0xad+0x671*0x1;const _0x4a1755=String(_0x3a8705||'')[_0x2241dc(0x23f)]();if(!_0x4a1755)return 0xb3*0x18+-0x1063*-0x2+-0x318e;if(_0x4a1755[_0x2241dc(0x34b)+'e']()[_0x2241dc(0x2bc)](_0x2241dc(0x1d8))){const _0x212645=_0x4a1755[_0x2241dc(0x21b)](0x23b*0x10+0x190f*-0x1+-0xa9b)[_0x2241dc(0x23f)](),_0x531fe4=await db['run'](_0x2241dc(0x322)+'M\x20locks\x20WH'+_0x2241dc(0x392)+_0x2241dc(0x1da)+_0x2241dc(0x3c1)+_0x2241dc(0x39b)+'phrase\x20=\x20?',[_0x3ea4f6,_0x212645]);if(_0x531fe4?.['changes'])ahoCache[_0x2241dc(0x2c5)](_0x3ea4f6);return _0x531fe4?.[_0x2241dc(0x336)]||0xd3*0x2f+-0x5*-0x3a1+-0x2*0x1c71;}let _0x4bc53b=await db[_0x2241dc(0x20e)](_0x2241dc(0x322)+_0x2241dc(0x3b5)+'ERE\x20chat_j'+'id\x20=\x20?\x20AND'+_0x2241dc(0x3a9)+'?',[_0x3ea4f6,_0x4a1755]);if(_0x4bc53b?.['changes'])return ahoCache[_0x2241dc(0x2c5)](_0x3ea4f6),_0x4bc53b[_0x2241dc(0x336)];return 0xe13*-0x2+-0x454+0x207a;}catch(_0x123162){return warn('[lock]\x20del'+_0x2241dc(0x223)+_0x2241dc(0x2cb)+_0x2241dc(0x293)+(_0x123162?.[_0x2241dc(0x271)]||_0x123162)),0xd0d+-0x7*0x526+-0x1*-0x16fd;}}async function deleteLockById(_0x2ec71a,_0x402690){const _0x373c75=_0x3cba63;try{const _0x7c1b83=await db[_0x373c75(0x20e)](_0x373c75(0x322)+_0x373c75(0x3b5)+'ERE\x20chat_j'+'id\x20=\x20?\x20AND'+'\x20id\x20=\x20?',[_0x2ec71a,_0x402690]);if(_0x7c1b83?.[_0x373c75(0x336)])ahoCache[_0x373c75(0x2c5)](_0x2ec71a);return _0x7c1b83?.[_0x373c75(0x336)]||0x1*-0x18f6+0x17c3+0x133;}catch(_0x8c6cee){return warn(_0x373c75(0x208)+_0x373c75(0x295)+_0x373c75(0x2bb)+(_0x8c6cee?.[_0x373c75(0x271)]||_0x8c6cee)),0x1c0a*-0x1+0x1*-0x21e3+0x3ded*0x1;}}async function deleteAllLocksForChat(_0x4e30b1){const _0x26384e=_0x3cba63;try{const _0x4ec5e4=await db['run'](_0x26384e(0x322)+_0x26384e(0x3b5)+'ERE\x20chat_j'+_0x26384e(0x1dc),[_0x4e30b1]);if(_0x4ec5e4?.[_0x26384e(0x336)])ahoCache[_0x26384e(0x2c5)](_0x4e30b1);return _0x4ec5e4?.[_0x26384e(0x336)]||0x1c22+0x19*0x4a+-0x3e*0x92;}catch(_0x44bdad){return warn(_0x26384e(0x208)+_0x26384e(0x28a)+_0x26384e(0x2a7)+_0x26384e(0x38b)+(_0x44bdad?.[_0x26384e(0x271)]||_0x44bdad)),0x4*-0x629+-0x1fc6+0x386a;}}async function listLocksForChat(_0x1faafe){const _0x3a6e4c=_0x3cba63;try{const _0x2fbb78=await db['all'](_0x3a6e4c(0x3bf)+_0x3a6e4c(0x238)+_0x3a6e4c(0x1d3)+_0x3a6e4c(0x33e)+_0x3a6e4c(0x38a)+_0x3a6e4c(0x378)+_0x3a6e4c(0x34d)+_0x3a6e4c(0x1de)+_0x3a6e4c(0x396)+_0x3a6e4c(0x22e)+_0x3a6e4c(0x2a6)+_0x3a6e4c(0x2f3),[_0x1faafe]);return _0x2fbb78||[];}catch(_0x31e2fc){return warn(_0x31e2fc,'[lock]\x20lis'+_0x3a6e4c(0x1eb)+_0x3a6e4c(0x29f)+_0x3a6e4c(0x2f1)+_0x1faafe+':\x20'+(_0x31e2fc?.['message']||_0x31e2fc)),[];}}async function setLockNotify(_0xcef528,_0x28283e){const _0xb61a42=_0x3cba63;try{if(!_0xcef528)return![];return await db[_0xb61a42(0x20e)](_0xb61a42(0x2c6)+'O\x20lock_pre'+_0xb61a42(0x2d4)+'id,\x20notify'+_0xb61a42(0x22b)+'?,\x20?)\x0a\x20\x20\x20\x20'+_0xb61a42(0x1ed)+_0xb61a42(0x393)+_0xb61a42(0x2f4)+_0xb61a42(0x1ba)+_0xb61a42(0x3d5)+_0xb61a42(0x278)+_0xb61a42(0x264),[_0xcef528,_0x28283e?0x170a+-0xa1*0x10+-0xcf9:-0x111+-0x1df*0x8+0x335*0x5]),!![];}catch(_0x129698){return warn(_0xb61a42(0x2e3)+_0xb61a42(0x2f7)+_0xb61a42(0x32b)+'r\x20'+_0xcef528+':\x20'+(_0x129698?.[_0xb61a42(0x271)]||_0x129698)),![];}}async function getLockNotify(_0x520f36){const _0x5af5b4=_0x3cba63;try{if(!_0x520f36)return-0x144d*0x1+-0x19*0x4b+0x1ba0;const _0xe296c7=await db[_0x5af5b4(0x22c)]('SELECT\x20not'+_0x5af5b4(0x265)+_0x5af5b4(0x345)+_0x5af5b4(0x1ff)+_0x5af5b4(0x32e),[_0x520f36]);return _0xe296c7?Number(_0xe296c7[_0x5af5b4(0x22a)])?-0x194+-0x1d*0x35+0x796:0x946*0x2+-0x1*0xa21+-0x86b:-0x237c+-0x31e*0x9+-0x3*-0x152e;}catch(_0x5f4c71){return warn(_0x5af5b4(0x3d3)+_0x5af5b4(0x2f7)+_0x5af5b4(0x32b)+'r\x20'+_0x520f36+':\x20'+(_0x5f4c71?.[_0x5af5b4(0x271)]||_0x5f4c71)),-0x971+0xe*-0x3a+0xc9d*0x1;}}async function deleteWithRetry(_0x478d4b,_0x24c413=-0x791+-0xb8f*0x1+0x9e*0x1f,_0x5c0d69=0x9ea+0x3*-0x7c3+0x3*0x4d9){const _0x1cd95b=_0x3cba63,_0x33c636=_0x478d4b[_0x1cd95b(0x360)]?.[_0x1cd95b(0x22f)];if(!_0x33c636)return![];let _0x39a310=_0x5c0d69;for(let _0x28e8a7=-0x35*0x1d+-0x289*-0x8+-0xe46;_0x28e8a7<=Math[_0x1cd95b(0x283)](0x12d7*-0x2+-0x2342+0x48f1,_0x24c413);_0x28e8a7++){try{if(!sendApi)return warn(_0x1cd95b(0x208)+_0x1cd95b(0x225)+_0x1cd95b(0x2ad)+_0x1cd95b(0x259)+'ble'),![];return await sendApi(_0x33c636,{'delete':_0x478d4b[_0x1cd95b(0x360)]}),!![];}catch(_0x5e31c7){if(_0x28e8a7<_0x24c413){await sleep(_0x39a310),_0x39a310*=-0x2502+-0x745+0x3*0xec3;continue;}return warn(_0x1cd95b(0x208)+_0x1cd95b(0x225)+_0x1cd95b(0x2a1)+'\x20'+(_0x5e31c7?.[_0x1cd95b(0x271)]||_0x5e31c7)),![];}}return![];}async function sendWarningAndMaybeDelete(_0x7579ae){const _0x5092c8=_0x3cba63;if(!CFG[_0x5092c8(0x3be)+'NG'])return;try{const _0x26e259=_0x7579ae['key']?.[_0x5092c8(0x319)+'t']||_0x7579ae[_0x5092c8(0x360)]?.[_0x5092c8(0x1bd)]||'',_0x3e2424=_0x7579ae['key']['remoteJid'],_0x44748c=_0x26e259?'@'+String(_0x26e259)['split']('@')[0xec*0x17+-0x575+0x1*-0xfbf]:_0x5092c8(0x398),_0x3d48d3=String(CFG[_0x5092c8(0x359)+_0x5092c8(0x2d6)]||DEFAULTS[_0x5092c8(0x359)+_0x5092c8(0x2d6)])[_0x5092c8(0x3b9)](/\{user\}/gi,_0x44748c);if(!sendApi){warn(_0x5092c8(0x3ad)+_0x5092c8(0x2d8)+_0x5092c8(0x327)+_0x5092c8(0x25e));return;}const _0x41dffc=await sendApi(_0x3e2424,{'text':_0x3d48d3,'mentions':_0x26e259?[_0x26e259]:[]});_0x41dffc?.[_0x5092c8(0x360)]&&CFG[_0x5092c8(0x379)+_0x5092c8(0x2c0)]&&CFG[_0x5092c8(0x379)+_0x5092c8(0x2c0)]>0x6*-0x638+0x1*0x314+0x223c*0x1&&setTimeout(async()=>{const _0x2d7521=_0x5092c8;try{await sendApi(_0x3e2424,{'delete':_0x41dffc[_0x2d7521(0x360)]});}catch(_0x544533){}},CFG[_0x5092c8(0x379)+_0x5092c8(0x2c0)]);}catch(_0x2f44a2){warn(_0x5092c8(0x3ad)+_0x5092c8(0x276)+'ailed:\x20'+(_0x2f44a2?.[_0x5092c8(0x271)]||_0x2f44a2));}}async function processChatQueue(_0x619e54){const _0x5229a1=_0x3cba63;while((perChatQueue[_0x5229a1(0x22c)](_0x619e54)||[])['length']>0x1*0x1bb9+-0x8*0x94+-0x1719&&!shuttingDown){const _0x3cb960=Math['max'](-0x32*0x7a+-0x801*0x3+0x2fd8,CFG[_0x5229a1(0x1c6)]||-0x1405+0x19c9+-0x5c3),_0x2cd9e7=perChatQueue[_0x5229a1(0x22c)](_0x619e54)||[],_0x45cd0f=_0x2cd9e7[_0x5229a1(0x1d1)](-0x1e07+-0x1f*0x43+0x2624,_0x3cb960);for(const _0x367807 of _0x45cd0f){try{const _0x42d101=await deleteWithRetry(_0x367807)[_0x5229a1(0x3cd)](()=>![]);_0x42d101&&await sendWarningAndMaybeDelete(_0x367807)[_0x5229a1(0x3cd)](()=>{});}catch(_0x262597){warn(_0x5229a1(0x2ea)+_0x5229a1(0x330)+'eue\x20item\x20e'+_0x5229a1(0x38b)+(_0x262597?.['message']||_0x262597));}}(perChatQueue['get'](_0x619e54)||[])['length']>0x24c9+-0x1*0x76c+0x1*-0x1d5d&&await sleep(Math[_0x5229a1(0x283)](0x15b*0x11+-0x2384+0xc79,CFG[_0x5229a1(0x2f0)+_0x5229a1(0x3d9)]||0x2496+0x623*-0x1+-0x1dab));}if((perChatQueue[_0x5229a1(0x22c)](_0x619e54)||[])[_0x5229a1(0x3c0)]===0x2*-0xbfb+-0x107a+0x2870)perChatQueue[_0x5229a1(0x2c5)](_0x619e54);}function tryStartProcessingForChat(_0x1296ac){const _0x39088f=_0x3cba63;if(perChatProcessing['get'](_0x1296ac))return;if(activeChats>=(CFG[_0x39088f(0x2e7)+_0x39088f(0x241)]||0x1*-0x71b+0x186b+-0x114f)){setTimeout(()=>tryStartProcessingForChat(_0x1296ac),0x602+0xbc3+-0x112f);return;}activeChats++,perChatProcessing['set'](_0x1296ac,!![]),((async()=>{const _0x157418=_0x39088f;try{await processChatQueue(_0x1296ac);}catch(_0x4155d8){warn(_0x157418(0x2ea)+_0x157418(0x330)+_0x157418(0x2e9)+(_0x4155d8?.[_0x157418(0x271)]||_0x4155d8));}finally{perChatProcessing[_0x157418(0x2c5)](_0x1296ac),activeChats=Math[_0x157418(0x283)](0x200+-0xf17+0xd17,activeChats-(-0x1*0x119e+0x1*-0xe7d+-0x2*-0x100e));if((perChatQueue['get'](_0x1296ac)||[])[_0x157418(0x3c0)])setImmediate(()=>tryStartProcessingForChat(_0x1296ac));}})());}function enqueueDeletion(_0x4fcc4a){const _0x34f049=_0x3cba63,_0x484e14=_0x4fcc4a[_0x34f049(0x360)]?.[_0x34f049(0x22f)];if(!_0x484e14)return;if(!perChatQueue[_0x34f049(0x1e7)](_0x484e14))perChatQueue['set'](_0x484e14,[]);const _0x1b5be6=perChatQueue[_0x34f049(0x22c)](_0x484e14);if(_0x1b5be6[_0x34f049(0x3c0)]>=(CFG[_0x34f049(0x3ce)+_0x34f049(0x202)]||DEFAULTS[_0x34f049(0x3ce)+_0x34f049(0x202)]))_0x1b5be6[_0x34f049(0x1b6)]();_0x1b5be6[_0x34f049(0x2b6)](_0x4fcc4a);if(!perChatProcessing[_0x34f049(0x22c)](_0x484e14))tryStartProcessingForChat(_0x484e14);}function extractTextFromMessage(_0x41b5a1){const _0x27b9bc=_0x3cba63;if(!_0x41b5a1||!_0x41b5a1[_0x27b9bc(0x271)])return'';const _0x426f5a=_0x41b5a1['message'];if(_0x426f5a['conversati'+'on'])return _0x426f5a[_0x27b9bc(0x28f)+'on'];if(_0x426f5a[_0x27b9bc(0x33a)+_0x27b9bc(0x253)]?.[_0x27b9bc(0x337)])return _0x426f5a[_0x27b9bc(0x33a)+_0x27b9bc(0x253)][_0x27b9bc(0x337)];if(_0x426f5a[_0x27b9bc(0x3cc)+'ge']?.[_0x27b9bc(0x1d6)])return _0x426f5a[_0x27b9bc(0x3cc)+'ge']['caption'];if(_0x426f5a[_0x27b9bc(0x1e6)+'ge']?.[_0x27b9bc(0x1d6)])return _0x426f5a[_0x27b9bc(0x1e6)+'ge']['caption'];if(_0x426f5a[_0x27b9bc(0x39f)+_0x27b9bc(0x3e8)+'ge']?.[_0x27b9bc(0x2e1)+_0x27b9bc(0x2c3)])return _0x426f5a[_0x27b9bc(0x39f)+'ponseMessa'+'ge'][_0x27b9bc(0x2e1)+_0x27b9bc(0x2c3)];return'';}function splitRestForGp(_0x25b156){const _0x38a952=_0x3cba63;if(!_0x25b156)return{'left':'','gp':null};const _0x3817e3=_0x25b156[_0x38a952(0x342)](/\bgp[:\s]+(.+)$/i);if(_0x3817e3){const _0x45eb62=_0x25b156['slice'](0x1a2+-0x8*0x304+0x167e,_0x3817e3['index'])['trim'](),_0x5559c=_0x3817e3[0x1f7f+-0x766+-0x1818][_0x38a952(0x23f)]();return{'left':_0x45eb62,'gp':_0x5559c};}const _0x4f879f=_0x25b156['split'](/\s+/)['filter'](Boolean);if(_0x4f879f['length']>-0x14bd+-0x44*0x44+-0x26ce*-0x1){const _0x135ff8=_0x4f879f[_0x4f879f[_0x38a952(0x3c0)]-(-0x1fc6+0x11a5*-0x1+0x1*0x316c)];if(_0x135ff8[_0x38a952(0x34b)+'e']()===_0x38a952(0x1c8)||_0x135ff8[_0x38a952(0x274)]('@'))return _0x4f879f[_0x38a952(0x367)](),{'left':_0x4f879f[_0x38a952(0x324)]('\x20')['trim'](),'gp':_0x135ff8};}return{'left':_0x25b156[_0x38a952(0x23f)](),'gp':null};}function parseLockCommandOneLine(_0x57fcc4){const _0x17da33=_0x3cba63,_0x44faa0=(_0x57fcc4||'')[_0x17da33(0x244)](/\r?\n/)[0x25f9+-0x326+0x22d3*-0x1]['trim']();let _0x51a5cc=_0x44faa0['replace'](/^\/?lock\b/i,'')[_0x17da33(0x23f)]();const {left:_0x20a899,gp:_0x144c08}=splitRestForGp(_0x51a5cc),_0x10d7fd=(_0x20a899||'')[_0x17da33(0x244)](',')[_0x17da33(0x2cf)](_0x223afa=>_0x223afa['trim']())['filter'](Boolean);return{'triggers':_0x10d7fd,'gp':_0x144c08};}function parseUnlockCommandOneLine(_0xea468){const _0x216387=_0x3cba63,_0xaac0d5=(_0xea468||'')[_0x216387(0x244)](/\r?\n/)[-0x36*-0x99+-0x2*-0x129a+-0x457a]['trim']();let _0x17a916=_0xaac0d5[_0x216387(0x3b9)](/^\/?unlock\b/i,'')['trim']();const {left:_0xbe35b5,gp:_0x94e081}=splitRestForGp(_0x17a916),_0xa58e32=(_0xbe35b5||'')[_0x216387(0x244)](',')[_0x216387(0x2cf)](_0x2a18fa=>_0x2a18fa['trim']())[_0x216387(0x3b3)](Boolean);return{'parts':_0xa58e32,'gp':_0x94e081};}function parseListCommandOneLine(_0x46bd4f){const _0x36e9ee=_0x3cba63,_0x166385=(_0x46bd4f||'')[_0x36e9ee(0x244)](/\r?\n/)[0x1c2f*-0x1+-0x12b+-0xd*-0x242]['trim']();let _0x13610e=_0x166385[_0x36e9ee(0x3b9)](/^\/?listlock\b/i,'')[_0x36e9ee(0x23f)]();const {left:_0x5ac9a2,gp:_0x466635}=splitRestForGp(_0x13610e),_0x2a6b39=_0x466635||(_0x5ac9a2?_0x5ac9a2:null);return{'gp':_0x2a6b39};}function parseLockNotifyCommandOneLine(_0x55711f){const _0x4c4324=_0x3cba63,_0x4f181b=(_0x55711f||'')[_0x4c4324(0x244)](/\r?\n/)[0x1c+-0x1*-0x1940+-0x195c][_0x4c4324(0x23f)]();let _0x3d09cb=_0x4f181b['replace'](/^\/?locknotify\b/i,'')['trim']();const {left:_0x526ee2,gp:_0x1a255a}=splitRestForGp(_0x3d09cb),_0x351487=(_0x526ee2||'')[_0x4c4324(0x34b)+'e']();let _0x15d4e9=null;if(_0x351487[_0x4c4324(0x274)]('on'))_0x15d4e9='on';else{if(_0x351487['includes'](_0x4c4324(0x348)))_0x15d4e9=_0x4c4324(0x348);}return{'mode':_0x15d4e9,'gp':_0x1a255a};}function _0x32ce(_0x253904,_0x186ba6){const _0x171661=_0x35e0();return _0x32ce=function(_0x2c46fa,_0x322983){_0x2c46fa=_0x2c46fa-(0x1*-0x22f1+0x2319+0x18b);let _0x195bfd=_0x171661[_0x2c46fa];return _0x195bfd;},_0x32ce(_0x253904,_0x186ba6);}async function validateStoredRegexes(){const _0xa04151=_0x3cba63;try{const _0x309933=await db[_0xa04151(0x1c8)](_0xa04151(0x3bf)+'\x20phrase\x20FR'+'OM\x20locks\x20W'+_0xa04151(0x328)+_0xa04151(0x343)+_0xa04151(0x321)+_0xa04151(0x21f)+'egex\x27');for(const _0x17be29 of _0x309933||[]){try{new RegExp(_0x17be29[_0xa04151(0x309)]),await db[_0xa04151(0x20e)](_0xa04151(0x291)+_0xa04151(0x3e0)+_0xa04151(0x212)+_0xa04151(0x1ea)+'E\x20id\x20=\x20?',[_0x17be29['id']]);}catch(_0x19ac3c){await db['run']('UPDATE\x20loc'+_0xa04151(0x3e0)+'valid_rege'+_0xa04151(0x3c4)+_0xa04151(0x3a8),[_0x17be29['id']]);}}}catch(_0x2b2104){warn(_0xa04151(0x2b1)+_0xa04151(0x29d)+_0xa04151(0x387)+_0xa04151(0x38b)+(_0x2b2104?.[_0xa04151(0x271)]||_0x2b2104));}}async function findStoredMatchFromFindings(_0x51ebd9=[]){const _0x3b1104=_0x3cba63;try{const _0x1da5ac=await listSudo();if(!Array[_0x3b1104(0x2b9)](_0x1da5ac)||_0x1da5ac['length']===0x2606+-0x12d3+-0x1333)return null;const _0x55a479=new Set(_0x1da5ac[_0x3b1104(0x2cf)](String));for(const _0x271920 of _0x51ebd9||[]){if(!_0x271920||typeof _0x271920[_0x3b1104(0x28d)]!==_0x3b1104(0x34c))continue;const _0x457f07=normalizeToJid(_0x271920[_0x3b1104(0x28d)]);if(_0x457f07&&_0x55a479[_0x3b1104(0x1e7)](_0x457f07))return _0x457f07;if(_0x55a479[_0x3b1104(0x1e7)](_0x271920[_0x3b1104(0x28d)]))return _0x271920['jid'];const _0x4fa6d9=String(_0x271920[_0x3b1104(0x28d)])['split']('@')[-0x148*-0x4+0x8c9+0x1*-0xde9]['split'](':')[0x1305+0x749+-0x1a4e];if(_0x4fa6d9)for(const _0x3a49a8 of _0x1da5ac){const _0xf35d7e=String(_0x3a49a8)['split']('@')[-0x3e6+-0x16f*-0x1+-0x277*-0x1];if(_0xf35d7e&&_0xf35d7e===_0x4fa6d9)return _0x3a49a8;}}return null;}catch(_0x1a2a72){return warn('[lock]\x20fin'+_0x3b1104(0x3d0)+_0x3b1104(0x2f2)+'ings\x20error'+':\x20'+(_0x1a2a72?.[_0x3b1104(0x271)]||_0x1a2a72)),null;}}export async function initialize(_0x357e54){const _0x45bd0e=_0x3cba63;if(!_0x357e54)throw new Error(_0x45bd0e(0x3ea)+_0x45bd0e(0x2ab)+_0x45bd0e(0x3e1)+'nstance');botRef=_0x357e54,setupSendApi();try{const _0xd62842=getConfig()||{},_0x2af17b=_0xd62842&&_0xd62842['LOCKS']?_0xd62842[_0x45bd0e(0x38c)]:{};CFG['DEFAULT_EN'+_0x45bd0e(0x2b4)]=_0x2af17b['DEFAULT_EN'+_0x45bd0e(0x2b4)]??DEFAULTS[_0x45bd0e(0x254)+'ABLED'],CFG[_0x45bd0e(0x3be)+'NG']=_0x2af17b[_0x45bd0e(0x3be)+'NG']??DEFAULTS[_0x45bd0e(0x3be)+'NG'],CFG[_0x45bd0e(0x359)+_0x45bd0e(0x2d6)]=_0x2af17b[_0x45bd0e(0x359)+_0x45bd0e(0x2d6)]??DEFAULTS[_0x45bd0e(0x359)+_0x45bd0e(0x2d6)],CFG[_0x45bd0e(0x379)+_0x45bd0e(0x2c0)]=Number['isInteger'](_0x2af17b[_0x45bd0e(0x379)+_0x45bd0e(0x2c0)])?_0x2af17b[_0x45bd0e(0x379)+_0x45bd0e(0x2c0)]:DEFAULTS[_0x45bd0e(0x379)+_0x45bd0e(0x2c0)],CFG[_0x45bd0e(0x3ce)+_0x45bd0e(0x202)]=Number['isInteger'](_0x2af17b[_0x45bd0e(0x3ce)+_0x45bd0e(0x202)])?_0x2af17b[_0x45bd0e(0x3ce)+'UEUE_LIMIT']:DEFAULTS[_0x45bd0e(0x3ce)+_0x45bd0e(0x202)],CFG[_0x45bd0e(0x1c6)]=Number[_0x45bd0e(0x3ca)](_0x2af17b[_0x45bd0e(0x1c6)])?_0x2af17b[_0x45bd0e(0x1c6)]:DEFAULTS[_0x45bd0e(0x1c6)],CFG['BATCH_DELA'+_0x45bd0e(0x3d9)]=Number[_0x45bd0e(0x3ca)](_0x2af17b['BATCH_DELA'+_0x45bd0e(0x3d9)])?_0x2af17b[_0x45bd0e(0x2f0)+_0x45bd0e(0x3d9)]:DEFAULTS[_0x45bd0e(0x2f0)+'Y_MS'],CFG[_0x45bd0e(0x2e7)+_0x45bd0e(0x241)]=Number[_0x45bd0e(0x3ca)](_0x2af17b['GLOBAL_CON'+'CURRENCY'])?_0x2af17b[_0x45bd0e(0x2e7)+_0x45bd0e(0x241)]:DEFAULTS[_0x45bd0e(0x2e7)+_0x45bd0e(0x241)],CFG['NORMALIZE_'+_0x45bd0e(0x27c)+'CRITICS']=!!_0x2af17b[_0x45bd0e(0x27d)+_0x45bd0e(0x27c)+_0x45bd0e(0x3d6)];}catch(_0x3a5c33){warn('[lock]\x20con'+_0x45bd0e(0x26b)+_0x45bd0e(0x30f)+_0x45bd0e(0x1b3)+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info(_0x45bd0e(0x2b0)+'tialized\x20('+'DB\x20ensured'+_0x45bd0e(0x23e)+_0x45bd0e(0x282)+'run)');}catch(_0x5d5fce){error(_0x5d5fce,'[lock]\x20ini'+_0x45bd0e(0x313)+'tal');throw _0x5d5fce;}}export async function onMessage(_0x3a21ac){const _0x138bdf=_0x3cba63;try{if(!_0x3a21ac||!_0x3a21ac['key']||!_0x3a21ac[_0x138bdf(0x271)])return;const _0x34f96c=_0x3a21ac[_0x138bdf(0x360)]?.['id']||_0x3a21ac[_0x138bdf(0x360)]?.[_0x138bdf(0x319)+'t']||(_0x3a21ac[_0x138bdf(0x360)]?.[_0x138bdf(0x2a0)]?_0x138bdf(0x2a0):''),_0x2f7147=String(_0x3a21ac[_0x138bdf(0x360)]['remoteJid']||'')+'::'+String(_0x34f96c||'');if(isProcessed(_0x2f7147))return;markProcessed(_0x2f7147);const _0x431bd3=extractTextFromMessage(_0x3a21ac);if(!_0x431bd3)return;const _0x44844d=_0x3a21ac[_0x138bdf(0x360)][_0x138bdf(0x22f)],_0x281c0c=typeof _0x44844d===_0x138bdf(0x34c)&&_0x44844d[_0x138bdf(0x39c)](_0x138bdf(0x334)),_0x3835bc=_0x3a21ac[_0x138bdf(0x360)]?.[_0x138bdf(0x319)+'t']||_0x3a21ac[_0x138bdf(0x360)]?.[_0x138bdf(0x1bd)]||_0x3a21ac[_0x138bdf(0x360)]?.[_0x138bdf(0x22f)]||'',_0x35d760=String(_0x3835bc||'')['split']('@')[0x1988+-0x2*0x879+-0x896];let _0x7358c3=![];if(_0x281c0c)try{_0x7358c3=await isadmin(botRef,_0x3a21ac);}catch(_0x4af568){warn(_0x138bdf(0x24f)+_0x138bdf(0x31a)+_0x138bdf(0x1fd)),_0x7358c3=![];}if(_0x3a21ac['isCommand']){const _0xf7db8a=typeof _0x3a21ac[_0x138bdf(0x337)]===_0x138bdf(0x34c)&&_0x3a21ac[_0x138bdf(0x337)][_0x138bdf(0x23f)]()[_0x138bdf(0x3c0)]?_0x3a21ac[_0x138bdf(0x337)][_0x138bdf(0x23f)]():_0x431bd3[_0x138bdf(0x23f)](),_0x2b0ef7=(_0xf7db8a[_0x138bdf(0x244)](/\s+/)[0xa*0x3c+0x1e4e+-0x20a6]||'')[_0x138bdf(0x34b)+'e']();if(!_0x281c0c){const _0x5b5cb1=Boolean(_0x3a21ac[_0x138bdf(0x360)][_0x138bdf(0x2a0)]);let _0x522dd4=null;if(_0x5b5cb1){const _0x176158=getBotJid();_0x522dd4=_0x176158||_0x3a21ac[_0x138bdf(0x360)][_0x138bdf(0x22f)];}else{let _0x503a2f=![];try{_0x503a2f=await isSudo(botRef,_0x3a21ac);}catch(_0x493d9e){_0x503a2f=![];}if(!_0x503a2f)return;const _0x502324=userJidFromCtx(_0x3a21ac)||{'findings':[]},_0x590606=await findStoredMatchFromFindings(_0x502324['findings']||[]);if(!_0x590606)return;_0x522dd4=_0x590606;}if(!_0x522dd4)return;if(_0x2b0ef7==='lock'){const {triggers:_0x3e2711,gp:_0x2b27d4}=parseLockCommandOneLine(_0xf7db8a||_0x431bd3);if(!_0x3e2711['length']){await sendText(_0x522dd4,_0x138bdf(0x3e2)+_0x138bdf(0x221)+_0x138bdf(0x2a4)+'igger1,tri'+_0x138bdf(0x1c3)+_0x138bdf(0x247)+_0x138bdf(0x1fe));return;}if(!_0x2b27d4){await sendText(_0x522dd4,'❌\x20PM:\x20incl'+_0x138bdf(0x3e3)+_0x138bdf(0x352)+'\x20Example:\x20'+_0x138bdf(0x23d)+_0x138bdf(0x1fa)+_0x138bdf(0x368));return;}let _0x18c411=[];const _0x4f3c7e=_0x2b27d4[_0x138bdf(0x23f)]();if(_0x4f3c7e[_0x138bdf(0x34b)+'e']()===_0x138bdf(0x1c8))_0x18c411=await _0x20480e[_0x138bdf(0x39e)+_0x138bdf(0x2cd)]();else{const _0x3ace2d=await _0x20480e[_0x138bdf(0x27f)+'e'](_0x4f3c7e);if(_0x3ace2d)_0x18c411=[_0x3ace2d];else{if(_0x4f3c7e[_0x138bdf(0x274)]('@'))_0x18c411=[_0x20480e[_0x138bdf(0x3d4)+_0x138bdf(0x2ff)](_0x4f3c7e)];else{await sendText(_0x522dd4,_0x138bdf(0x37a)+'gp\x20alias/j'+'id:\x20\x22'+_0x4f3c7e+'\x22.');return;}}}let _0x583a16=0x25eb+-0x69b*0x3+-0x121a;for(const _0x57dff2 of uniqArray(_0x18c411)){for(const _0x544d86 of _0x3e2711){const _0x1a54d3=await addLock(_0x57dff2,_0x544d86,_0x3835bc);if(_0x1a54d3)_0x583a16++;}}await sendText(_0x522dd4,_0x138bdf(0x220)+_0x583a16+_0x138bdf(0x363));return;}if(_0x2b0ef7===_0x138bdf(0x2d2)){const {gp:_0x408b12}=parseListCommandOneLine(_0xf7db8a||_0x431bd3);if(!_0x408b12){await sendText(_0x522dd4,_0x138bdf(0x3e2)+'line\x20usage'+_0x138bdf(0x3df)+_0x138bdf(0x372)+_0x138bdf(0x235));return;}let _0x453354=[];if(_0x408b12[_0x138bdf(0x34b)+'e']()==='all')_0x453354=await _0x20480e[_0x138bdf(0x39e)+_0x138bdf(0x2cd)]();else{const _0x39e08d=await _0x20480e['resolveNam'+'e'](_0x408b12);if(_0x39e08d)_0x453354=[_0x39e08d];else{if(_0x408b12[_0x138bdf(0x274)]('@'))_0x453354=[_0x20480e[_0x138bdf(0x3d4)+_0x138bdf(0x2ff)](_0x408b12)];else{await sendText(_0x522dd4,_0x138bdf(0x37a)+'gp\x20alias/j'+_0x138bdf(0x3c9)+_0x408b12+'\x22.');return;}}}let _0x4d5ec3=[];for(const _0x91562 of _0x453354){const _0x5bec68=await listLocksForChat(_0x91562);for(const _0xd1ee82 of _0x5bec68)_0x4d5ec3[_0x138bdf(0x2b6)]({'chatJid':_0x91562,..._0xd1ee82});}await sendText(_0x522dd4,'✔️\x20[lock]\x20'+_0x4d5ec3[_0x138bdf(0x3c0)]+(_0x138bdf(0x266)+_0x138bdf(0x329)+_0x138bdf(0x32a)+'rgets.'));if(!_0x4d5ec3[_0x138bdf(0x3c0)])return;let _0x17ba7f='';for(const _0x3b4253 of _0x4d5ec3){const _0x27109f=_0x3b4253[_0x138bdf(0x28c)]?new Date(_0x3b4253[_0x138bdf(0x28c)]*(-0x1*-0x189b+0x21eb+0x369e*-0x1))[_0x138bdf(0x28b)+'g']()[_0x138bdf(0x21b)](-0x1*0x281+-0x15ab+0x182c,-0x4*-0x3e2+0x6e1*-0x2+0x1*-0x1bc):'',_0x41eba8=_0x3b4253['type']===_0x138bdf(0x1bc)?'⦿':_0x3b4253['type']===_0x138bdf(0x213)?'✶':'',_0x407be6=_0x3b4253[_0x138bdf(0x2ba)]===_0x138bdf(0x1bc)?_0x138bdf(0x1d8)+_0x3b4253[_0x138bdf(0x309)]:_0x3b4253['phrase'],_0x25fe1f=_0x3b4253['type']===_0x138bdf(0x1bc)&&_0x3b4253[_0x138bdf(0x34d)+_0x138bdf(0x280)]===0x1d*0x2c+-0x1*-0x319+-0x1*0x815?_0x138bdf(0x26a)+_0x138bdf(0x2fd):'',_0x85fcfd=_0x3b4253[_0x138bdf(0x31d)]+':'+_0x3b4253['id']+'.\x20'+(_0x41eba8?_0x41eba8+'\x20':'')+_0x407be6+_0x25fe1f+'\x20'+(_0x27109f?'('+_0x27109f+')':'')+'\x0a';(_0x17ba7f+_0x85fcfd)[_0x138bdf(0x3c0)]>0x1e05*-0x1+0x24d+0x2194&&(await sendText(_0x522dd4,_0x17ba7f[_0x138bdf(0x23f)]()),_0x17ba7f=''),_0x17ba7f+=_0x85fcfd;}if(_0x17ba7f['trim']())await sendText(_0x522dd4,_0x17ba7f[_0x138bdf(0x23f)]());return;}if([_0x138bdf(0x1e9),'dellock',_0x138bdf(0x3cb),_0x138bdf(0x369),_0x138bdf(0x3cb)][_0x138bdf(0x274)](_0x2b0ef7)){const {parts:_0x4f25a4,gp:_0x49dd3c}=parseUnlockCommandOneLine(_0xf7db8a||_0x431bd3);if(!_0x4f25a4?.[_0x138bdf(0x3c0)]){await sendText(_0x522dd4,_0x138bdf(0x3e2)+_0x138bdf(0x221)+_0x138bdf(0x1f0)+_0x138bdf(0x36b)+'se,comma-s'+_0x138bdf(0x273)+_0x138bdf(0x2db)+'jid|all>');return;}if(!_0x49dd3c){await sendText(_0x522dd4,_0x138bdf(0x2cc)+'ude\x20gp\x20in\x20'+_0x138bdf(0x352)+_0x138bdf(0x250)+_0x138bdf(0x1d7)+_0x138bdf(0x3ae));return;}let _0x20ba5f=[];const _0x543246=_0x49dd3c[_0x138bdf(0x23f)]();if(_0x543246[_0x138bdf(0x34b)+'e']()===_0x138bdf(0x1c8))_0x20ba5f=await _0x20480e[_0x138bdf(0x39e)+_0x138bdf(0x2cd)]();else{const _0x1de5ca=await _0x20480e[_0x138bdf(0x27f)+'e'](_0x543246);if(_0x1de5ca)_0x20ba5f=[_0x1de5ca];else{if(_0x543246[_0x138bdf(0x274)]('@'))_0x20ba5f=[_0x20480e['normalizeT'+'oUserJid'](_0x543246)];else{await sendText(_0x522dd4,_0x138bdf(0x37a)+'gp\x20alias/j'+_0x138bdf(0x3c9)+_0x543246+'\x22.');return;}}}let _0xe3e5e3=-0x42d*0x3+0xb0f+-0xbc*-0x2;for(const _0xa278b5 of _0x4f25a4){if(!_0xa278b5)continue;if(/^\d+$/[_0x138bdf(0x3ab)](_0xa278b5)){for(const _0x9f9e0f of _0x20ba5f){const _0x14148f=await deleteLockById(_0x9f9e0f,_0xa278b5);if(_0x14148f)_0xe3e5e3+=_0x14148f;}continue;}for(const _0xf8bb75 of _0x20ba5f){const _0x49682b=await deleteLockByPhrase(_0xf8bb75,_0xa278b5);if(_0x49682b)_0xe3e5e3+=_0x49682b;}}await sendText(_0x522dd4,_0x138bdf(0x204)+_0xe3e5e3+'/'+_0x4f25a4[_0x138bdf(0x3c0)]+_0x138bdf(0x363));return;}if(_0x2b0ef7===_0x138bdf(0x305)||_0x2b0ef7==='delall'||_0x2b0ef7===_0x138bdf(0x38d)){const _0x292553=(_0xf7db8a||_0x431bd3||'')['split'](/\r?\n/)[-0x2f*0x67+-0x1a90+0x2d79][_0x138bdf(0x23f)](),_0x15ddfb=_0x292553[_0x138bdf(0x3b9)](/^\/?(unlockall|delall|clearlocks)\b/i,'')[_0x138bdf(0x23f)](),{left:_0x40c5ed,gp:_0x4c4509}=splitRestForGp(_0x15ddfb);if(!_0x4c4509){await sendText(_0x522dd4,_0x138bdf(0x3e2)+_0x138bdf(0x221)+_0x138bdf(0x3bb)+'l\x20gp:<alia'+_0x138bdf(0x35c));return;}let _0x49ff26=[];const _0x20ef3a=_0x4c4509[_0x138bdf(0x23f)]();if(_0x20ef3a[_0x138bdf(0x34b)+'e']()==='all')_0x49ff26=await _0x20480e[_0x138bdf(0x39e)+'ids']();else{const _0x23bccb=await _0x20480e[_0x138bdf(0x27f)+'e'](_0x20ef3a);if(_0x23bccb)_0x49ff26=[_0x23bccb];else{if(_0x20ef3a[_0x138bdf(0x274)]('@'))_0x49ff26=[_0x20480e[_0x138bdf(0x3d4)+'oUserJid'](_0x20ef3a)];else{await sendText(_0x522dd4,'❌\x20Unknown\x20'+'gp\x20alias/j'+_0x138bdf(0x3c9)+_0x20ef3a+'\x22.');return;}}}let _0x3148b6=0x20e0+-0x1fd0+0x2*-0x88;for(const _0x2553c0 of _0x49ff26){const _0x4505ee=await deleteAllLocksForChat(_0x2553c0);_0x3148b6+=_0x4505ee||0x1f97+0x2*-0x4ee+-0x15bb;}await sendText(_0x522dd4,_0x138bdf(0x204)+_0x3148b6+_0x138bdf(0x363));return;}if(_0x2b0ef7===_0x138bdf(0x239)){const _0x4ff721=parseLockNotifyCommandOneLine(_0xf7db8a||_0x431bd3),{mode:_0x5a25b2,gp:_0x4df1d7}=_0x4ff721;if(!_0x4df1d7){await sendText(_0x522dd4,_0x138bdf(0x1cd)+_0x138bdf(0x1db)+_0x138bdf(0x25b)+_0x138bdf(0x373)+_0x138bdf(0x372)+_0x138bdf(0x252)+_0x138bdf(0x2f9)+_0x138bdf(0x35d)+'knotify\x20gp'+':<alias|ji'+_0x138bdf(0x36c));return;}let _0x52ae54=[];const _0x2179f8=_0x4df1d7['trim']();if(_0x2179f8['toLowerCas'+'e']()===_0x138bdf(0x1c8))_0x52ae54=await _0x20480e[_0x138bdf(0x39e)+_0x138bdf(0x2cd)]();else{const _0x8f4259=await _0x20480e[_0x138bdf(0x27f)+'e'](_0x2179f8);if(_0x8f4259)_0x52ae54=[_0x8f4259];else{if(_0x2179f8[_0x138bdf(0x274)]('@'))_0x52ae54=[_0x20480e[_0x138bdf(0x3d4)+_0x138bdf(0x2ff)](_0x2179f8)];else{await sendText(_0x522dd4,_0x138bdf(0x37a)+_0x138bdf(0x30e)+_0x138bdf(0x3c9)+_0x2179f8+'\x22.');return;}}}if(!_0x5a25b2){const _0x51c6cf=[];for(const _0x514cd3 of uniqArray(_0x52ae54)){const _0x3fa5aa=await getLockNotify(_0x514cd3)[_0x138bdf(0x3cd)](()=>0x35+-0x92+0x5d);_0x51c6cf[_0x138bdf(0x2b6)](_0x514cd3+':\x20'+(_0x3fa5aa?'ON':_0x138bdf(0x298)));}await sendText(_0x522dd4,_0x138bdf(0x376)+_0x138bdf(0x228)+_0x138bdf(0x346)+_0x51c6cf[_0x138bdf(0x324)]('\x0a'));return;}let _0xe3373c=-0x1073+0x42*-0x92+-0x1*-0x3617;for(const _0x4f5352 of uniqArray(_0x52ae54)){const _0x1ee97a=await setLockNotify(_0x4f5352,_0x5a25b2==='on');if(_0x1ee97a)_0xe3373c++;}await sendText(_0x522dd4,_0x138bdf(0x304)+'fy\x20'+_0x5a25b2+'\x20set\x20for\x20'+_0xe3373c+'/'+_0x52ae54[_0x138bdf(0x3c0)]+('\x20target(s)'+'.'));return;}return;}if(_0x281c0c){if(!_0x7358c3)return;const _0x2db482=_0x44844d,_0x1c30f1=await getDefault(_0x35d760)[_0x138bdf(0x3cd)](()=>null);if(!_0x1c30f1||Array[_0x138bdf(0x2b9)](_0x1c30f1)&&_0x1c30f1[_0x138bdf(0x3c0)]===0x41e*0x3+0x3d*-0x2a+-0x258)return;const _0x5bc0a7=Array[_0x138bdf(0x2b9)](_0x1c30f1)?_0x1c30f1:[_0x1c30f1];let _0x47c229=[];for(const _0x5736b3 of _0x5bc0a7){try{const _0x99506f=await getConnection(_0x5736b3)['catch'](()=>null);if(Array[_0x138bdf(0x2b9)](_0x99506f))_0x47c229[_0x138bdf(0x2b6)](..._0x99506f);else{if(_0x99506f)_0x47c229['push'](String(_0x99506f));}}catch(_0x15bb32){warn(_0x138bdf(0x3d1)+_0x138bdf(0x375)+_0x138bdf(0x34e)+_0x5736b3+'\x20failed:\x20'+(_0x15bb32?.['message']||_0x15bb32));}}_0x47c229=uniqArray(_0x47c229);if(!_0x47c229['length']){await sendText(_0x2db482,_0x138bdf(0x316)+_0x138bdf(0x357)+_0x138bdf(0x36a)+_0x138bdf(0x3b0)+'ion(s):\x20'+_0x5bc0a7[_0x138bdf(0x324)](',\x20')+(_0x138bdf(0x331)+_0x138bdf(0x37e)+_0x138bdf(0x209)+_0x138bdf(0x245)));return;}if(_0x2b0ef7==='lock'){const {triggers:_0x1e62eb}=parseLockCommandOneLine(_0xf7db8a||_0x431bd3);if(!_0x1e62eb[_0x138bdf(0x3c0)]){await sendText(_0x2db482,'❌\x20Usage\x20(g'+'roup-only)'+_0x138bdf(0x25c)+'gger1,trig'+_0x138bdf(0x3a3));return;}let _0x135744=0x1*0x919+0x3*-0x80b+0xf08;for(const _0x6514b7 of _0x47c229){let _0x29c8e4=-0x4*-0x43a+-0x22f7*0x1+-0xc9*-0x17;for(const _0x404608 of _0x1e62eb){const _0xe45c59=await addLock(_0x6514b7,_0x404608,_0x3835bc);if(_0xe45c59)_0x29c8e4++;}_0x135744+=_0x29c8e4;}await sendText(_0x2db482,_0x138bdf(0x220)+_0x135744+'/'+_0x1e62eb[_0x138bdf(0x3c0)]*_0x47c229[_0x138bdf(0x3c0)]+(_0x138bdf(0x2a8)+_0x138bdf(0x27b)+_0x138bdf(0x262)+'connection'+_0x138bdf(0x1e4))+_0x47c229['join'](',\x20'));return;}if(_0x2b0ef7===_0x138bdf(0x2d2)){const _0x3a41f5=[];for(const _0x8c2c97 of _0x47c229){const _0x2de13b=await listLocksForChat(_0x8c2c97);for(const _0x188a07 of _0x2de13b)_0x3a41f5[_0x138bdf(0x2b6)]({'chatJid':_0x8c2c97,..._0x188a07});}await sendText(_0x2db482,_0x138bdf(0x376)+_0x138bdf(0x25a)+_0x3a41f5[_0x138bdf(0x3c0)]+(_0x138bdf(0x20d)+'\x20your\x20defa'+_0x138bdf(0x30c)+_0x138bdf(0x2d7))+_0x47c229['join'](',\x20'));if(!_0x3a41f5[_0x138bdf(0x3c0)])return;let _0x432580='';for(const _0x56fb67 of _0x3a41f5){const _0x3b4c1a=_0x56fb67[_0x138bdf(0x28c)]?new Date(_0x56fb67[_0x138bdf(0x28c)]*(-0xc31+0x1*0x1f6e+-0xf55))[_0x138bdf(0x28b)+'g']()['slice'](-0x1*-0x166+-0xf8*-0xb+-0xc0e,-0x2f5*0x3+-0x21a3+0x2a8c*0x1):'',_0x5bee0e=_0x56fb67[_0x138bdf(0x2ba)]===_0x138bdf(0x1bc)?'⦿':_0x56fb67[_0x138bdf(0x2ba)]===_0x138bdf(0x213)?'✶':'',_0x2dab83=_0x56fb67[_0x138bdf(0x2ba)]===_0x138bdf(0x1bc)?_0x138bdf(0x1d8)+_0x56fb67[_0x138bdf(0x309)]:_0x56fb67[_0x138bdf(0x309)],_0x5ceac8=_0x56fb67['type']===_0x138bdf(0x1bc)&&_0x56fb67[_0x138bdf(0x34d)+_0x138bdf(0x280)]===-0x21a6+0xac3+0x16e3?_0x138bdf(0x26a)+_0x138bdf(0x2fd):'',_0x160536=_0x56fb67[_0x138bdf(0x31d)]+':'+_0x56fb67['id']+'.\x20'+(_0x5bee0e?_0x5bee0e+'\x20':'')+_0x2dab83+_0x5ceac8+'\x20'+(_0x3b4c1a?'('+_0x3b4c1a+')':'')+'\x0a';(_0x432580+_0x160536)[_0x138bdf(0x3c0)]>-0x295*-0x3+-0x262f+-0x2*-0x1226&&(await sendText(_0x2db482,_0x432580[_0x138bdf(0x23f)]()),_0x432580=''),_0x432580+=_0x160536;}if(_0x432580[_0x138bdf(0x23f)]())await sendText(_0x2db482,_0x432580[_0x138bdf(0x23f)]());return;}if([_0x138bdf(0x1e9),_0x138bdf(0x2d9),_0x138bdf(0x3cb),_0x138bdf(0x369),_0x138bdf(0x3cb)]['includes'](_0x2b0ef7)){const {parts:_0x39a20e}=parseUnlockCommandOneLine(_0xf7db8a||_0x431bd3);if(!_0x39a20e?.[_0x138bdf(0x3c0)]){await sendText(_0x2db482,_0x138bdf(0x33b)+_0x138bdf(0x35f)+':\x20unlock\x201'+_0x138bdf(0x3a6)+'ck\x20phrase1'+_0x138bdf(0x3cf));return;}const _0x5722ea=new Map();for(const _0x133a79 of _0x47c229){const _0x3e6ddb=await listLocksForChat(_0x133a79);_0x5722ea[_0x138bdf(0x318)](_0x133a79,_0x3e6ddb||[]);}let _0x189399=-0x11e7+-0xe95+-0x252*-0xe;for(const _0x54c90 of _0x39a20e){if(!_0x54c90)continue;if(/^\d+$/[_0x138bdf(0x3ab)](_0x54c90)){for(const [_0x2fe57c,_0x1626b5]of _0x5722ea['entries']()){if(_0x1626b5[_0x138bdf(0x2f8)](_0x532e85=>String(_0x532e85['id'])===_0x54c90)){const _0x466ba0=await deleteLockById(_0x2fe57c,_0x54c90);if(_0x466ba0)_0x189399+=_0x466ba0;}}continue;}for(const _0x569540 of _0x47c229){const _0x5661c3=await deleteLockByPhrase(_0x569540,_0x54c90);if(_0x5661c3)_0x189399+=_0x5661c3;}}await sendText(_0x2db482,'✔️\x20Deleted\x20'+_0x189399+'/'+_0x39a20e[_0x138bdf(0x3c0)]+(_0x138bdf(0x237)+'rom\x20your\x20d'+_0x138bdf(0x1df)+_0x138bdf(0x25d)+':\x20')+_0x47c229['join'](',\x20'));return;}if(_0x2b0ef7==='unlockall'||_0x2b0ef7===_0x138bdf(0x307)||_0x2b0ef7===_0x138bdf(0x38d)){try{let _0x4a16b4=-0xb*0x1fb+0x1db8+0x1*-0x7ef;for(const _0x7e917f of _0x47c229){const _0x59045e=await deleteAllLocksForChat(_0x7e917f);_0x4a16b4+=_0x59045e||-0x1*-0x1b5b+0x9f*0x3e+-0xd*0x511;}await sendText(_0x2db482,_0x138bdf(0x204)+_0x4a16b4+(_0x138bdf(0x237)+'rom\x20your\x20d'+_0x138bdf(0x1df)+_0x138bdf(0x25d)+':\x20')+_0x47c229['join'](',\x20'));}catch(_0xcf9aaf){warn('[lock]\x20unl'+_0x138bdf(0x3ac)+_0x138bdf(0x2da)+_0x47c229[_0x138bdf(0x324)](',\x20')+':\x20'+(_0xcf9aaf?.[_0x138bdf(0x271)]||_0xcf9aaf)),await sendText(_0x2db482,'❌\x20Failed\x20t'+_0x138bdf(0x3b1)+'ocks\x20for\x20y'+_0x138bdf(0x1b8)+_0x138bdf(0x2ec)+_0x138bdf(0x3b6)+_0x47c229[_0x138bdf(0x324)](',\x20'));}return;}if(_0x2b0ef7==='locknotify'){const _0x2b24f6=(_0xf7db8a||_0x431bd3||'')[_0x138bdf(0x244)](/\r?\n/)[-0x2077+0xcd1+-0xa*-0x1f7]['trim'](),{left:_0x40ce61}=splitRestForGp(_0x2b24f6[_0x138bdf(0x3b9)](/^\/?locknotify\b/i,'')[_0x138bdf(0x23f)]()),_0x111692=(_0x40ce61||'')[_0x138bdf(0x34b)+'e']();if(!_0x111692[_0x138bdf(0x274)]('on')&&!_0x111692[_0x138bdf(0x274)](_0x138bdf(0x348))){await sendText(_0x2db482,_0x138bdf(0x33b)+_0x138bdf(0x35f)+_0x138bdf(0x2bf)+_0x138bdf(0x2c8)+_0x138bdf(0x1c2)+_0x138bdf(0x2d5)+_0x138bdf(0x2ae)+_0x138bdf(0x1dd)+_0x138bdf(0x1c0)+'onnection('+_0x138bdf(0x39d));return;}const _0x4d48bc=_0x111692[_0x138bdf(0x274)]('on')?'on':'off';let _0x446995=-0xa*0x39d+-0x4a*-0x2f+-0x1a*-0xde;for(const _0x3e55bc of _0x47c229){const _0x5b336d=await setLockNotify(_0x3e55bc,_0x4d48bc==='on');if(_0x5b336d)_0x446995++;}await sendText(_0x2db482,_0x138bdf(0x304)+_0x138bdf(0x1ee)+_0x4d48bc+'\x20set\x20for\x20'+_0x446995+'/'+_0x47c229[_0x138bdf(0x3c0)]+(_0x138bdf(0x37f)+_0x138bdf(0x2e8)+_0x138bdf(0x39d)));return;}return;}}if(_0x281c0c){if(!CFG[_0x138bdf(0x254)+'ABLED'])return;if(_0x3a21ac[_0x138bdf(0x360)]['fromMe'])return;if(_0x7358c3)return;const _0x1b83cf=_0x44844d,_0x37f65a=extractTextFromMessage(_0x3a21ac);if(!_0x37f65a)return;const _0x1a4197=normalizeForMatch(String(_0x37f65a||''))[_0x138bdf(0x34b)+'e'](),_0x2d6231=await listLocksForChat(_0x1b83cf);if(!_0x2d6231||!_0x2d6231['length'])return;const _0x4662e1=_0x2d6231[_0x138bdf(0x3b3)](_0x5ac268=>!_0x5ac268[_0x138bdf(0x2ba)]||_0x5ac268['type']===_0x138bdf(0x200)),_0x24d0b3=_0x2d6231[_0x138bdf(0x3b3)](_0x3b09bb=>_0x3b09bb[_0x138bdf(0x2ba)]===_0x138bdf(0x213)),_0x39a793=_0x2d6231[_0x138bdf(0x3b3)](_0x171515=>_0x171515[_0x138bdf(0x2ba)]==='regex'||_0x171515[_0x138bdf(0x2ba)]==='invalid_re'+'gex'),_0x2335e6=new Set(),_0x5bf43c=new Set();if(_0x4662e1['length']>0x9b*0x2b+0x21d*-0x7+-0xb3e){const _0x59721d=_0x4662e1[_0x138bdf(0x2cf)](_0x20ad1a=>normalizeForMatch(String(_0x20ad1a[_0x138bdf(0x309)]||'')))['filter'](Boolean),_0x1ae1c2=_0x59721d['join']('\x00');let _0x357ce1;const _0x74fab9=ahoCache['get'](_0x1b83cf);if(_0x74fab9&&_0x74fab9[_0x138bdf(0x36f)+_0x138bdf(0x2ee)]===_0x1ae1c2&&_0x74fab9['aho'])_0x357ce1=_0x74fab9[_0x138bdf(0x391)];else try{_0x357ce1=new AhoCorasick(_0x59721d),ahoCache['set'](_0x1b83cf,{'serializedKeywords':_0x1ae1c2,'aho':_0x357ce1});}catch(_0x3b31b1){warn(_0x138bdf(0x1ce)+_0x138bdf(0x269)+'uild\x20faile'+_0x138bdf(0x306)+_0x1b83cf+':\x20'+(_0x3b31b1?.[_0x138bdf(0x271)]||_0x3b31b1)),_0x357ce1=null;}if(_0x357ce1)try{const _0x18dd38=_0x357ce1['search'](_0x1a4197);for(const _0x46d520 of _0x18dd38){const _0x2b39a4=_0x46d520[_0x138bdf(0x3de)],_0x43632a=_0x46d520['index'],_0x403962=_0x43632a+_0x2b39a4[_0x138bdf(0x3c0)],_0x2013db=_0x43632a===0x1d6*-0xb+-0x1486+0x145c*0x2||!/\w/[_0x138bdf(0x3ab)](_0x1a4197[_0x43632a-(0x590*-0x1+0x6a*-0x3b+0x1dff)]),_0x19c503=_0x403962===_0x1a4197[_0x138bdf(0x3c0)]||!/\w/['test'](_0x1a4197[_0x403962]);if(_0x2013db&&_0x19c503)for(const _0x9a27ef of _0x4662e1){const _0x1f52cd=normalizeForMatch(String(_0x9a27ef[_0x138bdf(0x309)]||''));if(_0x1f52cd===_0x2b39a4)try{const _0x16c589=wholeWordRegexForPhrase(_0x1f52cd);_0x16c589['test'](_0x1a4197)&&(_0x2335e6[_0x138bdf(0x1fb)](_0x9a27ef['id']),_0x5bf43c[_0x138bdf(0x1fb)](_0x9a27ef['phrase']));}catch(_0x229c9f){_0x2335e6[_0x138bdf(0x1fb)](_0x9a27ef['id']),_0x5bf43c[_0x138bdf(0x1fb)](_0x9a27ef[_0x138bdf(0x309)]);}}else for(const _0x425eaa of _0x4662e1){try{const _0xead080=wholeWordRegexForPhrase(normalizeForMatch(String(_0x425eaa[_0x138bdf(0x309)]||'')));_0xead080[_0x138bdf(0x3ab)](_0x1a4197)&&(_0x2335e6['add'](_0x425eaa['id']),_0x5bf43c[_0x138bdf(0x1fb)](_0x425eaa[_0x138bdf(0x309)]));}catch(_0x303deb){}}}}catch(_0x568e4b){warn(_0x138bdf(0x1ce)+_0x138bdf(0x2a9)+_0x138bdf(0x232)+'ed:\x20'+(_0x568e4b?.[_0x138bdf(0x271)]||_0x568e4b));for(const _0xec1d4a of _0x4662e1){try{const _0x5cc2d4=wholeWordRegexForPhrase(normalizeForMatch(String(_0xec1d4a[_0x138bdf(0x309)]||'')));_0x5cc2d4[_0x138bdf(0x3ab)](_0x1a4197)&&(_0x2335e6[_0x138bdf(0x1fb)](_0xec1d4a['id']),_0x5bf43c[_0x138bdf(0x1fb)](_0xec1d4a[_0x138bdf(0x309)]));}catch(_0x5062c3){}}}else for(const _0x4e37a7 of _0x4662e1){try{const _0x84140f=wholeWordRegexForPhrase(normalizeForMatch(String(_0x4e37a7[_0x138bdf(0x309)]||'')));_0x84140f[_0x138bdf(0x3ab)](_0x1a4197)&&(_0x2335e6[_0x138bdf(0x1fb)](_0x4e37a7['id']),_0x5bf43c[_0x138bdf(0x1fb)](_0x4e37a7[_0x138bdf(0x309)]));}catch(_0x3e519b){}}}if(_0x24d0b3[_0x138bdf(0x3c0)]>-0x191f+0x15ba+0x365)for(const _0xda471 of _0x24d0b3){try{const _0x42e1e2=wildcardToRegex(String(_0xda471['phrase']||''));_0x42e1e2[_0x138bdf(0x3ab)](_0x1a4197)&&(_0x2335e6['add'](_0xda471['id']),_0x5bf43c[_0x138bdf(0x1fb)](_0xda471[_0x138bdf(0x309)]));}catch(_0x1ddaee){warn(_0x138bdf(0x2a3)+_0x138bdf(0x1ca)+_0x138bdf(0x275)+'='+_0xda471['id']+_0x138bdf(0x2b2)+_0xda471['phrase']+_0x138bdf(0x1b9)+(_0x1ddaee?.['message']||_0x1ddaee));}}if(_0x39a793['length']>0x1*0x18bf+0xd69+-0x2628)for(const _0x720746 of _0x39a793){try{if(_0x720746[_0x138bdf(0x34d)+_0x138bdf(0x280)]===-0x308+0x37*-0xa9+0x2757){warn(_0x138bdf(0x230)+_0x138bdf(0x2f6)+_0x138bdf(0x286)+'\x20regex\x20id='+_0x720746['id']+'\x20phrase=\x22'+_0x720746['phrase']+'\x22');continue;}const _0x35ee88=new RegExp(_0x720746['phrase'],'iu');_0x35ee88[_0x138bdf(0x3ab)](_0x1a4197)&&(_0x2335e6[_0x138bdf(0x1fb)](_0x720746['id']),_0x5bf43c[_0x138bdf(0x1fb)](_0x138bdf(0x1d8)+_0x720746[_0x138bdf(0x309)]));}catch(_0x42e0c3){warn(_0x138bdf(0x2a3)+'alid\x20store'+_0x138bdf(0x1e8)+'r\x20id='+_0x720746['id']+_0x138bdf(0x2b2)+_0x720746[_0x138bdf(0x309)]+_0x138bdf(0x1b9)+(_0x42e0c3?.[_0x138bdf(0x271)]||_0x42e0c3));try{await db[_0x138bdf(0x20e)](_0x138bdf(0x291)+_0x138bdf(0x3e0)+_0x138bdf(0x212)+_0x138bdf(0x3c4)+_0x138bdf(0x3a8),[_0x720746['id']]);}catch(_0x8c7f){}}}if(_0x2335e6[_0x138bdf(0x260)]>-0x5d4*-0x2+-0x1145*-0x1+-0x1ced)try{try{const _0x2f0e6e=await getLockNotify(_0x1b83cf)['catch'](()=>0x622+0x1*0x10fc+0x1*-0x171e);if(_0x2f0e6e)try{const _0x3815b3=await db[_0x138bdf(0x22c)](_0x138bdf(0x1d5)+'ue\x20FROM\x20de'+_0x138bdf(0x2c2)+_0x138bdf(0x332)+_0x138bdf(0x2c7)+'_jid\x27');let _0x4409b9=_0x3815b3?.[_0x138bdf(0x205)]||null;if(!_0x4409b9){const _0x2284e3=getBotJid();_0x4409b9=_0x2284e3||null;}if(_0x4409b9){const _0x335ee8=Array['from'](_0x5bf43c)[_0x138bdf(0x21b)](0xab*-0x1a+-0x1b1c+-0x2*-0x163d,-0x1b2+-0xdb+-0x1*-0x293)[_0x138bdf(0x324)](',\x20'),_0x1b98eb=_0x35d760||String(_0x3835bc||'')[_0x138bdf(0x244)]('@')[-0xffc+-0x16c8+0x1*0x26c4]||_0x138bdf(0x2a2),_0x468220=String(_0x37f65a||'')[_0x138bdf(0x23f)](),_0x329af8='[lock]\x20Mat'+'ch\x20in\x20'+_0x1b83cf+_0x138bdf(0x362)+_0x1b98eb+_0x138bdf(0x23a)+_0x335ee8+_0x138bdf(0x3c6)+_0x468220;await sendText(_0x4409b9,_0x329af8,_0x3835bc?[_0x3835bc]:[]);}}catch(_0x4fa11f){warn('[lock]\x20fai'+_0x138bdf(0x3e4)+_0x138bdf(0x219)+_0x138bdf(0x2df)+':\x20'+(_0x4fa11f?.[_0x138bdf(0x271)]||_0x4fa11f));}}catch(_0x307cd2){warn(_0x138bdf(0x2ca)+_0x138bdf(0x3c8)+_0x138bdf(0x1bb)+':\x20'+(_0x307cd2?.[_0x138bdf(0x271)]||_0x307cd2));}enqueueDeletion(_0x3a21ac);for(const _0x2aedf2 of _0x2335e6){try{await db[_0x138bdf(0x20e)](_0x138bdf(0x291)+_0x138bdf(0x335)+'_count\x20=\x20h'+_0x138bdf(0x2aa)+_0x138bdf(0x297)+_0x138bdf(0x285),[_0x2aedf2]);}catch(_0x246945){}}}catch(_0x2680c2){warn(_0x138bdf(0x31f)+'orcement\x20f'+'ailed:\x20'+(_0x2680c2?.[_0x138bdf(0x271)]||_0x2680c2));}}}catch(_0x2485a2){error(_0x2485a2,'[lock]\x20han'+_0x138bdf(0x390)+':\x20'+(_0x2485a2?.['message']||_0x2485a2));}}export async function cleanup(){const _0x1b9b0e=_0x3cba63;shuttingDown=!![];for(const _0x258068 of processedMessageKeys[_0x1b9b0e(0x326)]())try{clearTimeout(_0x258068);}catch(_0x118119){}processedMessageKeys['clear'](),perChatQueue['clear'](),perChatProcessing[_0x1b9b0e(0x28e)](),activeChats=-0x1*-0x1f45+-0x3*-0x8f3+-0x15a*0x2b,botRef=null,sendApi=null,ahoCache[_0x1b9b0e(0x28e)](),info(_0x1b9b0e(0x3e9)+'aned\x20up');}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};