const _0x518be6=_0x3c98;(function(_0x1062c2,_0x2528b6){const _0x22243d=_0x3c98,_0xcb7e36=_0x1062c2();while(!![]){try{const _0x3f795e=-parseInt(_0x22243d(0x1dd))/(-0x23df*0x1+0xb8e+-0x16*-0x11b)*(parseInt(_0x22243d(0x270))/(-0xfcb*-0x1+-0x1*-0xf4a+-0x1f13))+parseInt(_0x22243d(0x201))/(-0xf04+0x19d1+-0x565*0x2)*(-parseInt(_0x22243d(0x25a))/(-0x23d+-0x1a9*-0x5+0xc*-0x81))+-parseInt(_0x22243d(0x291))/(-0x127d+0x73*-0x5+-0x2f7*-0x7)*(parseInt(_0x22243d(0x2bb))/(0x18da*0x1+-0x1f2c+-0xcb*-0x8))+-parseInt(_0x22243d(0x2f4))/(-0x3c7*-0x5+-0x4a8+0x1*-0xe34)*(parseInt(_0x22243d(0x17a))/(-0xd41+-0x13b6+0x20ff))+-parseInt(_0x22243d(0x300))/(0x5d5+-0xaa9*-0x2+0xb2*-0x27)+-parseInt(_0x22243d(0x2b1))/(-0x6d*-0x38+0x2682+0xf94*-0x4)+parseInt(_0x22243d(0x24a))/(-0x11b9*-0x1+-0x1*-0x23b1+0x41b*-0xd);if(_0x3f795e===_0x2528b6)break;else _0xcb7e36['push'](_0xcb7e36['shift']());}catch(_0x4f6150){_0xcb7e36['push'](_0xcb7e36['shift']());}}}(_0x3e14,0x62c92+0x17298+-0x1fc6));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x7cdb74 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x518be6(0x24e);export const version=_0x518be6(0x2d4);export const priority=-0x2*0x81a+-0x259a+0x1b23*0x2;export const configKeys=[_0x518be6(0x22d)];export const commands=[_0x518be6(0x208),_0x518be6(0x149),_0x518be6(0x19e),_0x518be6(0x164),'delock',_0x518be6(0x278),_0x518be6(0x30a),_0x518be6(0xf0),_0x518be6(0x2d8)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x518be6(0x112)+_0x518be6(0x129)+_0x518be6(0x1d3)+_0x518be6(0x215),'WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x52609c){const _0x108701=_0x518be6;if(!_0x52609c)return[];const _0x25392c=new Set(),_0x173549=[];for(const _0x514943 of _0x52609c){const _0x138cfb=_0x514943===undefined||_0x514943===null?'':String(_0x514943)[_0x108701(0x2b2)]();if(!_0x138cfb)continue;!_0x25392c[_0x108701(0x2d1)](_0x138cfb)&&(_0x25392c[_0x108701(0x17e)](_0x138cfb),_0x173549['push'](_0x138cfb));}return _0x173549;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=-0x262b+-0x1*0xc19+-0x1*-0x3244,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(0x9*-0x1d9+0x1*0x62b+-0x4a*-0x25)*(0xe46+-0x20e3+-0x5*-0x481);function markProcessed(_0x3ec060){const _0x1f2faa=_0x518be6;if(!_0x3ec060)return;if(processedMessageKeys[_0x1f2faa(0x2d1)](_0x3ec060))try{clearTimeout(processedMessageKeys['get'](_0x3ec060));}catch(_0x1f613a){}const _0x41b0af=setTimeout(()=>processedMessageKeys[_0x1f2faa(0x241)](_0x3ec060),DEDUPE_TTL_MS);processedMessageKeys[_0x1f2faa(0x1a5)](_0x3ec060,_0x41b0af);}function isProcessed(_0x47468c){const _0x4b35b7=_0x518be6;return _0x47468c&&processedMessageKeys[_0x4b35b7(0x2d1)](_0x47468c);}const sleep=_0x53aae6=>new Promise(_0x265fae=>setTimeout(_0x265fae,_0x53aae6));function nowSec(){const _0x41542f=_0x518be6;return Math['floor'](Date[_0x41542f(0x1cd)]()/(-0x1cac+0x5*-0x23f+0x2bcf));}function escapeRegex(_0xc88c9e){const _0x45f64b=_0x518be6;return String(_0xc88c9e||'')[_0x45f64b(0x1e6)](/[.*+?^${}()|[\]\\]/g,_0x45f64b(0x280));}function _0x3c98(_0x53cb8d,_0x4ee7a6){const _0x1be940=_0x3e14();return _0x3c98=function(_0x1cb8b9,_0x56bc02){_0x1cb8b9=_0x1cb8b9-(0x9*-0x3c1+-0x437*0x8+0x542*0xd);let _0x298e7d=_0x1be940[_0x1cb8b9];return _0x298e7d;},_0x3c98(_0x53cb8d,_0x4ee7a6);}function normalizeForMatch(_0x3e01b6){const _0x129ce3=_0x518be6;let _0x3b436b=String(_0x3e01b6||'');try{_0x3b436b=_0x3b436b['normalize'](_0x129ce3(0x206));}catch(_0x5bf1c5){}if(CFG['NORMALIZE_'+'REMOVE_DIA'+'CRITICS'])try{_0x3b436b=_0x3b436b[_0x129ce3(0xf4)](_0x129ce3(0x1c5))[_0x129ce3(0x1e6)](/\p{M}/gu,'')[_0x129ce3(0xf4)](_0x129ce3(0x206));}catch(_0x4412bc){}return _0x3b436b[_0x129ce3(0x2f7)+'e']();}class AhoCorasick{constructor(_0x312a6d=[]){const _0x575e6e=_0x518be6;this[_0x575e6e(0x136)]=[{'next':{},'fail':0x0,'output':[]}];if(_0x312a6d&&_0x312a6d[_0x575e6e(0x2a0)])this[_0x575e6e(0x14a)](_0x312a6d);}[_0x518be6(0x14a)](_0x5169be){const _0x488694=_0x518be6;this['nodes']=[{'next':{},'fail':0x0,'output':[]}];for(const _0x344b58 of _0x5169be){let _0xd2cc16=-0x24cd+0x299*-0xc+0x43f9;for(const _0x12a848 of _0x344b58){const _0x5afa4f=_0x12a848;!this['nodes'][_0xd2cc16]['next'][_0x5afa4f]&&(this[_0x488694(0x136)][_0xd2cc16][_0x488694(0x1cb)][_0x5afa4f]=this[_0x488694(0x136)]['length'],this['nodes']['push']({'next':{},'fail':0x0,'output':[]})),_0xd2cc16=this['nodes'][_0xd2cc16][_0x488694(0x1cb)][_0x5afa4f];}this[_0x488694(0x136)][_0xd2cc16][_0x488694(0x2ff)][_0x488694(0x256)](_0x344b58);}const _0x129a3f=[];for(const _0x521420 in this[_0x488694(0x136)][0x1*-0x85d+-0xf7e+-0x17db*-0x1][_0x488694(0x1cb)]){const _0x30255b=this[_0x488694(0x136)][0x652+-0x4*-0x4c1+0x6*-0x439][_0x488694(0x1cb)][_0x521420];this[_0x488694(0x136)][_0x30255b][_0x488694(0x22e)]=-0x332+-0x293*-0x2+-0x1f4,_0x129a3f[_0x488694(0x256)](_0x30255b);}while(_0x129a3f[_0x488694(0x2a0)]){const _0x23073f=_0x129a3f[_0x488694(0x31a)]();for(const _0x9de3dc in this[_0x488694(0x136)][_0x23073f][_0x488694(0x1cb)]){const _0x469cd9=this[_0x488694(0x136)][_0x23073f][_0x488694(0x1cb)][_0x9de3dc];let _0x4a1969=this[_0x488694(0x136)][_0x23073f][_0x488694(0x22e)];while(_0x4a1969&&!this[_0x488694(0x136)][_0x4a1969][_0x488694(0x1cb)][_0x9de3dc])_0x4a1969=this[_0x488694(0x136)][_0x4a1969][_0x488694(0x22e)];if(this[_0x488694(0x136)][_0x4a1969][_0x488694(0x1cb)][_0x9de3dc])this[_0x488694(0x136)][_0x469cd9][_0x488694(0x22e)]=this[_0x488694(0x136)][_0x4a1969][_0x488694(0x1cb)][_0x9de3dc];else this[_0x488694(0x136)][_0x469cd9]['fail']=-0x1eee+-0x9d9*-0x1+0x1515;this[_0x488694(0x136)][_0x469cd9][_0x488694(0x2ff)][_0x488694(0x256)](...this[_0x488694(0x136)][this[_0x488694(0x136)][_0x469cd9]['fail']][_0x488694(0x2ff)]),_0x129a3f[_0x488694(0x256)](_0x469cd9);}}}[_0x518be6(0x2f2)](_0x40066c){const _0x2e38f8=_0x518be6,_0x331ef3=[];let _0xcab05a=-0x1*0x1b7+0x2*0xd13+-0x186f;for(let _0x5b65b7=0x775*-0x1+0xb*0x175+-0x2*0x449;_0x5b65b7<_0x40066c['length'];_0x5b65b7++){const _0x464c65=_0x40066c[_0x5b65b7];while(_0xcab05a&&!this[_0x2e38f8(0x136)][_0xcab05a][_0x2e38f8(0x1cb)][_0x464c65])_0xcab05a=this['nodes'][_0xcab05a]['fail'];if(this[_0x2e38f8(0x136)][_0xcab05a]['next'][_0x464c65])_0xcab05a=this[_0x2e38f8(0x136)][_0xcab05a]['next'][_0x464c65];else _0xcab05a=-0x3d*0x31+-0xbb4+0x1761;if(this[_0x2e38f8(0x136)][_0xcab05a][_0x2e38f8(0x2ff)]['length'])for(const _0x29c601 of this[_0x2e38f8(0x136)][_0xcab05a][_0x2e38f8(0x2ff)]){_0x331ef3['push']({'keyword':_0x29c601,'index':_0x5b65b7-_0x29c601[_0x2e38f8(0x2a0)]+(0x2*-0x62+0xd0e+-0xb9*0x11)});}}return _0x331ef3;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x501f48){const _0x5f15fd=_0x518be6,_0x261e67=String(_0x501f48||'')['trim'](),_0x8c6fa1=escapeRegex(_0x261e67);try{const _0x22a5a7=_0x5f15fd(0x287)+_0x5f15fd(0x307)+_0x8c6fa1+(_0x5f15fd(0xe8)+_0x5f15fd(0x1c3));return new RegExp(_0x22a5a7,'iu');}catch(_0x276b85){try{return new RegExp('\x5cb'+_0x8c6fa1+'\x5cb','i');}catch(_0x46f736){return new RegExp(_0x8c6fa1,'i');}}}function wildcardToRegex(_0x39e164){const _0x7333cf=_0x518be6,_0x2ed8e7=String(_0x39e164||'')[_0x7333cf(0x2b2)](),_0x654e2b=_0x2ed8e7['replace'](/\*/g,'')[_0x7333cf(0x2a0)]>0x92b*0x3+-0x1b*-0x83+0xdc6*-0x3;if(!_0x654e2b)throw new Error('Wildcard\x20m'+_0x7333cf(0x308)+_0x7333cf(0x303)+_0x7333cf(0x18e)+'\x20*');const _0x5a8908=_0x2ed8e7['split']('*')['map'](_0x46a145=>escapeRegex(_0x46a145)),_0x2fd1f5=_0x5a8908[_0x7333cf(0x24c)](_0x7333cf(0x2e2)+_0x7333cf(0x1a1));try{const _0x450216='(?<![\x5cp{L}'+'\x5cp{N}_])'+_0x2fd1f5+('(?![\x5cp{L}\x5c'+_0x7333cf(0x1c3));return new RegExp(_0x450216,'iu');}catch(_0x1be8f5){const _0x28c464=_0x5a8908['join']('.*');try{return new RegExp(''+_0x28c464,'i');}catch(_0x1b8637){return new RegExp(_0x5a8908['join'](''),'i');}}}function setupSendApi(){const _0x1570a8=_0x518be6;if(!botRef)return;if(typeof botRef['sendMessag'+'e']===_0x1570a8(0x1fd))sendApi=async(_0x30a6d2,_0x2a6d52)=>await botRef[_0x1570a8(0x2b0)+'e'](_0x30a6d2,_0x2a6d52);else botRef[_0x1570a8(0x2e7)]&&typeof botRef['sock'][_0x1570a8(0x2b0)+'e']===_0x1570a8(0x1fd)?sendApi=async(_0x4c8cc1,_0x479b20)=>await botRef[_0x1570a8(0x2e7)][_0x1570a8(0x2b0)+'e'](_0x4c8cc1,_0x479b20):sendApi=null;}async function sendText(_0x52ee0f,_0x2b0f4e,_0x5b7047=[]){const _0x1dcc0f=_0x518be6;if(!_0x2b0f4e||!_0x52ee0f)return;const _0x4677ee={'text':String(_0x2b0f4e)};if(Array[_0x1dcc0f(0x142)](_0x5b7047)&&_0x5b7047[_0x1dcc0f(0x2a0)])_0x4677ee[_0x1dcc0f(0x1e0)]=_0x5b7047;try{if(!sendApi){warn(_0x1dcc0f(0x2b5)+_0x1dcc0f(0x1a2)+_0x1dcc0f(0x1e4));return;}await sendApi(_0x52ee0f,_0x4677ee);}catch(_0x2999c5){warn(_0x1dcc0f(0x2b5)+_0x1dcc0f(0x1de)+_0x1dcc0f(0x28c)+_0x52ee0f+':\x20'+(_0x2999c5?.['message']||_0x2999c5));}}async function tableExists(_0xf1c78b){const _0x65fe0b=_0x518be6;try{const _0x38b277=await db[_0x65fe0b(0x2e0)](_0x65fe0b(0x248)+_0x65fe0b(0x202)+'ite_master'+'\x20WHERE\x20typ'+_0x65fe0b(0x255)+_0x65fe0b(0x2d9),[_0xf1c78b]);return!!_0x38b277;}catch(_0x12ccbf){return warn(_0x65fe0b(0x234)+_0x65fe0b(0x144)+'rror:\x20'+(_0x12ccbf?.[_0x65fe0b(0x1e1)]||_0x12ccbf)),![];}}async function getTableColumns(_0x5086d0){const _0x33819f=_0x518be6;try{const _0x47180b=await db['all'](_0x33819f(0x1b6)+_0x33819f(0x19f)+_0x5086d0+')');return(_0x47180b||[])['map'](_0x2bb93c=>_0x2bb93c[_0x33819f(0x2d0)]);}catch(_0x4338f1){return warn('[lock]\x20get'+_0x33819f(0x1ab)+_0x33819f(0x111)+_0x33819f(0x1d9)+_0x5086d0+':\x20'+(_0x4338f1?.[_0x33819f(0x1e1)]||_0x4338f1)),[];}}async function readAndNormalizeExistingLocks(){const _0x4f3adb=_0x518be6;try{const _0x16c90d=await db[_0x4f3adb(0x272)](_0x4f3adb(0x1f6)+'ROM\x20locks'),_0x1b06cc=new Map();for(const _0x1faab0 of _0x16c90d||[]){const _0x22f765=[_0x4f3adb(0x1e8),'chatid',_0x4f3adb(0xe6),'jid',_0x4f3adb(0x2fb)],_0x4f4e2b=[_0x4f3adb(0x2ba),'word','trigger',_0x4f3adb(0x20e),_0x4f3adb(0x1fc),_0x4f3adb(0x2c7),_0x4f3adb(0x1e1)];let _0x178d4c=null;for(const _0x357e9c of _0x22f765)if(_0x357e9c in _0x1faab0&&_0x1faab0[_0x357e9c]){_0x178d4c=String(_0x1faab0[_0x357e9c]);break;}let _0x19338f=null;for(const _0xd79c14 of _0x4f4e2b)if(_0xd79c14 in _0x1faab0&&_0x1faab0[_0xd79c14]){_0x19338f=String(_0x1faab0[_0xd79c14]);break;}if(!_0x178d4c||!_0x19338f)for(const _0x2411ef of Object[_0x4f3adb(0xfa)](_0x1faab0)){const _0x2a6033=_0x1faab0[_0x2411ef];if(!_0x178d4c&&typeof _0x2a6033===_0x4f3adb(0x209)&&_0x2a6033['includes']('@'))_0x178d4c=_0x2a6033;if(!_0x19338f&&typeof _0x2a6033===_0x4f3adb(0x209)&&_0x2a6033['length']<0x9be*-0x1+-0x1b09+0x2657&&!_0x2a6033[_0x4f3adb(0x1f3)]('@'))_0x19338f=_0x2a6033;}if(!_0x178d4c||!_0x19338f)continue;let _0x3cc109=_0x19338f[_0x4f3adb(0x2b2)](),_0x1df9b1=_0x4f3adb(0x198);if(_0x3cc109['toLowerCas'+'e']()[_0x4f3adb(0x1bb)]('regex:'))_0x1df9b1=_0x4f3adb(0x228),_0x3cc109=_0x3cc109[_0x4f3adb(0x2ca)](-0x1b72+0x1133+0x1*0xa45)[_0x4f3adb(0x2b2)]();else{if(_0x3cc109[_0x4f3adb(0x1f3)]('*'))_0x1df9b1=_0x4f3adb(0x20d);else _0x1df9b1=_0x4f3adb(0x198);}const _0x51dda3=_0x1faab0[_0x4f3adb(0x109)]||_0x1faab0[_0x4f3adb(0x301)]||_0x1faab0[_0x4f3adb(0x2a1)]||_0x1faab0[_0x4f3adb(0x2fc)]||'',_0x383084=Number(_0x1faab0[_0x4f3adb(0x1a3)]||_0x1faab0['ts']||_0x1faab0[_0x4f3adb(0x260)]||0x128a+0x11ed*0x1+-0x2477)||nowSec(),_0x32fabc=_0x178d4c+'||'+_0x3cc109;if(!_0x1b06cc[_0x4f3adb(0x2d1)](_0x32fabc))_0x1b06cc['set'](_0x32fabc,{'chat_jid':_0x178d4c,'phrase':_0x3cc109,'type':_0x1df9b1,'created_by':_0x51dda3,'created_at':_0x383084,'hit_count':Number(_0x1faab0[_0x4f3adb(0x184)]||0x1*-0x245f+0x6f1+0x1d6e)});else{const _0x5cf7ae=_0x1b06cc['get'](_0x32fabc);_0x5cf7ae[_0x4f3adb(0x1a3)]=Math['min'](_0x5cf7ae[_0x4f3adb(0x1a3)]||_0x383084,_0x383084),_0x5cf7ae['hit_count']=(_0x5cf7ae[_0x4f3adb(0x184)]||-0x163a+0x148+-0x2fe*-0x7)+(Number(_0x1faab0[_0x4f3adb(0x184)])||0xaca+-0x4fd+-0x5cd);}}return Array[_0x4f3adb(0x2dc)](_0x1b06cc[_0x4f3adb(0x2ac)]());}catch(_0x26ab62){return warn(_0x4f3adb(0x1eb)+_0x4f3adb(0x114)+_0x4f3adb(0x11e)+_0x4f3adb(0xef)+_0x4f3adb(0x211)+(_0x26ab62?.['message']||_0x26ab62)),[];}}async function ensureSchema(){const _0x5436be=_0x518be6,_0x5a6dcd={'id':_0x5436be(0x1d2)+_0x5436be(0x1a6)+_0x5436be(0x1e5)+_0x5436be(0x210),'chat_jid':'TEXT\x20NOT\x20N'+'ULL','phrase':_0x5436be(0x1d6)+'ULL','type':'TEXT\x20DEFAU'+_0x5436be(0x229)+'\x27','created_by':'TEXT\x20DEFAU'+_0x5436be(0x223),'created_at':_0x5436be(0x1b9)+'FAULT\x200','hit_count':_0x5436be(0x1b9)+_0x5436be(0x31c),'is_valid_regex':_0x5436be(0x1b9)+'FAULT\x201'};try{const _0x43ecfc=await tableExists(_0x5436be(0x1ae));if(!_0x43ecfc){const _0x3011e6=Object[_0x5436be(0x312)](_0x5a6dcd)[_0x5436be(0x249)](([_0xa03587,_0x3e6f9d])=>_0xa03587+'\x20'+_0x3e6f9d)[_0x5436be(0x24c)](_0x5436be(0x315));await db[_0x5436be(0x11f)](_0x5436be(0x138)+'REATE\x20TABL'+_0x5436be(0x1ac)+_0x5436be(0x285)+_0x3011e6+(_0x5436be(0x28e)+'\x20\x20UNIQUE(c'+_0x5436be(0x27a)+_0x5436be(0x199)+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+_0x5436be(0x2ad)));try{await db[_0x5436be(0x11f)](_0x5436be(0xf2)+'EX\x20IF\x20NOT\x20'+_0x5436be(0x170)+_0x5436be(0x2f1)+'t\x20ON\x20locks'+_0x5436be(0x102)+';');}catch(_0x314d6c){}try{await db['exec']('CREATE\x20UNI'+_0x5436be(0x218)+'IF\x20NOT\x20EXI'+_0x5436be(0x2a9)+'cks_unique'+_0x5436be(0x232)+_0x5436be(0xfb)+_0x5436be(0x316));}catch(_0x597133){}info(_0x5436be(0x153)+_0x5436be(0x1f9)+_0x5436be(0x26d)+'nonical)');try{await db[_0x5436be(0x11f)](_0x5436be(0x125)+_0x5436be(0x31b)+_0x5436be(0x219)+_0x5436be(0x240)+_0x5436be(0x2d2)+_0x5436be(0x195)+'\x20KEY,\x20noti'+_0x5436be(0xfe)+'\x20DEFAULT\x200'+');');}catch(_0x2f4385){}return;}const _0x4b9134=await getTableColumns(_0x5436be(0x1ae)),_0x2c2c49=_0x4b9134[_0x5436be(0x1f3)](_0x5436be(0x1e8)),_0x372269=_0x4b9134[_0x5436be(0x1f3)](_0x5436be(0x2ba)),_0x2fd28e=_0x4b9134[_0x5436be(0x1f3)]('type');if(_0x2c2c49&&_0x372269&&_0x2fd28e){if(!_0x4b9134[_0x5436be(0x1f3)]('is_valid_r'+_0x5436be(0x254)))try{await db[_0x5436be(0x11f)](_0x5436be(0x1d5)+_0x5436be(0x25d)+'D\x20COLUMN\x20i'+_0x5436be(0x115)+_0x5436be(0x1fb)+_0x5436be(0x15e)+'1;'),info(_0x5436be(0x161)+_0x5436be(0xf5)+_0x5436be(0x268)+_0x5436be(0x1da)+'cks\x20table');}catch(_0x5522cb){warn(_0x5436be(0x267)+_0x5436be(0x1ed)+_0x5436be(0x10f)+'regex\x20colu'+_0x5436be(0x20c)+(_0x5522cb?.['message']||_0x5522cb));}try{await db[_0x5436be(0x11f)]('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+_0x5436be(0x170)+'_locks_cha'+_0x5436be(0x152)+_0x5436be(0x102)+';');}catch(_0x2cf04a){}try{await db[_0x5436be(0x11f)]('CREATE\x20UNI'+'QUE\x20INDEX\x20'+_0x5436be(0x313)+'STS\x20idx_lo'+_0x5436be(0x197)+_0x5436be(0x232)+_0x5436be(0xfb)+'phrase);');}catch(_0x452618){}try{await db[_0x5436be(0x11f)]('CREATE\x20TAB'+_0x5436be(0x31b)+_0x5436be(0x219)+'k_prefs\x20(c'+'hat_jid\x20TE'+_0x5436be(0x195)+_0x5436be(0xe3)+_0x5436be(0xfe)+'\x20DEFAULT\x200'+');');}catch(_0x4993fc){}info('[lock]\x20loc'+_0x5436be(0x298)+_0x5436be(0x1fa)+'onical\x20(en'+_0x5436be(0x1ce)+_0x5436be(0x147)+_0x5436be(0x2a8));return;}info('[lock]\x20leg'+'acy\x20locks\x20'+_0x5436be(0x182)+_0x5436be(0x212)+_0x5436be(0x116)+'afe\x20migrat'+_0x5436be(0x19d));const _0x321821=await readAndNormalizeExistingLocks();await db['exec'](_0x5436be(0x286)+_0x5436be(0x1b2)+_0x5436be(0x27e));try{await db['exec'](_0x5436be(0x125)+_0x5436be(0x31b)+_0x5436be(0x219)+_0x5436be(0x295)+_0x5436be(0x2e9)+'INTEGER\x20PR'+'IMARY\x20KEY\x20'+'AUTOINCREM'+'ENT,\x0a\x20\x20\x20\x20\x20'+_0x5436be(0x20b)+_0x5436be(0x30c)+_0x5436be(0x17f)+_0x5436be(0x2e3)+_0x5436be(0x131)+_0x5436be(0x17f)+'\x20\x20\x20\x20\x20type\x20'+_0x5436be(0x15d)+_0x5436be(0x229)+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x5436be(0x204)+'y\x20TEXT\x20DEF'+_0x5436be(0x1aa)+_0x5436be(0x127)+_0x5436be(0x113)+_0x5436be(0x1ff)+_0x5436be(0x10e)+_0x5436be(0x139)+'ount\x20INTEG'+'ER\x20DEFAULT'+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x5436be(0x29f)+'_regex\x20INT'+_0x5436be(0x213)+'LT\x201,\x0a\x20\x20\x20\x20'+_0x5436be(0x1f7)+'(chat_jid,'+_0x5436be(0x1e9)+_0x5436be(0x192));}catch(_0x1cf07b){await db[_0x5436be(0x11f)]('CREATE\x20TAB'+_0x5436be(0x31b)+'EXISTS\x20loc'+'ks_new\x20(\x0a\x20'+_0x5436be(0x2e9)+_0x5436be(0x1d2)+_0x5436be(0x1a6)+_0x5436be(0x1e5)+_0x5436be(0x31d)+_0x5436be(0x20b)+'d\x20TEXT\x20NOT'+_0x5436be(0x17f)+'\x20\x20\x20\x20\x20phras'+_0x5436be(0x131)+_0x5436be(0x17f)+'\x20\x20\x20\x20\x20type\x20'+_0x5436be(0x15d)+_0x5436be(0x229)+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x5436be(0x204)+_0x5436be(0x158)+_0x5436be(0x1aa)+_0x5436be(0x127)+_0x5436be(0x113)+_0x5436be(0x1ff)+_0x5436be(0x10e)+_0x5436be(0x139)+_0x5436be(0x1d1)+_0x5436be(0x160)+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x5436be(0x29f)+_0x5436be(0x17b)+_0x5436be(0x213)+_0x5436be(0x194)+_0x5436be(0x18b)),warn(_0x5436be(0x153)+_0x5436be(0x1f9)+_0x5436be(0x28f)+'ut\x20UNIQUE\x20'+'as\x20fallbac'+'k');}const _0x429065=await db[_0x5436be(0x30e)](_0x5436be(0x26e)+_0x5436be(0x2f6)+_0x5436be(0x141)+_0x5436be(0x1bf)+'\x20type,\x20cre'+'ated_by,\x20c'+'reated_at,'+_0x5436be(0x233)+_0x5436be(0x1a7)+_0x5436be(0x105)+_0x5436be(0x1b5)+_0x5436be(0xf7)+_0x5436be(0x171));try{for(const _0x326b7e of _0x321821){try{let _0x425e82=0x82a+0x15ad*0x1+-0x43*0x72;if(_0x326b7e[_0x5436be(0x151)]==='regex')try{new RegExp(_0x326b7e[_0x5436be(0x2ba)]);}catch(_0x1f0204){_0x425e82=0xc89+-0x17*0x8f+0x5*0x10;}await _0x429065[_0x5436be(0x1ca)](_0x326b7e['chat_jid'],_0x326b7e['phrase'],_0x326b7e[_0x5436be(0x151)]||_0x5436be(0x198),_0x326b7e[_0x5436be(0x109)]||'',Number(_0x326b7e[_0x5436be(0x1a3)]||nowSec()),Number(_0x326b7e['hit_count']||0x1*-0x1f51+0x6*0x2dd+0xe23),_0x425e82);}catch(_0x9e1889){warn(_0x5436be(0x2d5)+_0x5436be(0x1c8)+_0x5436be(0x20f)+_0x5436be(0x2ce)+_0x326b7e[_0x5436be(0x1e8)]+'@'+_0x326b7e[_0x5436be(0x2ba)]+':\x20'+(_0x9e1889?.[_0x5436be(0x1e1)]||_0x9e1889));}}}finally{try{await _0x429065[_0x5436be(0x23f)]();}catch(_0x116dd4){}}try{const _0x10a7ff='locks_back'+_0x5436be(0x1e3)+Math[_0x5436be(0x14e)](Date[_0x5436be(0x1cd)]()/(0x436*-0x4+-0xa73+0x1f33));await db[_0x5436be(0x11f)](_0x5436be(0x1d5)+_0x5436be(0x167)+_0x5436be(0x2e8)+_0x10a7ff+';'),await db['exec'](_0x5436be(0x1d5)+_0x5436be(0x311)+_0x5436be(0x16d)+_0x5436be(0xda));try{await db['exec'](_0x5436be(0xf2)+'EX\x20IF\x20NOT\x20'+_0x5436be(0x170)+_0x5436be(0x2f1)+_0x5436be(0x152)+'(chat_jid)'+';');}catch(_0x37f7a0){}try{await db[_0x5436be(0x11f)]('CREATE\x20UNI'+'QUE\x20INDEX\x20'+'IF\x20NOT\x20EXI'+_0x5436be(0x2a9)+_0x5436be(0x197)+_0x5436be(0x232)+_0x5436be(0xfb)+'phrase);');}catch(_0x549549){}try{await db[_0x5436be(0x11f)](_0x5436be(0x125)+_0x5436be(0x31b)+_0x5436be(0x219)+'k_prefs\x20(c'+_0x5436be(0x2d2)+'XT\x20PRIMARY'+_0x5436be(0xe3)+_0x5436be(0xfe)+_0x5436be(0x1ad)+');');}catch(_0x213ecf){}info(_0x5436be(0x2d5)+_0x5436be(0x251)+_0x5436be(0x214)+_0x5436be(0x281)+_0x5436be(0xe9)+_0x5436be(0x2df));}catch(_0x656517){warn(_0x5436be(0x2d5)+_0x5436be(0x273)+_0x5436be(0x220)+(_0x656517?.[_0x5436be(0x1e1)]||_0x656517));throw _0x656517;}finally{await db[_0x5436be(0x11f)](_0x5436be(0x286)+'eign_keys\x20'+_0x5436be(0x16b));}return;}catch(_0x4522c6){error(_0x4522c6,_0x5436be(0x185)+'ureSchema\x20'+_0x5436be(0x179));throw _0x4522c6;}}async function addLock(_0x48ef6d,_0xfc1ed2,_0x39c2c3){const _0x32b51a=_0x518be6;try{if(!_0x48ef6d||!_0xfc1ed2)return![];let _0x30c4ea=String(_0xfc1ed2)[_0x32b51a(0x2b2)]();if(!_0x30c4ea)return![];let _0x401c3f=_0x32b51a(0x198),_0xb3022f=-0x1b*0x1b+-0x1d63+0x83*0x3f;if(_0x30c4ea[_0x32b51a(0x2f7)+'e']()[_0x32b51a(0x1bb)](_0x32b51a(0x2f8))){_0x401c3f='regex',_0x30c4ea=_0x30c4ea[_0x32b51a(0x2ca)](-0x74e+0x1b48+0x4*-0x4fd)[_0x32b51a(0x2b2)]();try{new RegExp(_0x30c4ea),_0xb3022f=-0x13e*0x10+-0xa7d+0x1e5e;}catch(_0x535ddb){_0xb3022f=-0x35d*-0x3+0xa07+-0x406*0x5,warn(_0x32b51a(0x161)+_0x32b51a(0x166)+_0x32b51a(0x172)+_0x32b51a(0x150)+_0x30c4ea);}}else _0x30c4ea[_0x32b51a(0x1f3)]('*')?_0x401c3f=_0x32b51a(0x20d):_0x401c3f='normal';try{const _0x5e5b55=await db[_0x32b51a(0x1ca)](_0x32b51a(0x26e)+'O\x20locks\x20(c'+'hat_jid,\x20p'+_0x32b51a(0x14d)+'e,\x20created'+_0x32b51a(0x12b)+_0x32b51a(0xf3)+_0x32b51a(0x30f)+'_valid_reg'+_0x32b51a(0x28b)+_0x32b51a(0x2af)+'(?,\x20?,\x20?,\x20'+_0x32b51a(0x1ba)+_0x32b51a(0x2d6)+_0x32b51a(0x243)+_0x32b51a(0x13a)+_0x32b51a(0x21d)+'\x20DO\x20UPDATE'+_0x32b51a(0x11c)+_0x32b51a(0x10d)+_0x32b51a(0x2dd)+_0x32b51a(0x13e)+_0x32b51a(0x2b9)+'reated_by\x20'+_0x32b51a(0x145)+_0x32b51a(0x15b)+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20create'+_0x32b51a(0x304)+_0x32b51a(0x2cb)+_0x32b51a(0xee)+_0x32b51a(0x2bf)+_0x32b51a(0x115)+_0x32b51a(0x28a)+_0x32b51a(0x18a)+_0x32b51a(0xe7),[_0x48ef6d,_0x30c4ea,_0x401c3f,_0x39c2c3||'',nowSec(),_0xb3022f]);return ahoCache[_0x32b51a(0x241)](_0x48ef6d),info('[lock]\x20add'+_0x32b51a(0x205)+_0x30c4ea+_0x32b51a(0x180)+_0x48ef6d+_0x32b51a(0xeb)+_0x401c3f+',\x20valid='+_0xb3022f+')'),!![];}catch(_0x44d5e7){warn(_0x32b51a(0x252)+'CONFLICT\x20i'+'nsert\x20fail'+'ed\x20(fallba'+'ck):\x20'+(_0x44d5e7?.[_0x32b51a(0x1e1)]||_0x44d5e7));try{const _0x2fa173=await db[_0x32b51a(0x2e0)](_0x32b51a(0x262)+_0x32b51a(0xe4)+'\x20WHERE\x20cha'+_0x32b51a(0x2ec)+_0x32b51a(0x157)+_0x32b51a(0x183),[_0x48ef6d,_0x30c4ea]);return _0x2fa173?await db[_0x32b51a(0x1ca)]('UPDATE\x20loc'+_0x32b51a(0x261)+_0x32b51a(0x1b4)+_0x32b51a(0x134)+'?,\x20created'+_0x32b51a(0x2d7)+_0x32b51a(0x115)+_0x32b51a(0x1d8)+_0x32b51a(0x319),[_0x401c3f,_0x39c2c3||'',nowSec(),_0xb3022f,_0x2fa173['id']]):await db[_0x32b51a(0x1ca)](_0x32b51a(0x26e)+_0x32b51a(0xe5)+_0x32b51a(0x27a)+_0x32b51a(0x14d)+_0x32b51a(0x19b)+_0x32b51a(0x12b)+_0x32b51a(0xf3)+'_count,\x20is'+_0x32b51a(0xe2)+_0x32b51a(0x263)+'\x20(?,\x20?,\x20?,'+_0x32b51a(0x12e)+'?)',[_0x48ef6d,_0x30c4ea,_0x401c3f,_0x39c2c3||'',nowSec(),_0xb3022f]),ahoCache[_0x32b51a(0x241)](_0x48ef6d),!![];}catch(_0x2e13bd){return error(_0x2e13bd,_0x32b51a(0x161)+_0x32b51a(0x19a)+'ack\x20failed'+'\x20for\x20'+_0x30c4ea+'\x20@\x20'+_0x48ef6d),![];}}}catch(_0x903b75){return error(_0x903b75,_0x32b51a(0x161)+_0x32b51a(0x156)+_0x32b51a(0x117)+_0xfc1ed2+_0x32b51a(0x23c)+_0x48ef6d),![];}}async function deleteLockByPhrase(_0x807dec,_0x5e0ebb){const _0xa8a687=_0x518be6;try{if(!_0x807dec||!_0x5e0ebb)return 0x1bf7+0x671*0x4+-0x35bb;const _0x483553=String(_0x5e0ebb||'')[_0xa8a687(0x2b2)]();if(!_0x483553)return 0x737*0x4+0x2187+-0x3e63;if(_0x483553['toLowerCas'+'e']()[_0xa8a687(0x1bb)](_0xa8a687(0x2f8))){const _0x344a1f=_0x483553[_0xa8a687(0x2ca)](0x1*-0x141d+-0x13d3*0x1+0x27f6)[_0xa8a687(0x2b2)](),_0x36b344=await db[_0xa8a687(0x1ca)]('DELETE\x20FRO'+'M\x20locks\x20WH'+'ERE\x20chat_j'+_0xa8a687(0x101)+_0xa8a687(0x2c8)+_0xa8a687(0x1b1)+_0xa8a687(0x137),[_0x807dec,_0x344a1f]);if(_0x36b344?.[_0xa8a687(0x128)])ahoCache[_0xa8a687(0x241)](_0x807dec);return _0x36b344?.[_0xa8a687(0x128)]||0x244d+-0x966+0x1*-0x1ae7;}let _0x5d07e7=await db[_0xa8a687(0x1ca)](_0xa8a687(0xf6)+_0xa8a687(0x165)+_0xa8a687(0x1b0)+'id\x20=\x20?\x20AND'+_0xa8a687(0x23a)+'?',[_0x807dec,_0x483553]);if(_0x5d07e7?.[_0xa8a687(0x128)])return ahoCache[_0xa8a687(0x241)](_0x807dec),_0x5d07e7['changes'];return-0x232d+0x1c9*-0xe+0x1*0x3c2b;}catch(_0x5668b8){return warn('[lock]\x20del'+_0xa8a687(0x16f)+_0xa8a687(0x159)+_0xa8a687(0x14f)+(_0x5668b8?.[_0xa8a687(0x1e1)]||_0x5668b8)),0x122b+0x1f7+-0x1422;}}async function deleteLockById(_0x2e63c2,_0x13abb5){const _0x236c3f=_0x518be6;try{const _0x3ebd0b=await db['run'](_0x236c3f(0xf6)+_0x236c3f(0x165)+_0x236c3f(0x1b0)+_0x236c3f(0x101)+_0x236c3f(0xdd),[_0x2e63c2,_0x13abb5]);if(_0x3ebd0b?.[_0x236c3f(0x128)])ahoCache['delete'](_0x2e63c2);return _0x3ebd0b?.['changes']||0x25d2+0x369+-0x5*0x83f;}catch(_0x44cc05){return warn('[lock]\x20del'+_0x236c3f(0x245)+_0x236c3f(0x2cf)+(_0x44cc05?.[_0x236c3f(0x1e1)]||_0x44cc05)),-0x1c67*0x1+0x1763+0x504;}}async function deleteAllLocksForChat(_0x559441){const _0x4a2636=_0x518be6;try{const _0x37173e=await db[_0x4a2636(0x1ca)](_0x4a2636(0xf6)+_0x4a2636(0x165)+_0x4a2636(0x1b0)+_0x4a2636(0x119),[_0x559441]);if(_0x37173e?.[_0x4a2636(0x128)])ahoCache[_0x4a2636(0x241)](_0x559441);return _0x37173e?.['changes']||-0xc67+-0x1eb+0xe52;}catch(_0x205874){return warn(_0x4a2636(0x10a)+_0x4a2636(0x1d7)+'sForChat\x20e'+'rror:\x20'+(_0x205874?.['message']||_0x205874)),0x1*-0x449+-0x100f+0x1458;}}async function listLocksForChat(_0x46d8b1){const _0x318a14=_0x518be6;try{const _0x6cce6e=await db[_0x318a14(0x272)](_0x318a14(0x18c)+_0x318a14(0x1f5)+_0x318a14(0x1f2)+'ed_by,\x20cre'+_0x318a14(0xf1)+'it_count,\x20'+_0x318a14(0x30b)+_0x318a14(0x11b)+_0x318a14(0x1f0)+_0x318a14(0x18f)+_0x318a14(0x1a8)+_0x318a14(0xf9),[_0x46d8b1]);return _0x6cce6e||[];}catch(_0x2b5bb9){return warn(_0x2b5bb9,_0x318a14(0x299)+_0x318a14(0x29c)+_0x318a14(0x24f)+'for\x20'+_0x46d8b1+':\x20'+(_0x2b5bb9?.[_0x318a14(0x1e1)]||_0x2b5bb9)),[];}}async function setLockNotify(_0x4f0a0a,_0x9e1fc2){const _0x390bdd=_0x518be6;try{if(!_0x4f0a0a)return![];return await db[_0x390bdd(0x1ca)](_0x390bdd(0x26e)+'O\x20lock_pre'+_0x390bdd(0x271)+_0x390bdd(0x293)+')\x20VALUES\x20('+_0x390bdd(0x2a6)+_0x390bdd(0x253)+_0x390bdd(0x247)+'jid)\x20DO\x20UP'+_0x390bdd(0x282)+_0x390bdd(0x317)+_0x390bdd(0x29a)+_0x390bdd(0x100),[_0x4f0a0a,_0x9e1fc2?0x9d4*0x2+0x270a+-0x3ab1:0x2641+0x9*-0x13e+-0x1d*0xef]),!![];}catch(_0x4072f9){return warn(_0x390bdd(0x2cc)+_0x390bdd(0x309)+_0x390bdd(0x27b)+'r\x20'+_0x4f0a0a+':\x20'+(_0x4072f9?.[_0x390bdd(0x1e1)]||_0x4072f9)),![];}}function _0x3e14(){const _0x2c1a92=['type','t\x20ON\x20locks','[lock]\x20cre','.\x20Please\x20c','\x20gp:alias','Lock\x20faile','AND\x20phrase','y\x20TEXT\x20DEF','hrase\x20erro','nection(s)','.created_b','jid','TEXT\x20DEFAU','R\x20DEFAULT\x20','filter','ER\x20DEFAULT','[lock]\x20add','earch\x20fail','\x20regex\x20id=','dellock','M\x20locks\x20WH','Lock:\x20inva','E\x20locks\x20RE','tialized\x20(','idateStore','\x20set\x20for\x20','=\x20ON;','[lock]\x20Mat','w\x20RENAME\x20T','ify\x20FROM\x20l','eteLockByP','EXISTS\x20idx','\x20?,\x20?)','lid\x20regex\x20','OM\x20locks\x20W','eue\x20item\x20e','\x20target(s)','=\x20\x27regex\x27\x20','jid|all>','\x20locks\x20for','fatal','45856qShmXj','_regex\x20INT','nection\x20','our\x20defaul','add','\x20NULL,\x0a\x20\x20\x20','\x22\x20@\x20','status:\x0a','table\x20dete','\x20=\x20?','hit_count','[lock]\x20ens','[lock]\x20val','REMOVE_DIA','\x20failed:\x20','To\x20query\x20s','uded.is_va','\x20);','SELECT\x20id,','pping\x20inva','rs\x20besides','E\x20chat_jid','SELECT\x20val','[lock]\x20enf','\x20\x20\x20\x20\x20);','split','LT\x201\x0a\x20\x20\x20\x20\x20','XT\x20PRIMARY','ocknotify\x20','cks_unique','normal','hrase)\x0a\x20\x20\x20','Lock\x20fallb','e,\x20created','remoteJid','ion','unlockall','le_info(','size','}_]*','dApi\x20not\x20a','created_at','available','set','IMARY\x20KEY\x20',',\x20is_valid','\x20=\x20?\x20ORDER','gex','AULT\x20\x27\x27,\x0a\x20','TableColum','E\x20locks\x20(\x0a','\x20DEFAULT\x200','locks','catch','ERE\x20chat_j','egex\x27\x20AND\x20','eign_keys\x20','ue(s).','e\x20=\x20?,\x20cre','LUES\x20(?,\x20?','PRAGMA\x20tab','s).','toISOStrin','INTEGER\x20DE','?,\x20?,\x200,\x20?','startsWith','❌\x20Failed\x20t','\x22:\x20','unlock\x201,2','d,\x20phrase,','OFF','REGEX)','lt\x20connect','p{N}_])','chFromFind','NFD','WARNING_TT','alid\x20wildc','ration\x20ins','uild\x20faile','run','next','\x20&\x20regex\x20v','now','sured\x20indi','x\x20=\x200\x20WHER','roup-only)','ount\x20INTEG','INTEGER\x20PR','is\x20not\x20all','t\x20resolve\x20','ALTER\x20TABL','TEXT\x20NOT\x20N','eteAllLock','gex\x20=\x20?\x20WH','or\x20','lumn\x20to\x20lo','\x20by\x20@','rom\x20your\x20d','204959MjudIv','dText\x20fail','tialize\x20fa','mentions','message','\x20WHERE\x20key','up_','vailable','AUTOINCREM','replace','ailed:\x20','chat_jid','\x20phrase)\x0a\x20','d\x20regex\x20fo','[lock]\x20rea','DB\x20ensured','led\x20to\x20add',':\x20unlock\x201','\x20locknotif','locks\x20WHER','delock','ype,\x20creat','includes','UEUE_LIMIT','\x20phrase,\x20t','SELECT\x20*\x20F','\x20\x20\x20\x20UNIQUE','clear','ated\x20locks','lready\x20can','gex\x20INTEGE','value','function','lock\x20bad1,','TEGER\x20DEFA','run)','114sIzLBd','e\x20FROM\x20sql','nstance','\x20created_b','ed\x20lock\x20\x22','NFKC','Corasick\x20b','listlock','string','match','\x20\x20\x20chat_ji','mn:\x20','wildcard','keyword','ert\x20failed','ENT','led:\x20','cted\x20->\x20pe','EGER\x20DEFAU','plete;\x20old','owed.','NORMALIZE_','Corasick\x20s','QUE\x20INDEX\x20','EXISTS\x20loc','se,comma-s','connection','ailed,\x20usi','d,\x20phrase)','extendedTe','d\x20locknoti','p\x20failed:\x20','fy\x20','egex\x27','LT\x20\x27\x27','ids','ude\x20gp\x20in\x20','xtMessage','find','regex','LT\x20\x27normal','caption','videoMessa','dler\x20error','LOCKS','fail','[lock]\x20fin','same\x20line.','chatJid','\x20ON\x20locks(','\x20hit_count','[lock]\x20tab','eteWithRet','PER_CHAT_Q','\x0aMessage:\x0a','s\x20for\x20your','tal','\x20phrase\x20=\x20','efault\x20con','\x20@\x20','{user}','eue\x20fail:\x20','finalize','k_prefs\x20(c','delete','✔️\x20Deleted\x20','\x20ON\x20CONFLI',':<alias|ji','eteLockByI','|jid|all>','LICT(chat_','SELECT\x20nam','map','38861493bxijlP','ks\x20SET\x20is_','join','|jid|all>\x0a','lock','hat\x20error\x20','✔️\x20[lock]\x20l','ration\x20com','[lock]\x20ON\x20','\x20\x20\x20ON\x20CONF','egex','e=\x27table\x27\x20','push','knotify\x20ch','on(s):\x20','[lock]\x20con','61268PIwrxh','SELECT\x20not','_jid\x27','E\x20locks\x20AD','fy\x20message','|all>','timestamp','ks\x20SET\x20typ','SELECT\x20id\x20','ex)\x20VALUES','ias','WARNING_ME','valid_rege','[lock]\x20fai','d_regex\x20co','id:\x20\x22','rror:\x20','oUserJid','normalizeT','\x20table\x20(ca','INSERT\x20INT','GLOBAL_CON','2BPaRIj','fs\x20(chat_j','all','ration\x20swa','rgets.','✔️\x20[lock]\x20','\x20lock(s).','gp:<alias|','unlocklock','dStoredMat','hat_jid,\x20p','\x20failed\x20fo','ABLED','heck\x20/setd','=\x20OFF;','ger2','\x5c$&','\x20table\x20ren','DATE\x20SET\x20n','❌\x20Could\x20no','alid\x20store','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','PRAGMA\x20for','(?<![\x5cp{L}','led\x20for\x20','\x20phrase\x20FR','gex\x20=\x20excl','ex)\x0a\x20\x20\x20\x20\x20\x20','ed\x20to\x20','l\x20gp:<alia',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','_new\x20witho','aned\x20up','2491255MlBVBL','\x201\x20WHERE\x20i','id,\x20notify','isInteger','ks_new\x20(\x0a\x20','gp\x20alias/j','UPDATE\x20loc','ks\x20table\x20a','[lock]\x20lis','cluded.not','[lock]\x20ini','tLocksForC',',2\x20OR\x20unlo','[lock]\x20ski','\x20\x20is_valid','length','author','[lock]\x20pro','ockall\x20fai','\x20locks\x20loa','buttonsRes','?,\x20?)\x0a\x20\x20\x20\x20','y\x20[on|off]','mns)','STS\x20idx_lo','OR\x20type\x20=\x20','ble','values','\x20\x20\x20\x20','t\x20connecti','\x20\x20\x20VALUES\x20','sendMessag','2854470LbjkHL','trim','ks\x20SET\x20hit','x\x20=\x201\x20WHER','[lock]\x20sen','it_count\x20+','[lock]\x20unl','line\x20usage','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','phrase','6YPqvRh','ry\x20failed:','ng\x20default','HERE\x20type\x20','\x20\x20\x20\x20\x20\x20\x20\x20\x20i','lock.initi','DEFAULT_EN','[lock]\x20Aho',':\x20unlock\x20<','\x20gp:<alias','findings','ires\x20bot\x20i','body','\x20type\x20=\x20\x27r','❌\x20PM:\x20one-','slice','luded.crea','[lock]\x20set','E\x20id\x20=\x20?','\x20for\x20','d\x20error:\x20','name','has','hat_jid\x20TE','ard\x20for\x20id','2.3.2','[lock]\x20mig',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20','_at\x20=\x20?,\x20i','locknotify','AND\x20name=?','\x20(INVALID\x20','s|jid|all>','from','\x20=\x20exclude','aho','ckup','get','isCommand','[\x5cp{L}\x5cp{N','\x20\x20\x20\x20\x20phras','serialized','fromMe','off','sock','NAME\x20TO\x20','\x20\x20\x20\x20\x20\x20\x20id\x20','imageMessa','L_MS','t_jid\x20=\x20?\x20','resolveNam','✔️\x20Locknoti','❌\x20Unknown\x20','❌\x20Usage\x20(g','_locks_cha','search','CRITICS','658yBjfIg','bad2\x20gp:al','O\x20locks_ne','toLowerCas','regex:','participan','dWarning:\x20','chat','user','[lock]\x20isa','getUniqueJ','output','8387892Spujyk','creator',':\x20unlockal','n\x20characte','d_at\x20=\x20exc','o\x20delete\x20l','_jid\x20=\x20?','\x5cp{N}_])','ust\x20contai','LockNotify','delall','is_valid_r','d\x20TEXT\x20NOT','@g.us','prepare','_count,\x20is','BATCH_DELA','E\x20locks_ne','entries','IF\x20NOT\x20EXI','knotify\x20gp',',\x0a\x20\x20','phrase);','otify\x20=\x20ex','[lock]\x20res','ERE\x20id\x20=\x20?','shift','LE\x20IF\x20NOT\x20','FAULT\x200','ENT,\x0a\x20\x20\x20\x20\x20','key','gger1,trig','_count\x20=\x20h','O\x20locks;','[lock]\x20inv','cessChatQu','\x20id\x20=\x20?','\x20DEFAULT\x20c','test','eparated>\x20','id-or-phra','_valid_reg','\x20KEY,\x20noti','FROM\x20locks','O\x20locks\x20(c','chat_id','lid_regex;','(?![\x5cp{L}\x5c','amed\x20to\x20ba','igger1,tri','\x20(type=','This\x20toggl','led\x20to\x20sen','ted_at,\x0a\x20\x20','gLocks\x20fai','clearlocks','ated_at,\x20h','CREATE\x20IND','ed_at,\x20hit','normalize','ed\x20is_vali','DELETE\x20FRO',',\x20?,\x20?,\x20?,','index','\x20BY\x20id','keys','chat_jid,\x20','selectedBu','SSAGE','fy\x20INTEGER','text','ify;','id\x20=\x20?\x20AND','(chat_jid)','\x27invalid_r','onnection(','_regex)\x20VA','\x20Example:\x20','✔️\x20Saved\x20','SEND_WARNI','created_by','[lock]\x20del','BATCH_SIZE','gger2>\x20gp:','\x20\x20\x20\x20\x20\x20type','ULT\x200,\x0a\x20\x20\x20','\x20is_valid_','❌\x20PM\x20one-l','ns\x20error\x20f','⚠️\x20{user},\x20','ated_at\x20IN','dAndNormal','s_valid_re','rforming\x20s','d\x20for\x20',':\x20lock\x20<tr','id\x20=\x20?','orcement\x20f','egex\x20FROM\x20','\x20SET\x0a\x20\x20\x20\x20\x20','ue\x20FROM\x20de','izeExistin','exec','quested\x20ta','es\x20lock\x20no','dmin\x20check','eck\x20failed','Y_MS','CREATE\x20TAB','\x20lock\x20entr','\x20\x20\x20\x20\x20\x20\x20cre','changes','that\x20word\x20',':\x20locknoti','_by,\x20creat','ponseMessa',',phrase2','\x20?,\x20?,\x200,\x20','(s):\x20','notify','e\x20TEXT\x20NOT','alidation\x20','ed:\x20','ated_by\x20=\x20','\x20phrase=\x22','nodes','phrase\x20=\x20?','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','\x20\x20\x20\x20\x20hit_c','CT(chat_ji',':\x20listlock','max','tion(s):\x20','d.type,\x0a\x20\x20','ttonId','\x20default\x20c','w\x20(chat_ji','isArray','ck\x20phrase1','leExists\x20e','=\x20excluded','❌\x20PM:\x20incl','ces\x20&\x20colu','CURRENCY','unlock','build','<alias|jid','r\x20default\x20','hrase,\x20typ','floor','r:\x20','provided:\x20'];_0x3e14=function(){return _0x2c1a92;};return _0x3e14();}async function getLockNotify(_0x2a17e7){const _0x49c020=_0x518be6;try{if(!_0x2a17e7)return 0x1*-0x10b1+-0x1*0xd2d+-0x1*-0x1dde;const _0x14bf72=await db[_0x49c020(0x2e0)](_0x49c020(0x25b)+_0x49c020(0x16e)+'ock_prefs\x20'+'WHERE\x20chat'+_0x49c020(0x306),[_0x2a17e7]);return _0x14bf72?Number(_0x14bf72[_0x49c020(0x130)])?0x108d+0x1c90+0xb47*-0x4:0x1*-0xdc7+0x26e6+-0x191f:-0x1edd+-0x1*-0x1b9b+0x342;}catch(_0x3356ac){return warn('[lock]\x20get'+'LockNotify'+_0x49c020(0x27b)+'r\x20'+_0x2a17e7+':\x20'+(_0x3356ac?.[_0x49c020(0x1e1)]||_0x3356ac)),0x1ff7+0x1*0x1e67+-0x3e5e;}}async function deleteWithRetry(_0x4b7e25,_0x10f3ad=-0x181e+-0x2491+0x3cb1,_0x282e65=0x2*-0x106a+0x137f+0xe81*0x1){const _0x4acf2b=_0x518be6,_0x18b7cd=_0x4b7e25['key']?.[_0x4acf2b(0x19c)];if(!_0x18b7cd)return![];let _0x5b32a2=_0x282e65;for(let _0x678277=-0x12cb+-0x29*-0xae+-0x912;_0x678277<=Math['max'](-0x21*0xb9+-0x13f4+0x2bce,_0x10f3ad);_0x678277++){try{if(!sendApi)return warn(_0x4acf2b(0x10a)+'eteWithRet'+'ry:\x20sendAp'+'i\x20unavaila'+_0x4acf2b(0x2ab)),![];return await sendApi(_0x18b7cd,{'delete':_0x4b7e25[_0x4acf2b(0x31e)]}),!![];}catch(_0x5030ae){if(_0x678277<_0x10f3ad){await sleep(_0x5b32a2),_0x5b32a2*=-0x4*-0x565+0x24cc+-0x3a5e;continue;}return warn(_0x4acf2b(0x10a)+_0x4acf2b(0x235)+_0x4acf2b(0x2bc)+'\x20'+(_0x5030ae?.[_0x4acf2b(0x1e1)]||_0x5030ae)),![];}}return![];}async function sendWarningAndMaybeDelete(_0x1d810c){const _0x2f6038=_0x518be6;if(!CFG[_0x2f6038(0x108)+'NG'])return;try{const _0x533ceb=_0x1d810c[_0x2f6038(0x31e)]?.[_0x2f6038(0x2f9)+'t']||_0x1d810c[_0x2f6038(0x31e)]?.[_0x2f6038(0x2dc)]||'',_0x3cd25e=_0x1d810c[_0x2f6038(0x31e)][_0x2f6038(0x19c)],_0x2a2fb9=_0x533ceb?'@'+String(_0x533ceb)[_0x2f6038(0x193)]('@')[-0x1*0x10fd+0x22d9+0x9*-0x1fc]:_0x2f6038(0x23d),_0x2e33d1=String(CFG[_0x2f6038(0x265)+'SSAGE']||DEFAULTS[_0x2f6038(0x265)+'SSAGE'])[_0x2f6038(0x1e6)](/\{user\}/gi,_0x2a2fb9);if(!sendApi){warn('[lock]\x20sen'+_0x2f6038(0x2fa)+'sendApi\x20un'+_0x2f6038(0x1a4));return;}const _0x45d85e=await sendApi(_0x3cd25e,{'text':_0x2e33d1,'mentions':_0x533ceb?[_0x533ceb]:[]});_0x45d85e?.[_0x2f6038(0x31e)]&&CFG[_0x2f6038(0x1c6)+'L_MS']&&CFG[_0x2f6038(0x1c6)+_0x2f6038(0x2eb)]>-0x5*0x6e2+0xa9*-0x1f+0x36e1&&setTimeout(async()=>{const _0x27f80d=_0x2f6038;try{await sendApi(_0x3cd25e,{'delete':_0x45d85e[_0x27f80d(0x31e)]});}catch(_0x19977b){}},CFG[_0x2f6038(0x1c6)+_0x2f6038(0x2eb)]);}catch(_0x150d87){warn('[lock]\x20sen'+'dWarning\x20f'+_0x2f6038(0x1e7)+(_0x150d87?.[_0x2f6038(0x1e1)]||_0x150d87));}}async function processChatQueue(_0xfbd784){const _0x490917=_0x518be6;while((perChatQueue[_0x490917(0x2e0)](_0xfbd784)||[])[_0x490917(0x2a0)]>0xabd+-0x25b4+0x8fd*0x3&&!shuttingDown){const _0x319b69=Math[_0x490917(0x13c)](0x57b+0x1181*0x1+0x6f*-0x35,CFG[_0x490917(0x10b)]||-0x39*-0x2a+0x101*-0x19+-0xe0*-0x12),_0x2174cf=perChatQueue[_0x490917(0x2e0)](_0xfbd784)||[],_0x4f31a5=_0x2174cf['splice'](-0x14fb*-0x1+0xa*0x7e+-0x19e7,_0x319b69);for(const _0x350da3 of _0x4f31a5){try{const _0x1922f8=await deleteWithRetry(_0x350da3)[_0x490917(0x1af)](()=>![]);_0x1922f8&&await sendWarningAndMaybeDelete(_0x350da3)[_0x490917(0x1af)](()=>{});}catch(_0xeec9c2){warn(_0x490917(0x2a2)+'cessChatQu'+_0x490917(0x174)+_0x490917(0x26a)+(_0xeec9c2?.['message']||_0xeec9c2));}}(perChatQueue['get'](_0xfbd784)||[])[_0x490917(0x2a0)]>0x1d2c+0x230a+-0x4036&&await sleep(Math['max'](0x94f*-0x1+0x24+-0x1*-0x92b,CFG[_0x490917(0x310)+_0x490917(0x124)]||0x2*-0xabb+-0xa9*-0x11+0x1*0xb05));}if((perChatQueue[_0x490917(0x2e0)](_0xfbd784)||[])[_0x490917(0x2a0)]===-0xc08+0xc*0xe+-0x68*-0x1c)perChatQueue[_0x490917(0x241)](_0xfbd784);}function tryStartProcessingForChat(_0x4aa16a){const _0x5639b5=_0x518be6;if(perChatProcessing['get'](_0x4aa16a))return;if(activeChats>=(CFG[_0x5639b5(0x26f)+_0x5639b5(0x148)]||0x1bb7+-0x268c+0xad6)){setTimeout(()=>tryStartProcessingForChat(_0x4aa16a),-0x3bf*-0x7+-0x1211+-0x792);return;}activeChats++,perChatProcessing[_0x5639b5(0x1a5)](_0x4aa16a,!![]),((async()=>{const _0x36e001=_0x5639b5;try{await processChatQueue(_0x4aa16a);}catch(_0x347a12){warn('[lock]\x20pro'+_0x36e001(0xdc)+_0x36e001(0x23e)+(_0x347a12?.[_0x36e001(0x1e1)]||_0x347a12));}finally{perChatProcessing[_0x36e001(0x241)](_0x4aa16a),activeChats=Math[_0x36e001(0x13c)](0x31e+0x2*0xc50+-0x1bbe*0x1,activeChats-(-0x2271+0x2a1*-0xe+0x4740));if((perChatQueue[_0x36e001(0x2e0)](_0x4aa16a)||[])[_0x36e001(0x2a0)])setImmediate(()=>tryStartProcessingForChat(_0x4aa16a));}})());}function enqueueDeletion(_0x36124f){const _0xe9bd37=_0x518be6,_0xce5b60=_0x36124f[_0xe9bd37(0x31e)]?.[_0xe9bd37(0x19c)];if(!_0xce5b60)return;if(!perChatQueue[_0xe9bd37(0x2d1)](_0xce5b60))perChatQueue['set'](_0xce5b60,[]);const _0x352be3=perChatQueue[_0xe9bd37(0x2e0)](_0xce5b60);if(_0x352be3[_0xe9bd37(0x2a0)]>=(CFG[_0xe9bd37(0x236)+_0xe9bd37(0x1f4)]||DEFAULTS[_0xe9bd37(0x236)+_0xe9bd37(0x1f4)]))_0x352be3[_0xe9bd37(0x31a)]();_0x352be3[_0xe9bd37(0x256)](_0x36124f);if(!perChatProcessing['get'](_0xce5b60))tryStartProcessingForChat(_0xce5b60);}function extractTextFromMessage(_0x31c40b){const _0x3a397f=_0x518be6;if(!_0x31c40b||!_0x31c40b[_0x3a397f(0x1e1)])return'';const _0x388a8d=_0x31c40b[_0x3a397f(0x1e1)];if(_0x388a8d['conversati'+'on'])return _0x388a8d['conversati'+'on'];if(_0x388a8d[_0x3a397f(0x21e)+_0x3a397f(0x226)]?.['text'])return _0x388a8d[_0x3a397f(0x21e)+_0x3a397f(0x226)][_0x3a397f(0xff)];if(_0x388a8d[_0x3a397f(0x2ea)+'ge']?.[_0x3a397f(0x22a)])return _0x388a8d[_0x3a397f(0x2ea)+'ge']['caption'];if(_0x388a8d[_0x3a397f(0x22b)+'ge']?.[_0x3a397f(0x22a)])return _0x388a8d[_0x3a397f(0x22b)+'ge'][_0x3a397f(0x22a)];if(_0x388a8d[_0x3a397f(0x2a5)+_0x3a397f(0x12c)+'ge']?.[_0x3a397f(0xfc)+_0x3a397f(0x13f)])return _0x388a8d[_0x3a397f(0x2a5)+_0x3a397f(0x12c)+'ge'][_0x3a397f(0xfc)+_0x3a397f(0x13f)];return'';}function splitRestForGp(_0x4adc62){const _0x28828a=_0x518be6;if(!_0x4adc62)return{'left':'','gp':null};const _0x160076=_0x4adc62[_0x28828a(0x20a)](/\bgp[:\s]+(.+)$/i);if(_0x160076){const _0x45d288=_0x4adc62[_0x28828a(0x2ca)](0xd75*0x2+0x20d2+-0x3bbc,_0x160076[_0x28828a(0xf8)])[_0x28828a(0x2b2)](),_0x426246=_0x160076[-0x2369+-0x168+0x24d2][_0x28828a(0x2b2)]();return{'left':_0x45d288,'gp':_0x426246};}const _0x4c211c=_0x4adc62['split'](/\s+/)[_0x28828a(0x15f)](Boolean);if(_0x4c211c['length']>0x1f7b+-0x1003+-0xf77){const _0x3bed6b=_0x4c211c[_0x4c211c[_0x28828a(0x2a0)]-(0x16f5+0x2441+-0x3b35)];if(_0x3bed6b[_0x28828a(0x2f7)+'e']()==='all'||_0x3bed6b['includes']('@'))return _0x4c211c['pop'](),{'left':_0x4c211c[_0x28828a(0x24c)]('\x20')[_0x28828a(0x2b2)](),'gp':_0x3bed6b};}return{'left':_0x4adc62[_0x28828a(0x2b2)](),'gp':null};}function parseLockCommandOneLine(_0x39f3c9){const _0x2e0c34=_0x518be6,_0x2142b7=(_0x39f3c9||'')['split'](/\r?\n/)[0xb*-0x301+0x44*-0x3+0x21d7][_0x2e0c34(0x2b2)]();let _0x52cce3=_0x2142b7[_0x2e0c34(0x1e6)](/^\/?lock\b/i,'')[_0x2e0c34(0x2b2)]();const {left:_0x42e892,gp:_0x4cbbb8}=splitRestForGp(_0x52cce3),_0x5be78a=(_0x42e892||'')['split'](',')[_0x2e0c34(0x249)](_0x8647c0=>_0x8647c0[_0x2e0c34(0x2b2)]())[_0x2e0c34(0x15f)](Boolean);return{'triggers':_0x5be78a,'gp':_0x4cbbb8};}function parseUnlockCommandOneLine(_0x3e99f5){const _0x4297ff=_0x518be6,_0x1e2840=(_0x3e99f5||'')[_0x4297ff(0x193)](/\r?\n/)[0x1f16+0x98a+-0x28a0][_0x4297ff(0x2b2)]();let _0x262e61=_0x1e2840[_0x4297ff(0x1e6)](/^\/?unlock\b/i,'')['trim']();const {left:_0x2f8488,gp:_0x520413}=splitRestForGp(_0x262e61),_0x486312=(_0x2f8488||'')[_0x4297ff(0x193)](',')[_0x4297ff(0x249)](_0x945cfa=>_0x945cfa['trim']())['filter'](Boolean);return{'parts':_0x486312,'gp':_0x520413};}function parseListCommandOneLine(_0x3c5553){const _0x2ca42a=_0x518be6,_0x369d47=(_0x3c5553||'')['split'](/\r?\n/)[-0xe25*0x1+-0x24d6+0x32fb][_0x2ca42a(0x2b2)]();let _0x213e44=_0x369d47[_0x2ca42a(0x1e6)](/^\/?listlock\b/i,'')['trim']();const {left:_0x4851a0,gp:_0x56e3d1}=splitRestForGp(_0x213e44),_0x4e1bef=_0x56e3d1||(_0x4851a0?_0x4851a0:null);return{'gp':_0x4e1bef};}function parseLockNotifyCommandOneLine(_0x37ae13){const _0x2a6050=_0x518be6,_0x1a2fb8=(_0x37ae13||'')[_0x2a6050(0x193)](/\r?\n/)[0x1d*0xf7+-0x2117+0x51c][_0x2a6050(0x2b2)]();let _0x205dba=_0x1a2fb8['replace'](/^\/?locknotify\b/i,'')['trim']();const {left:_0x396964,gp:_0x1acf63}=splitRestForGp(_0x205dba),_0x29099a=(_0x396964||'')[_0x2a6050(0x2f7)+'e']();let _0x1e3094=null;if(_0x29099a[_0x2a6050(0x1f3)]('on'))_0x1e3094='on';else{if(_0x29099a[_0x2a6050(0x1f3)]('off'))_0x1e3094=_0x2a6050(0x2e6);}return{'mode':_0x1e3094,'gp':_0x1acf63};}async function validateStoredRegexes(){const _0x591e58=_0x518be6;try{const _0x163527=await db[_0x591e58(0x272)](_0x591e58(0x18c)+_0x591e58(0x289)+_0x591e58(0x173)+_0x591e58(0x2be)+_0x591e58(0x176)+_0x591e58(0x2aa)+_0x591e58(0x103)+_0x591e58(0x222));for(const _0x257f50 of _0x163527||[]){try{new RegExp(_0x257f50[_0x591e58(0x2ba)]),await db[_0x591e58(0x1ca)](_0x591e58(0x297)+_0x591e58(0x24b)+'valid_rege'+_0x591e58(0x2b4)+_0x591e58(0x2cd),[_0x257f50['id']]);}catch(_0x292703){await db[_0x591e58(0x1ca)]('UPDATE\x20loc'+_0x591e58(0x24b)+_0x591e58(0x266)+'x\x20=\x200\x20WHER'+'E\x20id\x20=\x20?',[_0x257f50['id']]);}}}catch(_0x1e1bdb){warn(_0x591e58(0x186)+_0x591e58(0x169)+'dRegexes\x20e'+_0x591e58(0x26a)+(_0x1e1bdb?.[_0x591e58(0x1e1)]||_0x1e1bdb));}}async function findStoredMatchFromFindings(_0x28e85e=[]){const _0x376f70=_0x518be6;try{const _0x3a406a=await listSudo();if(!Array[_0x376f70(0x142)](_0x3a406a)||_0x3a406a[_0x376f70(0x2a0)]===-0x18d*0x17+0x862+0x1*0x1b49)return null;const _0xfe9a=new Set(_0x3a406a[_0x376f70(0x249)](String));for(const _0x41743c of _0x28e85e||[]){if(!_0x41743c||typeof _0x41743c[_0x376f70(0x15c)]!==_0x376f70(0x209))continue;const _0x42fda6=normalizeToJid(_0x41743c[_0x376f70(0x15c)]);if(_0x42fda6&&_0xfe9a[_0x376f70(0x2d1)](_0x42fda6))return _0x42fda6;if(_0xfe9a[_0x376f70(0x2d1)](_0x41743c[_0x376f70(0x15c)]))return _0x41743c[_0x376f70(0x15c)];const _0x6f9273=String(_0x41743c[_0x376f70(0x15c)])[_0x376f70(0x193)]('@')[-0x4*-0x6cd+-0x1*0xba1+0x9*-0x1bb][_0x376f70(0x193)](':')[0x530+0x1*-0x2516+0x1fe6];if(_0x6f9273)for(const _0xd9113e of _0x3a406a){const _0x1f26be=String(_0xd9113e)['split']('@')[0x896+0x218*-0x3+-0x24e];if(_0x1f26be&&_0x1f26be===_0x6f9273)return _0xd9113e;}}return null;}catch(_0x5c9930){return warn(_0x376f70(0x22f)+_0x376f70(0x279)+_0x376f70(0x1c4)+'ings\x20error'+':\x20'+(_0x5c9930?.[_0x376f70(0x1e1)]||_0x5c9930)),null;}}export async function initialize(_0x149f30){const _0x420f10=_0x518be6;if(!_0x149f30)throw new Error(_0x420f10(0x2c0)+'alize\x20requ'+_0x420f10(0x2c6)+_0x420f10(0x203));botRef=_0x149f30,setupSendApi();try{const _0x44e1b8=getConfig()||{},_0xb95420=_0x44e1b8&&_0x44e1b8[_0x420f10(0x22d)]?_0x44e1b8[_0x420f10(0x22d)]:{};CFG[_0x420f10(0x2c1)+'ABLED']=_0xb95420['DEFAULT_EN'+_0x420f10(0x27c)]??DEFAULTS['DEFAULT_EN'+_0x420f10(0x27c)],CFG[_0x420f10(0x108)+'NG']=_0xb95420[_0x420f10(0x108)+'NG']??DEFAULTS[_0x420f10(0x108)+'NG'],CFG[_0x420f10(0x265)+_0x420f10(0xfd)]=_0xb95420['WARNING_ME'+_0x420f10(0xfd)]??DEFAULTS[_0x420f10(0x265)+_0x420f10(0xfd)],CFG[_0x420f10(0x1c6)+_0x420f10(0x2eb)]=Number[_0x420f10(0x294)](_0xb95420[_0x420f10(0x1c6)+_0x420f10(0x2eb)])?_0xb95420[_0x420f10(0x1c6)+'L_MS']:DEFAULTS[_0x420f10(0x1c6)+_0x420f10(0x2eb)],CFG['PER_CHAT_Q'+_0x420f10(0x1f4)]=Number[_0x420f10(0x294)](_0xb95420[_0x420f10(0x236)+_0x420f10(0x1f4)])?_0xb95420[_0x420f10(0x236)+_0x420f10(0x1f4)]:DEFAULTS[_0x420f10(0x236)+'UEUE_LIMIT'],CFG[_0x420f10(0x10b)]=Number['isInteger'](_0xb95420[_0x420f10(0x10b)])?_0xb95420[_0x420f10(0x10b)]:DEFAULTS['BATCH_SIZE'],CFG['BATCH_DELA'+_0x420f10(0x124)]=Number[_0x420f10(0x294)](_0xb95420[_0x420f10(0x310)+_0x420f10(0x124)])?_0xb95420[_0x420f10(0x310)+'Y_MS']:DEFAULTS[_0x420f10(0x310)+_0x420f10(0x124)],CFG['GLOBAL_CON'+_0x420f10(0x148)]=Number['isInteger'](_0xb95420[_0x420f10(0x26f)+_0x420f10(0x148)])?_0xb95420[_0x420f10(0x26f)+_0x420f10(0x148)]:DEFAULTS[_0x420f10(0x26f)+'CURRENCY'],CFG[_0x420f10(0x216)+_0x420f10(0x187)+_0x420f10(0x2f3)]=!!_0xb95420[_0x420f10(0x216)+'REMOVE_DIA'+_0x420f10(0x2f3)];}catch(_0x4acbce){warn(_0x420f10(0x259)+'fig\x20load\x20f'+_0x420f10(0x21c)+_0x420f10(0x2bd)+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info(_0x420f10(0x29b)+_0x420f10(0x168)+_0x420f10(0x1ec)+_0x420f10(0x1cc)+_0x420f10(0x132)+_0x420f10(0x200));}catch(_0x20ce80){error(_0x20ce80,_0x420f10(0x29b)+_0x420f10(0x1df)+_0x420f10(0x239));throw _0x20ce80;}}export async function onMessage(_0x43b8bf){const _0x5e00ff=_0x518be6;try{if(!_0x43b8bf||!_0x43b8bf[_0x5e00ff(0x31e)]||!_0x43b8bf[_0x5e00ff(0x1e1)])return;const _0x25b05d=_0x43b8bf[_0x5e00ff(0x31e)]?.['id']||_0x43b8bf[_0x5e00ff(0x31e)]?.[_0x5e00ff(0x2f9)+'t']||(_0x43b8bf['key']?.['fromMe']?_0x5e00ff(0x2e5):''),_0xaa945e=String(_0x43b8bf['key'][_0x5e00ff(0x19c)]||'')+'::'+String(_0x25b05d||'');if(isProcessed(_0xaa945e))return;markProcessed(_0xaa945e);const _0x446f3d=extractTextFromMessage(_0x43b8bf);if(!_0x446f3d)return;const _0x1cae33=_0x43b8bf[_0x5e00ff(0x31e)][_0x5e00ff(0x19c)],_0x3dbe55=typeof _0x1cae33===_0x5e00ff(0x209)&&_0x1cae33['endsWith'](_0x5e00ff(0x30d)),_0x8cf373=_0x43b8bf[_0x5e00ff(0x31e)]?.[_0x5e00ff(0x2f9)+'t']||_0x43b8bf['key']?.[_0x5e00ff(0x2dc)]||_0x43b8bf[_0x5e00ff(0x31e)]?.[_0x5e00ff(0x19c)]||'',_0xf61fc9=String(_0x8cf373||'')[_0x5e00ff(0x193)]('@')[-0x18b*-0x13+-0x1bfc+-0x155];let _0x406003=![];if(_0x3dbe55)try{_0x406003=await isadmin(botRef,_0x43b8bf);}catch(_0x2ef64a){warn(_0x5e00ff(0x2fd)+_0x5e00ff(0x122)+'\x20failed'),_0x406003=![];}if(_0x43b8bf[_0x5e00ff(0x2e1)]){const _0x2cbe74=typeof _0x43b8bf[_0x5e00ff(0xff)]===_0x5e00ff(0x209)&&_0x43b8bf[_0x5e00ff(0xff)][_0x5e00ff(0x2b2)]()['length']?_0x43b8bf['text']['trim']():_0x446f3d[_0x5e00ff(0x2b2)](),_0x47a7da=(_0x2cbe74['split'](/\s+/)[0xb89+0x11*0x2d+-0x152*0xb]||'')[_0x5e00ff(0x2f7)+'e']();if(!_0x3dbe55){const _0x297a40=Boolean(_0x43b8bf[_0x5e00ff(0x31e)]['fromMe']);let _0x12373c=null;if(_0x297a40){const _0x18176b=getBotJid();_0x12373c=_0x18176b||_0x43b8bf[_0x5e00ff(0x31e)][_0x5e00ff(0x19c)];}else{let _0x565f98=![];try{_0x565f98=await isSudo(botRef,_0x43b8bf);}catch(_0x2ce8b9){_0x565f98=![];}if(!_0x565f98)return;const _0x17e831=userJidFromCtx(_0x43b8bf)||{'findings':[]},_0xcdb84a=await findStoredMatchFromFindings(_0x17e831[_0x5e00ff(0x2c5)]||[]);if(!_0xcdb84a)return;_0x12373c=_0xcdb84a;}if(!_0x12373c)return;if(_0x47a7da===_0x5e00ff(0x24e)){const {triggers:_0xa2d3d1,gp:_0x5dee2f}=parseLockCommandOneLine(_0x2cbe74||_0x446f3d);if(!_0xa2d3d1[_0x5e00ff(0x2a0)]){await sendText(_0x12373c,_0x5e00ff(0x2c9)+_0x5e00ff(0x2b8)+_0x5e00ff(0x118)+_0x5e00ff(0xea)+_0x5e00ff(0x10c)+_0x5e00ff(0x14b)+_0x5e00ff(0x25f));return;}if(!_0x5dee2f){await sendText(_0x12373c,_0x5e00ff(0x146)+_0x5e00ff(0x225)+_0x5e00ff(0x230)+'\x20Example:\x20'+_0x5e00ff(0x1fe)+_0x5e00ff(0x2f5)+_0x5e00ff(0x264));return;}let _0x1a723a=[];const _0x1459b9=_0x5dee2f[_0x5e00ff(0x2b2)]();if(_0x1459b9[_0x5e00ff(0x2f7)+'e']()===_0x5e00ff(0x272))_0x1a723a=await _0x7cdb74[_0x5e00ff(0x2fe)+_0x5e00ff(0x224)]();else{const _0x596873=await _0x7cdb74[_0x5e00ff(0x2ed)+'e'](_0x1459b9);if(_0x596873)_0x1a723a=[_0x596873];else{if(_0x1459b9[_0x5e00ff(0x1f3)]('@'))_0x1a723a=[_0x7cdb74[_0x5e00ff(0x26c)+'oUserJid'](_0x1459b9)];else{await sendText(_0x12373c,_0x5e00ff(0x2ef)+_0x5e00ff(0x296)+'id:\x20\x22'+_0x1459b9+'\x22.');return;}}}let _0x1e2541=0x13c7+0x1cf3+-0x30ba;for(const _0x5ec2dd of uniqArray(_0x1a723a)){for(const _0x17f97d of _0xa2d3d1){const _0x4880ca=await addLock(_0x5ec2dd,_0x17f97d,_0x8cf373);if(_0x4880ca)_0x1e2541++;}}await sendText(_0x12373c,'✔️\x20Saved\x20'+_0x1e2541+_0x5e00ff(0x276));return;}if(_0x47a7da===_0x5e00ff(0x208)){const {gp:_0x16aa4e}=parseListCommandOneLine(_0x2cbe74||_0x446f3d);if(!_0x16aa4e){await sendText(_0x12373c,_0x5e00ff(0x2c9)+_0x5e00ff(0x2b8)+_0x5e00ff(0x13b)+_0x5e00ff(0x2c4)+_0x5e00ff(0x246));return;}let _0x1ff3e8=[];if(_0x16aa4e[_0x5e00ff(0x2f7)+'e']()==='all')_0x1ff3e8=await _0x7cdb74[_0x5e00ff(0x2fe)+_0x5e00ff(0x224)]();else{const _0x1c88eb=await _0x7cdb74[_0x5e00ff(0x2ed)+'e'](_0x16aa4e);if(_0x1c88eb)_0x1ff3e8=[_0x1c88eb];else{if(_0x16aa4e[_0x5e00ff(0x1f3)]('@'))_0x1ff3e8=[_0x7cdb74['normalizeT'+_0x5e00ff(0x26b)](_0x16aa4e)];else{await sendText(_0x12373c,'❌\x20Unknown\x20'+_0x5e00ff(0x296)+'id:\x20\x22'+_0x16aa4e+'\x22.');return;}}}let _0x3d038c=[];for(const _0x348adf of _0x1ff3e8){const _0x29d1d3=await listLocksForChat(_0x348adf);for(const _0x260494 of _0x29d1d3)_0x3d038c[_0x5e00ff(0x256)]({'chatJid':_0x348adf,..._0x260494});}await sendText(_0x12373c,_0x5e00ff(0x275)+_0x3d038c['length']+(_0x5e00ff(0x2a4)+'ded\x20for\x20re'+_0x5e00ff(0x120)+_0x5e00ff(0x274)));if(!_0x3d038c[_0x5e00ff(0x2a0)])return;let _0x17b9a0='';for(const _0x159b94 of _0x3d038c){const _0x575446=_0x159b94['created_at']?new Date(_0x159b94[_0x5e00ff(0x1a3)]*(-0xb79+-0x2*0x6d3+0x1d07))[_0x5e00ff(0x1b8)+'g']()[_0x5e00ff(0x2ca)](-0xc39+-0x9c4+0x15fd,-0xd2*-0x18+-0xc9*0x7+-0xe27):'',_0x3de8f2=_0x159b94['type']===_0x5e00ff(0x228)?'⦿':_0x159b94['type']===_0x5e00ff(0x20d)?'✶':'',_0x2c2b68=_0x159b94['type']===_0x5e00ff(0x228)?_0x5e00ff(0x2f8)+_0x159b94[_0x5e00ff(0x2ba)]:_0x159b94[_0x5e00ff(0x2ba)],_0x31241d=_0x159b94[_0x5e00ff(0x151)]===_0x5e00ff(0x228)&&_0x159b94[_0x5e00ff(0x30b)+_0x5e00ff(0x254)]===0xaa2+-0xf9+-0x9a9?_0x5e00ff(0x2da)+_0x5e00ff(0x1c1):'',_0x385376=_0x159b94[_0x5e00ff(0x231)]+':'+_0x159b94['id']+'.\x20'+(_0x3de8f2?_0x3de8f2+'\x20':'')+_0x2c2b68+_0x31241d+'\x20'+(_0x575446?'('+_0x575446+')':'')+'\x0a';(_0x17b9a0+_0x385376)[_0x5e00ff(0x2a0)]>0xf65+-0x3*-0xa2e+0x1*-0x2813&&(await sendText(_0x12373c,_0x17b9a0[_0x5e00ff(0x2b2)]()),_0x17b9a0=''),_0x17b9a0+=_0x385376;}if(_0x17b9a0['trim']())await sendText(_0x12373c,_0x17b9a0[_0x5e00ff(0x2b2)]());return;}if([_0x5e00ff(0x149),'dellock','delock',_0x5e00ff(0x278),_0x5e00ff(0x1f1)][_0x5e00ff(0x1f3)](_0x47a7da)){const {parts:_0x375751,gp:_0x28bbc3}=parseUnlockCommandOneLine(_0x2cbe74||_0x446f3d);if(!_0x375751?.[_0x5e00ff(0x2a0)]){await sendText(_0x12373c,_0x5e00ff(0x2c9)+_0x5e00ff(0x2b8)+_0x5e00ff(0x2c3)+_0x5e00ff(0xe1)+_0x5e00ff(0x21a)+_0x5e00ff(0xe0)+_0x5e00ff(0x277)+_0x5e00ff(0x177));return;}if(!_0x28bbc3){await sendText(_0x12373c,'❌\x20PM:\x20incl'+_0x5e00ff(0x225)+_0x5e00ff(0x230)+_0x5e00ff(0x106)+_0x5e00ff(0x1be)+_0x5e00ff(0x155));return;}let _0x59246e=[];const _0x525812=_0x28bbc3[_0x5e00ff(0x2b2)]();if(_0x525812['toLowerCas'+'e']()===_0x5e00ff(0x272))_0x59246e=await _0x7cdb74[_0x5e00ff(0x2fe)+_0x5e00ff(0x224)]();else{const _0x15683f=await _0x7cdb74[_0x5e00ff(0x2ed)+'e'](_0x525812);if(_0x15683f)_0x59246e=[_0x15683f];else{if(_0x525812[_0x5e00ff(0x1f3)]('@'))_0x59246e=[_0x7cdb74[_0x5e00ff(0x26c)+'oUserJid'](_0x525812)];else{await sendText(_0x12373c,'❌\x20Unknown\x20'+_0x5e00ff(0x296)+_0x5e00ff(0x269)+_0x525812+'\x22.');return;}}}let _0x95c605=-0x1e39*0x1+0xa6f*0x2+0x95b*0x1;for(const _0x2377de of _0x375751){if(!_0x2377de)continue;if(/^\d+$/[_0x5e00ff(0xdf)](_0x2377de)){for(const _0x119d6a of _0x59246e){const _0xea6b63=await deleteLockById(_0x119d6a,_0x2377de);if(_0xea6b63)_0x95c605+=_0xea6b63;}continue;}for(const _0x5b7467 of _0x59246e){const _0x4a3526=await deleteLockByPhrase(_0x5b7467,_0x2377de);if(_0x4a3526)_0x95c605+=_0x4a3526;}}await sendText(_0x12373c,_0x5e00ff(0x242)+_0x95c605+'/'+_0x375751[_0x5e00ff(0x2a0)]+_0x5e00ff(0x276));return;}if(_0x47a7da===_0x5e00ff(0x19e)||_0x47a7da===_0x5e00ff(0x30a)||_0x47a7da===_0x5e00ff(0xf0)){const _0x2d0ac8=(_0x2cbe74||_0x446f3d||'')[_0x5e00ff(0x193)](/\r?\n/)[-0x159*0x1+0x12dc*-0x2+-0x89*-0x49]['trim'](),_0x5d44bf=_0x2d0ac8[_0x5e00ff(0x1e6)](/^\/?(unlockall|delall|clearlocks)\b/i,'')[_0x5e00ff(0x2b2)](),{left:_0x5f4943,gp:_0x1566ae}=splitRestForGp(_0x5d44bf);if(!_0x1566ae){await sendText(_0x12373c,'❌\x20PM:\x20one-'+_0x5e00ff(0x2b8)+_0x5e00ff(0x302)+_0x5e00ff(0x28d)+_0x5e00ff(0x2db));return;}let _0x50f445=[];const _0x3a7606=_0x1566ae[_0x5e00ff(0x2b2)]();if(_0x3a7606[_0x5e00ff(0x2f7)+'e']()==='all')_0x50f445=await _0x7cdb74[_0x5e00ff(0x2fe)+_0x5e00ff(0x224)]();else{const _0x41d110=await _0x7cdb74[_0x5e00ff(0x2ed)+'e'](_0x3a7606);if(_0x41d110)_0x50f445=[_0x41d110];else{if(_0x3a7606[_0x5e00ff(0x1f3)]('@'))_0x50f445=[_0x7cdb74['normalizeT'+'oUserJid'](_0x3a7606)];else{await sendText(_0x12373c,'❌\x20Unknown\x20'+_0x5e00ff(0x296)+_0x5e00ff(0x269)+_0x3a7606+'\x22.');return;}}}let _0x385281=0xc2+0xb55*0x3+-0x22c1;for(const _0x229d31 of _0x50f445){const _0x105666=await deleteAllLocksForChat(_0x229d31);_0x385281+=_0x105666||0xce7*-0x3+0x11*-0x7d+0x2f02;}await sendText(_0x12373c,_0x5e00ff(0x242)+_0x385281+_0x5e00ff(0x276));return;}if(_0x47a7da===_0x5e00ff(0x2d8)){const _0x3086f7=parseLockNotifyCommandOneLine(_0x2cbe74||_0x446f3d),{mode:_0x492398,gp:_0x25ddbe}=_0x3086f7;if(!_0x25ddbe){await sendText(_0x12373c,_0x5e00ff(0x110)+'ine\x20usage:'+_0x5e00ff(0x1ef)+_0x5e00ff(0x2a7)+'\x20gp:<alias'+_0x5e00ff(0x24d)+_0x5e00ff(0x189)+'tatus:\x20loc'+_0x5e00ff(0x314)+_0x5e00ff(0x244)+'d|all>');return;}let _0x2505fc=[];const _0x40672b=_0x25ddbe[_0x5e00ff(0x2b2)]();if(_0x40672b[_0x5e00ff(0x2f7)+'e']()===_0x5e00ff(0x272))_0x2505fc=await _0x7cdb74[_0x5e00ff(0x2fe)+_0x5e00ff(0x224)]();else{const _0x39df04=await _0x7cdb74[_0x5e00ff(0x2ed)+'e'](_0x40672b);if(_0x39df04)_0x2505fc=[_0x39df04];else{if(_0x40672b[_0x5e00ff(0x1f3)]('@'))_0x2505fc=[_0x7cdb74[_0x5e00ff(0x26c)+_0x5e00ff(0x26b)](_0x40672b)];else{await sendText(_0x12373c,'❌\x20Unknown\x20'+_0x5e00ff(0x296)+'id:\x20\x22'+_0x40672b+'\x22.');return;}}}if(!_0x492398){const _0x40bcb6=[];for(const _0x433461 of uniqArray(_0x2505fc)){const _0xd2242=await getLockNotify(_0x433461)[_0x5e00ff(0x1af)](()=>0x2135*0x1+0x1*0x1623+-0x3758);_0x40bcb6[_0x5e00ff(0x256)](_0x433461+':\x20'+(_0xd2242?'ON':_0x5e00ff(0x1c0)));}await sendText(_0x12373c,_0x5e00ff(0x250)+_0x5e00ff(0x196)+_0x5e00ff(0x181)+_0x40bcb6[_0x5e00ff(0x24c)]('\x0a'));return;}let _0x51214f=0xe2e+0x8ab+-0x16d9*0x1;for(const _0x4e5248 of uniqArray(_0x2505fc)){const _0x156d0e=await setLockNotify(_0x4e5248,_0x492398==='on');if(_0x156d0e)_0x51214f++;}await sendText(_0x12373c,_0x5e00ff(0x2ee)+'fy\x20'+_0x492398+_0x5e00ff(0x16a)+_0x51214f+'/'+_0x2505fc[_0x5e00ff(0x2a0)]+(_0x5e00ff(0x175)+'.'));return;}return;}if(_0x3dbe55){if(!_0x406003)return;const _0x4337f7=_0x1cae33,_0x3312a0=await getDefault(_0xf61fc9)['catch'](()=>null);if(!_0x3312a0||Array['isArray'](_0x3312a0)&&_0x3312a0[_0x5e00ff(0x2a0)]===0x3*0x311+-0x211c+-0x17e9*-0x1)return;const _0x556705=Array[_0x5e00ff(0x142)](_0x3312a0)?_0x3312a0:[_0x3312a0];let _0x34a860=[];for(const _0x410c21 of _0x556705){try{const _0x4bc531=await getConnection(_0x410c21)['catch'](()=>null);if(Array[_0x5e00ff(0x142)](_0x4bc531))_0x34a860[_0x5e00ff(0x256)](..._0x4bc531);else{if(_0x4bc531)_0x34a860[_0x5e00ff(0x256)](String(_0x4bc531));}}catch(_0x25eacc){warn(_0x5e00ff(0x318)+'olving\x20con'+_0x5e00ff(0x17c)+_0x410c21+_0x5e00ff(0x188)+(_0x25eacc?.['message']||_0x25eacc));}}_0x34a860=uniqArray(_0x34a860);if(!_0x34a860['length']){await sendText(_0x4337f7,_0x5e00ff(0x283)+_0x5e00ff(0x1d4)+'your\x20defau'+_0x5e00ff(0x1c2)+'ion(s):\x20'+_0x556705[_0x5e00ff(0x24c)](',\x20')+(_0x5e00ff(0x154)+_0x5e00ff(0x27d)+'efault\x20val'+_0x5e00ff(0x1b3)));return;}if(_0x47a7da===_0x5e00ff(0x24e)){const {triggers:_0x252b09}=parseLockCommandOneLine(_0x2cbe74||_0x446f3d);if(!_0x252b09[_0x5e00ff(0x2a0)]){await sendText(_0x4337f7,_0x5e00ff(0x2f0)+_0x5e00ff(0x1d0)+':\x20lock\x20tri'+_0x5e00ff(0x31f)+_0x5e00ff(0x27f));return;}let _0x2a240e=-0x3ac+-0x2083+0x242f;for(const _0x8b5607 of _0x34a860){let _0xd6e4ff=0x35*0x9d+0x110c+-0x318d;for(const _0x3a1a72 of _0x252b09){const _0x3607aa=await addLock(_0x8b5607,_0x3a1a72,_0x8cf373);if(_0x3607aa)_0xd6e4ff++;}_0x2a240e+=_0xd6e4ff;}await sendText(_0x4337f7,_0x5e00ff(0x107)+_0x2a240e+'/'+_0x252b09['length']*_0x34a860['length']+(_0x5e00ff(0x126)+'ies\x20to\x20you'+_0x5e00ff(0x14c)+_0x5e00ff(0x21b)+_0x5e00ff(0x12f))+_0x34a860[_0x5e00ff(0x24c)](',\x20'));return;}if(_0x47a7da===_0x5e00ff(0x208)){const _0xdb34ec=[];for(const _0x522bf8 of _0x34a860){const _0x54cac4=await listLocksForChat(_0x522bf8);for(const _0x4615e3 of _0x54cac4)_0xdb34ec['push']({'chatJid':_0x522bf8,..._0x4615e3});}await sendText(_0x4337f7,_0x5e00ff(0x250)+'oaded\x20'+_0xdb34ec[_0x5e00ff(0x2a0)]+(_0x5e00ff(0x178)+'\x20your\x20defa'+'ult\x20connec'+_0x5e00ff(0x13d))+_0x34a860[_0x5e00ff(0x24c)](',\x20'));if(!_0xdb34ec[_0x5e00ff(0x2a0)])return;let _0x27b92d='';for(const _0x3f3b38 of _0xdb34ec){const _0x30b924=_0x3f3b38[_0x5e00ff(0x1a3)]?new Date(_0x3f3b38['created_at']*(0x9a*-0x20+-0x10*0x9c+-0x9c*-0x36))[_0x5e00ff(0x1b8)+'g']()[_0x5e00ff(0x2ca)](0x1fc5+0xef*-0x3+-0x1cf8,-0x1*-0x752+-0x6*-0x174+-0x80*0x20):'',_0x16998e=_0x3f3b38[_0x5e00ff(0x151)]===_0x5e00ff(0x228)?'⦿':_0x3f3b38[_0x5e00ff(0x151)]===_0x5e00ff(0x20d)?'✶':'',_0x381814=_0x3f3b38[_0x5e00ff(0x151)]==='regex'?_0x5e00ff(0x2f8)+_0x3f3b38[_0x5e00ff(0x2ba)]:_0x3f3b38[_0x5e00ff(0x2ba)],_0x440484=_0x3f3b38[_0x5e00ff(0x151)]==='regex'&&_0x3f3b38[_0x5e00ff(0x30b)+_0x5e00ff(0x254)]===-0x3d*0x9b+0x1d7*0x1+-0x8c6*-0x4?_0x5e00ff(0x2da)+_0x5e00ff(0x1c1):'',_0x11f5ef=_0x3f3b38['chatJid']+':'+_0x3f3b38['id']+'.\x20'+(_0x16998e?_0x16998e+'\x20':'')+_0x381814+_0x440484+'\x20'+(_0x30b924?'('+_0x30b924+')':'')+'\x0a';(_0x27b92d+_0x11f5ef)[_0x5e00ff(0x2a0)]>0xbf*0x5+0x145e+-0x123d&&(await sendText(_0x4337f7,_0x27b92d[_0x5e00ff(0x2b2)]()),_0x27b92d=''),_0x27b92d+=_0x11f5ef;}if(_0x27b92d[_0x5e00ff(0x2b2)]())await sendText(_0x4337f7,_0x27b92d[_0x5e00ff(0x2b2)]());return;}if([_0x5e00ff(0x149),_0x5e00ff(0x164),_0x5e00ff(0x1f1),'unlocklock',_0x5e00ff(0x1f1)][_0x5e00ff(0x1f3)](_0x47a7da)){const {parts:_0x877cc5}=parseUnlockCommandOneLine(_0x2cbe74||_0x446f3d);if(!_0x877cc5?.[_0x5e00ff(0x2a0)]){await sendText(_0x4337f7,_0x5e00ff(0x2f0)+'roup-only)'+_0x5e00ff(0x1ee)+_0x5e00ff(0x29d)+_0x5e00ff(0x143)+_0x5e00ff(0x12d));return;}const _0x19847d=new Map();for(const _0x24b892 of _0x34a860){const _0x58f495=await listLocksForChat(_0x24b892);_0x19847d[_0x5e00ff(0x1a5)](_0x24b892,_0x58f495||[]);}let _0x1240ea=0xc1f+-0x1*-0xa4f+0x166e*-0x1;for(const _0x53afaf of _0x877cc5){if(!_0x53afaf)continue;if(/^\d+$/[_0x5e00ff(0xdf)](_0x53afaf)){for(const [_0x50c0d1,_0x4c869f]of _0x19847d[_0x5e00ff(0x312)]()){if(_0x4c869f[_0x5e00ff(0x227)](_0x577031=>String(_0x577031['id'])===_0x53afaf)){const _0x24aba2=await deleteLockById(_0x50c0d1,_0x53afaf);if(_0x24aba2)_0x1240ea+=_0x24aba2;}}continue;}for(const _0x302da0 of _0x34a860){const _0x5c8740=await deleteLockByPhrase(_0x302da0,_0x53afaf);if(_0x5c8740)_0x1240ea+=_0x5c8740;}}await sendText(_0x4337f7,_0x5e00ff(0x242)+_0x1240ea+'/'+_0x877cc5[_0x5e00ff(0x2a0)]+('\x20lock(s)\x20f'+_0x5e00ff(0x1dc)+_0x5e00ff(0x23b)+_0x5e00ff(0x15a)+':\x20')+_0x34a860[_0x5e00ff(0x24c)](',\x20'));return;}if(_0x47a7da===_0x5e00ff(0x19e)||_0x47a7da==='delall'||_0x47a7da===_0x5e00ff(0xf0)){try{let _0x701f77=-0x1f3*-0xc+-0x238a+0xc26;for(const _0x3f1f05 of _0x34a860){const _0x46cdd3=await deleteAllLocksForChat(_0x3f1f05);_0x701f77+=_0x46cdd3||-0x2*0x8c7+0xc95+0x4f9;}await sendText(_0x4337f7,_0x5e00ff(0x242)+_0x701f77+('\x20lock(s)\x20f'+_0x5e00ff(0x1dc)+_0x5e00ff(0x23b)+_0x5e00ff(0x15a)+':\x20')+_0x34a860[_0x5e00ff(0x24c)](',\x20'));}catch(_0x3ae967){warn(_0x5e00ff(0x2b7)+_0x5e00ff(0x2a3)+_0x5e00ff(0x288)+_0x34a860[_0x5e00ff(0x24c)](',\x20')+':\x20'+(_0x3ae967?.[_0x5e00ff(0x1e1)]||_0x3ae967)),await sendText(_0x4337f7,_0x5e00ff(0x1bc)+_0x5e00ff(0x305)+'ocks\x20for\x20y'+_0x5e00ff(0x17d)+_0x5e00ff(0x2ae)+_0x5e00ff(0x258)+_0x34a860[_0x5e00ff(0x24c)](',\x20'));}return;}if(_0x47a7da==='locknotify'){const _0x22b04a=(_0x2cbe74||_0x446f3d||'')[_0x5e00ff(0x193)](/\r?\n/)[0x759+-0xc7a+0xd*0x65][_0x5e00ff(0x2b2)](),{left:_0x5b5ba6}=splitRestForGp(_0x22b04a['replace'](/^\/?locknotify\b/i,'')[_0x5e00ff(0x2b2)]()),_0x51561c=(_0x5b5ba6||'')['toLowerCas'+'e']();if(!_0x51561c[_0x5e00ff(0x1f3)]('on')&&!_0x51561c[_0x5e00ff(0x1f3)](_0x5e00ff(0x2e6))){await sendText(_0x4337f7,_0x5e00ff(0x2f0)+_0x5e00ff(0x1d0)+_0x5e00ff(0x12a)+'fy\x20on|off\x0a'+_0x5e00ff(0xec)+_0x5e00ff(0x121)+'tification'+_0x5e00ff(0x238)+_0x5e00ff(0xde)+_0x5e00ff(0x104)+_0x5e00ff(0x1b7));return;}const _0x13b37c=_0x51561c[_0x5e00ff(0x1f3)]('on')?'on':'off';let _0x10ba3f=0xa6f*-0x1+0x2062+-0x751*0x3;for(const _0x22e8e7 of _0x34a860){const _0x17cb75=await setLockNotify(_0x22e8e7,_0x13b37c==='on');if(_0x17cb75)_0x10ba3f++;}await sendText(_0x4337f7,_0x5e00ff(0x2ee)+_0x5e00ff(0x221)+_0x13b37c+_0x5e00ff(0x16a)+_0x10ba3f+'/'+_0x34a860[_0x5e00ff(0x2a0)]+(_0x5e00ff(0x140)+_0x5e00ff(0x104)+_0x5e00ff(0x1b7)));return;}return;}}if(_0x3dbe55){if(!CFG[_0x5e00ff(0x2c1)+'ABLED'])return;if(_0x43b8bf[_0x5e00ff(0x31e)]['fromMe'])return;if(_0x406003)return;const _0x210daf=_0x1cae33,_0x1f0994=extractTextFromMessage(_0x43b8bf);if(!_0x1f0994)return;const _0x2f4720=normalizeForMatch(String(_0x1f0994||''))[_0x5e00ff(0x2f7)+'e'](),_0x402003=await listLocksForChat(_0x210daf);if(!_0x402003||!_0x402003['length'])return;const _0x415ebb=_0x402003['filter'](_0x2e3dc0=>!_0x2e3dc0[_0x5e00ff(0x151)]||_0x2e3dc0[_0x5e00ff(0x151)]==='normal'),_0x15e693=_0x402003[_0x5e00ff(0x15f)](_0x38ee4e=>_0x38ee4e[_0x5e00ff(0x151)]===_0x5e00ff(0x20d)),_0xdfa6e3=_0x402003[_0x5e00ff(0x15f)](_0x260e8b=>_0x260e8b[_0x5e00ff(0x151)]===_0x5e00ff(0x228)||_0x260e8b[_0x5e00ff(0x151)]==='invalid_re'+_0x5e00ff(0x1a9)),_0x30aca8=new Set(),_0x1d7e1e=new Set();if(_0x415ebb[_0x5e00ff(0x2a0)]>-0x2e*-0x2f+-0x619*0x2+-0x18*-0x28){const _0x26022e=_0x415ebb['map'](_0x2e2462=>normalizeForMatch(String(_0x2e2462[_0x5e00ff(0x2ba)]||'')))[_0x5e00ff(0x15f)](Boolean),_0x537f13=_0x26022e[_0x5e00ff(0x24c)]('\x00');let _0x38698e;const _0x217088=ahoCache[_0x5e00ff(0x2e0)](_0x210daf);if(_0x217088&&_0x217088[_0x5e00ff(0x2e4)+'Keywords']===_0x537f13&&_0x217088[_0x5e00ff(0x2de)])_0x38698e=_0x217088[_0x5e00ff(0x2de)];else try{_0x38698e=new AhoCorasick(_0x26022e),ahoCache['set'](_0x210daf,{'serializedKeywords':_0x537f13,'aho':_0x38698e});}catch(_0x123208){warn(_0x5e00ff(0x2c2)+_0x5e00ff(0x207)+_0x5e00ff(0x1c9)+_0x5e00ff(0x117)+_0x210daf+':\x20'+(_0x123208?.[_0x5e00ff(0x1e1)]||_0x123208)),_0x38698e=null;}if(_0x38698e)try{const _0x43d70a=_0x38698e['search'](_0x2f4720);for(const _0x239395 of _0x43d70a){const _0x1d0f73=_0x239395[_0x5e00ff(0x20e)],_0x2bd304=_0x239395[_0x5e00ff(0xf8)],_0xaea9bc=_0x2bd304+_0x1d0f73['length'],_0xe1ffb7=_0x2bd304===0x77f+0x20df+0x285e*-0x1||!/\w/[_0x5e00ff(0xdf)](_0x2f4720[_0x2bd304-(0x1*0xed1+0x1*-0x1f75+0x10a5)]),_0x55d9ec=_0xaea9bc===_0x2f4720[_0x5e00ff(0x2a0)]||!/\w/['test'](_0x2f4720[_0xaea9bc]);if(_0xe1ffb7&&_0x55d9ec)for(const _0x15d1f3 of _0x415ebb){const _0x21baf2=normalizeForMatch(String(_0x15d1f3[_0x5e00ff(0x2ba)]||''));if(_0x21baf2===_0x1d0f73)try{const _0x212c2c=wholeWordRegexForPhrase(_0x21baf2);_0x212c2c[_0x5e00ff(0xdf)](_0x2f4720)&&(_0x30aca8[_0x5e00ff(0x17e)](_0x15d1f3['id']),_0x1d7e1e[_0x5e00ff(0x17e)](_0x15d1f3[_0x5e00ff(0x2ba)]));}catch(_0x21b557){_0x30aca8[_0x5e00ff(0x17e)](_0x15d1f3['id']),_0x1d7e1e['add'](_0x15d1f3[_0x5e00ff(0x2ba)]);}}else for(const _0x5a0a44 of _0x415ebb){try{const _0x1300e0=wholeWordRegexForPhrase(normalizeForMatch(String(_0x5a0a44[_0x5e00ff(0x2ba)]||'')));_0x1300e0[_0x5e00ff(0xdf)](_0x2f4720)&&(_0x30aca8[_0x5e00ff(0x17e)](_0x5a0a44['id']),_0x1d7e1e[_0x5e00ff(0x17e)](_0x5a0a44[_0x5e00ff(0x2ba)]));}catch(_0x55e017){}}}}catch(_0x49889b){warn(_0x5e00ff(0x2c2)+_0x5e00ff(0x217)+_0x5e00ff(0x162)+_0x5e00ff(0x133)+(_0x49889b?.[_0x5e00ff(0x1e1)]||_0x49889b));for(const _0x3d6439 of _0x415ebb){try{const _0xd86dd6=wholeWordRegexForPhrase(normalizeForMatch(String(_0x3d6439[_0x5e00ff(0x2ba)]||'')));_0xd86dd6[_0x5e00ff(0xdf)](_0x2f4720)&&(_0x30aca8[_0x5e00ff(0x17e)](_0x3d6439['id']),_0x1d7e1e['add'](_0x3d6439['phrase']));}catch(_0x1bf7ff){}}}else for(const _0x25a806 of _0x415ebb){try{const _0x166839=wholeWordRegexForPhrase(normalizeForMatch(String(_0x25a806['phrase']||'')));_0x166839[_0x5e00ff(0xdf)](_0x2f4720)&&(_0x30aca8['add'](_0x25a806['id']),_0x1d7e1e['add'](_0x25a806[_0x5e00ff(0x2ba)]));}catch(_0x4c2fab){}}}if(_0x15e693[_0x5e00ff(0x2a0)]>-0x8d3+0x195a+-0x1087*0x1)for(const _0x255af7 of _0x15e693){try{const _0xfdae3=wildcardToRegex(String(_0x255af7[_0x5e00ff(0x2ba)]||''));_0xfdae3[_0x5e00ff(0xdf)](_0x2f4720)&&(_0x30aca8['add'](_0x255af7['id']),_0x1d7e1e[_0x5e00ff(0x17e)](_0x255af7[_0x5e00ff(0x2ba)]));}catch(_0x4b7d2a){warn('[lock]\x20inv'+_0x5e00ff(0x1c7)+_0x5e00ff(0x2d3)+'='+_0x255af7['id']+_0x5e00ff(0x135)+_0x255af7['phrase']+_0x5e00ff(0x1bd)+(_0x4b7d2a?.[_0x5e00ff(0x1e1)]||_0x4b7d2a));}}if(_0xdfa6e3[_0x5e00ff(0x2a0)]>0x24df+0x1*-0x778+-0x1d67)for(const _0x57d74a of _0xdfa6e3){try{if(_0x57d74a[_0x5e00ff(0x30b)+_0x5e00ff(0x254)]===0x20*-0xe3+0x1d46+-0xe6*0x1){warn(_0x5e00ff(0x29e)+_0x5e00ff(0x18d)+'lid\x20stored'+_0x5e00ff(0x163)+_0x57d74a['id']+_0x5e00ff(0x135)+_0x57d74a[_0x5e00ff(0x2ba)]+'\x22');continue;}const _0x4f9b0d=new RegExp(_0x57d74a[_0x5e00ff(0x2ba)],'iu');_0x4f9b0d['test'](_0x2f4720)&&(_0x30aca8[_0x5e00ff(0x17e)](_0x57d74a['id']),_0x1d7e1e[_0x5e00ff(0x17e)](_0x5e00ff(0x2f8)+_0x57d74a[_0x5e00ff(0x2ba)]));}catch(_0x108de2){warn(_0x5e00ff(0xdb)+_0x5e00ff(0x284)+_0x5e00ff(0x1ea)+'r\x20id='+_0x57d74a['id']+_0x5e00ff(0x135)+_0x57d74a[_0x5e00ff(0x2ba)]+_0x5e00ff(0x1bd)+(_0x108de2?.[_0x5e00ff(0x1e1)]||_0x108de2));try{await db[_0x5e00ff(0x1ca)](_0x5e00ff(0x297)+_0x5e00ff(0x24b)+'valid_rege'+_0x5e00ff(0x1cf)+_0x5e00ff(0x2cd),[_0x57d74a['id']]);}catch(_0x1740d4){}}}if(_0x30aca8[_0x5e00ff(0x1a0)]>-0xdf*0x1f+0xc4b+0x7*0x21a)try{try{const _0x44dbe6=await getLockNotify(_0x210daf)[_0x5e00ff(0x1af)](()=>0xfd*-0x24+0x110e+0x1286);if(_0x44dbe6)try{const _0x3c8462=await db[_0x5e00ff(0x2e0)](_0x5e00ff(0x190)+_0x5e00ff(0x11d)+'lete_prefs'+_0x5e00ff(0x1e2)+'\x20=\x20\x27target'+_0x5e00ff(0x25c));let _0x243638=_0x3c8462?.[_0x5e00ff(0x1fc)]||null;if(!_0x243638){const _0x2ca70e=getBotJid();_0x243638=_0x2ca70e||null;}if(_0x243638){const _0x14f3a4=Array[_0x5e00ff(0x2dc)](_0x1d7e1e)['slice'](-0x449*-0x7+-0x191e+0x4e1*-0x1,-0x1*-0x15a5+-0x2a6*0x7+0x315*-0x1)['join'](',\x20'),_0x50de4a=_0xf61fc9||String(_0x8cf373||'')[_0x5e00ff(0x193)]('@')[0x3b*0x89+-0x61a+0x1979*-0x1]||'unknown',_0xb863e7=String(_0x1f0994||'')[_0x5e00ff(0x2b2)](),_0x2273ee=_0x5e00ff(0x16c)+'ch\x20in\x20'+_0x210daf+_0x5e00ff(0x1db)+_0x50de4a+'\x0aMatched:\x20'+_0x14f3a4+_0x5e00ff(0x237)+_0xb863e7;await sendText(_0x243638,_0x2273ee,_0x8cf373?[_0x8cf373]:[]);}}catch(_0x5d12b3){warn(_0x5e00ff(0x267)+_0x5e00ff(0xed)+_0x5e00ff(0x21f)+_0x5e00ff(0x25e)+':\x20'+(_0x5d12b3?.[_0x5e00ff(0x1e1)]||_0x5d12b3));}}catch(_0xa067a8){warn('[lock]\x20loc'+_0x5e00ff(0x257)+_0x5e00ff(0x123)+':\x20'+(_0xa067a8?.[_0x5e00ff(0x1e1)]||_0xa067a8));}enqueueDeletion(_0x43b8bf);for(const _0x2642bf of _0x30aca8){try{await db[_0x5e00ff(0x1ca)](_0x5e00ff(0x297)+_0x5e00ff(0x2b3)+_0x5e00ff(0xd9)+_0x5e00ff(0x2b6)+_0x5e00ff(0x292)+'d\x20=\x20?',[_0x2642bf]);}catch(_0xfa863a){}}}catch(_0x344044){warn(_0x5e00ff(0x191)+_0x5e00ff(0x11a)+_0x5e00ff(0x1e7)+(_0x344044?.[_0x5e00ff(0x1e1)]||_0x344044));}}}catch(_0x300843){error(_0x300843,'[lock]\x20han'+_0x5e00ff(0x22c)+':\x20'+(_0x300843?.[_0x5e00ff(0x1e1)]||_0x300843));}}export async function cleanup(){const _0x5a9ebe=_0x518be6;shuttingDown=!![];for(const _0x48ac50 of processedMessageKeys[_0x5a9ebe(0x2ac)]())try{clearTimeout(_0x48ac50);}catch(_0x3c1b0f){}processedMessageKeys[_0x5a9ebe(0x1f8)](),perChatQueue[_0x5a9ebe(0x1f8)](),perChatProcessing[_0x5a9ebe(0x1f8)](),activeChats=0x11b6+-0xeca+0x11*-0x2c,botRef=null,sendApi=null,ahoCache[_0x5a9ebe(0x1f8)](),info('[lock]\x20cle'+_0x5a9ebe(0x290));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};