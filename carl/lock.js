function _0x16b1(){const _0x900787=['nection\x20','7438000HRlzVB','get','gex','cks\x20table','tialized\x20(','exec','lready\x20can','test',',\x20is_valid','\x20gp:<alias','NORMALIZE_','ble','ed\x20(fallba','ted_at,\x0a\x20\x20','split','string','SEND_WARNI','earch\x20fail','\x20\x20UNIQUE(c','hrase,\x20typ','off','ex)\x20VALUES','To\x20query\x20s','hrase)\x0a\x20\x20\x20','O\x20lock_pre','type','d\x20locknoti','[lock]\x20loc','\x20default\x20c','ailed:\x20','catch','videoMessa','filter','2.3.2','ER\x20DEFAULT','_valid_reg','UEUE_LIMIT','nonical)','unlock','[lock]\x20set','s_valid_re','✔️\x20[lock]\x20','BATCH_DELA','ert\x20failed','uded.is_va','37916WcGpZF','sForChat\x20e','max','INSERT\x20INT','ROM\x20locks','NFKC','gp\x20alias/j','chatJid','efault\x20con','[lock]\x20unl','se,comma-s','\x20\x20is_valid','gger1,trig','\x20ON\x20CONFLI','unlocklock','user','\x20@\x20','ue(s).','isCommand','push','FROM\x20locks','_count\x20=\x20h','unlock\x201,2','replace','ng\x20default','\x20id\x20=\x20?','toLowerCas','ed_by,\x20cre','TEGER\x20DEFA','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','lumn\x20to\x20lo','unlockall','\x22\x20@\x20','Y_MS','4GVjqaO','lid\x20regex\x20','hat\x20error\x20','is_valid_r','LT\x20\x27normal','\x0aMatched:\x20','ires\x20bot\x20i','body','EGER\x20DEFAU','fatal','name','created_at','BATCH_SIZE','\x20(type=','regex:','o\x20delete\x20l','TEXT\x20NOT\x20N','ck):\x20','ed\x20to\x20','❌\x20PM:\x20one-','✔️\x20Deleted\x20','\x20(?,\x20?,\x20?,','_by,\x20creat','resolveNam','ENT','O\x20locks\x20(c','[lock]\x20add','\x20hit_count','id-or-phra','\x20\x20\x20\x20\x20\x20\x20id\x20','trim','findings','[lock]\x20lis','ALTER\x20TABL','efault\x20val','from','\x20ON\x20locks(','d\x20=\x20?','TEXT\x20DEFAU','e\x20FROM\x20sql','❌\x20Usage\x20(g','(?<![\x5cp{L}','owed.','LT\x201,\x0a\x20\x20\x20\x20','status:\x0a',',2\x20OR\x20unlo','hrase\x20erro','\x20type\x20=\x20\x27r','CT(chat_ji','ch\x20in\x20','join','SSAGE','unknown','[lock]\x20fin','Keywords','next','EXISTS\x20loc','SELECT\x20*\x20F','d\x20TEXT\x20NOT','orcement\x20f','gger2>\x20gp:','_count,\x20is','your\x20defau','CREATE\x20TAB','slice','ration\x20ins','wildcard','ERE\x20id\x20=\x20?','ks\x20SET\x20hit','alid\x20store','\x20your\x20defa','\x20phrase\x20FR','oUserJid','onical\x20(en','\x20DEFAULT\x200','ated_at\x20IN','sock','\x20\x20\x20\x20\x20\x20\x20\x20\x20i','caption','fail','clearlocks','chat','same\x20line.','phrase','_regex)\x20VA','fy\x20','\x5c$&','output',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20','✔️\x20Saved\x20','floor','\x20failed','our\x20defaul','on(s):\x20','\x5cp{N}_])','48zSkEvn','cted\x20->\x20pe','eteAllLock','\x20locks\x20for','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','\x20\x20\x20ON\x20CONF','creator','[lock]\x20Mat','keys',',\x20valid=','[lock]\x20sen','sendMessag','valid_rege','\x20for\x20','alid\x20wildc','xtMessage','map','[\x5cp{L}\x5cp{N','\x20\x20\x20VALUES\x20','11340917kZbubD','t\x20connecti','startsWith','_at\x20=\x20?,\x20i','OFF','dApi\x20not\x20a','XT\x20PRIMARY','up_','M\x20locks\x20WH','finalize','\x20\x20\x20\x20\x20);','ated_by,\x20c','AND\x20name=?','rs\x20besides','rom\x20your\x20d','prepare','DB\x20ensured','(s):\x20',',\x0a\x20\x20','\x20=\x20\x27target','index','|jid|all>','cks_unique','listlock','\x200,\x0a\x20\x20\x20\x20\x20\x20','\x20locknotif','locknotify','\x20table\x20(ca','tal','\x20=\x20?','alize\x20requ','nsert\x20fail','ks\x20table\x20a','es\x20lock\x20no','id\x20=\x20?\x20AND','tialize\x20fa','REGEX)','chat_id','QUE\x20INDEX\x20','ed\x20lock\x20\x22','❌\x20PM:\x20incl',':<alias|ji','LE\x20IF\x20NOT\x20','❌\x20Failed\x20t','alidation\x20','\x20is_valid_','E\x20id\x20=\x20?','.created_b','CURRENCY','\x20\x20\x20\x20\x20hit_c','r\x20id=','conversati','led\x20to\x20add','\x20Example:\x20',')\x20VALUES\x20(','[lock]\x20ini','ks_new\x20(\x0a\x20','search','[lock]\x20res','chat_jid,\x20','or\x20','jid','DELETE\x20FRO','\x20NULL,\x0a\x20\x20\x20','=\x20\x27regex\x27\x20','\x22:\x20','[lock]\x20ens','locks\x20WHER','egex\x20FROM\x20','\x20\x20\x20\x20\x20type\x20','eteWithRet','=\x20ON;','ABLED','EXISTS\x20idx','ration\x20com','w\x20RENAME\x20T','(?,\x20?,\x20?,\x20','vailable','[lock]\x20fai','ock_prefs\x20','min','jid)\x20DO\x20UP','d,\x20phrase)','led:\x20','ULT\x200,\x0a\x20\x20\x20','ust\x20contai','PER_CHAT_Q','lock','r\x20default\x20','E\x20locks\x20RE','phrase);','WARNING_ME','Lock:\x20inva','lock\x20bad1,','\x20);','8081088lADEYJ','\x201\x20WHERE\x20i','clear','ration\x20swa','eign_keys\x20',':\x20lock\x20tri','\x20\x20\x20chat_ji','ion(s):\x20','CREATE\x20UNI','ated\x20locks','egex','[lock]\x20han','p{N}_])','ount\x20INTEG','otify\x20=\x20ex','hat_jid\x20TE','s).','extendedTe','run','knotify\x20ch','ry\x20failed:','y,\x0a\x20\x20\x20\x20\x20\x20\x20','text','\x20failed:\x20','E\x20locks\x20(\x0a','gex\x20INTEGE','\x20lock(s)\x20f','ces\x20&\x20colu','.\x20Please\x20c','|all>','ard\x20for\x20id','for\x20','rror:\x20','led\x20for\x20','(chat_jid)','delock','ttonId','LOCKS','\x20\x20\x20\x20\x20);\x0a\x20\x20','\x20by\x20@','LUES\x20(?,\x20?','L_MS','LockNotify','ids','_jid\x27','ponseMessa','[lock]\x20inv','participan','1449225YZyxNv','SELECT\x20id\x20','as\x20fallbac','p\x20failed:\x20','getUniqueJ','ion','[lock]\x20tab','regex','line\x20usage','ut\x20UNIQUE\x20','OR\x20type\x20=\x20','rgets.','Lock\x20fallb','i\x20unavaila','regex\x20colu','STS\x20idx_lo','ude\x20gp\x20in\x20','GLOBAL_CON','e,\x20created','cessChatQu','remoteJid','TableColum','O\x20locks;','buttonsRes','sendApi\x20un','key','values','l\x20gp:<alia','ULL','\x20\x20\x20\x20UNIQUE','id\x20=\x20?','eue\x20fail:\x20','olving\x20con','tion(s):\x20','tification','gLocks\x20fai','knotify\x20gp','ed:\x20','\x20\x20\x20\x20\x20phras','chatid','Corasick\x20s','eck\x20failed','UPDATE\x20loc','\x20=\x20?\x20ORDER','❌\x20Unknown\x20','d|all>','serialized','toISOStrin','chat_jid','provided:\x20','afe\x20migrat','imageMessa','ckup','value','normalizeT','length','quested\x20ta','id:\x20\x22','[lock]\x20val','leExists\x20e','\x20KEY,\x20noti','AULT\x20\x27\x27,\x0a\x20',',phrase2','\x20=\x20exclude','hit_count','normal','\x20gp:alias','find','izeExistin','egex\x27','s\x20for\x20your','?,\x20?)\x0a\x20\x20\x20\x20','[lock]\x20ski','y\x20TEXT\x20DEF','_regex\x20INT','d\x20for\x20','WARNING_TT','delall','dRegexes\x20e','\x20regex\x20id=','[lock]\x20ON\x20','ocknotify\x20','changes','keyword','y\x20[on|off]','EX\x20IF\x20NOT\x20','delete','locks','ine\x20usage:',':\x20unlockal','rforming\x20s','CONFLICT\x20i','DATE\x20SET\x20n','dler\x20error','lid_regex;','run)','fy\x20INTEGER','94vupAyk','lid\x20stored','includes','\x20?,\x20?)','set','\x20\x20\x20\x20\x20\x20\x20cre','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','selectedBu',':\x20lock\x20<tr','k_prefs\x20(c','hat_jid,\x20p','CRITICS','d,\x20phrase,','REATE\x20TABL','⚠️\x20{user},\x20','R\x20DEFAULT\x20','tLocksForC','mns)','\x20phrase=\x22',':\x20locknoti','author','\x20phrase)\x0a\x20','@g.us','fs\x20(chat_j','shift','_new\x20witho','ed\x20is_vali','[lock]\x20del','=\x20OFF;','entries','FAULT\x200','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','isInteger','[lock]\x20mig','sured\x20indi','heck\x20/setd','message','add','n\x20characte','function','dellock','ry:\x20sendAp','\x20lock(s).','t\x20ON\x20locks','\x20(INVALID\x20','it_count,\x20','LT\x201\x0a\x20\x20\x20\x20\x20','oaded\x20','PRAGMA\x20tab','✔️\x20[lock]\x20l','d\x20regex\x20fo','s|jid|all>','\x20phrase\x20=\x20','\x20DO\x20UPDATE','has','\x20DEFAULT\x20c','word','(?![\x5cp{L}\x5c','LT\x20\x27\x27','\x20WHERE\x20key','\x20WHERE\x20typ','ENT,\x0a\x20\x20\x20\x20\x20','ks\x20SET\x20is_','reated_by\x20','REMOVE_DIA','ureSchema\x20','\x20created_b','pping\x20inva','IF\x20NOT\x20EXI','created_by','phrase\x20=\x20?','AUTOINCREM','nodes','_locks_cha','eteLockByP','INTEGER\x20DE','[lock]\x20leg','e\x20TEXT\x20NOT','{user}','pop','ify;','ERE\x20chat_j','build','roup-only)','now','lete_prefs','invalid_re','mentions','r:\x20','ger2','WHERE\x20chat','is\x20not\x20all','DEFAULT_EN','[lock]\x20pro','all','3979761IIpTHN','\x20&\x20regex\x20v','t_jid\x20=\x20?\x20','\x20?,\x20?,\x200,\x20','plete;\x20old','onnection(','\x20\x20\x20\x20\x20\x20type','\x20set\x20for\x20','e\x20=\x20?,\x20cre','igger1,tri','ockall\x20fai','[lock]\x20get','x\x20=\x200\x20WHER','\x20locks\x20loa','\x20\x20\x20\x20','\x20\x20\x20\x20create','PRAGMA\x20for','ype,\x20creat','dStoredMat','ks\x20SET\x20typ','isArray','Wildcard\x20m','dmin\x20check','ite_master','fromMe','CREATE\x20IND','❌\x20PM\x20one-l',':\x20listlock','ings\x20error','2556115rNbxgz','\x27invalid_r',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','normalize','SELECT\x20not','aned\x20up','✔️\x20Locknoti'];_0x16b1=function(){return _0x900787;};return _0x16b1();}const _0x53c13d=_0x4ade;(function(_0x2bc0d2,_0x59b51e){const _0x16f906=_0x4ade,_0x13a282=_0x2bc0d2();while(!![]){try{const _0x50e058=parseInt(_0x16f906(0x2a1))/(-0x1c69*-0x1+-0x654+0x2*-0xb0a)*(parseInt(_0x16f906(0x1f0))/(-0xe4b+0xa53*0x3+0x16*-0xc2))+-parseInt(_0x16f906(0x24f))/(0x4*-0x18d+-0x72e*-0x5+-0x1daf)+parseInt(_0x16f906(0x2c3))/(-0x17d2*-0x1+-0x9*0x1a2+0x35*-0x2c)*(parseInt(_0x16f906(0x26c))/(-0x6*0x580+0x2*0xeef+0x1*0x327))+parseInt(_0x16f906(0x15f))/(-0xc1*-0x3+0xadb+-0xd18)+-parseInt(_0x16f906(0x100))/(0x448+0x1fdc+0x739*-0x5)+-parseInt(_0x16f906(0xed))/(0x241c*-0x1+-0x9f*-0x13+0x1857)*(-parseInt(_0x16f906(0x18f))/(-0x136c*-0x1+0x1b27+0x1*-0x2e8a))+-parseInt(_0x16f906(0x274))/(0x34b+-0x2020+0x1cdf);if(_0x50e058===_0x59b51e)break;else _0x13a282['push'](_0x13a282['shift']());}catch(_0x857092){_0x13a282['push'](_0x13a282['shift']());}}}(_0x16b1,0xaf06a+0x1*0xcf5b+0x23966));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x16a868 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x53c13d(0x157);export const version=_0x53c13d(0x295);export const priority=0x2*0x2+0x1468+-0x13f4;export const configKeys=['LOCKS'];export const commands=['listlock',_0x53c13d(0x29a),_0x53c13d(0x2c0),_0x53c13d(0x218),_0x53c13d(0x182),_0x53c13d(0x2af),_0x53c13d(0x1dc),_0x53c13d(0x313),'locknotify'];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x53c13d(0x1fe)+'that\x20word\x20'+_0x53c13d(0x24b)+_0x53c13d(0x2ed),'WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x49505e){const _0x5543c9=_0x53c13d;if(!_0x49505e)return[];const _0x800563=new Set(),_0x3fe61e=[];for(const _0x1d5697 of _0x49505e){const _0x25313d=_0x1d5697===undefined||_0x1d5697===null?'':String(_0x1d5697)['trim']();if(!_0x25313d)continue;!_0x800563[_0x5543c9(0x226)](_0x25313d)&&(_0x800563[_0x5543c9(0x215)](_0x25313d),_0x3fe61e['push'](_0x25313d));}return _0x3fe61e;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=-0x1bcc+0x1291+0x93b,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(0x21fb+-0x2b*-0x13+-0x24f0)*(0x592+-0x1d03+0x1*0x1b59);function markProcessed(_0x418853){const _0x10df7d=_0x53c13d;if(!_0x418853)return;if(processedMessageKeys['has'](_0x418853))try{clearTimeout(processedMessageKeys['get'](_0x418853));}catch(_0x211599){}const _0x421ad7=setTimeout(()=>processedMessageKeys[_0x10df7d(0x1e5)](_0x418853),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x418853,_0x421ad7);}function isProcessed(_0x27b0dd){const _0x2d01d8=_0x53c13d;return _0x27b0dd&&processedMessageKeys[_0x2d01d8(0x226)](_0x27b0dd);}const sleep=_0x531cae=>new Promise(_0x2866d3=>setTimeout(_0x2866d3,_0x531cae));function nowSec(){const _0x3923a3=_0x53c13d;return Math[_0x3923a3(0xe8)](Date[_0x3923a3(0x244)]()/(0x1*-0x1ef+-0x1*-0x1335+-0xd5e));}function escapeRegex(_0x49d259){const _0x299e5e=_0x53c13d;return String(_0x49d259||'')[_0x299e5e(0x2b8)](/[.*+?^${}()|[\]\\]/g,_0x299e5e(0xe4));}function normalizeForMatch(_0x257496){const _0x25d80f=_0x53c13d;let _0x476e82=String(_0x257496||'');try{_0x476e82=_0x476e82['normalize'](_0x25d80f(0x2a6));}catch(_0x11e321){}if(CFG['NORMALIZE_'+_0x25d80f(0x230)+_0x25d80f(0x1fb)])try{_0x476e82=_0x476e82[_0x25d80f(0x26f)]('NFD')['replace'](/\p{M}/gu,'')['normalize'](_0x25d80f(0x2a6));}catch(_0x4de77a){}return _0x476e82['toLowerCas'+'e']();}class AhoCorasick{constructor(_0x2a976a=[]){const _0x7b0b93=_0x53c13d;this[_0x7b0b93(0x238)]=[{'next':{},'fail':0x0,'output':[]}];if(_0x2a976a&&_0x2a976a[_0x7b0b93(0x1c6)])this[_0x7b0b93(0x242)](_0x2a976a);}[_0x53c13d(0x242)](_0x5d894b){const _0x2185b9=_0x53c13d;this[_0x2185b9(0x238)]=[{'next':{},'fail':0x0,'output':[]}];for(const _0x8b7d40 of _0x5d894b){let _0x44ab66=-0x1*-0x1d2f+0x234*0xc+0x1eb*-0x1d;for(const _0x298427 of _0x8b7d40){const _0x291927=_0x298427;!this[_0x2185b9(0x238)][_0x44ab66][_0x2185b9(0x2fa)][_0x291927]&&(this[_0x2185b9(0x238)][_0x44ab66][_0x2185b9(0x2fa)][_0x291927]=this[_0x2185b9(0x238)][_0x2185b9(0x1c6)],this[_0x2185b9(0x238)][_0x2185b9(0x2b4)]({'next':{},'fail':0x0,'output':[]})),_0x44ab66=this[_0x2185b9(0x238)][_0x44ab66][_0x2185b9(0x2fa)][_0x291927];}this[_0x2185b9(0x238)][_0x44ab66][_0x2185b9(0xe5)][_0x2185b9(0x2b4)](_0x8b7d40);}const _0x50decc=[];for(const _0x623039 in this[_0x2185b9(0x238)][-0x2397+0x6*-0x637+0x48e1][_0x2185b9(0x2fa)]){const _0x2bcbbd=this[_0x2185b9(0x238)][-0x156d+0x1ace+-0x561][_0x2185b9(0x2fa)][_0x623039];this[_0x2185b9(0x238)][_0x2bcbbd]['fail']=-0x310*-0x3+-0x1*-0x1965+-0x2295,_0x50decc[_0x2185b9(0x2b4)](_0x2bcbbd);}while(_0x50decc[_0x2185b9(0x1c6)]){const _0x4df817=_0x50decc[_0x2185b9(0x208)]();for(const _0x36a721 in this['nodes'][_0x4df817][_0x2185b9(0x2fa)]){const _0x7200ce=this['nodes'][_0x4df817][_0x2185b9(0x2fa)][_0x36a721];let _0x4f0456=this[_0x2185b9(0x238)][_0x4df817][_0x2185b9(0x312)];while(_0x4f0456&&!this[_0x2185b9(0x238)][_0x4f0456]['next'][_0x36a721])_0x4f0456=this[_0x2185b9(0x238)][_0x4f0456][_0x2185b9(0x312)];if(this['nodes'][_0x4f0456][_0x2185b9(0x2fa)][_0x36a721])this[_0x2185b9(0x238)][_0x7200ce][_0x2185b9(0x312)]=this['nodes'][_0x4f0456][_0x2185b9(0x2fa)][_0x36a721];else this[_0x2185b9(0x238)][_0x7200ce][_0x2185b9(0x312)]=-0x1fd6+0x1*-0x197e+0x3954*0x1;this['nodes'][_0x7200ce][_0x2185b9(0xe5)][_0x2185b9(0x2b4)](...this[_0x2185b9(0x238)][this[_0x2185b9(0x238)][_0x7200ce][_0x2185b9(0x312)]]['output']),_0x50decc['push'](_0x7200ce);}}}[_0x53c13d(0x139)](_0x2220fb){const _0x4b1ee0=_0x53c13d,_0x183732=[];let _0xc8f861=0x27*-0x11+0x13*-0x3c+0x70b;for(let _0x3a14c3=-0x3*-0x3fb+-0x740+-0x4b1;_0x3a14c3<_0x2220fb[_0x4b1ee0(0x1c6)];_0x3a14c3++){const _0x41396d=_0x2220fb[_0x3a14c3];while(_0xc8f861&&!this[_0x4b1ee0(0x238)][_0xc8f861][_0x4b1ee0(0x2fa)][_0x41396d])_0xc8f861=this[_0x4b1ee0(0x238)][_0xc8f861]['fail'];if(this[_0x4b1ee0(0x238)][_0xc8f861][_0x4b1ee0(0x2fa)][_0x41396d])_0xc8f861=this['nodes'][_0xc8f861]['next'][_0x41396d];else _0xc8f861=-0x1*0x17c2+0x3*0xb49+-0xa19;if(this[_0x4b1ee0(0x238)][_0xc8f861][_0x4b1ee0(0xe5)][_0x4b1ee0(0x1c6)])for(const _0x430699 of this[_0x4b1ee0(0x238)][_0xc8f861]['output']){_0x183732[_0x4b1ee0(0x2b4)]({'keyword':_0x430699,'index':_0x3a14c3-_0x430699[_0x4b1ee0(0x1c6)]+(0xe58+0x2121+-0x2f78)});}}return _0x183732;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x240831){const _0x300797=_0x53c13d,_0x4b567c=String(_0x240831||'')[_0x300797(0x2e1)](),_0x4d25fe=escapeRegex(_0x4b567c);try{const _0x1b6568=_0x300797(0x2ec)+'\x5cp{N}_])'+_0x4d25fe+(_0x300797(0x229)+_0x300797(0x16b));return new RegExp(_0x1b6568,'iu');}catch(_0x5bb9da){try{return new RegExp('\x5cb'+_0x4d25fe+'\x5cb','i');}catch(_0x2039dc){return new RegExp(_0x4d25fe,'i');}}}function wildcardToRegex(_0x3ecd57){const _0x2cb6a8=_0x53c13d,_0x538f5c=String(_0x3ecd57||'')[_0x2cb6a8(0x2e1)](),_0x3ed6d8=_0x538f5c[_0x2cb6a8(0x2b8)](/\*/g,'')['length']>0x3f*-0x65+-0xb*0x15a+0x27b9;if(!_0x3ed6d8)throw new Error(_0x2cb6a8(0x264)+_0x2cb6a8(0x155)+_0x2cb6a8(0x216)+_0x2cb6a8(0x10d)+'\x20*');const _0x5897d5=_0x538f5c[_0x2cb6a8(0x282)]('*')[_0x2cb6a8(0xfd)](_0x10ae00=>escapeRegex(_0x10ae00)),_0x2fdd7f=_0x5897d5['join'](_0x2cb6a8(0xfe)+'}_]*');try{const _0xa78a6e=_0x2cb6a8(0x2ec)+_0x2cb6a8(0xec)+_0x2fdd7f+(_0x2cb6a8(0x229)+_0x2cb6a8(0x16b));return new RegExp(_0xa78a6e,'iu');}catch(_0x57ff1b){const _0x1ad756=_0x5897d5[_0x2cb6a8(0x2f5)]('.*');try{return new RegExp(''+_0x1ad756,'i');}catch(_0x236620){return new RegExp(_0x5897d5[_0x2cb6a8(0x2f5)](''),'i');}}}function setupSendApi(){const _0x2c2812=_0x53c13d;if(!botRef)return;if(typeof botRef['sendMessag'+'e']===_0x2c2812(0x217))sendApi=async(_0x386903,_0x9de321)=>await botRef[_0x2c2812(0xf8)+'e'](_0x386903,_0x9de321);else botRef[_0x2c2812(0x30f)]&&typeof botRef[_0x2c2812(0x30f)]['sendMessag'+'e']===_0x2c2812(0x217)?sendApi=async(_0x3c68da,_0x331726)=>await botRef['sock']['sendMessag'+'e'](_0x3c68da,_0x331726):sendApi=null;}async function sendText(_0x13deef,_0x4759b9,_0x1c2723=[]){const _0x3b7136=_0x53c13d;if(!_0x4759b9||!_0x13deef)return;const _0x52ff97={'text':String(_0x4759b9)};if(Array[_0x3b7136(0x263)](_0x1c2723)&&_0x1c2723[_0x3b7136(0x1c6)])_0x52ff97[_0x3b7136(0x247)]=_0x1c2723;try{if(!sendApi){warn(_0x3b7136(0xf7)+_0x3b7136(0x105)+_0x3b7136(0x14d));return;}await sendApi(_0x13deef,_0x52ff97);}catch(_0x236901){warn(_0x3b7136(0xf7)+'dText\x20fail'+_0x3b7136(0x2d5)+_0x13deef+':\x20'+(_0x236901?.['message']||_0x236901));}}async function tableExists(_0x17fcc9){const _0x954eaf=_0x53c13d;try{const _0x372f35=await db['get']('SELECT\x20nam'+_0x954eaf(0x2ea)+_0x954eaf(0x266)+_0x954eaf(0x22c)+'e=\x27table\x27\x20'+_0x954eaf(0x10c),[_0x17fcc9]);return!!_0x372f35;}catch(_0x268331){return warn(_0x954eaf(0x195)+_0x954eaf(0x1ca)+_0x954eaf(0x17f)+(_0x268331?.['message']||_0x268331)),![];}}async function getTableColumns(_0x19e904){const _0x57ccad=_0x53c13d;try{const _0x4db7f5=await db[_0x57ccad(0x24e)](_0x57ccad(0x220)+'le_info('+_0x19e904+')');return(_0x4db7f5||[])[_0x57ccad(0xfd)](_0x3bf42e=>_0x3bf42e[_0x57ccad(0x2cd)]);}catch(_0x577419){return warn(_0x57ccad(0x25a)+_0x57ccad(0x1a4)+'ns\x20error\x20f'+_0x57ccad(0x13c)+_0x19e904+':\x20'+(_0x577419?.[_0x57ccad(0x214)]||_0x577419)),[];}}async function readAndNormalizeExistingLocks(){const _0x2b596b=_0x53c13d;try{const _0x293f36=await db[_0x2b596b(0x24e)](_0x2b596b(0x2fc)+_0x2b596b(0x2a5)),_0x1a1ae6=new Map();for(const _0x546a12 of _0x293f36||[]){const _0x4cb0be=[_0x2b596b(0x1bf),_0x2b596b(0x1b6),_0x2b596b(0x125),'jid',_0x2b596b(0xdf)],_0x3c2a54=[_0x2b596b(0xe1),_0x2b596b(0x228),'trigger',_0x2b596b(0x1e2),_0x2b596b(0x1c4),_0x2b596b(0x2ca),'message'];let _0x42a98a=null;for(const _0x9982f6 of _0x4cb0be)if(_0x9982f6 in _0x546a12&&_0x546a12[_0x9982f6]){_0x42a98a=String(_0x546a12[_0x9982f6]);break;}let _0x14bf26=null;for(const _0x578ce1 of _0x3c2a54)if(_0x578ce1 in _0x546a12&&_0x546a12[_0x578ce1]){_0x14bf26=String(_0x546a12[_0x578ce1]);break;}if(!_0x42a98a||!_0x14bf26)for(const _0x378a60 of Object[_0x2b596b(0xf5)](_0x546a12)){const _0x149ebb=_0x546a12[_0x378a60];if(!_0x42a98a&&typeof _0x149ebb===_0x2b596b(0x283)&&_0x149ebb['includes']('@'))_0x42a98a=_0x149ebb;if(!_0x14bf26&&typeof _0x149ebb===_0x2b596b(0x283)&&_0x149ebb[_0x2b596b(0x1c6)]<-0x4*0x41f+-0x24ec+-0x6df*-0x8&&!_0x149ebb[_0x2b596b(0x1f2)]('@'))_0x14bf26=_0x149ebb;}if(!_0x42a98a||!_0x14bf26)continue;let _0xbdcabb=_0x14bf26[_0x2b596b(0x2e1)](),_0x1ca79d=_0x2b596b(0x1d0);if(_0xbdcabb[_0x2b596b(0x2bb)+'e']()[_0x2b596b(0x102)]('regex:'))_0x1ca79d=_0x2b596b(0x196),_0xbdcabb=_0xbdcabb[_0x2b596b(0x303)](0x1f1d+-0xe0b+-0x110c)[_0x2b596b(0x2e1)]();else{if(_0xbdcabb[_0x2b596b(0x1f2)]('*'))_0x1ca79d=_0x2b596b(0x305);else _0x1ca79d=_0x2b596b(0x1d0);}const _0x1dd4cb=_0x546a12['created_by']||_0x546a12[_0x2b596b(0xf3)]||_0x546a12[_0x2b596b(0x204)]||_0x546a12[_0x2b596b(0x2b0)]||'',_0x14bb99=Number(_0x546a12[_0x2b596b(0x2ce)]||_0x546a12['ts']||_0x546a12['timestamp']||0x1a55+0x884+-0x22d9)||nowSec(),_0x899852=_0x42a98a+'||'+_0xbdcabb;if(!_0x1a1ae6[_0x2b596b(0x226)](_0x899852))_0x1a1ae6['set'](_0x899852,{'chat_jid':_0x42a98a,'phrase':_0xbdcabb,'type':_0x1ca79d,'created_by':_0x1dd4cb,'created_at':_0x14bb99,'hit_count':Number(_0x546a12[_0x2b596b(0x1cf)]||0x552+0x14ef+-0x1a41)});else{const _0x36baf4=_0x1a1ae6[_0x2b596b(0x275)](_0x899852);_0x36baf4[_0x2b596b(0x2ce)]=Math[_0x2b596b(0x150)](_0x36baf4['created_at']||_0x14bb99,_0x14bb99),_0x36baf4[_0x2b596b(0x1cf)]=(_0x36baf4[_0x2b596b(0x1cf)]||-0x1*-0x1cfa+0x250b+-0x1*0x4205)+(Number(_0x546a12[_0x2b596b(0x1cf)])||0xa6*-0x11+0x1*0xb1+0x17*0x73);}}return Array[_0x2b596b(0x2e6)](_0x1a1ae6[_0x2b596b(0x1a9)]());}catch(_0x1f8d72){return warn('[lock]\x20rea'+'dAndNormal'+_0x2b596b(0x1d3)+_0x2b596b(0x1b2)+_0x2b596b(0x153)+(_0x1f8d72?.[_0x2b596b(0x214)]||_0x1f8d72)),[];}}async function ensureSchema(){const _0x2a8c6b=_0x53c13d,_0x34ed2f={'id':'INTEGER\x20PR'+'IMARY\x20KEY\x20'+_0x2a8c6b(0x237)+_0x2a8c6b(0x2db),'chat_jid':'TEXT\x20NOT\x20N'+_0x2a8c6b(0x1ab),'phrase':_0x2a8c6b(0x2d3)+'ULL','type':_0x2a8c6b(0x2e9)+_0x2a8c6b(0x2c7)+'\x27','created_by':_0x2a8c6b(0x2e9)+_0x2a8c6b(0x22a),'created_at':_0x2a8c6b(0x23b)+_0x2a8c6b(0x20e),'hit_count':_0x2a8c6b(0x23b)+_0x2a8c6b(0x20e),'is_valid_regex':'INTEGER\x20DE'+'FAULT\x201'};try{const _0x1493dc=await tableExists(_0x2a8c6b(0x1e6));if(!_0x1493dc){const _0x466c47=Object[_0x2a8c6b(0x20d)](_0x34ed2f)[_0x2a8c6b(0xfd)](([_0x4e8404,_0x3f4f12])=>_0x4e8404+'\x20'+_0x3f4f12)[_0x2a8c6b(0x2f5)](_0x2a8c6b(0x112));await db[_0x2a8c6b(0x279)](_0x2a8c6b(0xf1)+_0x2a8c6b(0x1fd)+_0x2a8c6b(0x177)+_0x2a8c6b(0x1f6)+_0x466c47+(_0x2a8c6b(0x26e)+_0x2a8c6b(0x286)+_0x2a8c6b(0x1fa)+_0x2a8c6b(0x28b)+_0x2a8c6b(0x185)+_0x2a8c6b(0x25d)));try{await db[_0x2a8c6b(0x279)]('CREATE\x20IND'+_0x2a8c6b(0x1e4)+'EXISTS\x20idx'+_0x2a8c6b(0x239)+'t\x20ON\x20locks'+_0x2a8c6b(0x181)+';');}catch(_0x8e183a){}try{await db[_0x2a8c6b(0x279)](_0x2a8c6b(0x167)+_0x2a8c6b(0x126)+_0x2a8c6b(0x234)+_0x2a8c6b(0x19e)+_0x2a8c6b(0x116)+'\x20ON\x20locks('+_0x2a8c6b(0x13b)+_0x2a8c6b(0x15a));}catch(_0xbc840a){}info('[lock]\x20cre'+_0x2a8c6b(0x168)+_0x2a8c6b(0x11b)+_0x2a8c6b(0x299));try{await db[_0x2a8c6b(0x279)]('CREATE\x20TAB'+_0x2a8c6b(0x12a)+'EXISTS\x20loc'+'k_prefs\x20(c'+_0x2a8c6b(0x16e)+_0x2a8c6b(0x106)+_0x2a8c6b(0x1cb)+_0x2a8c6b(0x1ef)+_0x2a8c6b(0x30d)+');');}catch(_0x3cc46f){}return;}const _0x107d4b=await getTableColumns('locks'),_0x27db35=_0x107d4b[_0x2a8c6b(0x1f2)](_0x2a8c6b(0x1bf)),_0x3a76f0=_0x107d4b[_0x2a8c6b(0x1f2)](_0x2a8c6b(0xe1)),_0x10d3e5=_0x107d4b['includes']('type');if(_0x27db35&&_0x3a76f0&&_0x10d3e5){if(!_0x107d4b['includes'](_0x2a8c6b(0x2c6)+_0x2a8c6b(0x169)))try{await db[_0x2a8c6b(0x279)]('ALTER\x20TABL'+'E\x20locks\x20AD'+'D\x20COLUMN\x20i'+_0x2a8c6b(0x29c)+_0x2a8c6b(0x178)+_0x2a8c6b(0x1ff)+'1;'),info('[lock]\x20add'+_0x2a8c6b(0x20a)+'d_regex\x20co'+_0x2a8c6b(0x2bf)+_0x2a8c6b(0x277));}catch(_0x147501){warn('[lock]\x20fai'+_0x2a8c6b(0x134)+_0x2a8c6b(0x12d)+_0x2a8c6b(0x19d)+'mn:\x20'+(_0x147501?.[_0x2a8c6b(0x214)]||_0x147501));}try{await db[_0x2a8c6b(0x279)](_0x2a8c6b(0x268)+_0x2a8c6b(0x1e4)+_0x2a8c6b(0x149)+'_locks_cha'+_0x2a8c6b(0x21b)+_0x2a8c6b(0x181)+';');}catch(_0x2d5fa3){}try{await db[_0x2a8c6b(0x279)](_0x2a8c6b(0x167)+_0x2a8c6b(0x126)+'IF\x20NOT\x20EXI'+'STS\x20idx_lo'+_0x2a8c6b(0x116)+_0x2a8c6b(0x2e7)+_0x2a8c6b(0x13b)+_0x2a8c6b(0x15a));}catch(_0x321493){}try{await db[_0x2a8c6b(0x279)](_0x2a8c6b(0x302)+_0x2a8c6b(0x12a)+'EXISTS\x20loc'+'k_prefs\x20(c'+_0x2a8c6b(0x16e)+'XT\x20PRIMARY'+'\x20KEY,\x20noti'+_0x2a8c6b(0x1ef)+_0x2a8c6b(0x30d)+');');}catch(_0x476aac){}info(_0x2a8c6b(0x28f)+_0x2a8c6b(0x120)+_0x2a8c6b(0x27a)+_0x2a8c6b(0x30c)+_0x2a8c6b(0x212)+_0x2a8c6b(0x17a)+_0x2a8c6b(0x201));return;}info(_0x2a8c6b(0x23c)+'acy\x20locks\x20'+'table\x20dete'+_0x2a8c6b(0xee)+_0x2a8c6b(0x1e9)+_0x2a8c6b(0x1c1)+_0x2a8c6b(0x194));const _0x5b7bc1=await readAndNormalizeExistingLocks();await db[_0x2a8c6b(0x279)]('PRAGMA\x20for'+'eign_keys\x20'+_0x2a8c6b(0x20c));try{await db['exec'](_0x2a8c6b(0x302)+'LE\x20IF\x20NOT\x20'+_0x2a8c6b(0x2fb)+_0x2a8c6b(0x138)+_0x2a8c6b(0x2e0)+'INTEGER\x20PR'+'IMARY\x20KEY\x20'+_0x2a8c6b(0x237)+_0x2a8c6b(0x22d)+'\x20\x20\x20chat_ji'+_0x2a8c6b(0x2fd)+_0x2a8c6b(0x13f)+'\x20\x20\x20\x20\x20phras'+_0x2a8c6b(0x23d)+'\x20NULL,\x0a\x20\x20\x20'+_0x2a8c6b(0x145)+_0x2a8c6b(0x2e9)+_0x2a8c6b(0x2c7)+_0x2a8c6b(0x2be)+_0x2a8c6b(0x232)+_0x2a8c6b(0x1d8)+_0x2a8c6b(0x1cc)+_0x2a8c6b(0x1f5)+_0x2a8c6b(0x30e)+_0x2a8c6b(0x2bd)+_0x2a8c6b(0x154)+_0x2a8c6b(0x131)+_0x2a8c6b(0x16c)+_0x2a8c6b(0x296)+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x2a8c6b(0x2ac)+_0x2a8c6b(0x1d9)+_0x2a8c6b(0x2cb)+_0x2a8c6b(0x2ee)+_0x2a8c6b(0x1ac)+'(chat_jid,'+_0x2a8c6b(0x205)+_0x2a8c6b(0x10a));}catch(_0x41c929){await db[_0x2a8c6b(0x279)]('CREATE\x20TAB'+_0x2a8c6b(0x12a)+_0x2a8c6b(0x2fb)+_0x2a8c6b(0x138)+_0x2a8c6b(0x2e0)+'INTEGER\x20PR'+'IMARY\x20KEY\x20'+_0x2a8c6b(0x237)+_0x2a8c6b(0x22d)+_0x2a8c6b(0x165)+_0x2a8c6b(0x2fd)+'\x20NULL,\x0a\x20\x20\x20'+_0x2a8c6b(0x1b5)+_0x2a8c6b(0x23d)+_0x2a8c6b(0x13f)+_0x2a8c6b(0x145)+_0x2a8c6b(0x2e9)+'LT\x20\x27normal'+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x2a8c6b(0x232)+'y\x20TEXT\x20DEF'+_0x2a8c6b(0x1cc)+_0x2a8c6b(0x1f5)+_0x2a8c6b(0x30e)+_0x2a8c6b(0x2bd)+_0x2a8c6b(0x154)+_0x2a8c6b(0x131)+_0x2a8c6b(0x16c)+_0x2a8c6b(0x296)+_0x2a8c6b(0x118)+_0x2a8c6b(0x2ac)+'_regex\x20INT'+_0x2a8c6b(0x2cb)+_0x2a8c6b(0x21e)+_0x2a8c6b(0x15e)),warn('[lock]\x20cre'+_0x2a8c6b(0x168)+_0x2a8c6b(0x209)+_0x2a8c6b(0x198)+_0x2a8c6b(0x191)+'k');}const _0x8f067b=await db[_0x2a8c6b(0x10f)](_0x2a8c6b(0x2a4)+'O\x20locks_ne'+'w\x20(chat_ji'+_0x2a8c6b(0x1fc)+'\x20type,\x20cre'+_0x2a8c6b(0x10b)+'reated_at,'+_0x2a8c6b(0x2de)+_0x2a8c6b(0x27c)+_0x2a8c6b(0xe2)+_0x2a8c6b(0x187)+',\x20?,\x20?,\x20?,'+_0x2a8c6b(0x1f3));try{for(const _0x8d621d of _0x5b7bc1){try{let _0x1b4a06=0x2f*-0x76+0x2569+-0xfbe;if(_0x8d621d['type']===_0x2a8c6b(0x196))try{new RegExp(_0x8d621d[_0x2a8c6b(0xe1)]);}catch(_0x39e9ed){_0x1b4a06=-0x638+0x5d7*-0x2+0x11e6;}await _0x8f067b[_0x2a8c6b(0x171)](_0x8d621d[_0x2a8c6b(0x1bf)],_0x8d621d[_0x2a8c6b(0xe1)],_0x8d621d[_0x2a8c6b(0x28d)]||_0x2a8c6b(0x1d0),_0x8d621d[_0x2a8c6b(0x235)]||'',Number(_0x8d621d[_0x2a8c6b(0x2ce)]||nowSec()),Number(_0x8d621d[_0x2a8c6b(0x1cf)]||0x4*0x375+-0xffb*0x2+-0x2*-0x911),_0x1b4a06);}catch(_0x4fe41e){warn(_0x2a8c6b(0x211)+_0x2a8c6b(0x304)+_0x2a8c6b(0x29f)+_0x2a8c6b(0xfa)+_0x8d621d['chat_jid']+'@'+_0x8d621d[_0x2a8c6b(0xe1)]+':\x20'+(_0x4fe41e?.[_0x2a8c6b(0x214)]||_0x4fe41e));}}}finally{try{await _0x8f067b[_0x2a8c6b(0x109)]();}catch(_0x352b4c){}}try{const _0x1c17e4='locks_back'+_0x2a8c6b(0x107)+Math[_0x2a8c6b(0xe8)](Date[_0x2a8c6b(0x244)]()/(-0xc6d*-0x2+0x23b*-0xd+-0x2af*-0x3));await db[_0x2a8c6b(0x279)]('ALTER\x20TABL'+_0x2a8c6b(0x159)+'NAME\x20TO\x20'+_0x1c17e4+';'),await db[_0x2a8c6b(0x279)](_0x2a8c6b(0x2e4)+'E\x20locks_ne'+_0x2a8c6b(0x14b)+_0x2a8c6b(0x1a5));try{await db['exec'](_0x2a8c6b(0x268)+_0x2a8c6b(0x1e4)+_0x2a8c6b(0x149)+_0x2a8c6b(0x239)+_0x2a8c6b(0x21b)+_0x2a8c6b(0x181)+';');}catch(_0x57a8c1){}try{await db['exec']('CREATE\x20UNI'+'QUE\x20INDEX\x20'+'IF\x20NOT\x20EXI'+_0x2a8c6b(0x19e)+_0x2a8c6b(0x116)+'\x20ON\x20locks('+_0x2a8c6b(0x13b)+'phrase);');}catch(_0x11b3a4){}try{await db[_0x2a8c6b(0x279)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x2a8c6b(0x2fb)+_0x2a8c6b(0x1f9)+'hat_jid\x20TE'+_0x2a8c6b(0x106)+'\x20KEY,\x20noti'+_0x2a8c6b(0x1ef)+_0x2a8c6b(0x30d)+');');}catch(_0x403b04){}info(_0x2a8c6b(0x211)+_0x2a8c6b(0x14a)+_0x2a8c6b(0x253)+'\x20table\x20ren'+'amed\x20to\x20ba'+_0x2a8c6b(0x1c3));}catch(_0x1989d7){warn(_0x2a8c6b(0x211)+_0x2a8c6b(0x162)+_0x2a8c6b(0x192)+(_0x1989d7?.[_0x2a8c6b(0x214)]||_0x1989d7));throw _0x1989d7;}finally{await db[_0x2a8c6b(0x279)](_0x2a8c6b(0x25f)+_0x2a8c6b(0x163)+_0x2a8c6b(0x147));}return;}catch(_0x2f80ca){error(_0x2f80ca,_0x2a8c6b(0x142)+_0x2a8c6b(0x231)+_0x2a8c6b(0x2cc));throw _0x2f80ca;}}async function addLock(_0x4d5fa9,_0x5c489a,_0x1be808){const _0x3842b8=_0x53c13d;try{if(!_0x4d5fa9||!_0x5c489a)return![];let _0x19b8a1=String(_0x5c489a)['trim']();if(!_0x19b8a1)return![];let _0x512500='normal',_0x5b03ce=0x983*0x1+-0x1*0x1652+0x334*0x4;if(_0x19b8a1[_0x3842b8(0x2bb)+'e']()[_0x3842b8(0x102)]('regex:')){_0x512500=_0x3842b8(0x196),_0x19b8a1=_0x19b8a1[_0x3842b8(0x303)](-0x1cda+0x249*-0xf+0x3f27)[_0x3842b8(0x2e1)]();try{new RegExp(_0x19b8a1),_0x5b03ce=-0x115c+0x3e3*0x1+-0x3*-0x47e;}catch(_0x1fc2df){_0x5b03ce=0x2610+-0x1f*-0x10f+-0x46e1,warn(_0x3842b8(0x2dd)+_0x3842b8(0x15c)+_0x3842b8(0x2c4)+_0x3842b8(0x1c0)+_0x19b8a1);}}else _0x19b8a1[_0x3842b8(0x1f2)]('*')?_0x512500=_0x3842b8(0x305):_0x512500=_0x3842b8(0x1d0);try{const _0x298544=await db[_0x3842b8(0x171)](_0x3842b8(0x2a4)+_0x3842b8(0x2dc)+'hat_jid,\x20p'+'hrase,\x20typ'+_0x3842b8(0x1a1)+_0x3842b8(0x2d9)+'ed_at,\x20hit'+_0x3842b8(0x300)+_0x3842b8(0x297)+'ex)\x0a\x20\x20\x20\x20\x20\x20'+_0x3842b8(0xff)+_0x3842b8(0x14c)+'?,\x20?,\x200,\x20?'+_0x3842b8(0xe6)+_0x3842b8(0x2ae)+_0x3842b8(0x2f3)+_0x3842b8(0x152)+_0x3842b8(0x225)+'\x20SET\x0a\x20\x20\x20\x20\x20'+_0x3842b8(0x255)+_0x3842b8(0x1ce)+'d.type,\x0a\x20\x20'+_0x3842b8(0x20f)+_0x3842b8(0x22f)+'=\x20excluded'+_0x3842b8(0x12f)+_0x3842b8(0x174)+_0x3842b8(0x25e)+'d_at\x20=\x20exc'+'luded.crea'+_0x3842b8(0x281)+_0x3842b8(0x310)+_0x3842b8(0x29c)+'gex\x20=\x20excl'+_0x3842b8(0x2a0)+_0x3842b8(0x1ed),[_0x4d5fa9,_0x19b8a1,_0x512500,_0x1be808||'',nowSec(),_0x5b03ce]);return ahoCache['delete'](_0x4d5fa9),info(_0x3842b8(0x2dd)+_0x3842b8(0x127)+_0x19b8a1+_0x3842b8(0x2c1)+_0x4d5fa9+_0x3842b8(0x2d0)+_0x512500+_0x3842b8(0xf6)+_0x5b03ce+')'),!![];}catch(_0x81d8b2){warn(_0x3842b8(0x1df)+_0x3842b8(0x1ea)+_0x3842b8(0x11f)+_0x3842b8(0x280)+_0x3842b8(0x2d4)+(_0x81d8b2?.['message']||_0x81d8b2));try{const _0x220909=await db[_0x3842b8(0x275)](_0x3842b8(0x190)+_0x3842b8(0x2b5)+'\x20WHERE\x20cha'+_0x3842b8(0x251)+'AND\x20phrase'+_0x3842b8(0x11d),[_0x4d5fa9,_0x19b8a1]);return _0x220909?await db[_0x3842b8(0x171)](_0x3842b8(0x1b9)+_0x3842b8(0x262)+_0x3842b8(0x257)+'ated_by\x20=\x20'+'?,\x20created'+_0x3842b8(0x103)+_0x3842b8(0x29c)+'gex\x20=\x20?\x20WH'+_0x3842b8(0x306),[_0x512500,_0x1be808||'',nowSec(),_0x5b03ce,_0x220909['id']]):await db[_0x3842b8(0x171)](_0x3842b8(0x2a4)+'O\x20locks\x20(c'+_0x3842b8(0x1fa)+_0x3842b8(0x287)+'e,\x20created'+'_by,\x20creat'+'ed_at,\x20hit'+_0x3842b8(0x300)+_0x3842b8(0x297)+_0x3842b8(0x289)+_0x3842b8(0x2d8)+_0x3842b8(0x252)+'?)',[_0x4d5fa9,_0x19b8a1,_0x512500,_0x1be808||'',nowSec(),_0x5b03ce]),ahoCache[_0x3842b8(0x1e5)](_0x4d5fa9),!![];}catch(_0x4d27f1){return error(_0x4d27f1,_0x3842b8(0x2dd)+_0x3842b8(0x19b)+'ack\x20failed'+_0x3842b8(0xfa)+_0x19b8a1+_0x3842b8(0x2b1)+_0x4d5fa9),![];}}}catch(_0xe6756d){return error(_0xe6756d,'[lock]\x20add'+'Lock\x20faile'+_0x3842b8(0x1da)+_0x5c489a+_0x3842b8(0x2b1)+_0x4d5fa9),![];}}async function deleteLockByPhrase(_0x4976aa,_0x64d77){const _0x219489=_0x53c13d;try{if(!_0x4976aa||!_0x64d77)return 0x4*0x966+-0x10c9+-0x14cf*0x1;const _0x15239c=String(_0x64d77||'')[_0x219489(0x2e1)]();if(!_0x15239c)return-0x2450+0x41*0x7d+0x493;if(_0x15239c[_0x219489(0x2bb)+'e']()['startsWith']('regex:')){const _0x3a6dd5=_0x15239c[_0x219489(0x303)](-0x1e93+-0xf0d*0x2+0x3cb3)[_0x219489(0x2e1)](),_0x55d8a2=await db['run'](_0x219489(0x13e)+_0x219489(0x108)+_0x219489(0x241)+_0x219489(0x122)+_0x219489(0x2f2)+'egex\x27\x20AND\x20'+_0x219489(0x236),[_0x4976aa,_0x3a6dd5]);if(_0x55d8a2?.[_0x219489(0x1e1)])ahoCache[_0x219489(0x1e5)](_0x4976aa);return _0x55d8a2?.[_0x219489(0x1e1)]||-0x62f*-0x6+-0x39b+-0x217f;}let _0x3f5d85=await db[_0x219489(0x171)]('DELETE\x20FRO'+'M\x20locks\x20WH'+_0x219489(0x241)+_0x219489(0x122)+_0x219489(0x224)+'?',[_0x4976aa,_0x15239c]);if(_0x3f5d85?.[_0x219489(0x1e1)])return ahoCache[_0x219489(0x1e5)](_0x4976aa),_0x3f5d85[_0x219489(0x1e1)];return-0x217*0xb+0xf86+0x1*0x777;}catch(_0x28253b){return warn(_0x219489(0x20b)+_0x219489(0x23a)+_0x219489(0x2f1)+_0x219489(0x248)+(_0x28253b?.[_0x219489(0x214)]||_0x28253b)),-0x2*0x368+0x1*-0x1ebb+0x258b;}}async function deleteLockById(_0x350024,_0xc62719){const _0x446f5d=_0x53c13d;try{const _0x91ed9=await db['run'](_0x446f5d(0x13e)+_0x446f5d(0x108)+_0x446f5d(0x241)+_0x446f5d(0x122)+_0x446f5d(0x2ba),[_0x350024,_0xc62719]);if(_0x91ed9?.[_0x446f5d(0x1e1)])ahoCache[_0x446f5d(0x1e5)](_0x350024);return _0x91ed9?.[_0x446f5d(0x1e1)]||0x1189+0x122b+-0x1*0x23b4;}catch(_0x2d378c){return warn('[lock]\x20del'+'eteLockByI'+'d\x20error:\x20'+(_0x2d378c?.['message']||_0x2d378c)),0xaa*-0x28+-0x61a+-0xe2*-0x25;}}async function deleteAllLocksForChat(_0x27d030){const _0x48a93a=_0x53c13d;try{const _0x59caee=await db[_0x48a93a(0x171)](_0x48a93a(0x13e)+_0x48a93a(0x108)+_0x48a93a(0x241)+_0x48a93a(0x1ad),[_0x27d030]);if(_0x59caee?.[_0x48a93a(0x1e1)])ahoCache['delete'](_0x27d030);return _0x59caee?.[_0x48a93a(0x1e1)]||-0x1*-0x4ba+0x1dd7+-0x1*0x2291;}catch(_0xdf6994){return warn('[lock]\x20del'+_0x48a93a(0xef)+_0x48a93a(0x2a2)+_0x48a93a(0x17f)+(_0xdf6994?.[_0x48a93a(0x214)]||_0xdf6994)),-0x19b*-0x7+-0x6ab+0x41*-0x12;}}async function listLocksForChat(_0x17e193){const _0x44b946=_0x53c13d;try{const _0x1a98f2=await db['all']('SELECT\x20id,'+'\x20phrase,\x20t'+_0x44b946(0x260)+_0x44b946(0x2bc)+'ated_at,\x20h'+_0x44b946(0x21d)+_0x44b946(0x2c6)+_0x44b946(0x144)+_0x44b946(0x143)+'E\x20chat_jid'+_0x44b946(0x1ba)+'\x20BY\x20id',[_0x17e193]);return _0x1a98f2||[];}catch(_0x7e688){return warn(_0x7e688,_0x44b946(0x2e3)+_0x44b946(0x200)+_0x44b946(0x2c5)+_0x44b946(0x17e)+_0x17e193+':\x20'+(_0x7e688?.['message']||_0x7e688)),[];}}async function setLockNotify(_0x764d8b,_0x3b33f2){const _0x1ade39=_0x53c13d;try{if(!_0x764d8b)return![];return await db[_0x1ade39(0x171)]('INSERT\x20INT'+_0x1ade39(0x28c)+_0x1ade39(0x207)+'id,\x20notify'+_0x1ade39(0x136)+_0x1ade39(0x1d6)+_0x1ade39(0xf2)+'LICT(chat_'+_0x1ade39(0x151)+_0x1ade39(0x1eb)+_0x1ade39(0x16d)+'cluded.not'+_0x1ade39(0x240),[_0x764d8b,_0x3b33f2?0x155b+0xb6d+-0x20c7:0x1*0x1dc6+-0x14ec+-0x8da]),!![];}catch(_0x1375fd){return warn(_0x1ade39(0x29b)+_0x1ade39(0x189)+'\x20failed\x20fo'+'r\x20'+_0x764d8b+':\x20'+(_0x1375fd?.['message']||_0x1375fd)),![];}}function _0x4ade(_0x47eee8,_0x5ebb06){const _0x1fffd3=_0x16b1();return _0x4ade=function(_0x2fb58a,_0x489829){_0x2fb58a=_0x2fb58a-(-0x2045+-0x1*-0x100f+-0x1*-0x1115);let _0x40904d=_0x1fffd3[_0x2fb58a];return _0x40904d;},_0x4ade(_0x47eee8,_0x5ebb06);}async function getLockNotify(_0x5d0da1){const _0x29a12f=_0x53c13d;try{if(!_0x5d0da1)return 0x1a06+0x39*0x73+-0x33a1;const _0x3613f7=await db[_0x29a12f(0x275)](_0x29a12f(0x270)+'ify\x20FROM\x20l'+_0x29a12f(0x14f)+_0x29a12f(0x24a)+'_jid\x20=\x20?',[_0x5d0da1]);return _0x3613f7?Number(_0x3613f7['notify'])?-0x14d8+-0x1b01+0x2fda:0x9c7*-0x1+-0xda+0xaa1:0x205f+0x8*-0x144+-0x163f;}catch(_0x42b388){return warn(_0x29a12f(0x25a)+'LockNotify'+'\x20failed\x20fo'+'r\x20'+_0x5d0da1+':\x20'+(_0x42b388?.[_0x29a12f(0x214)]||_0x42b388)),0xb69+0x1*-0x33d+0x20b*-0x4;}}async function deleteWithRetry(_0x19f715,_0x379885=0x1d36+0x1bf9+0x35d*-0x11,_0x45ccfc=0x1bc+0x1c9*0x3+-0x12f*0x5){const _0x3a408d=_0x53c13d,_0x523a83=_0x19f715[_0x3a408d(0x1a8)]?.[_0x3a408d(0x1a3)];if(!_0x523a83)return![];let _0x4b5e44=_0x45ccfc;for(let _0x508d32=0x22d8+0x10*0x13+-0x191*0x17;_0x508d32<=Math[_0x3a408d(0x2a3)](-0x1b01*-0x1+-0x499*-0x6+0x33*-0x112,_0x379885);_0x508d32++){try{if(!sendApi)return warn('[lock]\x20del'+_0x3a408d(0x146)+_0x3a408d(0x219)+_0x3a408d(0x19c)+_0x3a408d(0x27f)),![];return await sendApi(_0x523a83,{'delete':_0x19f715[_0x3a408d(0x1a8)]}),!![];}catch(_0x2d3ac9){if(_0x508d32<_0x379885){await sleep(_0x4b5e44),_0x4b5e44*=0x1*0x1b23+0x2c7*-0x1+-0x185a;continue;}return warn(_0x3a408d(0x20b)+_0x3a408d(0x146)+_0x3a408d(0x173)+'\x20'+(_0x2d3ac9?.[_0x3a408d(0x214)]||_0x2d3ac9)),![];}}return![];}async function sendWarningAndMaybeDelete(_0x22dddf){const _0x310aea=_0x53c13d;if(!CFG[_0x310aea(0x284)+'NG'])return;try{const _0x14166a=_0x22dddf[_0x310aea(0x1a8)]?.[_0x310aea(0x18e)+'t']||_0x22dddf['key']?.[_0x310aea(0x2e6)]||'',_0x4d6428=_0x22dddf[_0x310aea(0x1a8)][_0x310aea(0x1a3)],_0x55d03a=_0x14166a?'@'+String(_0x14166a)[_0x310aea(0x282)]('@')[-0x1d0c+0x214d+-0x441]:_0x310aea(0x23e),_0x1de6b9=String(CFG[_0x310aea(0x15b)+_0x310aea(0x2f6)]||DEFAULTS[_0x310aea(0x15b)+_0x310aea(0x2f6)])[_0x310aea(0x2b8)](/\{user\}/gi,_0x55d03a);if(!sendApi){warn('[lock]\x20sen'+'dWarning:\x20'+_0x310aea(0x1a7)+'available');return;}const _0x763db8=await sendApi(_0x4d6428,{'text':_0x1de6b9,'mentions':_0x14166a?[_0x14166a]:[]});_0x763db8?.[_0x310aea(0x1a8)]&&CFG['WARNING_TT'+'L_MS']&&CFG[_0x310aea(0x1db)+_0x310aea(0x188)]>-0x15bc+0x160+0x145c&&setTimeout(async()=>{const _0x2bb4d3=_0x310aea;try{await sendApi(_0x4d6428,{'delete':_0x763db8[_0x2bb4d3(0x1a8)]});}catch(_0x495747){}},CFG[_0x310aea(0x1db)+_0x310aea(0x188)]);}catch(_0x12528a){warn(_0x310aea(0xf7)+'dWarning\x20f'+_0x310aea(0x291)+(_0x12528a?.['message']||_0x12528a));}}async function processChatQueue(_0x5a8aa3){const _0x35535f=_0x53c13d;while((perChatQueue[_0x35535f(0x275)](_0x5a8aa3)||[])[_0x35535f(0x1c6)]>0xb01+-0x15ff+-0x1*-0xafe&&!shuttingDown){const _0xa9ebf0=Math[_0x35535f(0x2a3)](0x1*0x614+-0x10*-0x2+-0x633,CFG['BATCH_SIZE']||-0x96+-0x10c7+0x115e*0x1),_0xbaa28=perChatQueue[_0x35535f(0x275)](_0x5a8aa3)||[],_0x26294e=_0xbaa28['splice'](-0x246+-0x1824*-0x1+-0x15de,_0xa9ebf0);for(const _0x1cafe5 of _0x26294e){try{const _0x2cf579=await deleteWithRetry(_0x1cafe5)[_0x35535f(0x292)](()=>![]);_0x2cf579&&await sendWarningAndMaybeDelete(_0x1cafe5)[_0x35535f(0x292)](()=>{});}catch(_0x175dc9){warn(_0x35535f(0x24d)+'cessChatQu'+'eue\x20item\x20e'+_0x35535f(0x17f)+(_0x175dc9?.[_0x35535f(0x214)]||_0x175dc9));}}(perChatQueue[_0x35535f(0x275)](_0x5a8aa3)||[])['length']>-0x93d+-0xd*-0xa9+-0x7*-0x18&&await sleep(Math[_0x35535f(0x2a3)](-0x1433*0x1+0x9ad+0xa86,CFG['BATCH_DELA'+'Y_MS']||0x1f6+-0x65a+0x52c));}if((perChatQueue[_0x35535f(0x275)](_0x5a8aa3)||[])[_0x35535f(0x1c6)]===0x19d+-0xb*-0x24b+0xe5*-0x1e)perChatQueue[_0x35535f(0x1e5)](_0x5a8aa3);}function tryStartProcessingForChat(_0x12ab4a){const _0x1da117=_0x53c13d;if(perChatProcessing[_0x1da117(0x275)](_0x12ab4a))return;if(activeChats>=(CFG[_0x1da117(0x1a0)+_0x1da117(0x130)]||-0x1a92+0x1a94+-0x1*0x1)){setTimeout(()=>tryStartProcessingForChat(_0x12ab4a),0xc63+0x2d9+0x2*-0x753);return;}activeChats++,perChatProcessing[_0x1da117(0x1f4)](_0x12ab4a,!![]),((async()=>{const _0x5ac8a0=_0x1da117;try{await processChatQueue(_0x12ab4a);}catch(_0x31aeaa){warn(_0x5ac8a0(0x24d)+_0x5ac8a0(0x1a2)+_0x5ac8a0(0x1ae)+(_0x31aeaa?.[_0x5ac8a0(0x214)]||_0x31aeaa));}finally{perChatProcessing['delete'](_0x12ab4a),activeChats=Math[_0x5ac8a0(0x2a3)](-0x19ae+-0x1196+0x2b44,activeChats-(0x1646+0x99*-0x35+0x968));if((perChatQueue[_0x5ac8a0(0x275)](_0x12ab4a)||[])[_0x5ac8a0(0x1c6)])setImmediate(()=>tryStartProcessingForChat(_0x12ab4a));}})());}function enqueueDeletion(_0x3fdad4){const _0x10f7b4=_0x53c13d,_0x347dd7=_0x3fdad4[_0x10f7b4(0x1a8)]?.['remoteJid'];if(!_0x347dd7)return;if(!perChatQueue[_0x10f7b4(0x226)](_0x347dd7))perChatQueue[_0x10f7b4(0x1f4)](_0x347dd7,[]);const _0x2eacff=perChatQueue[_0x10f7b4(0x275)](_0x347dd7);if(_0x2eacff[_0x10f7b4(0x1c6)]>=(CFG[_0x10f7b4(0x156)+_0x10f7b4(0x298)]||DEFAULTS[_0x10f7b4(0x156)+_0x10f7b4(0x298)]))_0x2eacff[_0x10f7b4(0x208)]();_0x2eacff[_0x10f7b4(0x2b4)](_0x3fdad4);if(!perChatProcessing[_0x10f7b4(0x275)](_0x347dd7))tryStartProcessingForChat(_0x347dd7);}function extractTextFromMessage(_0x1b2348){const _0x2e2974=_0x53c13d;if(!_0x1b2348||!_0x1b2348[_0x2e2974(0x214)])return'';const _0x2d72a5=_0x1b2348[_0x2e2974(0x214)];if(_0x2d72a5[_0x2e2974(0x133)+'on'])return _0x2d72a5['conversati'+'on'];if(_0x2d72a5[_0x2e2974(0x170)+'xtMessage']?.[_0x2e2974(0x175)])return _0x2d72a5[_0x2e2974(0x170)+_0x2e2974(0xfc)][_0x2e2974(0x175)];if(_0x2d72a5[_0x2e2974(0x1c2)+'ge']?.[_0x2e2974(0x311)])return _0x2d72a5[_0x2e2974(0x1c2)+'ge']['caption'];if(_0x2d72a5[_0x2e2974(0x293)+'ge']?.[_0x2e2974(0x311)])return _0x2d72a5['videoMessa'+'ge'][_0x2e2974(0x311)];if(_0x2d72a5[_0x2e2974(0x1a6)+_0x2e2974(0x18c)+'ge']?.[_0x2e2974(0x1f7)+_0x2e2974(0x183)])return _0x2d72a5['buttonsRes'+_0x2e2974(0x18c)+'ge'][_0x2e2974(0x1f7)+_0x2e2974(0x183)];return'';}function splitRestForGp(_0x51a085){const _0x11d8fc=_0x53c13d;if(!_0x51a085)return{'left':'','gp':null};const _0x369b2e=_0x51a085['match'](/\bgp[:\s]+(.+)$/i);if(_0x369b2e){const _0x28246a=_0x51a085[_0x11d8fc(0x303)](-0x264d+0x11a7*0x2+0x2ff,_0x369b2e[_0x11d8fc(0x114)])[_0x11d8fc(0x2e1)](),_0x2a8095=_0x369b2e[-0x4*-0x75e+-0x5*-0x556+-0x3825]['trim']();return{'left':_0x28246a,'gp':_0x2a8095};}const _0x278d89=_0x51a085[_0x11d8fc(0x282)](/\s+/)[_0x11d8fc(0x294)](Boolean);if(_0x278d89[_0x11d8fc(0x1c6)]>0x2*0x1305+-0x22b3+-0x356){const _0xc8f0f3=_0x278d89[_0x278d89[_0x11d8fc(0x1c6)]-(0x4a8*-0x2+0x1bf*0x9+-0x666)];if(_0xc8f0f3['toLowerCas'+'e']()==='all'||_0xc8f0f3[_0x11d8fc(0x1f2)]('@'))return _0x278d89[_0x11d8fc(0x23f)](),{'left':_0x278d89[_0x11d8fc(0x2f5)]('\x20')['trim'](),'gp':_0xc8f0f3};}return{'left':_0x51a085[_0x11d8fc(0x2e1)](),'gp':null};}function parseLockCommandOneLine(_0x37f4ea){const _0x844188=_0x53c13d,_0x3692fa=(_0x37f4ea||'')['split'](/\r?\n/)[0x251a+-0x1e4d*0x1+-0x6cd][_0x844188(0x2e1)]();let _0x20a689=_0x3692fa[_0x844188(0x2b8)](/^\/?lock\b/i,'')['trim']();const {left:_0x3ba086,gp:_0x3610ca}=splitRestForGp(_0x20a689),_0x548e33=(_0x3ba086||'')['split'](',')['map'](_0x2eb8cc=>_0x2eb8cc[_0x844188(0x2e1)]())[_0x844188(0x294)](Boolean);return{'triggers':_0x548e33,'gp':_0x3610ca};}function parseUnlockCommandOneLine(_0x1ec6a9){const _0x8e9603=_0x53c13d,_0x26d1ab=(_0x1ec6a9||'')[_0x8e9603(0x282)](/\r?\n/)[0xb6c+-0x69f*0x2+0x1d2*0x1][_0x8e9603(0x2e1)]();let _0x506164=_0x26d1ab['replace'](/^\/?unlock\b/i,'')[_0x8e9603(0x2e1)]();const {left:_0x4f8c92,gp:_0x92597a}=splitRestForGp(_0x506164),_0x106af3=(_0x4f8c92||'')[_0x8e9603(0x282)](',')[_0x8e9603(0xfd)](_0x5264a8=>_0x5264a8['trim']())[_0x8e9603(0x294)](Boolean);return{'parts':_0x106af3,'gp':_0x92597a};}function parseListCommandOneLine(_0x54fd62){const _0x71e809=_0x53c13d,_0x5322d7=(_0x54fd62||'')[_0x71e809(0x282)](/\r?\n/)[-0xc68+0x51*0x75+-0x189d][_0x71e809(0x2e1)]();let _0x43997c=_0x5322d7[_0x71e809(0x2b8)](/^\/?listlock\b/i,'')[_0x71e809(0x2e1)]();const {left:_0x2b5812,gp:_0x52f966}=splitRestForGp(_0x43997c),_0x3f5b34=_0x52f966||(_0x2b5812?_0x2b5812:null);return{'gp':_0x3f5b34};}function parseLockNotifyCommandOneLine(_0x3fb810){const _0x959810=_0x53c13d,_0x26c1c6=(_0x3fb810||'')[_0x959810(0x282)](/\r?\n/)[-0x5f+0xc57+-0x1*0xbf8][_0x959810(0x2e1)]();let _0x1518fa=_0x26c1c6[_0x959810(0x2b8)](/^\/?locknotify\b/i,'')[_0x959810(0x2e1)]();const {left:_0x22574b,gp:_0x349759}=splitRestForGp(_0x1518fa),_0x59bbb6=(_0x22574b||'')[_0x959810(0x2bb)+'e']();let _0xddeb56=null;if(_0x59bbb6['includes']('on'))_0xddeb56='on';else{if(_0x59bbb6[_0x959810(0x1f2)](_0x959810(0x288)))_0xddeb56=_0x959810(0x288);}return{'mode':_0xddeb56,'gp':_0x349759};}async function validateStoredRegexes(){const _0x163505=_0x53c13d;try{const _0x9f4166=await db[_0x163505(0x24e)]('SELECT\x20id,'+_0x163505(0x30a)+'OM\x20locks\x20W'+'HERE\x20type\x20'+_0x163505(0x140)+_0x163505(0x199)+_0x163505(0x26d)+_0x163505(0x1d4));for(const _0x2c035d of _0x9f4166||[]){try{new RegExp(_0x2c035d[_0x163505(0xe1)]),await db['run'](_0x163505(0x1b9)+_0x163505(0x22e)+_0x163505(0xf9)+'x\x20=\x201\x20WHER'+_0x163505(0x12e),[_0x2c035d['id']]);}catch(_0x304cdf){await db[_0x163505(0x171)](_0x163505(0x1b9)+_0x163505(0x22e)+_0x163505(0xf9)+'x\x20=\x200\x20WHER'+_0x163505(0x12e),[_0x2c035d['id']]);}}}catch(_0x12f970){warn(_0x163505(0x1c9)+'idateStore'+_0x163505(0x1dd)+'rror:\x20'+(_0x12f970?.[_0x163505(0x214)]||_0x12f970));}}async function findStoredMatchFromFindings(_0x10fc31=[]){const _0x5f1ccf=_0x53c13d;try{const _0x19e632=await listSudo();if(!Array[_0x5f1ccf(0x263)](_0x19e632)||_0x19e632[_0x5f1ccf(0x1c6)]===-0x48e+-0x660*-0x2+-0x832)return null;const _0x55de1f=new Set(_0x19e632[_0x5f1ccf(0xfd)](String));for(const _0xbcae5a of _0x10fc31||[]){if(!_0xbcae5a||typeof _0xbcae5a[_0x5f1ccf(0x13d)]!==_0x5f1ccf(0x283))continue;const _0x2c538a=normalizeToJid(_0xbcae5a[_0x5f1ccf(0x13d)]);if(_0x2c538a&&_0x55de1f[_0x5f1ccf(0x226)](_0x2c538a))return _0x2c538a;if(_0x55de1f[_0x5f1ccf(0x226)](_0xbcae5a[_0x5f1ccf(0x13d)]))return _0xbcae5a['jid'];const _0x2623ad=String(_0xbcae5a[_0x5f1ccf(0x13d)])['split']('@')[0x19e2*-0x1+-0x2633+0x4015][_0x5f1ccf(0x282)](':')[0x1*-0x175f+-0x1d30+0x348f];if(_0x2623ad)for(const _0x3fec1a of _0x19e632){const _0x1f3fd1=String(_0x3fec1a)[_0x5f1ccf(0x282)]('@')[0x164f+-0x734+-0x509*0x3];if(_0x1f3fd1&&_0x1f3fd1===_0x2623ad)return _0x3fec1a;}}return null;}catch(_0x3158e9){return warn(_0x5f1ccf(0x2f8)+_0x5f1ccf(0x261)+'chFromFind'+_0x5f1ccf(0x26b)+':\x20'+(_0x3158e9?.[_0x5f1ccf(0x214)]||_0x3158e9)),null;}}export async function initialize(_0x44ae80){const _0x50ca1e=_0x53c13d;if(!_0x44ae80)throw new Error('lock.initi'+_0x50ca1e(0x11e)+_0x50ca1e(0x2c9)+'nstance');botRef=_0x44ae80,setupSendApi();try{const _0x4a98b5=getConfig()||{},_0x3d6b2c=_0x4a98b5&&_0x4a98b5[_0x50ca1e(0x184)]?_0x4a98b5[_0x50ca1e(0x184)]:{};CFG[_0x50ca1e(0x24c)+'ABLED']=_0x3d6b2c[_0x50ca1e(0x24c)+'ABLED']??DEFAULTS[_0x50ca1e(0x24c)+_0x50ca1e(0x148)],CFG[_0x50ca1e(0x284)+'NG']=_0x3d6b2c['SEND_WARNI'+'NG']??DEFAULTS[_0x50ca1e(0x284)+'NG'],CFG[_0x50ca1e(0x15b)+_0x50ca1e(0x2f6)]=_0x3d6b2c[_0x50ca1e(0x15b)+_0x50ca1e(0x2f6)]??DEFAULTS['WARNING_ME'+'SSAGE'],CFG[_0x50ca1e(0x1db)+_0x50ca1e(0x188)]=Number['isInteger'](_0x3d6b2c[_0x50ca1e(0x1db)+'L_MS'])?_0x3d6b2c[_0x50ca1e(0x1db)+'L_MS']:DEFAULTS[_0x50ca1e(0x1db)+_0x50ca1e(0x188)],CFG[_0x50ca1e(0x156)+_0x50ca1e(0x298)]=Number[_0x50ca1e(0x210)](_0x3d6b2c[_0x50ca1e(0x156)+'UEUE_LIMIT'])?_0x3d6b2c[_0x50ca1e(0x156)+'UEUE_LIMIT']:DEFAULTS[_0x50ca1e(0x156)+_0x50ca1e(0x298)],CFG[_0x50ca1e(0x2cf)]=Number[_0x50ca1e(0x210)](_0x3d6b2c['BATCH_SIZE'])?_0x3d6b2c['BATCH_SIZE']:DEFAULTS[_0x50ca1e(0x2cf)],CFG[_0x50ca1e(0x29e)+'Y_MS']=Number['isInteger'](_0x3d6b2c[_0x50ca1e(0x29e)+_0x50ca1e(0x2c2)])?_0x3d6b2c[_0x50ca1e(0x29e)+_0x50ca1e(0x2c2)]:DEFAULTS[_0x50ca1e(0x29e)+'Y_MS'],CFG[_0x50ca1e(0x1a0)+_0x50ca1e(0x130)]=Number[_0x50ca1e(0x210)](_0x3d6b2c[_0x50ca1e(0x1a0)+_0x50ca1e(0x130)])?_0x3d6b2c[_0x50ca1e(0x1a0)+_0x50ca1e(0x130)]:DEFAULTS['GLOBAL_CON'+_0x50ca1e(0x130)],CFG[_0x50ca1e(0x27e)+_0x50ca1e(0x230)+_0x50ca1e(0x1fb)]=!!_0x3d6b2c[_0x50ca1e(0x27e)+_0x50ca1e(0x230)+_0x50ca1e(0x1fb)];}catch(_0x1d4f6e){warn('[lock]\x20con'+'fig\x20load\x20f'+'ailed,\x20usi'+_0x50ca1e(0x2b9)+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info(_0x50ca1e(0x137)+_0x50ca1e(0x278)+_0x50ca1e(0x110)+_0x50ca1e(0x250)+_0x50ca1e(0x12c)+_0x50ca1e(0x1ee));}catch(_0x560c20){error(_0x560c20,_0x50ca1e(0x137)+_0x50ca1e(0x123)+_0x50ca1e(0x11c));throw _0x560c20;}}export async function onMessage(_0x29b4cf){const _0x560ad1=_0x53c13d;try{if(!_0x29b4cf||!_0x29b4cf[_0x560ad1(0x1a8)]||!_0x29b4cf['message'])return;const _0x8a8d61=_0x29b4cf[_0x560ad1(0x1a8)]?.['id']||_0x29b4cf[_0x560ad1(0x1a8)]?.[_0x560ad1(0x18e)+'t']||(_0x29b4cf[_0x560ad1(0x1a8)]?.[_0x560ad1(0x267)]?_0x560ad1(0x267):''),_0x2eb4a3=String(_0x29b4cf[_0x560ad1(0x1a8)][_0x560ad1(0x1a3)]||'')+'::'+String(_0x8a8d61||'');if(isProcessed(_0x2eb4a3))return;markProcessed(_0x2eb4a3);const _0x36aa9c=extractTextFromMessage(_0x29b4cf);if(!_0x36aa9c)return;const _0x1caaf3=_0x29b4cf[_0x560ad1(0x1a8)][_0x560ad1(0x1a3)],_0x34c288=typeof _0x1caaf3===_0x560ad1(0x283)&&_0x1caaf3['endsWith'](_0x560ad1(0x206)),_0xc93743=_0x29b4cf[_0x560ad1(0x1a8)]?.[_0x560ad1(0x18e)+'t']||_0x29b4cf[_0x560ad1(0x1a8)]?.[_0x560ad1(0x2e6)]||_0x29b4cf['key']?.[_0x560ad1(0x1a3)]||'',_0x134a91=String(_0xc93743||'')[_0x560ad1(0x282)]('@')[-0x1*-0x237e+0x1519+-0x3897*0x1];let _0x5adeb0=![];if(_0x34c288)try{_0x5adeb0=await isadmin(botRef,_0x29b4cf);}catch(_0x253d5e){warn('[lock]\x20isa'+_0x560ad1(0x265)+_0x560ad1(0xe9)),_0x5adeb0=![];}if(_0x29b4cf[_0x560ad1(0x2b3)]){const _0x50eb2b=typeof _0x29b4cf[_0x560ad1(0x175)]===_0x560ad1(0x283)&&_0x29b4cf[_0x560ad1(0x175)]['trim']()['length']?_0x29b4cf[_0x560ad1(0x175)][_0x560ad1(0x2e1)]():_0x36aa9c[_0x560ad1(0x2e1)](),_0x575eeb=(_0x50eb2b[_0x560ad1(0x282)](/\s+/)[-0x78+-0x6e8*0x5+0x2300]||'')[_0x560ad1(0x2bb)+'e']();if(!_0x34c288){const _0x4b0b01=Boolean(_0x29b4cf[_0x560ad1(0x1a8)][_0x560ad1(0x267)]);let _0x49a371=null;if(_0x4b0b01){const _0x3457a5=getBotJid();_0x49a371=_0x3457a5||_0x29b4cf['key'][_0x560ad1(0x1a3)];}else{let _0x733574=![];try{_0x733574=await isSudo(botRef,_0x29b4cf);}catch(_0x310f63){_0x733574=![];}if(!_0x733574)return;const _0x10db48=userJidFromCtx(_0x29b4cf)||{'findings':[]},_0x1da484=await findStoredMatchFromFindings(_0x10db48[_0x560ad1(0x2e2)]||[]);if(!_0x1da484)return;_0x49a371=_0x1da484;}if(!_0x49a371)return;if(_0x575eeb===_0x560ad1(0x157)){const {triggers:_0x31f5c3,gp:_0x57ddc2}=parseLockCommandOneLine(_0x50eb2b||_0x36aa9c);if(!_0x31f5c3[_0x560ad1(0x1c6)]){await sendText(_0x49a371,_0x560ad1(0x2d6)+_0x560ad1(0x197)+_0x560ad1(0x1f8)+_0x560ad1(0x258)+_0x560ad1(0x2ff)+'<alias|jid'+_0x560ad1(0x17c));return;}if(!_0x57ddc2){await sendText(_0x49a371,_0x560ad1(0x128)+_0x560ad1(0x19f)+_0x560ad1(0xe0)+_0x560ad1(0x135)+_0x560ad1(0x15d)+'bad2\x20gp:al'+'ias');return;}let _0xce99d4=[];const _0x990e25=_0x57ddc2[_0x560ad1(0x2e1)]();if(_0x990e25[_0x560ad1(0x2bb)+'e']()===_0x560ad1(0x24e))_0xce99d4=await _0x16a868[_0x560ad1(0x193)+_0x560ad1(0x18a)]();else{const _0x10e11d=await _0x16a868[_0x560ad1(0x2da)+'e'](_0x990e25);if(_0x10e11d)_0xce99d4=[_0x10e11d];else{if(_0x990e25[_0x560ad1(0x1f2)]('@'))_0xce99d4=[_0x16a868['normalizeT'+_0x560ad1(0x30b)](_0x990e25)];else{await sendText(_0x49a371,_0x560ad1(0x1bb)+_0x560ad1(0x2a7)+_0x560ad1(0x1c8)+_0x990e25+'\x22.');return;}}}let _0x2f7fe8=-0x1ff6+-0x8fe*0x1+-0xa3d*-0x4;for(const _0x1578e6 of uniqArray(_0xce99d4)){for(const _0x551d3a of _0x31f5c3){const _0x159b2c=await addLock(_0x1578e6,_0x551d3a,_0xc93743);if(_0x159b2c)_0x2f7fe8++;}}await sendText(_0x49a371,_0x560ad1(0xe7)+_0x2f7fe8+_0x560ad1(0x21a));return;}if(_0x575eeb===_0x560ad1(0x117)){const {gp:_0x3482ec}=parseListCommandOneLine(_0x50eb2b||_0x36aa9c);if(!_0x3482ec){await sendText(_0x49a371,_0x560ad1(0x2d6)+_0x560ad1(0x197)+_0x560ad1(0x26a)+_0x560ad1(0x27d)+_0x560ad1(0x115));return;}let _0x444e7c=[];if(_0x3482ec[_0x560ad1(0x2bb)+'e']()===_0x560ad1(0x24e))_0x444e7c=await _0x16a868[_0x560ad1(0x193)+_0x560ad1(0x18a)]();else{const _0x461bcd=await _0x16a868[_0x560ad1(0x2da)+'e'](_0x3482ec);if(_0x461bcd)_0x444e7c=[_0x461bcd];else{if(_0x3482ec[_0x560ad1(0x1f2)]('@'))_0x444e7c=[_0x16a868[_0x560ad1(0x1c5)+_0x560ad1(0x30b)](_0x3482ec)];else{await sendText(_0x49a371,_0x560ad1(0x1bb)+_0x560ad1(0x2a7)+_0x560ad1(0x1c8)+_0x3482ec+'\x22.');return;}}}let _0x3b1122=[];for(const _0x7bdc53 of _0x444e7c){const _0x13f613=await listLocksForChat(_0x7bdc53);for(const _0x5b5f1e of _0x13f613)_0x3b1122['push']({'chatJid':_0x7bdc53,..._0x5b5f1e});}await sendText(_0x49a371,_0x560ad1(0x29d)+_0x3b1122['length']+(_0x560ad1(0x25c)+'ded\x20for\x20re'+_0x560ad1(0x1c7)+_0x560ad1(0x19a)));if(!_0x3b1122[_0x560ad1(0x1c6)])return;let _0x5c561b='';for(const _0x37b02c of _0x3b1122){const _0x10d2eb=_0x37b02c[_0x560ad1(0x2ce)]?new Date(_0x37b02c[_0x560ad1(0x2ce)]*(0x533+0x5*-0x397+-0x8*-0x215))[_0x560ad1(0x1be)+'g']()[_0x560ad1(0x303)](0x329+-0x2243+-0xa5e*-0x3,-0x206a+-0x5*-0x1b3+-0x1*-0x17f5):'',_0xe1c94b=_0x37b02c[_0x560ad1(0x28d)]===_0x560ad1(0x196)?'⦿':_0x37b02c[_0x560ad1(0x28d)]==='wildcard'?'✶':'',_0x1b3e3e=_0x37b02c[_0x560ad1(0x28d)]===_0x560ad1(0x196)?'regex:'+_0x37b02c[_0x560ad1(0xe1)]:_0x37b02c['phrase'],_0x3c27e1=_0x37b02c[_0x560ad1(0x28d)]===_0x560ad1(0x196)&&_0x37b02c['is_valid_r'+_0x560ad1(0x169)]===-0x215b+0x1807*-0x1+0x3962?_0x560ad1(0x21c)+_0x560ad1(0x124):'',_0x2989d2=_0x37b02c[_0x560ad1(0x2a8)]+':'+_0x37b02c['id']+'.\x20'+(_0xe1c94b?_0xe1c94b+'\x20':'')+_0x1b3e3e+_0x3c27e1+'\x20'+(_0x10d2eb?'('+_0x10d2eb+')':'')+'\x0a';(_0x5c561b+_0x2989d2)[_0x560ad1(0x1c6)]>-0x13*0x4f+0x9e*0x1+0xb1b&&(await sendText(_0x49a371,_0x5c561b[_0x560ad1(0x2e1)]()),_0x5c561b=''),_0x5c561b+=_0x2989d2;}if(_0x5c561b[_0x560ad1(0x2e1)]())await sendText(_0x49a371,_0x5c561b[_0x560ad1(0x2e1)]());return;}if(['unlock','dellock',_0x560ad1(0x182),_0x560ad1(0x2af),_0x560ad1(0x182)][_0x560ad1(0x1f2)](_0x575eeb)){const {parts:_0x1a6310,gp:_0x225776}=parseUnlockCommandOneLine(_0x50eb2b||_0x36aa9c);if(!_0x1a6310?.[_0x560ad1(0x1c6)]){await sendText(_0x49a371,_0x560ad1(0x2d6)+_0x560ad1(0x197)+':\x20unlock\x20<'+_0x560ad1(0x2df)+_0x560ad1(0x2ab)+'eparated>\x20'+'gp:<alias|'+'jid|all>');return;}if(!_0x225776){await sendText(_0x49a371,_0x560ad1(0x128)+_0x560ad1(0x19f)+_0x560ad1(0xe0)+_0x560ad1(0x135)+_0x560ad1(0x2b7)+_0x560ad1(0x1d1));return;}let _0x4bcedf=[];const _0x5947a6=_0x225776[_0x560ad1(0x2e1)]();if(_0x5947a6['toLowerCas'+'e']()==='all')_0x4bcedf=await _0x16a868[_0x560ad1(0x193)+_0x560ad1(0x18a)]();else{const _0x543d1d=await _0x16a868[_0x560ad1(0x2da)+'e'](_0x5947a6);if(_0x543d1d)_0x4bcedf=[_0x543d1d];else{if(_0x5947a6[_0x560ad1(0x1f2)]('@'))_0x4bcedf=[_0x16a868['normalizeT'+_0x560ad1(0x30b)](_0x5947a6)];else{await sendText(_0x49a371,_0x560ad1(0x1bb)+'gp\x20alias/j'+_0x560ad1(0x1c8)+_0x5947a6+'\x22.');return;}}}let _0x39bd30=-0x1418*-0x1+-0x3*0x364+-0x9ec;for(const _0x95a3b7 of _0x1a6310){if(!_0x95a3b7)continue;if(/^\d+$/[_0x560ad1(0x27b)](_0x95a3b7)){for(const _0xabd850 of _0x4bcedf){const _0x15cfad=await deleteLockById(_0xabd850,_0x95a3b7);if(_0x15cfad)_0x39bd30+=_0x15cfad;}continue;}for(const _0x57f633 of _0x4bcedf){const _0x558ed7=await deleteLockByPhrase(_0x57f633,_0x95a3b7);if(_0x558ed7)_0x39bd30+=_0x558ed7;}}await sendText(_0x49a371,_0x560ad1(0x2d7)+_0x39bd30+'/'+_0x1a6310[_0x560ad1(0x1c6)]+_0x560ad1(0x21a));return;}if(_0x575eeb===_0x560ad1(0x2c0)||_0x575eeb===_0x560ad1(0x1dc)||_0x575eeb==='clearlocks'){const _0x162fac=(_0x50eb2b||_0x36aa9c||'')[_0x560ad1(0x282)](/\r?\n/)[0x1999+0x1e23+-0x2*0x1bde][_0x560ad1(0x2e1)](),_0x21e9d8=_0x162fac[_0x560ad1(0x2b8)](/^\/?(unlockall|delall|clearlocks)\b/i,'')['trim'](),{left:_0x238064,gp:_0x4cb1cd}=splitRestForGp(_0x21e9d8);if(!_0x4cb1cd){await sendText(_0x49a371,_0x560ad1(0x2d6)+_0x560ad1(0x197)+_0x560ad1(0x1e8)+_0x560ad1(0x1aa)+_0x560ad1(0x223));return;}let _0xff09f5=[];const _0x23d57a=_0x4cb1cd[_0x560ad1(0x2e1)]();if(_0x23d57a[_0x560ad1(0x2bb)+'e']()==='all')_0xff09f5=await _0x16a868[_0x560ad1(0x193)+'ids']();else{const _0x3d36b4=await _0x16a868[_0x560ad1(0x2da)+'e'](_0x23d57a);if(_0x3d36b4)_0xff09f5=[_0x3d36b4];else{if(_0x23d57a[_0x560ad1(0x1f2)]('@'))_0xff09f5=[_0x16a868[_0x560ad1(0x1c5)+_0x560ad1(0x30b)](_0x23d57a)];else{await sendText(_0x49a371,'❌\x20Unknown\x20'+_0x560ad1(0x2a7)+_0x560ad1(0x1c8)+_0x23d57a+'\x22.');return;}}}let _0x3130da=0x0+0x96b+-0x1*0x96b;for(const _0xa1632f of _0xff09f5){const _0x15ddf1=await deleteAllLocksForChat(_0xa1632f);_0x3130da+=_0x15ddf1||-0x60d+0x1c10+-0x1603;}await sendText(_0x49a371,_0x560ad1(0x2d7)+_0x3130da+_0x560ad1(0x21a));return;}if(_0x575eeb===_0x560ad1(0x11a)){const _0x5284e1=parseLockNotifyCommandOneLine(_0x50eb2b||_0x36aa9c),{mode:_0x2cf00f,gp:_0x2c3192}=_0x5284e1;if(!_0x2c3192){await sendText(_0x49a371,_0x560ad1(0x269)+_0x560ad1(0x1e7)+_0x560ad1(0x119)+_0x560ad1(0x1e3)+_0x560ad1(0x27d)+'|jid|all>\x0a'+_0x560ad1(0x28a)+'tatus:\x20loc'+_0x560ad1(0x1b3)+_0x560ad1(0x129)+_0x560ad1(0x1bc));return;}let _0xd39cd=[];const _0x58ac53=_0x2c3192[_0x560ad1(0x2e1)]();if(_0x58ac53['toLowerCas'+'e']()===_0x560ad1(0x24e))_0xd39cd=await _0x16a868['getUniqueJ'+'ids']();else{const _0x542b84=await _0x16a868['resolveNam'+'e'](_0x58ac53);if(_0x542b84)_0xd39cd=[_0x542b84];else{if(_0x58ac53['includes']('@'))_0xd39cd=[_0x16a868['normalizeT'+_0x560ad1(0x30b)](_0x58ac53)];else{await sendText(_0x49a371,_0x560ad1(0x1bb)+_0x560ad1(0x2a7)+_0x560ad1(0x1c8)+_0x58ac53+'\x22.');return;}}}if(!_0x2cf00f){const _0x248729=[];for(const _0x376155 of uniqArray(_0xd39cd)){const _0x4a6916=await getLockNotify(_0x376155)[_0x560ad1(0x292)](()=>-0xd90+-0x158b+-0x331*-0xb);_0x248729[_0x560ad1(0x2b4)](_0x376155+':\x20'+(_0x4a6916?'ON':_0x560ad1(0x104)));}await sendText(_0x49a371,_0x560ad1(0x221)+_0x560ad1(0x1e0)+_0x560ad1(0x2ef)+_0x248729[_0x560ad1(0x2f5)]('\x0a'));return;}let _0x2b19ed=-0x1e70+-0x1*-0x78b+0x16e5;for(const _0x201337 of uniqArray(_0xd39cd)){const _0x3c36b8=await setLockNotify(_0x201337,_0x2cf00f==='on');if(_0x3c36b8)_0x2b19ed++;}await sendText(_0x49a371,_0x560ad1(0x272)+_0x560ad1(0xe3)+_0x2cf00f+_0x560ad1(0x256)+_0x2b19ed+'/'+_0xd39cd['length']+('\x20target(s)'+'.'));return;}return;}if(_0x34c288){if(!_0x5adeb0)return;const _0x1ea562=_0x1caaf3,_0x2a5dd1=await getDefault(_0x134a91)[_0x560ad1(0x292)](()=>null);if(!_0x2a5dd1||Array[_0x560ad1(0x263)](_0x2a5dd1)&&_0x2a5dd1[_0x560ad1(0x1c6)]===0x905+0xa0f+-0x1314)return;const _0x9bb91f=Array[_0x560ad1(0x263)](_0x2a5dd1)?_0x2a5dd1:[_0x2a5dd1];let _0x63ffb5=[];for(const _0x36167b of _0x9bb91f){try{const _0x30e4d8=await getConnection(_0x36167b)[_0x560ad1(0x292)](()=>null);if(Array['isArray'](_0x30e4d8))_0x63ffb5[_0x560ad1(0x2b4)](..._0x30e4d8);else{if(_0x30e4d8)_0x63ffb5[_0x560ad1(0x2b4)](String(_0x30e4d8));}}catch(_0x53885e){warn(_0x560ad1(0x13a)+_0x560ad1(0x1af)+_0x560ad1(0x273)+_0x36167b+_0x560ad1(0x176)+(_0x53885e?.[_0x560ad1(0x214)]||_0x53885e));}}_0x63ffb5=uniqArray(_0x63ffb5);if(!_0x63ffb5[_0x560ad1(0x1c6)]){await sendText(_0x1ea562,'❌\x20Could\x20no'+'t\x20resolve\x20'+_0x560ad1(0x301)+'lt\x20connect'+_0x560ad1(0x166)+_0x9bb91f['join'](',\x20')+(_0x560ad1(0x17b)+_0x560ad1(0x213)+_0x560ad1(0x2e5)+_0x560ad1(0x2b2)));return;}if(_0x575eeb==='lock'){const {triggers:_0x231d9e}=parseLockCommandOneLine(_0x50eb2b||_0x36aa9c);if(!_0x231d9e[_0x560ad1(0x1c6)]){await sendText(_0x1ea562,_0x560ad1(0x2eb)+_0x560ad1(0x243)+_0x560ad1(0x164)+_0x560ad1(0x2ad)+_0x560ad1(0x249));return;}let _0xafe430=-0xa59+0x6cd*-0x2+0x1*0x17f3;for(const _0x3e9259 of _0x63ffb5){let _0x4afe9f=-0x57*0x3f+0x1*-0x26f+0x17d8;for(const _0x376bc8 of _0x231d9e){const _0x2e23ce=await addLock(_0x3e9259,_0x376bc8,_0xc93743);if(_0x2e23ce)_0x4afe9f++;}_0xafe430+=_0x4afe9f;}await sendText(_0x1ea562,'✔️\x20Saved\x20'+_0xafe430+'/'+_0x231d9e[_0x560ad1(0x1c6)]*_0x63ffb5[_0x560ad1(0x1c6)]+('\x20lock\x20entr'+'ies\x20to\x20you'+_0x560ad1(0x158)+'connection'+_0x560ad1(0x111))+_0x63ffb5['join'](',\x20'));return;}if(_0x575eeb===_0x560ad1(0x117)){const _0x39d6e8=[];for(const _0x2e7d7d of _0x63ffb5){const _0x3860d5=await listLocksForChat(_0x2e7d7d);for(const _0x4a061c of _0x3860d5)_0x39d6e8[_0x560ad1(0x2b4)]({'chatJid':_0x2e7d7d,..._0x4a061c});}await sendText(_0x1ea562,_0x560ad1(0x221)+_0x560ad1(0x21f)+_0x39d6e8[_0x560ad1(0x1c6)]+(_0x560ad1(0xf0)+_0x560ad1(0x309)+'ult\x20connec'+_0x560ad1(0x1b0))+_0x63ffb5['join'](',\x20'));if(!_0x39d6e8[_0x560ad1(0x1c6)])return;let _0x5bb741='';for(const _0x9e5f57 of _0x39d6e8){const _0x1b8e4b=_0x9e5f57[_0x560ad1(0x2ce)]?new Date(_0x9e5f57[_0x560ad1(0x2ce)]*(-0x3*-0xb4d+0x254d+0x92*-0x76))[_0x560ad1(0x1be)+'g']()[_0x560ad1(0x303)](0xf*-0x1c1+0x15*-0x1aa+0x3d41,-0x2a2*-0xe+-0xfc9+-0x1509):'',_0x581d35=_0x9e5f57[_0x560ad1(0x28d)]===_0x560ad1(0x196)?'⦿':_0x9e5f57['type']==='wildcard'?'✶':'',_0x3cc4c9=_0x9e5f57['type']==='regex'?'regex:'+_0x9e5f57[_0x560ad1(0xe1)]:_0x9e5f57[_0x560ad1(0xe1)],_0x226825=_0x9e5f57[_0x560ad1(0x28d)]===_0x560ad1(0x196)&&_0x9e5f57['is_valid_r'+_0x560ad1(0x169)]===-0x1ad9*0x1+-0x464*-0x6+0x3*0x2b?_0x560ad1(0x21c)+_0x560ad1(0x124):'',_0x26d311=_0x9e5f57['chatJid']+':'+_0x9e5f57['id']+'.\x20'+(_0x581d35?_0x581d35+'\x20':'')+_0x3cc4c9+_0x226825+'\x20'+(_0x1b8e4b?'('+_0x1b8e4b+')':'')+'\x0a';(_0x5bb741+_0x26d311)['length']>-0x1*0x14d5+0x21*0x9e+0x653*0x1&&(await sendText(_0x1ea562,_0x5bb741['trim']()),_0x5bb741=''),_0x5bb741+=_0x26d311;}if(_0x5bb741[_0x560ad1(0x2e1)]())await sendText(_0x1ea562,_0x5bb741[_0x560ad1(0x2e1)]());return;}if([_0x560ad1(0x29a),_0x560ad1(0x218),_0x560ad1(0x182),_0x560ad1(0x2af),'delock'][_0x560ad1(0x1f2)](_0x575eeb)){const {parts:_0x50e774}=parseUnlockCommandOneLine(_0x50eb2b||_0x36aa9c);if(!_0x50e774?.[_0x560ad1(0x1c6)]){await sendText(_0x1ea562,_0x560ad1(0x2eb)+'roup-only)'+':\x20unlock\x201'+_0x560ad1(0x2f0)+'ck\x20phrase1'+_0x560ad1(0x1cd));return;}const _0x2bbe44=new Map();for(const _0x2321e7 of _0x63ffb5){const _0xab76bd=await listLocksForChat(_0x2321e7);_0x2bbe44[_0x560ad1(0x1f4)](_0x2321e7,_0xab76bd||[]);}let _0x47385e=0x136+-0x1db4+-0xe*-0x209;for(const _0x340c6a of _0x50e774){if(!_0x340c6a)continue;if(/^\d+$/[_0x560ad1(0x27b)](_0x340c6a)){for(const [_0x1a29b7,_0x330b26]of _0x2bbe44[_0x560ad1(0x20d)]()){if(_0x330b26[_0x560ad1(0x1d2)](_0x2b8081=>String(_0x2b8081['id'])===_0x340c6a)){const _0x24877b=await deleteLockById(_0x1a29b7,_0x340c6a);if(_0x24877b)_0x47385e+=_0x24877b;}}continue;}for(const _0x240efe of _0x63ffb5){const _0x52ba9f=await deleteLockByPhrase(_0x240efe,_0x340c6a);if(_0x52ba9f)_0x47385e+=_0x52ba9f;}}await sendText(_0x1ea562,_0x560ad1(0x2d7)+_0x47385e+'/'+_0x50e774[_0x560ad1(0x1c6)]+(_0x560ad1(0x179)+_0x560ad1(0x10e)+_0x560ad1(0x2a9)+'nection(s)'+':\x20')+_0x63ffb5[_0x560ad1(0x2f5)](',\x20'));return;}if(_0x575eeb===_0x560ad1(0x2c0)||_0x575eeb===_0x560ad1(0x1dc)||_0x575eeb===_0x560ad1(0x313)){try{let _0x53e838=0xb*0x1cd+0x81d+-0x1bec;for(const _0x166e1d of _0x63ffb5){const _0x47b7db=await deleteAllLocksForChat(_0x166e1d);_0x53e838+=_0x47b7db||0xd*-0xad+-0x4*0x556+0x1e21*0x1;}await sendText(_0x1ea562,_0x560ad1(0x2d7)+_0x53e838+('\x20lock(s)\x20f'+_0x560ad1(0x10e)+_0x560ad1(0x2a9)+'nection(s)'+':\x20')+_0x63ffb5[_0x560ad1(0x2f5)](',\x20'));}catch(_0x26d6d7){warn(_0x560ad1(0x2aa)+_0x560ad1(0x259)+_0x560ad1(0x180)+_0x63ffb5[_0x560ad1(0x2f5)](',\x20')+':\x20'+(_0x26d6d7?.[_0x560ad1(0x214)]||_0x26d6d7)),await sendText(_0x1ea562,_0x560ad1(0x12b)+_0x560ad1(0x2d2)+'ocks\x20for\x20y'+_0x560ad1(0xea)+_0x560ad1(0x101)+_0x560ad1(0xeb)+_0x63ffb5['join'](',\x20'));}return;}if(_0x575eeb===_0x560ad1(0x11a)){const _0x240c14=(_0x50eb2b||_0x36aa9c||'')[_0x560ad1(0x282)](/\r?\n/)[0x4e7*0x4+-0x3e7+-0x1*0xfb5][_0x560ad1(0x2e1)](),{left:_0x22dd54}=splitRestForGp(_0x240c14[_0x560ad1(0x2b8)](/^\/?locknotify\b/i,'')[_0x560ad1(0x2e1)]()),_0x21ac93=(_0x22dd54||'')[_0x560ad1(0x2bb)+'e']();if(!_0x21ac93[_0x560ad1(0x1f2)]('on')&&!_0x21ac93[_0x560ad1(0x1f2)](_0x560ad1(0x288))){await sendText(_0x1ea562,_0x560ad1(0x2eb)+_0x560ad1(0x243)+_0x560ad1(0x203)+'fy\x20on|off\x0a'+'This\x20toggl'+_0x560ad1(0x121)+_0x560ad1(0x1b1)+_0x560ad1(0x1d5)+_0x560ad1(0x227)+_0x560ad1(0x254)+_0x560ad1(0x16f));return;}const _0x29f440=_0x21ac93['includes']('on')?'on':'off';let _0x3c4ac8=0x1e7*0x11+-0x1d5*-0xe+-0x39fd;for(const _0x1fddc1 of _0x63ffb5){const _0x4e31db=await setLockNotify(_0x1fddc1,_0x29f440==='on');if(_0x4e31db)_0x3c4ac8++;}await sendText(_0x1ea562,_0x560ad1(0x272)+_0x560ad1(0xe3)+_0x29f440+_0x560ad1(0x256)+_0x3c4ac8+'/'+_0x63ffb5[_0x560ad1(0x1c6)]+(_0x560ad1(0x290)+_0x560ad1(0x254)+'s).'));return;}return;}}if(_0x34c288){if(!CFG[_0x560ad1(0x24c)+_0x560ad1(0x148)])return;if(_0x29b4cf[_0x560ad1(0x1a8)][_0x560ad1(0x267)])return;if(_0x5adeb0)return;const _0x4ca294=_0x1caaf3,_0x526b26=extractTextFromMessage(_0x29b4cf);if(!_0x526b26)return;const _0x610b67=normalizeForMatch(String(_0x526b26||''))[_0x560ad1(0x2bb)+'e'](),_0x2a21fa=await listLocksForChat(_0x4ca294);if(!_0x2a21fa||!_0x2a21fa[_0x560ad1(0x1c6)])return;const _0x3b04e1=_0x2a21fa[_0x560ad1(0x294)](_0x7d9014=>!_0x7d9014[_0x560ad1(0x28d)]||_0x7d9014['type']===_0x560ad1(0x1d0)),_0x203a2f=_0x2a21fa[_0x560ad1(0x294)](_0x3f7671=>_0x3f7671[_0x560ad1(0x28d)]==='wildcard'),_0x348c45=_0x2a21fa[_0x560ad1(0x294)](_0xcce4fd=>_0xcce4fd['type']===_0x560ad1(0x196)||_0xcce4fd[_0x560ad1(0x28d)]===_0x560ad1(0x246)+_0x560ad1(0x276)),_0x24e9a1=new Set(),_0x528de3=new Set();if(_0x3b04e1[_0x560ad1(0x1c6)]>0x2bd+-0x1*0x6a1+0x3e4){const _0x1d9d84=_0x3b04e1[_0x560ad1(0xfd)](_0x22a328=>normalizeForMatch(String(_0x22a328[_0x560ad1(0xe1)]||'')))[_0x560ad1(0x294)](Boolean),_0x4c9315=_0x1d9d84[_0x560ad1(0x2f5)]('\x00');let _0x277113;const _0xe414a9=ahoCache[_0x560ad1(0x275)](_0x4ca294);if(_0xe414a9&&_0xe414a9[_0x560ad1(0x1bd)+_0x560ad1(0x2f9)]===_0x4c9315&&_0xe414a9['aho'])_0x277113=_0xe414a9['aho'];else try{_0x277113=new AhoCorasick(_0x1d9d84),ahoCache['set'](_0x4ca294,{'serializedKeywords':_0x4c9315,'aho':_0x277113});}catch(_0x4f1d99){warn('[lock]\x20Aho'+'Corasick\x20b'+'uild\x20faile'+_0x560ad1(0x1da)+_0x4ca294+':\x20'+(_0x4f1d99?.['message']||_0x4f1d99)),_0x277113=null;}if(_0x277113)try{const _0x41efeb=_0x277113[_0x560ad1(0x139)](_0x610b67);for(const _0x10dd07 of _0x41efeb){const _0xae507c=_0x10dd07['keyword'],_0x5c562d=_0x10dd07['index'],_0x58be07=_0x5c562d+_0xae507c[_0x560ad1(0x1c6)],_0x2f3ac4=_0x5c562d===-0x1259+-0x279+0x14d2*0x1||!/\w/[_0x560ad1(0x27b)](_0x610b67[_0x5c562d-(-0x1*0x21e+0x1e2*-0x6+0xd6b)]),_0x41b256=_0x58be07===_0x610b67[_0x560ad1(0x1c6)]||!/\w/[_0x560ad1(0x27b)](_0x610b67[_0x58be07]);if(_0x2f3ac4&&_0x41b256)for(const _0x3024b7 of _0x3b04e1){const _0x551306=normalizeForMatch(String(_0x3024b7['phrase']||''));if(_0x551306===_0xae507c)try{const _0x8f1e77=wholeWordRegexForPhrase(_0x551306);_0x8f1e77[_0x560ad1(0x27b)](_0x610b67)&&(_0x24e9a1['add'](_0x3024b7['id']),_0x528de3[_0x560ad1(0x215)](_0x3024b7[_0x560ad1(0xe1)]));}catch(_0x2df82e){_0x24e9a1['add'](_0x3024b7['id']),_0x528de3[_0x560ad1(0x215)](_0x3024b7['phrase']);}}else for(const _0x1f6aec of _0x3b04e1){try{const _0x49b5b1=wholeWordRegexForPhrase(normalizeForMatch(String(_0x1f6aec[_0x560ad1(0xe1)]||'')));_0x49b5b1[_0x560ad1(0x27b)](_0x610b67)&&(_0x24e9a1[_0x560ad1(0x215)](_0x1f6aec['id']),_0x528de3[_0x560ad1(0x215)](_0x1f6aec[_0x560ad1(0xe1)]));}catch(_0x233b9c){}}}}catch(_0x5d19d5){warn('[lock]\x20Aho'+_0x560ad1(0x1b7)+_0x560ad1(0x285)+_0x560ad1(0x1b4)+(_0x5d19d5?.[_0x560ad1(0x214)]||_0x5d19d5));for(const _0x10cc06 of _0x3b04e1){try{const _0x3fef89=wholeWordRegexForPhrase(normalizeForMatch(String(_0x10cc06[_0x560ad1(0xe1)]||'')));_0x3fef89[_0x560ad1(0x27b)](_0x610b67)&&(_0x24e9a1[_0x560ad1(0x215)](_0x10cc06['id']),_0x528de3[_0x560ad1(0x215)](_0x10cc06['phrase']));}catch(_0x3d573d){}}}else for(const _0x42e42d of _0x3b04e1){try{const _0x161150=wholeWordRegexForPhrase(normalizeForMatch(String(_0x42e42d['phrase']||'')));_0x161150[_0x560ad1(0x27b)](_0x610b67)&&(_0x24e9a1['add'](_0x42e42d['id']),_0x528de3[_0x560ad1(0x215)](_0x42e42d['phrase']));}catch(_0x3caba3){}}}if(_0x203a2f[_0x560ad1(0x1c6)]>-0x6d*-0x34+0xb3*-0x30+0xb6c)for(const _0x5ddd62 of _0x203a2f){try{const _0x305601=wildcardToRegex(String(_0x5ddd62[_0x560ad1(0xe1)]||''));_0x305601['test'](_0x610b67)&&(_0x24e9a1[_0x560ad1(0x215)](_0x5ddd62['id']),_0x528de3[_0x560ad1(0x215)](_0x5ddd62[_0x560ad1(0xe1)]));}catch(_0x25fd5b){warn(_0x560ad1(0x18d)+_0x560ad1(0xfb)+_0x560ad1(0x17d)+'='+_0x5ddd62['id']+_0x560ad1(0x202)+_0x5ddd62[_0x560ad1(0xe1)]+_0x560ad1(0x141)+(_0x25fd5b?.[_0x560ad1(0x214)]||_0x25fd5b));}}if(_0x348c45[_0x560ad1(0x1c6)]>0xbbb+-0xd0f*0x1+0x55*0x4)for(const _0x255443 of _0x348c45){try{if(_0x255443[_0x560ad1(0x2c6)+'egex']===0xb*0x255+0x16f*0x17+-0x86*0x70){warn(_0x560ad1(0x1d7)+_0x560ad1(0x233)+_0x560ad1(0x1f1)+_0x560ad1(0x1de)+_0x255443['id']+_0x560ad1(0x202)+_0x255443['phrase']+'\x22');continue;}const _0x4eb813=new RegExp(_0x255443[_0x560ad1(0xe1)],'iu');_0x4eb813[_0x560ad1(0x27b)](_0x610b67)&&(_0x24e9a1[_0x560ad1(0x215)](_0x255443['id']),_0x528de3['add'](_0x560ad1(0x2d1)+_0x255443[_0x560ad1(0xe1)]));}catch(_0x5a535a){warn(_0x560ad1(0x18d)+_0x560ad1(0x308)+_0x560ad1(0x222)+_0x560ad1(0x132)+_0x255443['id']+'\x20phrase=\x22'+_0x255443[_0x560ad1(0xe1)]+_0x560ad1(0x141)+(_0x5a535a?.[_0x560ad1(0x214)]||_0x5a535a));try{await db[_0x560ad1(0x171)](_0x560ad1(0x1b9)+_0x560ad1(0x22e)+_0x560ad1(0xf9)+_0x560ad1(0x25b)+_0x560ad1(0x12e),[_0x255443['id']]);}catch(_0x27549c){}}}if(_0x24e9a1['size']>0x1*0x1fab+-0x6b9*-0x5+-0x4148*0x1)try{try{const _0x20159f=await getLockNotify(_0x4ca294)['catch'](()=>-0x963+-0x216e+-0x2ad1*-0x1);if(_0x20159f)try{const _0x1b862e=await db[_0x560ad1(0x275)]('SELECT\x20val'+'ue\x20FROM\x20de'+_0x560ad1(0x245)+_0x560ad1(0x22b)+_0x560ad1(0x113)+_0x560ad1(0x18b));let _0x3d7636=_0x1b862e?.[_0x560ad1(0x1c4)]||null;if(!_0x3d7636){const _0x3a108d=getBotJid();_0x3d7636=_0x3a108d||null;}if(_0x3d7636){const _0x189025=Array[_0x560ad1(0x2e6)](_0x528de3)[_0x560ad1(0x303)](0x35f*-0x3+0x2511+-0x14*0x159,-0x1c91+0x7b*-0x1c+-0x2a0b*-0x1)['join'](',\x20'),_0x4d0639=_0x134a91||String(_0xc93743||'')[_0x560ad1(0x282)]('@')[0x47b*0x1+0x20a+-0x685]||_0x560ad1(0x2f7),_0x32f99e=String(_0x526b26||'')[_0x560ad1(0x2e1)](),_0x24cc84=_0x560ad1(0xf4)+_0x560ad1(0x2f4)+_0x4ca294+_0x560ad1(0x186)+_0x4d0639+_0x560ad1(0x2c8)+_0x189025+'\x0aMessage:\x0a'+_0x32f99e;await sendText(_0x3d7636,_0x24cc84,_0xc93743?[_0xc93743]:[]);}}catch(_0x455a01){warn(_0x560ad1(0x14e)+'led\x20to\x20sen'+_0x560ad1(0x28e)+'fy\x20message'+':\x20'+(_0x455a01?.[_0x560ad1(0x214)]||_0x455a01));}}catch(_0x633e56){warn(_0x560ad1(0x28f)+_0x560ad1(0x172)+_0x560ad1(0x1b8)+':\x20'+(_0x633e56?.[_0x560ad1(0x214)]||_0x633e56));}enqueueDeletion(_0x29b4cf);for(const _0x108a78 of _0x24e9a1){try{await db[_0x560ad1(0x171)](_0x560ad1(0x1b9)+_0x560ad1(0x307)+_0x560ad1(0x2b6)+'it_count\x20+'+_0x560ad1(0x160)+_0x560ad1(0x2e8),[_0x108a78]);}catch(_0x43cd60){}}}catch(_0x56b5d7){warn('[lock]\x20enf'+_0x560ad1(0x2fe)+'ailed:\x20'+(_0x56b5d7?.[_0x560ad1(0x214)]||_0x56b5d7));}}}catch(_0x729179){error(_0x729179,_0x560ad1(0x16a)+_0x560ad1(0x1ec)+':\x20'+(_0x729179?.[_0x560ad1(0x214)]||_0x729179));}}export async function cleanup(){const _0x4527ee=_0x53c13d;shuttingDown=!![];for(const _0x4ba522 of processedMessageKeys[_0x4527ee(0x1a9)]())try{clearTimeout(_0x4ba522);}catch(_0xc47809){}processedMessageKeys[_0x4527ee(0x161)](),perChatQueue[_0x4527ee(0x161)](),perChatProcessing[_0x4527ee(0x161)](),activeChats=0x2466+-0x4b*0x71+0x3*-0x119,botRef=null,sendApi=null,ahoCache[_0x4527ee(0x161)](),info('[lock]\x20cle'+_0x4527ee(0x271));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};