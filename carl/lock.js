const _0x1f4923=_0x422c;(function(_0x57eb76,_0x12378c){const _0x1cddd9=_0x422c,_0x401049=_0x57eb76();while(!![]){try{const _0x58f94b=-parseInt(_0x1cddd9(0x412))/(-0xc4a+0xfa*-0x8+0x141b)*(parseInt(_0x1cddd9(0x348))/(-0x19d+0x1*-0x19d5+0x1b74))+parseInt(_0x1cddd9(0x2da))/(0x21ea+0x5*-0x43+-0x2098)*(parseInt(_0x1cddd9(0x3b1))/(0x4a5*0x5+-0x15ec+-0x149))+-parseInt(_0x1cddd9(0x386))/(-0xf49+0x22a9*-0x1+0x31f7)+parseInt(_0x1cddd9(0x2f2))/(0x93b+0x15a+0x33*-0x35)*(-parseInt(_0x1cddd9(0x392))/(0x1aa9+0x195d+-0x33ff))+-parseInt(_0x1cddd9(0x30b))/(-0xd19+0xe15+0x3d*-0x4)+parseInt(_0x1cddd9(0x3d1))/(0x281*-0xa+-0x9*0xbf+0x272*0xd)*(parseInt(_0x1cddd9(0x344))/(0x1*-0x181c+-0x9*-0x22+-0x2*-0xb7a))+parseInt(_0x1cddd9(0x32b))/(0x1c*0x138+-0x1*0x1186+0x3*-0x585);if(_0x58f94b===_0x12378c)break;else _0x401049['push'](_0x401049['shift']());}catch(_0x8283d3){_0x401049['push'](_0x401049['shift']());}}}(_0x1d07,0x7635*-0x1c+0x12*-0xf039+0x2bb380));import{getConfig}from'../utils/config.js';function _0x422c(_0xaf736e,_0x44c836){_0xaf736e=_0xaf736e-(-0x1343+0x1*-0x26e+0x179c*0x1);const _0x1048e2=_0x1d07();let _0x206fb4=_0x1048e2[_0xaf736e];return _0x206fb4;}import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';function _0x1d07(){const _0x281fac=['unlock','quested\x20ta','serialized','ult\x20connec','our\x20defaul','LOCKS','se,comma-s',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20','delock','796yqXUKO',':\x20lock\x20<tr','locks\x20WHER','fy\x20message','fs\x20(chat_j','ock_prefs\x20','\x20DEFAULT\x200','[lock]\x20ini','d\x20locknoti','[lock]\x20del','ias','t\x20connecti','on(s):\x20','REGEX)','participan','string','t\x20resolve\x20','eign_keys\x20','pping\x20inva','❌\x20Unknown\x20','SELECT\x20val','join','wildcard','O\x20lock_pre','lock\x20bad1,','[lock]\x20con',',phrase2','✔️\x20[lock]\x20','E\x20id\x20=\x20?','phrase',':\x20unlock\x20<','rgets.','99kBsQQm','\x20BY\x20id','[lock]\x20res','includes',',\x20valid=','line\x20usage',',\x20is_valid','unlocklock','eteLockByI','Keywords','ALTER\x20TABL','tification','igger1,tri','AND\x20phrase','\x20failed','ocknotify\x20','\x20table\x20(ca','\x20\x20\x20\x20\x20\x20type','=\x20\x27regex\x27\x20','set','ration\x20ins','get','aho','eteLockByP','}_]*','chat_jid,\x20','<alias|jid','cluded.not','\x20created_b','NFKC','chatid','|all>','?,\x20?,\x200,\x20?','clear','O\x20locks;','REMOVE_DIA','k_prefs\x20(c','\x20\x20UNIQUE(c',':\x20unlockal','E\x20locks_ne','EGER\x20DEFAU','e\x20TEXT\x20NOT','\x20ON\x20locks(','SSAGE','ated\x20locks','\x5cp{N}_])','map','[lock]\x20tab','[lock]\x20han','M\x20locks\x20WH','ration\x20com','jid)\x20DO\x20UP','rs\x20besides','[lock]\x20inv',':\x20listlock','pop','[lock]\x20Mat','CREATE\x20TAB','e\x20FROM\x20sql','eue\x20item\x20e','startsWith','unlock\x201,2','INTEGER\x20DE','Corasick\x20b','hat_jid\x20TE','9cSWjMw','\x20lock(s)\x20f','run)','exec','INTEGER\x20PR','plete;\x20old','fy\x20on|off\x0a','alid\x20store','[lock]\x20loc','\x20\x20\x20\x20','[lock]\x20enf','d\x20error:\x20','PRAGMA\x20for','[lock]\x20get','\x20for\x20','ust\x20contai','d_at\x20=\x20exc','_regex\x20INT','size','ated_at\x20IN','unlockall','DELETE\x20FRO','s).','\x20WHERE\x20typ','id\x20=\x20?\x20AND','ch\x20in\x20','\x20=\x20exclude','replace','NORMALIZE_','locknotify','y,\x0a\x20\x20\x20\x20\x20\x20\x20',':<alias|ji','alize\x20requ','split','(?,\x20?,\x20?,\x20','r:\x20','listlock','find','chat_jid','ns\x20error\x20f','\x5c$&','\x20=\x20\x27target','\x20\x20\x20VALUES\x20','ine\x20usage:','LockNotify','r\x20default\x20','x\x20=\x200\x20WHER','owed.','ureSchema\x20','OR\x20type\x20=\x20','\x20DO\x20UPDATE','CREATE\x20UNI','EX\x20IF\x20NOT\x20','ponseMessa','O\x20locks\x20(c','_locks_cha','WARNING_ME','SELECT\x20*\x20F','floor','jid','key','getUniqueJ','xtMessage','SELECT\x20id,','s_valid_re','leExists\x20e','NAME\x20TO\x20','e,\x20created','|jid|all>\x0a','ULT\x200,\x0a\x20\x20\x20','e=\x27table\x27\x20','d\x20=\x20?','\x20locknotif','output','dApi\x20not\x20a','AUTOINCREM','efault\x20val','To\x20query\x20s','unknown','invalid_re','\x20=\x20?\x20ORDER','dler\x20error','amed\x20to\x20ba','\x20id\x20=\x20?','mns)','timestamp','ed\x20lock\x20\x22','O\x20locks_ne','\x20DEFAULT\x20c','ify\x20FROM\x20l','toISOStrin','extendedTe','\x0aMatched:\x20','connection','_count\x20=\x20h','regex','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','dmin\x20check','normal','created_at','led\x20to\x20sen','isArray','\x20type,\x20cre','\x22\x20@\x20','\x201\x20WHERE\x20i','hrase,\x20typ','❌\x20Usage\x20(g','_jid\x27','nection\x20','PRAGMA\x20tab','\x20phrase)\x0a\x20','\x20is_valid_','\x20phrase=\x22','created_by','cessChatQu','L_MS','gex\x20=\x20excl','ert\x20failed','trigger','ires\x20bot\x20i','E\x20locks\x20(\x0a','run','\x20gp:alias','efault\x20con','sendMessag','dText\x20fail','buttonsRes','nsert\x20fail','earch\x20fail','uded.is_va','hrase)\x0a\x20\x20\x20','rforming\x20s','_valid_reg','normalize','ude\x20gp\x20in\x20','\x20Example:\x20','chFromFind','FROM\x20locks','from','lid\x20regex\x20','available','tal','d\x20for\x20','acy\x20locks\x20','next','E\x20locks\x20RE','filter','Wildcard\x20m','it_count,\x20','changes','\x20by\x20@','is\x20not\x20all','keys','nection(s)','ed:\x20','✔️\x20Locknoti','PER_CHAT_Q','message','luded.crea','ks\x20SET\x20hit','?,\x20?)\x0a\x20\x20\x20\x20','y\x20TEXT\x20DEF','d|all>','LE\x20IF\x20NOT\x20','tLocksForC','your\x20defau','\x20failed:\x20',':\x20locknoti','delete','provided:\x20','ated_at,\x20h','\x20table\x20ren','\x20\x20\x20\x20\x20hit_c','nstance','[lock]\x20cle','AULT\x20\x27\x27,\x0a\x20','[lock]\x20rea','body','ed\x20is_vali','fig\x20load\x20f','UEUE_LIMIT','\x20failed\x20fo','p{N}_])','ings\x20error','_at\x20=\x20?,\x20i','\x20target(s)','push','test','rom\x20your\x20d','author','heck\x20/setd','dellock','normalizeT','chat','\x20lock(s).','id:\x20\x22','TEGER\x20DEFA','up_','IMARY\x20KEY\x20','sock','finalize','\x20?,\x20?)','✔️\x20Deleted\x20','ERE\x20chat_j','value','.\x20Please\x20c','_regex)\x20VA','gex','endsWith','_count,\x20is','[lock]\x20pro','fatal','ERE\x20id\x20=\x20?','QUE\x20INDEX\x20','ble','locks','tion(s):\x20','gp\x20alias/j','SELECT\x20not','❌\x20PM:\x20one-','valid_rege','entries','[lock]\x20lis','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','ULL','led:\x20','hrase\x20erro','\x20\x20\x20\x20\x20type\x20','type','id-or-phra','BATCH_DELA','ids','ration\x20swa','ify;','CONFLICT\x20i','LT\x201\x0a\x20\x20\x20\x20\x20','n\x20characte','id\x20=\x20?','creator','\x20\x20\x20\x20\x20\x20\x20id\x20','t\x20ON\x20locks','egex\x27','SEND_WARNI','ated_by\x20=\x20','[lock]\x20add','\x20(INVALID\x20','[lock]\x20ens','jid|all>','ut\x20UNIQUE\x20','ion(s):\x20','delall','regex:','XT\x20PRIMARY','function','ABLED','\x20?,\x20?,\x200,\x20','@g.us','remoteJid','phrase);','18891VuimYz','user','all','\x20ON\x20CONFLI','[lock]\x20ON\x20','(?![\x5cp{L}\x5c','has','dRegexes\x20e','ed_by,\x20cre','build','add','orcement\x20f','gex\x20=\x20?\x20WH','slice','ount\x20INTEG','t_jid\x20=\x20?\x20','egex','_by,\x20creat','ger2','cks\x20table','ks\x20table\x20a','=\x20OFF;','\x20\x20\x20\x20UNIQUE','clearlocks','2406wZJqmX','d.type,\x0a\x20\x20','keyword','fy\x20','trim','⚠️\x20{user},\x20','tialize\x20fa','ck\x20phrase1','INSERT\x20INT','E\x20chat_jid','knotify\x20gp','NFD','fail','STS\x20idx_lo','\x20NULL,\x0a\x20\x20\x20','ks\x20SET\x20is_','for\x20','D\x20COLUMN\x20i','GLOBAL_CON','CURRENCY','FAULT\x201','fromMe','\x20type\x20=\x20\x27r','sendApi\x20un','\x20\x20is_valid','9605912VRATkZ','(chat_jid)','[lock]\x20Aho','\x20\x20\x20\x20\x20);','chatJid','[lock]\x20mig','knotify\x20ch','\x20default\x20c','reated_by\x20','UPDATE\x20loc','oaded\x20','values','❌\x20PM\x20one-l','{user}','eck\x20failed','R\x20DEFAULT\x20','dStoredMat','y\x20[on|off]','CREATE\x20IND','chat_id','ttonId','ocks\x20for\x20y','TEXT\x20NOT\x20N','alidation\x20','le_info(','\x20phrase\x20FR','rror:\x20','lid\x20stored','vailable',',\x20?,\x20?,\x20?,','name','hit_count','50758543vUSSkn','(s):\x20','DATE\x20SET\x20n','\x20&\x20regex\x20v','resolveNam','notify','max',':\x20unlock\x201','findings','Corasick\x20s','\x20\x20\x20\x20\x20phras','is_valid_r','ted_at,\x0a\x20\x20','as\x20fallbac','LICT(chat_','\x20\x20\x20\x20\x20\x20\x20\x20\x20i','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','DEFAULT_EN','TableColum','❌\x20Failed\x20t','off','ed\x20(fallba','\x20\x20\x20\x20\x20\x20\x20cre','EXISTS\x20loc','CRITICS','121060LjIRhC','lete_prefs','search','ies\x20to\x20you','303946fEIIDq','ces\x20&\x20colu','=\x20excluded','toLowerCas','dAndNormal','phrase\x20=\x20?','REATE\x20TABL','\x20set\x20for\x20','hat_jid,\x20p','FAULT\x200','led\x20for\x20','ockall\x20fai','roup-only)','or\x20','uild\x20faile','bad2\x20gp:al','ed_at,\x20hit','=\x20ON;','fy\x20INTEGER','\x0aMessage:\x0a','\x20\x20\x20\x20\x20);\x0a\x20\x20','[lock]\x20cre','isInteger','now','mn:\x20','nonical)','[lock]\x20sen','gger2>\x20gp:','eparated>\x20','\x20hit_count','catch','cted\x20->\x20pe',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ailed:\x20','cks_unique','selectedBu','ENT,\x0a\x20\x20\x20\x20\x20','LT\x201,\x0a\x20\x20\x20\x20','locks_back','prepare','TEXT\x20DEFAU','\x200,\x0a\x20\x20\x20\x20\x20\x20','Y_MS','LT\x20\x27normal','videoMessa','gex\x20INTEGE','SELECT\x20id\x20','\x20regex\x20id=','isCommand','es\x20lock\x20no','idateStore','\x20phrase,\x20t','\x20WHERE\x20key','\x20locks\x20loa','ack\x20failed','text','lt\x20connect','lock','sForChat\x20e','BATCH_SIZE','ded\x20for\x20re','mentions','5568635ATxZer','length','imageMessa','reated_at,','afe\x20migrat','ex)\x20VALUES','❌\x20PM:\x20incl','hat\x20error\x20','EXISTS\x20idx','ks\x20SET\x20typ','\x20@\x20','min','24591ZouoGe','[lock]\x20isa','WARNING_TT','ated_by,\x20c','✔️\x20[lock]\x20l','[lock]\x20unl','conversati','[lock]\x20fai','ER\x20DEFAULT','w\x20(chat_ji','ckup','table\x20dete','ard\x20for\x20id','nodes','ion','caption','oUserJid','ry\x20failed:','tatus:\x20loc','Lock\x20fallb','lready\x20can','(?<![\x5cp{L}'];_0x1d07=function(){return _0x281fac;};return _0x1d07();}import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x69d516 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name='lock';export const version='2.3.2';export const priority=-0xc7f+-0x2123+-0x3*-0xf5e;export const configKeys=[_0x1f4923(0x3ad)];export const commands=[_0x1f4923(0x1fb),_0x1f4923(0x3a8),_0x1f4923(0x1eb),_0x1f4923(0x296),_0x1f4923(0x3b0),_0x1f4923(0x3d8),_0x1f4923(0x2d1),_0x1f4923(0x2f1),_0x1f4923(0x1f4)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x1f4923(0x2f7)+'that\x20word\x20'+_0x1f4923(0x26e)+_0x1f4923(0x206),'WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x338ebc){const _0x1edd64=_0x1f4923;if(!_0x338ebc)return[];const _0x2245f7=new Set(),_0x183bfd=[];for(const _0x31b33a of _0x338ebc){const _0x36ea43=_0x31b33a===undefined||_0x31b33a===null?'':String(_0x31b33a)['trim']();if(!_0x36ea43)continue;!_0x2245f7[_0x1edd64(0x2e0)](_0x36ea43)&&(_0x2245f7[_0x1edd64(0x2e4)](_0x36ea43),_0x183bfd['push'](_0x36ea43));}return _0x183bfd;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=0x415*-0x9+0x156e+0xf4f,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(0x5*0x667+0x465*0x2+-0x1*0x2891)*(-0x1d57+-0x18c6+0x3a05);function markProcessed(_0x1e5f2f){const _0x3c085f=_0x1f4923;if(!_0x1e5f2f)return;if(processedMessageKeys['has'](_0x1e5f2f))try{clearTimeout(processedMessageKeys[_0x3c085f(0x3e6)](_0x1e5f2f));}catch(_0x42864f){}const _0x73be55=setTimeout(()=>processedMessageKeys[_0x3c085f(0x27f)](_0x1e5f2f),DEDUPE_TTL_MS);processedMessageKeys[_0x3c085f(0x3e4)](_0x1e5f2f,_0x73be55);}function isProcessed(_0x26463f){const _0x576149=_0x1f4923;return _0x26463f&&processedMessageKeys[_0x576149(0x2e0)](_0x26463f);}const sleep=_0x4225bb=>new Promise(_0x3af87a=>setTimeout(_0x3af87a,_0x4225bb));function nowSec(){const _0x1aabbe=_0x1f4923;return Math['floor'](Date[_0x1aabbe(0x35f)]()/(0x1*-0x59+0x1c7e+-0x183d));}function escapeRegex(_0x11599e){const _0x37a3ef=_0x1f4923;return String(_0x11599e||'')['replace'](/[.*+?^${}()|[\]\\]/g,_0x37a3ef(0x1ff));}function normalizeForMatch(_0x44264b){const _0x4a98bc=_0x1f4923;let _0x421525=String(_0x44264b||'');try{_0x421525=_0x421525[_0x4a98bc(0x25c)]('NFKC');}catch(_0x650201){}if(CFG[_0x4a98bc(0x1f3)+_0x4a98bc(0x3f4)+_0x4a98bc(0x343)])try{_0x421525=_0x421525[_0x4a98bc(0x25c)](_0x4a98bc(0x2fd))[_0x4a98bc(0x1f2)](/\p{M}/gu,'')['normalize'](_0x4a98bc(0x3ee));}catch(_0x183bd9){}return _0x421525['toLowerCas'+'e']();}class AhoCorasick{constructor(_0x3e1bd7=[]){const _0x5a51c2=_0x1f4923;this[_0x5a51c2(0x39f)]=[{'next':{},'fail':0x0,'output':[]}];if(_0x3e1bd7&&_0x3e1bd7[_0x5a51c2(0x387)])this[_0x5a51c2(0x2e3)](_0x3e1bd7);}['build'](_0x461964){const _0x570d7e=_0x1f4923;this[_0x570d7e(0x39f)]=[{'next':{},'fail':0x0,'output':[]}];for(const _0x3af6b7 of _0x461964){let _0x54852c=0x13fc*-0x1+-0x1e95+0x3291;for(const _0x2522e7 of _0x3af6b7){const _0x407b2a=_0x2522e7;!this[_0x570d7e(0x39f)][_0x54852c][_0x570d7e(0x267)][_0x407b2a]&&(this['nodes'][_0x54852c][_0x570d7e(0x267)][_0x407b2a]=this[_0x570d7e(0x39f)][_0x570d7e(0x387)],this[_0x570d7e(0x39f)][_0x570d7e(0x291)]({'next':{},'fail':0x0,'output':[]})),_0x54852c=this[_0x570d7e(0x39f)][_0x54852c][_0x570d7e(0x267)][_0x407b2a];}this[_0x570d7e(0x39f)][_0x54852c][_0x570d7e(0x220)][_0x570d7e(0x291)](_0x3af6b7);}const _0x35590e=[];for(const _0x3b2c54 in this[_0x570d7e(0x39f)][0x1a3b+0x12a6+-0x1*0x2ce1][_0x570d7e(0x267)]){const _0x2d2efa=this['nodes'][-0xbe*0x6+0x24f7*-0x1+0x296b][_0x570d7e(0x267)][_0x3b2c54];this[_0x570d7e(0x39f)][_0x2d2efa]['fail']=0x1*0x1154+-0x12f*-0x1a+-0x301a,_0x35590e[_0x570d7e(0x291)](_0x2d2efa);}while(_0x35590e[_0x570d7e(0x387)]){const _0x5913b9=_0x35590e['shift']();for(const _0x58036b in this['nodes'][_0x5913b9][_0x570d7e(0x267)]){const _0x3047c7=this[_0x570d7e(0x39f)][_0x5913b9]['next'][_0x58036b];let _0x1ef10d=this[_0x570d7e(0x39f)][_0x5913b9][_0x570d7e(0x2fe)];while(_0x1ef10d&&!this[_0x570d7e(0x39f)][_0x1ef10d]['next'][_0x58036b])_0x1ef10d=this[_0x570d7e(0x39f)][_0x1ef10d][_0x570d7e(0x2fe)];if(this['nodes'][_0x1ef10d][_0x570d7e(0x267)][_0x58036b])this[_0x570d7e(0x39f)][_0x3047c7][_0x570d7e(0x2fe)]=this[_0x570d7e(0x39f)][_0x1ef10d][_0x570d7e(0x267)][_0x58036b];else this[_0x570d7e(0x39f)][_0x3047c7][_0x570d7e(0x2fe)]=-0x1*-0x15ff+0x97c+-0x1f7b;this[_0x570d7e(0x39f)][_0x3047c7][_0x570d7e(0x220)][_0x570d7e(0x291)](...this['nodes'][this[_0x570d7e(0x39f)][_0x3047c7][_0x570d7e(0x2fe)]]['output']),_0x35590e[_0x570d7e(0x291)](_0x3047c7);}}}[_0x1f4923(0x346)](_0x8fb20c){const _0x916dd8=_0x1f4923,_0x2e2505=[];let _0x35cef6=0x3*0xc7+0x127*-0x19+-0x1a7a*-0x1;for(let _0x60bf28=0x1c4b*-0x1+0x219+0x1a32;_0x60bf28<_0x8fb20c['length'];_0x60bf28++){const _0x4ae5fa=_0x8fb20c[_0x60bf28];while(_0x35cef6&&!this[_0x916dd8(0x39f)][_0x35cef6][_0x916dd8(0x267)][_0x4ae5fa])_0x35cef6=this[_0x916dd8(0x39f)][_0x35cef6]['fail'];if(this[_0x916dd8(0x39f)][_0x35cef6][_0x916dd8(0x267)][_0x4ae5fa])_0x35cef6=this['nodes'][_0x35cef6]['next'][_0x4ae5fa];else _0x35cef6=-0x4b*0x12+-0x899+0xddf*0x1;if(this['nodes'][_0x35cef6][_0x916dd8(0x220)][_0x916dd8(0x387)])for(const _0x332a53 of this[_0x916dd8(0x39f)][_0x35cef6][_0x916dd8(0x220)]){_0x2e2505[_0x916dd8(0x291)]({'keyword':_0x332a53,'index':_0x60bf28-_0x332a53[_0x916dd8(0x387)]+(0x115+0x11f*-0x19+-0x1*-0x1af3)});}}return _0x2e2505;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x3467a0){const _0x2dad0e=_0x1f4923,_0x33ea11=String(_0x3467a0||'')['trim'](),_0x5dadf2=escapeRegex(_0x33ea11);try{const _0x596cc3=_0x2dad0e(0x3a7)+'\x5cp{N}_])'+_0x5dadf2+(_0x2dad0e(0x2df)+_0x2dad0e(0x28d));return new RegExp(_0x596cc3,'iu');}catch(_0x5bf2fc){try{return new RegExp('\x5cb'+_0x5dadf2+'\x5cb','i');}catch(_0x62f5cc){return new RegExp(_0x5dadf2,'i');}}}function wildcardToRegex(_0x231238){const _0x254824=_0x1f4923,_0x5bdec3=String(_0x231238||'')[_0x254824(0x2f6)](),_0x57ab08=_0x5bdec3[_0x254824(0x1f2)](/\*/g,'')[_0x254824(0x387)]>0x1758+-0xa2a+-0x1e2*0x7;if(!_0x57ab08)throw new Error(_0x254824(0x26a)+_0x254824(0x421)+_0x254824(0x2c3)+_0x254824(0x405)+'\x20*');const _0x12dcb3=_0x5bdec3['split']('*')[_0x254824(0x3ff)](_0x6c04f3=>escapeRegex(_0x6c04f3)),_0x267b3e=_0x12dcb3['join']('[\x5cp{L}\x5cp{N'+_0x254824(0x3e9));try{const _0x28eb2c=_0x254824(0x3a7)+_0x254824(0x3fe)+_0x267b3e+(_0x254824(0x2df)+_0x254824(0x28d));return new RegExp(_0x28eb2c,'iu');}catch(_0xed1def){const _0x317b1d=_0x12dcb3[_0x254824(0x3c6)]('.*');try{return new RegExp(''+_0x317b1d,'i');}catch(_0x49549d){return new RegExp(_0x12dcb3[_0x254824(0x3c6)](''),'i');}}}function setupSendApi(){const _0x4f8cb9=_0x1f4923;if(!botRef)return;if(typeof botRef[_0x4f8cb9(0x253)+'e']==='function')sendApi=async(_0x42b617,_0x70e1dc)=>await botRef[_0x4f8cb9(0x253)+'e'](_0x42b617,_0x70e1dc);else botRef['sock']&&typeof botRef[_0x4f8cb9(0x29e)][_0x4f8cb9(0x253)+'e']===_0x4f8cb9(0x2d4)?sendApi=async(_0x1e9a4f,_0x500a00)=>await botRef[_0x4f8cb9(0x29e)][_0x4f8cb9(0x253)+'e'](_0x1e9a4f,_0x500a00):sendApi=null;}async function sendText(_0x2fb2ef,_0xc942e3,_0x1ffed9=[]){const _0x14b9fa=_0x1f4923;if(!_0xc942e3||!_0x2fb2ef)return;const _0x2e739d={'text':String(_0xc942e3)};if(Array[_0x14b9fa(0x23c)](_0x1ffed9)&&_0x1ffed9['length'])_0x2e739d[_0x14b9fa(0x385)]=_0x1ffed9;try{if(!sendApi){warn('[lock]\x20sen'+_0x14b9fa(0x221)+_0x14b9fa(0x327));return;}await sendApi(_0x2fb2ef,_0x2e739d);}catch(_0x5362ae){warn(_0x14b9fa(0x362)+_0x14b9fa(0x254)+'ed\x20to\x20'+_0x2fb2ef+':\x20'+(_0x5362ae?.['message']||_0x5362ae));}}async function tableExists(_0x5c5264){const _0x2982ac=_0x1f4923;try{const _0xa6255a=await db[_0x2982ac(0x3e6)]('SELECT\x20nam'+_0x2982ac(0x40b)+'ite_master'+_0x2982ac(0x1ee)+_0x2982ac(0x21d)+'AND\x20name=?',[_0x5c5264]);return!!_0xa6255a;}catch(_0x2f0da1){return warn(_0x2982ac(0x400)+_0x2982ac(0x218)+_0x2982ac(0x325)+(_0x2f0da1?.['message']||_0x2f0da1)),![];}}async function getTableColumns(_0x26729f){const _0x42facb=_0x1f4923;try{const _0x50b0bc=await db[_0x42facb(0x2dc)](_0x42facb(0x244)+_0x42facb(0x323)+_0x26729f+')');return(_0x50b0bc||[])[_0x42facb(0x3ff)](_0x1e411d=>_0x1e411d[_0x42facb(0x329)]);}catch(_0x39c88a){return warn(_0x42facb(0x41f)+_0x42facb(0x33d)+_0x42facb(0x1fe)+_0x42facb(0x355)+_0x26729f+':\x20'+(_0x39c88a?.['message']||_0x39c88a)),[];}}async function readAndNormalizeExistingLocks(){const _0x161410=_0x1f4923;try{const _0x4770af=await db['all'](_0x161410(0x210)+'ROM\x20locks'),_0x1e4b3e=new Map();for(const _0x13d682 of _0x4770af||[]){const _0x13db7b=[_0x161410(0x1fd),_0x161410(0x3ef),_0x161410(0x31e),_0x161410(0x212),_0x161410(0x298)],_0x2a83d2=[_0x161410(0x3ce),'word',_0x161410(0x24d),_0x161410(0x2f4),_0x161410(0x2a3),_0x161410(0x288),'message'];let _0x43dcca=null;for(const _0x11bef8 of _0x13db7b)if(_0x11bef8 in _0x13d682&&_0x13d682[_0x11bef8]){_0x43dcca=String(_0x13d682[_0x11bef8]);break;}let _0x55504c=null;for(const _0x2d561e of _0x2a83d2)if(_0x2d561e in _0x13d682&&_0x13d682[_0x2d561e]){_0x55504c=String(_0x13d682[_0x2d561e]);break;}if(!_0x43dcca||!_0x55504c)for(const _0x12fb6f of Object[_0x161410(0x26f)](_0x13d682)){const _0x27c2b9=_0x13d682[_0x12fb6f];if(!_0x43dcca&&typeof _0x27c2b9===_0x161410(0x3c0)&&_0x27c2b9[_0x161410(0x3d4)]('@'))_0x43dcca=_0x27c2b9;if(!_0x55504c&&typeof _0x27c2b9===_0x161410(0x3c0)&&_0x27c2b9[_0x161410(0x387)]<-0x250f+0x1f86+0x719&&!_0x27c2b9['includes']('@'))_0x55504c=_0x27c2b9;}if(!_0x43dcca||!_0x55504c)continue;let _0x3bb50d=_0x55504c[_0x161410(0x2f6)](),_0x28db84=_0x161410(0x239);if(_0x3bb50d[_0x161410(0x34b)+'e']()[_0x161410(0x40d)](_0x161410(0x2d2)))_0x28db84='regex',_0x3bb50d=_0x3bb50d[_0x161410(0x2e7)](-0x1*0x165f+-0x2536+-0x3b9b*-0x1)[_0x161410(0x2f6)]();else{if(_0x3bb50d[_0x161410(0x3d4)]('*'))_0x28db84=_0x161410(0x3c7);else _0x28db84=_0x161410(0x239);}const _0x57d025=_0x13d682[_0x161410(0x248)]||_0x13d682[_0x161410(0x2c5)]||_0x13d682[_0x161410(0x294)]||_0x13d682[_0x161410(0x2db)]||'',_0x5482a0=Number(_0x13d682['created_at']||_0x13d682['ts']||_0x13d682[_0x161410(0x22c)]||-0xe3*-0x3+0x270a*0x1+-0x29b3)||nowSec(),_0x5aa970=_0x43dcca+'||'+_0x3bb50d;if(!_0x1e4b3e['has'](_0x5aa970))_0x1e4b3e[_0x161410(0x3e4)](_0x5aa970,{'chat_jid':_0x43dcca,'phrase':_0x3bb50d,'type':_0x28db84,'created_by':_0x57d025,'created_at':_0x5482a0,'hit_count':Number(_0x13d682[_0x161410(0x32a)]||0xf2e+-0x8b3+-0x1*0x67b)});else{const _0x2b2ada=_0x1e4b3e[_0x161410(0x3e6)](_0x5aa970);_0x2b2ada[_0x161410(0x23a)]=Math[_0x161410(0x391)](_0x2b2ada[_0x161410(0x23a)]||_0x5482a0,_0x5482a0),_0x2b2ada[_0x161410(0x32a)]=(_0x2b2ada[_0x161410(0x32a)]||-0xa*-0x18e+-0xe9a+0x2*-0x79)+(Number(_0x13d682[_0x161410(0x32a)])||-0x233*-0xb+0x2*0xd55+-0x32db);}}return Array[_0x161410(0x261)](_0x1e4b3e[_0x161410(0x316)]());}catch(_0x26d031){return warn(_0x161410(0x287)+_0x161410(0x34c)+'izeExistin'+'gLocks\x20fai'+_0x161410(0x2b8)+(_0x26d031?.[_0x161410(0x274)]||_0x26d031)),[];}}async function ensureSchema(){const _0xc683d6=_0x1f4923,_0xab589b={'id':_0xc683d6(0x416)+_0xc683d6(0x29d)+_0xc683d6(0x222)+'ENT','chat_jid':_0xc683d6(0x321)+_0xc683d6(0x2b7),'phrase':_0xc683d6(0x321)+'ULL','type':'TEXT\x20DEFAU'+_0xc683d6(0x373)+'\x27','created_by':_0xc683d6(0x370)+'LT\x20\x27\x27','created_at':_0xc683d6(0x40f)+'FAULT\x200','hit_count':_0xc683d6(0x40f)+_0xc683d6(0x351),'is_valid_regex':'INTEGER\x20DE'+_0xc683d6(0x306)};try{const _0x10cf07=await tableExists(_0xc683d6(0x2ae));if(!_0x10cf07){const _0x9cfba=Object[_0xc683d6(0x2b4)](_0xab589b)[_0xc683d6(0x3ff)](([_0x330130,_0x516cc8])=>_0x330130+'\x20'+_0x516cc8)[_0xc683d6(0x3c6)](',\x0a\x20\x20');await db[_0xc683d6(0x415)](_0xc683d6(0x33b)+_0xc683d6(0x34e)+_0xc683d6(0x24f)+_0xc683d6(0x237)+_0x9cfba+(_0xc683d6(0x368)+_0xc683d6(0x3f6)+_0xc683d6(0x350)+_0xc683d6(0x259)+_0xc683d6(0x35c)+_0xc683d6(0x41b)));try{await db[_0xc683d6(0x415)](_0xc683d6(0x31d)+_0xc683d6(0x20b)+_0xc683d6(0x38e)+_0xc683d6(0x20e)+_0xc683d6(0x2c7)+_0xc683d6(0x30c)+';');}catch(_0x1d5724){}try{await db[_0xc683d6(0x415)](_0xc683d6(0x20a)+_0xc683d6(0x2ac)+'IF\x20NOT\x20EXI'+_0xc683d6(0x2ff)+_0xc683d6(0x36a)+_0xc683d6(0x3fb)+_0xc683d6(0x3ea)+'phrase);');}catch(_0x2733cc){}info(_0xc683d6(0x35d)+_0xc683d6(0x3fd)+_0xc683d6(0x3e1)+_0xc683d6(0x361));try{await db['exec'](_0xc683d6(0x40a)+_0xc683d6(0x27a)+_0xc683d6(0x342)+_0xc683d6(0x3f5)+_0xc683d6(0x411)+_0xc683d6(0x2d3)+'\x20KEY,\x20noti'+_0xc683d6(0x35a)+_0xc683d6(0x3b7)+');');}catch(_0x30d86b){}return;}const _0x5d4175=await getTableColumns('locks'),_0x3e56de=_0x5d4175[_0xc683d6(0x3d4)]('chat_jid'),_0x435ea1=_0x5d4175[_0xc683d6(0x3d4)](_0xc683d6(0x3ce)),_0x3bb85d=_0x5d4175[_0xc683d6(0x3d4)](_0xc683d6(0x2bb));if(_0x3e56de&&_0x435ea1&&_0x3bb85d){if(!_0x5d4175[_0xc683d6(0x3d4)]('is_valid_r'+_0xc683d6(0x2ea)))try{await db[_0xc683d6(0x415)](_0xc683d6(0x3db)+'E\x20locks\x20AD'+_0xc683d6(0x303)+_0xc683d6(0x217)+_0xc683d6(0x375)+_0xc683d6(0x31a)+'1;'),info(_0xc683d6(0x2cb)+_0xc683d6(0x289)+'d_regex\x20co'+'lumn\x20to\x20lo'+_0xc683d6(0x2ed));}catch(_0x3781ea){warn(_0xc683d6(0x399)+'led\x20to\x20add'+_0xc683d6(0x246)+'regex\x20colu'+_0xc683d6(0x360)+(_0x3781ea?.['message']||_0x3781ea));}try{await db[_0xc683d6(0x415)](_0xc683d6(0x31d)+_0xc683d6(0x20b)+_0xc683d6(0x38e)+_0xc683d6(0x20e)+'t\x20ON\x20locks'+_0xc683d6(0x30c)+';');}catch(_0x335f3b){}try{await db['exec']('CREATE\x20UNI'+_0xc683d6(0x2ac)+'IF\x20NOT\x20EXI'+_0xc683d6(0x2ff)+'cks_unique'+_0xc683d6(0x3fb)+_0xc683d6(0x3ea)+_0xc683d6(0x2d9));}catch(_0x5123ea){}try{await db['exec'](_0xc683d6(0x40a)+_0xc683d6(0x27a)+_0xc683d6(0x342)+_0xc683d6(0x3f5)+_0xc683d6(0x411)+_0xc683d6(0x2d3)+'\x20KEY,\x20noti'+_0xc683d6(0x35a)+_0xc683d6(0x3b7)+');');}catch(_0x5af1b5){}info(_0xc683d6(0x41a)+_0xc683d6(0x2ee)+_0xc683d6(0x3a6)+'onical\x20(en'+'sured\x20indi'+_0xc683d6(0x349)+_0xc683d6(0x22b));return;}info('[lock]\x20leg'+_0xc683d6(0x266)+_0xc683d6(0x39d)+_0xc683d6(0x367)+_0xc683d6(0x25a)+_0xc683d6(0x38a)+_0xc683d6(0x3a0));const _0x34f05a=await readAndNormalizeExistingLocks();await db['exec'](_0xc683d6(0x41e)+_0xc683d6(0x3c2)+_0xc683d6(0x2ef));try{await db[_0xc683d6(0x415)]('CREATE\x20TAB'+_0xc683d6(0x27a)+_0xc683d6(0x342)+'ks_new\x20(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20id\x20'+'INTEGER\x20PR'+'IMARY\x20KEY\x20'+'AUTOINCREM'+_0xc683d6(0x36c)+'\x20\x20\x20chat_ji'+'d\x20TEXT\x20NOT'+_0xc683d6(0x300)+_0xc683d6(0x335)+_0xc683d6(0x3fa)+_0xc683d6(0x300)+'\x20\x20\x20\x20\x20type\x20'+_0xc683d6(0x370)+_0xc683d6(0x373)+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0xc683d6(0x3ed)+_0xc683d6(0x278)+'AULT\x20\x27\x27,\x0a\x20'+_0xc683d6(0x341)+_0xc683d6(0x425)+_0xc683d6(0x29b)+_0xc683d6(0x21c)+_0xc683d6(0x283)+_0xc683d6(0x2e8)+_0xc683d6(0x39a)+_0xc683d6(0x371)+_0xc683d6(0x30a)+'_regex\x20INT'+'EGER\x20DEFAU'+_0xc683d6(0x36d)+_0xc683d6(0x2f0)+'(chat_jid,'+_0xc683d6(0x245)+_0xc683d6(0x30e));}catch(_0x3e0246){await db[_0xc683d6(0x415)]('CREATE\x20TAB'+_0xc683d6(0x27a)+'EXISTS\x20loc'+'ks_new\x20(\x0a\x20'+_0xc683d6(0x2c6)+_0xc683d6(0x416)+_0xc683d6(0x29d)+'AUTOINCREM'+_0xc683d6(0x36c)+'\x20\x20\x20chat_ji'+'d\x20TEXT\x20NOT'+_0xc683d6(0x300)+_0xc683d6(0x335)+_0xc683d6(0x3fa)+_0xc683d6(0x300)+_0xc683d6(0x2ba)+_0xc683d6(0x370)+_0xc683d6(0x373)+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0xc683d6(0x3ed)+_0xc683d6(0x278)+_0xc683d6(0x286)+_0xc683d6(0x341)+_0xc683d6(0x425)+_0xc683d6(0x29b)+_0xc683d6(0x21c)+_0xc683d6(0x283)+'ount\x20INTEG'+_0xc683d6(0x39a)+_0xc683d6(0x371)+'\x20\x20is_valid'+_0xc683d6(0x423)+_0xc683d6(0x3f9)+_0xc683d6(0x2c2)+'\x20);'),warn(_0xc683d6(0x35d)+_0xc683d6(0x3fd)+'_new\x20witho'+_0xc683d6(0x2cf)+_0xc683d6(0x338)+'k');}const _0x406bf9=await db[_0xc683d6(0x36f)](_0xc683d6(0x2fa)+_0xc683d6(0x22e)+_0xc683d6(0x39b)+'d,\x20phrase,'+_0xc683d6(0x23d)+_0xc683d6(0x395)+_0xc683d6(0x389)+_0xc683d6(0x365)+_0xc683d6(0x3d7)+_0xc683d6(0x2a5)+'LUES\x20(?,\x20?'+_0xc683d6(0x328)+_0xc683d6(0x2a0));try{for(const _0x1e0e50 of _0x34f05a){try{let _0x1b92c4=-0x1051*-0x1+-0x2*0x2b9+-0xade;if(_0x1e0e50['type']==='regex')try{new RegExp(_0x1e0e50[_0xc683d6(0x3ce)]);}catch(_0xf1ac32){_0x1b92c4=-0x2dc+0x373*0xb+-0x2315*0x1;}await _0x406bf9[_0xc683d6(0x250)](_0x1e0e50[_0xc683d6(0x1fd)],_0x1e0e50[_0xc683d6(0x3ce)],_0x1e0e50[_0xc683d6(0x2bb)]||'normal',_0x1e0e50[_0xc683d6(0x248)]||'',Number(_0x1e0e50[_0xc683d6(0x23a)]||nowSec()),Number(_0x1e0e50[_0xc683d6(0x32a)]||-0x1106*-0x1+0x1*0x375+-0x147b),_0x1b92c4);}catch(_0x1a23b3){warn(_0xc683d6(0x310)+_0xc683d6(0x3e5)+_0xc683d6(0x24c)+_0xc683d6(0x420)+_0x1e0e50['chat_jid']+'@'+_0x1e0e50[_0xc683d6(0x3ce)]+':\x20'+(_0x1a23b3?.[_0xc683d6(0x274)]||_0x1a23b3));}}}finally{try{await _0x406bf9[_0xc683d6(0x29f)]();}catch(_0x16bd5c){}}try{const _0x356aa3=_0xc683d6(0x36e)+_0xc683d6(0x29c)+Math[_0xc683d6(0x211)](Date['now']()/(-0x1*0x8cf+-0x389*-0xa+0x131*-0x13));await db[_0xc683d6(0x415)](_0xc683d6(0x3db)+_0xc683d6(0x268)+_0xc683d6(0x219)+_0x356aa3+';'),await db['exec'](_0xc683d6(0x3db)+_0xc683d6(0x3f8)+'w\x20RENAME\x20T'+_0xc683d6(0x3f3));try{await db[_0xc683d6(0x415)](_0xc683d6(0x31d)+_0xc683d6(0x20b)+_0xc683d6(0x38e)+'_locks_cha'+_0xc683d6(0x2c7)+_0xc683d6(0x30c)+';');}catch(_0x5d4128){}try{await db['exec'](_0xc683d6(0x20a)+_0xc683d6(0x2ac)+'IF\x20NOT\x20EXI'+'STS\x20idx_lo'+_0xc683d6(0x36a)+'\x20ON\x20locks('+'chat_jid,\x20'+'phrase);');}catch(_0x395f4b){}try{await db[_0xc683d6(0x415)]('CREATE\x20TAB'+_0xc683d6(0x27a)+_0xc683d6(0x342)+'k_prefs\x20(c'+_0xc683d6(0x411)+_0xc683d6(0x2d3)+'\x20KEY,\x20noti'+'fy\x20INTEGER'+_0xc683d6(0x3b7)+');');}catch(_0x5aa6fe){}info('[lock]\x20mig'+_0xc683d6(0x403)+_0xc683d6(0x417)+_0xc683d6(0x282)+_0xc683d6(0x229)+_0xc683d6(0x39c));}catch(_0x459ace){warn(_0xc683d6(0x310)+_0xc683d6(0x2bf)+'p\x20failed:\x20'+(_0x459ace?.[_0xc683d6(0x274)]||_0x459ace));throw _0x459ace;}finally{await db['exec'](_0xc683d6(0x41e)+_0xc683d6(0x3c2)+_0xc683d6(0x359));}return;}catch(_0x4578cc){error(_0x4578cc,_0xc683d6(0x2cd)+_0xc683d6(0x207)+_0xc683d6(0x2aa));throw _0x4578cc;}}async function addLock(_0x44897b,_0x3e032b,_0x473da2){const _0x37b1d2=_0x1f4923;try{if(!_0x44897b||!_0x3e032b)return![];let _0x4eee4c=String(_0x3e032b)[_0x37b1d2(0x2f6)]();if(!_0x4eee4c)return![];let _0xdb6290=_0x37b1d2(0x239),_0x5e7517=-0xb3*-0x1f+-0x2*-0xec8+0x2*-0x199e;if(_0x4eee4c['toLowerCas'+'e']()['startsWith'](_0x37b1d2(0x2d2))){_0xdb6290=_0x37b1d2(0x236),_0x4eee4c=_0x4eee4c[_0x37b1d2(0x2e7)](-0x15*0x137+-0x2c1*0x3+-0x67*-0x54)['trim']();try{new RegExp(_0x4eee4c),_0x5e7517=0x1d*0x92+0x1704*-0x1+0x15*0x4f;}catch(_0x2e1de5){_0x5e7517=0x1009+0x1df6+-0x19*0x1d7,warn(_0x37b1d2(0x2cb)+'Lock:\x20inva'+_0x37b1d2(0x262)+_0x37b1d2(0x280)+_0x4eee4c);}}else _0x4eee4c['includes']('*')?_0xdb6290=_0x37b1d2(0x3c7):_0xdb6290=_0x37b1d2(0x239);try{const _0x4b51b8=await db['run'](_0x37b1d2(0x2fa)+_0x37b1d2(0x20d)+_0x37b1d2(0x350)+_0x37b1d2(0x240)+'e,\x20created'+'_by,\x20creat'+_0x37b1d2(0x358)+_0x37b1d2(0x2a8)+_0x37b1d2(0x25b)+'ex)\x0a\x20\x20\x20\x20\x20\x20'+_0x37b1d2(0x201)+_0x37b1d2(0x1f9)+_0x37b1d2(0x3f1)+_0x37b1d2(0x3af)+_0x37b1d2(0x2dd)+'CT(chat_ji'+'d,\x20phrase)'+_0x37b1d2(0x209)+'\x20SET\x0a\x20\x20\x20\x20\x20'+_0x37b1d2(0x3e2)+_0x37b1d2(0x1f1)+_0x37b1d2(0x2f3)+_0x37b1d2(0x2b6)+_0x37b1d2(0x313)+_0x37b1d2(0x34a)+'.created_b'+_0x37b1d2(0x1f5)+'\x20\x20\x20\x20create'+_0x37b1d2(0x422)+_0x37b1d2(0x275)+_0x37b1d2(0x337)+_0x37b1d2(0x33a)+'s_valid_re'+_0x37b1d2(0x24b)+_0x37b1d2(0x258)+'lid_regex;',[_0x44897b,_0x4eee4c,_0xdb6290,_0x473da2||'',nowSec(),_0x5e7517]);return ahoCache[_0x37b1d2(0x27f)](_0x44897b),info('[lock]\x20add'+_0x37b1d2(0x22d)+_0x4eee4c+_0x37b1d2(0x23e)+_0x44897b+'\x20(type='+_0xdb6290+_0x37b1d2(0x3d5)+_0x5e7517+')'),!![];}catch(_0x36e4f3){warn(_0x37b1d2(0x2de)+_0x37b1d2(0x2c1)+_0x37b1d2(0x256)+_0x37b1d2(0x340)+'ck):\x20'+(_0x36e4f3?.[_0x37b1d2(0x274)]||_0x36e4f3));try{const _0x5ad5e2=await db[_0x37b1d2(0x3e6)](_0x37b1d2(0x376)+_0x37b1d2(0x260)+'\x20WHERE\x20cha'+_0x37b1d2(0x2e9)+_0x37b1d2(0x3de)+'\x20=\x20?',[_0x44897b,_0x4eee4c]);return _0x5ad5e2?await db['run'](_0x37b1d2(0x314)+_0x37b1d2(0x38f)+'e\x20=\x20?,\x20cre'+_0x37b1d2(0x2ca)+'?,\x20created'+_0x37b1d2(0x28f)+'s_valid_re'+_0x37b1d2(0x2e6)+_0x37b1d2(0x2ab),[_0xdb6290,_0x473da2||'',nowSec(),_0x5e7517,_0x5ad5e2['id']]):await db['run'](_0x37b1d2(0x2fa)+_0x37b1d2(0x20d)+_0x37b1d2(0x350)+_0x37b1d2(0x240)+_0x37b1d2(0x21a)+_0x37b1d2(0x2eb)+_0x37b1d2(0x358)+'_count,\x20is'+'_valid_reg'+_0x37b1d2(0x38b)+'\x20(?,\x20?,\x20?,'+_0x37b1d2(0x2d6)+'?)',[_0x44897b,_0x4eee4c,_0xdb6290,_0x473da2||'',nowSec(),_0x5e7517]),ahoCache['delete'](_0x44897b),!![];}catch(_0x1ce025){return error(_0x1ce025,_0x37b1d2(0x2cb)+_0x37b1d2(0x3a5)+_0x37b1d2(0x37e)+_0x37b1d2(0x420)+_0x4eee4c+_0x37b1d2(0x390)+_0x44897b),![];}}}catch(_0x455129){return error(_0x455129,'[lock]\x20add'+'Lock\x20faile'+'d\x20for\x20'+_0x3e032b+_0x37b1d2(0x390)+_0x44897b),![];}}async function deleteLockByPhrase(_0x2acebc,_0xa40262){const _0x587f02=_0x1f4923;try{if(!_0x2acebc||!_0xa40262)return-0x1dca+0xe*-0x1a5+-0x548*-0xa;const _0x4e1bd3=String(_0xa40262||'')['trim']();if(!_0x4e1bd3)return-0x18d4+-0x2*-0xf8+0x16e4;if(_0x4e1bd3[_0x587f02(0x34b)+'e']()[_0x587f02(0x40d)](_0x587f02(0x2d2))){const _0x50f2fb=_0x4e1bd3['slice'](-0x3*0x68c+-0x14e*0xc+0xb*0x336)[_0x587f02(0x2f6)](),_0x59c4dd=await db[_0x587f02(0x250)](_0x587f02(0x1ec)+_0x587f02(0x402)+'ERE\x20chat_j'+'id\x20=\x20?\x20AND'+_0x587f02(0x308)+'egex\x27\x20AND\x20'+_0x587f02(0x34d),[_0x2acebc,_0x50f2fb]);if(_0x59c4dd?.[_0x587f02(0x26c)])ahoCache['delete'](_0x2acebc);return _0x59c4dd?.[_0x587f02(0x26c)]||-0x181+-0x1807+0x158*0x13;}let _0x1e0cac=await db['run'](_0x587f02(0x1ec)+'M\x20locks\x20WH'+'ERE\x20chat_j'+_0x587f02(0x1ef)+'\x20phrase\x20=\x20'+'?',[_0x2acebc,_0x4e1bd3]);if(_0x1e0cac?.[_0x587f02(0x26c)])return ahoCache[_0x587f02(0x27f)](_0x2acebc),_0x1e0cac[_0x587f02(0x26c)];return 0x236e+0xa34*0x2+-0x37d6;}catch(_0x3142d9){return warn('[lock]\x20del'+_0x587f02(0x3e8)+_0x587f02(0x2b9)+_0x587f02(0x1fa)+(_0x3142d9?.[_0x587f02(0x274)]||_0x3142d9)),-0x2*0x3f3+0x784+0x62*0x1;}}async function deleteLockById(_0x1df15f,_0x624b43){const _0x4596ef=_0x1f4923;try{const _0x22f031=await db[_0x4596ef(0x250)]('DELETE\x20FRO'+_0x4596ef(0x402)+_0x4596ef(0x2a2)+_0x4596ef(0x1ef)+_0x4596ef(0x22a),[_0x1df15f,_0x624b43]);if(_0x22f031?.[_0x4596ef(0x26c)])ahoCache[_0x4596ef(0x27f)](_0x1df15f);return _0x22f031?.[_0x4596ef(0x26c)]||0x2373+-0x30d*0xa+-0x4f1;}catch(_0x2ea4fb){return warn(_0x4596ef(0x3ba)+_0x4596ef(0x3d9)+_0x4596ef(0x41d)+(_0x2ea4fb?.[_0x4596ef(0x274)]||_0x2ea4fb)),-0x512*0x1+-0xd15+-0x1*-0x1227;}}async function deleteAllLocksForChat(_0x5f5232){const _0x5605bd=_0x1f4923;try{const _0x18e523=await db[_0x5605bd(0x250)](_0x5605bd(0x1ec)+_0x5605bd(0x402)+_0x5605bd(0x2a2)+_0x5605bd(0x2c4),[_0x5f5232]);if(_0x18e523?.['changes'])ahoCache[_0x5605bd(0x27f)](_0x5f5232);return _0x18e523?.[_0x5605bd(0x26c)]||0xb4a+0x117*-0x11+0x6d*0x11;}catch(_0x256867){return warn(_0x5605bd(0x3ba)+'eteAllLock'+_0x5605bd(0x382)+_0x5605bd(0x325)+(_0x256867?.[_0x5605bd(0x274)]||_0x256867)),0xa85*-0x3+-0x4d+-0x1fdc*-0x1;}}async function listLocksForChat(_0x5599a6){const _0x19372c=_0x1f4923;try{const _0x43e6a3=await db[_0x19372c(0x2dc)](_0x19372c(0x216)+_0x19372c(0x37b)+'ype,\x20creat'+_0x19372c(0x2e2)+_0x19372c(0x281)+_0x19372c(0x26b)+_0x19372c(0x336)+'egex\x20FROM\x20'+_0x19372c(0x3b3)+_0x19372c(0x2fb)+_0x19372c(0x227)+_0x19372c(0x3d2),[_0x5599a6]);return _0x43e6a3||[];}catch(_0x5ab29b){return warn(_0x5ab29b,_0x19372c(0x2b5)+_0x19372c(0x27b)+_0x19372c(0x38d)+_0x19372c(0x302)+_0x5599a6+':\x20'+(_0x5ab29b?.['message']||_0x5ab29b)),[];}}async function setLockNotify(_0x5e8bc3,_0x4b2f08){const _0x424c02=_0x1f4923;try{if(!_0x5e8bc3)return![];return await db['run']('INSERT\x20INT'+_0x424c02(0x3c8)+_0x424c02(0x3b5)+'id,\x20notify'+')\x20VALUES\x20('+_0x424c02(0x277)+'\x20\x20\x20ON\x20CONF'+_0x424c02(0x339)+_0x424c02(0x404)+_0x424c02(0x32d)+'otify\x20=\x20ex'+_0x424c02(0x3ec)+_0x424c02(0x2c0),[_0x5e8bc3,_0x4b2f08?-0x1*-0x761+-0x11a7+-0xa47*-0x1:-0xb5a+0x36*-0x4d+0x8*0x373]),!![];}catch(_0x1b9aff){return warn('[lock]\x20set'+_0x424c02(0x203)+_0x424c02(0x28c)+'r\x20'+_0x5e8bc3+':\x20'+(_0x1b9aff?.[_0x424c02(0x274)]||_0x1b9aff)),![];}}async function getLockNotify(_0x1616fe){const _0x1ef07c=_0x1f4923;try{if(!_0x1616fe)return-0x1c53+0x44c*0x4+0xb23*0x1;const _0x5c9ed4=await db[_0x1ef07c(0x3e6)](_0x1ef07c(0x2b1)+_0x1ef07c(0x230)+_0x1ef07c(0x3b6)+'WHERE\x20chat'+'_jid\x20=\x20?',[_0x1616fe]);return _0x5c9ed4?Number(_0x5c9ed4[_0x1ef07c(0x330)])?-0x39*-0xaf+0x162a*0x1+0x3d20*-0x1:0x1f77+0x1da8+-0x3d1f*0x1:-0x474*-0x2+-0x12e*0x1b+0x216*0xb;}catch(_0x5e9ba9){return warn('[lock]\x20get'+'LockNotify'+'\x20failed\x20fo'+'r\x20'+_0x1616fe+':\x20'+(_0x5e9ba9?.[_0x1ef07c(0x274)]||_0x5e9ba9)),-0x7*0x2fc+0x491+0x1053;}}async function deleteWithRetry(_0x3dfdf2,_0x4c5bf1=-0x334+-0x7a*-0x49+-0x1f94,_0x81c2c6=-0x27*-0x1f+-0x2a*0x3f+0x6c9*0x1){const _0x321009=_0x1f4923,_0x534efb=_0x3dfdf2[_0x321009(0x213)]?.[_0x321009(0x2d8)];if(!_0x534efb)return![];let _0x32c2=_0x81c2c6;for(let _0x5f23bc=-0x1639*-0x1+-0x122c*-0x2+-0x3a90;_0x5f23bc<=Math[_0x321009(0x331)](-0x2*-0x68c+0x6*0x28d+-0x1c65,_0x4c5bf1);_0x5f23bc++){try{if(!sendApi)return warn('[lock]\x20del'+'eteWithRet'+'ry:\x20sendAp'+'i\x20unavaila'+_0x321009(0x2ad)),![];return await sendApi(_0x534efb,{'delete':_0x3dfdf2['key']}),!![];}catch(_0x588a31){if(_0x5f23bc<_0x4c5bf1){await sleep(_0x32c2),_0x32c2*=-0x445*-0x3+-0xc2f*0x2+-0x7*-0x1a7;continue;}return warn('[lock]\x20del'+'eteWithRet'+_0x321009(0x3a3)+'\x20'+(_0x588a31?.[_0x321009(0x274)]||_0x588a31)),![];}}return![];}async function sendWarningAndMaybeDelete(_0x3bbd33){const _0x45f16f=_0x1f4923;if(!CFG[_0x45f16f(0x2c9)+'NG'])return;try{const _0x5c4d7f=_0x3bbd33[_0x45f16f(0x213)]?.[_0x45f16f(0x3bf)+'t']||_0x3bbd33[_0x45f16f(0x213)]?.[_0x45f16f(0x261)]||'',_0x1327f3=_0x3bbd33[_0x45f16f(0x213)][_0x45f16f(0x2d8)],_0x5473bb=_0x5c4d7f?'@'+String(_0x5c4d7f)['split']('@')[0x23c2+-0x244c+0x2e*0x3]:_0x45f16f(0x318),_0x45437d=String(CFG['WARNING_ME'+_0x45f16f(0x3fc)]||DEFAULTS['WARNING_ME'+_0x45f16f(0x3fc)])[_0x45f16f(0x1f2)](/\{user\}/gi,_0x5473bb);if(!sendApi){warn(_0x45f16f(0x362)+'dWarning:\x20'+_0x45f16f(0x309)+_0x45f16f(0x263));return;}const _0x4f0b4c=await sendApi(_0x1327f3,{'text':_0x45437d,'mentions':_0x5c4d7f?[_0x5c4d7f]:[]});_0x4f0b4c?.[_0x45f16f(0x213)]&&CFG['WARNING_TT'+_0x45f16f(0x24a)]&&CFG[_0x45f16f(0x394)+'L_MS']>-0x24f8+0x1a26*-0x1+0x3f1e&&setTimeout(async()=>{const _0x2d36d0=_0x45f16f;try{await sendApi(_0x1327f3,{'delete':_0x4f0b4c[_0x2d36d0(0x213)]});}catch(_0x4e2496){}},CFG[_0x45f16f(0x394)+_0x45f16f(0x24a)]);}catch(_0x5f199b){warn('[lock]\x20sen'+'dWarning\x20f'+'ailed:\x20'+(_0x5f199b?.['message']||_0x5f199b));}}async function processChatQueue(_0x2da8e2){const _0x1fdbb7=_0x1f4923;while((perChatQueue[_0x1fdbb7(0x3e6)](_0x2da8e2)||[])['length']>0x7*0x50e+0x10c*-0x25+0x35a&&!shuttingDown){const _0x17f5f4=Math[_0x1fdbb7(0x331)](-0x1265+-0x25f1+-0x3857*-0x1,CFG['BATCH_SIZE']||0x1227+-0x2159*0x1+0x1*0xf33),_0x37d4de=perChatQueue[_0x1fdbb7(0x3e6)](_0x2da8e2)||[],_0x118d60=_0x37d4de['splice'](-0x4e2+-0xb23*0x2+-0xd94*-0x2,_0x17f5f4);for(const _0x2005b8 of _0x118d60){try{const _0xff6df8=await deleteWithRetry(_0x2005b8)['catch'](()=>![]);_0xff6df8&&await sendWarningAndMaybeDelete(_0x2005b8)[_0x1fdbb7(0x366)](()=>{});}catch(_0x581f08){warn(_0x1fdbb7(0x2a9)+_0x1fdbb7(0x249)+_0x1fdbb7(0x40c)+_0x1fdbb7(0x325)+(_0x581f08?.[_0x1fdbb7(0x274)]||_0x581f08));}}(perChatQueue[_0x1fdbb7(0x3e6)](_0x2da8e2)||[])[_0x1fdbb7(0x387)]>0x1a1d+0x2637+-0x4054*0x1&&await sleep(Math[_0x1fdbb7(0x331)](-0x1f*0x7a+-0x26c3+0x1*0x3589,CFG['BATCH_DELA'+_0x1fdbb7(0x372)]||-0x203*-0xf+0x1a0*0x14+-0x3de5));}if((perChatQueue[_0x1fdbb7(0x3e6)](_0x2da8e2)||[])[_0x1fdbb7(0x387)]===-0x14c8+-0x134c+0x2814)perChatQueue[_0x1fdbb7(0x27f)](_0x2da8e2);}function tryStartProcessingForChat(_0x33db8e){const _0x40c718=_0x1f4923;if(perChatProcessing[_0x40c718(0x3e6)](_0x33db8e))return;if(activeChats>=(CFG[_0x40c718(0x304)+_0x40c718(0x305)]||0x2579+0x26f4+0x4c6c*-0x1)){setTimeout(()=>tryStartProcessingForChat(_0x33db8e),-0x77*0x6+-0x15*-0x139+-0x1*0x164d);return;}activeChats++,perChatProcessing[_0x40c718(0x3e4)](_0x33db8e,!![]),((async()=>{const _0x5de6a3=_0x40c718;try{await processChatQueue(_0x33db8e);}catch(_0x3e03c5){warn(_0x5de6a3(0x2a9)+_0x5de6a3(0x249)+'eue\x20fail:\x20'+(_0x3e03c5?.['message']||_0x3e03c5));}finally{perChatProcessing['delete'](_0x33db8e),activeChats=Math[_0x5de6a3(0x331)](-0x2b*-0xb+-0x19*-0x102+0x3dd*-0x7,activeChats-(0x1bb3+0xda+-0x1c8c));if((perChatQueue[_0x5de6a3(0x3e6)](_0x33db8e)||[])[_0x5de6a3(0x387)])setImmediate(()=>tryStartProcessingForChat(_0x33db8e));}})());}function enqueueDeletion(_0x2304f0){const _0x11b3cf=_0x1f4923,_0xf82d80=_0x2304f0['key']?.[_0x11b3cf(0x2d8)];if(!_0xf82d80)return;if(!perChatQueue[_0x11b3cf(0x2e0)](_0xf82d80))perChatQueue['set'](_0xf82d80,[]);const _0x2d2b99=perChatQueue[_0x11b3cf(0x3e6)](_0xf82d80);if(_0x2d2b99[_0x11b3cf(0x387)]>=(CFG[_0x11b3cf(0x273)+'UEUE_LIMIT']||DEFAULTS[_0x11b3cf(0x273)+_0x11b3cf(0x28b)]))_0x2d2b99['shift']();_0x2d2b99[_0x11b3cf(0x291)](_0x2304f0);if(!perChatProcessing['get'](_0xf82d80))tryStartProcessingForChat(_0xf82d80);}function extractTextFromMessage(_0x30c1ef){const _0x372a03=_0x1f4923;if(!_0x30c1ef||!_0x30c1ef['message'])return'';const _0x141caf=_0x30c1ef['message'];if(_0x141caf[_0x372a03(0x398)+'on'])return _0x141caf[_0x372a03(0x398)+'on'];if(_0x141caf[_0x372a03(0x232)+_0x372a03(0x215)]?.['text'])return _0x141caf['extendedTe'+_0x372a03(0x215)][_0x372a03(0x37f)];if(_0x141caf[_0x372a03(0x388)+'ge']?.[_0x372a03(0x3a1)])return _0x141caf['imageMessa'+'ge'][_0x372a03(0x3a1)];if(_0x141caf[_0x372a03(0x374)+'ge']?.[_0x372a03(0x3a1)])return _0x141caf[_0x372a03(0x374)+'ge'][_0x372a03(0x3a1)];if(_0x141caf[_0x372a03(0x255)+_0x372a03(0x20c)+'ge']?.['selectedBu'+'ttonId'])return _0x141caf[_0x372a03(0x255)+_0x372a03(0x20c)+'ge'][_0x372a03(0x36b)+_0x372a03(0x31f)];return'';}function splitRestForGp(_0xcb9449){const _0x5c2fa5=_0x1f4923;if(!_0xcb9449)return{'left':'','gp':null};const _0x4f1df8=_0xcb9449['match'](/\bgp[:\s]+(.+)$/i);if(_0x4f1df8){const _0x2f0007=_0xcb9449[_0x5c2fa5(0x2e7)](-0x1bd9+0x23d5+-0x7fc,_0x4f1df8['index'])['trim'](),_0x4c25b8=_0x4f1df8[-0x1*0xd2b+0x772*-0x5+0x2*0x1933][_0x5c2fa5(0x2f6)]();return{'left':_0x2f0007,'gp':_0x4c25b8};}const _0x3f0578=_0xcb9449[_0x5c2fa5(0x1f8)](/\s+/)['filter'](Boolean);if(_0x3f0578[_0x5c2fa5(0x387)]>0x5c1*0x1+-0xf07+0x947){const _0x3a4d9d=_0x3f0578[_0x3f0578['length']-(0x1036+0x17b*-0x6+-0x753)];if(_0x3a4d9d[_0x5c2fa5(0x34b)+'e']()==='all'||_0x3a4d9d[_0x5c2fa5(0x3d4)]('@'))return _0x3f0578[_0x5c2fa5(0x408)](),{'left':_0x3f0578[_0x5c2fa5(0x3c6)]('\x20')['trim'](),'gp':_0x3a4d9d};}return{'left':_0xcb9449[_0x5c2fa5(0x2f6)](),'gp':null};}function parseLockCommandOneLine(_0x3d8579){const _0x234bc1=_0x1f4923,_0xd9a97e=(_0x3d8579||'')[_0x234bc1(0x1f8)](/\r?\n/)[-0xae1+-0x6*0x3c2+-0xc7*-0x2b][_0x234bc1(0x2f6)]();let _0x4b2e1b=_0xd9a97e[_0x234bc1(0x1f2)](/^\/?lock\b/i,'')['trim']();const {left:_0x48ddcf,gp:_0x18f766}=splitRestForGp(_0x4b2e1b),_0x185251=(_0x48ddcf||'')[_0x234bc1(0x1f8)](',')[_0x234bc1(0x3ff)](_0x488339=>_0x488339['trim']())['filter'](Boolean);return{'triggers':_0x185251,'gp':_0x18f766};}function parseUnlockCommandOneLine(_0x2eafc7){const _0x3fd9bd=_0x1f4923,_0x4f6893=(_0x2eafc7||'')[_0x3fd9bd(0x1f8)](/\r?\n/)[-0xd9f+-0x10d4+-0x1*-0x1e73][_0x3fd9bd(0x2f6)]();let _0x4f37b9=_0x4f6893[_0x3fd9bd(0x1f2)](/^\/?unlock\b/i,'')[_0x3fd9bd(0x2f6)]();const {left:_0x59f342,gp:_0x1a429b}=splitRestForGp(_0x4f37b9),_0x2dd6b4=(_0x59f342||'')[_0x3fd9bd(0x1f8)](',')['map'](_0x2b5f23=>_0x2b5f23[_0x3fd9bd(0x2f6)]())[_0x3fd9bd(0x269)](Boolean);return{'parts':_0x2dd6b4,'gp':_0x1a429b};}function parseListCommandOneLine(_0x57c5c8){const _0x16ed62=_0x1f4923,_0x44936b=(_0x57c5c8||'')[_0x16ed62(0x1f8)](/\r?\n/)[0x2324+0x165b+-0x167*0x29][_0x16ed62(0x2f6)]();let _0x1ef413=_0x44936b[_0x16ed62(0x1f2)](/^\/?listlock\b/i,'')[_0x16ed62(0x2f6)]();const {left:_0x28e370,gp:_0x3b3f5d}=splitRestForGp(_0x1ef413),_0x2af4f2=_0x3b3f5d||(_0x28e370?_0x28e370:null);return{'gp':_0x2af4f2};}function parseLockNotifyCommandOneLine(_0x5e44ef){const _0x46bd1e=_0x1f4923,_0x4b59ed=(_0x5e44ef||'')[_0x46bd1e(0x1f8)](/\r?\n/)[-0xad*-0x28+0x1*-0x21e+0x3*-0x84e][_0x46bd1e(0x2f6)]();let _0x41a397=_0x4b59ed['replace'](/^\/?locknotify\b/i,'')['trim']();const {left:_0x586fb0,gp:_0x407b6d}=splitRestForGp(_0x41a397),_0x4769cb=(_0x586fb0||'')['toLowerCas'+'e']();let _0x4ddbe9=null;if(_0x4769cb['includes']('on'))_0x4ddbe9='on';else{if(_0x4769cb['includes'](_0x46bd1e(0x33f)))_0x4ddbe9=_0x46bd1e(0x33f);}return{'mode':_0x4ddbe9,'gp':_0x407b6d};}async function validateStoredRegexes(){const _0x4ead47=_0x1f4923;try{const _0x28d1b3=await db[_0x4ead47(0x2dc)](_0x4ead47(0x216)+_0x4ead47(0x324)+'OM\x20locks\x20W'+'HERE\x20type\x20'+_0x4ead47(0x3e3)+_0x4ead47(0x208)+'\x27invalid_r'+_0x4ead47(0x2c8));for(const _0x1871c9 of _0x28d1b3||[]){try{new RegExp(_0x1871c9['phrase']),await db['run'](_0x4ead47(0x314)+_0x4ead47(0x301)+'valid_rege'+'x\x20=\x201\x20WHER'+'E\x20id\x20=\x20?',[_0x1871c9['id']]);}catch(_0x3c8e51){await db[_0x4ead47(0x250)](_0x4ead47(0x314)+_0x4ead47(0x301)+_0x4ead47(0x2b3)+_0x4ead47(0x205)+_0x4ead47(0x3cd),[_0x1871c9['id']]);}}}catch(_0x34c3d0){warn('[lock]\x20val'+_0x4ead47(0x37a)+_0x4ead47(0x2e1)+_0x4ead47(0x325)+(_0x34c3d0?.[_0x4ead47(0x274)]||_0x34c3d0));}}async function findStoredMatchFromFindings(_0x2e1797=[]){const _0x305162=_0x1f4923;try{const _0x4135eb=await listSudo();if(!Array[_0x305162(0x23c)](_0x4135eb)||_0x4135eb['length']===0x19bb+-0x4*-0xc1+-0x1cbf*0x1)return null;const _0x435282=new Set(_0x4135eb[_0x305162(0x3ff)](String));for(const _0xfdf2a1 of _0x2e1797||[]){if(!_0xfdf2a1||typeof _0xfdf2a1[_0x305162(0x212)]!=='string')continue;const _0x5c3250=normalizeToJid(_0xfdf2a1['jid']);if(_0x5c3250&&_0x435282['has'](_0x5c3250))return _0x5c3250;if(_0x435282['has'](_0xfdf2a1[_0x305162(0x212)]))return _0xfdf2a1[_0x305162(0x212)];const _0xc0f89d=String(_0xfdf2a1[_0x305162(0x212)])['split']('@')[0x1a0e+-0x3ab*-0x5+-0x2c65][_0x305162(0x1f8)](':')[0x203+-0x1abf+0x18bc];if(_0xc0f89d)for(const _0x5f0689 of _0x4135eb){const _0x5bc66d=String(_0x5f0689)['split']('@')[0x108+0x11b6+-0x2*0x95f];if(_0x5bc66d&&_0x5bc66d===_0xc0f89d)return _0x5f0689;}}return null;}catch(_0x18dd24){return warn('[lock]\x20fin'+_0x305162(0x31b)+_0x305162(0x25f)+_0x305162(0x28e)+':\x20'+(_0x18dd24?.[_0x305162(0x274)]||_0x18dd24)),null;}}export async function initialize(_0x154eab){const _0x40e78c=_0x1f4923;if(!_0x154eab)throw new Error('lock.initi'+_0x40e78c(0x1f7)+_0x40e78c(0x24e)+_0x40e78c(0x284));botRef=_0x154eab,setupSendApi();try{const _0x3b2c23=getConfig()||{},_0x510d27=_0x3b2c23&&_0x3b2c23[_0x40e78c(0x3ad)]?_0x3b2c23[_0x40e78c(0x3ad)]:{};CFG[_0x40e78c(0x33c)+_0x40e78c(0x2d5)]=_0x510d27['DEFAULT_EN'+_0x40e78c(0x2d5)]??DEFAULTS['DEFAULT_EN'+_0x40e78c(0x2d5)],CFG[_0x40e78c(0x2c9)+'NG']=_0x510d27['SEND_WARNI'+'NG']??DEFAULTS[_0x40e78c(0x2c9)+'NG'],CFG[_0x40e78c(0x20f)+'SSAGE']=_0x510d27[_0x40e78c(0x20f)+'SSAGE']??DEFAULTS[_0x40e78c(0x20f)+'SSAGE'],CFG[_0x40e78c(0x394)+_0x40e78c(0x24a)]=Number[_0x40e78c(0x35e)](_0x510d27['WARNING_TT'+_0x40e78c(0x24a)])?_0x510d27['WARNING_TT'+_0x40e78c(0x24a)]:DEFAULTS[_0x40e78c(0x394)+'L_MS'],CFG[_0x40e78c(0x273)+'UEUE_LIMIT']=Number['isInteger'](_0x510d27[_0x40e78c(0x273)+_0x40e78c(0x28b)])?_0x510d27[_0x40e78c(0x273)+_0x40e78c(0x28b)]:DEFAULTS[_0x40e78c(0x273)+_0x40e78c(0x28b)],CFG[_0x40e78c(0x383)]=Number['isInteger'](_0x510d27[_0x40e78c(0x383)])?_0x510d27['BATCH_SIZE']:DEFAULTS[_0x40e78c(0x383)],CFG[_0x40e78c(0x2bd)+_0x40e78c(0x372)]=Number['isInteger'](_0x510d27[_0x40e78c(0x2bd)+'Y_MS'])?_0x510d27[_0x40e78c(0x2bd)+_0x40e78c(0x372)]:DEFAULTS['BATCH_DELA'+'Y_MS'],CFG[_0x40e78c(0x304)+_0x40e78c(0x305)]=Number[_0x40e78c(0x35e)](_0x510d27[_0x40e78c(0x304)+_0x40e78c(0x305)])?_0x510d27[_0x40e78c(0x304)+_0x40e78c(0x305)]:DEFAULTS[_0x40e78c(0x304)+'CURRENCY'],CFG[_0x40e78c(0x1f3)+_0x40e78c(0x3f4)+'CRITICS']=!!_0x510d27[_0x40e78c(0x1f3)+'REMOVE_DIA'+_0x40e78c(0x343)];}catch(_0x256ee0){warn(_0x40e78c(0x3ca)+_0x40e78c(0x28a)+'ailed,\x20usi'+'ng\x20default'+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info(_0x40e78c(0x3b8)+'tialized\x20('+'DB\x20ensured'+_0x40e78c(0x32e)+_0x40e78c(0x322)+_0x40e78c(0x414));}catch(_0xc041bb){error(_0xc041bb,_0x40e78c(0x3b8)+_0x40e78c(0x2f8)+_0x40e78c(0x264));throw _0xc041bb;}}export async function onMessage(_0x2606a5){const _0x78bf0a=_0x1f4923;try{if(!_0x2606a5||!_0x2606a5[_0x78bf0a(0x213)]||!_0x2606a5[_0x78bf0a(0x274)])return;const _0x1aae96=_0x2606a5[_0x78bf0a(0x213)]?.['id']||_0x2606a5['key']?.[_0x78bf0a(0x3bf)+'t']||(_0x2606a5[_0x78bf0a(0x213)]?.[_0x78bf0a(0x307)]?_0x78bf0a(0x307):''),_0x28b73e=String(_0x2606a5[_0x78bf0a(0x213)][_0x78bf0a(0x2d8)]||'')+'::'+String(_0x1aae96||'');if(isProcessed(_0x28b73e))return;markProcessed(_0x28b73e);const _0x3e2419=extractTextFromMessage(_0x2606a5);if(!_0x3e2419)return;const _0x5bc269=_0x2606a5[_0x78bf0a(0x213)]['remoteJid'],_0x49baab=typeof _0x5bc269===_0x78bf0a(0x3c0)&&_0x5bc269[_0x78bf0a(0x2a7)](_0x78bf0a(0x2d7)),_0x3a0dea=_0x2606a5[_0x78bf0a(0x213)]?.[_0x78bf0a(0x3bf)+'t']||_0x2606a5[_0x78bf0a(0x213)]?.[_0x78bf0a(0x261)]||_0x2606a5[_0x78bf0a(0x213)]?.[_0x78bf0a(0x2d8)]||'',_0x3d5099=String(_0x3a0dea||'')[_0x78bf0a(0x1f8)]('@')[0x1465*0x1+-0x392*-0x8+-0x1*0x30f5];let _0xa071f8=![];if(_0x49baab)try{_0xa071f8=await isadmin(botRef,_0x2606a5);}catch(_0x2eae6c){warn(_0x78bf0a(0x393)+_0x78bf0a(0x238)+_0x78bf0a(0x3df)),_0xa071f8=![];}if(_0x2606a5[_0x78bf0a(0x378)]){const _0xcd8b32=typeof _0x2606a5['text']===_0x78bf0a(0x3c0)&&_0x2606a5[_0x78bf0a(0x37f)][_0x78bf0a(0x2f6)]()['length']?_0x2606a5[_0x78bf0a(0x37f)][_0x78bf0a(0x2f6)]():_0x3e2419[_0x78bf0a(0x2f6)](),_0x4b499e=(_0xcd8b32[_0x78bf0a(0x1f8)](/\s+/)[-0x3dc*-0x4+-0x2da*-0x8+-0x2640]||'')['toLowerCas'+'e']();if(!_0x49baab){const _0x3d0634=Boolean(_0x2606a5['key'][_0x78bf0a(0x307)]);let _0x2fdc12=null;if(_0x3d0634){const _0x24c516=getBotJid();_0x2fdc12=_0x24c516||_0x2606a5[_0x78bf0a(0x213)][_0x78bf0a(0x2d8)];}else{let _0x5e365a=![];try{_0x5e365a=await isSudo(botRef,_0x2606a5);}catch(_0x36bd32){_0x5e365a=![];}if(!_0x5e365a)return;const _0x14e7b4=userJidFromCtx(_0x2606a5)||{'findings':[]},_0x3b41f0=await findStoredMatchFromFindings(_0x14e7b4[_0x78bf0a(0x333)]||[]);if(!_0x3b41f0)return;_0x2fdc12=_0x3b41f0;}if(!_0x2fdc12)return;if(_0x4b499e===_0x78bf0a(0x381)){const {triggers:_0x3dfb1f,gp:_0x3befd0}=parseLockCommandOneLine(_0xcd8b32||_0x3e2419);if(!_0x3dfb1f[_0x78bf0a(0x387)]){await sendText(_0x2fdc12,_0x78bf0a(0x2b2)+_0x78bf0a(0x3d6)+_0x78bf0a(0x3b2)+_0x78bf0a(0x3dd)+_0x78bf0a(0x363)+_0x78bf0a(0x3eb)+_0x78bf0a(0x3f0));return;}if(!_0x3befd0){await sendText(_0x2fdc12,'❌\x20PM:\x20incl'+_0x78bf0a(0x25d)+'same\x20line.'+_0x78bf0a(0x25e)+_0x78bf0a(0x3c9)+_0x78bf0a(0x357)+_0x78bf0a(0x3bb));return;}let _0x28111c=[];const _0x415719=_0x3befd0[_0x78bf0a(0x2f6)]();if(_0x415719[_0x78bf0a(0x34b)+'e']()===_0x78bf0a(0x2dc))_0x28111c=await _0x69d516[_0x78bf0a(0x214)+_0x78bf0a(0x2be)]();else{const _0x58ebb6=await _0x69d516[_0x78bf0a(0x32f)+'e'](_0x415719);if(_0x58ebb6)_0x28111c=[_0x58ebb6];else{if(_0x415719[_0x78bf0a(0x3d4)]('@'))_0x28111c=[_0x69d516[_0x78bf0a(0x297)+'oUserJid'](_0x415719)];else{await sendText(_0x2fdc12,_0x78bf0a(0x3c4)+_0x78bf0a(0x2b0)+'id:\x20\x22'+_0x415719+'\x22.');return;}}}let _0x45090b=-0xbfb+-0x17a7*0x1+0x2*0x11d1;for(const _0x16d507 of uniqArray(_0x28111c)){for(const _0x288f2e of _0x3dfb1f){const _0x210ad8=await addLock(_0x16d507,_0x288f2e,_0x3a0dea);if(_0x210ad8)_0x45090b++;}}await sendText(_0x2fdc12,'✔️\x20Saved\x20'+_0x45090b+_0x78bf0a(0x299));return;}if(_0x4b499e===_0x78bf0a(0x1fb)){const {gp:_0x4c3bca}=parseListCommandOneLine(_0xcd8b32||_0x3e2419);if(!_0x4c3bca){await sendText(_0x2fdc12,'❌\x20PM:\x20one-'+_0x78bf0a(0x3d6)+_0x78bf0a(0x407)+'\x20gp:<alias'+'|jid|all>');return;}let _0x1a7e8d=[];if(_0x4c3bca[_0x78bf0a(0x34b)+'e']()===_0x78bf0a(0x2dc))_0x1a7e8d=await _0x69d516[_0x78bf0a(0x214)+_0x78bf0a(0x2be)]();else{const _0x5ba164=await _0x69d516[_0x78bf0a(0x32f)+'e'](_0x4c3bca);if(_0x5ba164)_0x1a7e8d=[_0x5ba164];else{if(_0x4c3bca[_0x78bf0a(0x3d4)]('@'))_0x1a7e8d=[_0x69d516['normalizeT'+_0x78bf0a(0x3a2)](_0x4c3bca)];else{await sendText(_0x2fdc12,'❌\x20Unknown\x20'+_0x78bf0a(0x2b0)+_0x78bf0a(0x29a)+_0x4c3bca+'\x22.');return;}}}let _0x571352=[];for(const _0x383f59 of _0x1a7e8d){const _0x329d7f=await listLocksForChat(_0x383f59);for(const _0x27ee40 of _0x329d7f)_0x571352[_0x78bf0a(0x291)]({'chatJid':_0x383f59,..._0x27ee40});}await sendText(_0x2fdc12,_0x78bf0a(0x3cc)+_0x571352['length']+(_0x78bf0a(0x37d)+_0x78bf0a(0x384)+_0x78bf0a(0x3a9)+_0x78bf0a(0x3d0)));if(!_0x571352['length'])return;let _0x40253c='';for(const _0x25ce54 of _0x571352){const _0x5b6f6a=_0x25ce54['created_at']?new Date(_0x25ce54['created_at']*(0x35c+0x167*-0x4+0x628))[_0x78bf0a(0x231)+'g']()['slice'](-0x106c*-0x2+0x109*0x1+-0x21e1,0x25d3+-0x19ac+-0xc1d):'',_0x5c2329=_0x25ce54['type']===_0x78bf0a(0x236)?'⦿':_0x25ce54[_0x78bf0a(0x2bb)]==='wildcard'?'✶':'',_0x40edb9=_0x25ce54['type']===_0x78bf0a(0x236)?_0x78bf0a(0x2d2)+_0x25ce54[_0x78bf0a(0x3ce)]:_0x25ce54[_0x78bf0a(0x3ce)],_0x1b3e2c=_0x25ce54['type']==='regex'&&_0x25ce54['is_valid_r'+_0x78bf0a(0x2ea)]===0x12e6+0x24f5*-0x1+0x43*0x45?_0x78bf0a(0x2cc)+_0x78bf0a(0x3be):'',_0x4ddad6=_0x25ce54['chatJid']+':'+_0x25ce54['id']+'.\x20'+(_0x5c2329?_0x5c2329+'\x20':'')+_0x40edb9+_0x1b3e2c+'\x20'+(_0x5b6f6a?'('+_0x5b6f6a+')':'')+'\x0a';(_0x40253c+_0x4ddad6)[_0x78bf0a(0x387)]>-0x21d1+-0x211*0x1+-0x29be*-0x1&&(await sendText(_0x2fdc12,_0x40253c[_0x78bf0a(0x2f6)]()),_0x40253c=''),_0x40253c+=_0x4ddad6;}if(_0x40253c[_0x78bf0a(0x2f6)]())await sendText(_0x2fdc12,_0x40253c[_0x78bf0a(0x2f6)]());return;}if([_0x78bf0a(0x3a8),'dellock',_0x78bf0a(0x3b0),_0x78bf0a(0x3d8),_0x78bf0a(0x3b0)][_0x78bf0a(0x3d4)](_0x4b499e)){const {parts:_0x2ff1ed,gp:_0x575dbc}=parseUnlockCommandOneLine(_0xcd8b32||_0x3e2419);if(!_0x2ff1ed?.[_0x78bf0a(0x387)]){await sendText(_0x2fdc12,_0x78bf0a(0x2b2)+_0x78bf0a(0x3d6)+_0x78bf0a(0x3cf)+_0x78bf0a(0x2bc)+_0x78bf0a(0x3ae)+_0x78bf0a(0x364)+'gp:<alias|'+_0x78bf0a(0x2ce));return;}if(!_0x575dbc){await sendText(_0x2fdc12,_0x78bf0a(0x38c)+_0x78bf0a(0x25d)+'same\x20line.'+_0x78bf0a(0x25e)+_0x78bf0a(0x40e)+_0x78bf0a(0x251));return;}let _0x2ced9e=[];const _0x457003=_0x575dbc[_0x78bf0a(0x2f6)]();if(_0x457003[_0x78bf0a(0x34b)+'e']()===_0x78bf0a(0x2dc))_0x2ced9e=await _0x69d516[_0x78bf0a(0x214)+_0x78bf0a(0x2be)]();else{const _0x2bc849=await _0x69d516[_0x78bf0a(0x32f)+'e'](_0x457003);if(_0x2bc849)_0x2ced9e=[_0x2bc849];else{if(_0x457003['includes']('@'))_0x2ced9e=[_0x69d516[_0x78bf0a(0x297)+_0x78bf0a(0x3a2)](_0x457003)];else{await sendText(_0x2fdc12,_0x78bf0a(0x3c4)+_0x78bf0a(0x2b0)+_0x78bf0a(0x29a)+_0x457003+'\x22.');return;}}}let _0x44210d=0x5ed+-0xb97+0x5aa;for(const _0x1c0de8 of _0x2ff1ed){if(!_0x1c0de8)continue;if(/^\d+$/['test'](_0x1c0de8)){for(const _0x1648df of _0x2ced9e){const _0x403590=await deleteLockById(_0x1648df,_0x1c0de8);if(_0x403590)_0x44210d+=_0x403590;}continue;}for(const _0x50769a of _0x2ced9e){const _0x5d4d2f=await deleteLockByPhrase(_0x50769a,_0x1c0de8);if(_0x5d4d2f)_0x44210d+=_0x5d4d2f;}}await sendText(_0x2fdc12,_0x78bf0a(0x2a1)+_0x44210d+'/'+_0x2ff1ed[_0x78bf0a(0x387)]+_0x78bf0a(0x299));return;}if(_0x4b499e==='unlockall'||_0x4b499e===_0x78bf0a(0x2d1)||_0x4b499e==='clearlocks'){const _0x1349cd=(_0xcd8b32||_0x3e2419||'')['split'](/\r?\n/)[0x1277*-0x2+-0x47*-0x65+0x1*0x8eb]['trim'](),_0x352aec=_0x1349cd['replace'](/^\/?(unlockall|delall|clearlocks)\b/i,'')[_0x78bf0a(0x2f6)](),{left:_0xcd7edf,gp:_0x3be030}=splitRestForGp(_0x352aec);if(!_0x3be030){await sendText(_0x2fdc12,_0x78bf0a(0x2b2)+_0x78bf0a(0x3d6)+_0x78bf0a(0x3f7)+'l\x20gp:<alia'+'s|jid|all>');return;}let _0x58b88f=[];const _0x2c06ca=_0x3be030[_0x78bf0a(0x2f6)]();if(_0x2c06ca[_0x78bf0a(0x34b)+'e']()===_0x78bf0a(0x2dc))_0x58b88f=await _0x69d516[_0x78bf0a(0x214)+_0x78bf0a(0x2be)]();else{const _0x5227c9=await _0x69d516['resolveNam'+'e'](_0x2c06ca);if(_0x5227c9)_0x58b88f=[_0x5227c9];else{if(_0x2c06ca['includes']('@'))_0x58b88f=[_0x69d516['normalizeT'+_0x78bf0a(0x3a2)](_0x2c06ca)];else{await sendText(_0x2fdc12,'❌\x20Unknown\x20'+_0x78bf0a(0x2b0)+_0x78bf0a(0x29a)+_0x2c06ca+'\x22.');return;}}}let _0x343ff0=0x2*-0xf8+-0x11b*-0x15+-0x1547*0x1;for(const _0x44dd66 of _0x58b88f){const _0x5470e2=await deleteAllLocksForChat(_0x44dd66);_0x343ff0+=_0x5470e2||0x7*0x1d6+-0x10*0x9d+-0x30a;}await sendText(_0x2fdc12,'✔️\x20Deleted\x20'+_0x343ff0+'\x20lock(s).');return;}if(_0x4b499e==='locknotify'){const _0x109b5a=parseLockNotifyCommandOneLine(_0xcd8b32||_0x3e2419),{mode:_0x2b2ed1,gp:_0x5d94b6}=_0x109b5a;if(!_0x5d94b6){await sendText(_0x2fdc12,_0x78bf0a(0x317)+_0x78bf0a(0x202)+_0x78bf0a(0x21f)+_0x78bf0a(0x31c)+'\x20gp:<alias'+_0x78bf0a(0x21b)+_0x78bf0a(0x224)+_0x78bf0a(0x3a4)+_0x78bf0a(0x2fc)+_0x78bf0a(0x1f6)+_0x78bf0a(0x279));return;}let _0x1c85ed=[];const _0x795770=_0x5d94b6['trim']();if(_0x795770[_0x78bf0a(0x34b)+'e']()==='all')_0x1c85ed=await _0x69d516[_0x78bf0a(0x214)+_0x78bf0a(0x2be)]();else{const _0x5ddb52=await _0x69d516['resolveNam'+'e'](_0x795770);if(_0x5ddb52)_0x1c85ed=[_0x5ddb52];else{if(_0x795770[_0x78bf0a(0x3d4)]('@'))_0x1c85ed=[_0x69d516[_0x78bf0a(0x297)+_0x78bf0a(0x3a2)](_0x795770)];else{await sendText(_0x2fdc12,_0x78bf0a(0x3c4)+'gp\x20alias/j'+_0x78bf0a(0x29a)+_0x795770+'\x22.');return;}}}if(!_0x2b2ed1){const _0x481200=[];for(const _0x11c1a0 of uniqArray(_0x1c85ed)){const _0x5b49a1=await getLockNotify(_0x11c1a0)[_0x78bf0a(0x366)](()=>0x18c7+-0x1*-0x1da+-0x1aa1);_0x481200[_0x78bf0a(0x291)](_0x11c1a0+':\x20'+(_0x5b49a1?'ON':'OFF'));}await sendText(_0x2fdc12,_0x78bf0a(0x396)+_0x78bf0a(0x3e0)+'status:\x0a'+_0x481200[_0x78bf0a(0x3c6)]('\x0a'));return;}let _0x770692=-0x3d*-0x43+-0x927+-0x6d0;for(const _0x5db5a3 of uniqArray(_0x1c85ed)){const _0x5f32e1=await setLockNotify(_0x5db5a3,_0x2b2ed1==='on');if(_0x5f32e1)_0x770692++;}await sendText(_0x2fdc12,_0x78bf0a(0x272)+_0x78bf0a(0x2f5)+_0x2b2ed1+_0x78bf0a(0x34f)+_0x770692+'/'+_0x1c85ed['length']+(_0x78bf0a(0x290)+'.'));return;}return;}if(_0x49baab){if(!_0xa071f8)return;const _0x267814=_0x5bc269,_0x32508a=await getDefault(_0x3d5099)[_0x78bf0a(0x366)](()=>null);if(!_0x32508a||Array['isArray'](_0x32508a)&&_0x32508a['length']===0x1*0x22+0x12*-0x35+0x17*0x28)return;const _0x2a9bd6=Array[_0x78bf0a(0x23c)](_0x32508a)?_0x32508a:[_0x32508a];let _0xc6ba02=[];for(const _0x4a86f6 of _0x2a9bd6){try{const _0x10cd51=await getConnection(_0x4a86f6)[_0x78bf0a(0x366)](()=>null);if(Array[_0x78bf0a(0x23c)](_0x10cd51))_0xc6ba02['push'](..._0x10cd51);else{if(_0x10cd51)_0xc6ba02[_0x78bf0a(0x291)](String(_0x10cd51));}}catch(_0x1b4600){warn(_0x78bf0a(0x3d3)+'olving\x20con'+_0x78bf0a(0x243)+_0x4a86f6+_0x78bf0a(0x27d)+(_0x1b4600?.[_0x78bf0a(0x274)]||_0x1b4600));}}_0xc6ba02=uniqArray(_0xc6ba02);if(!_0xc6ba02[_0x78bf0a(0x387)]){await sendText(_0x267814,'❌\x20Could\x20no'+_0x78bf0a(0x3c1)+_0x78bf0a(0x27c)+_0x78bf0a(0x380)+_0x78bf0a(0x2d0)+_0x2a9bd6[_0x78bf0a(0x3c6)](',\x20')+(_0x78bf0a(0x2a4)+_0x78bf0a(0x295)+_0x78bf0a(0x223)+'ue(s).'));return;}if(_0x4b499e===_0x78bf0a(0x381)){const {triggers:_0x34b84e}=parseLockCommandOneLine(_0xcd8b32||_0x3e2419);if(!_0x34b84e['length']){await sendText(_0x267814,_0x78bf0a(0x241)+_0x78bf0a(0x354)+':\x20lock\x20tri'+'gger1,trig'+_0x78bf0a(0x2ec));return;}let _0x5ec038=-0x518*0x2+-0x1767+-0x2197*-0x1;for(const _0x9d2e10 of _0xc6ba02){let _0x1d30ad=-0xc*0x2cf+-0xc65*-0x1+0x1*0x154f;for(const _0x41b337 of _0x34b84e){const _0x365001=await addLock(_0x9d2e10,_0x41b337,_0x3a0dea);if(_0x365001)_0x1d30ad++;}_0x5ec038+=_0x1d30ad;}await sendText(_0x267814,'✔️\x20Saved\x20'+_0x5ec038+'/'+_0x34b84e[_0x78bf0a(0x387)]*_0xc6ba02[_0x78bf0a(0x387)]+('\x20lock\x20entr'+_0x78bf0a(0x347)+_0x78bf0a(0x204)+_0x78bf0a(0x234)+_0x78bf0a(0x32c))+_0xc6ba02[_0x78bf0a(0x3c6)](',\x20'));return;}if(_0x4b499e==='listlock'){const _0x13b6b7=[];for(const _0x40c9b2 of _0xc6ba02){const _0x7528d=await listLocksForChat(_0x40c9b2);for(const _0x322a4b of _0x7528d)_0x13b6b7['push']({'chatJid':_0x40c9b2,..._0x322a4b});}await sendText(_0x267814,_0x78bf0a(0x396)+_0x78bf0a(0x315)+_0x13b6b7[_0x78bf0a(0x387)]+('\x20locks\x20for'+'\x20your\x20defa'+_0x78bf0a(0x3ab)+_0x78bf0a(0x2af))+_0xc6ba02[_0x78bf0a(0x3c6)](',\x20'));if(!_0x13b6b7[_0x78bf0a(0x387)])return;let _0x17fb4d='';for(const _0x3ad08b of _0x13b6b7){const _0x4fd783=_0x3ad08b[_0x78bf0a(0x23a)]?new Date(_0x3ad08b[_0x78bf0a(0x23a)]*(-0x463*0x5+-0x24d8+0x3eaf))[_0x78bf0a(0x231)+'g']()['slice'](0x3d8+0x182+-0x55a,0x1025*0x1+-0x10ab+0x90):'',_0x362126=_0x3ad08b[_0x78bf0a(0x2bb)]==='regex'?'⦿':_0x3ad08b[_0x78bf0a(0x2bb)]===_0x78bf0a(0x3c7)?'✶':'',_0x1bd6f4=_0x3ad08b[_0x78bf0a(0x2bb)]===_0x78bf0a(0x236)?'regex:'+_0x3ad08b[_0x78bf0a(0x3ce)]:_0x3ad08b[_0x78bf0a(0x3ce)],_0x5f4bdd=_0x3ad08b['type']===_0x78bf0a(0x236)&&_0x3ad08b['is_valid_r'+_0x78bf0a(0x2ea)]===-0x18f2+-0x8b*0x1f+-0x29c7*-0x1?_0x78bf0a(0x2cc)+_0x78bf0a(0x3be):'',_0x427a7c=_0x3ad08b[_0x78bf0a(0x30f)]+':'+_0x3ad08b['id']+'.\x20'+(_0x362126?_0x362126+'\x20':'')+_0x1bd6f4+_0x5f4bdd+'\x20'+(_0x4fd783?'('+_0x4fd783+')':'')+'\x0a';(_0x17fb4d+_0x427a7c)[_0x78bf0a(0x387)]>0x24cf+-0x647+-0x18ac&&(await sendText(_0x267814,_0x17fb4d[_0x78bf0a(0x2f6)]()),_0x17fb4d=''),_0x17fb4d+=_0x427a7c;}if(_0x17fb4d[_0x78bf0a(0x2f6)]())await sendText(_0x267814,_0x17fb4d[_0x78bf0a(0x2f6)]());return;}if([_0x78bf0a(0x3a8),_0x78bf0a(0x296),_0x78bf0a(0x3b0),'unlocklock',_0x78bf0a(0x3b0)][_0x78bf0a(0x3d4)](_0x4b499e)){const {parts:_0x36990e}=parseUnlockCommandOneLine(_0xcd8b32||_0x3e2419);if(!_0x36990e?.['length']){await sendText(_0x267814,_0x78bf0a(0x241)+'roup-only)'+_0x78bf0a(0x332)+',2\x20OR\x20unlo'+_0x78bf0a(0x2f9)+_0x78bf0a(0x3cb));return;}const _0x2f0822=new Map();for(const _0x753f3 of _0xc6ba02){const _0x4c5664=await listLocksForChat(_0x753f3);_0x2f0822['set'](_0x753f3,_0x4c5664||[]);}let _0x3ee5f3=0x2*0xcf6+-0x169e+-0x34e;for(const _0x2ad2fe of _0x36990e){if(!_0x2ad2fe)continue;if(/^\d+$/['test'](_0x2ad2fe)){for(const [_0x200b21,_0x10a5c9]of _0x2f0822['entries']()){if(_0x10a5c9[_0x78bf0a(0x1fc)](_0x492093=>String(_0x492093['id'])===_0x2ad2fe)){const _0x4bd388=await deleteLockById(_0x200b21,_0x2ad2fe);if(_0x4bd388)_0x3ee5f3+=_0x4bd388;}}continue;}for(const _0xa4d20 of _0xc6ba02){const _0x401cf4=await deleteLockByPhrase(_0xa4d20,_0x2ad2fe);if(_0x401cf4)_0x3ee5f3+=_0x401cf4;}}await sendText(_0x267814,_0x78bf0a(0x2a1)+_0x3ee5f3+'/'+_0x36990e[_0x78bf0a(0x387)]+(_0x78bf0a(0x413)+'rom\x20your\x20d'+_0x78bf0a(0x252)+'nection(s)'+':\x20')+_0xc6ba02['join'](',\x20'));return;}if(_0x4b499e===_0x78bf0a(0x1eb)||_0x4b499e==='delall'||_0x4b499e===_0x78bf0a(0x2f1)){try{let _0x16425b=-0x2*-0x1358+0x226c+-0x491c;for(const _0x4f667a of _0xc6ba02){const _0x3ad56c=await deleteAllLocksForChat(_0x4f667a);_0x16425b+=_0x3ad56c||-0x2b+0x971+-0x946;}await sendText(_0x267814,'✔️\x20Deleted\x20'+_0x16425b+('\x20lock(s)\x20f'+_0x78bf0a(0x293)+'efault\x20con'+_0x78bf0a(0x270)+':\x20')+_0xc6ba02[_0x78bf0a(0x3c6)](',\x20'));}catch(_0x33ec15){warn(_0x78bf0a(0x397)+_0x78bf0a(0x353)+_0x78bf0a(0x352)+_0xc6ba02[_0x78bf0a(0x3c6)](',\x20')+':\x20'+(_0x33ec15?.[_0x78bf0a(0x274)]||_0x33ec15)),await sendText(_0x267814,_0x78bf0a(0x33e)+'o\x20delete\x20l'+_0x78bf0a(0x320)+_0x78bf0a(0x3ac)+_0x78bf0a(0x3bc)+_0x78bf0a(0x3bd)+_0xc6ba02['join'](',\x20'));}return;}if(_0x4b499e==='locknotify'){const _0x3d6206=(_0xcd8b32||_0x3e2419||'')[_0x78bf0a(0x1f8)](/\r?\n/)[-0x261d+0x4*0x1eb+0x1e71]['trim'](),{left:_0x5cb988}=splitRestForGp(_0x3d6206['replace'](/^\/?locknotify\b/i,'')['trim']()),_0x3d66ae=(_0x5cb988||'')[_0x78bf0a(0x34b)+'e']();if(!_0x3d66ae[_0x78bf0a(0x3d4)]('on')&&!_0x3d66ae[_0x78bf0a(0x3d4)](_0x78bf0a(0x33f))){await sendText(_0x267814,_0x78bf0a(0x241)+'roup-only)'+_0x78bf0a(0x27e)+_0x78bf0a(0x418)+'This\x20toggl'+_0x78bf0a(0x379)+_0x78bf0a(0x3dc)+'s\x20for\x20your'+_0x78bf0a(0x22f)+'onnection('+_0x78bf0a(0x1ed));return;}const _0x5e51f4=_0x3d66ae[_0x78bf0a(0x3d4)]('on')?'on':_0x78bf0a(0x33f);let _0x27e93f=-0x1a1b+-0x40*0x98+0x401b;for(const _0x3fb52e of _0xc6ba02){const _0x4d6a80=await setLockNotify(_0x3fb52e,_0x5e51f4==='on');if(_0x4d6a80)_0x27e93f++;}await sendText(_0x267814,_0x78bf0a(0x272)+_0x78bf0a(0x2f5)+_0x5e51f4+_0x78bf0a(0x34f)+_0x27e93f+'/'+_0xc6ba02[_0x78bf0a(0x387)]+(_0x78bf0a(0x312)+'onnection('+_0x78bf0a(0x1ed)));return;}return;}}if(_0x49baab){if(!CFG[_0x78bf0a(0x33c)+_0x78bf0a(0x2d5)])return;if(_0x2606a5[_0x78bf0a(0x213)][_0x78bf0a(0x307)])return;if(_0xa071f8)return;const _0x6ec242=_0x5bc269,_0x51c1e6=extractTextFromMessage(_0x2606a5);if(!_0x51c1e6)return;const _0x100f43=normalizeForMatch(String(_0x51c1e6||''))[_0x78bf0a(0x34b)+'e'](),_0x1b30cc=await listLocksForChat(_0x6ec242);if(!_0x1b30cc||!_0x1b30cc['length'])return;const _0x3f050e=_0x1b30cc[_0x78bf0a(0x269)](_0x1c970f=>!_0x1c970f['type']||_0x1c970f[_0x78bf0a(0x2bb)]===_0x78bf0a(0x239)),_0x293318=_0x1b30cc[_0x78bf0a(0x269)](_0x2a8a15=>_0x2a8a15[_0x78bf0a(0x2bb)]===_0x78bf0a(0x3c7)),_0xbee069=_0x1b30cc[_0x78bf0a(0x269)](_0x39ba2b=>_0x39ba2b[_0x78bf0a(0x2bb)]===_0x78bf0a(0x236)||_0x39ba2b['type']===_0x78bf0a(0x226)+_0x78bf0a(0x2a6)),_0x4e18d3=new Set(),_0x25374c=new Set();if(_0x3f050e[_0x78bf0a(0x387)]>0x1271+-0x154f+0x2de){const _0x5cab3f=_0x3f050e[_0x78bf0a(0x3ff)](_0x9405b2=>normalizeForMatch(String(_0x9405b2[_0x78bf0a(0x3ce)]||'')))[_0x78bf0a(0x269)](Boolean),_0x5365f2=_0x5cab3f[_0x78bf0a(0x3c6)]('\x00');let _0x2a1392;const _0x557878=ahoCache[_0x78bf0a(0x3e6)](_0x6ec242);if(_0x557878&&_0x557878[_0x78bf0a(0x3aa)+_0x78bf0a(0x3da)]===_0x5365f2&&_0x557878[_0x78bf0a(0x3e7)])_0x2a1392=_0x557878['aho'];else try{_0x2a1392=new AhoCorasick(_0x5cab3f),ahoCache[_0x78bf0a(0x3e4)](_0x6ec242,{'serializedKeywords':_0x5365f2,'aho':_0x2a1392});}catch(_0x289cb0){warn(_0x78bf0a(0x30d)+_0x78bf0a(0x410)+_0x78bf0a(0x356)+_0x78bf0a(0x265)+_0x6ec242+':\x20'+(_0x289cb0?.[_0x78bf0a(0x274)]||_0x289cb0)),_0x2a1392=null;}if(_0x2a1392)try{const _0x49241f=_0x2a1392['search'](_0x100f43);for(const _0x175b45 of _0x49241f){const _0x789f1b=_0x175b45[_0x78bf0a(0x2f4)],_0x555337=_0x175b45['index'],_0x23e57d=_0x555337+_0x789f1b[_0x78bf0a(0x387)],_0x3bfac7=_0x555337===-0x661+0x2*0x3ee+0x1*-0x17b||!/\w/[_0x78bf0a(0x292)](_0x100f43[_0x555337-(0x2*-0x94f+-0x763*-0x3+0x97*-0x6)]),_0x3ca8df=_0x23e57d===_0x100f43[_0x78bf0a(0x387)]||!/\w/['test'](_0x100f43[_0x23e57d]);if(_0x3bfac7&&_0x3ca8df)for(const _0x5005d8 of _0x3f050e){const _0x22c6e0=normalizeForMatch(String(_0x5005d8[_0x78bf0a(0x3ce)]||''));if(_0x22c6e0===_0x789f1b)try{const _0x294697=wholeWordRegexForPhrase(_0x22c6e0);_0x294697['test'](_0x100f43)&&(_0x4e18d3['add'](_0x5005d8['id']),_0x25374c[_0x78bf0a(0x2e4)](_0x5005d8[_0x78bf0a(0x3ce)]));}catch(_0x25d402){_0x4e18d3['add'](_0x5005d8['id']),_0x25374c[_0x78bf0a(0x2e4)](_0x5005d8[_0x78bf0a(0x3ce)]);}}else for(const _0x490320 of _0x3f050e){try{const _0x3631e1=wholeWordRegexForPhrase(normalizeForMatch(String(_0x490320[_0x78bf0a(0x3ce)]||'')));_0x3631e1['test'](_0x100f43)&&(_0x4e18d3[_0x78bf0a(0x2e4)](_0x490320['id']),_0x25374c[_0x78bf0a(0x2e4)](_0x490320['phrase']));}catch(_0x4086f2){}}}}catch(_0x35e599){warn(_0x78bf0a(0x30d)+_0x78bf0a(0x334)+_0x78bf0a(0x257)+_0x78bf0a(0x271)+(_0x35e599?.[_0x78bf0a(0x274)]||_0x35e599));for(const _0x44e952 of _0x3f050e){try{const _0x4fe4b7=wholeWordRegexForPhrase(normalizeForMatch(String(_0x44e952[_0x78bf0a(0x3ce)]||'')));_0x4fe4b7['test'](_0x100f43)&&(_0x4e18d3['add'](_0x44e952['id']),_0x25374c[_0x78bf0a(0x2e4)](_0x44e952['phrase']));}catch(_0x5ba541){}}}else for(const _0x59fd42 of _0x3f050e){try{const _0x1eb938=wholeWordRegexForPhrase(normalizeForMatch(String(_0x59fd42['phrase']||'')));_0x1eb938[_0x78bf0a(0x292)](_0x100f43)&&(_0x4e18d3[_0x78bf0a(0x2e4)](_0x59fd42['id']),_0x25374c['add'](_0x59fd42['phrase']));}catch(_0x3a3f7a){}}}if(_0x293318[_0x78bf0a(0x387)]>0x23b*-0x7+0x11*0x95+0x5b8)for(const _0x1c7fc5 of _0x293318){try{const _0xa15989=wildcardToRegex(String(_0x1c7fc5['phrase']||''));_0xa15989[_0x78bf0a(0x292)](_0x100f43)&&(_0x4e18d3['add'](_0x1c7fc5['id']),_0x25374c['add'](_0x1c7fc5[_0x78bf0a(0x3ce)]));}catch(_0x478223){warn('[lock]\x20inv'+'alid\x20wildc'+_0x78bf0a(0x39e)+'='+_0x1c7fc5['id']+_0x78bf0a(0x247)+_0x1c7fc5['phrase']+'\x22:\x20'+(_0x478223?.[_0x78bf0a(0x274)]||_0x478223));}}if(_0xbee069['length']>-0x1*-0x1a71+-0x5e*-0xd+0x83*-0x3d)for(const _0x54a074 of _0xbee069){try{if(_0x54a074['is_valid_r'+'egex']===-0x1ee0+0x3*0xce1+-0x7c3){warn('[lock]\x20ski'+_0x78bf0a(0x3c3)+_0x78bf0a(0x326)+_0x78bf0a(0x377)+_0x54a074['id']+'\x20phrase=\x22'+_0x54a074[_0x78bf0a(0x3ce)]+'\x22');continue;}const _0x869a4d=new RegExp(_0x54a074[_0x78bf0a(0x3ce)],'iu');_0x869a4d[_0x78bf0a(0x292)](_0x100f43)&&(_0x4e18d3[_0x78bf0a(0x2e4)](_0x54a074['id']),_0x25374c[_0x78bf0a(0x2e4)](_0x78bf0a(0x2d2)+_0x54a074[_0x78bf0a(0x3ce)]));}catch(_0x504932){warn(_0x78bf0a(0x406)+_0x78bf0a(0x419)+'d\x20regex\x20fo'+'r\x20id='+_0x54a074['id']+_0x78bf0a(0x247)+_0x54a074[_0x78bf0a(0x3ce)]+'\x22:\x20'+(_0x504932?.[_0x78bf0a(0x274)]||_0x504932));try{await db[_0x78bf0a(0x250)](_0x78bf0a(0x314)+_0x78bf0a(0x301)+_0x78bf0a(0x2b3)+_0x78bf0a(0x205)+_0x78bf0a(0x3cd),[_0x54a074['id']]);}catch(_0x2599e6){}}}if(_0x4e18d3[_0x78bf0a(0x424)]>0x1c6+0x1*-0x6d0+-0x102*-0x5)try{try{const _0x299b80=await getLockNotify(_0x6ec242)[_0x78bf0a(0x366)](()=>0x10b+0x11*-0x19f+0x1a84);if(_0x299b80)try{const _0x1ed754=await db[_0x78bf0a(0x3e6)](_0x78bf0a(0x3c5)+'ue\x20FROM\x20de'+_0x78bf0a(0x345)+_0x78bf0a(0x37c)+_0x78bf0a(0x200)+_0x78bf0a(0x242));let _0x3834f5=_0x1ed754?.[_0x78bf0a(0x2a3)]||null;if(!_0x3834f5){const _0x45af5d=getBotJid();_0x3834f5=_0x45af5d||null;}if(_0x3834f5){const _0x41037b=Array[_0x78bf0a(0x261)](_0x25374c)['slice'](-0x15f1+0x2f*-0x43+-0xb6a*-0x3,0x21c9+0xa56*0x1+-0xd5*0x35)['join'](',\x20'),_0x3179f2=_0x3d5099||String(_0x3a0dea||'')[_0x78bf0a(0x1f8)]('@')[0x1bb3+0x1*0x2243+-0x3df6]||_0x78bf0a(0x225),_0x5f4b5e=String(_0x51c1e6||'')[_0x78bf0a(0x2f6)](),_0x44faf8=_0x78bf0a(0x409)+_0x78bf0a(0x1f0)+_0x6ec242+_0x78bf0a(0x26d)+_0x3179f2+_0x78bf0a(0x233)+_0x41037b+_0x78bf0a(0x35b)+_0x5f4b5e;await sendText(_0x3834f5,_0x44faf8,_0x3a0dea?[_0x3a0dea]:[]);}}catch(_0x13cf6a){warn(_0x78bf0a(0x399)+_0x78bf0a(0x23b)+_0x78bf0a(0x3b9)+_0x78bf0a(0x3b4)+':\x20'+(_0x13cf6a?.[_0x78bf0a(0x274)]||_0x13cf6a));}}catch(_0x30d470){warn('[lock]\x20loc'+_0x78bf0a(0x311)+_0x78bf0a(0x319)+':\x20'+(_0x30d470?.[_0x78bf0a(0x274)]||_0x30d470));}enqueueDeletion(_0x2606a5);for(const _0x50642c of _0x4e18d3){try{await db[_0x78bf0a(0x250)](_0x78bf0a(0x314)+_0x78bf0a(0x276)+_0x78bf0a(0x235)+'it_count\x20+'+_0x78bf0a(0x23f)+_0x78bf0a(0x21e),[_0x50642c]);}catch(_0xeea10b){}}}catch(_0x1f6869){warn(_0x78bf0a(0x41c)+_0x78bf0a(0x2e5)+_0x78bf0a(0x369)+(_0x1f6869?.[_0x78bf0a(0x274)]||_0x1f6869));}}}catch(_0x55fe61){error(_0x55fe61,_0x78bf0a(0x401)+_0x78bf0a(0x228)+':\x20'+(_0x55fe61?.[_0x78bf0a(0x274)]||_0x55fe61));}}export async function cleanup(){const _0x4f60d0=_0x1f4923;shuttingDown=!![];for(const _0x183bce of processedMessageKeys[_0x4f60d0(0x316)]())try{clearTimeout(_0x183bce);}catch(_0x3f202d){}processedMessageKeys[_0x4f60d0(0x3f2)](),perChatQueue[_0x4f60d0(0x3f2)](),perChatProcessing[_0x4f60d0(0x3f2)](),activeChats=-0x57*0x52+0xc5e+0xf80*0x1,botRef=null,sendApi=null,ahoCache[_0x4f60d0(0x3f2)](),info(_0x4f60d0(0x285)+'aned\x20up');}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};