const _0x26e7cc=_0x5c71;(function(_0x4af7ef,_0x31f18b){const _0x54a817=_0x5c71,_0xd8e774=_0x4af7ef();while(!![]){try{const _0x27732f=-parseInt(_0x54a817(0x1bd))/(0x8f*-0x1d+0x25ef+-0x15bb)+-parseInt(_0x54a817(0x1c9))/(-0x1c05+-0x1b84+0x378b)+-parseInt(_0x54a817(0x396))/(-0x1*0x20c7+0x8a+-0x40*-0x81)*(parseInt(_0x54a817(0x273))/(0x1f*-0x1+0x1bf0+-0x287*0xb))+parseInt(_0x54a817(0x22f))/(-0x15*0x1c+0x1106+-0xeb5)+-parseInt(_0x54a817(0x1ef))/(-0xc8a+0x11c3*-0x2+0x3016)*(parseInt(_0x54a817(0x2ef))/(0x1*-0x270d+0x1d7a+0x4cd*0x2))+parseInt(_0x54a817(0x311))/(0x1bd*0x7+0x343*0x7+-0x22f8)*(-parseInt(_0x54a817(0x3fa))/(-0x1*-0x66a+0x1647*0x1+-0x1ca8))+parseInt(_0x54a817(0x2e5))/(0x9e*-0xa+0x1b63+-0x1a1*0xd);if(_0x27732f===_0x31f18b)break;else _0xd8e774['push'](_0xd8e774['shift']());}catch(_0x4a82a2){_0xd8e774['push'](_0xd8e774['shift']());}}}(_0x51fc,0x3*-0x4e6df+-0x9*0x2360c+0x2d0775));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x8d006d from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x26e7cc(0x2b2);export const version='2.3.2';export const priority=0x256e+0x10ff+-0x1*0x35f5;export const configKeys=[_0x26e7cc(0x355)];export const commands=[_0x26e7cc(0x224),_0x26e7cc(0x1c3),'unlockall',_0x26e7cc(0x350),_0x26e7cc(0x3ad),_0x26e7cc(0x2cc),_0x26e7cc(0x2b9),_0x26e7cc(0x341),_0x26e7cc(0x3fe)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x26e7cc(0x34e)+_0x26e7cc(0x1ca)+'is\x20not\x20all'+_0x26e7cc(0x30c),'WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x15eebd){const _0x48f6de=_0x26e7cc;if(!_0x15eebd)return[];const _0x42842a=new Set(),_0x5ea3dc=[];for(const _0x39aedf of _0x15eebd){const _0xe4eb0f=_0x39aedf===undefined||_0x39aedf===null?'':String(_0x39aedf)[_0x48f6de(0x323)]();if(!_0xe4eb0f)continue;!_0x42842a['has'](_0xe4eb0f)&&(_0x42842a[_0x48f6de(0x2a3)](_0xe4eb0f),_0x5ea3dc[_0x48f6de(0x3b9)](_0xe4eb0f));}return _0x5ea3dc;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=0xa*-0x1e+0x2*-0xe66+-0x1*-0x1df8,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(0x5b1+-0x1*-0x159+-0x6ce)*(0x2244+0x2678+-0x44d4*0x1);function markProcessed(_0x1c1fe1){const _0xa0bc06=_0x26e7cc;if(!_0x1c1fe1)return;if(processedMessageKeys[_0xa0bc06(0x3bf)](_0x1c1fe1))try{clearTimeout(processedMessageKeys[_0xa0bc06(0x201)](_0x1c1fe1));}catch(_0x5e38c0){}const _0x4eee21=setTimeout(()=>processedMessageKeys['delete'](_0x1c1fe1),DEDUPE_TTL_MS);processedMessageKeys[_0xa0bc06(0x291)](_0x1c1fe1,_0x4eee21);}function isProcessed(_0x1de75b){const _0x1aec85=_0x26e7cc;return _0x1de75b&&processedMessageKeys[_0x1aec85(0x3bf)](_0x1de75b);}const sleep=_0x179b01=>new Promise(_0x50b174=>setTimeout(_0x50b174,_0x179b01));function nowSec(){const _0x4b7213=_0x26e7cc;return Math[_0x4b7213(0x30b)](Date[_0x4b7213(0x1fe)]()/(-0x45*0x29+-0x1*-0xe2c+0xc9*0x1));}function escapeRegex(_0x26d7bc){const _0x5ec9f1=_0x26e7cc;return String(_0x26d7bc||'')[_0x5ec9f1(0x243)](/[.*+?^${}()|[\]\\]/g,_0x5ec9f1(0x26c));}function normalizeForMatch(_0x14f4ad){const _0x412480=_0x26e7cc;let _0x573db7=String(_0x14f4ad||'');try{_0x573db7=_0x573db7[_0x412480(0x2eb)]('NFKC');}catch(_0x164ed1){}if(CFG[_0x412480(0x32d)+_0x412480(0x299)+_0x412480(0x1df)])try{_0x573db7=_0x573db7['normalize'](_0x412480(0x20e))[_0x412480(0x243)](/\p{M}/gu,'')[_0x412480(0x2eb)](_0x412480(0x3a0));}catch(_0x19c29a){}return _0x573db7[_0x412480(0x2e0)+'e']();}class AhoCorasick{constructor(_0x442fc4=[]){const _0x5281d9=_0x26e7cc;this['nodes']=[{'next':{},'fail':0x0,'output':[]}];if(_0x442fc4&&_0x442fc4['length'])this[_0x5281d9(0x35d)](_0x442fc4);}[_0x26e7cc(0x35d)](_0x52dc2d){const _0x489c1e=_0x26e7cc;this[_0x489c1e(0x2f4)]=[{'next':{},'fail':0x0,'output':[]}];for(const _0x53dcf9 of _0x52dc2d){let _0x2418e9=-0x55*-0x8+-0x1fb3*-0x1+0x5*-0x6df;for(const _0x93c4e of _0x53dcf9){const _0x3b4a63=_0x93c4e;!this['nodes'][_0x2418e9][_0x489c1e(0x27f)][_0x3b4a63]&&(this[_0x489c1e(0x2f4)][_0x2418e9]['next'][_0x3b4a63]=this[_0x489c1e(0x2f4)][_0x489c1e(0x386)],this[_0x489c1e(0x2f4)]['push']({'next':{},'fail':0x0,'output':[]})),_0x2418e9=this[_0x489c1e(0x2f4)][_0x2418e9]['next'][_0x3b4a63];}this['nodes'][_0x2418e9][_0x489c1e(0x1fb)][_0x489c1e(0x3b9)](_0x53dcf9);}const _0x3d9dd5=[];for(const _0xb10c0c in this[_0x489c1e(0x2f4)][-0x115*0x7+0x57d+-0x3*-0xb2][_0x489c1e(0x27f)]){const _0x230a63=this[_0x489c1e(0x2f4)][-0xed3+0x45a+0xa79*0x1]['next'][_0xb10c0c];this[_0x489c1e(0x2f4)][_0x230a63]['fail']=0x1*0x25bf+-0x1*-0x2cb+0x2*-0x1445,_0x3d9dd5[_0x489c1e(0x3b9)](_0x230a63);}while(_0x3d9dd5[_0x489c1e(0x386)]){const _0x135b39=_0x3d9dd5[_0x489c1e(0x1f7)]();for(const _0x3490c2 in this[_0x489c1e(0x2f4)][_0x135b39][_0x489c1e(0x27f)]){const _0x5ee448=this[_0x489c1e(0x2f4)][_0x135b39]['next'][_0x3490c2];let _0x416edb=this[_0x489c1e(0x2f4)][_0x135b39][_0x489c1e(0x3c7)];while(_0x416edb&&!this[_0x489c1e(0x2f4)][_0x416edb][_0x489c1e(0x27f)][_0x3490c2])_0x416edb=this[_0x489c1e(0x2f4)][_0x416edb][_0x489c1e(0x3c7)];if(this['nodes'][_0x416edb][_0x489c1e(0x27f)][_0x3490c2])this[_0x489c1e(0x2f4)][_0x5ee448]['fail']=this[_0x489c1e(0x2f4)][_0x416edb]['next'][_0x3490c2];else this[_0x489c1e(0x2f4)][_0x5ee448]['fail']=0xf96+0x357*-0xa+0x11d0;this[_0x489c1e(0x2f4)][_0x5ee448][_0x489c1e(0x1fb)][_0x489c1e(0x3b9)](...this[_0x489c1e(0x2f4)][this[_0x489c1e(0x2f4)][_0x5ee448][_0x489c1e(0x3c7)]]['output']),_0x3d9dd5[_0x489c1e(0x3b9)](_0x5ee448);}}}[_0x26e7cc(0x225)](_0x2e0e33){const _0xc9b55c=_0x26e7cc,_0x43c7ef=[];let _0x15cbbe=0x3*0x801+0xb9*-0x3+-0x4*0x576;for(let _0x4b5932=0x23b*-0x5+-0x8*-0x115+-0x9*-0x47;_0x4b5932<_0x2e0e33[_0xc9b55c(0x386)];_0x4b5932++){const _0x1f4a98=_0x2e0e33[_0x4b5932];while(_0x15cbbe&&!this['nodes'][_0x15cbbe][_0xc9b55c(0x27f)][_0x1f4a98])_0x15cbbe=this[_0xc9b55c(0x2f4)][_0x15cbbe][_0xc9b55c(0x3c7)];if(this[_0xc9b55c(0x2f4)][_0x15cbbe][_0xc9b55c(0x27f)][_0x1f4a98])_0x15cbbe=this[_0xc9b55c(0x2f4)][_0x15cbbe][_0xc9b55c(0x27f)][_0x1f4a98];else _0x15cbbe=-0x2222+-0x16c9+-0x38eb*-0x1;if(this[_0xc9b55c(0x2f4)][_0x15cbbe]['output'][_0xc9b55c(0x386)])for(const _0x563b4c of this[_0xc9b55c(0x2f4)][_0x15cbbe][_0xc9b55c(0x1fb)]){_0x43c7ef[_0xc9b55c(0x3b9)]({'keyword':_0x563b4c,'index':_0x4b5932-_0x563b4c['length']+(0x2029+-0x210f+0x1*0xe7)});}}return _0x43c7ef;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x306c0c){const _0x4cd83f=_0x26e7cc,_0x580fab=String(_0x306c0c||'')[_0x4cd83f(0x323)](),_0x246ff0=escapeRegex(_0x580fab);try{const _0x535ed3='(?<![\x5cp{L}'+_0x4cd83f(0x2e2)+_0x246ff0+(_0x4cd83f(0x344)+_0x4cd83f(0x2f6));return new RegExp(_0x535ed3,'iu');}catch(_0x53bc56){try{return new RegExp('\x5cb'+_0x246ff0+'\x5cb','i');}catch(_0x4dea2b){return new RegExp(_0x246ff0,'i');}}}function wildcardToRegex(_0x2d948c){const _0x33295=_0x26e7cc,_0xd419c5=String(_0x2d948c||'')[_0x33295(0x323)](),_0x25814e=_0xd419c5[_0x33295(0x243)](/\*/g,'')[_0x33295(0x386)]>-0x228c+0xf7c+0x3d*0x50;if(!_0x25814e)throw new Error(_0x33295(0x302)+_0x33295(0x303)+_0x33295(0x1e3)+_0x33295(0x3d6)+'\x20*');const _0x5c4f54=_0xd419c5['split']('*')[_0x33295(0x2fa)](_0x4ba7aa=>escapeRegex(_0x4ba7aa)),_0xa8e1b4=_0x5c4f54[_0x33295(0x1f3)](_0x33295(0x2dc)+_0x33295(0x30f));try{const _0x4a4ea1=_0x33295(0x3fb)+_0x33295(0x2e2)+_0xa8e1b4+(_0x33295(0x344)+'p{N}_])');return new RegExp(_0x4a4ea1,'iu');}catch(_0x4cf5cd){const _0x2fa36c=_0x5c4f54['join']('.*');try{return new RegExp(''+_0x2fa36c,'i');}catch(_0x53ceb9){return new RegExp(_0x5c4f54['join'](''),'i');}}}function setupSendApi(){const _0x3e86bc=_0x26e7cc;if(!botRef)return;if(typeof botRef[_0x3e86bc(0x32c)+'e']===_0x3e86bc(0x1c0))sendApi=async(_0x412a0c,_0x8b106d)=>await botRef[_0x3e86bc(0x32c)+'e'](_0x412a0c,_0x8b106d);else botRef[_0x3e86bc(0x3d5)]&&typeof botRef[_0x3e86bc(0x3d5)][_0x3e86bc(0x32c)+'e']==='function'?sendApi=async(_0x51dd24,_0x405588)=>await botRef[_0x3e86bc(0x3d5)][_0x3e86bc(0x32c)+'e'](_0x51dd24,_0x405588):sendApi=null;}function _0x51fc(){const _0x524b74=['REGEX)','body','\x20\x20\x20\x20\x20type\x20','l\x20gp:<alia','\x20\x20\x20\x20create','TEXT\x20NOT\x20N','_locks_cha','\x20phrase\x20FR','next','[lock]\x20cre','vailable',':\x20unlockal','created_by','AUTOINCREM','rforming\x20s','This\x20toggl','startsWith','\x20\x20\x20\x20UNIQUE','created_at','REATE\x20TABL','lock\x20bad1,','r\x20default\x20','_by,\x20creat','nstance','y\x20[on|off]','unknown','set','[lock]\x20ens','.created_b','❌\x20PM:\x20one-','lete_prefs','entries','PRAGMA\x20tab','fromMe','REMOVE_DIA','max','match','M\x20locks\x20WH',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','word','led\x20to\x20sen','r\x20id=','conversati','ocks\x20for\x20y','add','phrase);','\x20for\x20','status:\x0a','notify','[lock]\x20fin','\x20ON\x20CONFLI','WARNING_ME','ut\x20UNIQUE\x20','\x20lock(s)\x20f','\x20gp:<alias','ration\x20swa','your\x20defau','SEND_WARNI','ex)\x0a\x20\x20\x20\x20\x20\x20','lock','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','_jid\x27','\x20failed:\x20','CREATE\x20IND','off','ine\x20usage:','delall','LE\x20IF\x20NOT\x20','ert\x20failed','find','\x20BY\x20id','\x0aMatched:\x20','[lock]\x20rea','lid\x20regex\x20','O\x20lock_pre','plete;\x20old','TableColum','uild\x20faile','w\x20RENAME\x20T','[lock]\x20set','fig\x20load\x20f','rgets.','key','BATCH_SIZE','oUserJid','unlocklock','exec','cessChatQu','unlock\x201,2','luded.crea','=\x20\x27regex\x27\x20','ated_at\x20IN','gger2>\x20gp:','hat_jid\x20TE','\x20phrase,\x20t','AND\x20phrase','❌\x20Usage\x20(g','✔️\x20[lock]\x20l','\x20failed\x20fo','\x20gp:alias','\x20(type=','[\x5cp{L}\x5cp{N','ack\x20failed','ype,\x20creat','\x20\x20\x20\x20','toLowerCas','timestamp','\x5cp{N}_])','\x20WHERE\x20key','leExists\x20e','23889310jvdNsn','=\x20OFF;','invalid_re','ocknotify\x20','[lock]\x20han','EGER\x20DEFAU','normalize','INTEGER\x20PR','normal','(s):\x20','7mMpyun','\x20ON\x20locks(','onnection(','chat_jid','✔️\x20Saved\x20','nodes','fy\x20on|off\x0a','p{N}_])','ed:\x20','keyword','user','map',':\x20unlock\x20<','o\x20delete\x20l','ERE\x20chat_j','ger2','tialized\x20(','normalizeT',':<alias|ji','Wildcard\x20m','ust\x20contai','isInteger','[lock]\x20unl','ult\x20connec','ex)\x20VALUES','[lock]\x20mig','hat\x20error\x20','otify\x20=\x20ex','floor','owed.','lt\x20connect','ureSchema\x20','}_]*','buttonsRes','75568MyEvZz','size','\x20target(s)','phrase\x20=\x20?','?,\x20?,\x200,\x20?','L_MS','\x22\x20@\x20','d,\x20phrase)','ks\x20SET\x20typ','SELECT\x20id,','\x20\x20\x20\x20\x20\x20\x20\x20\x20i','[lock]\x20leg',')\x20VALUES\x20(','fatal','E\x20locks\x20RE','id,\x20notify','alid\x20wildc','OFF','trim','\x20id\x20=\x20?','caption','gex\x20=\x20excl','\x22:\x20','CT(chat_ji','eue\x20item\x20e','string','dStoredMat','sendMessag','NORMALIZE_','\x20(INVALID\x20','\x20regex\x20id=','line\x20usage','IMARY\x20KEY\x20','jid|all>','includes','up_','\x20&\x20regex\x20v','nection(s)','lid_regex;','STS\x20idx_lo','E\x20locks_ne','eparated>\x20','ion(s):\x20','\x20DEFAULT\x20c','WARNING_TT','changes','\x20default\x20c','d,\x20phrase,','clearlocks','\x20your\x20defa','r:\x20','(?![\x5cp{L}\x5c','s\x20for\x20your','LICT(chat_','cted\x20->\x20pe','[lock]\x20add','\x20\x20\x20chat_ji','SELECT\x20not','WHERE\x20chat','table\x20dete','mentions','⚠️\x20{user},\x20','as\x20fallbac','dellock','sForChat\x20e','E\x20id\x20=\x20?','(chat_jid)','e\x20FROM\x20sql','LOCKS','_new\x20witho','ks\x20table\x20a',':\x20lock\x20<tr','bad2\x20gp:al','\x20=\x20exclude','(chat_jid,','ock_prefs\x20','build','mns)','ed_by,\x20cre','egex\x20FROM\x20','id-or-phra','s_valid_re','❌\x20PM:\x20incl','d.type,\x0a\x20\x20','dApi\x20not\x20a','slice','roup-only)','EXISTS\x20idx','ABLED','t\x20connecti','eteWithRet','idateStore','catch',',2\x20OR\x20unlo',',\x20valid=','text','x\x20=\x200\x20WHER','getUniqueJ','nsert\x20fail','pping\x20inva','ng\x20default','\x20\x20\x20\x20\x20);','hrase\x20erro','type','\x20phrase)\x0a\x20','fs\x20(chat_j','rror:\x20','y,\x0a\x20\x20\x20\x20\x20\x20\x20','INSERT\x20INT','\x20KEY,\x20noti','gex\x20INTEGE','index','ify\x20FROM\x20l','\x20=\x20?\x20ORDER','chat_jid,\x20','delete','EX\x20IF\x20NOT\x20','length','filter','ue\x20FROM\x20de','Y_MS','CREATE\x20TAB','p\x20failed:\x20','\x20\x20\x20\x20\x20phras','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','\x20?,\x20?)','CREATE\x20UNI','\x20by\x20@','ULL','isArray','DELETE\x20FRO','tLocksForC','fy\x20','2373618LLZPRh','resolveNam','w\x20(chat_ji','UPDATE\x20loc','ration\x20com','\x20NULL,\x0a\x20\x20\x20','provided:\x20','d|all>','same\x20line.','INTEGER\x20DE','NFKC','[lock]\x20Aho','BATCH_DELA','ks_new\x20(\x0a\x20','it_count\x20+','wildcard','_count,\x20is','rom\x20your\x20d','LT\x201\x0a\x20\x20\x20\x20\x20','it_count,\x20','nonical)','remoteJid','ated\x20locks','delock','eteAllLock','uded.is_va','s).','TEXT\x20DEFAU','\x20\x20\x20\x20\x20);\x0a\x20\x20','\x200,\x0a\x20\x20\x20\x20\x20\x20','fy\x20message','tal','cks_unique','olving\x20con',',\x20?,\x20?,\x20?,','push','DEFAULT_EN','\x20DEFAULT\x200','creator','clear','_regex\x20INT','has','Keywords','(?,\x20?,\x20?,\x20','UEUE_LIMIT','\x20type\x20=\x20\x27r','knotify\x20ch','=\x20ON;','imageMessa','fail','ies\x20to\x20you','gLocks\x20fai','LUES\x20(?,\x20?','value','_valid_reg','extendedTe','fy\x20INTEGER','\x20\x20\x20\x20\x20hit_c','_count\x20=\x20h','.\x20Please\x20c','hit_count','ck):\x20','_regex)\x20VA','sock','rs\x20besides','R\x20DEFAULT\x20','e\x20=\x20?,\x20cre','i\x20unavaila','ount\x20INTEG','y\x20TEXT\x20DEF','ion','ponseMessa','e\x20TEXT\x20NOT','[lock]\x20Mat','available','ER\x20DEFAULT','regex\x20colu','\x201\x20WHERE\x20i','LockNotify','orcement\x20f','jid','ULT\x200,\x0a\x20\x20\x20','[lock]\x20lis','toISOStrin','tion(s):\x20','locks\x20WHER','ttonId','sendApi\x20un','splice','[lock]\x20val','O\x20locks_ne','[lock]\x20isa',',\x20is_valid','split','ed\x20lock\x20\x22','ted_at,\x0a\x20\x20','ks\x20SET\x20is_','valid_rege','egex','acy\x20locks\x20','144QqZCaI','(?<![\x5cp{L}','s|jid|all>','test','locknotify','gex','locks_back','nection\x20','1101618xwrjot','DB\x20ensured','phrase','function','@g.us','SELECT\x20nam','unlock','SELECT\x20id\x20','Corasick\x20s','❌\x20Failed\x20t','\x20locks\x20loa','oaded\x20','6452nqrWDT','that\x20word\x20','\x20lock(s).','on(s):\x20','alize\x20requ','\x20lock\x20entr','connection','PER_CHAT_Q','XT\x20PRIMARY','_jid\x20=\x20?','cks\x20table','=\x20excluded','knotify\x20gp','[lock]\x20con','t_jid\x20=\x20?\x20','e,\x20created','\x20\x20\x20\x20\x20\x20\x20cre','is_valid_r','\x20=\x20?','CURRENCY','❌\x20Could\x20no','\x20);','CRITICS','id:\x20\x22','[lock]\x20loc','ed_at,\x20hit','n\x20characte','\x0aMessage:\x0a','sured\x20indi','chat_id','ed\x20is_vali','serialized','led:\x20','✔️\x20[lock]\x20','ard\x20for\x20id','FAULT\x200','finalize','ed\x20(fallba','3841302odUTFi','efault\x20val','EXISTS\x20loc','eteLockByI','join','[lock]\x20ini','d\x20regex\x20fo','\x20\x20\x20\x20\x20\x20type','shift','from','SSAGE','ailed,\x20usi','output','ble','ry\x20failed:','now','regex:','gp\x20alias/j','get','d\x20for\x20','_at\x20=\x20?,\x20i','name','dRegexes\x20e','values','AULT\x20\x27\x27,\x0a\x20','LT\x20\x27\x27','participan','[lock]\x20sen','e=\x27table\x27\x20','lid\x20stored','dWarning\x20f','NFD','\x20@\x20',':\x20listlock','run','all','ated_by,\x20c','videoMessa','k_prefs\x20(c','|jid|all>','id\x20=\x20?','ks\x20SET\x20hit','locks','ids','\x20table\x20ren','✔️\x20Locknoti','gger1,trig','or\x20','[lock]\x20ON\x20','for\x20','eue\x20fail:\x20','Lock\x20fallb','QUE\x20INDEX\x20','listlock','search','\x20\x20is_valid','ude\x20gp\x20in\x20','dWarning:\x20','[lock]\x20fai','hat_jid,\x20p','chatid','dler\x20error','IF\x20NOT\x20EXI','lock.initi','4907940igzCfg','Lock:\x20inva','chatJid','pop','HERE\x20type\x20','[lock]\x20del','efault\x20con','ue(s).','run)','❌\x20Unknown\x20','t\x20ON\x20locks','D\x20COLUMN\x20i','mn:\x20','E\x20chat_jid','[lock]\x20pro','LT\x20\x27normal','t\x20resolve\x20','❌\x20PM\x20one-l','regex','ed\x20to\x20','replace','jid)\x20DO\x20UP','egex\x27\x20AND\x20','lumn\x20to\x20lo','unlockall','eign_keys\x20','\x20\x20\x20\x20\x20\x20\x20id\x20','\x20created_b','xtMessage','heck\x20/setd','d\x20=\x20?','[lock]\x20enf','d\x20locknoti','OR\x20type\x20=\x20','message','es\x20lock\x20no','FROM\x20locks','eck\x20failed','\x20?,\x20?,\x200,\x20','ALTER\x20TABL','?,\x20?)\x0a\x20\x20\x20\x20','\x27invalid_r','E\x20locks\x20AD','hrase,\x20typ','SELECT\x20*\x20F','\x20set\x20for\x20','onical\x20(en','|all>','\x20phrase=\x22','selectedBu','\x20type,\x20cre','keys',':\x20locknoti','izeExistin','lready\x20can','\x20\x20\x20VALUES\x20','se,comma-s','\x20Example:\x20','Lock\x20faile','\x20locknotif','[lock]\x20get','\x5c$&','ias','[lock]\x20inv','[lock]\x20res','id\x20=\x20?\x20AND','CONFLICT\x20i','GLOBAL_CON','4MTjaWr','dmin\x20check','hrase)\x0a\x20\x20\x20','O\x20locks;'];_0x51fc=function(){return _0x524b74;};return _0x51fc();}async function sendText(_0x4f91ad,_0x498c86,_0x2a7f1b=[]){const _0x2d1828=_0x26e7cc;if(!_0x498c86||!_0x4f91ad)return;const _0x1a8177={'text':String(_0x498c86)};if(Array[_0x2d1828(0x392)](_0x2a7f1b)&&_0x2a7f1b[_0x2d1828(0x386)])_0x1a8177[_0x2d1828(0x34d)]=_0x2a7f1b;try{if(!sendApi){warn(_0x2d1828(0x20a)+_0x2d1828(0x365)+_0x2d1828(0x281));return;}await sendApi(_0x4f91ad,_0x1a8177);}catch(_0x5ee1f8){warn(_0x2d1828(0x20a)+'dText\x20fail'+_0x2d1828(0x242)+_0x4f91ad+':\x20'+(_0x5ee1f8?.[_0x2d1828(0x251)]||_0x5ee1f8));}}async function tableExists(_0x390a53){const _0x50938a=_0x26e7cc;try{const _0x336a42=await db[_0x50938a(0x201)](_0x50938a(0x1c2)+_0x50938a(0x354)+'ite_master'+'\x20WHERE\x20typ'+_0x50938a(0x20b)+'AND\x20name=?',[_0x390a53]);return!!_0x336a42;}catch(_0x40e010){return warn('[lock]\x20tab'+_0x50938a(0x2e4)+_0x50938a(0x37b)+(_0x40e010?.[_0x50938a(0x251)]||_0x40e010)),![];}}async function getTableColumns(_0x148fb5){const _0x10f75a=_0x26e7cc;try{const _0x56eb4f=await db['all'](_0x10f75a(0x297)+'le_info('+_0x148fb5+')');return(_0x56eb4f||[])['map'](_0x199981=>_0x199981[_0x10f75a(0x204)]);}catch(_0x5137d2){return warn(_0x10f75a(0x26b)+_0x10f75a(0x2c3)+'ns\x20error\x20f'+_0x10f75a(0x21e)+_0x148fb5+':\x20'+(_0x5137d2?.['message']||_0x5137d2)),[];}}async function readAndNormalizeExistingLocks(){const _0x104955=_0x26e7cc;try{const _0x54c987=await db['all'](_0x104955(0x25b)+'ROM\x20locks'),_0x5f0f26=new Map();for(const _0x34d433 of _0x54c987||[]){const _0x5bbba1=[_0x104955(0x2f2),_0x104955(0x22b),_0x104955(0x1e6),_0x104955(0x3e6),'chat'],_0x5727cb=[_0x104955(0x1bf),_0x104955(0x29e),'trigger',_0x104955(0x2f8),'value',_0x104955(0x278),_0x104955(0x251)];let _0x2e7fdf=null;for(const _0x59f2e5 of _0x5bbba1)if(_0x59f2e5 in _0x34d433&&_0x34d433[_0x59f2e5]){_0x2e7fdf=String(_0x34d433[_0x59f2e5]);break;}let _0x5747f1=null;for(const _0x362225 of _0x5727cb)if(_0x362225 in _0x34d433&&_0x34d433[_0x362225]){_0x5747f1=String(_0x34d433[_0x362225]);break;}if(!_0x2e7fdf||!_0x5747f1)for(const _0x14f4b9 of Object[_0x104955(0x262)](_0x34d433)){const _0x370087=_0x34d433[_0x14f4b9];if(!_0x2e7fdf&&typeof _0x370087===_0x104955(0x32a)&&_0x370087[_0x104955(0x333)]('@'))_0x2e7fdf=_0x370087;if(!_0x5747f1&&typeof _0x370087===_0x104955(0x32a)&&_0x370087[_0x104955(0x386)]<0xad3+0x1efe+0xf*-0x2af&&!_0x370087[_0x104955(0x333)]('@'))_0x5747f1=_0x370087;}if(!_0x2e7fdf||!_0x5747f1)continue;let _0x15938c=_0x5747f1[_0x104955(0x323)](),_0x1f6f3c=_0x104955(0x2ed);if(_0x15938c[_0x104955(0x2e0)+'e']()[_0x104955(0x287)](_0x104955(0x1ff)))_0x1f6f3c=_0x104955(0x241),_0x15938c=_0x15938c[_0x104955(0x366)](0x2b1+-0x251*0x7+0xd8c)[_0x104955(0x323)]();else{if(_0x15938c[_0x104955(0x333)]('*'))_0x1f6f3c='wildcard';else _0x1f6f3c=_0x104955(0x2ed);}const _0x4d784e=_0x34d433['created_by']||_0x34d433[_0x104955(0x3bc)]||_0x34d433['author']||_0x34d433[_0x104955(0x2f9)]||'',_0x3dd14f=Number(_0x34d433['created_at']||_0x34d433['ts']||_0x34d433[_0x104955(0x2e1)]||0x1e1+0x1e76+-0x2057)||nowSec(),_0x454254=_0x2e7fdf+'||'+_0x15938c;if(!_0x5f0f26['has'](_0x454254))_0x5f0f26[_0x104955(0x291)](_0x454254,{'chat_jid':_0x2e7fdf,'phrase':_0x15938c,'type':_0x1f6f3c,'created_by':_0x4d784e,'created_at':_0x3dd14f,'hit_count':Number(_0x34d433['hit_count']||-0x1d*0x1f+-0x1064*-0x1+0xce1*-0x1)});else{const _0x3a00b4=_0x5f0f26['get'](_0x454254);_0x3a00b4[_0x104955(0x289)]=Math['min'](_0x3a00b4[_0x104955(0x289)]||_0x3dd14f,_0x3dd14f),_0x3a00b4[_0x104955(0x3d2)]=(_0x3a00b4[_0x104955(0x3d2)]||-0xdb1+-0xe93+-0x192*-0x12)+(Number(_0x34d433[_0x104955(0x3d2)])||0xd8e+-0x669+-0x725);}}return Array['from'](_0x5f0f26[_0x104955(0x206)]());}catch(_0x39afe3){return warn(_0x104955(0x2bf)+'dAndNormal'+_0x104955(0x264)+_0x104955(0x3c9)+_0x104955(0x1e9)+(_0x39afe3?.[_0x104955(0x251)]||_0x39afe3)),[];}}async function ensureSchema(){const _0x19aff0=_0x26e7cc,_0x4dcfae={'id':'INTEGER\x20PR'+_0x19aff0(0x331)+_0x19aff0(0x284)+'ENT','chat_jid':_0x19aff0(0x27c)+_0x19aff0(0x391),'phrase':_0x19aff0(0x27c)+_0x19aff0(0x391),'type':'TEXT\x20DEFAU'+_0x19aff0(0x23e)+'\x27','created_by':_0x19aff0(0x3b1)+_0x19aff0(0x208),'created_at':'INTEGER\x20DE'+_0x19aff0(0x1ec),'hit_count':'INTEGER\x20DE'+_0x19aff0(0x1ec),'is_valid_regex':_0x19aff0(0x39f)+'FAULT\x201'};try{const _0x449650=await tableExists(_0x19aff0(0x219));if(!_0x449650){const _0x1c2979=Object[_0x19aff0(0x296)](_0x4dcfae)[_0x19aff0(0x2fa)](([_0x4f9d3f,_0x3cb9fa])=>_0x4f9d3f+'\x20'+_0x3cb9fa)['join'](',\x0a\x20\x20');await db['exec'](_0x19aff0(0x38d)+_0x19aff0(0x28a)+'E\x20locks\x20(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1c2979+(_0x19aff0(0x29d)+'\x20\x20UNIQUE(c'+_0x19aff0(0x22a)+_0x19aff0(0x275)+_0x19aff0(0x3b2)+_0x19aff0(0x2df)));try{await db['exec'](_0x19aff0(0x2b6)+_0x19aff0(0x385)+_0x19aff0(0x368)+'_locks_cha'+'t\x20ON\x20locks'+_0x19aff0(0x353)+';');}catch(_0x2ffcc6){}try{await db[_0x19aff0(0x2cd)](_0x19aff0(0x38f)+'QUE\x20INDEX\x20'+_0x19aff0(0x22d)+'STS\x20idx_lo'+_0x19aff0(0x3b6)+_0x19aff0(0x2f0)+_0x19aff0(0x383)+_0x19aff0(0x2a4));}catch(_0x58cac3){}info(_0x19aff0(0x280)+_0x19aff0(0x3ac)+'\x20table\x20(ca'+_0x19aff0(0x3aa));try{await db[_0x19aff0(0x2cd)](_0x19aff0(0x38a)+_0x19aff0(0x2ba)+_0x19aff0(0x1f1)+_0x19aff0(0x215)+_0x19aff0(0x2d4)+'XT\x20PRIMARY'+'\x20KEY,\x20noti'+_0x19aff0(0x3ce)+_0x19aff0(0x3bb)+');');}catch(_0x4878b1){}return;}const _0x41c72a=await getTableColumns(_0x19aff0(0x219)),_0x34a2e1=_0x41c72a['includes']('chat_jid'),_0x324067=_0x41c72a['includes'](_0x19aff0(0x1bf)),_0x25deaf=_0x41c72a[_0x19aff0(0x333)](_0x19aff0(0x378));if(_0x34a2e1&&_0x324067&&_0x25deaf){if(!_0x41c72a[_0x19aff0(0x333)](_0x19aff0(0x1da)+'egex'))try{await db[_0x19aff0(0x2cd)](_0x19aff0(0x256)+_0x19aff0(0x259)+_0x19aff0(0x23a)+_0x19aff0(0x362)+_0x19aff0(0x37f)+_0x19aff0(0x3d7)+'1;'),info(_0x19aff0(0x348)+_0x19aff0(0x1e7)+'d_regex\x20co'+_0x19aff0(0x246)+_0x19aff0(0x1d3));}catch(_0x29ac15){warn(_0x19aff0(0x229)+'led\x20to\x20add'+'\x20is_valid_'+_0x19aff0(0x3e2)+_0x19aff0(0x23b)+(_0x29ac15?.[_0x19aff0(0x251)]||_0x29ac15));}try{await db[_0x19aff0(0x2cd)](_0x19aff0(0x2b6)+_0x19aff0(0x385)+'EXISTS\x20idx'+'_locks_cha'+'t\x20ON\x20locks'+_0x19aff0(0x353)+';');}catch(_0x103822){}try{await db[_0x19aff0(0x2cd)](_0x19aff0(0x38f)+_0x19aff0(0x223)+_0x19aff0(0x22d)+_0x19aff0(0x338)+'cks_unique'+_0x19aff0(0x2f0)+_0x19aff0(0x383)+_0x19aff0(0x2a4));}catch(_0x1f359a){}try{await db['exec'](_0x19aff0(0x38a)+_0x19aff0(0x2ba)+_0x19aff0(0x1f1)+_0x19aff0(0x215)+'hat_jid\x20TE'+_0x19aff0(0x1d1)+_0x19aff0(0x37e)+_0x19aff0(0x3ce)+_0x19aff0(0x3bb)+');');}catch(_0x16ae48){}info(_0x19aff0(0x1e1)+_0x19aff0(0x357)+_0x19aff0(0x265)+_0x19aff0(0x25d)+_0x19aff0(0x1e5)+'ces\x20&\x20colu'+_0x19aff0(0x35e));return;}info(_0x19aff0(0x31c)+_0x19aff0(0x3f9)+_0x19aff0(0x34c)+_0x19aff0(0x347)+_0x19aff0(0x285)+'afe\x20migrat'+_0x19aff0(0x3dc));const _0x305570=await readAndNormalizeExistingLocks();await db[_0x19aff0(0x2cd)]('PRAGMA\x20for'+_0x19aff0(0x248)+_0x19aff0(0x2e6));try{await db['exec']('CREATE\x20TAB'+_0x19aff0(0x2ba)+_0x19aff0(0x1f1)+_0x19aff0(0x3a3)+_0x19aff0(0x249)+_0x19aff0(0x2ec)+_0x19aff0(0x331)+_0x19aff0(0x284)+'ENT,\x0a\x20\x20\x20\x20\x20'+_0x19aff0(0x349)+'d\x20TEXT\x20NOT'+_0x19aff0(0x39b)+_0x19aff0(0x38c)+_0x19aff0(0x3de)+'\x20NULL,\x0a\x20\x20\x20'+_0x19aff0(0x279)+_0x19aff0(0x3b1)+'LT\x20\x27normal'+_0x19aff0(0x2b3)+_0x19aff0(0x24a)+'y\x20TEXT\x20DEF'+_0x19aff0(0x207)+_0x19aff0(0x1d9)+_0x19aff0(0x2d2)+'TEGER\x20DEFA'+_0x19aff0(0x3e7)+_0x19aff0(0x3cf)+_0x19aff0(0x3da)+_0x19aff0(0x3e1)+_0x19aff0(0x3b3)+_0x19aff0(0x226)+_0x19aff0(0x3be)+_0x19aff0(0x2ea)+'LT\x201,\x0a\x20\x20\x20\x20'+_0x19aff0(0x288)+_0x19aff0(0x35b)+_0x19aff0(0x379)+_0x19aff0(0x376));}catch(_0x3ec4a4){await db[_0x19aff0(0x2cd)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x19aff0(0x1f1)+_0x19aff0(0x3a3)+_0x19aff0(0x249)+_0x19aff0(0x2ec)+'IMARY\x20KEY\x20'+_0x19aff0(0x284)+'ENT,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20chat_ji'+'d\x20TEXT\x20NOT'+'\x20NULL,\x0a\x20\x20\x20'+_0x19aff0(0x38c)+_0x19aff0(0x3de)+_0x19aff0(0x39b)+_0x19aff0(0x279)+_0x19aff0(0x3b1)+_0x19aff0(0x23e)+_0x19aff0(0x2b3)+'\x20created_b'+_0x19aff0(0x3db)+_0x19aff0(0x207)+_0x19aff0(0x1d9)+'ated_at\x20IN'+'TEGER\x20DEFA'+_0x19aff0(0x3e7)+_0x19aff0(0x3cf)+'ount\x20INTEG'+'ER\x20DEFAULT'+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20is_valid'+'_regex\x20INT'+_0x19aff0(0x2ea)+_0x19aff0(0x3a8)+_0x19aff0(0x1de)),warn(_0x19aff0(0x280)+_0x19aff0(0x3ac)+_0x19aff0(0x356)+_0x19aff0(0x2ab)+_0x19aff0(0x34f)+'k');}const _0x1644bb=await db['prepare'](_0x19aff0(0x37d)+_0x19aff0(0x3f0)+_0x19aff0(0x398)+_0x19aff0(0x340)+_0x19aff0(0x261)+_0x19aff0(0x213)+'reated_at,'+'\x20hit_count'+_0x19aff0(0x3f2)+_0x19aff0(0x3d4)+_0x19aff0(0x3ca)+_0x19aff0(0x3b8)+_0x19aff0(0x38e));try{for(const _0xed3613 of _0x305570){try{let _0xf6cba8=0xf*0x22b+0x451*-0x8+-0x56*-0x6;if(_0xed3613[_0x19aff0(0x378)]===_0x19aff0(0x241))try{new RegExp(_0xed3613['phrase']);}catch(_0x23bdc1){_0xf6cba8=0x2*0x641+-0xf29+0x2a7;}await _0x1644bb['run'](_0xed3613[_0x19aff0(0x2f2)],_0xed3613[_0x19aff0(0x1bf)],_0xed3613['type']||'normal',_0xed3613[_0x19aff0(0x283)]||'',Number(_0xed3613[_0x19aff0(0x289)]||nowSec()),Number(_0xed3613[_0x19aff0(0x3d2)]||0x1e7*-0xa+0xc07+0x6ff),_0xf6cba8);}catch(_0x5dba5e){warn(_0x19aff0(0x308)+'ration\x20ins'+_0x19aff0(0x2bb)+'\x20for\x20'+_0xed3613['chat_jid']+'@'+_0xed3613[_0x19aff0(0x1bf)]+':\x20'+(_0x5dba5e?.['message']||_0x5dba5e));}}}finally{try{await _0x1644bb[_0x19aff0(0x1ed)]();}catch(_0xf328a3){}}try{const _0x32659a=_0x19aff0(0x400)+_0x19aff0(0x334)+Math[_0x19aff0(0x30b)](Date[_0x19aff0(0x1fe)]()/(0xb62+0x3*0xc0f+-0x2ba7));await db['exec']('ALTER\x20TABL'+_0x19aff0(0x31f)+'NAME\x20TO\x20'+_0x32659a+';'),await db['exec']('ALTER\x20TABL'+_0x19aff0(0x339)+_0x19aff0(0x2c5)+_0x19aff0(0x276));try{await db['exec'](_0x19aff0(0x2b6)+_0x19aff0(0x385)+_0x19aff0(0x368)+_0x19aff0(0x27d)+_0x19aff0(0x239)+_0x19aff0(0x353)+';');}catch(_0x2902cf){}try{await db[_0x19aff0(0x2cd)]('CREATE\x20UNI'+'QUE\x20INDEX\x20'+_0x19aff0(0x22d)+_0x19aff0(0x338)+_0x19aff0(0x3b6)+_0x19aff0(0x2f0)+_0x19aff0(0x383)+_0x19aff0(0x2a4));}catch(_0x3709d2){}try{await db[_0x19aff0(0x2cd)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x19aff0(0x1f1)+_0x19aff0(0x215)+_0x19aff0(0x2d4)+_0x19aff0(0x1d1)+_0x19aff0(0x37e)+_0x19aff0(0x3ce)+_0x19aff0(0x3bb)+');');}catch(_0xf61a4c){}info(_0x19aff0(0x308)+_0x19aff0(0x39a)+_0x19aff0(0x2c2)+_0x19aff0(0x21b)+'amed\x20to\x20ba'+'ckup');}catch(_0x50f90b){warn(_0x19aff0(0x308)+_0x19aff0(0x2ae)+_0x19aff0(0x38b)+(_0x50f90b?.[_0x19aff0(0x251)]||_0x50f90b));throw _0x50f90b;}finally{await db['exec']('PRAGMA\x20for'+'eign_keys\x20'+_0x19aff0(0x3c5));}return;}catch(_0x12d827){error(_0x12d827,_0x19aff0(0x292)+_0x19aff0(0x30e)+_0x19aff0(0x31e));throw _0x12d827;}}async function addLock(_0x90bab1,_0x3e37c4,_0x1eb9b3){const _0x23c581=_0x26e7cc;try{if(!_0x90bab1||!_0x3e37c4)return![];let _0x24a6ad=String(_0x3e37c4)[_0x23c581(0x323)]();if(!_0x24a6ad)return![];let _0x5a073f='normal',_0x2e7f62=-0xe08*-0x2+-0x1832+-0x3dd;if(_0x24a6ad[_0x23c581(0x2e0)+'e']()[_0x23c581(0x287)]('regex:')){_0x5a073f='regex',_0x24a6ad=_0x24a6ad[_0x23c581(0x366)](-0x12b7+0x2*0x53a+0x3*0x2c3)[_0x23c581(0x323)]();try{new RegExp(_0x24a6ad),_0x2e7f62=-0x15fc+-0x1804+0x2e01*0x1;}catch(_0x109d83){_0x2e7f62=0x1f95+0x35*0x1a+-0x24f7*0x1,warn(_0x23c581(0x348)+_0x23c581(0x230)+_0x23c581(0x2c0)+_0x23c581(0x39c)+_0x24a6ad);}}else _0x24a6ad[_0x23c581(0x333)]('*')?_0x5a073f='wildcard':_0x5a073f=_0x23c581(0x2ed);try{const _0x3ba039=await db['run'](_0x23c581(0x37d)+'O\x20locks\x20(c'+_0x23c581(0x22a)+_0x23c581(0x25a)+_0x23c581(0x1d8)+'_by,\x20creat'+_0x23c581(0x1e2)+_0x23c581(0x3a6)+_0x23c581(0x3cc)+_0x23c581(0x2b1)+_0x23c581(0x266)+_0x23c581(0x3c1)+_0x23c581(0x315)+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x23c581(0x2a9)+_0x23c581(0x328)+_0x23c581(0x318)+'\x20DO\x20UPDATE'+'\x20SET\x0a\x20\x20\x20\x20\x20'+_0x23c581(0x1f6)+_0x23c581(0x35a)+_0x23c581(0x364)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'reated_by\x20'+_0x23c581(0x1d4)+_0x23c581(0x293)+_0x23c581(0x37c)+_0x23c581(0x27b)+'d_at\x20=\x20exc'+_0x23c581(0x2d0)+_0x23c581(0x3f5)+_0x23c581(0x31b)+_0x23c581(0x362)+_0x23c581(0x326)+_0x23c581(0x3af)+_0x23c581(0x337),[_0x90bab1,_0x24a6ad,_0x5a073f,_0x1eb9b3||'',nowSec(),_0x2e7f62]);return ahoCache[_0x23c581(0x384)](_0x90bab1),info('[lock]\x20add'+_0x23c581(0x3f4)+_0x24a6ad+_0x23c581(0x317)+_0x90bab1+_0x23c581(0x2db)+_0x5a073f+_0x23c581(0x36f)+_0x2e7f62+')'),!![];}catch(_0x2cd175){warn(_0x23c581(0x21f)+_0x23c581(0x271)+_0x23c581(0x373)+_0x23c581(0x1ee)+_0x23c581(0x3d3)+(_0x2cd175?.[_0x23c581(0x251)]||_0x2cd175));try{const _0x30974c=await db[_0x23c581(0x201)](_0x23c581(0x1c4)+_0x23c581(0x253)+'\x20WHERE\x20cha'+_0x23c581(0x1d7)+_0x23c581(0x2d6)+_0x23c581(0x1db),[_0x90bab1,_0x24a6ad]);return _0x30974c?await db['run'](_0x23c581(0x399)+_0x23c581(0x319)+_0x23c581(0x3d8)+'ated_by\x20=\x20'+'?,\x20created'+_0x23c581(0x203)+_0x23c581(0x362)+'gex\x20=\x20?\x20WH'+'ERE\x20id\x20=\x20?',[_0x5a073f,_0x1eb9b3||'',nowSec(),_0x2e7f62,_0x30974c['id']]):await db[_0x23c581(0x211)](_0x23c581(0x37d)+'O\x20locks\x20(c'+_0x23c581(0x22a)+_0x23c581(0x25a)+_0x23c581(0x1d8)+_0x23c581(0x28d)+_0x23c581(0x1e2)+_0x23c581(0x3a6)+_0x23c581(0x3cc)+_0x23c581(0x307)+'\x20(?,\x20?,\x20?,'+_0x23c581(0x255)+'?)',[_0x90bab1,_0x24a6ad,_0x5a073f,_0x1eb9b3||'',nowSec(),_0x2e7f62]),ahoCache['delete'](_0x90bab1),!![];}catch(_0x147ff0){return error(_0x147ff0,'[lock]\x20add'+_0x23c581(0x222)+_0x23c581(0x2dd)+_0x23c581(0x2a5)+_0x24a6ad+_0x23c581(0x20f)+_0x90bab1),![];}}}catch(_0x165dca){return error(_0x165dca,_0x23c581(0x348)+_0x23c581(0x269)+_0x23c581(0x202)+_0x3e37c4+_0x23c581(0x20f)+_0x90bab1),![];}}async function deleteLockByPhrase(_0x37cbc6,_0x50965f){const _0x17d2d5=_0x26e7cc;try{if(!_0x37cbc6||!_0x50965f)return-0x13e6*-0x1+-0x21ee+0x1c1*0x8;const _0x1e74c7=String(_0x50965f||'')['trim']();if(!_0x1e74c7)return 0xaf3+-0x2*-0x109+-0xd05;if(_0x1e74c7['toLowerCas'+'e']()['startsWith']('regex:')){const _0x4babb7=_0x1e74c7[_0x17d2d5(0x366)](0x1b9+-0xd3*-0x9+-0x91e)[_0x17d2d5(0x323)](),_0x28bee=await db[_0x17d2d5(0x211)](_0x17d2d5(0x393)+_0x17d2d5(0x29c)+_0x17d2d5(0x2fd)+_0x17d2d5(0x270)+_0x17d2d5(0x3c3)+_0x17d2d5(0x245)+_0x17d2d5(0x314),[_0x37cbc6,_0x4babb7]);if(_0x28bee?.[_0x17d2d5(0x33e)])ahoCache[_0x17d2d5(0x384)](_0x37cbc6);return _0x28bee?.['changes']||0x1*-0x1068+0xb2b+-0x95*-0x9;}let _0x2b0d5c=await db['run']('DELETE\x20FRO'+_0x17d2d5(0x29c)+_0x17d2d5(0x2fd)+_0x17d2d5(0x270)+'\x20phrase\x20=\x20'+'?',[_0x37cbc6,_0x1e74c7]);if(_0x2b0d5c?.[_0x17d2d5(0x33e)])return ahoCache['delete'](_0x37cbc6),_0x2b0d5c[_0x17d2d5(0x33e)];return-0x2*-0x99e+0x1*-0x61+-0x12db;}catch(_0x1d4f35){return warn(_0x17d2d5(0x234)+'eteLockByP'+_0x17d2d5(0x377)+_0x17d2d5(0x343)+(_0x1d4f35?.['message']||_0x1d4f35)),-0x1570+-0x22f+0x179f;}}async function deleteLockById(_0x4c1622,_0xa07ec5){const _0x2bc7c8=_0x26e7cc;try{const _0x5a3494=await db[_0x2bc7c8(0x211)](_0x2bc7c8(0x393)+_0x2bc7c8(0x29c)+'ERE\x20chat_j'+'id\x20=\x20?\x20AND'+_0x2bc7c8(0x324),[_0x4c1622,_0xa07ec5]);if(_0x5a3494?.[_0x2bc7c8(0x33e)])ahoCache['delete'](_0x4c1622);return _0x5a3494?.[_0x2bc7c8(0x33e)]||0xe53+-0xb51+0xa*-0x4d;}catch(_0x22e5c4){return warn(_0x2bc7c8(0x234)+_0x2bc7c8(0x1f2)+'d\x20error:\x20'+(_0x22e5c4?.['message']||_0x22e5c4)),-0x12cb+-0x23ef+0x1d3*0x1e;}}function _0x5c71(_0x2c7f3c,_0x130ea8){const _0x5d5f28=_0x51fc();return _0x5c71=function(_0x446f3a,_0xb5ed7c){_0x446f3a=_0x446f3a-(0xb16*0x2+-0x454*-0x4+-0x12e0*0x2);let _0x1bfd83=_0x5d5f28[_0x446f3a];return _0x1bfd83;},_0x5c71(_0x2c7f3c,_0x130ea8);}async function deleteAllLocksForChat(_0x4b364f){const _0x29140a=_0x26e7cc;try{const _0x15c68d=await db[_0x29140a(0x211)]('DELETE\x20FRO'+_0x29140a(0x29c)+_0x29140a(0x2fd)+_0x29140a(0x217),[_0x4b364f]);if(_0x15c68d?.['changes'])ahoCache['delete'](_0x4b364f);return _0x15c68d?.[_0x29140a(0x33e)]||-0x5*0x35a+-0x1497+-0x1*-0x2559;}catch(_0x52a013){return warn(_0x29140a(0x234)+_0x29140a(0x3ae)+_0x29140a(0x351)+_0x29140a(0x37b)+(_0x52a013?.[_0x29140a(0x251)]||_0x52a013)),0x322*-0x7+0xb47*-0x1+0x2135;}}async function listLocksForChat(_0x2ee6e7){const _0x439b62=_0x26e7cc;try{const _0x4df6fa=await db[_0x439b62(0x212)](_0x439b62(0x31a)+_0x439b62(0x2d5)+_0x439b62(0x2de)+_0x439b62(0x35f)+'ated_at,\x20h'+_0x439b62(0x3a9)+_0x439b62(0x1da)+_0x439b62(0x360)+_0x439b62(0x3eb)+_0x439b62(0x23c)+_0x439b62(0x382)+_0x439b62(0x2bd),[_0x2ee6e7]);return _0x4df6fa||[];}catch(_0x43c43c){return warn(_0x43c43c,_0x439b62(0x3e8)+_0x439b62(0x394)+_0x439b62(0x309)+_0x439b62(0x220)+_0x2ee6e7+':\x20'+(_0x43c43c?.[_0x439b62(0x251)]||_0x43c43c)),[];}}async function setLockNotify(_0x2fed81,_0x265fac){const _0x562946=_0x26e7cc;try{if(!_0x2fed81)return![];return await db[_0x562946(0x211)](_0x562946(0x37d)+_0x562946(0x2c1)+_0x562946(0x37a)+_0x562946(0x320)+_0x562946(0x31d)+_0x562946(0x257)+'\x20\x20\x20ON\x20CONF'+_0x562946(0x346)+_0x562946(0x244)+'DATE\x20SET\x20n'+_0x562946(0x30a)+'cluded.not'+'ify;',[_0x2fed81,_0x265fac?-0x270e+-0x98f*0x3+-0x66*-0xaa:-0xbed*0x1+-0x1c30+0x281d*0x1]),!![];}catch(_0x22b054){return warn(_0x562946(0x2c6)+'LockNotify'+_0x562946(0x2d9)+'r\x20'+_0x2fed81+':\x20'+(_0x22b054?.['message']||_0x22b054)),![];}}async function getLockNotify(_0x247209){const _0xc31779=_0x26e7cc;try{if(!_0x247209)return-0xb0d+0x1*-0x1b47+-0x1*-0x2654;const _0x202f8a=await db[_0xc31779(0x201)](_0xc31779(0x34a)+_0xc31779(0x381)+_0xc31779(0x35c)+_0xc31779(0x34b)+_0xc31779(0x1d2),[_0x247209]);return _0x202f8a?Number(_0x202f8a[_0xc31779(0x2a7)])?0x1*0x722+0x17*-0x17f+-0x1b48*-0x1:-0x2*0x3b5+-0x216a*0x1+0x146a*0x2:0x1a*-0x124+0x2f*-0xb1+0x3e27;}catch(_0x544768){return warn(_0xc31779(0x26b)+_0xc31779(0x3e4)+'\x20failed\x20fo'+'r\x20'+_0x247209+':\x20'+(_0x544768?.[_0xc31779(0x251)]||_0x544768)),0x1c2+-0x1*0x2029+0x1e67*0x1;}}async function deleteWithRetry(_0x51d624,_0x45b57f=-0x12*0x34+0x1dde+-0x1a34,_0x28a7de=0x2*0x1333+-0x2538+-0x1*0x2){const _0x34ddc0=_0x26e7cc,_0x5852de=_0x51d624[_0x34ddc0(0x2c9)]?.[_0x34ddc0(0x3ab)];if(!_0x5852de)return![];let _0x16ef04=_0x28a7de;for(let _0x2b4743=-0x51b+0x22ae+-0x1d92;_0x2b4743<=Math['max'](-0x1214*-0x1+0x1584+0x1*-0x2797,_0x45b57f);_0x2b4743++){try{if(!sendApi)return warn(_0x34ddc0(0x234)+_0x34ddc0(0x36b)+'ry:\x20sendAp'+_0x34ddc0(0x3d9)+_0x34ddc0(0x1fc)),![];return await sendApi(_0x5852de,{'delete':_0x51d624[_0x34ddc0(0x2c9)]}),!![];}catch(_0x3014ed){if(_0x2b4743<_0x45b57f){await sleep(_0x16ef04),_0x16ef04*=-0x1*0x19ab+0x25*-0x1f+0x1e28;continue;}return warn(_0x34ddc0(0x234)+_0x34ddc0(0x36b)+_0x34ddc0(0x1fd)+'\x20'+(_0x3014ed?.[_0x34ddc0(0x251)]||_0x3014ed)),![];}}return![];}async function sendWarningAndMaybeDelete(_0xfd063c){const _0x237378=_0x26e7cc;if(!CFG[_0x237378(0x2b0)+'NG'])return;try{const _0x3cbb81=_0xfd063c[_0x237378(0x2c9)]?.[_0x237378(0x209)+'t']||_0xfd063c['key']?.[_0x237378(0x1f8)]||'',_0x13c18d=_0xfd063c[_0x237378(0x2c9)]['remoteJid'],_0x3a19fb=_0x3cbb81?'@'+String(_0x3cbb81)[_0x237378(0x3f3)]('@')[0x42e+0x2d5*-0xa+0x26a*0xa]:'{user}',_0x4af0c4=String(CFG[_0x237378(0x2aa)+_0x237378(0x1f9)]||DEFAULTS[_0x237378(0x2aa)+'SSAGE'])[_0x237378(0x243)](/\{user\}/gi,_0x3a19fb);if(!sendApi){warn('[lock]\x20sen'+_0x237378(0x228)+_0x237378(0x3ed)+_0x237378(0x3e0));return;}const _0x51e09c=await sendApi(_0x13c18d,{'text':_0x4af0c4,'mentions':_0x3cbb81?[_0x3cbb81]:[]});_0x51e09c?.['key']&&CFG[_0x237378(0x33d)+_0x237378(0x316)]&&CFG[_0x237378(0x33d)+_0x237378(0x316)]>-0x1*-0x166b+0x10ac*-0x2+-0x1*-0xaed&&setTimeout(async()=>{const _0x1f4eba=_0x237378;try{await sendApi(_0x13c18d,{'delete':_0x51e09c[_0x1f4eba(0x2c9)]});}catch(_0xe4b398){}},CFG[_0x237378(0x33d)+_0x237378(0x316)]);}catch(_0x5e380a){warn('[lock]\x20sen'+_0x237378(0x20d)+'ailed:\x20'+(_0x5e380a?.[_0x237378(0x251)]||_0x5e380a));}}async function processChatQueue(_0x5c2e69){const _0x2c606b=_0x26e7cc;while((perChatQueue[_0x2c606b(0x201)](_0x5c2e69)||[])[_0x2c606b(0x386)]>-0xf92+0x1a08+0xce*-0xd&&!shuttingDown){const _0x6ecfde=Math[_0x2c606b(0x29a)](-0x16f*-0xa+-0x175a+-0x905*-0x1,CFG[_0x2c606b(0x2ca)]||0x32e+0x148c+-0x17b9),_0x4acff0=perChatQueue[_0x2c606b(0x201)](_0x5c2e69)||[],_0x7df0f9=_0x4acff0[_0x2c606b(0x3ee)](0x1b02+0x2*0xa6f+-0x2fe0,_0x6ecfde);for(const _0x255a87 of _0x7df0f9){try{const _0xc37c76=await deleteWithRetry(_0x255a87)['catch'](()=>![]);_0xc37c76&&await sendWarningAndMaybeDelete(_0x255a87)[_0x2c606b(0x36d)](()=>{});}catch(_0xe9a014){warn('[lock]\x20pro'+_0x2c606b(0x2ce)+_0x2c606b(0x329)+'rror:\x20'+(_0xe9a014?.[_0x2c606b(0x251)]||_0xe9a014));}}(perChatQueue['get'](_0x5c2e69)||[])[_0x2c606b(0x386)]>0x7*0x38d+0xb39*0x1+-0x2414&&await sleep(Math[_0x2c606b(0x29a)](-0x5c+0x5*-0x768+0x2564,CFG[_0x2c606b(0x3a2)+_0x2c606b(0x389)]||0x3fe+-0x21fe+-0x8*-0x3d9));}if((perChatQueue[_0x2c606b(0x201)](_0x5c2e69)||[])['length']===-0x13ea+-0x94*-0x4+0x119a)perChatQueue['delete'](_0x5c2e69);}function tryStartProcessingForChat(_0x5200e7){const _0xf8b28c=_0x26e7cc;if(perChatProcessing[_0xf8b28c(0x201)](_0x5200e7))return;if(activeChats>=(CFG['GLOBAL_CON'+_0xf8b28c(0x1dc)]||0x1f8d*0x1+0x3*-0x337+0x59*-0x3f)){setTimeout(()=>tryStartProcessingForChat(_0x5200e7),-0x200*-0xe+0x1881+-0x1*0x33eb);return;}activeChats++,perChatProcessing['set'](_0x5200e7,!![]),((async()=>{const _0x4c302a=_0xf8b28c;try{await processChatQueue(_0x5200e7);}catch(_0x325c46){warn(_0x4c302a(0x23d)+'cessChatQu'+_0x4c302a(0x221)+(_0x325c46?.['message']||_0x325c46));}finally{perChatProcessing['delete'](_0x5200e7),activeChats=Math[_0x4c302a(0x29a)](0xc6c+-0x366+-0x906,activeChats-(-0x12ff+-0x10*0x100+0x2300));if((perChatQueue['get'](_0x5200e7)||[])[_0x4c302a(0x386)])setImmediate(()=>tryStartProcessingForChat(_0x5200e7));}})());}function enqueueDeletion(_0x215452){const _0x47a09d=_0x26e7cc,_0x2eb38a=_0x215452[_0x47a09d(0x2c9)]?.[_0x47a09d(0x3ab)];if(!_0x2eb38a)return;if(!perChatQueue['has'](_0x2eb38a))perChatQueue['set'](_0x2eb38a,[]);const _0x176e54=perChatQueue[_0x47a09d(0x201)](_0x2eb38a);if(_0x176e54[_0x47a09d(0x386)]>=(CFG[_0x47a09d(0x1d0)+_0x47a09d(0x3c2)]||DEFAULTS[_0x47a09d(0x1d0)+_0x47a09d(0x3c2)]))_0x176e54['shift']();_0x176e54[_0x47a09d(0x3b9)](_0x215452);if(!perChatProcessing[_0x47a09d(0x201)](_0x2eb38a))tryStartProcessingForChat(_0x2eb38a);}function extractTextFromMessage(_0x18121e){const _0x5b7e91=_0x26e7cc;if(!_0x18121e||!_0x18121e[_0x5b7e91(0x251)])return'';const _0x441c97=_0x18121e[_0x5b7e91(0x251)];if(_0x441c97[_0x5b7e91(0x2a1)+'on'])return _0x441c97['conversati'+'on'];if(_0x441c97[_0x5b7e91(0x3cd)+_0x5b7e91(0x24b)]?.[_0x5b7e91(0x370)])return _0x441c97[_0x5b7e91(0x3cd)+'xtMessage'][_0x5b7e91(0x370)];if(_0x441c97[_0x5b7e91(0x3c6)+'ge']?.[_0x5b7e91(0x325)])return _0x441c97[_0x5b7e91(0x3c6)+'ge'][_0x5b7e91(0x325)];if(_0x441c97[_0x5b7e91(0x214)+'ge']?.[_0x5b7e91(0x325)])return _0x441c97[_0x5b7e91(0x214)+'ge']['caption'];if(_0x441c97[_0x5b7e91(0x310)+_0x5b7e91(0x3dd)+'ge']?.[_0x5b7e91(0x260)+'ttonId'])return _0x441c97['buttonsRes'+_0x5b7e91(0x3dd)+'ge'][_0x5b7e91(0x260)+_0x5b7e91(0x3ec)];return'';}function splitRestForGp(_0x49a124){const _0xfe94ae=_0x26e7cc;if(!_0x49a124)return{'left':'','gp':null};const _0x16d579=_0x49a124[_0xfe94ae(0x29b)](/\bgp[:\s]+(.+)$/i);if(_0x16d579){const _0x2d6321=_0x49a124[_0xfe94ae(0x366)](-0x1256*0x1+0x82d+0xa29,_0x16d579['index'])[_0xfe94ae(0x323)](),_0x4179ff=_0x16d579[-0x13*0x42+0x126c+-0xd85][_0xfe94ae(0x323)]();return{'left':_0x2d6321,'gp':_0x4179ff};}const _0x32182c=_0x49a124['split'](/\s+/)[_0xfe94ae(0x387)](Boolean);if(_0x32182c[_0xfe94ae(0x386)]>0x88a+0x26f3+0x2f7c*-0x1){const _0x248739=_0x32182c[_0x32182c[_0xfe94ae(0x386)]-(0x1a87*-0x1+-0x146b+0x2ef3)];if(_0x248739[_0xfe94ae(0x2e0)+'e']()===_0xfe94ae(0x212)||_0x248739[_0xfe94ae(0x333)]('@'))return _0x32182c[_0xfe94ae(0x232)](),{'left':_0x32182c['join']('\x20')[_0xfe94ae(0x323)](),'gp':_0x248739};}return{'left':_0x49a124[_0xfe94ae(0x323)](),'gp':null};}function parseLockCommandOneLine(_0x2ad1b0){const _0x44f88b=_0x26e7cc,_0x38d725=(_0x2ad1b0||'')[_0x44f88b(0x3f3)](/\r?\n/)[0x2153*0x1+-0x7e9+-0x196a]['trim']();let _0x7cf24e=_0x38d725['replace'](/^\/?lock\b/i,'')[_0x44f88b(0x323)]();const {left:_0x5732e9,gp:_0x4aa753}=splitRestForGp(_0x7cf24e),_0x45dfb6=(_0x5732e9||'')[_0x44f88b(0x3f3)](',')[_0x44f88b(0x2fa)](_0x167563=>_0x167563[_0x44f88b(0x323)]())[_0x44f88b(0x387)](Boolean);return{'triggers':_0x45dfb6,'gp':_0x4aa753};}function parseUnlockCommandOneLine(_0x70427e){const _0x9e8da7=_0x26e7cc,_0x2e9cf3=(_0x70427e||'')[_0x9e8da7(0x3f3)](/\r?\n/)[-0x1ab1+-0x1*-0x2669+-0xbb8]['trim']();let _0x1cd300=_0x2e9cf3[_0x9e8da7(0x243)](/^\/?unlock\b/i,'')[_0x9e8da7(0x323)]();const {left:_0x3673d0,gp:_0x4e6f3f}=splitRestForGp(_0x1cd300),_0x8689c=(_0x3673d0||'')['split'](',')[_0x9e8da7(0x2fa)](_0x6bef3e=>_0x6bef3e['trim']())['filter'](Boolean);return{'parts':_0x8689c,'gp':_0x4e6f3f};}function parseListCommandOneLine(_0x323664){const _0x34f1bb=_0x26e7cc,_0x31f36b=(_0x323664||'')['split'](/\r?\n/)[-0x314*-0x6+0x1*0x169f+-0x2917]['trim']();let _0x44e5d3=_0x31f36b['replace'](/^\/?listlock\b/i,'')[_0x34f1bb(0x323)]();const {left:_0x5ab95b,gp:_0x2056e7}=splitRestForGp(_0x44e5d3),_0x10e379=_0x2056e7||(_0x5ab95b?_0x5ab95b:null);return{'gp':_0x10e379};}function parseLockNotifyCommandOneLine(_0x1a598c){const _0x4defd1=_0x26e7cc,_0x30134b=(_0x1a598c||'')[_0x4defd1(0x3f3)](/\r?\n/)[0x1ebb+-0x114b+-0xd70][_0x4defd1(0x323)]();let _0x344dea=_0x30134b[_0x4defd1(0x243)](/^\/?locknotify\b/i,'')[_0x4defd1(0x323)]();const {left:_0x124071,gp:_0x758452}=splitRestForGp(_0x344dea),_0x250a61=(_0x124071||'')[_0x4defd1(0x2e0)+'e']();let _0x4a8c99=null;if(_0x250a61[_0x4defd1(0x333)]('on'))_0x4a8c99='on';else{if(_0x250a61[_0x4defd1(0x333)](_0x4defd1(0x2b7)))_0x4a8c99='off';}return{'mode':_0x4a8c99,'gp':_0x758452};}async function validateStoredRegexes(){const _0x66c8a4=_0x26e7cc;try{const _0x55010b=await db['all'](_0x66c8a4(0x31a)+_0x66c8a4(0x27e)+'OM\x20locks\x20W'+_0x66c8a4(0x233)+_0x66c8a4(0x2d1)+_0x66c8a4(0x250)+_0x66c8a4(0x258)+'egex\x27');for(const _0x5e393f of _0x55010b||[]){try{new RegExp(_0x5e393f[_0x66c8a4(0x1bf)]),await db[_0x66c8a4(0x211)](_0x66c8a4(0x399)+_0x66c8a4(0x3f6)+_0x66c8a4(0x3f7)+'x\x20=\x201\x20WHER'+'E\x20id\x20=\x20?',[_0x5e393f['id']]);}catch(_0x45d162){await db[_0x66c8a4(0x211)](_0x66c8a4(0x399)+_0x66c8a4(0x3f6)+_0x66c8a4(0x3f7)+'x\x20=\x200\x20WHER'+_0x66c8a4(0x352),[_0x5e393f['id']]);}}}catch(_0x163d50){warn(_0x66c8a4(0x3ef)+_0x66c8a4(0x36c)+_0x66c8a4(0x205)+_0x66c8a4(0x37b)+(_0x163d50?.['message']||_0x163d50));}}async function findStoredMatchFromFindings(_0xa29b37=[]){const _0x211a53=_0x26e7cc;try{const _0x397351=await listSudo();if(!Array[_0x211a53(0x392)](_0x397351)||_0x397351[_0x211a53(0x386)]===0xe*0x28c+-0x6b0+-0x1cf8)return null;const _0x575c6b=new Set(_0x397351[_0x211a53(0x2fa)](String));for(const _0x1c107d of _0xa29b37||[]){if(!_0x1c107d||typeof _0x1c107d[_0x211a53(0x3e6)]!==_0x211a53(0x32a))continue;const _0x56e86f=normalizeToJid(_0x1c107d[_0x211a53(0x3e6)]);if(_0x56e86f&&_0x575c6b['has'](_0x56e86f))return _0x56e86f;if(_0x575c6b[_0x211a53(0x3bf)](_0x1c107d['jid']))return _0x1c107d['jid'];const _0x1de6c5=String(_0x1c107d[_0x211a53(0x3e6)])['split']('@')[-0xc3a+0x218f+0x2b*-0x7f]['split'](':')[0x602+-0x6f7+0xf5];if(_0x1de6c5)for(const _0x569fc9 of _0x397351){const _0x388109=String(_0x569fc9)[_0x211a53(0x3f3)]('@')[-0x1*-0x1a5+0x11*0x1b7+-0x1ecc];if(_0x388109&&_0x388109===_0x1de6c5)return _0x569fc9;}}return null;}catch(_0x398db4){return warn(_0x211a53(0x2a8)+_0x211a53(0x32b)+'chFromFind'+'ings\x20error'+':\x20'+(_0x398db4?.[_0x211a53(0x251)]||_0x398db4)),null;}}export async function initialize(_0x54332c){const _0x5508f3=_0x26e7cc;if(!_0x54332c)throw new Error(_0x5508f3(0x22e)+_0x5508f3(0x1cd)+'ires\x20bot\x20i'+_0x5508f3(0x28e));botRef=_0x54332c,setupSendApi();try{const _0x388ae9=getConfig()||{},_0x4d9287=_0x388ae9&&_0x388ae9[_0x5508f3(0x355)]?_0x388ae9[_0x5508f3(0x355)]:{};CFG[_0x5508f3(0x3ba)+'ABLED']=_0x4d9287[_0x5508f3(0x3ba)+_0x5508f3(0x369)]??DEFAULTS[_0x5508f3(0x3ba)+_0x5508f3(0x369)],CFG[_0x5508f3(0x2b0)+'NG']=_0x4d9287['SEND_WARNI'+'NG']??DEFAULTS[_0x5508f3(0x2b0)+'NG'],CFG['WARNING_ME'+_0x5508f3(0x1f9)]=_0x4d9287[_0x5508f3(0x2aa)+_0x5508f3(0x1f9)]??DEFAULTS['WARNING_ME'+_0x5508f3(0x1f9)],CFG[_0x5508f3(0x33d)+_0x5508f3(0x316)]=Number[_0x5508f3(0x304)](_0x4d9287[_0x5508f3(0x33d)+_0x5508f3(0x316)])?_0x4d9287[_0x5508f3(0x33d)+_0x5508f3(0x316)]:DEFAULTS[_0x5508f3(0x33d)+_0x5508f3(0x316)],CFG[_0x5508f3(0x1d0)+_0x5508f3(0x3c2)]=Number[_0x5508f3(0x304)](_0x4d9287[_0x5508f3(0x1d0)+_0x5508f3(0x3c2)])?_0x4d9287[_0x5508f3(0x1d0)+_0x5508f3(0x3c2)]:DEFAULTS['PER_CHAT_Q'+_0x5508f3(0x3c2)],CFG[_0x5508f3(0x2ca)]=Number['isInteger'](_0x4d9287[_0x5508f3(0x2ca)])?_0x4d9287[_0x5508f3(0x2ca)]:DEFAULTS[_0x5508f3(0x2ca)],CFG['BATCH_DELA'+_0x5508f3(0x389)]=Number['isInteger'](_0x4d9287[_0x5508f3(0x3a2)+_0x5508f3(0x389)])?_0x4d9287[_0x5508f3(0x3a2)+_0x5508f3(0x389)]:DEFAULTS['BATCH_DELA'+_0x5508f3(0x389)],CFG[_0x5508f3(0x272)+_0x5508f3(0x1dc)]=Number[_0x5508f3(0x304)](_0x4d9287[_0x5508f3(0x272)+'CURRENCY'])?_0x4d9287['GLOBAL_CON'+_0x5508f3(0x1dc)]:DEFAULTS[_0x5508f3(0x272)+_0x5508f3(0x1dc)],CFG[_0x5508f3(0x32d)+_0x5508f3(0x299)+_0x5508f3(0x1df)]=!!_0x4d9287[_0x5508f3(0x32d)+_0x5508f3(0x299)+'CRITICS'];}catch(_0x526880){warn(_0x5508f3(0x1d6)+_0x5508f3(0x2c7)+_0x5508f3(0x1fa)+_0x5508f3(0x375)+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info(_0x5508f3(0x1f4)+_0x5508f3(0x2ff)+_0x5508f3(0x1be)+_0x5508f3(0x335)+'alidation\x20'+_0x5508f3(0x237));}catch(_0x395b99){error(_0x395b99,_0x5508f3(0x1f4)+'tialize\x20fa'+_0x5508f3(0x3b5));throw _0x395b99;}}export async function onMessage(_0x28198e){const _0x220efe=_0x26e7cc;try{if(!_0x28198e||!_0x28198e['key']||!_0x28198e[_0x220efe(0x251)])return;const _0x4e6f0a=_0x28198e[_0x220efe(0x2c9)]?.['id']||_0x28198e[_0x220efe(0x2c9)]?.['participan'+'t']||(_0x28198e[_0x220efe(0x2c9)]?.[_0x220efe(0x298)]?_0x220efe(0x298):''),_0x4b9893=String(_0x28198e['key']['remoteJid']||'')+'::'+String(_0x4e6f0a||'');if(isProcessed(_0x4b9893))return;markProcessed(_0x4b9893);const _0x140404=extractTextFromMessage(_0x28198e);if(!_0x140404)return;const _0x405925=_0x28198e[_0x220efe(0x2c9)]['remoteJid'],_0x38fe92=typeof _0x405925==='string'&&_0x405925['endsWith'](_0x220efe(0x1c1)),_0x3224bb=_0x28198e[_0x220efe(0x2c9)]?.[_0x220efe(0x209)+'t']||_0x28198e[_0x220efe(0x2c9)]?.[_0x220efe(0x1f8)]||_0x28198e[_0x220efe(0x2c9)]?.[_0x220efe(0x3ab)]||'',_0xc0c5b3=String(_0x3224bb||'')['split']('@')[0x2*0x64e+0x1ac9+-0x7e1*0x5];let _0x4df2e2=![];if(_0x38fe92)try{_0x4df2e2=await isadmin(botRef,_0x28198e);}catch(_0x1b4942){warn(_0x220efe(0x3f1)+_0x220efe(0x274)+'\x20failed'),_0x4df2e2=![];}if(_0x28198e['isCommand']){const _0x5ab668=typeof _0x28198e[_0x220efe(0x370)]===_0x220efe(0x32a)&&_0x28198e[_0x220efe(0x370)][_0x220efe(0x323)]()[_0x220efe(0x386)]?_0x28198e[_0x220efe(0x370)]['trim']():_0x140404[_0x220efe(0x323)](),_0x571e4f=(_0x5ab668['split'](/\s+/)[-0x875*0x4+-0x3f1*0x2+0x29b6]||'')['toLowerCas'+'e']();if(!_0x38fe92){const _0x59feca=Boolean(_0x28198e[_0x220efe(0x2c9)][_0x220efe(0x298)]);let _0x54900f=null;if(_0x59feca){const _0x13fbb3=getBotJid();_0x54900f=_0x13fbb3||_0x28198e[_0x220efe(0x2c9)][_0x220efe(0x3ab)];}else{let _0x5d7730=![];try{_0x5d7730=await isSudo(botRef,_0x28198e);}catch(_0x543c44){_0x5d7730=![];}if(!_0x5d7730)return;const _0x9774e9=userJidFromCtx(_0x28198e)||{'findings':[]},_0x1552ec=await findStoredMatchFromFindings(_0x9774e9['findings']||[]);if(!_0x1552ec)return;_0x54900f=_0x1552ec;}if(!_0x54900f)return;if(_0x571e4f===_0x220efe(0x2b2)){const {triggers:_0x17759a,gp:_0x33a10a}=parseLockCommandOneLine(_0x5ab668||_0x140404);if(!_0x17759a[_0x220efe(0x386)]){await sendText(_0x54900f,'❌\x20PM:\x20one-'+_0x220efe(0x330)+_0x220efe(0x358)+'igger1,tri'+_0x220efe(0x2d3)+'<alias|jid'+_0x220efe(0x25e));return;}if(!_0x33a10a){await sendText(_0x54900f,_0x220efe(0x363)+_0x220efe(0x227)+_0x220efe(0x39e)+_0x220efe(0x268)+_0x220efe(0x28b)+_0x220efe(0x359)+_0x220efe(0x26d));return;}let _0x42a1c5=[];const _0x5ef7f0=_0x33a10a[_0x220efe(0x323)]();if(_0x5ef7f0[_0x220efe(0x2e0)+'e']()==='all')_0x42a1c5=await _0x8d006d[_0x220efe(0x372)+_0x220efe(0x21a)]();else{const _0x121c61=await _0x8d006d[_0x220efe(0x397)+'e'](_0x5ef7f0);if(_0x121c61)_0x42a1c5=[_0x121c61];else{if(_0x5ef7f0['includes']('@'))_0x42a1c5=[_0x8d006d[_0x220efe(0x300)+_0x220efe(0x2cb)](_0x5ef7f0)];else{await sendText(_0x54900f,_0x220efe(0x238)+_0x220efe(0x200)+_0x220efe(0x1e0)+_0x5ef7f0+'\x22.');return;}}}let _0x4b1bf7=0x20ce*0x1+-0x80*0x34+-0x6ce;for(const _0x129d36 of uniqArray(_0x42a1c5)){for(const _0x5e91ee of _0x17759a){const _0x4f4f2e=await addLock(_0x129d36,_0x5e91ee,_0x3224bb);if(_0x4f4f2e)_0x4b1bf7++;}}await sendText(_0x54900f,_0x220efe(0x2f3)+_0x4b1bf7+_0x220efe(0x1cb));return;}if(_0x571e4f==='listlock'){const {gp:_0x246700}=parseListCommandOneLine(_0x5ab668||_0x140404);if(!_0x246700){await sendText(_0x54900f,_0x220efe(0x294)+_0x220efe(0x330)+_0x220efe(0x210)+_0x220efe(0x2ad)+_0x220efe(0x216));return;}let _0x59c6d2=[];if(_0x246700[_0x220efe(0x2e0)+'e']()==='all')_0x59c6d2=await _0x8d006d[_0x220efe(0x372)+_0x220efe(0x21a)]();else{const _0x513468=await _0x8d006d['resolveNam'+'e'](_0x246700);if(_0x513468)_0x59c6d2=[_0x513468];else{if(_0x246700[_0x220efe(0x333)]('@'))_0x59c6d2=[_0x8d006d['normalizeT'+_0x220efe(0x2cb)](_0x246700)];else{await sendText(_0x54900f,_0x220efe(0x238)+_0x220efe(0x200)+'id:\x20\x22'+_0x246700+'\x22.');return;}}}let _0x571970=[];for(const _0x2ed3be of _0x59c6d2){const _0x492be3=await listLocksForChat(_0x2ed3be);for(const _0x2cbc42 of _0x492be3)_0x571970['push']({'chatJid':_0x2ed3be,..._0x2cbc42});}await sendText(_0x54900f,_0x220efe(0x1ea)+_0x571970[_0x220efe(0x386)]+(_0x220efe(0x1c7)+'ded\x20for\x20re'+'quested\x20ta'+_0x220efe(0x2c8)));if(!_0x571970[_0x220efe(0x386)])return;let _0x85d611='';for(const _0x3fa191 of _0x571970){const _0x2aad11=_0x3fa191[_0x220efe(0x289)]?new Date(_0x3fa191[_0x220efe(0x289)]*(0x259a+-0x1581+-0xc31))[_0x220efe(0x3e9)+'g']()[_0x220efe(0x366)](-0x772+-0x1*0x1b6b+0x20d*0x11,-0x77e+0x9ad*-0x3+0x248f):'',_0xc54636=_0x3fa191[_0x220efe(0x378)]==='regex'?'⦿':_0x3fa191[_0x220efe(0x378)]==='wildcard'?'✶':'',_0x28658a=_0x3fa191['type']==='regex'?_0x220efe(0x1ff)+_0x3fa191[_0x220efe(0x1bf)]:_0x3fa191[_0x220efe(0x1bf)],_0x1a43f2=_0x3fa191['type']===_0x220efe(0x241)&&_0x3fa191[_0x220efe(0x1da)+_0x220efe(0x3f8)]===0x6f9*0x4+0x135+-0x1d19?_0x220efe(0x32e)+_0x220efe(0x277):'',_0xc9a2d=_0x3fa191['chatJid']+':'+_0x3fa191['id']+'.\x20'+(_0xc54636?_0xc54636+'\x20':'')+_0x28658a+_0x1a43f2+'\x20'+(_0x2aad11?'('+_0x2aad11+')':'')+'\x0a';(_0x85d611+_0xc9a2d)[_0x220efe(0x386)]>-0x1*0x71+0x42*0x2d+-0x54d&&(await sendText(_0x54900f,_0x85d611[_0x220efe(0x323)]()),_0x85d611=''),_0x85d611+=_0xc9a2d;}if(_0x85d611[_0x220efe(0x323)]())await sendText(_0x54900f,_0x85d611[_0x220efe(0x323)]());return;}if([_0x220efe(0x1c3),'dellock',_0x220efe(0x3ad),_0x220efe(0x2cc),'delock'][_0x220efe(0x333)](_0x571e4f)){const {parts:_0x2c8fbc,gp:_0x145c35}=parseUnlockCommandOneLine(_0x5ab668||_0x140404);if(!_0x2c8fbc?.[_0x220efe(0x386)]){await sendText(_0x54900f,_0x220efe(0x294)+_0x220efe(0x330)+_0x220efe(0x2fb)+_0x220efe(0x361)+_0x220efe(0x267)+_0x220efe(0x33a)+'gp:<alias|'+_0x220efe(0x332));return;}if(!_0x145c35){await sendText(_0x54900f,_0x220efe(0x363)+'ude\x20gp\x20in\x20'+_0x220efe(0x39e)+_0x220efe(0x268)+_0x220efe(0x2cf)+_0x220efe(0x2da));return;}let _0x1a1f65=[];const _0x368d1b=_0x145c35[_0x220efe(0x323)]();if(_0x368d1b[_0x220efe(0x2e0)+'e']()===_0x220efe(0x212))_0x1a1f65=await _0x8d006d[_0x220efe(0x372)+'ids']();else{const _0x46f37d=await _0x8d006d['resolveNam'+'e'](_0x368d1b);if(_0x46f37d)_0x1a1f65=[_0x46f37d];else{if(_0x368d1b[_0x220efe(0x333)]('@'))_0x1a1f65=[_0x8d006d[_0x220efe(0x300)+'oUserJid'](_0x368d1b)];else{await sendText(_0x54900f,_0x220efe(0x238)+'gp\x20alias/j'+_0x220efe(0x1e0)+_0x368d1b+'\x22.');return;}}}let _0x8e281d=0xd5*-0x2b+-0x73a+0x65*0x6d;for(const _0x49fb8d of _0x2c8fbc){if(!_0x49fb8d)continue;if(/^\d+$/['test'](_0x49fb8d)){for(const _0x34dbe5 of _0x1a1f65){const _0x528bc9=await deleteLockById(_0x34dbe5,_0x49fb8d);if(_0x528bc9)_0x8e281d+=_0x528bc9;}continue;}for(const _0x13c21f of _0x1a1f65){const _0x2a0437=await deleteLockByPhrase(_0x13c21f,_0x49fb8d);if(_0x2a0437)_0x8e281d+=_0x2a0437;}}await sendText(_0x54900f,'✔️\x20Deleted\x20'+_0x8e281d+'/'+_0x2c8fbc[_0x220efe(0x386)]+_0x220efe(0x1cb));return;}if(_0x571e4f===_0x220efe(0x247)||_0x571e4f===_0x220efe(0x2b9)||_0x571e4f===_0x220efe(0x341)){const _0x1c8ed3=(_0x5ab668||_0x140404||'')['split'](/\r?\n/)[-0x3*-0x106+0x2c2*-0x2+0x272][_0x220efe(0x323)](),_0x2abdbc=_0x1c8ed3['replace'](/^\/?(unlockall|delall|clearlocks)\b/i,'')[_0x220efe(0x323)](),{left:_0x5b59f7,gp:_0x2cb1ce}=splitRestForGp(_0x2abdbc);if(!_0x2cb1ce){await sendText(_0x54900f,_0x220efe(0x294)+_0x220efe(0x330)+_0x220efe(0x282)+_0x220efe(0x27a)+_0x220efe(0x3fc));return;}let _0x1b6624=[];const _0x47b079=_0x2cb1ce['trim']();if(_0x47b079['toLowerCas'+'e']()===_0x220efe(0x212))_0x1b6624=await _0x8d006d[_0x220efe(0x372)+_0x220efe(0x21a)]();else{const _0x174e7d=await _0x8d006d[_0x220efe(0x397)+'e'](_0x47b079);if(_0x174e7d)_0x1b6624=[_0x174e7d];else{if(_0x47b079[_0x220efe(0x333)]('@'))_0x1b6624=[_0x8d006d[_0x220efe(0x300)+_0x220efe(0x2cb)](_0x47b079)];else{await sendText(_0x54900f,'❌\x20Unknown\x20'+_0x220efe(0x200)+_0x220efe(0x1e0)+_0x47b079+'\x22.');return;}}}let _0x2fb62a=0x1*0x397+0xfe0+0x1c5*-0xb;for(const _0x3f30b9 of _0x1b6624){const _0x3fb1ba=await deleteAllLocksForChat(_0x3f30b9);_0x2fb62a+=_0x3fb1ba||0x523*-0x2+0x2*0xa35+0xec*-0xb;}await sendText(_0x54900f,'✔️\x20Deleted\x20'+_0x2fb62a+_0x220efe(0x1cb));return;}if(_0x571e4f===_0x220efe(0x3fe)){const _0x374684=parseLockNotifyCommandOneLine(_0x5ab668||_0x140404),{mode:_0x1c4730,gp:_0x9f977a}=_0x374684;if(!_0x9f977a){await sendText(_0x54900f,_0x220efe(0x240)+_0x220efe(0x2b8)+_0x220efe(0x26a)+_0x220efe(0x28f)+_0x220efe(0x2ad)+'|jid|all>\x0a'+'To\x20query\x20s'+'tatus:\x20loc'+_0x220efe(0x1d5)+_0x220efe(0x301)+_0x220efe(0x39d));return;}let _0x161e7b=[];const _0x2a310d=_0x9f977a['trim']();if(_0x2a310d[_0x220efe(0x2e0)+'e']()===_0x220efe(0x212))_0x161e7b=await _0x8d006d[_0x220efe(0x372)+_0x220efe(0x21a)]();else{const _0xbefff5=await _0x8d006d[_0x220efe(0x397)+'e'](_0x2a310d);if(_0xbefff5)_0x161e7b=[_0xbefff5];else{if(_0x2a310d[_0x220efe(0x333)]('@'))_0x161e7b=[_0x8d006d[_0x220efe(0x300)+'oUserJid'](_0x2a310d)];else{await sendText(_0x54900f,_0x220efe(0x238)+_0x220efe(0x200)+_0x220efe(0x1e0)+_0x2a310d+'\x22.');return;}}}if(!_0x1c4730){const _0x4a09b9=[];for(const _0xcac044 of uniqArray(_0x161e7b)){const _0x52e7ac=await getLockNotify(_0xcac044)[_0x220efe(0x36d)](()=>0x1*-0x798+0x1*0x199e+-0x301*0x6);_0x4a09b9['push'](_0xcac044+':\x20'+(_0x52e7ac?'ON':_0x220efe(0x322)));}await sendText(_0x54900f,_0x220efe(0x2d8)+_0x220efe(0x2e8)+_0x220efe(0x2a6)+_0x4a09b9[_0x220efe(0x1f3)]('\x0a'));return;}let _0x3ab393=0x211*-0xb+-0x22f3+0x39ae;for(const _0x362ee3 of uniqArray(_0x161e7b)){const _0xae3e91=await setLockNotify(_0x362ee3,_0x1c4730==='on');if(_0xae3e91)_0x3ab393++;}await sendText(_0x54900f,_0x220efe(0x21c)+_0x220efe(0x395)+_0x1c4730+_0x220efe(0x25c)+_0x3ab393+'/'+_0x161e7b[_0x220efe(0x386)]+(_0x220efe(0x313)+'.'));return;}return;}if(_0x38fe92){if(!_0x4df2e2)return;const _0x53820e=_0x405925,_0x430361=await getDefault(_0xc0c5b3)['catch'](()=>null);if(!_0x430361||Array[_0x220efe(0x392)](_0x430361)&&_0x430361[_0x220efe(0x386)]===0x3bc+0x691+0x9*-0x125)return;const _0x1ad334=Array['isArray'](_0x430361)?_0x430361:[_0x430361];let _0x564700=[];for(const _0x59797f of _0x1ad334){try{const _0x49d435=await getConnection(_0x59797f)[_0x220efe(0x36d)](()=>null);if(Array[_0x220efe(0x392)](_0x49d435))_0x564700[_0x220efe(0x3b9)](..._0x49d435);else{if(_0x49d435)_0x564700[_0x220efe(0x3b9)](String(_0x49d435));}}catch(_0x49742d){warn(_0x220efe(0x26f)+_0x220efe(0x3b7)+_0x220efe(0x1bc)+_0x59797f+_0x220efe(0x2b5)+(_0x49742d?.[_0x220efe(0x251)]||_0x49742d));}}_0x564700=uniqArray(_0x564700);if(!_0x564700[_0x220efe(0x386)]){await sendText(_0x53820e,_0x220efe(0x1dd)+_0x220efe(0x23f)+_0x220efe(0x2af)+_0x220efe(0x30d)+_0x220efe(0x33b)+_0x1ad334[_0x220efe(0x1f3)](',\x20')+(_0x220efe(0x3d1)+_0x220efe(0x24c)+_0x220efe(0x1f0)+_0x220efe(0x236)));return;}if(_0x571e4f===_0x220efe(0x2b2)){const {triggers:_0x252bfd}=parseLockCommandOneLine(_0x5ab668||_0x140404);if(!_0x252bfd[_0x220efe(0x386)]){await sendText(_0x53820e,_0x220efe(0x2d7)+_0x220efe(0x367)+':\x20lock\x20tri'+_0x220efe(0x21d)+_0x220efe(0x2fe));return;}let _0xc19954=-0x2582+0x3*0x941+0x9bf*0x1;for(const _0x56a0af of _0x564700){let _0x1f4d28=-0x1*-0x10ed+-0x24e4+0x13f7;for(const _0x1fa81f of _0x252bfd){const _0x3ba136=await addLock(_0x56a0af,_0x1fa81f,_0x3224bb);if(_0x3ba136)_0x1f4d28++;}_0xc19954+=_0x1f4d28;}await sendText(_0x53820e,'✔️\x20Saved\x20'+_0xc19954+'/'+_0x252bfd[_0x220efe(0x386)]*_0x564700['length']+(_0x220efe(0x1ce)+_0x220efe(0x3c8)+_0x220efe(0x28c)+_0x220efe(0x1cf)+_0x220efe(0x2ee))+_0x564700[_0x220efe(0x1f3)](',\x20'));return;}if(_0x571e4f===_0x220efe(0x224)){const _0x327ae5=[];for(const _0x5ad19d of _0x564700){const _0x3449a9=await listLocksForChat(_0x5ad19d);for(const _0x2c551c of _0x3449a9)_0x327ae5[_0x220efe(0x3b9)]({'chatJid':_0x5ad19d,..._0x2c551c});}await sendText(_0x53820e,_0x220efe(0x2d8)+_0x220efe(0x1c8)+_0x327ae5[_0x220efe(0x386)]+('\x20locks\x20for'+_0x220efe(0x342)+_0x220efe(0x306)+_0x220efe(0x3ea))+_0x564700[_0x220efe(0x1f3)](',\x20'));if(!_0x327ae5['length'])return;let _0x343cab='';for(const _0x3b06e6 of _0x327ae5){const _0x16bb94=_0x3b06e6['created_at']?new Date(_0x3b06e6[_0x220efe(0x289)]*(0x1cd6+0x10d*-0x15+-0x2dd*0x1))[_0x220efe(0x3e9)+'g']()['slice'](-0x8*0xc4+0x1bdd+-0xf*0x173,0x1ae3*0x1+-0x7*-0x3ed+-0x3654):'',_0x3cfb0a=_0x3b06e6[_0x220efe(0x378)]===_0x220efe(0x241)?'⦿':_0x3b06e6['type']===_0x220efe(0x3a5)?'✶':'',_0x46f05f=_0x3b06e6[_0x220efe(0x378)]===_0x220efe(0x241)?_0x220efe(0x1ff)+_0x3b06e6[_0x220efe(0x1bf)]:_0x3b06e6[_0x220efe(0x1bf)],_0x21ef00=_0x3b06e6[_0x220efe(0x378)]===_0x220efe(0x241)&&_0x3b06e6[_0x220efe(0x1da)+_0x220efe(0x3f8)]===-0x2663+-0xbbc+0x321f?_0x220efe(0x32e)+_0x220efe(0x277):'',_0x158814=_0x3b06e6[_0x220efe(0x231)]+':'+_0x3b06e6['id']+'.\x20'+(_0x3cfb0a?_0x3cfb0a+'\x20':'')+_0x46f05f+_0x21ef00+'\x20'+(_0x16bb94?'('+_0x16bb94+')':'')+'\x0a';(_0x343cab+_0x158814)['length']>-0x2cd*-0xc+0x10*-0xa+0x20*-0xd9&&(await sendText(_0x53820e,_0x343cab['trim']()),_0x343cab=''),_0x343cab+=_0x158814;}if(_0x343cab['trim']())await sendText(_0x53820e,_0x343cab[_0x220efe(0x323)]());return;}if([_0x220efe(0x1c3),'dellock',_0x220efe(0x3ad),_0x220efe(0x2cc),_0x220efe(0x3ad)]['includes'](_0x571e4f)){const {parts:_0x28901b}=parseUnlockCommandOneLine(_0x5ab668||_0x140404);if(!_0x28901b?.[_0x220efe(0x386)]){await sendText(_0x53820e,'❌\x20Usage\x20(g'+_0x220efe(0x367)+':\x20unlock\x201'+_0x220efe(0x36e)+'ck\x20phrase1'+',phrase2');return;}const _0x108fc1=new Map();for(const _0x3466a9 of _0x564700){const _0x1c6bb3=await listLocksForChat(_0x3466a9);_0x108fc1[_0x220efe(0x291)](_0x3466a9,_0x1c6bb3||[]);}let _0x4e5979=-0xbf*-0x5+0x6*0x1f6+-0xf7f;for(const _0x4dfbf8 of _0x28901b){if(!_0x4dfbf8)continue;if(/^\d+$/[_0x220efe(0x3fd)](_0x4dfbf8)){for(const [_0x4a63ca,_0x5627af]of _0x108fc1[_0x220efe(0x296)]()){if(_0x5627af[_0x220efe(0x2bc)](_0x2c93c4=>String(_0x2c93c4['id'])===_0x4dfbf8)){const _0x3c18de=await deleteLockById(_0x4a63ca,_0x4dfbf8);if(_0x3c18de)_0x4e5979+=_0x3c18de;}}continue;}for(const _0x192362 of _0x564700){const _0x1424cf=await deleteLockByPhrase(_0x192362,_0x4dfbf8);if(_0x1424cf)_0x4e5979+=_0x1424cf;}}await sendText(_0x53820e,'✔️\x20Deleted\x20'+_0x4e5979+'/'+_0x28901b[_0x220efe(0x386)]+(_0x220efe(0x2ac)+'rom\x20your\x20d'+_0x220efe(0x235)+'nection(s)'+':\x20')+_0x564700['join'](',\x20'));return;}if(_0x571e4f===_0x220efe(0x247)||_0x571e4f===_0x220efe(0x2b9)||_0x571e4f===_0x220efe(0x341)){try{let _0x5bdc83=0x1*-0x229f+-0x10e*0xb+0x2e39*0x1;for(const _0x28b9ff of _0x564700){const _0xcef538=await deleteAllLocksForChat(_0x28b9ff);_0x5bdc83+=_0xcef538||-0x2a*0x13+0x42*-0x9+-0xae*-0x8;}await sendText(_0x53820e,'✔️\x20Deleted\x20'+_0x5bdc83+('\x20lock(s)\x20f'+_0x220efe(0x3a7)+_0x220efe(0x235)+_0x220efe(0x336)+':\x20')+_0x564700[_0x220efe(0x1f3)](',\x20'));}catch(_0x56fe3e){warn(_0x220efe(0x305)+'ockall\x20fai'+'led\x20for\x20'+_0x564700['join'](',\x20')+':\x20'+(_0x56fe3e?.[_0x220efe(0x251)]||_0x56fe3e)),await sendText(_0x53820e,_0x220efe(0x1c6)+_0x220efe(0x2fc)+_0x220efe(0x2a2)+'our\x20defaul'+_0x220efe(0x36a)+_0x220efe(0x1cc)+_0x564700[_0x220efe(0x1f3)](',\x20'));}return;}if(_0x571e4f==='locknotify'){const _0x259e10=(_0x5ab668||_0x140404||'')[_0x220efe(0x3f3)](/\r?\n/)[0x12cd*-0x1+0x1e31+-0xb64][_0x220efe(0x323)](),{left:_0x28a24c}=splitRestForGp(_0x259e10['replace'](/^\/?locknotify\b/i,'')[_0x220efe(0x323)]()),_0x4189ee=(_0x28a24c||'')[_0x220efe(0x2e0)+'e']();if(!_0x4189ee['includes']('on')&&!_0x4189ee[_0x220efe(0x333)](_0x220efe(0x2b7))){await sendText(_0x53820e,_0x220efe(0x2d7)+_0x220efe(0x367)+_0x220efe(0x263)+_0x220efe(0x2f5)+_0x220efe(0x286)+_0x220efe(0x252)+'tification'+_0x220efe(0x345)+_0x220efe(0x33c)+_0x220efe(0x2f1)+_0x220efe(0x3b0));return;}const _0x2fb433=_0x4189ee['includes']('on')?'on':'off';let _0x79d345=0x2e6*-0x7+0xe30+-0x8e*-0xb;for(const _0x26998d of _0x564700){const _0x2bf599=await setLockNotify(_0x26998d,_0x2fb433==='on');if(_0x2bf599)_0x79d345++;}await sendText(_0x53820e,_0x220efe(0x21c)+'fy\x20'+_0x2fb433+'\x20set\x20for\x20'+_0x79d345+'/'+_0x564700['length']+(_0x220efe(0x33f)+'onnection('+_0x220efe(0x3b0)));return;}return;}}if(_0x38fe92){if(!CFG[_0x220efe(0x3ba)+_0x220efe(0x369)])return;if(_0x28198e[_0x220efe(0x2c9)][_0x220efe(0x298)])return;if(_0x4df2e2)return;const _0x510280=_0x405925,_0xd35203=extractTextFromMessage(_0x28198e);if(!_0xd35203)return;const _0x371670=normalizeForMatch(String(_0xd35203||''))[_0x220efe(0x2e0)+'e'](),_0xb759=await listLocksForChat(_0x510280);if(!_0xb759||!_0xb759[_0x220efe(0x386)])return;const _0x12ff2e=_0xb759['filter'](_0x81bd3c=>!_0x81bd3c[_0x220efe(0x378)]||_0x81bd3c[_0x220efe(0x378)]===_0x220efe(0x2ed)),_0x1a6294=_0xb759[_0x220efe(0x387)](_0x1a60de=>_0x1a60de[_0x220efe(0x378)]==='wildcard'),_0x183840=_0xb759[_0x220efe(0x387)](_0x3e12c1=>_0x3e12c1['type']===_0x220efe(0x241)||_0x3e12c1[_0x220efe(0x378)]===_0x220efe(0x2e7)+_0x220efe(0x3ff)),_0x32f466=new Set(),_0xe921cb=new Set();if(_0x12ff2e[_0x220efe(0x386)]>-0x25b4+-0x14b2+0x3a66){const _0x5d4a45=_0x12ff2e['map'](_0xb95a32=>normalizeForMatch(String(_0xb95a32['phrase']||'')))[_0x220efe(0x387)](Boolean),_0x29df38=_0x5d4a45[_0x220efe(0x1f3)]('\x00');let _0xc193a9;const _0x38145b=ahoCache[_0x220efe(0x201)](_0x510280);if(_0x38145b&&_0x38145b[_0x220efe(0x1e8)+_0x220efe(0x3c0)]===_0x29df38&&_0x38145b['aho'])_0xc193a9=_0x38145b['aho'];else try{_0xc193a9=new AhoCorasick(_0x5d4a45),ahoCache['set'](_0x510280,{'serializedKeywords':_0x29df38,'aho':_0xc193a9});}catch(_0x500d0e){warn('[lock]\x20Aho'+'Corasick\x20b'+_0x220efe(0x2c4)+'d\x20for\x20'+_0x510280+':\x20'+(_0x500d0e?.['message']||_0x500d0e)),_0xc193a9=null;}if(_0xc193a9)try{const _0x1f73f1=_0xc193a9['search'](_0x371670);for(const _0x185039 of _0x1f73f1){const _0x45cc15=_0x185039[_0x220efe(0x2f8)],_0x37f8a2=_0x185039[_0x220efe(0x380)],_0x27a058=_0x37f8a2+_0x45cc15[_0x220efe(0x386)],_0x46d88c=_0x37f8a2===-0x26*0x22+-0x10*0x3c+-0x1*-0x8cc||!/\w/[_0x220efe(0x3fd)](_0x371670[_0x37f8a2-(0x443+-0x151*-0x4+-0x986)]),_0xf5064f=_0x27a058===_0x371670[_0x220efe(0x386)]||!/\w/[_0x220efe(0x3fd)](_0x371670[_0x27a058]);if(_0x46d88c&&_0xf5064f)for(const _0x4dd396 of _0x12ff2e){const _0x2a8897=normalizeForMatch(String(_0x4dd396[_0x220efe(0x1bf)]||''));if(_0x2a8897===_0x45cc15)try{const _0x5c15c4=wholeWordRegexForPhrase(_0x2a8897);_0x5c15c4[_0x220efe(0x3fd)](_0x371670)&&(_0x32f466[_0x220efe(0x2a3)](_0x4dd396['id']),_0xe921cb[_0x220efe(0x2a3)](_0x4dd396[_0x220efe(0x1bf)]));}catch(_0x396a11){_0x32f466['add'](_0x4dd396['id']),_0xe921cb['add'](_0x4dd396[_0x220efe(0x1bf)]);}}else for(const _0x161829 of _0x12ff2e){try{const _0x2bdaf9=wholeWordRegexForPhrase(normalizeForMatch(String(_0x161829[_0x220efe(0x1bf)]||'')));_0x2bdaf9[_0x220efe(0x3fd)](_0x371670)&&(_0x32f466[_0x220efe(0x2a3)](_0x161829['id']),_0xe921cb['add'](_0x161829['phrase']));}catch(_0x13b034){}}}}catch(_0xa233fb){warn(_0x220efe(0x3a1)+_0x220efe(0x1c5)+'earch\x20fail'+_0x220efe(0x2f7)+(_0xa233fb?.[_0x220efe(0x251)]||_0xa233fb));for(const _0x4609e7 of _0x12ff2e){try{const _0x35ddba=wholeWordRegexForPhrase(normalizeForMatch(String(_0x4609e7[_0x220efe(0x1bf)]||'')));_0x35ddba[_0x220efe(0x3fd)](_0x371670)&&(_0x32f466[_0x220efe(0x2a3)](_0x4609e7['id']),_0xe921cb[_0x220efe(0x2a3)](_0x4609e7[_0x220efe(0x1bf)]));}catch(_0x23570b){}}}else for(const _0x2b1490 of _0x12ff2e){try{const _0x441bf0=wholeWordRegexForPhrase(normalizeForMatch(String(_0x2b1490[_0x220efe(0x1bf)]||'')));_0x441bf0['test'](_0x371670)&&(_0x32f466[_0x220efe(0x2a3)](_0x2b1490['id']),_0xe921cb[_0x220efe(0x2a3)](_0x2b1490[_0x220efe(0x1bf)]));}catch(_0x29c016){}}}if(_0x1a6294[_0x220efe(0x386)]>0x6*-0x583+0x88d*0x1+-0x1*-0x1885)for(const _0x1b618a of _0x1a6294){try{const _0x157abf=wildcardToRegex(String(_0x1b618a[_0x220efe(0x1bf)]||''));_0x157abf['test'](_0x371670)&&(_0x32f466[_0x220efe(0x2a3)](_0x1b618a['id']),_0xe921cb['add'](_0x1b618a[_0x220efe(0x1bf)]));}catch(_0x323fc1){warn(_0x220efe(0x26e)+_0x220efe(0x321)+_0x220efe(0x1eb)+'='+_0x1b618a['id']+_0x220efe(0x25f)+_0x1b618a[_0x220efe(0x1bf)]+_0x220efe(0x327)+(_0x323fc1?.[_0x220efe(0x251)]||_0x323fc1));}}if(_0x183840['length']>0x133b+0x1*-0x324+0x55d*-0x3)for(const _0x1f2e11 of _0x183840){try{if(_0x1f2e11['is_valid_r'+_0x220efe(0x3f8)]===0x1*0x994+-0xed*0x29+-0x1c61*-0x1){warn('[lock]\x20ski'+_0x220efe(0x374)+_0x220efe(0x20c)+_0x220efe(0x32f)+_0x1f2e11['id']+'\x20phrase=\x22'+_0x1f2e11['phrase']+'\x22');continue;}const _0x26aa99=new RegExp(_0x1f2e11[_0x220efe(0x1bf)],'iu');_0x26aa99[_0x220efe(0x3fd)](_0x371670)&&(_0x32f466['add'](_0x1f2e11['id']),_0xe921cb['add'](_0x220efe(0x1ff)+_0x1f2e11[_0x220efe(0x1bf)]));}catch(_0x4269b2){warn(_0x220efe(0x26e)+'alid\x20store'+_0x220efe(0x1f5)+_0x220efe(0x2a0)+_0x1f2e11['id']+_0x220efe(0x25f)+_0x1f2e11['phrase']+'\x22:\x20'+(_0x4269b2?.[_0x220efe(0x251)]||_0x4269b2));try{await db[_0x220efe(0x211)](_0x220efe(0x399)+_0x220efe(0x3f6)+_0x220efe(0x3f7)+_0x220efe(0x371)+_0x220efe(0x352),[_0x1f2e11['id']]);}catch(_0x89a0ec){}}}if(_0x32f466[_0x220efe(0x312)]>0xd69+0xd4f*-0x1+0x1a*-0x1)try{try{const _0x2103aa=await getLockNotify(_0x510280)[_0x220efe(0x36d)](()=>-0x5b+-0x7*0x445+-0x31*-0x9e);if(_0x2103aa)try{const _0x1b43a0=await db[_0x220efe(0x201)]('SELECT\x20val'+_0x220efe(0x388)+_0x220efe(0x295)+_0x220efe(0x2e3)+'\x20=\x20\x27target'+_0x220efe(0x2b4));let _0x10316e=_0x1b43a0?.[_0x220efe(0x3cb)]||null;if(!_0x10316e){const _0x36dcb9=getBotJid();_0x10316e=_0x36dcb9||null;}if(_0x10316e){const _0x18eb6e=Array[_0x220efe(0x1f8)](_0xe921cb)['slice'](-0x13d5+0x105+-0x2*-0x968,-0xf81+0x2666+0x1*-0x16df)[_0x220efe(0x1f3)](',\x20'),_0x59597a=_0xc0c5b3||String(_0x3224bb||'')[_0x220efe(0x3f3)]('@')[0x5*0x626+0x2417+-0x42d5*0x1]||_0x220efe(0x290),_0x23cb54=String(_0xd35203||'')['trim'](),_0x15ac23=_0x220efe(0x3df)+'ch\x20in\x20'+_0x510280+_0x220efe(0x390)+_0x59597a+_0x220efe(0x2be)+_0x18eb6e+_0x220efe(0x1e4)+_0x23cb54;await sendText(_0x10316e,_0x15ac23,_0x3224bb?[_0x3224bb]:[]);}}catch(_0x2b2eea){warn(_0x220efe(0x229)+_0x220efe(0x29f)+_0x220efe(0x24f)+_0x220efe(0x3b4)+':\x20'+(_0x2b2eea?.[_0x220efe(0x251)]||_0x2b2eea));}}catch(_0x217b81){warn(_0x220efe(0x1e1)+_0x220efe(0x3c4)+_0x220efe(0x254)+':\x20'+(_0x217b81?.[_0x220efe(0x251)]||_0x217b81));}enqueueDeletion(_0x28198e);for(const _0x20b8b0 of _0x32f466){try{await db['run'](_0x220efe(0x399)+_0x220efe(0x218)+_0x220efe(0x3d0)+_0x220efe(0x3a4)+_0x220efe(0x3e3)+_0x220efe(0x24d),[_0x20b8b0]);}catch(_0x31b094){}}}catch(_0x363120){warn(_0x220efe(0x24e)+_0x220efe(0x3e5)+'ailed:\x20'+(_0x363120?.[_0x220efe(0x251)]||_0x363120));}}}catch(_0x52fe1e){error(_0x52fe1e,_0x220efe(0x2e9)+_0x220efe(0x22c)+':\x20'+(_0x52fe1e?.[_0x220efe(0x251)]||_0x52fe1e));}}export async function cleanup(){const _0x171677=_0x26e7cc;shuttingDown=!![];for(const _0x55b2f5 of processedMessageKeys[_0x171677(0x206)]())try{clearTimeout(_0x55b2f5);}catch(_0xb924e1){}processedMessageKeys[_0x171677(0x3bd)](),perChatQueue['clear'](),perChatProcessing[_0x171677(0x3bd)](),activeChats=-0x1c3f+0x12e6+0x959,botRef=null,sendApi=null,ahoCache['clear'](),info('[lock]\x20cle'+'aned\x20up');}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};