const _0x516eef=_0x1222;(function(_0x487b4c,_0x1888ba){const _0x24d766=_0x1222,_0x1be46f=_0x487b4c();while(!![]){try{const _0x3284e4=-parseInt(_0x24d766(0x212))/(0x26a8+0x283+-0x292a)+parseInt(_0x24d766(0x2c5))/(0x1edd+0x2223*-0x1+0x1a4*0x2)+-parseInt(_0x24d766(0x290))/(0x1*0xdd9+-0x15e+0x4c*-0x2a)+-parseInt(_0x24d766(0x219))/(0xa*-0x16c+0x37f+0xabd)*(-parseInt(_0x24d766(0x248))/(-0x3*0x239+0x17fd+0x1*-0x114d))+-parseInt(_0x24d766(0x2b3))/(-0x4e1+0xb62+-0x67b)*(-parseInt(_0x24d766(0x26b))/(-0x26fe+0x1*-0x1375+-0x5*-0xbb2))+parseInt(_0x24d766(0x25e))/(0xcee+0x25f5+0x1*-0x32db)+-parseInt(_0x24d766(0x223))/(-0x6f+0xd*0x221+-0x1b35);if(_0x3284e4===_0x1888ba)break;else _0x1be46f['push'](_0x1be46f['shift']());}catch(_0x4d7710){_0x1be46f['push'](_0x1be46f['shift']());}}}(_0x4a8b,-0x16dd8d+0x73*0x26ea+0x143f91));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import*as _0x257444 from'../utils/groups.js';import{getDefault,getConnection}from'../utils/connection.js';import{getConfig}from'../utils/config.js';export const name=_0x516eef(0x26e)+_0x516eef(0x23a)+'k';export const version=_0x516eef(0x21f);export const priority=-0x9*0x307+0x2e*0x2c+-0x6*-0x34e;export const commands=['sbl'];export const configKeys=[_0x516eef(0x2cc)+_0x516eef(0x296)+_0x516eef(0x285),_0x516eef(0x2cc)+'ADCAST_DEF'+'AULT_MAX_W'+_0x516eef(0x25f),_0x516eef(0x2cc)+_0x516eef(0x296)+_0x516eef(0x211)+'N',_0x516eef(0x2cc)+_0x516eef(0x281)];const FALLBACK_DEFAULTS={'DEDUPE_TTL_MS':(-0xf9+0x2111+-0x1ffa)*(0x5*-0x1b1+-0x275*-0x5+0x14),'DEFAULT_WARN_MESSAGE':_0x516eef(0x209)+_0x516eef(0x28a)+_0x516eef(0x294)+_0x516eef(0x207)+_0x516eef(0x21a)+_0x516eef(0x1f5)+_0x516eef(0x233)+_0x516eef(0x2ac)+':*\x20{remain'+'ing_warns}'+_0x516eef(0x25a)+_0x516eef(0x2ad),'DEFAULT_MAX_WARN':0x3,'DEFAULT_REASON':_0x516eef(0x291)+_0x516eef(0x20a)+_0x516eef(0x2c2)};let CONFIG={};try{CONFIG=typeof getConfig===_0x516eef(0x2b9)?getConfig()||{}:{};}catch(_0x2bdc2c){CONFIG={};}const DEFAULTS={'DEDUPE_TTL_MS':Number(CONFIG?.[_0x516eef(0x2cc)+_0x516eef(0x281)]?.[_0x516eef(0x1e4)+_0x516eef(0x2bf)]??CONFIG[_0x516eef(0x2cc)+'ADCAST_DED'+_0x516eef(0x2e4)]??FALLBACK_DEFAULTS['DEDUPE_TTL'+_0x516eef(0x2bf)])||FALLBACK_DEFAULTS[_0x516eef(0x1e4)+'_MS'],'DEFAULT_WARN_MESSAGE':typeof CONFIG[_0x516eef(0x2cc)+_0x516eef(0x296)+_0x516eef(0x285)]==='string'&&CONFIG['STATUS_BRO'+'ADCAST_DEF'+'AULT_WARN'][_0x516eef(0x234)]?CONFIG[_0x516eef(0x2cc)+_0x516eef(0x296)+_0x516eef(0x285)]:typeof CONFIG?.['STATUS_BRO'+_0x516eef(0x281)]?.[_0x516eef(0x1fe)+'RN']===_0x516eef(0x2a2)&&CONFIG['STATUS_BRO'+_0x516eef(0x281)][_0x516eef(0x1fe)+'RN'][_0x516eef(0x234)]?CONFIG[_0x516eef(0x2cc)+_0x516eef(0x281)][_0x516eef(0x1fe)+'RN']:FALLBACK_DEFAULTS['DEFAULT_WA'+_0x516eef(0x2cb)],'DEFAULT_MAX_WARN':Number(CONFIG['STATUS_BRO'+'ADCAST_DEF'+'AULT_MAX_W'+'ARN']??CONFIG?.['STATUS_BRO'+_0x516eef(0x281)]?.[_0x516eef(0x1ed)]??FALLBACK_DEFAULTS[_0x516eef(0x2c3)+_0x516eef(0x245)])||FALLBACK_DEFAULTS[_0x516eef(0x2c3)+_0x516eef(0x245)],'DEFAULT_REASON':typeof CONFIG[_0x516eef(0x2cc)+'ADCAST_DEF'+_0x516eef(0x211)+'N']==='string'&&CONFIG[_0x516eef(0x2cc)+'ADCAST_DEF'+_0x516eef(0x211)+'N'][_0x516eef(0x234)]?CONFIG['STATUS_BRO'+_0x516eef(0x296)+_0x516eef(0x211)+'N']:typeof CONFIG?.['STATUS_BRO'+_0x516eef(0x281)]?.[_0x516eef(0x2e0)+_0x516eef(0x264)]===_0x516eef(0x2a2)&&CONFIG['STATUS_BRO'+_0x516eef(0x281)]['DEFAULT_RE'+_0x516eef(0x264)][_0x516eef(0x234)]?CONFIG[_0x516eef(0x2cc)+_0x516eef(0x281)][_0x516eef(0x2e0)+_0x516eef(0x264)]:FALLBACK_DEFAULTS[_0x516eef(0x2e0)+_0x516eef(0x264)]};let botRef=null;const processedMessageKeys=new Map(),sleep=_0x5a34c0=>new Promise(_0x4311e0=>setTimeout(_0x4311e0,_0x5a34c0));function _0x1222(_0x2b4d5a,_0x2f1b9f){_0x2b4d5a=_0x2b4d5a-(-0x347*-0x7+0xe4*0x21+-0x869*0x6);const _0xe6f895=_0x4a8b();let _0x39564e=_0xe6f895[_0x2b4d5a];return _0x39564e;}function isStatusBroadcastMention(_0x3d8102){const _0x29c068=_0x516eef;if(!_0x3d8102||!_0x3d8102[_0x29c068(0x217)])return![];const _0x25cad2=_0x3d8102[_0x29c068(0x217)];return _0x25cad2[_0x29c068(0x27f)+_0x29c068(0x26c)+'ssage']||_0x25cad2[_0x29c068(0x2e2)+_0x29c068(0x2a0)]?.[_0x29c068(0x23e)]?.[_0x29c068(0x237)]?.['toLowerCas'+'e']()===_0x29c068(0x27a)+_0x29c068(0x232)||_0x25cad2[_0x29c068(0x2a3)+_0x29c068(0x2c1)]?.['quotedMess'+_0x29c068(0x2d8)]?.[_0x29c068(0x2e2)+'ssage']?.[_0x29c068(0x23e)]?.['remoteJid']?.[_0x29c068(0x292)+'e']()===_0x29c068(0x27a)+_0x29c068(0x232);}const TABLE_SETTINGS=_0x516eef(0x26e)+_0x516eef(0x293)+_0x516eef(0x204),TABLE_WARN_USERS=_0x516eef(0x26e)+_0x516eef(0x299)+'ns',TABLE_WARN_SETTINGS=_0x516eef(0x26e)+_0x516eef(0x299)+'n_settings';async function ensureTables(){const _0x37b09c=_0x516eef;try{await db[_0x37b09c(0x27d)](_0x37b09c(0x2a5)+_0x37b09c(0x1f2)+_0x37b09c(0x1f1)+TABLE_SETTINGS+(_0x37b09c(0x24f)+_0x37b09c(0x2bc)+_0x37b09c(0x279)+_0x37b09c(0x213)+_0x37b09c(0x2db)+_0x37b09c(0x1f3)+_0x37b09c(0x22e))),await db[_0x37b09c(0x27d)](_0x37b09c(0x2a5)+_0x37b09c(0x1f2)+'EXISTS\x20'+TABLE_WARN_USERS+(_0x37b09c(0x24f)+_0x37b09c(0x1f4)+_0x37b09c(0x261)+_0x37b09c(0x29a)+_0x37b09c(0x227)+_0x37b09c(0x206)+_0x37b09c(0x260)+'EFAULT\x200,\x20'+_0x37b09c(0x2a7)+_0x37b09c(0x2dd)+_0x37b09c(0x24b)+_0x37b09c(0x208))),await db[_0x37b09c(0x27d)](_0x37b09c(0x2a5)+_0x37b09c(0x1f2)+_0x37b09c(0x1f1)+TABLE_WARN_SETTINGS+('\x20(chat_jid'+_0x37b09c(0x2bc)+_0x37b09c(0x22d)+_0x37b09c(0x273)+'e\x20TEXT,\x20ma'+'x_warns\x20IN'+_0x37b09c(0x2b8)+_0x37b09c(0x2ca)+'TEGER);'));}catch(_0x1e0b82){error(_0x1e0b82,_0x37b09c(0x205)+_0x37b09c(0x1e3)+_0x37b09c(0x284));throw _0x1e0b82;}}async function getChatEnabled(_0x3f575c){const _0x58dc81=_0x516eef,_0x2321e1=await db[_0x58dc81(0x2c0)](_0x58dc81(0x203)+_0x58dc81(0x1e0)+TABLE_SETTINGS+(_0x58dc81(0x1ec)+_0x58dc81(0x25b)),[_0x3f575c]);return _0x2321e1?Number(_0x2321e1[_0x58dc81(0x2ba)])===-0x829+-0x5b5*0x1+0x35*0x43:![];}async function setChatEnabled(_0x5562a1,_0x24b7c3){const _0x52972c=_0x516eef;await db['run'](_0x52972c(0x250)+'O\x20'+TABLE_SETTINGS+(_0x52972c(0x24f)+_0x52972c(0x251)+_0x52972c(0x271)+_0x52972c(0x262)+_0x52972c(0x22c)+_0x52972c(0x2b6)+'T(chat_jid'+')\x20DO\x20UPDAT'+_0x52972c(0x22b)+_0x52972c(0x280)+_0x52972c(0x253)+_0x52972c(0x257)+'d_at\x20=\x20exc'+_0x52972c(0x297)+_0x52972c(0x2a9)),[_0x5562a1,_0x24b7c3?-0x1*-0x16a+-0x585*0x7+0x253a:0x1f*-0xf5+-0x9e+0x1e49,Math[_0x52972c(0x28e)](Date[_0x52972c(0x2ab)]()/(0x1158+-0x1bb*0x13+0x2c7*0x7))]);}async function getWarnSettings(_0xabaa1a){const _0x4ed89d=_0x516eef,_0x4fdb08=await db[_0x4ed89d(0x2c0)](_0x4ed89d(0x26d)+'n_message,'+_0x4ed89d(0x1ee)+_0x4ed89d(0x1fb)+TABLE_WARN_SETTINGS+('\x20WHERE\x20cha'+_0x4ed89d(0x25b)),[_0xabaa1a]),_0x3addb3=DEFAULTS[_0x4ed89d(0x1fe)+'RN_MESSAGE'],_0x2ead54=DEFAULTS[_0x4ed89d(0x2c3)+_0x4ed89d(0x245)];if(!_0x4fdb08)return{'warn_message':_0x3addb3,'max_warns':_0x2ead54};return{'warn_message':_0x4fdb08[_0x4ed89d(0x283)+'ge']&&_0x4fdb08[_0x4ed89d(0x283)+'ge'][_0x4ed89d(0x234)]?_0x4fdb08[_0x4ed89d(0x283)+'ge']:_0x3addb3,'max_warns':Number[_0x4ed89d(0x265)](Number(_0x4fdb08[_0x4ed89d(0x2a1)]))&&Number(_0x4fdb08[_0x4ed89d(0x2a1)])>-0x2375+0x8ec*0x2+0x119d?Number(_0x4fdb08[_0x4ed89d(0x2a1)]):_0x2ead54};}async function setWarnSettings(_0x22504a,_0x5bb7bd){const _0x466bbe=_0x516eef,_0x22ca11=await getWarnSettings(_0x22504a),_0x33d1c5='warn_messa'+'ge'in _0x5bb7bd?_0x5bb7bd[_0x466bbe(0x283)+'ge']:_0x22ca11[_0x466bbe(0x283)+'ge'],_0x5e65c2=_0x466bbe(0x2a1)in _0x5bb7bd?_0x5bb7bd[_0x466bbe(0x2a1)]:_0x22ca11['max_warns'];await db[_0x466bbe(0x2be)]('INSERT\x20INT'+'O\x20'+TABLE_WARN_SETTINGS+(_0x466bbe(0x24f)+_0x466bbe(0x2af)+'sage,\x20max_'+'warns,\x20upd'+'ated_at)\x20V'+_0x466bbe(0x25d)+_0x466bbe(0x21b)+_0x466bbe(0x2bd)+_0x466bbe(0x1eb)+'\x20DO\x20UPDATE'+'\x20SET\x20warn_'+_0x466bbe(0x29b)+_0x466bbe(0x2d6)+'n_message,'+_0x466bbe(0x1ee)+_0x466bbe(0x2df)+_0x466bbe(0x247)+_0x466bbe(0x271)+_0x466bbe(0x2b0)+_0x466bbe(0x2d7)+'t;'),[_0x22504a,_0x33d1c5,_0x5e65c2,Math[_0x466bbe(0x28e)](Date[_0x466bbe(0x2ab)]()/(-0x1f90+0xaa9*0x1+0x845*0x3))]);}async function getWarnCount(_0x32ab43,_0x3c0201){const _0x185d73=_0x516eef,_0x11786c=await db[_0x185d73(0x2c0)](_0x185d73(0x26d)+_0x185d73(0x298)+_0x185d73(0x1f8)+TABLE_WARN_USERS+(_0x185d73(0x1ec)+'t_jid\x20=\x20?\x20'+'AND\x20user_j'+_0x185d73(0x26a)),[_0x32ab43,_0x3c0201]);return _0x11786c?Number(_0x11786c[_0x185d73(0x206)]||0x1*-0xe2d+-0x1*-0x1bfa+-0x1*0xdcd):-0x11c4+-0x15*-0x1b6+0x4b*-0x3e;}async function setWarnCount(_0x29df51,_0x48be78,_0x371a59){const _0x57ed8c=_0x516eef;await db['run'](_0x57ed8c(0x250)+'O\x20'+TABLE_WARN_USERS+(_0x57ed8c(0x24f)+',\x20user_jid'+_0x57ed8c(0x258)+_0x57ed8c(0x28f)+_0x57ed8c(0x210)+_0x57ed8c(0x295)+_0x57ed8c(0x28d)+'d,\x20user_ji'+'d)\x20DO\x20UPDA'+_0x57ed8c(0x243)+_0x57ed8c(0x1e9)+_0x57ed8c(0x2dc)+_0x57ed8c(0x229)),[_0x29df51,_0x48be78,Number(_0x371a59||-0x2279+0x1*-0x12e9+0x3562)]);}async function sendNotice(_0x8552e3,_0xd189be,_0x15fe24=[]){const _0x992ee2=_0x516eef;if(!_0x8552e3||!botRef)return;try{const _0x50341c=botRef[_0x992ee2(0x255)]?.[_0x992ee2(0x2ce)+'e']||botRef[_0x992ee2(0x2ce)+'e'];await _0x50341c(_0x8552e3,{'text':_0xd189be,'mentions':Array[_0x992ee2(0x276)](_0x15fe24)?_0x15fe24:[]});}catch(_0x161484){warn(_0x992ee2(0x2aa)+_0x992ee2(0x29f)+_0x992ee2(0x242)+'\x20'+_0x8552e3+':\x20'+(_0x161484?.[_0x992ee2(0x217)]||_0x161484));}}async function kickUser(_0x112888,_0x5e6a2d){const _0x4f5b0d=_0x516eef;try{const _0x454e56=botRef?.[_0x4f5b0d(0x255)]||botRef;if(_0x454e56?.[_0x4f5b0d(0x26f)+_0x4f5b0d(0x2b7)+_0x4f5b0d(0x2de)])return await _0x454e56[_0x4f5b0d(0x26f)+_0x4f5b0d(0x2b7)+_0x4f5b0d(0x2de)](_0x112888,[_0x5e6a2d],'remove'),info(_0x4f5b0d(0x21c)+_0x4f5b0d(0x230)+_0x5e6a2d+'\x20from\x20'+_0x112888),!![];return![];}catch(_0x5d7315){return error(_0x5d7315,_0x4f5b0d(0x1df)+_0x4f5b0d(0x2ae)+'\x20'+_0x5e6a2d),![];}}async function issueAutoWarningFor(_0x2988ff){const _0x4bbe63=_0x516eef,_0x171dde=_0x2988ff['key']['remoteJid'],_0x126aa7=_0x2988ff[_0x4bbe63(0x23e)]['participan'+'t']||_0x2988ff['key']['remoteJid'];if(await isadmin(botRef,{'key':_0x2988ff[_0x4bbe63(0x23e)],'message':_0x2988ff[_0x4bbe63(0x217)]}))return;const {warn_message:_0x1f8894,max_warns:_0x524642}=await getWarnSettings(_0x171dde),_0x37b284=await getWarnCount(_0x171dde,_0x126aa7),_0xb703db=_0x37b284+(0x11*-0x1c6+-0x140a+-0x3*-0x10bb);await setWarnCount(_0x171dde,_0x126aa7,_0xb703db);if(_0xb703db>=_0x524642){await sendNotice(_0x171dde,_0x4bbe63(0x28c)+_0x4bbe63(0x231)+'@'+_0x126aa7['split']('@')[0x250+-0xc27+0xe5*0xb]+(_0x4bbe63(0x222)+_0x4bbe63(0x230))+_0x524642+(_0x4bbe63(0x235)+_0x4bbe63(0x21e)+_0x4bbe63(0x228)),[_0x126aa7]),await kickUser(_0x171dde,_0x126aa7),await setWarnCount(_0x171dde,_0x126aa7,0xd*0xe8+0x108b+-0x1c53);return;}const _0x4ed852=_0x524642-_0xb703db;let _0x131724=String(_0x1f8894)[_0x4bbe63(0x246)](_0x4bbe63(0x2a6),'@'+_0x126aa7[_0x4bbe63(0x2d9)]('@')[-0xef0+0x4a7*-0x2+0x183e])[_0x4bbe63(0x246)](_0x4bbe63(0x1fa)+'}',String(_0x524642))[_0x4bbe63(0x246)](_0x4bbe63(0x1f7)+_0x4bbe63(0x2e1),String(_0x4ed852))[_0x4bbe63(0x246)](_0x4bbe63(0x263),DEFAULTS[_0x4bbe63(0x2e0)+'ASON']);await sendNotice(_0x171dde,_0x131724,[_0x126aa7]),info(_0x4bbe63(0x225)+_0x4bbe63(0x230)+_0x126aa7+'\x20in\x20'+_0x171dde+'\x20('+_0xb703db+'/'+_0x524642+')');}async function deleteWithRetryMsg(_0x2b3590){const _0x32c55c=_0x516eef;for(let _0x58aca8=-0x2*0x949+-0x33*-0x8c+-0x2*0x4a9;_0x58aca8<-0xb1b+-0x1a8+0xcc5*0x1;_0x58aca8++){try{const _0x19f80f=botRef[_0x32c55c(0x255)]?.[_0x32c55c(0x2ce)+'e']||botRef['sendMessag'+'e'];return await _0x19f80f(_0x2b3590[_0x32c55c(0x23e)][_0x32c55c(0x237)],{'delete':_0x2b3590['key']}),!![];}catch(_0x110af9){if(_0x58aca8===0x1232*-0x1+0x8db*-0x4+-0x1acf*-0x2)await sleep(0x1*0x2ae+-0x1c9*-0x13+0xb*-0x33d);else warn(_0x32c55c(0x272)+'te\x20failed:'+'\x20'+(_0x110af9?.[_0x32c55c(0x217)]||_0x110af9));}}return![];}async function rawMessagesUpsertHandler({messages:_0x373dd8}){const _0xee3bfc=_0x516eef;for(const _0x412fdc of _0x373dd8){const _0x5d12ec=_0x412fdc[_0xee3bfc(0x23e)]?.[_0xee3bfc(0x237)];if(!_0x412fdc[_0xee3bfc(0x217)]||_0x412fdc[_0xee3bfc(0x23e)][_0xee3bfc(0x2cd)]||!_0x5d12ec||!_0x5d12ec[_0xee3bfc(0x2c4)](_0xee3bfc(0x24d)))continue;const _0x34e78e=_0x5d12ec+'::'+_0x412fdc[_0xee3bfc(0x23e)]['id'];if(processedMessageKeys[_0xee3bfc(0x2b4)](_0x34e78e))continue;processedMessageKeys['set'](_0x34e78e,setTimeout(()=>processedMessageKeys[_0xee3bfc(0x226)](_0x34e78e),DEFAULTS[_0xee3bfc(0x1e4)+'_MS']));const _0x1dd1be=await getChatEnabled(_0x5d12ec);if(!_0x1dd1be||await isadmin(botRef,{'key':_0x412fdc[_0xee3bfc(0x23e)],'message':_0x412fdc[_0xee3bfc(0x217)]}))continue;isStatusBroadcastMention(_0x412fdc)&&(await deleteWithRetryMsg(_0x412fdc)&&await issueAutoWarningFor(_0x412fdc));}}function _0x4a8b(){const _0x130b98=['EGER,\x20upda','excluded.w','Y\x20(chat_ji','ate','=excluded.','DEFAULT_RE','_warns}','protocolMe','ge\x20for\x20','UPE_TTL_MS','contextInf','[sbl]\x20Fail','bled\x20FROM\x20','vide\x20a\x20war','ode:\x20Group','reTables\x20f','DEDUPE_TTL','\x20group\x20onl','maxwarns','push','Please\x20@me','n_count\x20=\x20','o\x20any\x20grou','(chat_jid)','\x20WHERE\x20cha','MAX_WARN','\x20max_warns','TL:\x20','Your\x20defau','EXISTS\x20','LE\x20IF\x20NOT\x20','ted_at\x20INT','\x20TEXT\x20NOT\x20','max_warns}','caption','{remaining','OM\x20','includes','{max_warns','\x20FROM\x20','nup\x20unbind','ning\x20messa','DEFAULT_WA','pplying\x20co','off','l`\x20command','\x20via\x20`gp\x20<','SELECT\x20ena','tings','[sbl]\x20ensu','warn_count','r}\x0a*MAX\x20WA','d));','*âš ï¸WARN\x20MES','atus\x20broad','age\x20for\x20','n\x20found.\x20A','\x20for\x20in\x20','Unknown\x20gr','messages.u','\x20(?,\x20?,\x20?)','AULT_REASO','1876621DakCaW','nabled\x20INT','resetwarns','ned\x20up','LED**\x20for\x20','message','s\x20for\x20','67312FGovXC','RNINGS:*\x20{','?,\x20?,\x20?)\x20O','[sbl]\x20kick','\x20it\x20to\x20the','and\x20will\x20b','3.2.3','resolveNam','ialized.\x20M','\x20has\x20reach','13646790cYBiJY','Using\x20stab','[sbl]\x20warn','delete','NOT\x20NULL,\x20','e\x20removed.','arn_count;','indexOf','E\x20SET\x20enab','(?,\x20?,\x20?)\x20','ARY\x20KEY,\x20w','EGER);','jid','ed\x20','TðŸš¨*\x0a\x0aUser\x20','adcast','\x0a*REMAININ','length','\x20warnings\x20','oup\x20alias\x20','remoteJid','er\x20to\x20rese','lt\x20connect','adcast_loc','he\x20current','\x20end.','\x20user(s)\x20i','key','ck\x20for\x20','\x5cs*','show','\x20notice\x20to','TE\x20SET\x20war','ms.','X_WARN','replace','max_warns,','265dPFTkc','*Status\x20lo','ock\x20**ENAB','d,\x20user_ji','gp:','@g.us','.\x20Dedupe\x20T','\x20(chat_jid','INSERT\x20INT',',\x20enabled,','alias>`\x20or','uded.enabl','âœ…\x20Warn\x20mes','sock','imageMessa','ed,\x20update',',\x20warn_cou','resolved\x20t','\x0a*REASON:*','t_jid\x20=\x20?','âŒ\x20DISABLED','ALUES\x20(?,\x20','8835152yYiJZY','ARN','\x20INTEGER\x20D','NULL,\x20user','t)\x20VALUES\x20','{reason}','ASON','isFinite','âœ…\x20Max\x20warn','\x20by\x20adding','â„¹ï¸\x20Max\x20warn','findIndex','id\x20=\x20?','13442723tqntxI','sMentionMe','SELECT\x20war','status_bro','groupParti','In\x20PM,\x20`sb','\x20updated_a','[sbl]\x20dele','arn_messag','forEach','psert','isArray','a\x20group\x20al','BLED**\x20for','ARY\x20KEY,\x20e','status@bro','find','extendedTe','exec','slice','groupStatu','led\x20=\x20excl','ADCAST','map','warn_messa','ailed','AULT_WARN',':*\x0a','âœ…\x20ENABLED','s\x20require\x20','ias\x20or\x20JID','SAGEâš ï¸*\x0a\x0a*U','text','*ðŸš¨BAN\x20ALER','CT(chat_ji','floor','nt)\x20VALUES','4000782maplVg','Posting\x20st','toLowerCas','adcast_set','SER:*\x20{use','\x20ON\x20CONFLI','ADCAST_DEF','luded.upda','n_count\x20FR','adcast_war','_jid\x20TEXT\x20','message=ex','trim','s\x20in\x20','participan','ed\x20to\x20send','ssage','max_warns','string','messageCon','\x20connectio','CREATE\x20TAB','{user}','PRIMARY\x20KE','clear','ted_at;','[sbl]\x20fail','now','G\x20WARNINGS','\x20{reason}','ed\x20to\x20kick',',\x20warn_mes','t=excluded','*Warn\x20Mess','âŒ\x20Status\x20l','6ekkvgQ','has','Please\x20pro','ON\x20CONFLIC','cipantsUpd','TEGER,\x20upd','function','enabled','(gp:|gp)?\x5c','\x20TEXT\x20PRIM','N\x20CONFLICT','run','_MS','get','textInfo','casts.','DEFAULT_MA','endsWith','3567944rSldOK','sage\x20for\x20','(Opt-In).\x20','ld\x20not\x20be\x20','mentionedJ','ated_at\x20IN','RN_MESSAGE','STATUS_BRO','fromMe','sendMessag','or\x20JID:\x20`','xtMessage','set','warnmsg','No\x20default','-Specific\x20','t\x20warnings','cluded.war','.updated_a','age','split','\x20set\x20to\x20'];_0x4a8b=function(){return _0x130b98;};return _0x4a8b();}async function findSudoerJid(_0x6ae23c){const _0x132fd3=_0x516eef,{findings:_0x451107}=userJidFromCtx(_0x6ae23c),_0x10b8d6=await listSudo(),_0x2bc7e1=new Set(_0x10b8d6[_0x132fd3(0x282)](String));for(const _0xfa9851 of _0x451107){if(_0xfa9851?.['jid']){const _0x20055e=normalizeToJid(_0xfa9851[_0x132fd3(0x22f)]);if(_0x20055e&&_0x2bc7e1[_0x132fd3(0x2b4)](_0x20055e))return _0x20055e;if(_0x2bc7e1[_0x132fd3(0x2b4)](_0xfa9851['jid']))return _0xfa9851[_0x132fd3(0x22f)];}}return null;}async function getMessageText(_0x1b42c3){const _0x991e35=_0x516eef;if(!_0x1b42c3||!_0x1b42c3[_0x991e35(0x217)])return'';const _0x3b4627=_0x1b42c3['message'];return _0x3b4627['conversati'+'on']||_0x3b4627[_0x991e35(0x27c)+_0x991e35(0x2d0)]?.[_0x991e35(0x28b)]||_0x3b4627[_0x991e35(0x256)+'ge']?.[_0x991e35(0x1f6)]||_0x3b4627['videoMessa'+'ge']?.[_0x991e35(0x1f6)]||'';}function parseGpFromArgs(_0x129e4d){const _0x451362=_0x516eef,_0x276824=_0x129e4d[_0x451362(0x269)](_0x157365=>_0x157365[_0x451362(0x292)+'e']()===_0x451362(0x24c)||_0x157365[_0x451362(0x292)+'e']()==='gp');if(_0x276824!==-(0x1b3f*0x1+0x2492+-0x1fe8*0x2)&&_0x129e4d[_0x276824+(-0x43*-0x72+0x14e4+-0x32b9)])return _0x129e4d[_0x276824+(0x41*0x2b+-0x3*0x451+0x209)];const _0xdfab2d=_0x129e4d['find'](_0xd32e60=>_0xd32e60[_0x451362(0x1f9)](_0x451362(0x24d)));if(_0xdfab2d)return _0xdfab2d;if(_0x129e4d['length']>0x1*-0x14c3+-0x1f53+-0x3b*-0xe2){const _0x58711e=_0x129e4d[_0x129e4d[_0x451362(0x234)]-(-0x5*-0x30d+-0x9*-0x101+-0x1*0x1849)];if(!['on',_0x451362(0x200),'show',_0x451362(0x2d1),_0x451362(0x214),_0x451362(0x2d2),_0x451362(0x1e6)][_0x451362(0x1f9)](_0x58711e[_0x451362(0x292)+'e']()))return _0x58711e;}return null;}export async function onMessage(_0x3c8609,_0x209cdc){const _0x1fcf9b=_0x516eef;if(!_0x3c8609||!_0x3c8609['key']||!_0x209cdc||!_0x3c8609[_0x1fcf9b(0x23e)][_0x1fcf9b(0x237)])return;const _0x164d44=(_0x3c8609[_0x1fcf9b(0x28b)]||await getMessageText(_0x3c8609))[_0x1fcf9b(0x29c)]();if(!_0x3c8609['isCommand']||!_0x164d44)return;const [_0x54d7c4,..._0xc3c66c]=_0x164d44[_0x1fcf9b(0x2d9)](/\s+/),_0x1c1064=_0x54d7c4[_0x1fcf9b(0x292)+'e']()[_0x1fcf9b(0x246)]('/','');if(!commands[_0x1fcf9b(0x1f9)](_0x1c1064))return;const _0x26c7c0=_0x3c8609['key']['remoteJid']['endsWith'](_0x1fcf9b(0x24d)),_0x57f5f0=_0x3c8609[_0x1fcf9b(0x23e)][_0x1fcf9b(0x2cd)];let _0x21f3e6=![];_0x26c7c0?await isadmin(botRef,_0x3c8609)&&(_0x21f3e6=!![]):(_0x57f5f0||await isSudo(botRef,_0x3c8609))&&(_0x21f3e6=!![]);if(!_0x21f3e6)return;let _0x577b1e,_0x3c8af0=[];if(_0x26c7c0){_0x577b1e=_0x3c8609[_0x1fcf9b(0x23e)][_0x1fcf9b(0x237)];const _0x4192c5=(_0x3c8609['key'][_0x1fcf9b(0x29e)+'t']||_0x3c8609['key'][_0x1fcf9b(0x237)])['split']('@')[0x1068+0x12b*-0x1d+0x1177],_0x3d4d28=await getDefault(_0x4192c5);if(!_0x3d4d28||_0x3d4d28[_0x1fcf9b(0x234)]===-0x2654+0x1a22*0x1+0xe*0xdf)_0x3c8af0=[_0x3c8609[_0x1fcf9b(0x23e)][_0x1fcf9b(0x237)]],await sendNotice(_0x577b1e,_0x1fcf9b(0x2d3)+_0x1fcf9b(0x2a4)+_0x1fcf9b(0x20c)+_0x1fcf9b(0x1ff)+'mmand\x20to\x20t'+_0x1fcf9b(0x23b)+_0x1fcf9b(0x1e5)+'y.');else{for(const _0x3c4983 of Array[_0x1fcf9b(0x276)](_0x3d4d28)?_0x3d4d28:[_0x3d4d28]){const _0x7c6a4=await getConnection(_0x3c4983);if(_0x7c6a4)_0x3c8af0[_0x1fcf9b(0x1e7)](...Array['isArray'](_0x7c6a4)?_0x7c6a4:[_0x7c6a4]);}_0x3c8af0=[...new Set(_0x3c8af0)];if(_0x3c8af0[_0x1fcf9b(0x234)]===-0x42+0x115b*0x1+-0x1119*0x1)return sendNotice(_0x577b1e,_0x1fcf9b(0x1f0)+_0x1fcf9b(0x239)+'ion(s)\x20cou'+_0x1fcf9b(0x2c8)+_0x1fcf9b(0x259)+_0x1fcf9b(0x1ea)+'ps.');}}else{_0x577b1e=_0x57f5f0?getBotJid():await findSudoerJid(_0x3c8609);if(!_0x577b1e)return;const _0xbbb01d=parseGpFromArgs(_0xc3c66c);if(!_0xbbb01d)return sendNotice(_0x577b1e,_0x1fcf9b(0x270)+_0x1fcf9b(0x201)+_0x1fcf9b(0x288)+_0x1fcf9b(0x277)+_0x1fcf9b(0x289)+_0x1fcf9b(0x202)+_0x1fcf9b(0x252)+_0x1fcf9b(0x267)+_0x1fcf9b(0x21d)+_0x1fcf9b(0x23c));const _0xc8fccd=await _0x257444[_0x1fcf9b(0x220)+'e'](_0xbbb01d)||(_0xbbb01d['includes'](_0x1fcf9b(0x24d))?_0xbbb01d:null);if(!_0xc8fccd)return sendNotice(_0x577b1e,_0x1fcf9b(0x20e)+_0x1fcf9b(0x236)+_0x1fcf9b(0x2cf)+_0xbbb01d+'`');_0x3c8af0=[_0xc8fccd];}const _0x3da905=(_0xc3c66c[_0x1fcf9b(0x27b)](_0xb1877d=>['on','off',_0x1fcf9b(0x241)][_0x1fcf9b(0x1f9)](_0xb1877d[_0x1fcf9b(0x292)+'e']()))||_0x1fcf9b(0x241))[_0x1fcf9b(0x292)+'e'](),_0x216b4a=_0xc3c66c[_0x1fcf9b(0x27b)](_0x3620dd=>[_0x1fcf9b(0x2d2),'maxwarns',_0x1fcf9b(0x214)][_0x1fcf9b(0x1f9)](_0x3620dd[_0x1fcf9b(0x292)+'e']()));let _0x393c33='';for(const _0x10ca7f of _0x3c8af0){if(_0x216b4a){if(_0x216b4a===_0x1fcf9b(0x2d2)){if(_0xc3c66c[_0x1fcf9b(0x1f9)](_0x1fcf9b(0x2d1))){const _0x46bbc8=_0x164d44['toLowerCas'+'e']()[_0x1fcf9b(0x22a)](_0x1fcf9b(0x2d1))+(-0x159b+-0x20f*0x1+-0x7*-0x362);let _0x2207b9=_0x164d44[_0x1fcf9b(0x27e)](_0x46bbc8)[_0x1fcf9b(0x29c)]();const _0xff6f8c=parseGpFromArgs(_0xc3c66c);if(_0xff6f8c)_0x2207b9=_0x2207b9[_0x1fcf9b(0x246)](new RegExp(_0x1fcf9b(0x2bb)+'s*'+_0xff6f8c+_0x1fcf9b(0x240),'i'),'')[_0x1fcf9b(0x29c)]();if(!_0x2207b9){_0x393c33+=_0x1fcf9b(0x2b5)+_0x1fcf9b(0x1e1)+_0x1fcf9b(0x1fd)+_0x1fcf9b(0x2e3)+_0x10ca7f+'.\x0a';continue;}await setWarnSettings(_0x10ca7f,{'warn_message':_0x2207b9}),_0x393c33+=_0x1fcf9b(0x254)+_0x1fcf9b(0x2c6)+_0x10ca7f+'\x20updated.\x0a';}else{const {warn_message:_0x4190dc}=await getWarnSettings(_0x10ca7f);_0x393c33+=_0x1fcf9b(0x2b1)+_0x1fcf9b(0x20b)+_0x10ca7f+_0x1fcf9b(0x286)+_0x4190dc+'\x0a\x0a';}}else{if(_0x216b4a===_0x1fcf9b(0x1e6)){if(_0xc3c66c['includes'](_0x1fcf9b(0x2d1))){const _0x1704ee=parseInt(_0xc3c66c[_0xc3c66c[_0x1fcf9b(0x22a)](_0x1fcf9b(0x2d1))+(-0x155*0x1+-0x243b+0x2591)],0x1*-0xdd7+0x3a*0x6d+-0x27*0x47);if(isNaN(_0x1704ee)||_0x1704ee<-0x2*-0x4b9+0x7*-0xfd+-0x2*0x143){_0x393c33+='Invalid\x20nu'+'mber\x20for\x20m'+'ax\x20warning'+_0x1fcf9b(0x29d)+_0x10ca7f+'.\x0a';continue;}await setWarnSettings(_0x10ca7f,{'max_warns':_0x1704ee}),_0x393c33+=_0x1fcf9b(0x266)+'s\x20for\x20'+_0x10ca7f+_0x1fcf9b(0x2da)+_0x1704ee+'.\x0a';}else{const {max_warns:_0xe6402b}=await getWarnSettings(_0x10ca7f);_0x393c33+=_0x1fcf9b(0x268)+_0x1fcf9b(0x218)+_0x10ca7f+'\x20is\x20'+_0xe6402b+'.\x0a';}}else{if(_0x216b4a===_0x1fcf9b(0x214)){const _0x1391e2=_0x3c8609[_0x1fcf9b(0x217)]?.[_0x1fcf9b(0x27c)+_0x1fcf9b(0x2d0)]?.[_0x1fcf9b(0x2e5)+'o']?.[_0x1fcf9b(0x2c9)+'id']||[];if(!_0x1391e2[_0x1fcf9b(0x234)]){_0x393c33+=_0x1fcf9b(0x1e8)+'ntion\x20a\x20us'+_0x1fcf9b(0x238)+_0x1fcf9b(0x2d5)+_0x1fcf9b(0x20d)+_0x10ca7f+'.\x0a';continue;}for(const _0x60dc51 of _0x1391e2)await setWarnCount(_0x10ca7f,_0x60dc51,-0x6cf+-0x1dc2+-0x353*-0xb);_0x393c33+='âœ…\x20Warnings'+'\x20reset\x20for'+'\x20mentioned'+_0x1fcf9b(0x23d)+'n\x20'+_0x10ca7f+'.\x0a';}}}}else{if(_0x3da905==='on')await setChatEnabled(_0x10ca7f,!![]),_0x393c33+='âœ…\x20Status\x20l'+_0x1fcf9b(0x24a)+_0x1fcf9b(0x216)+_0x10ca7f+'\x0a';else{if(_0x3da905==='off')await setChatEnabled(_0x10ca7f,![]),_0x393c33+=_0x1fcf9b(0x2b2)+'ock\x20**DISA'+_0x1fcf9b(0x278)+'\x20'+_0x10ca7f+'\x0a';else{const _0x54f825=await getChatEnabled(_0x10ca7f);let _0x40786b=_0x54f825?_0x1fcf9b(0x287):_0x1fcf9b(0x25c);_0x393c33+=_0x1fcf9b(0x249)+_0x1fcf9b(0x23f)+_0x10ca7f+_0x1fcf9b(0x286)+_0x40786b+'\x0a\x0a';}}}}await sendNotice(_0x577b1e,_0x393c33[_0x1fcf9b(0x29c)]());}export async function initialize(_0x43a998){const _0x7e3f6c=_0x516eef;botRef=_0x43a998,await ensureTables(),_0x43a998['on'](_0x7e3f6c(0x20f)+_0x7e3f6c(0x275),rawMessagesUpsertHandler),info('[sbl]\x20init'+_0x7e3f6c(0x221)+_0x7e3f6c(0x1e2)+_0x7e3f6c(0x2d4)+_0x7e3f6c(0x2c7)+_0x7e3f6c(0x224)+'le\x20emitter'+_0x7e3f6c(0x24e)+_0x7e3f6c(0x1ef)+DEFAULTS['DEDUPE_TTL'+_0x7e3f6c(0x2bf)]+_0x7e3f6c(0x244));}export async function cleanup(){const _0x505fa6=_0x516eef;try{botRef&&typeof botRef['off']===_0x505fa6(0x2b9)&&botRef['off'](_0x505fa6(0x20f)+_0x505fa6(0x275),rawMessagesUpsertHandler);}catch(_0x574db4){warn('[sbl]\x20clea'+_0x505fa6(0x1fc)+'\x20error:\x20'+(_0x574db4?.['message']||_0x574db4));}processedMessageKeys[_0x505fa6(0x274)](_0x50befe=>clearTimeout(_0x50befe)),processedMessageKeys[_0x505fa6(0x2a8)](),botRef=null,info('[sbl]\x20clea'+_0x505fa6(0x215));}