const _0x4974cf=_0x102c;(function(_0x1a6558,_0x1aeaf9){const _0x309666=_0x102c,_0x21362c=_0x1a6558();while(!![]){try{const _0x45ea7d=parseInt(_0x309666(0x16d))/(-0x164a+-0x5*0x11f+0x1be6)*(-parseInt(_0x309666(0x1f1))/(-0x945+0xb*-0x189+0x1a2a))+parseInt(_0x309666(0x1b8))/(-0x1e50+-0x1e4f*0x1+0x3ca2)+parseInt(_0x309666(0x1bf))/(-0x1*0x425+-0x1*-0xeae+-0xa85)+-parseInt(_0x309666(0x215))/(0x35b+0x18e3+-0x1c39)+parseInt(_0x309666(0x166))/(0x14eb+0x7c4*0x1+-0x13f*0x17)*(-parseInt(_0x309666(0x181))/(-0x6*0x45f+0xea7*-0x2+0x1af*0x21))+-parseInt(_0x309666(0x172))/(-0x8*-0x195+-0x1809+0x7f*0x17)*(-parseInt(_0x309666(0x191))/(0xe7e+0x776+-0x15eb*0x1))+-parseInt(_0x309666(0x155))/(-0x1c29+-0x1*-0x39b+0x1898);if(_0x45ea7d===_0x1aeaf9)break;else _0x21362c['push'](_0x21362c['shift']());}catch(_0x4a2864){_0x21362c['push'](_0x21362c['shift']());}}}(_0x5de7,-0xe56e7+-0x1be*-0xeb6+-0x342b4*-0x1));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import*as _0xc7cbd9 from'../utils/groups.js';import{getDefault,getConnection}from'../utils/connection.js';import{getConfig}from'../utils/config.js';export const name='status_bro'+_0x4974cf(0x1c0)+'k';export const version=_0x4974cf(0x1d4)+'p-only';export const priority=-0x4cd*-0x2+-0x13db+0xabe;export const commands=[_0x4974cf(0x134)];export const configKeys=[_0x4974cf(0x214)+_0x4974cf(0x222)+_0x4974cf(0x1de),_0x4974cf(0x214)+_0x4974cf(0x222)+_0x4974cf(0x1df)+'ARN',_0x4974cf(0x214)+'ADCAST_DEF'+_0x4974cf(0x19a)+'N',_0x4974cf(0x214)+_0x4974cf(0x21e)];const FALLBACK_DEFAULTS={'DEDUPE_TTL_MS':(-0x3*-0x397+-0x2125+-0x2*-0xb3f)*(-0x108+-0x2710+0x400*0xb),'DEFAULT_WARN_MESSAGE':_0x4974cf(0x179)+_0x4974cf(0x199)+'SER:*\x20{use'+_0x4974cf(0x174)+_0x4974cf(0x1b0)+_0x4974cf(0x15f)+'\x0a*REMAININ'+_0x4974cf(0x1c9)+_0x4974cf(0x1b1)+'ing_warns}'+'\x0a*REASON:*'+_0x4974cf(0x187),'DEFAULT_MAX_WARN':0x3,'DEFAULT_REASON':'Posting\x20st'+'atus\x20broad'+_0x4974cf(0x19b)};let CONFIG={};try{CONFIG=typeof getConfig==='function'?getConfig()||{}:{};}catch(_0x16d264){warn(_0x4974cf(0x202)+_0x4974cf(0x1a6)+_0x4974cf(0x18a)+_0x4974cf(0x145)+_0x4974cf(0x17d)+'file\x20defau'+_0x4974cf(0x192)),CONFIG={};}const DEFAULTS={'DEDUPE_TTL_MS':Number(CONFIG?.[_0x4974cf(0x214)+_0x4974cf(0x21e)]?.[_0x4974cf(0x18c)+_0x4974cf(0x1db)]??CONFIG['STATUS_BRO'+'ADCAST_DED'+_0x4974cf(0x207)]??FALLBACK_DEFAULTS[_0x4974cf(0x18c)+'_MS'])||FALLBACK_DEFAULTS['DEDUPE_TTL'+_0x4974cf(0x1db)],'DEFAULT_WARN_MESSAGE':typeof CONFIG[_0x4974cf(0x214)+_0x4974cf(0x222)+_0x4974cf(0x1de)]===_0x4974cf(0x21a)&&CONFIG[_0x4974cf(0x214)+_0x4974cf(0x222)+_0x4974cf(0x1de)][_0x4974cf(0x201)]?CONFIG['STATUS_BRO'+'ADCAST_DEF'+_0x4974cf(0x1de)]:typeof CONFIG?.[_0x4974cf(0x214)+_0x4974cf(0x21e)]?.['DEFAULT_WA'+'RN']===_0x4974cf(0x21a)&&CONFIG[_0x4974cf(0x214)+_0x4974cf(0x21e)]['DEFAULT_WA'+'RN']['length']?CONFIG[_0x4974cf(0x214)+'ADCAST'][_0x4974cf(0x12e)+'RN']:FALLBACK_DEFAULTS[_0x4974cf(0x12e)+_0x4974cf(0x171)],'DEFAULT_MAX_WARN':Number(CONFIG['STATUS_BRO'+_0x4974cf(0x222)+_0x4974cf(0x1df)+_0x4974cf(0x142)]??CONFIG?.['STATUS_BRO'+_0x4974cf(0x21e)]?.[_0x4974cf(0x151)]??FALLBACK_DEFAULTS[_0x4974cf(0x198)+_0x4974cf(0x1f9)])||FALLBACK_DEFAULTS[_0x4974cf(0x198)+'X_WARN'],'DEFAULT_REASON':typeof CONFIG['STATUS_BRO'+_0x4974cf(0x222)+'AULT_REASO'+'N']==='string'&&CONFIG['STATUS_BRO'+_0x4974cf(0x222)+'AULT_REASO'+'N'][_0x4974cf(0x201)]?CONFIG[_0x4974cf(0x214)+_0x4974cf(0x222)+'AULT_REASO'+'N']:typeof CONFIG?.[_0x4974cf(0x214)+_0x4974cf(0x21e)]?.[_0x4974cf(0x17b)+'ASON']===_0x4974cf(0x21a)&&CONFIG[_0x4974cf(0x214)+_0x4974cf(0x21e)]['DEFAULT_RE'+'ASON']['length']?CONFIG[_0x4974cf(0x214)+'ADCAST'][_0x4974cf(0x17b)+_0x4974cf(0x16b)]:FALLBACK_DEFAULTS['DEFAULT_RE'+'ASON']};let botRef=null;const processedMessageKeys=new Map(),sleep=_0x2e6f2a=>new Promise(_0x45979f=>setTimeout(_0x45979f,_0x2e6f2a));function isStatusBroadcastMention(_0x571157){const _0x33e5d8=_0x4974cf;if(!_0x571157||!_0x571157[_0x33e5d8(0x13b)])return![];const _0x4b859a=_0x571157[_0x33e5d8(0x13b)];return _0x4b859a[_0x33e5d8(0x1b4)+'sMentionMe'+_0x33e5d8(0x178)]||_0x4b859a[_0x33e5d8(0x141)+_0x33e5d8(0x178)]?.[_0x33e5d8(0x139)]?.[_0x33e5d8(0x1b7)]?.[_0x33e5d8(0x130)+'e']()===_0x33e5d8(0x12b)+_0x33e5d8(0x184)||_0x4b859a['messageCon'+_0x33e5d8(0x153)]?.['quotedMess'+_0x33e5d8(0x1ab)]?.[_0x33e5d8(0x141)+_0x33e5d8(0x178)]?.[_0x33e5d8(0x139)]?.[_0x33e5d8(0x1b7)]?.[_0x33e5d8(0x130)+'e']()===_0x33e5d8(0x12b)+_0x33e5d8(0x184);}const TABLE_SETTINGS=_0x4974cf(0x138)+_0x4974cf(0x170)+'tings',TABLE_WARN_USERS=_0x4974cf(0x138)+_0x4974cf(0x1cd)+'ns',TABLE_WARN_SETTINGS=_0x4974cf(0x138)+'adcast_war'+_0x4974cf(0x149);async function ensureTables(){const _0x151614=_0x4974cf;try{await db[_0x151614(0x20e)](_0x151614(0x1fe)+'LE\x20IF\x20NOT\x20'+_0x151614(0x1d6)+TABLE_SETTINGS+('\x20(chat_jid'+_0x151614(0x152)+'ARY\x20KEY,\x20e'+_0x151614(0x1fa)+_0x151614(0x20a)+_0x151614(0x227)+_0x151614(0x16f))),await db[_0x151614(0x20e)](_0x151614(0x1fe)+'LE\x20IF\x20NOT\x20'+'EXISTS\x20'+TABLE_WARN_USERS+(_0x151614(0x1bc)+'\x20TEXT\x20NOT\x20'+_0x151614(0x21c)+_0x151614(0x183)+'NOT\x20NULL,\x20'+_0x151614(0x200)+_0x151614(0x137)+_0x151614(0x175)+'PRIMARY\x20KE'+_0x151614(0x173)+_0x151614(0x1a7)+'d));')),await db[_0x151614(0x20e)](_0x151614(0x1fe)+_0x151614(0x1da)+_0x151614(0x1d6)+TABLE_WARN_SETTINGS+(_0x151614(0x1bc)+_0x151614(0x152)+_0x151614(0x1a3)+_0x151614(0x1e6)+_0x151614(0x18f)+_0x151614(0x204)+'TEGER,\x20upd'+_0x151614(0x206)+_0x151614(0x14b)));}catch(_0x4d1a03){error(_0x4d1a03,_0x151614(0x15b)+_0x151614(0x13e)+_0x151614(0x1bd));throw _0x4d1a03;}}async function getChatEnabled(_0x3583ae){const _0x20e507=_0x4974cf,_0x108ac3=await db[_0x20e507(0x17e)](_0x20e507(0x147)+_0x20e507(0x164)+TABLE_SETTINGS+(_0x20e507(0x225)+_0x20e507(0x203)),[_0x3583ae]);return _0x108ac3?Number(_0x108ac3[_0x20e507(0x1ec)])===0x3*-0xe7+0x1*0x1272+0x35*-0x4c:![];}async function setChatEnabled(_0x2aacff,_0x13ba21){const _0x296456=_0x4974cf;await db[_0x296456(0x16c)]('INSERT\x20INT'+'O\x20'+TABLE_SETTINGS+('\x20(chat_jid'+',\x20enabled,'+_0x296456(0x1c6)+_0x296456(0x12f)+_0x296456(0x1a9)+_0x296456(0x209)+_0x296456(0x1b6)+_0x296456(0x1cf)+'E\x20SET\x20enab'+_0x296456(0x221)+_0x296456(0x210)+_0x296456(0x132)+_0x296456(0x1b2)+_0x296456(0x14d)+_0x296456(0x156)),[_0x2aacff,_0x13ba21?-0x1487+0x470+0x1018:0x1*0x201b+0x1*0x22ad+-0x42c8,Math[_0x296456(0x1e4)](Date[_0x296456(0x228)]()/(0xd*-0x17+0x3a4*-0x4+0x13a3))]);}function _0x5de7(){const _0x43387b=[',\x20user_jid','warn_count','length','[sbl]\x20getC','t_jid\x20=\x20?','x_warns\x20IN','\x20has\x20reach','ated_at\x20IN','UPE_TTL_MS','resolved\x20t','ON\x20CONFLIC','EGER,\x20upda','delete','ock\x20**ENAB','=excluded.','exec','\x20by\x20adding','uded.enabl','\x20connectio','[sbl]\x20dele','\x20user(s)\x20i','STATUS_BRO','629210boxaDA',':*\x0a','TðŸš¨*\x0a\x0aUser\x20','or\x20JID:\x20`','\x20max_warns','string',',\x20warn_cou','NULL,\x20user','remove','ADCAST','\x5cs*','âŒ\x20DISABLED','led\x20=\x20excl','ADCAST_DEF','cipantsUpd','max_warns,','\x20WHERE\x20cha','Your\x20defau','ted_at\x20INT','now','maxwarns','status@bro','te\x20failed:','[sbl]\x20kick','DEFAULT_WA','t)\x20VALUES\x20','toLowerCas','*Status\x20lo','ed,\x20update','TL:\x20','sbl','\x20for\x20in\x20','excluded.w','\x20INTEGER\x20D','status_bro','key','indexOf','message','n_count\x20FR','â„¹ï¸\x20Max\x20warn','reTables\x20f','\x20(?,\x20?,\x20?)','ated_at)\x20V','protocolMe','ARN','has','resetwarns','or,\x20procee','\x20reset\x20for','SELECT\x20ena','trim','n_settings','pplying\x20co','TEGER);','[sbl]\x20clea','luded.upda','isArray','set','lt\x20connect','MAX_WARN','\x20TEXT\x20PRIM','textInfo','\x20it\x20to\x20the','8462630YQNIpW','ted_at;','mentionedJ','ate','d)\x20DO\x20UPDA','s\x20in\x20','[sbl]\x20ensu','includes','(Opt-In).\x20','ntion\x20a\x20us','max_warns}','ialized.\x20M','\x20end.','?,\x20?,\x20?)\x20O','jid','bled\x20FROM\x20','split','8532dzMCNa','er\x20to\x20rese','off','@g.us','caption','ASON','run','2QaaCHZ','fromMe','EGER);','adcast_set','RN_MESSAGE','8wVtGbO','Y\x20(chat_ji','r}\x0a*MAX\x20WA','EFAULT\x200,\x20','ning\x20messa','SELECT\x20war','ssage','*âš ï¸WARN\x20MES','\x20DO\x20UPDATE','DEFAULT_RE','map','ding\x20with\x20','get','âŒ\x20Status\x20l','ps.','8610iJCiNV','ned\x20up','_jid\x20TEXT\x20','adcast','N\x20CONFLICT','ock\x20**DISA','\x20{reason}','(gp:|gp)?\x5c','BLED**\x20for','rew\x20an\x20err','No\x20default','DEDUPE_TTL','extendedTe','isCommand','e\x20TEXT,\x20ma','groupParti','12242583frwuWw','lts.','.\x20Dedupe\x20T','videoMessa',',\x20warn_mes','[sbl]\x20warn','CT(chat_ji','DEFAULT_MA','SAGEâš ï¸*\x0a\x0a*U','AULT_REASO','casts.','arn_count;','ALUES\x20(?,\x20','\x20mentioned','isAdmin','{user}','find','\x20error:\x20','ARY\x20KEY,\x20w','ed\x20','t=excluded','onfig()\x20th','d,\x20user_ji','findIndex','(?,\x20?,\x20?)\x20','TE\x20SET\x20war','age','clear','\x20in\x20','text','warn_messa','RNINGS:*\x20{',':*\x20{remain','d_at\x20=\x20exc','push','groupStatu','messages.u','T(chat_jid','remoteJid','4941231qzLqlx','resolveNam','(chat_jid)','âœ…\x20Warn\x20mes','\x20(chat_jid','ailed','-Specific\x20','5528392rGFHwe','adcast_loc','id\x20=\x20?','s\x20for\x20','sendMessag','AND\x20user_j','t\x20warnings','\x20updated_a','Unknown\x20gr','ed\x20to\x20kick','G\x20WARNINGS','alias>`\x20or','\x20group\x20onl','e\x20removed.','adcast_war','Invalid\x20nu',')\x20DO\x20UPDAT','max_warns','âœ…\x20Warnings','t_jid\x20=\x20?\x20','mmand\x20to\x20t','3.2.2-grou','vide\x20a\x20war','EXISTS\x20','ias\x20or\x20JID','psert','\x20from\x20','LE\x20IF\x20NOT\x20','_MS','OM\x20','isFinite','AULT_WARN','AULT_MAX_W','sock','s\x20require\x20','\x20ON\x20CONFLI','[sbl]\x20init','floor','endsWith','arn_messag','nup\x20unbind','_warns}','n_count\x20=\x20','.updated_a','Using\x20stab','enabled','INSERT\x20INT','show','warnmsg','âœ…\x20ENABLED','714728qEOBeo','forEach','replace','{max_warns','xtMessage','n_message,','warns,\x20upd','he\x20current','X_WARN','nabled\x20INT','{remaining','l`\x20command','sage\x20for\x20','CREATE\x20TAB'];_0x5de7=function(){return _0x43387b;};return _0x5de7();}async function getWarnSettings(_0x55e5d7){const _0xeb9fb7=_0x4974cf,_0x342978=await db['get'](_0xeb9fb7(0x177)+'n_message,'+_0xeb9fb7(0x219)+'\x20FROM\x20'+TABLE_WARN_SETTINGS+(_0xeb9fb7(0x225)+'t_jid\x20=\x20?'),[_0x55e5d7]),_0x53a59e=DEFAULTS[_0xeb9fb7(0x12e)+_0xeb9fb7(0x171)],_0xd528b6=DEFAULTS['DEFAULT_MA'+'X_WARN'];if(!_0x342978)return{'warn_message':_0x53a59e,'max_warns':_0xd528b6};return{'warn_message':_0x342978[_0xeb9fb7(0x1af)+'ge']&&_0x342978[_0xeb9fb7(0x1af)+'ge'][_0xeb9fb7(0x201)]?_0x342978[_0xeb9fb7(0x1af)+'ge']:_0x53a59e,'max_warns':Number[_0xeb9fb7(0x1dd)](Number(_0x342978['max_warns']))&&Number(_0x342978[_0xeb9fb7(0x1d0)])>0x236*-0xa+-0x1a0e+0x302a?Number(_0x342978[_0xeb9fb7(0x1d0)]):_0xd528b6};}async function setWarnSettings(_0x5059d4,_0x406282){const _0x489c97=_0x4974cf,_0x2040fa=await getWarnSettings(_0x5059d4),_0x315dd0='warn_messa'+'ge'in _0x406282?_0x406282[_0x489c97(0x1af)+'ge']:_0x2040fa[_0x489c97(0x1af)+'ge'],_0x197c88=_0x489c97(0x1d0)in _0x406282?_0x406282['max_warns']:_0x2040fa[_0x489c97(0x1d0)];await db['run'](_0x489c97(0x1ed)+'O\x20'+TABLE_WARN_SETTINGS+(_0x489c97(0x1bc)+_0x489c97(0x195)+'sage,\x20max_'+_0x489c97(0x1f7)+_0x489c97(0x140)+_0x489c97(0x19d)+_0x489c97(0x162)+_0x489c97(0x185)+_0x489c97(0x1ba)+_0x489c97(0x17a)+'\x20SET\x20warn_'+'message=ex'+'cluded.war'+_0x489c97(0x1f6)+_0x489c97(0x219)+_0x489c97(0x20d)+_0x489c97(0x224)+'\x20updated_a'+_0x489c97(0x1a5)+_0x489c97(0x1ea)+'t;'),[_0x5059d4,_0x315dd0,_0x197c88,Math[_0x489c97(0x1e4)](Date[_0x489c97(0x228)]()/(0x2*0x815+-0x18e1+0xc9f))]);}async function getWarnCount(_0x316740,_0x3e3ee4){const _0xdcf174=_0x4974cf,_0x572525=await db[_0xdcf174(0x17e)](_0xdcf174(0x177)+_0xdcf174(0x13c)+_0xdcf174(0x1dc)+TABLE_WARN_USERS+('\x20WHERE\x20cha'+_0xdcf174(0x1d2)+_0xdcf174(0x1c4)+_0xdcf174(0x1c1)),[_0x316740,_0x3e3ee4]);return _0x572525?Number(_0x572525[_0xdcf174(0x200)]||-0x3*-0x6d3+-0x12ca+0x1*-0x1af):0x19b4+-0x2537*0x1+0xb83;}async function setWarnCount(_0x4bece2,_0x562371,_0x46e54c){const _0x2bd8cb=_0x4974cf;await db[_0x2bd8cb(0x16c)](_0x2bd8cb(0x1ed)+'O\x20'+TABLE_WARN_USERS+(_0x2bd8cb(0x1bc)+_0x2bd8cb(0x1ff)+_0x2bd8cb(0x21b)+'nt)\x20VALUES'+_0x2bd8cb(0x13f)+_0x2bd8cb(0x1e2)+_0x2bd8cb(0x197)+_0x2bd8cb(0x1a7)+_0x2bd8cb(0x159)+_0x2bd8cb(0x1aa)+_0x2bd8cb(0x1e9)+_0x2bd8cb(0x136)+_0x2bd8cb(0x19c)),[_0x4bece2,_0x562371,Number(_0x46e54c||-0xd3f*0x1+0xc7*0x1+0xc78)]);}async function sendNotice(_0x44b1aa,_0x4f4886,_0x53ba1e=[]){const _0x1f24dd=_0x4974cf;if(!_0x44b1aa||!botRef)return;try{const _0x404167=botRef['sock']?.[_0x1f24dd(0x1c3)+'e']||botRef['sendMessag'+'e'];await _0x404167(_0x44b1aa,{'text':_0x4f4886,'mentions':Array[_0x1f24dd(0x14e)](_0x53ba1e)?_0x53ba1e:[]});}catch(_0x28e745){warn('[sbl]\x20fail'+'ed\x20to\x20send'+'\x20notice\x20to'+'\x20'+_0x44b1aa+':\x20'+(_0x28e745?.[_0x1f24dd(0x13b)]||_0x28e745));}}async function kickUser(_0x152f7f,_0x31d8bd){const _0x27708e=_0x4974cf;try{const _0x23be1e=botRef?.['sock']||botRef;if(_0x23be1e?.[_0x27708e(0x190)+_0x27708e(0x223)+_0x27708e(0x158)])return await _0x23be1e[_0x27708e(0x190)+_0x27708e(0x223)+_0x27708e(0x158)](_0x152f7f,[_0x31d8bd],_0x27708e(0x21d)),info(_0x27708e(0x12d)+_0x27708e(0x1a4)+_0x31d8bd+_0x27708e(0x1d9)+_0x152f7f),!![];return![];}catch(_0x2928e9){return error(_0x2928e9,'[sbl]\x20Fail'+_0x27708e(0x1c8)+'\x20'+_0x31d8bd),![];}}function _0x102c(_0x585f80,_0x50b79b){const _0x3b6883=_0x5de7();return _0x102c=function(_0x177422,_0x5e742a){_0x177422=_0x177422-(-0x42d*0x5+-0x337*0x1+0x35*0x7a);let _0xd7c6e1=_0x3b6883[_0x177422];return _0xd7c6e1;},_0x102c(_0x585f80,_0x50b79b);}async function issueAutoWarningFor(_0x10e847){const _0x243bf1=_0x4974cf,_0x52f752=_0x10e847[_0x243bf1(0x139)][_0x243bf1(0x1b7)],_0x4b6add=_0x10e847[_0x243bf1(0x139)]['participan'+'t']||_0x10e847['key'][_0x243bf1(0x1b7)];if(await isadmin(botRef,{'key':_0x10e847['key'],'message':_0x10e847[_0x243bf1(0x13b)]}))return;const {warn_message:_0x249f83,max_warns:_0x3f947d}=await getWarnSettings(_0x52f752),_0x539644=await getWarnCount(_0x52f752,_0x4b6add),_0x57393c=_0x539644+(-0x47+0x243a+0x1*-0x23f2);await setWarnCount(_0x52f752,_0x4b6add,_0x57393c);if(_0x57393c>=_0x3f947d){await sendNotice(_0x52f752,'*ðŸš¨BAN\x20ALER'+_0x243bf1(0x217)+'@'+_0x4b6add[_0x243bf1(0x165)]('@')[0x1292+-0xda*-0x26+-0x32ee]+(_0x243bf1(0x205)+_0x243bf1(0x1a4))+_0x3f947d+('\x20warnings\x20'+'and\x20will\x20b'+_0x243bf1(0x1cc)),[_0x4b6add]),await kickUser(_0x52f752,_0x4b6add),await setWarnCount(_0x52f752,_0x4b6add,-0x16*0x27+0x1810+-0xf1*0x16);return;}const _0x48625e=_0x3f947d-_0x57393c;let _0x4c326b=String(_0x249f83)[_0x243bf1(0x1f3)](_0x243bf1(0x1a0),'@'+_0x4b6add[_0x243bf1(0x165)]('@')[0x22*0xc2+-0x116*-0xa+-0x24a0])[_0x243bf1(0x1f3)](_0x243bf1(0x1f4)+'}',String(_0x3f947d))[_0x243bf1(0x1f3)](_0x243bf1(0x1fb)+_0x243bf1(0x1e8),String(_0x48625e))[_0x243bf1(0x1f3)]('{reason}',DEFAULTS[_0x243bf1(0x17b)+_0x243bf1(0x16b)]);await sendNotice(_0x52f752,_0x4c326b,[_0x4b6add]),info(_0x243bf1(0x196)+_0x243bf1(0x1a4)+_0x4b6add+_0x243bf1(0x1ad)+_0x52f752+'\x20('+_0x57393c+'/'+_0x3f947d+')');}async function deleteWithRetryMsg(_0x34fd2f){const _0x35cd67=_0x4974cf;for(let _0x8aa0b7=0x1b90+-0x1da+-0x2*0xcdb;_0x8aa0b7<-0x9d7+0x4f*-0x2f+-0x6*-0x40f;_0x8aa0b7++){try{const _0x4e84b2=botRef[_0x35cd67(0x1e0)]?.[_0x35cd67(0x1c3)+'e']||botRef[_0x35cd67(0x1c3)+'e'];return await _0x4e84b2(_0x34fd2f[_0x35cd67(0x139)][_0x35cd67(0x1b7)],{'delete':_0x34fd2f[_0x35cd67(0x139)]}),!![];}catch(_0x22c414){if(_0x8aa0b7===-0x6f5+-0x107*-0x25+-0x1f0e)await sleep(-0x139*-0x15+0x1f10+-0x37c3);else warn(_0x35cd67(0x212)+_0x35cd67(0x12c)+'\x20'+(_0x22c414?.[_0x35cd67(0x13b)]||_0x22c414));}}return![];}async function rawMessagesUpsertHandler({messages:_0x5e541f}){const _0x24a6f3=_0x4974cf;for(const _0x3307ae of _0x5e541f){const _0x487c1e=_0x3307ae[_0x24a6f3(0x139)]?.[_0x24a6f3(0x1b7)];if(!_0x3307ae[_0x24a6f3(0x13b)]||_0x3307ae['key']['fromMe']||!_0x487c1e||!_0x487c1e[_0x24a6f3(0x1e5)](_0x24a6f3(0x169)))continue;const _0x919256=_0x487c1e+'::'+_0x3307ae['key']['id'];if(processedMessageKeys[_0x24a6f3(0x143)](_0x919256))continue;processedMessageKeys[_0x24a6f3(0x14f)](_0x919256,setTimeout(()=>processedMessageKeys[_0x24a6f3(0x20b)](_0x919256),DEFAULTS[_0x24a6f3(0x18c)+_0x24a6f3(0x1db)]));const _0x40ecfe=await getChatEnabled(_0x487c1e);if(!_0x40ecfe||await isadmin(botRef,{'key':_0x3307ae[_0x24a6f3(0x139)],'message':_0x3307ae[_0x24a6f3(0x13b)]}))continue;isStatusBroadcastMention(_0x3307ae)&&(await deleteWithRetryMsg(_0x3307ae)&&await issueAutoWarningFor(_0x3307ae));}}async function findSudoerJid(_0x2baab9){const _0x13e9f=_0x4974cf,{findings:_0x23ef35}=userJidFromCtx(_0x2baab9),_0x40b7f3=await listSudo(),_0xd82252=new Set(_0x40b7f3[_0x13e9f(0x17c)](String));for(const _0x5552d1 of _0x23ef35){if(_0x5552d1?.[_0x13e9f(0x163)]){const _0x292936=normalizeToJid(_0x5552d1[_0x13e9f(0x163)]);if(_0x292936&&_0xd82252[_0x13e9f(0x143)](_0x292936))return _0x292936;if(_0xd82252[_0x13e9f(0x143)](_0x5552d1[_0x13e9f(0x163)]))return _0x5552d1[_0x13e9f(0x163)];}}return null;}async function getMessageText(_0x6edbee){const _0x3b8980=_0x4974cf;if(!_0x6edbee||!_0x6edbee['message'])return'';const _0x40625b=_0x6edbee[_0x3b8980(0x13b)];return _0x40625b['conversati'+'on']||_0x40625b[_0x3b8980(0x18d)+'xtMessage']?.['text']||_0x40625b['imageMessa'+'ge']?.[_0x3b8980(0x16a)]||_0x40625b[_0x3b8980(0x194)+'ge']?.[_0x3b8980(0x16a)]||'';}function parseGpFromArgs(_0x16b8ef){const _0xc5ba67=_0x4974cf,_0x381eb1=_0x16b8ef[_0xc5ba67(0x1a8)](_0x1aef45=>_0x1aef45[_0xc5ba67(0x130)+'e']()==='gp:'||_0x1aef45['toLowerCas'+'e']()==='gp');if(_0x381eb1!==-(-0x13d9*0x1+0x194c+-0x572)&&_0x16b8ef[_0x381eb1+(0x92d+0x1b*-0x6d+0x253)])return _0x16b8ef[_0x381eb1+(-0x2*0x22f+-0x19f7+0x1*0x1e56)];const _0x2be341=_0x16b8ef[_0xc5ba67(0x1a1)](_0x363403=>_0x363403['includes'](_0xc5ba67(0x169)));if(_0x2be341)return _0x2be341;if(_0x16b8ef[_0xc5ba67(0x201)]>-0x1ba2+-0x39e*-0x9+0x1*-0x4ec){const _0x8af662=_0x16b8ef[_0x16b8ef[_0xc5ba67(0x201)]-(0x52*0x2e+0x26d9+-0x12*0x2fa)];if(!['on',_0xc5ba67(0x168),_0xc5ba67(0x1ee),'set',_0xc5ba67(0x144),_0xc5ba67(0x1ef),'maxwarns'][_0xc5ba67(0x15c)](_0x8af662['toLowerCas'+'e']()))return _0x8af662;}return null;}export async function onMessage(_0x13613d,_0x167569){const _0x1b7644=_0x4974cf;if(!_0x13613d||!_0x13613d[_0x1b7644(0x139)]||!_0x167569||!_0x13613d[_0x1b7644(0x139)][_0x1b7644(0x1b7)])return;const _0x40df0c=(_0x13613d[_0x1b7644(0x1ae)]||await getMessageText(_0x13613d))[_0x1b7644(0x148)]();if(!_0x13613d[_0x1b7644(0x18e)]||!_0x40df0c)return;const [_0x399b42,..._0x17d0ff]=_0x40df0c['split'](/\s+/),_0x4df76c=_0x399b42['toLowerCas'+'e']()[_0x1b7644(0x1f3)]('/','');if(!commands[_0x1b7644(0x15c)](_0x4df76c))return;const _0x4b7545=_0x13613d[_0x1b7644(0x139)]['remoteJid'][_0x1b7644(0x1e5)](_0x1b7644(0x169)),_0x5b1179=_0x13613d[_0x1b7644(0x139)][_0x1b7644(0x16e)];let _0x40a051=![];_0x4b7545?_0x167569[_0x1b7644(0x19f)]&&(_0x40a051=!![]):(_0x5b1179||await isSudo(botRef,_0x13613d))&&(_0x40a051=!![]);if(!_0x40a051)return;let _0x3b7135,_0x464536=[];if(_0x4b7545){_0x3b7135=_0x13613d['key'][_0x1b7644(0x1b7)];const _0x1c10ae=(_0x13613d[_0x1b7644(0x139)]['participan'+'t']||_0x13613d[_0x1b7644(0x139)][_0x1b7644(0x1b7)])[_0x1b7644(0x165)]('@')[0x859+-0x595*-0x1+-0xdee],_0x4be7e8=await getDefault(_0x1c10ae);if(!_0x4be7e8||_0x4be7e8[_0x1b7644(0x201)]===-0x4*0x95c+0xf19+0x1657)_0x464536=[_0x13613d[_0x1b7644(0x139)]['remoteJid']],await sendNotice(_0x3b7135,_0x1b7644(0x18b)+_0x1b7644(0x211)+'n\x20found.\x20A'+_0x1b7644(0x14a)+_0x1b7644(0x1d3)+_0x1b7644(0x1f8)+_0x1b7644(0x1cb)+'y.');else{for(const _0x8dfa60 of Array[_0x1b7644(0x14e)](_0x4be7e8)?_0x4be7e8:[_0x4be7e8]){const _0x44f1bb=await getConnection(_0x8dfa60);if(_0x44f1bb)_0x464536[_0x1b7644(0x1b3)](...Array['isArray'](_0x44f1bb)?_0x44f1bb:[_0x44f1bb]);}_0x464536=[...new Set(_0x464536)];if(_0x464536[_0x1b7644(0x201)]===-0x1bce+0x1843*0x1+0x38b)return sendNotice(_0x3b7135,_0x1b7644(0x226)+_0x1b7644(0x150)+'ion(s)\x20cou'+'ld\x20not\x20be\x20'+_0x1b7644(0x208)+'o\x20any\x20grou'+_0x1b7644(0x180));}}else{_0x3b7135=_0x5b1179?getBotJid():await findSudoerJid(_0x13613d);if(!_0x3b7135)return;const _0x2d55b7=parseGpFromArgs(_0x17d0ff);if(!_0x2d55b7)return sendNotice(_0x3b7135,'In\x20PM,\x20`sb'+_0x1b7644(0x1fc)+_0x1b7644(0x1e1)+'a\x20group\x20al'+_0x1b7644(0x1d7)+'\x20via\x20`gp\x20<'+_0x1b7644(0x1ca)+_0x1b7644(0x20f)+_0x1b7644(0x154)+_0x1b7644(0x161));const _0x23c343=await _0xc7cbd9[_0x1b7644(0x1b9)+'e'](_0x2d55b7)||(_0x2d55b7[_0x1b7644(0x15c)](_0x1b7644(0x169))?_0x2d55b7:null);if(!_0x23c343)return sendNotice(_0x3b7135,_0x1b7644(0x1c7)+'oup\x20alias\x20'+_0x1b7644(0x218)+_0x2d55b7+'`');_0x464536=[_0x23c343];}const _0x3aeb30=(_0x17d0ff[_0x1b7644(0x1a1)](_0xf909b8=>['on',_0x1b7644(0x168),_0x1b7644(0x1ee)][_0x1b7644(0x15c)](_0xf909b8[_0x1b7644(0x130)+'e']()))||'show')[_0x1b7644(0x130)+'e'](),_0x30615e=_0x17d0ff[_0x1b7644(0x1a1)](_0x4e7f98=>[_0x1b7644(0x1ef),_0x1b7644(0x12a),_0x1b7644(0x144)]['includes'](_0x4e7f98['toLowerCas'+'e']()));let _0x335e71='';for(const _0x4a6c94 of _0x464536){if(_0x30615e){if(_0x30615e===_0x1b7644(0x1ef)){if(_0x17d0ff['includes'](_0x1b7644(0x14f))){const _0x2a68a0=_0x40df0c[_0x1b7644(0x130)+'e']()[_0x1b7644(0x13a)](_0x1b7644(0x14f))+(-0x4*-0x2b7+0x215f+0xebd*-0x3);let _0x1b6c21=_0x40df0c['slice'](_0x2a68a0)[_0x1b7644(0x148)]();const _0x4b313e=parseGpFromArgs(_0x17d0ff);if(_0x4b313e)_0x1b6c21=_0x1b6c21[_0x1b7644(0x1f3)](new RegExp(_0x1b7644(0x188)+'s*'+_0x4b313e+_0x1b7644(0x21f),'i'),'')[_0x1b7644(0x148)]();if(!_0x1b6c21){_0x335e71+='Please\x20pro'+_0x1b7644(0x1d5)+_0x1b7644(0x176)+'ge\x20for\x20'+_0x4a6c94+'.\x0a';continue;}await setWarnSettings(_0x4a6c94,{'warn_message':_0x1b6c21}),_0x335e71+=_0x1b7644(0x1bb)+_0x1b7644(0x1fd)+_0x4a6c94+'\x20updated.\x0a';}else{const {warn_message:_0x1a64df}=await getWarnSettings(_0x4a6c94);_0x335e71+='*Warn\x20Mess'+'age\x20for\x20'+_0x4a6c94+_0x1b7644(0x216)+_0x1a64df+'\x0a\x0a';}}else{if(_0x30615e==='maxwarns'){if(_0x17d0ff[_0x1b7644(0x15c)](_0x1b7644(0x14f))){const _0x15fa76=parseInt(_0x17d0ff[_0x17d0ff[_0x1b7644(0x13a)]('set')+(-0x2298+0x1140+-0x1159*-0x1)],-0x1*-0x727+0x25d5+-0x2cf2*0x1);if(isNaN(_0x15fa76)||_0x15fa76<0x108f*-0x2+-0x1*0x217b+-0xa*-0x6a9){_0x335e71+=_0x1b7644(0x1ce)+'mber\x20for\x20m'+'ax\x20warning'+_0x1b7644(0x15a)+_0x4a6c94+'.\x0a';continue;}await setWarnSettings(_0x4a6c94,{'max_warns':_0x15fa76}),_0x335e71+='âœ…\x20Max\x20warn'+_0x1b7644(0x1c2)+_0x4a6c94+'\x20set\x20to\x20'+_0x15fa76+'.\x0a';}else{const {max_warns:_0xae85c9}=await getWarnSettings(_0x4a6c94);_0x335e71+=_0x1b7644(0x13d)+_0x1b7644(0x1c2)+_0x4a6c94+'\x20is\x20'+_0xae85c9+'.\x0a';}}else{if(_0x30615e===_0x1b7644(0x144)){const _0x2ece6a=_0x13613d[_0x1b7644(0x13b)]?.[_0x1b7644(0x18d)+_0x1b7644(0x1f5)]?.['contextInf'+'o']?.[_0x1b7644(0x157)+'id']||[];if(!_0x2ece6a['length']){_0x335e71+='Please\x20@me'+_0x1b7644(0x15e)+_0x1b7644(0x167)+_0x1b7644(0x1c5)+_0x1b7644(0x135)+_0x4a6c94+'.\x0a';continue;}for(const _0x34c8e5 of _0x2ece6a)await setWarnCount(_0x4a6c94,_0x34c8e5,0x243*0xd+-0x13*0x5c+-0x1693);_0x335e71+=_0x1b7644(0x1d1)+_0x1b7644(0x146)+_0x1b7644(0x19e)+_0x1b7644(0x213)+'n\x20'+_0x4a6c94+'.\x0a';}}}}else{if(_0x3aeb30==='on')await setChatEnabled(_0x4a6c94,!![]),_0x335e71+='âœ…\x20Status\x20l'+_0x1b7644(0x20c)+'LED**\x20for\x20'+_0x4a6c94+'\x0a';else{if(_0x3aeb30===_0x1b7644(0x168))await setChatEnabled(_0x4a6c94,![]),_0x335e71+=_0x1b7644(0x17f)+_0x1b7644(0x186)+_0x1b7644(0x189)+'\x20'+_0x4a6c94+'\x0a';else{const _0x363fc1=await getChatEnabled(_0x4a6c94);let _0xf57c9e=_0x363fc1?_0x1b7644(0x1f0):_0x1b7644(0x220);_0x335e71+=_0x1b7644(0x131)+'ck\x20for\x20'+_0x4a6c94+_0x1b7644(0x216)+_0xf57c9e+'\x0a\x0a';}}}}await sendNotice(_0x3b7135,_0x335e71[_0x1b7644(0x148)]());}export async function initialize(_0x528978){const _0x40a70a=_0x4974cf;botRef=_0x528978,await ensureTables(),_0x528978['on'](_0x40a70a(0x1b5)+_0x40a70a(0x1d8),rawMessagesUpsertHandler),info(_0x40a70a(0x1e3)+_0x40a70a(0x160)+'ode:\x20Group'+_0x40a70a(0x1be)+_0x40a70a(0x15d)+_0x40a70a(0x1eb)+'le\x20emitter'+_0x40a70a(0x193)+_0x40a70a(0x133)+DEFAULTS[_0x40a70a(0x18c)+_0x40a70a(0x1db)]+'ms.');}export async function cleanup(){const _0x338d2a=_0x4974cf;try{botRef&&typeof botRef[_0x338d2a(0x168)]==='function'&&botRef[_0x338d2a(0x168)](_0x338d2a(0x1b5)+_0x338d2a(0x1d8),rawMessagesUpsertHandler);}catch(_0x1ce575){warn('[sbl]\x20clea'+_0x338d2a(0x1e7)+_0x338d2a(0x1a2)+(_0x1ce575?.['message']||_0x1ce575));}processedMessageKeys[_0x338d2a(0x1f2)](_0x31b895=>clearTimeout(_0x31b895)),processedMessageKeys[_0x338d2a(0x1ac)](),botRef=null,info(_0x338d2a(0x14c)+_0x338d2a(0x182));}