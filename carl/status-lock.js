const _0x379e7c=_0x17b1;(function(_0x3d687f,_0x24ad06){const _0x1f711d=_0x17b1,_0x514fe2=_0x3d687f();while(!![]){try{const _0x510509=parseInt(_0x1f711d(0xac))/(0x28*0xb+0x24fe+-0x26b5)+-parseInt(_0x1f711d(0x140))/(-0x10ff+0x9*-0x3a4+-0x3*-0x1097)+parseInt(_0x1f711d(0x10c))/(0x73*0x1f+0x1f39+-0x2d23)+-parseInt(_0x1f711d(0x152))/(0x6bb*0x2+0x2690+-0x3402)*(parseInt(_0x1f711d(0xaa))/(0x618+0x5bf+-0xbd2*0x1))+parseInt(_0x1f711d(0xed))/(0x861*-0x2+0x2*0x10f3+-0x111e)+-parseInt(_0x1f711d(0xb1))/(0xea7+-0xe5d+-0x43)*(-parseInt(_0x1f711d(0x13e))/(-0x1899+-0x52c*-0x3+-0x1*-0x91d))+parseInt(_0x1f711d(0x168))/(-0x1f98+0x2*0xf7f+0xa3)*(-parseInt(_0x1f711d(0x175))/(-0x1*0x187a+-0x21f6+-0x3e6*-0xf));if(_0x510509===_0x24ad06)break;else _0x514fe2['push'](_0x514fe2['shift']());}catch(_0x104533){_0x514fe2['push'](_0x514fe2['shift']());}}}(_0x4e67,-0x830dc+-0x3a6e4*0x2+-0x1*-0x14ff03));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import*as _0x1847c8 from'../utils/groups.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getConfig}from'../utils/config.js';export const name='status_bro'+_0x379e7c(0x15b)+'k';export const version=_0x379e7c(0x156)+_0x379e7c(0xce);export const priority=-0x36d*0x5+0x1f6+0x14e*0xc;export const commands=[_0x379e7c(0x12c)];export const configKeys=[_0x379e7c(0xc3)+'ADCAST_DEF'+_0x379e7c(0x144),_0x379e7c(0xc3)+'ADCAST_DEF'+'AULT_MAX_W'+'ARN',_0x379e7c(0xc3)+_0x379e7c(0x16e)+_0x379e7c(0xdf)+'N','STATUS_BRO'+_0x379e7c(0x10b)];function _0x17b1(_0x4df219,_0x5d99eb){const _0x5bc669=_0x4e67();return _0x17b1=function(_0x24307c,_0x369696){_0x24307c=_0x24307c-(-0xe85+-0x1175+0x207f);let _0x1ac830=_0x5bc669[_0x24307c];return _0x1ac830;},_0x17b1(_0x4df219,_0x5d99eb);}const FALLBACK_DEFAULTS={'DEDUPE_TTL_MS':(0x1630*-0x1+0x8*0x7f+0x1256)*(-0x13*0x136+0xe83+0xc67),'DEFAULT_WARN_MESSAGE':_0x379e7c(0x8b)+_0x379e7c(0x9b)+'SER:*\x20{use'+'r}\x0a*MAX\x20WA'+_0x379e7c(0x13f)+_0x379e7c(0x112)+_0x379e7c(0x14f)+_0x379e7c(0x97)+_0x379e7c(0x161)+_0x379e7c(0x141)+_0x379e7c(0xc6)+_0x379e7c(0x10a),'DEFAULT_MAX_WARN':0x3,'DEFAULT_REASON':'Posting\x20st'+'atus\x20broad'+'casts.'};let CONFIG={};try{CONFIG=typeof getConfig==='function'?getConfig()||{}:{};}catch(_0x5293f3){warn('[sbl]\x20getC'+'onfig()\x20th'+_0x379e7c(0xcd)+_0x379e7c(0x14e)+'ding\x20with\x20'+_0x379e7c(0x149)+_0x379e7c(0xbd)),CONFIG={};}const DEFAULTS={'DEDUPE_TTL_MS':Number(CONFIG?.[_0x379e7c(0xc3)+_0x379e7c(0x10b)]?.[_0x379e7c(0xba)+_0x379e7c(0x16a)]??CONFIG['STATUS_BRO'+'ADCAST_DED'+_0x379e7c(0x104)]??FALLBACK_DEFAULTS[_0x379e7c(0xba)+_0x379e7c(0x16a)])||FALLBACK_DEFAULTS[_0x379e7c(0xba)+_0x379e7c(0x16a)],'DEFAULT_WARN_MESSAGE':typeof CONFIG[_0x379e7c(0xc3)+_0x379e7c(0x16e)+_0x379e7c(0x144)]===_0x379e7c(0x88)&&CONFIG[_0x379e7c(0xc3)+_0x379e7c(0x16e)+_0x379e7c(0x144)][_0x379e7c(0x8a)]?CONFIG['STATUS_BRO'+_0x379e7c(0x16e)+_0x379e7c(0x144)]:typeof CONFIG?.['STATUS_BRO'+_0x379e7c(0x10b)]?.[_0x379e7c(0xb2)+'RN']===_0x379e7c(0x88)&&CONFIG[_0x379e7c(0xc3)+_0x379e7c(0x10b)][_0x379e7c(0xb2)+'RN'][_0x379e7c(0x8a)]?CONFIG[_0x379e7c(0xc3)+_0x379e7c(0x10b)][_0x379e7c(0xb2)+'RN']:FALLBACK_DEFAULTS['DEFAULT_WA'+_0x379e7c(0x107)],'DEFAULT_MAX_WARN':Number(CONFIG[_0x379e7c(0xc3)+_0x379e7c(0x16e)+_0x379e7c(0x155)+_0x379e7c(0x126)]??CONFIG?.[_0x379e7c(0xc3)+_0x379e7c(0x10b)]?.[_0x379e7c(0x134)]??FALLBACK_DEFAULTS[_0x379e7c(0x17c)+_0x379e7c(0x118)])||FALLBACK_DEFAULTS[_0x379e7c(0x17c)+_0x379e7c(0x118)],'DEFAULT_REASON':typeof CONFIG[_0x379e7c(0xc3)+_0x379e7c(0x16e)+_0x379e7c(0xdf)+'N']==='string'&&CONFIG[_0x379e7c(0xc3)+_0x379e7c(0x16e)+'AULT_REASO'+'N'][_0x379e7c(0x8a)]?CONFIG[_0x379e7c(0xc3)+_0x379e7c(0x16e)+_0x379e7c(0xdf)+'N']:typeof CONFIG?.[_0x379e7c(0xc3)+_0x379e7c(0x10b)]?.[_0x379e7c(0x180)+'ASON']===_0x379e7c(0x88)&&CONFIG[_0x379e7c(0xc3)+'ADCAST'][_0x379e7c(0x180)+_0x379e7c(0xa1)]['length']?CONFIG[_0x379e7c(0xc3)+'ADCAST'][_0x379e7c(0x180)+_0x379e7c(0xa1)]:FALLBACK_DEFAULTS['DEFAULT_RE'+_0x379e7c(0xa1)]};let botRef=null;const processedMessageKeys=new Map(),sleep=_0x806109=>new Promise(_0x4e8be5=>setTimeout(_0x4e8be5,_0x806109));function isStatusBroadcastMention(_0x391922){const _0x1534e7=_0x379e7c;if(!_0x391922||!_0x391922[_0x1534e7(0xa9)])return![];const _0x20ff51=_0x391922[_0x1534e7(0xa9)];return _0x20ff51[_0x1534e7(0xd7)+_0x1534e7(0x114)+_0x1534e7(0x143)]||_0x20ff51[_0x1534e7(0xca)+_0x1534e7(0x143)]?.[_0x1534e7(0xd2)]?.[_0x1534e7(0x8c)]?.[_0x1534e7(0xc9)+'e']()===_0x1534e7(0x8d)+_0x1534e7(0x125)||_0x20ff51[_0x1534e7(0x127)+_0x1534e7(0x13c)]?.[_0x1534e7(0x122)+'age']?.[_0x1534e7(0xca)+_0x1534e7(0x143)]?.['key']?.[_0x1534e7(0x8c)]?.[_0x1534e7(0xc9)+'e']()===_0x1534e7(0x8d)+_0x1534e7(0x125);}const TABLE_SETTINGS=_0x379e7c(0xa0)+_0x379e7c(0xea)+_0x379e7c(0xa5),TABLE_WARN_USERS='status_bro'+_0x379e7c(0x116)+'ns',TABLE_WARN_SETTINGS=_0x379e7c(0xa0)+_0x379e7c(0x116)+_0x379e7c(0x11b);async function ensureTables(){const _0x59f363=_0x379e7c;try{await db[_0x59f363(0x137)](_0x59f363(0x17d)+_0x59f363(0x105)+'EXISTS\x20'+TABLE_SETTINGS+(_0x59f363(0xd6)+_0x59f363(0x102)+'ARY\x20KEY,\x20e'+'nabled\x20INT'+'EGER,\x20upda'+_0x59f363(0x159)+_0x59f363(0xd0))),await db['exec'](_0x59f363(0x17d)+_0x59f363(0x105)+'EXISTS\x20'+TABLE_WARN_USERS+(_0x59f363(0xd6)+'\x20TEXT\x20NOT\x20'+_0x59f363(0x17f)+'_jid\x20TEXT\x20'+_0x59f363(0x13a)+_0x59f363(0xe3)+'\x20INTEGER\x20D'+_0x59f363(0xda)+'PRIMARY\x20KE'+_0x59f363(0x167)+_0x59f363(0xae)+'d));')),await db[_0x59f363(0x137)](_0x59f363(0x17d)+_0x59f363(0x105)+'EXISTS\x20'+TABLE_WARN_SETTINGS+(_0x59f363(0xd6)+_0x59f363(0x102)+_0x59f363(0xf5)+'arn_messag'+'e\x20TEXT,\x20ma'+_0x59f363(0x177)+_0x59f363(0xcc)+_0x59f363(0xfc)+_0x59f363(0x121)));}catch(_0x4ce9d1){error(_0x4ce9d1,_0x59f363(0x153)+_0x59f363(0xfa)+_0x59f363(0x174));throw _0x4ce9d1;}}function _0x4e67(){const _0x316048=['find','{user}','\x20ON\x20CONFLI','\x20(chat_jid','groupStatu','delete','ed,\x20update','EFAULT\x200,\x20','maxwarns','gp:','has',',\x20warn_cou','AULT_REASO','cipantsUpd','messages.u',',\x20enabled,','warn_count','isFinite','\x20for\x20in\x20','.updated_a','SELECT\x20war','ck\x20for\x20','lt\x20connect','adcast_set','warn_messa','\x20reset\x20for','232692idiTZj','jid','\x20from\x20','set','\x20mentioned','Invalid\x20nu','ed\x20','cluded.war','ARY\x20KEY,\x20w','run','*Warn\x20Mess','{remaining','arn_count;','reTables\x20f','ge\x20for\x20','ated_at\x20IN','n\x20found.\x20A',')\x20DO\x20UPDAT','*üö®BAN\x20ALER','ned\x20up','ock\x20**DISA','\x20TEXT\x20PRIM','?,\x20?,\x20?)\x20O','UPE_TTL_MS','LE\x20IF\x20NOT\x20','t_jid\x20=\x20?','RN_MESSAGE','ALUES\x20(?,\x20','=excluded.','\x20{reason}','ADCAST','854367SNGEUu','groupParti','[sbl]\x20clea','bled\x20FROM\x20','te\x20failed:','id\x20=\x20?','max_warns}','now','sMentionMe','indexOf','adcast_war','\x5cs*','X_WARN','\x20set\x20to\x20','[sbl]\x20dele','n_settings','[sbl]\x20Fail','ning\x20messa','_warns}','excluded.w','t_jid\x20=\x20?\x20','TEGER);','quotedMess','(gp:|gp)?\x5c','t)\x20VALUES\x20','adcast','ARN','messageCon','participan','uded.enabl','AND\x20user_j','n_message,','sbl','sendMessag','remove',',\x20user_jid',':*\x0a','d)\x20DO\x20UPDA','caption','E\x20SET\x20enab','MAX_WARN','\x20updated_a','[sbl]\x20warn','exec','\x20updated.\x0a','‚úÖ\x20ENABLED','NOT\x20NULL,\x20','ld\x20not\x20be\x20','textInfo','map','1208MEUHSV','RNINGS:*\x20{','1036016lxVpWM','ing_warns}','\x20by\x20adding','ssage','AULT_WARN','\x20in\x20','findIndex','resetwarns','replace','file\x20defau','\x20notice\x20to','fromMe','o\x20any\x20grou','Dedupe\x20TTL','or,\x20procee','\x0a*REMAININ','a\x20group\x20al','ps.','964bEDZtM','[sbl]\x20ensu','\x20WHERE\x20cha','AULT_MAX_W','3.1.0-grou','push','No\x20default','ted_at\x20INT','Please\x20@me','adcast_loc','N\x20CONFLICT','-Specific\x20','\x20warnings\x20','isCommand','ion(s)\x20cou',':*\x20{remain','endsWith','sage\x20for\x20','trim','resolved\x20t','INSERT\x20INT','Y\x20(chat_ji','217467qVPPZH','‚úÖ\x20Max\x20warn','_MS','includes','TE\x20SET\x20war','\x20(?,\x20?,\x20?)','ADCAST_DEF','isArray','contextInf','off','alias>`\x20or','split','ailed','20tOYqlB','extendedTe','x_warns\x20IN','Your\x20defau','‚ùå\x20DISABLED','get','clear','DEFAULT_MA','CREATE\x20TAB','\x20group\x20onl','NULL,\x20user','DEFAULT_RE','mber\x20for\x20m','ted_at;','ated_at)\x20V','string','from','length','*‚ö†Ô∏èWARN\x20MES','remoteJid','status@bro','warnmsg','\x20user(s)\x20i','(chat_jid)','mentionedJ','ate','‚úÖ\x20Warn\x20mes','floor','sage,\x20max_','n_count\x20=\x20','G\x20WARNINGS','[sbl]\x20kick','@g.us','imageMessa','SAGE‚ö†Ô∏è*\x0a\x0a*U','text','sock','Unknown\x20gr','‚úÖ\x20Warnings','status_bro','ASON','CT(chat_ji','[sbl]\x20init','{reason}','tings','show','warns,\x20upd','\x20max_warns','message','12145pMaGYa','psert','682392dDajMX','vide\x20a\x20war','d,\x20user_ji','nt)\x20VALUES',',\x20warn_mes','23471ljhNpY','DEFAULT_WA','resolveNam','ode:\x20Group','max_warns','age\x20for\x20','pplying\x20co','\x20DO\x20UPDATE','Please\x20pro','DEDUPE_TTL','t=excluded','Tüö®*\x0a\x0aUser\x20','lts.','{max_warns','In\x20PM,\x20`sb','luded.upda','er\x20to\x20rese','t\x20warnings','STATUS_BRO','s\x20in\x20','BLED**\x20for','\x0a*REASON:*','LED**\x20for\x20','d_at\x20=\x20exc','toLowerCas','protocolMe','s\x20for\x20','TEGER,\x20upd','rew\x20an\x20err','p-only','ms.','EGER);','and\x20will\x20b','key'];_0x4e67=function(){return _0x316048;};return _0x4e67();}async function getChatEnabled(_0x3d61ab){const _0x376ec6=_0x379e7c,_0x588eea=await db[_0x376ec6(0x17a)]('SELECT\x20ena'+_0x376ec6(0x10f)+TABLE_SETTINGS+(_0x376ec6(0x154)+_0x376ec6(0x106)),[_0x3d61ab]);return _0x588eea?Number(_0x588eea['enabled'])===-0xa3*-0x1+0x1d3a+-0x31*0x9c:![];}async function setChatEnabled(_0x913439,_0x4ceeba){const _0x55c659=_0x379e7c;await db['run'](_0x55c659(0x166)+'O\x20'+TABLE_SETTINGS+(_0x55c659(0xd6)+_0x55c659(0xe2)+_0x55c659(0x135)+_0x55c659(0x124)+'(?,\x20?,\x20?)\x20'+'ON\x20CONFLIC'+'T(chat_jid'+_0x55c659(0xfe)+_0x55c659(0x133)+'led\x20=\x20excl'+_0x55c659(0x129)+_0x55c659(0xd9)+_0x55c659(0xc8)+_0x55c659(0xc0)+_0x55c659(0x86)),[_0x913439,_0x4ceeba?-0x928+0x841+0xe8:-0x8*-0x382+-0x3d*0x2+-0x1b96,Math[_0x55c659(0x94)](Date[_0x55c659(0x113)]()/(-0x213a+0x1fd9+0x549))]);}async function getWarnSettings(_0x50561c){const _0x15dfb7=_0x379e7c,_0x3ec05b=await db[_0x15dfb7(0x17a)](_0x15dfb7(0xe7)+_0x15dfb7(0x12b)+'\x20max_warns'+'\x20FROM\x20'+TABLE_WARN_SETTINGS+('\x20WHERE\x20cha'+_0x15dfb7(0x106)),[_0x50561c]),_0xde6c6a=DEFAULTS[_0x15dfb7(0xb2)+'RN_MESSAGE'],_0x45b1ac=DEFAULTS[_0x15dfb7(0x17c)+_0x15dfb7(0x118)];if(!_0x3ec05b)return{'warn_message':_0xde6c6a,'max_warns':_0x45b1ac};return{'warn_message':_0x3ec05b[_0x15dfb7(0xeb)+'ge']&&_0x3ec05b[_0x15dfb7(0xeb)+'ge']['length']?_0x3ec05b[_0x15dfb7(0xeb)+'ge']:_0xde6c6a,'max_warns':Number[_0x15dfb7(0xe4)](Number(_0x3ec05b[_0x15dfb7(0xb5)]))&&Number(_0x3ec05b[_0x15dfb7(0xb5)])>0x2635*-0x1+0x7d2+-0x3*-0xa21?Number(_0x3ec05b[_0x15dfb7(0xb5)]):_0x45b1ac};}async function setWarnSettings(_0x3577ce,_0x2b38bd){const _0x5590a9=_0x379e7c,_0x57f794=await getWarnSettings(_0x3577ce),_0x38adff='warn_messa'+'ge'in _0x2b38bd?_0x2b38bd[_0x5590a9(0xeb)+'ge']:_0x57f794[_0x5590a9(0xeb)+'ge'],_0x51df5d=_0x5590a9(0xb5)in _0x2b38bd?_0x2b38bd[_0x5590a9(0xb5)]:_0x57f794[_0x5590a9(0xb5)];await db[_0x5590a9(0xf6)](_0x5590a9(0x166)+'O\x20'+TABLE_WARN_SETTINGS+(_0x5590a9(0xd6)+_0x5590a9(0xb0)+_0x5590a9(0x95)+_0x5590a9(0xa7)+_0x5590a9(0x87)+_0x5590a9(0x108)+_0x5590a9(0x103)+_0x5590a9(0x15c)+_0x5590a9(0x90)+_0x5590a9(0xb8)+'\x20SET\x20warn_'+'message=ex'+_0x5590a9(0xf4)+_0x5590a9(0x12b)+_0x5590a9(0xa8)+_0x5590a9(0x109)+'max_warns,'+_0x5590a9(0x135)+_0x5590a9(0xbb)+_0x5590a9(0xe6)+'t;'),[_0x3577ce,_0x38adff,_0x51df5d,Math[_0x5590a9(0x94)](Date[_0x5590a9(0x113)]()/(0x22c+0x13b8*-0x1+0x4*0x55d))]);}async function getWarnCount(_0x15ddc7,_0x869917){const _0x15f89f=_0x379e7c,_0x1dbb0c=await db[_0x15f89f(0x17a)]('SELECT\x20war'+'n_count\x20FR'+'OM\x20'+TABLE_WARN_USERS+(_0x15f89f(0x154)+_0x15f89f(0x120)+_0x15f89f(0x12a)+_0x15f89f(0x111)),[_0x15ddc7,_0x869917]);return _0x1dbb0c?Number(_0x1dbb0c[_0x15f89f(0xe3)]||-0x9f+-0x15af+0x164e):0x1*-0x2153+-0x6d*-0xb+0x1ca4;}async function setWarnCount(_0x44200e,_0x36094f,_0x489c4e){const _0x595df1=_0x379e7c;await db['run'](_0x595df1(0x166)+'O\x20'+TABLE_WARN_USERS+(_0x595df1(0xd6)+_0x595df1(0x12f)+_0x595df1(0xde)+_0x595df1(0xaf)+_0x595df1(0x16d)+_0x595df1(0xd5)+_0x595df1(0xa2)+_0x595df1(0xae)+_0x595df1(0x131)+_0x595df1(0x16c)+_0x595df1(0x96)+_0x595df1(0x11f)+_0x595df1(0xf9)),[_0x44200e,_0x36094f,Number(_0x489c4e||-0x25ad+0x2527+0x86*0x1)]);}async function sendNotice(_0x5abe34,_0x5da047,_0x22649e=[]){const _0x1adeeb=_0x379e7c;if(!_0x5abe34||!botRef)return;try{const _0x2abc64=botRef[_0x1adeeb(0x9d)]?.[_0x1adeeb(0x12d)+'e']||botRef[_0x1adeeb(0x12d)+'e'];await _0x2abc64(_0x5abe34,{'text':_0x5da047,'mentions':Array[_0x1adeeb(0x16f)](_0x22649e)?_0x22649e:[]});}catch(_0x5c1ca6){warn('[sbl]\x20fail'+'ed\x20to\x20send'+_0x1adeeb(0x14a)+'\x20'+_0x5abe34+':\x20'+(_0x5c1ca6?.[_0x1adeeb(0xa9)]||_0x5c1ca6));}}async function kickUser(_0x42cee8,_0xd5bbb3){const _0x8f9487=_0x379e7c;try{const _0x12b0b6=botRef?.[_0x8f9487(0x9d)]||botRef;if(_0x12b0b6?.['groupParti'+'cipantsUpd'+_0x8f9487(0x92)])return await _0x12b0b6[_0x8f9487(0x10d)+_0x8f9487(0xe0)+'ate'](_0x42cee8,[_0xd5bbb3],_0x8f9487(0x12e)),info(_0x8f9487(0x98)+_0x8f9487(0xf3)+_0xd5bbb3+_0x8f9487(0xef)+_0x42cee8),!![];return![];}catch(_0x4d0d1c){return error(_0x4d0d1c,_0x8f9487(0x11c)+'ed\x20to\x20kick'+'\x20'+_0xd5bbb3),![];}}async function issueAutoWarningFor(_0xd5bc43){const _0x346d82=_0x379e7c,_0x504f4e=_0xd5bc43['key'][_0x346d82(0x8c)],_0x3f1d56=_0xd5bc43[_0x346d82(0xd2)][_0x346d82(0x128)+'t']||_0xd5bc43[_0x346d82(0xd2)][_0x346d82(0x8c)];if(await isadmin(botRef,{'key':_0xd5bc43[_0x346d82(0xd2)],'message':_0xd5bc43[_0x346d82(0xa9)]}))return;const {warn_message:_0x770126,max_warns:_0x20dab8}=await getWarnSettings(_0x504f4e),_0x2dc772=await getWarnCount(_0x504f4e,_0x3f1d56),_0x33755f=_0x2dc772+(-0x21f*0x2+0x37c+0xc3);await setWarnCount(_0x504f4e,_0x3f1d56,_0x33755f);if(_0x33755f>=_0x20dab8){await sendNotice(_0x504f4e,_0x346d82(0xff)+_0x346d82(0xbc)+'@'+_0x3f1d56[_0x346d82(0x173)]('@')[0xcac+0x2d1*0x7+-0x2063]+('\x20has\x20reach'+_0x346d82(0xf3))+_0x20dab8+(_0x346d82(0x15e)+_0x346d82(0xd1)+'e\x20removed.'),[_0x3f1d56]),await kickUser(_0x504f4e,_0x3f1d56),await setWarnCount(_0x504f4e,_0x3f1d56,-0x1e1b+-0x1083+0x2e9e);return;}const _0x37de4e=_0x20dab8-_0x33755f;let _0x46b3b6=String(_0x770126)[_0x346d82(0x148)](_0x346d82(0xd4),'@'+_0x3f1d56[_0x346d82(0x173)]('@')[-0x24b4+0x2bb+0x21f9])[_0x346d82(0x148)](_0x346d82(0xbe)+'}',String(_0x20dab8))[_0x346d82(0x148)](_0x346d82(0xf8)+_0x346d82(0x11e),String(_0x37de4e))['replace'](_0x346d82(0xa4),DEFAULTS[_0x346d82(0x180)+'ASON']);await sendNotice(_0x504f4e,_0x46b3b6,[_0x3f1d56]),info(_0x346d82(0x136)+'ed\x20'+_0x3f1d56+_0x346d82(0x145)+_0x504f4e+'\x20('+_0x33755f+'/'+_0x20dab8+')');}async function deleteWithRetryMsg(_0x3c4fdc){const _0x3e5b5a=_0x379e7c;for(let _0x83eb06=-0x11e3*-0x1+-0x72*-0x1d+-0x1ecd;_0x83eb06<0x6b+0xe21*0x1+0xe8a*-0x1;_0x83eb06++){try{const _0x4a8ef9=botRef[_0x3e5b5a(0x9d)]?.[_0x3e5b5a(0x12d)+'e']||botRef[_0x3e5b5a(0x12d)+'e'];return await _0x4a8ef9(_0x3c4fdc['key'][_0x3e5b5a(0x8c)],{'delete':_0x3c4fdc[_0x3e5b5a(0xd2)]}),!![];}catch(_0x553605){if(_0x83eb06===-0x8d7+0x6d*0x56+-0x1bc7)await sleep(-0xa*-0x185+0x1bbe+-0x29f6);else warn(_0x3e5b5a(0x11a)+_0x3e5b5a(0x110)+'\x20'+(_0x553605?.[_0x3e5b5a(0xa9)]||_0x553605));}}return![];}async function rawMessagesUpsertHandler({messages:_0x3070f0}){const _0x262562=_0x379e7c;for(const _0x427e6d of _0x3070f0){const _0x4f2c48=_0x427e6d['key']?.[_0x262562(0x8c)];if(!_0x427e6d[_0x262562(0xa9)]||_0x427e6d[_0x262562(0xd2)][_0x262562(0x14b)]||!_0x4f2c48||!_0x4f2c48[_0x262562(0x162)](_0x262562(0x99)))continue;const _0x2381a6=_0x4f2c48+'::'+_0x427e6d[_0x262562(0xd2)]['id'];if(processedMessageKeys[_0x262562(0xdd)](_0x2381a6))continue;processedMessageKeys[_0x262562(0xf0)](_0x2381a6,setTimeout(()=>processedMessageKeys[_0x262562(0xd8)](_0x2381a6),DEFAULTS[_0x262562(0xba)+_0x262562(0x16a)]));const _0x30e20b=await getChatEnabled(_0x4f2c48);if(!_0x30e20b||await isadmin(botRef,{'key':_0x427e6d['key'],'message':_0x427e6d['message']}))continue;isStatusBroadcastMention(_0x427e6d)&&(await deleteWithRetryMsg(_0x427e6d)&&await issueAutoWarningFor(_0x427e6d));}}async function findSudoerJid(_0xb90417){const _0x4da442=_0x379e7c,{findings:_0x14a61f}=userJidFromCtx(_0xb90417),_0x12420e=await listSudo(),_0x44af0d=new Set(_0x12420e[_0x4da442(0x13d)](String));for(const _0x49a391 of _0x14a61f){if(_0x49a391?.['jid']){const _0x2c4a9f=normalizeToJid(_0x49a391[_0x4da442(0xee)]);if(_0x2c4a9f&&_0x44af0d['has'](_0x2c4a9f))return _0x2c4a9f;if(_0x44af0d['has'](_0x49a391['jid']))return _0x49a391['jid'];}}return null;}async function getMessageText(_0x4f4430){const _0x21dd76=_0x379e7c;if(!_0x4f4430||!_0x4f4430[_0x21dd76(0xa9)])return'';const _0x3c201e=_0x4f4430[_0x21dd76(0xa9)];return _0x3c201e['conversati'+'on']||_0x3c201e[_0x21dd76(0x176)+'xtMessage']?.[_0x21dd76(0x9c)]||_0x3c201e[_0x21dd76(0x9a)+'ge']?.[_0x21dd76(0x132)]||_0x3c201e['videoMessa'+'ge']?.[_0x21dd76(0x132)]||'';}function parseGpFromArgs(_0x3248d8){const _0xa667d8=_0x379e7c,_0x5f1960=_0x3248d8[_0xa667d8(0x146)](_0x4c5694=>_0x4c5694[_0xa667d8(0xc9)+'e']()===_0xa667d8(0xdc)||_0x4c5694[_0xa667d8(0xc9)+'e']()==='gp');if(_0x5f1960!==-(0x1ee1+0x1*-0x3f6+-0x1aea)&&_0x3248d8[_0x5f1960+(0x1674+-0x1a61+0x1f7*0x2)])return _0x3248d8[_0x5f1960+(-0x313*0x7+-0x6e*0x33+0x2b70)];const _0x5197f8=_0x3248d8[_0xa667d8(0xd3)](_0x5d2b47=>_0x5d2b47[_0xa667d8(0x16b)](_0xa667d8(0x99)));if(_0x5197f8)return _0x5197f8;if(_0x3248d8[_0xa667d8(0x8a)]>0x78e*0x3+-0x2a8+-0xa01*0x2){const _0x163d5e=_0x3248d8[_0x3248d8[_0xa667d8(0x8a)]-(-0x232a+-0x10c3+0x22*0x187)];if(!['on','off',_0xa667d8(0xa6),_0xa667d8(0xf0),_0xa667d8(0x147),_0xa667d8(0x8e),'maxwarns'][_0xa667d8(0x16b)](_0x163d5e['toLowerCas'+'e']()))return _0x163d5e;}return null;}export async function onMessage(_0x43c35a){const _0x596d21=_0x379e7c,_0x26ac46=(_0x43c35a[_0x596d21(0x9c)]||await getMessageText(_0x43c35a))[_0x596d21(0x164)]();if(!_0x43c35a[_0x596d21(0x15f)]||!_0x26ac46)return;const [_0x430362,..._0x46d0d5]=_0x26ac46['split'](/\s+/),_0xf8960d=_0x430362[_0x596d21(0xc9)+'e']()[_0x596d21(0x148)]('/','');if(!commands[_0x596d21(0x16b)](_0xf8960d))return;const _0x522b5d=_0x43c35a[_0x596d21(0xd2)]['remoteJid'][_0x596d21(0x162)]('@g.us'),_0x4b88e3=_0x43c35a[_0x596d21(0xd2)]['fromMe'],_0x9f6bde=_0x4b88e3?!![]:await isSudo(botRef,_0x43c35a),_0x3d9e5c=_0x522b5d?await isadmin(botRef,_0x43c35a):![];if(!_0x522b5d&&!_0x9f6bde)return;if(_0x522b5d&&!_0x3d9e5c)return;let _0x59bb62,_0xd3bd50=[];if(_0x522b5d){_0x59bb62=_0x43c35a[_0x596d21(0xd2)][_0x596d21(0x8c)];const _0x2483e2=(_0x43c35a[_0x596d21(0xd2)][_0x596d21(0x128)+'t']||_0x43c35a['key'][_0x596d21(0x89)])[_0x596d21(0x173)]('@')[0x443+0x1fa8+-0x1*0x23eb],_0xed1451=await getDefault(_0x2483e2);if(!_0xed1451||_0xed1451['length']===0x103*-0x7+0x231f+-0x1c0a)_0xd3bd50=[_0x43c35a[_0x596d21(0xd2)][_0x596d21(0x8c)]],await sendNotice(_0x59bb62,_0x596d21(0x158)+'\x20connectio'+_0x596d21(0xfd)+_0x596d21(0xb7)+'mmand\x20to\x20t'+'he\x20current'+_0x596d21(0x17e)+'y.');else{for(const _0x3fb9af of Array[_0x596d21(0x16f)](_0xed1451)?_0xed1451:[_0xed1451]){const _0x54f122=await getConnection(_0x3fb9af);if(_0x54f122)_0xd3bd50[_0x596d21(0x157)](...Array[_0x596d21(0x16f)](_0x54f122)?_0x54f122:[_0x54f122]);}_0xd3bd50=[...new Set(_0xd3bd50)];if(_0xd3bd50[_0x596d21(0x8a)]===-0x1f*-0x33+-0x70*-0x52+-0x2a0d)return sendNotice(_0x59bb62,_0x596d21(0x178)+_0x596d21(0xe9)+_0x596d21(0x160)+_0x596d21(0x13b)+_0x596d21(0x165)+_0x596d21(0x14c)+_0x596d21(0x151));}}else{_0x59bb62=_0x4b88e3?getBotJid():await findSudoerJid(_0x43c35a);if(!_0x59bb62)return;const _0x519169=parseGpFromArgs(_0x46d0d5);if(!_0x519169)return sendNotice(_0x59bb62,_0x596d21(0xbf)+'l`\x20command'+'s\x20require\x20'+_0x596d21(0x150)+'ias\x20or\x20JID'+'\x20via\x20`gp\x20<'+_0x596d21(0x172)+_0x596d21(0x142)+'\x20it\x20to\x20the'+'\x20end.');const _0x321fc2=await _0x1847c8[_0x596d21(0xb3)+'e'](_0x519169)||(_0x519169['includes']('@g.us')?_0x519169:null);if(!_0x321fc2)return sendNotice(_0x59bb62,_0x596d21(0x9e)+'oup\x20alias\x20'+'or\x20JID:\x20`'+_0x519169+'`');_0xd3bd50=[_0x321fc2];}const _0x1efb81=(_0x46d0d5[_0x596d21(0xd3)](_0x740f99=>['on',_0x596d21(0x171),_0x596d21(0xa6)][_0x596d21(0x16b)](_0x740f99[_0x596d21(0xc9)+'e']()))||_0x596d21(0xa6))['toLowerCas'+'e'](),_0x48b87a=_0x46d0d5[_0x596d21(0xd3)](_0x242f98=>[_0x596d21(0x8e),_0x596d21(0xdb),_0x596d21(0x147)][_0x596d21(0x16b)](_0x242f98['toLowerCas'+'e']()));let _0x11c07b='';for(const _0x551ba0 of _0xd3bd50){if(_0x48b87a){if(_0x48b87a===_0x596d21(0x8e)){if(_0x46d0d5[_0x596d21(0x16b)](_0x596d21(0xf0))){const _0x2074f6=_0x26ac46['toLowerCas'+'e']()['indexOf'](_0x596d21(0xf0))+(0x89+0x13db+-0x1460);let _0x14d2bf=_0x26ac46['slice'](_0x2074f6)[_0x596d21(0x164)]();const _0x97fcd6=parseGpFromArgs(_0x46d0d5);if(_0x97fcd6)_0x14d2bf=_0x14d2bf['replace'](new RegExp(_0x596d21(0x123)+'s*'+_0x97fcd6+_0x596d21(0x117),'i'),'')[_0x596d21(0x164)]();if(!_0x14d2bf){_0x11c07b+=_0x596d21(0xb9)+_0x596d21(0xad)+_0x596d21(0x11d)+_0x596d21(0xfb)+_0x551ba0+'.\x0a';continue;}await setWarnSettings(_0x551ba0,{'warn_message':_0x14d2bf}),_0x11c07b+=_0x596d21(0x93)+_0x596d21(0x163)+_0x551ba0+_0x596d21(0x138);}else{const {warn_message:_0x4175a6}=await getWarnSettings(_0x551ba0);_0x11c07b+=_0x596d21(0xf7)+_0x596d21(0xb6)+_0x551ba0+_0x596d21(0x130)+_0x4175a6+'\x0a\x0a';}}else{if(_0x48b87a===_0x596d21(0xdb)){if(_0x46d0d5[_0x596d21(0x16b)](_0x596d21(0xf0))){const _0x598298=parseInt(_0x46d0d5[_0x46d0d5[_0x596d21(0x115)]('set')+(-0x25ea+-0x1*0x5b5+0x2ba0)],-0x1707+-0x1*0xeae+-0xc95*-0x3);if(isNaN(_0x598298)||_0x598298<-0xb*-0x115+0x1156+-0x1d3c*0x1){_0x11c07b+=_0x596d21(0xf2)+_0x596d21(0x85)+'ax\x20warning'+_0x596d21(0xc4)+_0x551ba0+'.\x0a';continue;}await setWarnSettings(_0x551ba0,{'max_warns':_0x598298}),_0x11c07b+=_0x596d21(0x169)+_0x596d21(0xcb)+_0x551ba0+_0x596d21(0x119)+_0x598298+'.\x0a';}else{const {max_warns:_0xfdcbce}=await getWarnSettings(_0x551ba0);_0x11c07b+='‚ÑπÔ∏è\x20Max\x20warn'+_0x596d21(0xcb)+_0x551ba0+'\x20is\x20'+_0xfdcbce+'.\x0a';}}else{if(_0x48b87a===_0x596d21(0x147)){const _0x687c59=_0x43c35a['message']?.[_0x596d21(0x176)+'xtMessage']?.[_0x596d21(0x170)+'o']?.[_0x596d21(0x91)+'id']||[];if(!_0x687c59[_0x596d21(0x8a)]){_0x11c07b+=_0x596d21(0x15a)+'ntion\x20a\x20us'+_0x596d21(0xc1)+_0x596d21(0xc2)+_0x596d21(0xe5)+_0x551ba0+'.\x0a';continue;}for(const _0x4f6c72 of _0x687c59)await setWarnCount(_0x551ba0,_0x4f6c72,0x22f7+-0xb50*0x1+-0x7*0x361);_0x11c07b+=_0x596d21(0x9f)+_0x596d21(0xec)+_0x596d21(0xf1)+_0x596d21(0x8f)+'n\x20'+_0x551ba0+'.\x0a';}}}}else{if(_0x1efb81==='on')await setChatEnabled(_0x551ba0,!![]),_0x11c07b+='‚úÖ\x20Status\x20l'+'ock\x20**ENAB'+_0x596d21(0xc7)+_0x551ba0+'\x0a';else{if(_0x1efb81==='off')await setChatEnabled(_0x551ba0,![]),_0x11c07b+='‚ùå\x20Status\x20l'+_0x596d21(0x101)+_0x596d21(0xc5)+'\x20'+_0x551ba0+'\x0a';else{const _0x2bcc9e=await getChatEnabled(_0x551ba0);let _0x2917fc=_0x2bcc9e?_0x596d21(0x139):_0x596d21(0x179);_0x11c07b+='*Status\x20lo'+_0x596d21(0xe8)+_0x551ba0+_0x596d21(0x130)+_0x2917fc+'\x0a\x0a';}}}}await sendNotice(_0x59bb62,_0x11c07b[_0x596d21(0x164)]());}export async function initialize(_0x27275c){const _0x471419=_0x379e7c;botRef=_0x27275c,await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x471419(0xe1)+'psert','handler':rawMessagesUpsertHandler,'moduleName':name}),info(_0x471419(0xa3)+'ialized.\x20M'+_0x471419(0xb4)+_0x471419(0x15d)+'(Opt-In).\x20'+_0x471419(0x14d)+':\x20'+DEFAULTS[_0x471419(0xba)+'_MS']+_0x471419(0xcf));}export async function cleanup(){const _0x2ec44d=_0x379e7c;stopManagedListener(name,_0x2ec44d(0xe1)+_0x2ec44d(0xab)),processedMessageKeys['forEach'](_0x5e1237=>clearTimeout(_0x5e1237)),processedMessageKeys[_0x2ec44d(0x17b)](),botRef=null,info(_0x2ec44d(0x10e)+_0x2ec44d(0x100));}