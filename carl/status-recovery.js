const _0x156bb4=_0x5744;(function(_0x5c5d9f,_0x5d9bd4){const _0x4f1883=_0x5744,_0x3674d5=_0x5c5d9f();while(!![]){try{const _0x311b27=-parseInt(_0x4f1883(0x10c))/(0x116b*0x1+0x19*0x15b+-0x334d)+parseInt(_0x4f1883(0x184))/(0x71c+0x706+0x71*-0x20)+parseInt(_0x4f1883(0x1e9))/(0x7*-0x479+0x17e4+0x3b7*0x2)*(-parseInt(_0x4f1883(0x16f))/(0x1*0x1e01+0x1*0x129f+-0x309c))+-parseInt(_0x4f1883(0xb8))/(-0x173+0x266a+0x1279*-0x2)*(-parseInt(_0x4f1883(0xde))/(-0x1*0x2497+-0xb5*-0x9+0x1e40))+-parseInt(_0x4f1883(0xdc))/(0xe0b+-0x56*0x6a+0x2b3*0x8)*(parseInt(_0x4f1883(0x1fb))/(0x107*0x11+-0x22ee+0x117f))+-parseInt(_0x4f1883(0x192))/(0x281*0x3+0x12c4+0x1*-0x1a3e)*(parseInt(_0x4f1883(0xce))/(-0x11c0+-0x137b+0x2545))+-parseInt(_0x4f1883(0x172))/(-0x1784+-0x496+0x1c25)*(-parseInt(_0x4f1883(0xa8))/(-0x1381*-0x1+-0x1bde+-0x869*-0x1));if(_0x311b27===_0x5d9bd4)break;else _0x3674d5['push'](_0x3674d5['shift']());}catch(_0x566b3f){_0x3674d5['push'](_0x3674d5['shift']());}}}(_0x2ce7,0x3*-0x40853+0xfe9*-0x45+0x16f8f7));import _0x1fcb83 from'fs';import _0x1a0dd4 from'path';import{mkdirSync}from'fs';import{rm as _0x51b657}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x156bb4(0xa9)+_0x156bb4(0x131);export const version=_0x156bb4(0x128);export const priority=0x222d+0x73c+-0xda9*0x3;export const commands=[_0x156bb4(0x110)+_0x156bb4(0x116)];export const configKeys=[_0x156bb4(0x125)+'OT','STATUS_REC'+_0x156bb4(0x103),'STATUS_REC'+_0x156bb4(0x154)+_0x156bb4(0x161)+_0x156bb4(0x1ea),_0x156bb4(0xb2)+'OVERY_KEEP'+_0x156bb4(0xd8),_0x156bb4(0xb2)+_0x156bb4(0x158)+_0x156bb4(0x166)+'T',_0x156bb4(0xb2)+_0x156bb4(0x158)+_0x156bb4(0x177)+_0x156bb4(0x1b8),_0x156bb4(0xb2)+_0x156bb4(0x197)+_0x156bb4(0x146)+_0x156bb4(0x1c3)];let CFG={};try{CFG=typeof getConfig===_0x156bb4(0x14a)?getConfig()||{}:{};}catch(_0xf4d4ec){warn('['+name+(_0x156bb4(0x119)+_0x156bb4(0x13a)+'\x20')+(_0xf4d4ec?.['message']||_0xf4d4ec)+(_0x156bb4(0x1b0)+'back\x20to\x20de'+_0x156bb4(0xbf))),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x1a0dd4[_0x156bb4(0x1f1)](_0x156bb4(0x1ac),'status'),'CLEANUP_INTERVAL_MS':(-0x207f+-0x182*-0xd+0xcfd)*(-0x7*0x1f+-0x3*-0x5e6+0x1*-0x109d)*(0x2*0x7c5+0x910+-0x185e)*(0xc0b+0x3*-0x879+0x1148),'KEEP_SECONDS':(-0x1a1b*-0x1+-0x1855+-0x1ae)*(0x215e+-0x4bd+-0x1c65)*(0x18b+0x1fc8+0x2b*-0xc5),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(0xeb1*-0x1+0x1ae5+-0xc2a)*(-0x10*0x1c0+-0x189a+0x389a)*(0x1131+0xbcd+0x18fe*-0x1)};function toPositiveInt(_0x364c40,_0x16ffee){const _0x4f3552=Number(_0x364c40);if(!Number['isFinite'](_0x4f3552)||_0x4f3552<=-0x1cb2+-0x51*0x59+0x38db)return _0x16ffee;return Math['floor'](_0x4f3552);}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0x156bb4(0xb2)+_0x156bb4(0x103)]===_0x156bb4(0x18c)&&CFG[_0x156bb4(0xb2)+_0x156bb4(0x103)]['trim']()?CFG['STATUS_REC'+_0x156bb4(0x103)]:FALLBACKS[_0x156bb4(0x1c6)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG[_0x156bb4(0xb2)+_0x156bb4(0x154)+_0x156bb4(0x161)+'AL_MS']??(CFG[_0x156bb4(0xb2)+_0x156bb4(0x151)]&&CFG[_0x156bb4(0xb2)+_0x156bb4(0x151)][_0x156bb4(0x1f2)+_0x156bb4(0x1b2)]),FALLBACKS['CLEANUP_IN'+_0x156bb4(0x1b2)]),'KEEP_SECONDS':toPositiveInt(CFG[_0x156bb4(0xb2)+_0x156bb4(0xb0)+'_SECONDS']??(CFG[_0x156bb4(0xb2)+_0x156bb4(0x151)]&&CFG[_0x156bb4(0xb2)+_0x156bb4(0x151)][_0x156bb4(0x1e6)+'DS']),FALLBACKS[_0x156bb4(0x1e6)+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x156bb4(0xb2)+_0x156bb4(0x158)+_0x156bb4(0x166)+'T']??(CFG[_0x156bb4(0xb2)+'OVERY']&&CFG[_0x156bb4(0xb2)+_0x156bb4(0x151)][_0x156bb4(0x1ed)+_0x156bb4(0x1d2)]),FALLBACKS[_0x156bb4(0x1ed)+_0x156bb4(0x1d2)]),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG[_0x156bb4(0xb2)+_0x156bb4(0x158)+_0x156bb4(0x177)+_0x156bb4(0x1b8)]??(CFG[_0x156bb4(0xb2)+_0x156bb4(0x151)]&&CFG[_0x156bb4(0xb2)+'OVERY'][_0x156bb4(0x1ed)+'TRIM_KEEP']),FALLBACKS[_0x156bb4(0x1ed)+_0x156bb4(0x126)]),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG['STATUS_REC'+_0x156bb4(0x197)+_0x156bb4(0x146)+_0x156bb4(0x1c3)]??(CFG[_0x156bb4(0xb2)+'OVERY']&&CFG['STATUS_REC'+_0x156bb4(0x151)][_0x156bb4(0x1bd)+_0x156bb4(0xb6)+'ARN']),FALLBACKS[_0x156bb4(0x1bd)+'AD_BYTES_W'+'ARN'])};function _0x2ce7(){const _0x34b701=['ONDED_TRIM','slice','conversati','le_path\x20TE','?,\x20?,\x20?,\x20?','missing\x20at','_name\x20TEXT','video','concat','o\x20set\x20anti',']\x20upload\x20a','isArray','split','965792xVIXIT','resolve','UPDATE\x20SET','VALUES\x20(?,',']\x20fetchIte','\x20->\x20','ialize\x20req','has','string','INSERT\x20OR\x20','pant,\x20disp','promises','ue,\x20update','empty\x20buff','7353buAFRp','\x20returned\x20','catch','=\x20?','document','OVERY_MAX_','sing\x20for\x20','readdirSyn','toUpperCas','ES\x20(?,\x20?,\x20',']\x20ensureDa','participan','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','d_at)\x20VALU','.ogg','fromMe','mentionedJ','from','DIR=','extendedTe','toString','clear',']\x20raw\x20per-','ttempt\x20fai','SELECT\x20*\x20F','aved\x20statu','data','CREATE\x20TAB','RIMARY\x20KEY','d_at\x20INTEG','.\x20Falling\x20','r\x20status\x20','TERVAL_MS',']\x20deletion','\x20removed\x20(','eletion\x20fo','cessful\x20re','veredToBot','_KEEP','\x20->\x20sent','\x20KEEP_SEC=','file_path',']\x20removed\x20','MAX_DOWNLO','\x20error:\x20','ved\x20copy\x20f','\x20for\x20statu','d,\x20partici','IMARY\x20KEY,','YTES_WARN','key\x20TEXT\x20P','set\x20to\x20','DATA_SUBPA',']\x20handlePo','mime\x20TEXT,','messages.u','Message','cwd','bParameter','renameSync','.png',',\x0a\x20\x20\x20\x20\x20\x20\x20v',']\x20deleteIt',']\x20expired\x20','LIMIT','te\x20status:','existsSync','adcast','uires\x20bot\x20','\x20\x20\x20\x20create','message_js','luded.valu','ULT\x200\x0a\x20\x20\x20\x20','age','mimetype','TO\x20','ound','message\x20er','essage\x20ava','sock','floor','or\x20','path)','✔️\x20antidele','KEEP_SECON',':\x20getBotJi','contextInf','372AtCOpt','AL_MS','ilable','\x20FROM\x20','RESPONDED_','off','ULT\x200,\x0a\x20\x20\x20','taDir\x20erro','join','CLEANUP_IN','ired\x20error','ad\x20maker\x20f',']\x20DB\x20saved',']\x20recovere','readFile','tus','image','no\x20resend)','2600OVdFlE','12JuXIkt','status_rec','size','status\x20','videoMessa',']\x20sweepExp','rticipant\x20','ed.updated','OVERY_KEEP','IN\x20(','STATUS_REC','\x20?,\x20?,\x20?,\x20','isDirector','ue\x20FROM\x20','AD_BYTES_W','led:\x20','1105YXDRHh','get','\x0a\x20\x20\x20\x20\x20\x20\x20fi','add','\x20(key,\x20val','o\x20import\x20B','all','faults.','e\x20error:\x20','\x20msg_ts\x20IN','includes','_at;','audioMessa','h\x20file_pat','LE\x20IF\x20NOT\x20','video/','aileys','xtMessage','\x20WHERE\x20id\x20','map',']\x20payload\x20','ated_at\x20IN','9040QHOyRW','show','.webp','ssage_json','filter','EXISTS\x20','iled:\x20','\x20error\x20for','\x20\x20\x20display','\x20is\x20large:','_SECONDS','NOT\x20NULL,\x0a','\x20entry\x20for','lay_name,\x20','6097CdvLKe',']\x20download','4392fmgRJA','length','n)\x0a\x20\x20\x20\x20\x20\x20\x20','now','sendMessag',']\x20handleSt','_at=exclud','stopManage','unlinkSync','\x0a\x20\x20\x20\x20\x20\x20\x20me','overy_pref','\x200,\x0a\x20\x20\x20\x20\x20\x20','downloadCo','remoteJid',']\x20file\x20mis','ARN','\x20but\x20no\x20sa','run','ssage','ed_at,\x20exp','messageStu','ntentFromM','key','\x0aSaved\x20fil','atusUpload','_path,\x20msg','.mp3','d()\x20return','e:\x20getBotJ','\x20WHERE\x20key','TEGER\x20DEFA','\x20file_path','saved\x20stat','ailed\x20for\x20','SELECT\x20id,','❌\x20Failed\x20t','essage_jso','OVERY_DIR','imageMessa','delete\x20sta','r:\x20','mById\x20fail','expires_at','overy_item','status','\x20);','240505AmUnQY','\x20failed\x20fo','rmdirSync','audio','antidelete','emById\x20fai','ror:\x20','psert','writeFile','extname','\x20status','sage','protocolMe',']\x20getConfi','\x20DEFAULT\x20\x27','\x20bytes',']\x20cleanup\x20','overy.init','\x20expires_a',']\x20sendReco','isAbsolute','trim',']\x20stub\x20rev',']\x20readFile','AsBuffer\x20f','PROJECT_RO','TRIM_KEEP','isBuffer','2.3.2','tus\x20','bType','mime',']\x20onMessag','\x20handle\x20fa','_ts,\x20creat','ssibleDele','INSERT\x20INT','overy','@g.us',']\x20cleaned\x20',']\x20no\x20paylo','essage','rename','startsWith',']\x20saved\x20st','display_na','g()\x20threw:','text','DEFAULT\x200,','status@bro','caption','us\x20','stringify','d\x20deleted\x20','error:\x20','o\x20send\x20rec','tmp','enabled','DOWNLOAD_B','SELECT\x20fil','s(es)','ed:\x20','function','overed\x20sta','DELETE\x20FRO','\x20TEXT\x20DEFA','essage\x20not','\x0a\x20\x20\x20\x20\x20\x20\x20(i','messages','OVERY',']\x20failed\x20t','atus\x20','OVERY_CLEA','?)\x0a\x20\x20\x20\x20\x20\x20\x20','\x20after\x20suc','documentMe','OVERY_RESP','ROM\x20','ed\x20empty','toLowerCas','\x20\x20);','stickerMes','message',']\x20setPref\x20','value','NUP_INTERV','exec','XT,\x0a\x20\x20\x20\x20\x20\x20','ON\x20CONFLIC','e_path\x20FRO','ONDED_LIMI','\x20WHERE\x20exp','id\x20TEXT\x20PR','\x20expired\x20s',',\x20cannot\x20r',']\x20saveItem','.pdf','pushName','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','12560aPflOu','send','image/','15823555ursFqh','statSync','er\x20for\x20sta','default','t\x20INTEGER\x20'];_0x2ce7=function(){return _0x34b701;};return _0x2ce7();}let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE='status_rec'+_0x156bb4(0xe8)+'s',ITEMS_TABLE=_0x156bb4(0xa9)+_0x156bb4(0x109)+'s';let respondedMsgIds=new Set();function trackSent(_0x5a1934){const _0x79fc28=_0x156bb4;try{const _0x2c5d50=_0x5a1934?.['key']?.['id']||_0x5a1934?.['id']||_0x5a1934?.[_0x79fc28(0x150)]&&_0x5a1934[_0x79fc28(0x150)][-0x1*-0x140d+-0xba*-0x1+-0x14c7]?.[_0x79fc28(0xf4)]?.['id']||Array['isArray'](_0x5a1934)&&_0x5a1934[-0x409*-0x2+-0x2053+0x1841*0x1]?.['key']?.['id']||null;if(!_0x2c5d50)return;respondedMsgIds[_0x79fc28(0xbb)](String(_0x2c5d50));if(respondedMsgIds[_0x79fc28(0xaa)]>DEFAULTS[_0x79fc28(0x1ed)+_0x79fc28(0x1d2)]){const _0x4ad742=Array[_0x79fc28(0x1a3)](respondedMsgIds);respondedMsgIds=new Set(_0x4ad742[_0x79fc28(0x178)](-DEFAULTS['RESPONDED_'+_0x79fc28(0x126)]));}}catch(_0x35e805){}}function isOurSentId(_0x22caa3){const _0x534e98=_0x156bb4;return _0x22caa3&&respondedMsgIds[_0x534e98(0x18b)](String(_0x22caa3));}async function getBaileysHelpers(){const _0x27497e=_0x156bb4;if(_baileysHelpers)return _baileysHelpers;try{const _0x58482e=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x58482e[_0x27497e(0xea)+_0x27497e(0xf3)+_0x27497e(0x135)]||_0x58482e[_0x27497e(0x175)]?.[_0x27497e(0xea)+'ntentFromM'+_0x27497e(0x135)]};if(!_baileysHelpers[_0x27497e(0xea)+'ntentFromM'+_0x27497e(0x135)])throw new Error(_0x27497e(0xea)+_0x27497e(0xf3)+_0x27497e(0x14e)+'\x20available');return _baileysHelpers;}catch(_0x27b7ad){error(_0x27b7ad,'['+name+(_0x27497e(0x152)+_0x27497e(0xbd)+_0x27497e(0xc8)));throw _0x27b7ad;}}async function streamToBuffer(_0xb4ae22){const _0x1ab7e0=_0x156bb4,_0x44ef77=[];for await(const _0x245fbc of _0xb4ae22)_0x44ef77['push'](Buffer[_0x1ab7e0(0x127)](_0x245fbc)?_0x245fbc:Buffer['from'](_0x245fbc));return Buffer[_0x1ab7e0(0x17f)](_0x44ef77);}function ensureDataDir(){const _0x29ee65=_0x156bb4;try{const _0x52a74b=CFG||{},_0x542f1a=_0x52a74b[_0x29ee65(0x125)+'OT']&&typeof _0x52a74b['PROJECT_RO'+'OT']===_0x29ee65(0x18c)?_0x52a74b[_0x29ee65(0x125)+'OT']:process['cwd'](),_0x48c8b8=typeof DEFAULTS['DATA_SUBPA'+'TH']==='string'&&DEFAULTS[_0x29ee65(0x1c6)+'TH'][_0x29ee65(0x121)]()?DEFAULTS['DATA_SUBPA'+'TH']:null;DATA_DIR=_0x48c8b8&&typeof _0x48c8b8===_0x29ee65(0x18c)&&_0x48c8b8[_0x29ee65(0x121)]()?_0x1a0dd4[_0x29ee65(0x120)](_0x48c8b8)?_0x48c8b8:_0x1a0dd4[_0x29ee65(0x185)](_0x542f1a,_0x48c8b8):_0x1a0dd4[_0x29ee65(0x185)](_0x542f1a,FALLBACKS[_0x29ee65(0x1c6)+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0x1cd511=_0x1a0dd4[_0x29ee65(0x185)](_0x542f1a,_0x29ee65(0x1ac),_0x29ee65(0x10a),_0x29ee65(0x144));if(_0x1fcb83[_0x29ee65(0x1d4)](_0x1cd511)&&_0x1fcb83[_0x29ee65(0x173)](_0x1cd511)[_0x29ee65(0xb4)+'y']()){const _0x454f17=_0x1fcb83[_0x29ee65(0x199)+'c'](_0x1cd511)[_0x29ee65(0xd2)](Boolean);for(const _0x4be2fc of _0x454f17){const _0x45364f=_0x1a0dd4['join'](_0x1cd511,_0x4be2fc),_0x143303=_0x1a0dd4['join'](DATA_DIR,_0x4be2fc);try{if(!_0x1fcb83[_0x29ee65(0x1d4)](_0x143303))_0x1fcb83[_0x29ee65(0x1cd)](_0x45364f,_0x143303);else _0x1fcb83[_0x29ee65(0xe6)](_0x45364f);}catch(_0x330d45){}}try{const _0x5b1459=_0x1fcb83[_0x29ee65(0x199)+'c'](_0x1cd511);if(!_0x5b1459||_0x5b1459[_0x29ee65(0xdf)]===0x2ec+-0x2423+0x2137)_0x1fcb83[_0x29ee65(0x10e)](_0x1cd511);}catch(_0x10cd9e){}}}catch(_0x262ba8){}}catch(_0x5687f2){warn('['+name+(_0x29ee65(0x19c)+_0x29ee65(0x1f0)+_0x29ee65(0x106))+(_0x5687f2?.[_0x29ee65(0x15e)]||_0x5687f2)),DATA_DIR=_0x1a0dd4[_0x29ee65(0x185)](process[_0x29ee65(0x1cb)](),FALLBACKS[_0x29ee65(0x1c6)+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x53de7d){}}}async function ensureTables(){const _0x4ce0c6=_0x156bb4;await db[_0x4ce0c6(0x162)](_0x4ce0c6(0x1ad)+'LE\x20IF\x20NOT\x20'+_0x4ce0c6(0xd3)+PREFS_TABLE+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x4ce0c6(0x1c4)+_0x4ce0c6(0x1ae)+_0x4ce0c6(0x1cf)+'alue\x20TEXT\x20'+_0x4ce0c6(0xd9)+'\x20\x20\x20\x20\x20\x20\x20upd'+_0x4ce0c6(0xcd)+_0x4ce0c6(0xfc)+_0x4ce0c6(0x1da)+_0x4ce0c6(0x10b))),await db[_0x4ce0c6(0x162)](_0x4ce0c6(0x1ad)+_0x4ce0c6(0xc6)+_0x4ce0c6(0xd3)+ITEMS_TABLE+(_0x4ce0c6(0x16e)+_0x4ce0c6(0x168)+_0x4ce0c6(0x1c2)+'\x0a\x20\x20\x20\x20\x20\x20\x20pa'+_0x4ce0c6(0xae)+'TEXT,\x0a\x20\x20\x20\x20'+_0x4ce0c6(0xd6)+_0x4ce0c6(0x17d)+_0x4ce0c6(0x11a)+_0x4ce0c6(0x19e)+_0x4ce0c6(0x1c8)+_0x4ce0c6(0xba)+_0x4ce0c6(0x17a)+_0x4ce0c6(0x163)+_0x4ce0c6(0xc1)+_0x4ce0c6(0xfc)+_0x4ce0c6(0x1ef)+_0x4ce0c6(0x1d7)+_0x4ce0c6(0x1af)+'ER\x20DEFAULT'+_0x4ce0c6(0xe9)+_0x4ce0c6(0x11e)+_0x4ce0c6(0x176)+_0x4ce0c6(0x13c)+_0x4ce0c6(0xe7)+_0x4ce0c6(0xd1)+_0x4ce0c6(0x14d)+'ULT\x20\x27\x27\x0a\x20\x20\x20'+_0x4ce0c6(0x15c)));}async function getPref(_0x236f5c){const _0xc041e7=_0x156bb4;try{const _0x507dff=await db[_0xc041e7(0xb9)]('SELECT\x20val'+_0xc041e7(0xb5)+PREFS_TABLE+(_0xc041e7(0xfb)+'\x20=\x20?'),[_0x236f5c]);return _0x507dff?_0x507dff[_0xc041e7(0x160)]:null;}catch(_0x1b72f2){return warn('['+name+(']\x20getPref\x20'+_0xc041e7(0x142))+(_0x1b72f2?.[_0xc041e7(0x15e)]||_0x1b72f2)),null;}}async function setPref(_0x26c0bd,_0x35732f){const _0x2602d1=_0x156bb4;try{const _0x104aee=Math[_0x2602d1(0x1e2)](Date[_0x2602d1(0xe1)]()/(-0x11*-0x208+0x1552*-0x1+-0x94e));return await db[_0x2602d1(0xef)](_0x2602d1(0x130)+'O\x20'+PREFS_TABLE+(_0x2602d1(0xbc)+_0x2602d1(0x190)+_0x2602d1(0x19f)+_0x2602d1(0x19b)+_0x2602d1(0x155)+_0x2602d1(0x164)+'T(key)\x20DO\x20'+_0x2602d1(0x186)+'\x20value=exc'+_0x2602d1(0x1d9)+'e,\x20updated'+_0x2602d1(0xe4)+_0x2602d1(0xaf)+_0x2602d1(0xc3)),[_0x26c0bd,String(_0x35732f),_0x104aee]),!![];}catch(_0x5ea9b2){return warn('['+name+(_0x2602d1(0x15f)+'failed:\x20')+(_0x5ea9b2?.[_0x2602d1(0x15e)]||_0x5ea9b2)),![];}}async function saveItem(_0x6e5671){const _0x404952=_0x156bb4;try{const _0x46de8f=Math[_0x404952(0x1e2)](Date[_0x404952(0xe1)]()/(-0xda9+-0x6d2+0x1*0x1863)),_0x1582c7=Number(_0x6e5671['expires_at']||_0x46de8f+DEFAULTS[_0x404952(0x1e6)+'DS']);return await db[_0x404952(0xef)](_0x404952(0x18d)+'REPLACE\x20IN'+_0x404952(0x1dd)+ITEMS_TABLE+(_0x404952(0x14f)+_0x404952(0x1c1)+_0x404952(0x18e)+_0x404952(0xdb)+'mime,\x20file'+_0x404952(0xf7)+_0x404952(0x12e)+_0x404952(0xf1)+'ires_at,\x20m'+_0x404952(0x102)+_0x404952(0xe0)+_0x404952(0x187)+_0x404952(0xb3)+_0x404952(0x17b)+',\x20?)'),[_0x6e5671['id'],_0x6e5671[_0x404952(0x19d)+'t']||'',_0x6e5671[_0x404952(0x139)+'me']||'',_0x6e5671['mime']||'',_0x6e5671[_0x404952(0x1bb)]||'',Number(_0x6e5671['msg_ts']||-0xf9f+0x1eab+-0x6b*0x24),Number(_0x6e5671['created_at']||Math[_0x404952(0x1e2)](Date[_0x404952(0xe1)]()/(-0x20*-0xc6+0xd6c+0x2*-0x1122))),Number(_0x1582c7),_0x6e5671[_0x404952(0x1d8)+'on']?_0x6e5671[_0x404952(0x1d8)+'on']:'']),!![];}catch(_0x1369e1){return warn('['+name+(_0x404952(0x16b)+'\x20failed:\x20')+(_0x1369e1?.['message']||_0x1369e1)),![];}}async function fetchItemById(_0x4be044){const _0x573d15=_0x156bb4;try{const _0x255a37=await db[_0x573d15(0xb9)](_0x573d15(0x1aa)+_0x573d15(0x159)+ITEMS_TABLE+('\x20WHERE\x20id\x20'+_0x573d15(0x195)),[_0x4be044]);return _0x255a37||null;}catch(_0x54957b){return warn('['+name+(_0x573d15(0x188)+_0x573d15(0x107)+_0x573d15(0x149))+(_0x54957b?.['message']||_0x54957b)),null;}}async function deleteItemById(_0x3a1b12){const _0x49069a=_0x156bb4;try{const _0x1e621f=await db[_0x49069a(0xb9)](_0x49069a(0x147)+_0x49069a(0x165)+'M\x20'+ITEMS_TABLE+(_0x49069a(0xca)+_0x49069a(0x195)),[_0x3a1b12]);if(_0x1e621f?.[_0x49069a(0x1bb)])try{await _0x51b657(_0x1e621f[_0x49069a(0x1bb)])[_0x49069a(0x194)](()=>{});}catch(_0x3344a5){}await db[_0x49069a(0xef)]('DELETE\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x49069a(0xca)+_0x49069a(0x195)),[_0x3a1b12]),info('['+name+(_0x49069a(0x1bc)+_0x49069a(0xfe)+_0x49069a(0x13f))+_0x3a1b12);}catch(_0x22201c){warn('['+name+(_0x49069a(0x1d0)+_0x49069a(0x111)+_0x49069a(0xb7))+(_0x22201c?.[_0x49069a(0x15e)]||_0x22201c));}}async function sweepExpired(){const _0x136e53=_0x156bb4;try{const _0x4408d9=Math[_0x136e53(0x1e2)](Date[_0x136e53(0xe1)]()/(-0x70*0x29+-0x8d9+0x1eb1)),_0x38f89c=await db[_0x136e53(0xbe)](_0x136e53(0x100)+_0x136e53(0xfd)+_0x136e53(0x1ec)+ITEMS_TABLE+(_0x136e53(0x167)+'ires_at\x20<='+'\x20?'),[_0x4408d9]);if(!_0x38f89c||_0x38f89c[_0x136e53(0xdf)]===0x2073+-0x8*0x328+-0x733)return;for(const _0x22d4ed of _0x38f89c){try{if(_0x22d4ed[_0x136e53(0x1bb)])await _0x51b657(_0x22d4ed[_0x136e53(0x1bb)])[_0x136e53(0x194)](()=>{});}catch(_0x9b2b8f){}}const _0x3b4f5a=_0x38f89c['map'](_0x152111=>_0x152111['id']);if(_0x3b4f5a[_0x136e53(0xdf)]){const _0x56b516=_0x3b4f5a[_0x136e53(0xcb)](()=>'?')[_0x136e53(0x1f1)](',');await db[_0x136e53(0xef)](_0x136e53(0x14c)+'M\x20'+ITEMS_TABLE+(_0x136e53(0xca)+_0x136e53(0xb1))+_0x56b516+')',_0x3b4f5a),info('['+name+_0x136e53(0x133)+_0x3b4f5a[_0x136e53(0xdf)]+(_0x136e53(0x169)+_0x136e53(0x1ab)+_0x136e53(0x148)));}}catch(_0x5c7106){warn('['+name+(_0x136e53(0xad)+_0x136e53(0x1f3)+':\x20')+(_0x5c7106?.[_0x136e53(0x15e)]||_0x5c7106));}}function filenameForId(_0x5bb54b,_0x435697){const _0x2d4493=_0x156bb4,_0x4495f6={'image/jpeg':'.jpg','image/png':_0x2d4493(0x1ce),'video/mp4':'.mp4','image/webp':_0x2d4493(0xd0),'audio/ogg':_0x2d4493(0x1a0),'audio/mpeg':_0x2d4493(0xf8),'application/pdf':_0x2d4493(0x16c)},_0x7e09df=_0x435697&&_0x4495f6[_0x435697]?_0x4495f6[_0x435697]:_0x1a0dd4[_0x2d4493(0x115)](_0x5bb54b)||'';return''+_0x5bb54b+_0x7e09df;}async function readFileAsBuffer(_0x4e77f5){const _0x50058a=_0x156bb4;try{return await _0x1fcb83[_0x50058a(0x18f)][_0x50058a(0x1f7)](_0x4e77f5);}catch(_0x1d6f5c){return warn('['+name+(_0x50058a(0x123)+_0x50058a(0x124)+_0x50058a(0xff))+_0x4e77f5+':\x20'+(_0x1d6f5c?.['message']||_0x1d6f5c)),null;}}function buildPayloadFromSaved(_0x4895e6){const _0x1d15bc=_0x156bb4;if(!_0x4895e6||!_0x4895e6[_0x1d15bc(0x1bb)])return null;const _0x504190=_0x4895e6[_0x1d15bc(0x1bb)],_0x24af64=(_0x4895e6[_0x1d15bc(0x12b)]||'')[_0x1d15bc(0x15b)+'e']();return async function(){const _0x160572=_0x1d15bc,_0x38b8e4=await readFileAsBuffer(_0x504190);if(!_0x38b8e4)return null;const _0x1840c6=(_0x4895e6[_0x160572(0x139)+'me']?_0x4895e6['display_na'+'me']+'\x20-\x20':'')+('Recovered\x20'+'status');if(_0x24af64[_0x160572(0x137)](_0x160572(0x171)))return{'image':_0x38b8e4,'caption':_0x1840c6,'mimetype':_0x24af64};if(_0x24af64[_0x160572(0x137)](_0x160572(0xc7)))return{'video':_0x38b8e4,'caption':_0x1840c6,'mimetype':_0x24af64};if(_0x24af64[_0x160572(0x137)]('audio/'))return{'audio':_0x38b8e4,'ptt':![],'mimetype':_0x24af64};return{'document':_0x38b8e4,'fileName':_0x1a0dd4['basename'](_0x504190)||''+_0x4895e6['id'],'caption':_0x1840c6,'mimetype':_0x24af64||undefined};};}async function sendRecoveredToBot(_0x2ea4ed){const _0x468e50=_0x156bb4;if(!_0x2ea4ed)return![];const _0x108445=getBotJid();if(!_0x108445)return warn('['+name+(_0x468e50(0x11f)+_0x468e50(0x1b7)+_0x468e50(0x1e7)+_0x468e50(0xf9)+_0x468e50(0x15a))),![];if(!_0x2ea4ed['file_path']||!_0x1fcb83[_0x468e50(0x1d4)](_0x2ea4ed[_0x468e50(0x1bb)]))return warn('['+name+(_0x468e50(0x11f)+_0x468e50(0x1b7)+':\x20file\x20mis'+'sing\x20for\x20')+_0x2ea4ed['id']+_0x468e50(0x189)+_0x2ea4ed[_0x468e50(0x1bb)]),![];const _0xc42796=buildPayloadFromSaved(_0x2ea4ed);if(!_0xc42796)return warn('['+name+(_0x468e50(0x134)+_0x468e50(0x1f4)+_0x468e50(0x1e3))+_0x2ea4ed['id']),![];try{const _0x4b1939=await _0xc42796();if(!_0x4b1939)return warn('['+name+(_0x468e50(0xcc)+'build\x20fail'+'ed\x20for\x20')+_0x2ea4ed['id']),![];if(typeof _0x4b1939==='object'&&_0x4b1939!==null){_0x4b1939[_0x468e50(0x1e8)+'o']=_0x4b1939['contextInf'+'o']||{};if(_0x2ea4ed[_0x468e50(0x19d)+'t'])_0x4b1939[_0x468e50(0x1e8)+'o'][_0x468e50(0x1a2)+'id']=[_0x2ea4ed[_0x468e50(0x19d)+'t']];}let _0x28945d=null;if(botRef&&botRef[_0x468e50(0x1e1)]&&typeof botRef[_0x468e50(0x1e1)][_0x468e50(0xe2)+'e']===_0x468e50(0x14a))_0x28945d=await botRef[_0x468e50(0x1e1)]['sendMessag'+'e'](_0x108445,_0x4b1939);else{if(botRef&&typeof botRef[_0x468e50(0xe2)+'e']==='function')_0x28945d=await botRef['sendMessag'+'e'](_0x108445,_0x4b1939);else return warn('['+name+(_0x468e50(0x11f)+'veredToBot'+':\x20no\x20sendM'+_0x468e50(0x1e0)+_0x468e50(0x1eb))),![];}return trackSent(_0x28945d),info('['+name+(']\x20sent\x20sav'+'ed\x20file\x20fo'+'r\x20')+_0x2ea4ed['id']+_0x468e50(0x189)+_0x108445),!![];}catch(_0x853c1f){return warn('['+name+(_0x468e50(0x11f)+'veredToBot'+_0x468e50(0xd5)+'\x20')+_0x2ea4ed['id']+':\x20'+(_0x853c1f?.[_0x468e50(0x15e)]||_0x853c1f)),![];}}async function isEnabled(){const _0x2bbcb5=_0x156bb4,_0x41d747=await getPref(_0x2bbcb5(0x145));return _0x41d747==='1'||_0x41d747==='true';}async function handleStatusUpload(_0x4cc9cd){const _0x58f707=_0x156bb4;try{if(!_0x4cc9cd||!_0x4cc9cd[_0x58f707(0xf4)])return;const _0x38a405=String(_0x4cc9cd[_0x58f707(0xf4)]['remoteJid']||'')[_0x58f707(0x15b)+'e']();if(_0x38a405!==_0x58f707(0x13d)+_0x58f707(0x1d5))return;const _0x637d3a=String(_0x4cc9cd[_0x58f707(0xf4)]['id']||'');if(!_0x637d3a)return;if(!await isEnabled())return;const _0xa63f94=await fetchItemById(_0x637d3a);if(_0xa63f94)return;const _0x41af7f=_0x4cc9cd[_0x58f707(0x15e)]||{};let _0x2039a8=null;if(_0x41af7f[_0x58f707(0x104)+'ge'])_0x2039a8=_0x58f707(0x1f9);else{if(_0x41af7f[_0x58f707(0xac)+'ge'])_0x2039a8=_0x58f707(0x17e);else{if(_0x41af7f[_0x58f707(0xc4)+'ge'])_0x2039a8='audio';else{if(_0x41af7f[_0x58f707(0x157)+_0x58f707(0xf0)])_0x2039a8=_0x58f707(0x196);else{if(_0x41af7f[_0x58f707(0x15d)+_0x58f707(0x117)])_0x2039a8='sticker';}}}}if(!_0x2039a8)return;const _0xa6baaa=_0x2039a8===_0x58f707(0x1f9)?'image':_0x2039a8===_0x58f707(0x17e)?_0x58f707(0x17e):_0x2039a8===_0x58f707(0x10f)?_0x58f707(0x10f):'document',_0x3929f4=_0x4cc9cd[_0x58f707(0xf4)]['participan'+'t']||'',_0x181806=_0x4cc9cd[_0x58f707(0x16d)]||'',_0x54578a=_0x3929f4?_0x3929f4[_0x58f707(0x183)]('@')[-0x57*-0x2b+0x19c0+-0x285d]:_0x181806||'';let _0x2c0daf='',_0x1ad052='';try{const _0x302aeb=_0x4cc9cd['message'][_0xa6baaa+_0x58f707(0x1ca)]||_0x4cc9cd['message'];_0x1ad052=_0x302aeb&&_0x302aeb[_0x58f707(0x1dc)]?_0x302aeb['mimetype']:'';const {downloadContentFromMessage:_0xc54f4f}=await getBaileysHelpers(),_0x55e3a5=await _0xc54f4f(_0x302aeb,_0xa6baaa),_0x552c7b=await streamToBuffer(_0x55e3a5);if(!_0x552c7b||!Buffer['isBuffer'](_0x552c7b)||_0x552c7b[_0x58f707(0xdf)]===0xd28+0x421*-0x8+0x13e0)warn('['+name+(']\x20download'+_0x58f707(0x193)+_0x58f707(0x191)+_0x58f707(0x174)+_0x58f707(0x129))+_0x637d3a),_0x2c0daf='';else{const _0x43ac97=filenameForId(_0x637d3a,_0x1ad052);_0x2c0daf=_0x1a0dd4[_0x58f707(0x1f1)](DATA_DIR,_0x43ac97);const _0x22a104=_0x2c0daf+'.tmp-'+Date[_0x58f707(0xe1)]();await _0x1fcb83[_0x58f707(0x18f)][_0x58f707(0x114)](_0x22a104,_0x552c7b),await _0x1fcb83[_0x58f707(0x18f)][_0x58f707(0x136)](_0x22a104,_0x2c0daf),info('['+name+(_0x58f707(0x138)+_0x58f707(0x153))+_0x637d3a+_0x58f707(0x189)+_0x2c0daf+'\x20('+_0x552c7b[_0x58f707(0xdf)]+'\x20bytes)'),_0x552c7b['length']>DEFAULTS[_0x58f707(0x1bd)+_0x58f707(0xb6)+_0x58f707(0xed)]&&warn('['+name+(_0x58f707(0xdd)+'ed\x20file\x20fo'+'r\x20')+_0x637d3a+(_0x58f707(0xd7)+'\x20')+_0x552c7b['length']+_0x58f707(0x11b));}}catch(_0x148d17){warn('['+name+(_0x58f707(0xdd)+_0x58f707(0x10d)+_0x58f707(0x1b1))+_0x637d3a+':\x20'+(_0x148d17?.[_0x58f707(0x15e)]||_0x148d17)),_0x2c0daf='';}const _0x5233f0=Math['floor'](Date[_0x58f707(0xe1)]()/(0x705+0x1*-0x15a7+-0x2a6*-0x7)),_0x1f31a9={'id':_0x637d3a,'participant':_0x3929f4,'display_name':_0x54578a,'mime':_0x1ad052,'file_path':_0x2c0daf,'msg_ts':Number(_0x4cc9cd['messageTim'+'estamp']||_0x5233f0),'created_at':_0x5233f0,'expires_at':_0x5233f0+DEFAULTS[_0x58f707(0x1e6)+'DS'],'message_json':JSON[_0x58f707(0x140)](_0x4cc9cd)};await saveItem(_0x1f31a9);if(_0x2c0daf)info('['+name+(_0x58f707(0x1f5)+'\x20entry\x20wit'+_0x58f707(0xc5)+'h\x20for\x20')+_0x637d3a);else info('['+name+(_0x58f707(0x1f5)+_0x58f707(0xda)+'\x20')+_0x637d3a+('\x20(no\x20file_'+_0x58f707(0x1e4)));}catch(_0x311058){warn('['+name+(_0x58f707(0xe3)+_0x58f707(0xf6)+_0x58f707(0x1be))+(_0x311058?.[_0x58f707(0x15e)]||_0x311058));}}async function handlePossibleDeletion(_0x17212d){const _0x202237=_0x156bb4;try{if(!_0x17212d||!_0x17212d['message'])return;if(!await isEnabled())return;const _0x11cbdf=Math[_0x202237(0x1e2)](Date[_0x202237(0xe1)]()/(-0x1225*-0x1+-0x181c+0x9df)),_0x4dd444=_0x17212d[_0x202237(0x15e)][_0x202237(0x118)+_0x202237(0xf0)];if(_0x4dd444&&_0x4dd444['key']){const _0x55b46c=_0x4dd444[_0x202237(0xf4)]||{},_0x491480=String(_0x55b46c['remoteJid']||'')[_0x202237(0x15b)+'e']();if(_0x491480===_0x202237(0x13d)+'adcast'){const _0x1e5fde=String(_0x55b46c['id']||'');if(!_0x1e5fde)return;const _0x3d9c76=await fetchItemById(_0x1e5fde);if(!_0x3d9c76){warn('['+name+(_0x202237(0x1b3)+_0x202237(0x1c0)+'s\x20')+_0x1e5fde+(_0x202237(0xee)+_0x202237(0x1bf)+_0x202237(0x1de)));return;}if(Number(_0x3d9c76[_0x202237(0x108)]||-0x5*0x2bf+0x193+0x2*0x614)<=_0x11cbdf){await deleteItemById(_0x1e5fde),info('['+name+(_0x202237(0x1d1)+_0x202237(0xfe)+_0x202237(0x13f))+_0x1e5fde+(_0x202237(0x1b4)+_0x202237(0x1fa)));return;}const _0x3c589b=await sendRecoveredToBot(_0x3d9c76);_0x3c589b?(info('['+name+(_0x202237(0x1f6)+_0x202237(0x141)+_0x202237(0xab))+_0x1e5fde+_0x202237(0x1b9)),await deleteItemById(_0x1e5fde),info('['+name+(_0x202237(0x1bc)+'saved\x20stat'+_0x202237(0x13f))+_0x1e5fde+(_0x202237(0x156)+_0x202237(0x1b6)+_0x202237(0x170)))):warn('['+name+(_0x202237(0x152)+_0x202237(0x143)+_0x202237(0x14b)+_0x202237(0x129))+_0x1e5fde);return;}}if((_0x17212d[_0x202237(0xf2)+_0x202237(0x12a)]||_0x17212d[_0x202237(0x15e)]?.['messageStu'+_0x202237(0x12a)])&&Array[_0x202237(0x182)](_0x17212d[_0x202237(0x15e)]?.[_0x202237(0xf2)+_0x202237(0x1cc)+'s'])){const _0x4d7d4f=_0x17212d[_0x202237(0x15e)][_0x202237(0xf2)+_0x202237(0x1cc)+'s'];if(_0x4d7d4f[_0x202237(0xdf)]>-0x2*-0x25+-0x1*0xfcf+0x1*0xf86&&String(_0x4d7d4f[0x158c+0x6a8+-0x1c34])['toLowerCas'+'e']()[_0x202237(0xc2)]('revoke')){for(let _0xe6316f=0x1*0x1016+0x1150+0x1*-0x2165;_0xe6316f<_0x4d7d4f[_0x202237(0xdf)];_0xe6316f++){const _0x31d868=String(_0x4d7d4f[_0xe6316f]||'');if(!_0x31d868)continue;const _0x1522cc=await fetchItemById(_0x31d868);if(!_0x1522cc){warn('['+name+(_0x202237(0x122)+'oke\x20for\x20st'+_0x202237(0x153))+_0x31d868+('\x20but\x20no\x20sa'+_0x202237(0x1bf)+_0x202237(0x1de)));continue;}if(Number(_0x1522cc[_0x202237(0x108)]||0x25a2+-0x21dd*0x1+-0x3c5)<=_0x11cbdf){await deleteItemById(_0x31d868),info('['+name+(_0x202237(0x1d1)+'saved\x20stat'+'us\x20')+_0x31d868+(_0x202237(0x1b4)+_0x202237(0x1fa)));continue;}if(!_0x1522cc['file_path']||!_0x1fcb83[_0x202237(0x1d4)](_0x1522cc[_0x202237(0x1bb)])){warn('['+name+(_0x202237(0xec)+_0x202237(0x198))+_0x31d868+':\x20'+_0x1522cc[_0x202237(0x1bb)]);continue;}const _0x4c9a0f=await sendRecoveredToBot(_0x1522cc);_0x4c9a0f?(info('['+name+(_0x202237(0x1f6)+_0x202237(0x141)+'status\x20')+_0x31d868+_0x202237(0x1b9)),await deleteItemById(_0x31d868),info('['+name+(']\x20removed\x20'+_0x202237(0xfe)+_0x202237(0x13f))+_0x31d868+(_0x202237(0x156)+_0x202237(0x1b6)+_0x202237(0x170)))):warn('['+name+(_0x202237(0x152)+_0x202237(0x143)+_0x202237(0x14b)+_0x202237(0x129))+_0x31d868);}return;}}const _0x129927=_0x17212d[_0x202237(0x15e)]?.[_0x202237(0x1a5)+'xtMessage']?.['contextInf'+'o']?.['quotedMess'+_0x202237(0x1db)];if(_0x129927&&_0x129927[_0x202237(0x118)+_0x202237(0xf0)]&&_0x129927[_0x202237(0x118)+_0x202237(0xf0)][_0x202237(0xf4)]){const _0x5fd58e=_0x129927['protocolMe'+_0x202237(0xf0)][_0x202237(0xf4)];if(String(_0x5fd58e[_0x202237(0xeb)]||'')[_0x202237(0x15b)+'e']()===_0x202237(0x13d)+'adcast'){const _0x56b3d6=String(_0x5fd58e['id']||'');if(!_0x56b3d6)return;const _0x49df42=await fetchItemById(_0x56b3d6);if(!_0x49df42)return;if(Number(_0x49df42[_0x202237(0x108)]||0xa37+0x21af+-0x2be6)<=_0x11cbdf){await deleteItemById(_0x56b3d6),info('['+name+(_0x202237(0x1d1)+_0x202237(0xfe)+'us\x20')+_0x56b3d6+(_0x202237(0x1b4)+_0x202237(0x1fa)));return;}if(!_0x49df42[_0x202237(0x1bb)]||!_0x1fcb83[_0x202237(0x1d4)](_0x49df42[_0x202237(0x1bb)])){warn('['+name+(']\x20quoted\x20d'+_0x202237(0x1b5)+'r\x20')+_0x56b3d6+('\x20but\x20file\x20'+_0x202237(0x17c)+'\x20')+_0x49df42['file_path']);return;}const _0x520ec8=await sendRecoveredToBot(_0x49df42);_0x520ec8?(info('['+name+(_0x202237(0x1f6)+_0x202237(0x141)+_0x202237(0xab))+_0x56b3d6+'\x20->\x20sent'),await deleteItemById(_0x56b3d6),info('['+name+(_0x202237(0x1bc)+_0x202237(0xfe)+'us\x20')+_0x56b3d6+(_0x202237(0x156)+'cessful\x20re'+'send'))):warn('['+name+(']\x20failed\x20t'+_0x202237(0x143)+_0x202237(0x14b)+'tus\x20')+_0x56b3d6);return;}}}catch(_0x3ec6ac){warn('['+name+(_0x202237(0x1c7)+_0x202237(0x12f)+'tion\x20error'+':\x20')+(_0x3ec6ac?.[_0x202237(0x15e)]||_0x3ec6ac));}}async function rawMessagesUpsertHandler({messages:_0x1d85f1}){const _0x3e4a9a=_0x156bb4;if(!Array[_0x3e4a9a(0x182)](_0x1d85f1))return;if(!await isEnabled())return;for(const _0xe6506e of _0x1d85f1){try{if(!_0xe6506e||!_0xe6506e['key'])continue;if(isOurSentId(_0xe6506e[_0x3e4a9a(0xf4)]?.['id']))continue;if(_0xe6506e[_0x3e4a9a(0xf4)][_0x3e4a9a(0x1a1)])continue;const _0x115810=String(_0xe6506e[_0x3e4a9a(0xf4)]['remoteJid']||'')[_0x3e4a9a(0x15b)+'e']();if(_0x115810===_0x3e4a9a(0x13d)+_0x3e4a9a(0x1d5)){await handleStatusUpload(_0xe6506e)[_0x3e4a9a(0x194)](_0x487d01=>warn('['+name+(_0x3e4a9a(0x181)+_0x3e4a9a(0x1a9)+_0x3e4a9a(0xb7))+(_0x487d01?.[_0x3e4a9a(0x15e)]||_0x487d01))),await handlePossibleDeletion(_0xe6506e)['catch'](_0xee204f=>warn('['+name+(']\x20deletion'+_0x3e4a9a(0x12d)+_0x3e4a9a(0xd4))+(_0xee204f?.[_0x3e4a9a(0x15e)]||_0xee204f)));continue;}await handlePossibleDeletion(_0xe6506e)[_0x3e4a9a(0x194)](_0x2a18f5=>warn('['+name+(_0x3e4a9a(0x1b3)+'\x20handle\x20fa'+'iled:\x20')+(_0x2a18f5?.[_0x3e4a9a(0x15e)]||_0x2a18f5)));}catch(_0x21dbc0){warn('['+name+(_0x3e4a9a(0x1a8)+_0x3e4a9a(0x1df)+_0x3e4a9a(0x112))+(_0x21dbc0?.[_0x3e4a9a(0x15e)]||_0x21dbc0));}}}function getMessageTextFromCtx(_0x537007){const _0x13b4de=_0x156bb4;if(!_0x537007||!_0x537007[_0x13b4de(0x15e)])return'';const _0x33b22c=_0x537007[_0x13b4de(0x15e)];if(_0x33b22c[_0x13b4de(0x179)+'on'])return _0x33b22c[_0x13b4de(0x179)+'on'];if(_0x33b22c[_0x13b4de(0x1a5)+_0x13b4de(0xc9)]?.['text'])return _0x33b22c[_0x13b4de(0x1a5)+_0x13b4de(0xc9)]['text'];if(_0x33b22c[_0x13b4de(0x104)+'ge']?.[_0x13b4de(0x13e)])return _0x33b22c[_0x13b4de(0x104)+'ge'][_0x13b4de(0x13e)];if(_0x33b22c[_0x13b4de(0xac)+'ge']?.['caption'])return _0x33b22c[_0x13b4de(0xac)+'ge'][_0x13b4de(0x13e)];return'';}export async function onMessage(_0x186b94){const _0x262a9b=_0x156bb4;try{if(!_0x186b94||!_0x186b94[_0x262a9b(0xf4)]||!_0x186b94[_0x262a9b(0x15e)])return;const _0x104f9c=_0x186b94[_0x262a9b(0xf4)][_0x262a9b(0xeb)];if(typeof _0x104f9c===_0x262a9b(0x18c)&&_0x104f9c['endsWith'](_0x262a9b(0x132)))return;if(!_0x186b94[_0x262a9b(0xf4)][_0x262a9b(0x1a1)])return;if(_0x186b94['key']['id']&&isOurSentId(_0x186b94[_0x262a9b(0xf4)]['id']))return;const _0x44c6af=typeof _0x186b94[_0x262a9b(0x13b)]==='string'&&_0x186b94['text'][_0x262a9b(0x121)]()[_0x262a9b(0xdf)]?_0x186b94[_0x262a9b(0x13b)]['trim']():'',_0x4ec0b1=(getMessageTextFromCtx(_0x186b94)||'')[_0x262a9b(0x1a6)]()[_0x262a9b(0x121)](),_0x49ac45=(_0x44c6af||_0x4ec0b1||'')[_0x262a9b(0x183)](/\r?\n/)[0x8*-0x48d+0x14e2+-0x2*-0x7c3]['trim']();if(!_0x49ac45)return;const _0x36a0dd=/^antidelete\s+status(?:\s+(on|off|show))?$/i['exec'](_0x49ac45);if(!_0x36a0dd)return;const _0x3ab972=(_0x36a0dd[-0xfa3+-0x1*0x10ea+0x208e]||_0x262a9b(0xcf))[_0x262a9b(0x15b)+'e'](),_0x27e50c=getBotJid();if(!_0x27e50c){warn('['+name+(_0x262a9b(0x12c)+_0x262a9b(0xfa)+'id()\x20empty'+_0x262a9b(0x16a)+'eply'));return;}if(_0x3ab972===_0x262a9b(0xcf)){const _0x55c062=await isEnabled(),_0x4f472c=_0x262a9b(0x1e5)+_0x262a9b(0x1d3)+'\x20'+(_0x55c062?'ON':'OFF')+(_0x262a9b(0xf5)+'es\x20dir:\x20')+DATA_DIR,_0x3d0b50=await(botRef?.[_0x262a9b(0x1e1)]?.[_0x262a9b(0xe2)+'e']?botRef[_0x262a9b(0x1e1)][_0x262a9b(0xe2)+'e'](_0x27e50c,{'text':_0x4f472c}):botRef[_0x262a9b(0xe2)+'e'](_0x27e50c,{'text':_0x4f472c}));trackSent(_0x3d0b50);return;}if(_0x3ab972==='on'||_0x3ab972===_0x262a9b(0x1ee)){const _0x4333a4=_0x3ab972==='on'?'1':'0',_0x2e241e=await setPref(_0x262a9b(0x145),_0x4333a4),_0x143c99=_0x2e241e?_0x262a9b(0x1e5)+'te\x20status\x20'+_0x262a9b(0x1c5)+_0x3ab972[_0x262a9b(0x19a)+'e']():_0x262a9b(0x101)+_0x262a9b(0x180)+_0x262a9b(0x105)+_0x262a9b(0x1f8),_0x5dedec=await(botRef?.[_0x262a9b(0x1e1)]?.[_0x262a9b(0xe2)+'e']?botRef[_0x262a9b(0x1e1)]['sendMessag'+'e'](_0x27e50c,{'text':_0x143c99}):botRef['sendMessag'+'e'](_0x27e50c,{'text':_0x143c99}));trackSent(_0x5dedec);return;}}catch(_0x243422){warn('['+name+(_0x262a9b(0x12c)+_0x262a9b(0xc0))+(_0x243422?.[_0x262a9b(0x15e)]||_0x243422));}}export async function initialize(_0x38a68f){const _0xe28d04=_0x156bb4;if(!_0x38a68f)throw new Error(_0xe28d04(0xa9)+_0xe28d04(0x11d)+_0xe28d04(0x18a)+_0xe28d04(0x1d6)+'instance');botRef=_0x38a68f,ensureDataDir(),await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0xe28d04(0x1c9)+_0xe28d04(0x113),'handler':rawMessagesUpsertHandler,'moduleName':name}),cleanupInterval=setInterval(()=>sweepExpired()[_0xe28d04(0x194)](()=>{}),DEFAULTS['CLEANUP_IN'+_0xe28d04(0x1b2)]);try{await sweepExpired();}catch(_0x12e9df){}info('['+name+(']\x20initiali'+'zed.\x20DATA_'+_0xe28d04(0x1a4))+DATA_DIR+('\x20CLEANUP_M'+'S=')+DEFAULTS[_0xe28d04(0x1f2)+_0xe28d04(0x1b2)]+_0xe28d04(0x1ba)+DEFAULTS[_0xe28d04(0x1e6)+'DS']);}export async function cleanup(){const _0x2f2808=_0x156bb4;try{stopManagedListener(name,'messages.u'+_0x2f2808(0x113));}catch(_0x3d2437){warn('['+name+(_0x2f2808(0x11c)+_0x2f2808(0xe5)+'dListener\x20'+_0x2f2808(0x142))+(_0x3d2437?.[_0x2f2808(0x15e)]||_0x3d2437));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x4c88cd){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds[_0x2f2808(0x1a7)]===_0x2f2808(0x14a))respondedMsgIds['clear']();_baileysHelpers=null;}function _0x5744(_0x39dd39,_0x4d2986){const _0x296b03=_0x2ce7();return _0x5744=function(_0x528189,_0x596707){_0x528189=_0x528189-(-0x1a0+0x1*0x16f3+-0x14ab);let _0x3884d7=_0x296b03[_0x528189];return _0x3884d7;},_0x5744(_0x39dd39,_0x4d2986);}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};