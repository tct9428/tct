const _0x2c6cd6=_0x3e16;(function(_0x542968,_0x38a497){const _0x33be4e=_0x3e16,_0xce32d2=_0x542968();while(!![]){try{const _0x50d630=-parseInt(_0x33be4e(0x290))/(-0xa2+0xd*0x17e+0x641*-0x3)*(parseInt(_0x33be4e(0x2cd))/(0x6fd+0x1dc5*0x1+-0x24c0))+parseInt(_0x33be4e(0x1e1))/(0x709+0x1a1d+-0x2123)+-parseInt(_0x33be4e(0x20b))/(0x130*0x9+-0x2a7+-0x805)+-parseInt(_0x33be4e(0x2ea))/(0x174e+0x1cf6+-0x5*0xa73)*(parseInt(_0x33be4e(0x306))/(0x25fe+0x39*-0x3d+-0x1863))+-parseInt(_0x33be4e(0x20a))/(0x25a9*0x1+-0x1*0xa5b+0x1*-0x1b47)+parseInt(_0x33be4e(0x316))/(0x25eb*-0x1+0xb5*0x3+-0x4*-0x8f5)*(parseInt(_0x33be4e(0x267))/(0x2089+-0x11eb+-0x1*0xe95))+parseInt(_0x33be4e(0x25e))/(0xe72+-0x1e25+0xfbd)*(parseInt(_0x33be4e(0x2f2))/(-0x21b5+0x193d+-0x883*-0x1));if(_0x50d630===_0x38a497)break;else _0xce32d2['push'](_0xce32d2['shift']());}catch(_0x30743f){_0xce32d2['push'](_0xce32d2['shift']());}}}(_0x2f1d,0x8b288*0x2+0x3*-0x3e4ad+0x89e4e));import _0x39ef01 from'fs';import _0x1351ee from'path';import{mkdirSync}from'fs';import{rm as _0x5d8a53}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';function _0x2f1d(){const _0x2f1579=['messageTim','video/','ON\x20CONFLIC','id\x20TEXT\x20PR','OVERY','@g.us','status\x20','ARN','g()\x20threw:','LIMIT','ilable','o\x20import\x20B','filter','r\x20status\x20','eletion\x20fo','\x20file_path','message','overed\x20sta','STATUS_REC','DOWNLOAD_B','\x20=\x20?',']\x20download','isArray','2NwsrGl','.tmp-','s(es)','mimetype','xtMessage','DIR=',']\x20sent\x20sav','delete\x20sta','alue\x20TEXT\x20','d()\x20return','OVERY_CLEA','\x20removed\x20(','_SECONDS','DELETE\x20FRO','\x20expires_a','downloadCo','\x20value=exc','video','CREATE\x20TAB','resolve','get','mime','no\x20resend)','show',']\x20saveItem','\x20(key,\x20val','sticker','=\x20?','concat','85PnlyfM','overy_item','le_path\x20TE','e_path\x20FRO','videoMessa','ound','now','dListener\x20','42454742mnFACF','LE\x20IF\x20NOT\x20','mime\x20TEXT,','DEFAULT\x200,','sing\x20for\x20','EXISTS\x20','d\x20deleted\x20','t\x20INTEGER\x20',',\x20cannot\x20r','\x20msg_ts\x20IN','Recovered\x20','\x20?,\x20?,\x20?,\x20','ROM\x20','\x20DEFAULT\x20\x27','saved\x20stat','imageMessa','sendMessag','messages','tus\x20','ttempt\x20fai','560724mUrqiM','UPDATE\x20SET','\x20available','\x200,\x0a\x20\x20\x20\x20\x20\x20','ssage','emById\x20fai','failed:\x20','conversati',']\x20stub\x20rev','ad\x20maker\x20f','\x20but\x20no\x20sa','rticipant\x20','\x20status','\x20(no\x20file_',']\x20saved\x20st','aileys','422360BOpMbj','❌\x20Failed\x20t','adcast','off','statSync','OVERY_KEEP','eply','ed\x20empty','status',']\x20recovere','toLowerCas','image','ed\x20file\x20fo','file_path','_path,\x20msg','\x0a\x20\x20\x20\x20\x20\x20\x20(i','\x0a\x20\x20\x20\x20\x20\x20\x20pa','.\x20Falling\x20','ue\x20FROM\x20','slice','taDir\x20erro','ed_at,\x20exp','tmp','cwd','\x20WHERE\x20id\x20','display_na','atusUpload','ailed\x20for\x20','iled:\x20',']\x20no\x20paylo','ONDED_LIMI','5299398uzxBsD','VALUES\x20(?,','ired\x20error','\x20but\x20file\x20',',\x20?)',']\x20getConfi','run',']\x20cleaned\x20','audio','pushName','.ogg','cessful\x20re','existsSync','er\x20for\x20sta','INSERT\x20INT',']\x20expired\x20','overy','add','NUP_INTERV','sage','map',',\x0a\x20\x20\x20\x20\x20\x20\x20v','TRIM_KEEP','\x20failed:\x20','error:\x20','XT,\x0a\x20\x20\x20\x20\x20\x20','\x20failed\x20fo','sock','\x20expired\x20s','bType','PROJECT_RO','clear','INSERT\x20OR\x20','length','ated_at\x20IN','n)\x0a\x20\x20\x20\x20\x20\x20\x20','REPLACE\x20IN','AD_BYTES_W',']\x20cleanup\x20',']\x20DB\x20saved','exec','10321941RsWRLH','3021200kWZHkZ','led:\x20','\x20entry\x20wit','\x20CLEANUP_M','ssage_json','o\x20send\x20rec','essage','tion\x20error','lay_name,\x20','writeFile','essage\x20ava','o\x20set\x20anti','veredToBot','rmdirSync','faults.','_at=exclud','trim','d,\x20partici','documentMe','Message','te\x20status\x20','extname','remoteJid',']\x20deletion','\x20after\x20suc','overy_pref','TEGER\x20DEFA','age','AL_MS','zed.\x20DATA_','status@bro','aved\x20statu','ved\x20copy\x20f','2.3.2','message\x20er','OFF','OVERY_RESP','protocolMe','key','\x20->\x20sent','✔️\x20antidele','id()\x20empty','e\x20error:\x20','RESPONDED_','string',']\x20ensureDa','default','ULT\x200,\x0a\x20\x20\x20','\x20->\x20','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','size',']\x20failed\x20t','mentionedJ','tus','_KEEP',']\x20payload\x20','bParameter','e,\x20updated','isBuffer','\x20\x20);','readdirSyn','pant,\x20disp','key\x20TEXT\x20P','ES\x20(?,\x20?,\x20','or\x20','\x0aSaved\x20fil','messageStu','atus\x20','luded.valu','\x20-\x20','\x20TEXT\x20DEFA','NOT\x20NULL,\x0a','rename',']\x20sendReco','RIMARY\x20KEY','stringify','\x20handle\x20fa',']\x20fetchIte','_name\x20TEXT','status_rec','msg_ts','e:\x20getBotJ','\x20WHERE\x20exp','10vFSjoi','empty\x20buff','psert',']\x20setPref\x20','TERVAL_MS','antidelete','T(key)\x20DO\x20','all',':\x20file\x20mis','9JTIscC','isFinite','includes','text','push','\x20FROM\x20','\x20\x20\x20display','function',']\x20onMessag','from','estamp','endsWith','expires_at','CLEANUP_IN','quotedMess','contextInf','caption','h\x20file_pat','join','ed\x20for\x20',':\x20getBotJi','MAX_DOWNLO','_ts,\x20creat','mById\x20fail','OVERY_DIR',']\x20readFile','\x20\x20\x20\x20\x20\x20\x20upd','catch','image/','stickerMes','DATA_SUBPA','ires_at,\x20m','ntentFromM',']\x20removed\x20','message_js','data','\x20is\x20large:',']\x20sweepExp','OVERY_MAX_','.png','basename','920851diYvCf','oke\x20for\x20st','IN\x20(','d_at)\x20VALU','messages.u','ssibleDele',']\x20quoted\x20d','SELECT\x20fil','ires_at\x20<=','fromMe','readFile','KEEP_SECON','YTES_WARN','back\x20to\x20de','enabled','IMARY\x20KEY,','ONDED_TRIM','\x20);','d_at\x20INTEG','SELECT\x20id,','ed:\x20','extendedTe','build\x20fail','unlinkSync','object','promises','\x20entry\x20for','isAbsolute','startsWith',']\x20initiali','us\x20','split','true','participan','te\x20status:','document','floor','r:\x20'];_0x2f1d=function(){return _0x2f1579;};return _0x2f1d();}import{getConfig}from'../utils/config.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x2c6cd6(0x25a)+_0x2c6cd6(0x1f1);export const version=_0x2c6cd6(0x22c);export const priority=0x1f6*0xa+0x589+-0x18b7;export const commands=[_0x2c6cd6(0x263)+_0x2c6cd6(0x312)];export const configKeys=[_0x2c6cd6(0x1ff)+'OT',_0x2c6cd6(0x2c8)+_0x2c6cd6(0x27f),_0x2c6cd6(0x2c8)+_0x2c6cd6(0x2d7)+'NUP_INTERV'+_0x2c6cd6(0x227),_0x2c6cd6(0x2c8)+_0x2c6cd6(0x31b)+'_SECONDS',_0x2c6cd6(0x2c8)+_0x2c6cd6(0x22f)+'ONDED_LIMI'+'T','STATUS_REC'+'OVERY_RESP'+_0x2c6cd6(0x2a0)+_0x2c6cd6(0x241),_0x2c6cd6(0x2c8)+_0x2c6cd6(0x28d)+_0x2c6cd6(0x2c9)+_0x2c6cd6(0x29c)];let CFG={};try{CFG=typeof getConfig===_0x2c6cd6(0x26e)?getConfig()||{}:{};}catch(_0x3a7597){warn('['+name+(_0x2c6cd6(0x1e6)+_0x2c6cd6(0x2be)+'\x20')+(_0x3a7597?.[_0x2c6cd6(0x2c6)]||_0x3a7597)+(_0x2c6cd6(0x327)+_0x2c6cd6(0x29d)+_0x2c6cd6(0x219))),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x1351ee[_0x2c6cd6(0x279)]('data',_0x2c6cd6(0x31e)),'CLEANUP_INTERVAL_MS':(0x232*0x2+-0x1f2a+0x1ade)*(-0x1*-0x535+0x1c5e+-0xb1d*0x3)*(0x345*0x3+-0x1f57+0x15c4)*(-0x4aa*0x5+-0x13f1+0x2f2b),'KEEP_SECONDS':(0x154c+0x2*-0xbcb+-0x2*-0x131)*(0x1ab4+-0x1*-0x902+-0x237a)*(-0x1fdd+-0x5ae+-0x25c7*-0x1),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(-0x15ad*0x1+-0x11*0x21f+-0x6*-0x9a1)*(0x195a+-0x7*-0xa3+-0x19cf)*(-0x1*-0x46c+-0x12f*0x6+0x6ae)};function toPositiveInt(_0x35aa93,_0x53cfd2){const _0x1b553c=_0x2c6cd6,_0x45ac0d=Number(_0x35aa93);if(!Number[_0x1b553c(0x268)](_0x45ac0d)||_0x45ac0d<=0x2*-0x751+0x33*0x87+0x2b*-0x49)return _0x53cfd2;return Math[_0x1b553c(0x2b4)](_0x45ac0d);}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x27f)]===_0x2c6cd6(0x237)&&CFG['STATUS_REC'+_0x2c6cd6(0x27f)][_0x2c6cd6(0x21b)]()?CFG['STATUS_REC'+'OVERY_DIR']:FALLBACKS[_0x2c6cd6(0x285)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x2d7)+_0x2c6cd6(0x1f3)+'AL_MS']??(CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x2ba)]&&CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x2ba)]['CLEANUP_IN'+'TERVAL_MS']),FALLBACKS[_0x2c6cd6(0x274)+'TERVAL_MS']),'KEEP_SECONDS':toPositiveInt(CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x31b)+_0x2c6cd6(0x2d9)]??(CFG['STATUS_REC'+'OVERY']&&CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x2ba)][_0x2c6cd6(0x29b)+'DS']),FALLBACKS[_0x2c6cd6(0x29b)+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x2c6cd6(0x2c8)+'OVERY_RESP'+_0x2c6cd6(0x1e0)+'T']??(CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x2ba)]&&CFG['STATUS_REC'+_0x2c6cd6(0x2ba)][_0x2c6cd6(0x236)+'LIMIT']),FALLBACKS[_0x2c6cd6(0x236)+'LIMIT']),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG[_0x2c6cd6(0x2c8)+'OVERY_RESP'+'ONDED_TRIM'+_0x2c6cd6(0x241)]??(CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x2ba)]&&CFG['STATUS_REC'+_0x2c6cd6(0x2ba)][_0x2c6cd6(0x236)+_0x2c6cd6(0x1f7)]),FALLBACKS[_0x2c6cd6(0x236)+'TRIM_KEEP']),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG['STATUS_REC'+_0x2c6cd6(0x28d)+_0x2c6cd6(0x2c9)+_0x2c6cd6(0x29c)]??(CFG[_0x2c6cd6(0x2c8)+_0x2c6cd6(0x2ba)]&&CFG[_0x2c6cd6(0x2c8)+'OVERY'][_0x2c6cd6(0x27c)+'AD_BYTES_W'+'ARN']),FALLBACKS['MAX_DOWNLO'+_0x2c6cd6(0x206)+_0x2c6cd6(0x2bd)])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE=_0x2c6cd6(0x25a)+_0x2c6cd6(0x224)+'s',ITEMS_TABLE='status_rec'+_0x2c6cd6(0x2eb)+'s';let respondedMsgIds=new Set();function trackSent(_0x257c3f){const _0x32b35c=_0x2c6cd6;try{const _0x4ef62a=_0x257c3f?.[_0x32b35c(0x231)]?.['id']||_0x257c3f?.['id']||_0x257c3f?.[_0x32b35c(0x303)]&&_0x257c3f[_0x32b35c(0x303)][-0x1*-0x65b+0x1e9*0x6+-0x11d1]?.['key']?.['id']||Array[_0x32b35c(0x2cc)](_0x257c3f)&&_0x257c3f[0x299*0xb+0xb*0xd+-0x16*0x153]?.[_0x32b35c(0x231)]?.['id']||null;if(!_0x4ef62a)return;respondedMsgIds[_0x32b35c(0x1f2)](String(_0x4ef62a));if(respondedMsgIds[_0x32b35c(0x23d)]>DEFAULTS[_0x32b35c(0x236)+_0x32b35c(0x2bf)]){const _0x1652b9=Array[_0x32b35c(0x270)](respondedMsgIds);respondedMsgIds=new Set(_0x1652b9[_0x32b35c(0x329)](-DEFAULTS[_0x32b35c(0x236)+_0x32b35c(0x1f7)]));}}catch(_0x330705){}}function isOurSentId(_0x50053){return _0x50053&&respondedMsgIds['has'](String(_0x50053));}async function getBaileysHelpers(){const _0x13bbcd=_0x2c6cd6;if(_baileysHelpers)return _baileysHelpers;try{const _0x1a2ae6=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x1a2ae6[_0x13bbcd(0x2dc)+'ntentFromM'+_0x13bbcd(0x211)]||_0x1a2ae6[_0x13bbcd(0x239)]?.[_0x13bbcd(0x2dc)+_0x13bbcd(0x287)+'essage']};if(!_baileysHelpers[_0x13bbcd(0x2dc)+_0x13bbcd(0x287)+'essage'])throw new Error(_0x13bbcd(0x2dc)+_0x13bbcd(0x287)+'essage\x20not'+_0x13bbcd(0x308));return _baileysHelpers;}catch(_0x4d123c){error(_0x4d123c,'['+name+(_0x13bbcd(0x23e)+_0x13bbcd(0x2c1)+_0x13bbcd(0x315)));throw _0x4d123c;}}async function streamToBuffer(_0x43c88e){const _0x377a8c=_0x2c6cd6,_0x1c2a00=[];for await(const _0x364306 of _0x43c88e)_0x1c2a00[_0x377a8c(0x26b)](Buffer[_0x377a8c(0x245)](_0x364306)?_0x364306:Buffer[_0x377a8c(0x270)](_0x364306));return Buffer[_0x377a8c(0x2e9)](_0x1c2a00);}function ensureDataDir(){const _0x3f5d3e=_0x2c6cd6;try{const _0x3cefb7=CFG||{},_0x8d9f54=_0x3cefb7['PROJECT_RO'+'OT']&&typeof _0x3cefb7[_0x3f5d3e(0x1ff)+'OT']==='string'?_0x3cefb7[_0x3f5d3e(0x1ff)+'OT']:process[_0x3f5d3e(0x1d9)](),_0xcd6160=typeof DEFAULTS[_0x3f5d3e(0x285)+'TH']===_0x3f5d3e(0x237)&&DEFAULTS['DATA_SUBPA'+'TH'][_0x3f5d3e(0x21b)]()?DEFAULTS[_0x3f5d3e(0x285)+'TH']:null;DATA_DIR=_0xcd6160&&typeof _0xcd6160===_0x3f5d3e(0x237)&&_0xcd6160['trim']()?_0x1351ee[_0x3f5d3e(0x2ab)](_0xcd6160)?_0xcd6160:_0x1351ee[_0x3f5d3e(0x2e0)](_0x8d9f54,_0xcd6160):_0x1351ee[_0x3f5d3e(0x2e0)](_0x8d9f54,FALLBACKS['DATA_SUBPA'+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0xb0d8f=_0x1351ee[_0x3f5d3e(0x2e0)](_0x8d9f54,_0x3f5d3e(0x28a),_0x3f5d3e(0x31e),_0x3f5d3e(0x1d8));if(_0x39ef01[_0x3f5d3e(0x1ed)](_0xb0d8f)&&_0x39ef01[_0x3f5d3e(0x31a)](_0xb0d8f)['isDirector'+'y']()){const _0x401d79=_0x39ef01[_0x3f5d3e(0x247)+'c'](_0xb0d8f)[_0x3f5d3e(0x2c2)](Boolean);for(const _0x5051f9 of _0x401d79){const _0x590e07=_0x1351ee[_0x3f5d3e(0x279)](_0xb0d8f,_0x5051f9),_0x350d06=_0x1351ee[_0x3f5d3e(0x279)](DATA_DIR,_0x5051f9);try{if(!_0x39ef01[_0x3f5d3e(0x1ed)](_0x350d06))_0x39ef01['renameSync'](_0x590e07,_0x350d06);else _0x39ef01[_0x3f5d3e(0x2a7)](_0x590e07);}catch(_0x47c245){}}try{const _0x55ff66=_0x39ef01['readdirSyn'+'c'](_0xb0d8f);if(!_0x55ff66||_0x55ff66[_0x3f5d3e(0x202)]===0x154b+0x16*-0x16e+-0x9*-0x121)_0x39ef01[_0x3f5d3e(0x218)](_0xb0d8f);}catch(_0x40c4f8){}}}catch(_0x187e50){}}catch(_0x1b96b1){warn('['+name+(_0x3f5d3e(0x238)+_0x3f5d3e(0x1d6)+_0x3f5d3e(0x2b5))+(_0x1b96b1?.['message']||_0x1b96b1)),DATA_DIR=_0x1351ee[_0x3f5d3e(0x2e0)](process[_0x3f5d3e(0x1d9)](),FALLBACKS['DATA_SUBPA'+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x45ae3b){}}}async function ensureTables(){const _0x4eb0da=_0x2c6cd6;await db[_0x4eb0da(0x209)](_0x4eb0da(0x2df)+_0x4eb0da(0x2f3)+_0x4eb0da(0x2f7)+PREFS_TABLE+(_0x4eb0da(0x23c)+_0x4eb0da(0x249)+_0x4eb0da(0x255)+_0x4eb0da(0x1f6)+_0x4eb0da(0x2d5)+_0x4eb0da(0x252)+_0x4eb0da(0x281)+_0x4eb0da(0x203)+_0x4eb0da(0x225)+'ULT\x200\x0a\x20\x20\x20\x20'+_0x4eb0da(0x2a1))),await db[_0x4eb0da(0x209)](_0x4eb0da(0x2df)+_0x4eb0da(0x2f3)+_0x4eb0da(0x2f7)+ITEMS_TABLE+(_0x4eb0da(0x23c)+_0x4eb0da(0x2b9)+_0x4eb0da(0x29f)+_0x4eb0da(0x326)+_0x4eb0da(0x311)+'TEXT,\x0a\x20\x20\x20\x20'+_0x4eb0da(0x26d)+_0x4eb0da(0x259)+_0x4eb0da(0x2ff)+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x4eb0da(0x2f4)+'\x0a\x20\x20\x20\x20\x20\x20\x20fi'+_0x4eb0da(0x2ec)+_0x4eb0da(0x1fa)+_0x4eb0da(0x2fb)+_0x4eb0da(0x225)+_0x4eb0da(0x23a)+'\x20\x20\x20\x20create'+_0x4eb0da(0x2a2)+'ER\x20DEFAULT'+_0x4eb0da(0x309)+_0x4eb0da(0x2db)+_0x4eb0da(0x2f9)+_0x4eb0da(0x2f5)+'\x0a\x20\x20\x20\x20\x20\x20\x20me'+_0x4eb0da(0x20f)+_0x4eb0da(0x251)+'ULT\x20\x27\x27\x0a\x20\x20\x20'+_0x4eb0da(0x246)));}async function getPref(_0x2c2a73){const _0x84e4df=_0x2c6cd6;try{const _0x51baec=await db[_0x84e4df(0x2e1)]('SELECT\x20val'+_0x84e4df(0x328)+PREFS_TABLE+('\x20WHERE\x20key'+_0x84e4df(0x2ca)),[_0x2c2a73]);return _0x51baec?_0x51baec['value']:null;}catch(_0x592ee7){return warn('['+name+(']\x20getPref\x20'+_0x84e4df(0x1f9))+(_0x592ee7?.['message']||_0x592ee7)),null;}}async function setPref(_0x3928c4,_0x1f26df){const _0x39a039=_0x2c6cd6;try{const _0x589cce=Math[_0x39a039(0x2b4)](Date['now']()/(0x21d8+0x95a+-0x274a));return await db[_0x39a039(0x1e7)](_0x39a039(0x1ef)+'O\x20'+PREFS_TABLE+(_0x39a039(0x2e6)+'ue,\x20update'+_0x39a039(0x293)+_0x39a039(0x24a)+'?)\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x39a039(0x2b8)+_0x39a039(0x264)+_0x39a039(0x307)+_0x39a039(0x2dd)+_0x39a039(0x24f)+_0x39a039(0x244)+_0x39a039(0x21a)+'ed.updated'+'_at;'),[_0x3928c4,String(_0x1f26df),_0x589cce]),!![];}catch(_0x46d7d9){return warn('['+name+(_0x39a039(0x261)+_0x39a039(0x30c))+(_0x46d7d9?.[_0x39a039(0x2c6)]||_0x46d7d9)),![];}}async function saveItem(_0x24d9e8){const _0x53f4dd=_0x2c6cd6;try{const _0x149ae2=Math[_0x53f4dd(0x2b4)](Date['now']()/(0xafb*-0x1+0x1e8f+-0xfac)),_0x3b3c65=Number(_0x24d9e8[_0x53f4dd(0x273)]||_0x149ae2+DEFAULTS[_0x53f4dd(0x29b)+'DS']);return await db[_0x53f4dd(0x1e7)](_0x53f4dd(0x201)+_0x53f4dd(0x205)+'TO\x20'+ITEMS_TABLE+(_0x53f4dd(0x325)+_0x53f4dd(0x21c)+_0x53f4dd(0x248)+_0x53f4dd(0x213)+'mime,\x20file'+_0x53f4dd(0x324)+_0x53f4dd(0x27d)+_0x53f4dd(0x1d7)+_0x53f4dd(0x286)+'essage_jso'+_0x53f4dd(0x204)+_0x53f4dd(0x1e2)+_0x53f4dd(0x2fd)+'?,\x20?,\x20?,\x20?'+_0x53f4dd(0x1e5)),[_0x24d9e8['id'],_0x24d9e8[_0x53f4dd(0x2b1)+'t']||'',_0x24d9e8['display_na'+'me']||'',_0x24d9e8[_0x53f4dd(0x2e2)]||'',_0x24d9e8['file_path']||'',Number(_0x24d9e8[_0x53f4dd(0x25b)]||0x3*-0x1cb+0x18a2+-0x66b*0x3),Number(_0x24d9e8['created_at']||Math['floor'](Date[_0x53f4dd(0x2f0)]()/(-0x7*0x44f+0xcf6+0x151b))),Number(_0x3b3c65),_0x24d9e8[_0x53f4dd(0x289)+'on']?_0x24d9e8['message_js'+'on']:'']),!![];}catch(_0x5d7c74){return warn('['+name+(_0x53f4dd(0x2e5)+_0x53f4dd(0x1f8))+(_0x5d7c74?.[_0x53f4dd(0x2c6)]||_0x5d7c74)),![];}}async function fetchItemById(_0x5a91a4){const _0x116f02=_0x2c6cd6;try{const _0x124f1e=await db['get']('SELECT\x20*\x20F'+_0x116f02(0x2fe)+ITEMS_TABLE+(_0x116f02(0x1da)+_0x116f02(0x2e8)),[_0x5a91a4]);return _0x124f1e||null;}catch(_0x2a589f){return warn('['+name+(_0x116f02(0x258)+_0x116f02(0x27e)+_0x116f02(0x2a4))+(_0x2a589f?.[_0x116f02(0x2c6)]||_0x2a589f)),null;}}async function deleteItemById(_0x3020d4){const _0x426748=_0x2c6cd6;try{const _0x1ec569=await db['get'](_0x426748(0x297)+_0x426748(0x2ed)+'M\x20'+ITEMS_TABLE+(_0x426748(0x1da)+_0x426748(0x2e8)),[_0x3020d4]);if(_0x1ec569?.[_0x426748(0x323)])try{await _0x5d8a53(_0x1ec569[_0x426748(0x323)])[_0x426748(0x282)](()=>{});}catch(_0x1ccef2){}await db['run']('DELETE\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x426748(0x1da)+_0x426748(0x2e8)),[_0x3020d4]),info('['+name+(_0x426748(0x288)+_0x426748(0x300)+_0x426748(0x2ae))+_0x3020d4);}catch(_0x528524){warn('['+name+(']\x20deleteIt'+_0x426748(0x30b)+_0x426748(0x20c))+(_0x528524?.[_0x426748(0x2c6)]||_0x528524));}}async function sweepExpired(){const _0x24c739=_0x2c6cd6;try{const _0xe4623a=Math[_0x24c739(0x2b4)](Date[_0x24c739(0x2f0)]()/(0x3*0x864+-0x6*0x3ce+0x190)),_0x3598be=await db[_0x24c739(0x265)](_0x24c739(0x2a3)+_0x24c739(0x2c5)+_0x24c739(0x26c)+ITEMS_TABLE+(_0x24c739(0x25d)+_0x24c739(0x298)+'\x20?'),[_0xe4623a]);if(!_0x3598be||_0x3598be['length']===0x15d7+-0x8c3+-0xd14)return;for(const _0x48c588 of _0x3598be){try{if(_0x48c588['file_path'])await _0x5d8a53(_0x48c588['file_path'])['catch'](()=>{});}catch(_0x3468b9){}}const _0x470496=_0x3598be[_0x24c739(0x1f5)](_0x95918a=>_0x95918a['id']);if(_0x470496['length']){const _0x29de51=_0x470496[_0x24c739(0x1f5)](()=>'?')[_0x24c739(0x279)](',');await db[_0x24c739(0x1e7)](_0x24c739(0x2da)+'M\x20'+ITEMS_TABLE+(_0x24c739(0x1da)+_0x24c739(0x292))+_0x29de51+')',_0x470496),info('['+name+_0x24c739(0x1e8)+_0x470496[_0x24c739(0x202)]+(_0x24c739(0x1fd)+_0x24c739(0x22a)+_0x24c739(0x2cf)));}}catch(_0x2c8cf2){warn('['+name+(_0x24c739(0x28c)+_0x24c739(0x1e3)+':\x20')+(_0x2c8cf2?.[_0x24c739(0x2c6)]||_0x2c8cf2));}}function filenameForId(_0x44a37b,_0x2e605e){const _0x290b28=_0x2c6cd6,_0x549b5d={'image/jpeg':'.jpg','image/png':_0x290b28(0x28e),'video/mp4':'.mp4','image/webp':'.webp','audio/ogg':_0x290b28(0x1eb),'audio/mpeg':'.mp3','application/pdf':'.pdf'},_0x3d7fdb=_0x2e605e&&_0x549b5d[_0x2e605e]?_0x549b5d[_0x2e605e]:_0x1351ee[_0x290b28(0x220)](_0x44a37b)||'';return''+_0x44a37b+_0x3d7fdb;}async function readFileAsBuffer(_0xf72107){const _0x428af1=_0x2c6cd6;try{return await _0x39ef01[_0x428af1(0x2a9)][_0x428af1(0x29a)](_0xf72107);}catch(_0x1d2dff){return warn('['+name+(_0x428af1(0x280)+'AsBuffer\x20f'+_0x428af1(0x1dd))+_0xf72107+':\x20'+(_0x1d2dff?.['message']||_0x1d2dff)),null;}}function buildPayloadFromSaved(_0x4ef12d){const _0x2423a0=_0x2c6cd6;if(!_0x4ef12d||!_0x4ef12d['file_path'])return null;const _0x552828=_0x4ef12d['file_path'],_0x3b8a24=(_0x4ef12d[_0x2423a0(0x2e2)]||'')[_0x2423a0(0x320)+'e']();return async function(){const _0xbbac0e=_0x2423a0,_0x11c7ac=await readFileAsBuffer(_0x552828);if(!_0x11c7ac)return null;const _0x2773f7=(_0x4ef12d[_0xbbac0e(0x1db)+'me']?_0x4ef12d[_0xbbac0e(0x1db)+'me']+_0xbbac0e(0x250):'')+(_0xbbac0e(0x2fc)+_0xbbac0e(0x31e));if(_0x3b8a24[_0xbbac0e(0x2ac)](_0xbbac0e(0x283)))return{'image':_0x11c7ac,'caption':_0x2773f7,'mimetype':_0x3b8a24};if(_0x3b8a24[_0xbbac0e(0x2ac)](_0xbbac0e(0x2b7)))return{'video':_0x11c7ac,'caption':_0x2773f7,'mimetype':_0x3b8a24};if(_0x3b8a24[_0xbbac0e(0x2ac)]('audio/'))return{'audio':_0x11c7ac,'ptt':![],'mimetype':_0x3b8a24};return{'document':_0x11c7ac,'fileName':_0x1351ee[_0xbbac0e(0x28f)](_0x552828)||''+_0x4ef12d['id'],'caption':_0x2773f7,'mimetype':_0x3b8a24||undefined};};}async function sendRecoveredToBot(_0x310858){const _0xd886a2=_0x2c6cd6;if(!_0x310858)return![];const _0x5a6cab=getBotJid();if(!_0x5a6cab)return warn('['+name+(_0xd886a2(0x254)+_0xd886a2(0x217)+_0xd886a2(0x27b)+_0xd886a2(0x2d6)+_0xd886a2(0x31d))),![];if(!_0x310858[_0xd886a2(0x323)]||!_0x39ef01[_0xd886a2(0x1ed)](_0x310858['file_path']))return warn('['+name+(']\x20sendReco'+_0xd886a2(0x217)+_0xd886a2(0x266)+_0xd886a2(0x2f6))+_0x310858['id']+_0xd886a2(0x23b)+_0x310858['file_path']),![];const _0x367b33=buildPayloadFromSaved(_0x310858);if(!_0x367b33)return warn('['+name+(_0xd886a2(0x1df)+_0xd886a2(0x30f)+_0xd886a2(0x24b))+_0x310858['id']),![];try{const _0x5c4cc4=await _0x367b33();if(!_0x5c4cc4)return warn('['+name+(_0xd886a2(0x242)+_0xd886a2(0x2a6)+_0xd886a2(0x27a))+_0x310858['id']),![];if(typeof _0x5c4cc4===_0xd886a2(0x2a8)&&_0x5c4cc4!==null){_0x5c4cc4['contextInf'+'o']=_0x5c4cc4[_0xd886a2(0x276)+'o']||{};if(_0x310858[_0xd886a2(0x2b1)+'t'])_0x5c4cc4['contextInf'+'o'][_0xd886a2(0x23f)+'id']=[_0x310858[_0xd886a2(0x2b1)+'t']];}let _0x36fe53=null;if(botRef&&botRef[_0xd886a2(0x1fc)]&&typeof botRef[_0xd886a2(0x1fc)][_0xd886a2(0x302)+'e']==='function')_0x36fe53=await botRef[_0xd886a2(0x1fc)][_0xd886a2(0x302)+'e'](_0x5a6cab,_0x5c4cc4);else{if(botRef&&typeof botRef[_0xd886a2(0x302)+'e']===_0xd886a2(0x26e))_0x36fe53=await botRef[_0xd886a2(0x302)+'e'](_0x5a6cab,_0x5c4cc4);else return warn('['+name+(_0xd886a2(0x254)+_0xd886a2(0x217)+':\x20no\x20sendM'+_0xd886a2(0x215)+_0xd886a2(0x2c0))),![];}return trackSent(_0x36fe53),info('['+name+(_0xd886a2(0x2d3)+_0xd886a2(0x322)+'r\x20')+_0x310858['id']+'\x20->\x20'+_0x5a6cab),!![];}catch(_0x53d0e4){return warn('['+name+(_0xd886a2(0x254)+_0xd886a2(0x217)+'\x20error\x20for'+'\x20')+_0x310858['id']+':\x20'+(_0x53d0e4?.[_0xd886a2(0x2c6)]||_0x53d0e4)),![];}}async function isEnabled(){const _0x1c4267=_0x2c6cd6,_0x5a734f=await getPref(_0x1c4267(0x29e));return _0x5a734f==='1'||_0x5a734f===_0x1c4267(0x2b0);}async function handleStatusUpload(_0x4e05c6){const _0x81fd1c=_0x2c6cd6;try{if(!_0x4e05c6||!_0x4e05c6['key'])return;const _0x29a039=String(_0x4e05c6[_0x81fd1c(0x231)][_0x81fd1c(0x221)]||'')[_0x81fd1c(0x320)+'e']();if(_0x29a039!==_0x81fd1c(0x229)+_0x81fd1c(0x318))return;const _0x2423c0=String(_0x4e05c6[_0x81fd1c(0x231)]['id']||'');if(!_0x2423c0)return;if(!await isEnabled())return;const _0x286be2=await fetchItemById(_0x2423c0);if(_0x286be2)return;const _0x5ae4a0=_0x4e05c6[_0x81fd1c(0x2c6)]||{};let _0x1ec6cd=null;if(_0x5ae4a0[_0x81fd1c(0x301)+'ge'])_0x1ec6cd=_0x81fd1c(0x321);else{if(_0x5ae4a0[_0x81fd1c(0x2ee)+'ge'])_0x1ec6cd=_0x81fd1c(0x2de);else{if(_0x5ae4a0['audioMessa'+'ge'])_0x1ec6cd=_0x81fd1c(0x1e9);else{if(_0x5ae4a0[_0x81fd1c(0x21d)+_0x81fd1c(0x30a)])_0x1ec6cd='document';else{if(_0x5ae4a0[_0x81fd1c(0x284)+_0x81fd1c(0x1f4)])_0x1ec6cd=_0x81fd1c(0x2e7);}}}}if(!_0x1ec6cd)return;const _0x30efb9=_0x1ec6cd===_0x81fd1c(0x321)?_0x81fd1c(0x321):_0x1ec6cd===_0x81fd1c(0x2de)?_0x81fd1c(0x2de):_0x1ec6cd===_0x81fd1c(0x1e9)?_0x81fd1c(0x1e9):_0x81fd1c(0x2b3),_0x18b30d=_0x4e05c6['key'][_0x81fd1c(0x2b1)+'t']||'',_0x43d453=_0x4e05c6[_0x81fd1c(0x1ea)]||'',_0x3a210f=_0x18b30d?_0x18b30d[_0x81fd1c(0x2af)]('@')[0x1*-0x1dd5+-0x12ad+0x3082]:_0x43d453||'';let _0xc20503='',_0xa1b13f='';try{const _0x57f53e=_0x4e05c6[_0x81fd1c(0x2c6)][_0x30efb9+_0x81fd1c(0x21e)]||_0x4e05c6[_0x81fd1c(0x2c6)];_0xa1b13f=_0x57f53e&&_0x57f53e[_0x81fd1c(0x2d0)]?_0x57f53e[_0x81fd1c(0x2d0)]:'';const {downloadContentFromMessage:_0x8586ec}=await getBaileysHelpers(),_0x4962e5=await _0x8586ec(_0x57f53e,_0x30efb9),_0x35e009=await streamToBuffer(_0x4962e5);if(!_0x35e009||!Buffer[_0x81fd1c(0x245)](_0x35e009)||_0x35e009['length']===-0x23f1+-0x9b8+0x2da9)warn('['+name+(_0x81fd1c(0x2cb)+'\x20returned\x20'+_0x81fd1c(0x25f)+_0x81fd1c(0x1ee)+_0x81fd1c(0x304))+_0x2423c0),_0xc20503='';else{const _0x412cd6=filenameForId(_0x2423c0,_0xa1b13f);_0xc20503=_0x1351ee[_0x81fd1c(0x279)](DATA_DIR,_0x412cd6);const _0x142457=_0xc20503+_0x81fd1c(0x2ce)+Date[_0x81fd1c(0x2f0)]();await _0x39ef01[_0x81fd1c(0x2a9)][_0x81fd1c(0x214)](_0x142457,_0x35e009),await _0x39ef01[_0x81fd1c(0x2a9)][_0x81fd1c(0x253)](_0x142457,_0xc20503),info('['+name+(_0x81fd1c(0x314)+_0x81fd1c(0x24e))+_0x2423c0+_0x81fd1c(0x23b)+_0xc20503+'\x20('+_0x35e009[_0x81fd1c(0x202)]+'\x20bytes)'),_0x35e009['length']>DEFAULTS[_0x81fd1c(0x27c)+'AD_BYTES_W'+_0x81fd1c(0x2bd)]&&warn('['+name+(_0x81fd1c(0x2cb)+_0x81fd1c(0x322)+'r\x20')+_0x2423c0+(_0x81fd1c(0x28b)+'\x20')+_0x35e009[_0x81fd1c(0x202)]+'\x20bytes');}}catch(_0x3a5ed2){warn('['+name+(_0x81fd1c(0x2cb)+_0x81fd1c(0x1fb)+_0x81fd1c(0x2c3))+_0x2423c0+':\x20'+(_0x3a5ed2?.[_0x81fd1c(0x2c6)]||_0x3a5ed2)),_0xc20503='';}const _0x193142=Math[_0x81fd1c(0x2b4)](Date['now']()/(0x1d*0x6a+-0x111+-0x709)),_0x3ad074={'id':_0x2423c0,'participant':_0x18b30d,'display_name':_0x3a210f,'mime':_0xa1b13f,'file_path':_0xc20503,'msg_ts':Number(_0x4e05c6[_0x81fd1c(0x2b6)+_0x81fd1c(0x271)]||_0x193142),'created_at':_0x193142,'expires_at':_0x193142+DEFAULTS['KEEP_SECON'+'DS'],'message_json':JSON[_0x81fd1c(0x256)](_0x4e05c6)};await saveItem(_0x3ad074);if(_0xc20503)info('['+name+(_0x81fd1c(0x208)+_0x81fd1c(0x20d)+_0x81fd1c(0x278)+'h\x20for\x20')+_0x2423c0);else info('['+name+(_0x81fd1c(0x208)+_0x81fd1c(0x2aa)+'\x20')+_0x2423c0+(_0x81fd1c(0x313)+'path)'));}catch(_0xbe1ab5){warn('['+name+(']\x20handleSt'+_0x81fd1c(0x1dc)+'\x20error:\x20')+(_0xbe1ab5?.['message']||_0xbe1ab5));}}async function handlePossibleDeletion(_0x19c354){const _0x3e56f2=_0x2c6cd6;try{if(!_0x19c354||!_0x19c354['message'])return;if(!await isEnabled())return;const _0x39dce2=Math[_0x3e56f2(0x2b4)](Date[_0x3e56f2(0x2f0)]()/(0x1*-0x22a+-0x1*0x6f+0x14d*0x5)),_0x500f60=_0x19c354[_0x3e56f2(0x2c6)]['protocolMe'+'ssage'];if(_0x500f60&&_0x500f60['key']){const _0x2b3b8a=_0x500f60[_0x3e56f2(0x231)]||{},_0x1955c5=String(_0x2b3b8a[_0x3e56f2(0x221)]||'')['toLowerCas'+'e']();if(_0x1955c5==='status@bro'+_0x3e56f2(0x318)){const _0x4cdf6f=String(_0x2b3b8a['id']||'');if(!_0x4cdf6f)return;const _0x5eeacf=await fetchItemById(_0x4cdf6f);if(!_0x5eeacf){warn('['+name+(_0x3e56f2(0x222)+'\x20for\x20statu'+'s\x20')+_0x4cdf6f+('\x20but\x20no\x20sa'+_0x3e56f2(0x22b)+_0x3e56f2(0x2ef)));return;}if(Number(_0x5eeacf[_0x3e56f2(0x273)]||-0x1*-0x20cd+-0x159b*-0x1+-0x3668*0x1)<=_0x39dce2){await deleteItemById(_0x4cdf6f),info('['+name+(_0x3e56f2(0x1f0)+_0x3e56f2(0x300)+_0x3e56f2(0x2ae))+_0x4cdf6f+('\x20removed\x20('+'no\x20resend)'));return;}const _0x58e1d3=await sendRecoveredToBot(_0x5eeacf);_0x58e1d3?(info('['+name+(_0x3e56f2(0x31f)+_0x3e56f2(0x2f8)+'status\x20')+_0x4cdf6f+_0x3e56f2(0x232)),await deleteItemById(_0x4cdf6f),info('['+name+(_0x3e56f2(0x288)+_0x3e56f2(0x300)+_0x3e56f2(0x2ae))+_0x4cdf6f+(_0x3e56f2(0x223)+_0x3e56f2(0x1ec)+'send'))):warn('['+name+(']\x20failed\x20t'+_0x3e56f2(0x210)+_0x3e56f2(0x2c7)+_0x3e56f2(0x304))+_0x4cdf6f);return;}}if((_0x19c354[_0x3e56f2(0x24d)+_0x3e56f2(0x1fe)]||_0x19c354[_0x3e56f2(0x2c6)]?.[_0x3e56f2(0x24d)+_0x3e56f2(0x1fe)])&&Array['isArray'](_0x19c354[_0x3e56f2(0x2c6)]?.['messageStu'+_0x3e56f2(0x243)+'s'])){const _0x5d6a3b=_0x19c354[_0x3e56f2(0x2c6)]['messageStu'+_0x3e56f2(0x243)+'s'];if(_0x5d6a3b[_0x3e56f2(0x202)]>-0x392*-0xa+0x10*0x72+-0x2ad3&&String(_0x5d6a3b[0x1*0x21cb+-0x1dbd+-0x15a*0x3])[_0x3e56f2(0x320)+'e']()[_0x3e56f2(0x269)]('revoke')){for(let _0x1e1c07=0x2*-0x6e9+0x1237+-0x464;_0x1e1c07<_0x5d6a3b[_0x3e56f2(0x202)];_0x1e1c07++){const _0x218002=String(_0x5d6a3b[_0x1e1c07]||'');if(!_0x218002)continue;const _0x5970d3=await fetchItemById(_0x218002);if(!_0x5970d3){warn('['+name+(_0x3e56f2(0x30e)+_0x3e56f2(0x291)+_0x3e56f2(0x24e))+_0x218002+(_0x3e56f2(0x310)+_0x3e56f2(0x22b)+_0x3e56f2(0x2ef)));continue;}if(Number(_0x5970d3[_0x3e56f2(0x273)]||0x9*-0x315+-0x9*-0x3f1+0xf*-0x84)<=_0x39dce2){await deleteItemById(_0x218002),info('['+name+(']\x20expired\x20'+'saved\x20stat'+'us\x20')+_0x218002+(_0x3e56f2(0x2d8)+_0x3e56f2(0x2e3)));continue;}if(!_0x5970d3['file_path']||!_0x39ef01[_0x3e56f2(0x1ed)](_0x5970d3['file_path'])){warn('['+name+(']\x20file\x20mis'+'sing\x20for\x20')+_0x218002+':\x20'+_0x5970d3[_0x3e56f2(0x323)]);continue;}const _0x521a9d=await sendRecoveredToBot(_0x5970d3);_0x521a9d?(info('['+name+(_0x3e56f2(0x31f)+_0x3e56f2(0x2f8)+_0x3e56f2(0x2bc))+_0x218002+'\x20->\x20sent'),await deleteItemById(_0x218002),info('['+name+(_0x3e56f2(0x288)+_0x3e56f2(0x300)+_0x3e56f2(0x2ae))+_0x218002+('\x20after\x20suc'+_0x3e56f2(0x1ec)+'send'))):warn('['+name+(_0x3e56f2(0x23e)+'o\x20send\x20rec'+_0x3e56f2(0x2c7)+'tus\x20')+_0x218002);}return;}}const _0x45f3e0=_0x19c354[_0x3e56f2(0x2c6)]?.['extendedTe'+_0x3e56f2(0x2d1)]?.[_0x3e56f2(0x276)+'o']?.[_0x3e56f2(0x275)+_0x3e56f2(0x226)];if(_0x45f3e0&&_0x45f3e0[_0x3e56f2(0x230)+_0x3e56f2(0x30a)]&&_0x45f3e0[_0x3e56f2(0x230)+_0x3e56f2(0x30a)][_0x3e56f2(0x231)]){const _0x1f797a=_0x45f3e0['protocolMe'+_0x3e56f2(0x30a)]['key'];if(String(_0x1f797a[_0x3e56f2(0x221)]||'')[_0x3e56f2(0x320)+'e']()===_0x3e56f2(0x229)+'adcast'){const _0x10c684=String(_0x1f797a['id']||'');if(!_0x10c684)return;const _0x39be25=await fetchItemById(_0x10c684);if(!_0x39be25)return;if(Number(_0x39be25[_0x3e56f2(0x273)]||0x20d*-0xa+-0x6e3*-0x1+0x13d*0xb)<=_0x39dce2){await deleteItemById(_0x10c684),info('['+name+(_0x3e56f2(0x1f0)+_0x3e56f2(0x300)+_0x3e56f2(0x2ae))+_0x10c684+(_0x3e56f2(0x2d8)+_0x3e56f2(0x2e3)));return;}if(!_0x39be25['file_path']||!_0x39ef01[_0x3e56f2(0x1ed)](_0x39be25[_0x3e56f2(0x323)])){warn('['+name+(_0x3e56f2(0x296)+_0x3e56f2(0x2c4)+'r\x20')+_0x10c684+(_0x3e56f2(0x1e4)+'missing\x20at'+'\x20')+_0x39be25[_0x3e56f2(0x323)]);return;}const _0x29de9c=await sendRecoveredToBot(_0x39be25);_0x29de9c?(info('['+name+(_0x3e56f2(0x31f)+_0x3e56f2(0x2f8)+_0x3e56f2(0x2bc))+_0x10c684+_0x3e56f2(0x232)),await deleteItemById(_0x10c684),info('['+name+(']\x20removed\x20'+_0x3e56f2(0x300)+'us\x20')+_0x10c684+(_0x3e56f2(0x223)+_0x3e56f2(0x1ec)+'send'))):warn('['+name+(_0x3e56f2(0x23e)+_0x3e56f2(0x210)+_0x3e56f2(0x2c7)+_0x3e56f2(0x304))+_0x10c684);return;}}}catch(_0x2fd2d2){warn('['+name+(']\x20handlePo'+_0x3e56f2(0x295)+_0x3e56f2(0x212)+':\x20')+(_0x2fd2d2?.[_0x3e56f2(0x2c6)]||_0x2fd2d2));}}async function rawMessagesUpsertHandler({messages:_0x2d6847}){const _0x3f5dc6=_0x2c6cd6;if(!Array['isArray'](_0x2d6847))return;if(!await isEnabled())return;for(const _0xa8238a of _0x2d6847){try{if(!_0xa8238a||!_0xa8238a['key'])continue;if(isOurSentId(_0xa8238a['key']?.['id']))continue;if(_0xa8238a[_0x3f5dc6(0x231)][_0x3f5dc6(0x299)])continue;const _0x4f490a=String(_0xa8238a[_0x3f5dc6(0x231)]['remoteJid']||'')[_0x3f5dc6(0x320)+'e']();if(_0x4f490a===_0x3f5dc6(0x229)+'adcast'){await handleStatusUpload(_0xa8238a)[_0x3f5dc6(0x282)](_0x178de0=>warn('['+name+(']\x20upload\x20a'+_0x3f5dc6(0x305)+'led:\x20')+(_0x178de0?.[_0x3f5dc6(0x2c6)]||_0x178de0))),await handlePossibleDeletion(_0xa8238a)[_0x3f5dc6(0x282)](_0x16c30e=>warn('['+name+(_0x3f5dc6(0x222)+_0x3f5dc6(0x257)+_0x3f5dc6(0x1de))+(_0x16c30e?.[_0x3f5dc6(0x2c6)]||_0x16c30e)));continue;}await handlePossibleDeletion(_0xa8238a)[_0x3f5dc6(0x282)](_0x2598de=>warn('['+name+(_0x3f5dc6(0x222)+'\x20handle\x20fa'+_0x3f5dc6(0x1de))+(_0x2598de?.[_0x3f5dc6(0x2c6)]||_0x2598de)));}catch(_0x48b056){warn('['+name+(']\x20raw\x20per-'+_0x3f5dc6(0x22d)+'ror:\x20')+(_0x48b056?.['message']||_0x48b056));}}}function getMessageTextFromCtx(_0x4667ac){const _0x4df746=_0x2c6cd6;if(!_0x4667ac||!_0x4667ac[_0x4df746(0x2c6)])return'';const _0x54eaec=_0x4667ac['message'];if(_0x54eaec[_0x4df746(0x30d)+'on'])return _0x54eaec[_0x4df746(0x30d)+'on'];if(_0x54eaec[_0x4df746(0x2a5)+_0x4df746(0x2d1)]?.[_0x4df746(0x26a)])return _0x54eaec[_0x4df746(0x2a5)+'xtMessage'][_0x4df746(0x26a)];if(_0x54eaec[_0x4df746(0x301)+'ge']?.['caption'])return _0x54eaec[_0x4df746(0x301)+'ge']['caption'];if(_0x54eaec[_0x4df746(0x2ee)+'ge']?.[_0x4df746(0x277)])return _0x54eaec['videoMessa'+'ge'][_0x4df746(0x277)];return'';}export async function onMessage(_0xf67a37){const _0x22b319=_0x2c6cd6;try{if(!_0xf67a37||!_0xf67a37['key']||!_0xf67a37[_0x22b319(0x2c6)])return;const _0x4978e3=_0xf67a37[_0x22b319(0x231)][_0x22b319(0x221)];if(typeof _0x4978e3==='string'&&_0x4978e3[_0x22b319(0x272)](_0x22b319(0x2bb)))return;if(!_0xf67a37[_0x22b319(0x231)][_0x22b319(0x299)])return;if(_0xf67a37[_0x22b319(0x231)]['id']&&isOurSentId(_0xf67a37[_0x22b319(0x231)]['id']))return;const _0x5a03ac=typeof _0xf67a37[_0x22b319(0x26a)]===_0x22b319(0x237)&&_0xf67a37['text'][_0x22b319(0x21b)]()[_0x22b319(0x202)]?_0xf67a37['text'][_0x22b319(0x21b)]():'',_0x439c4b=(getMessageTextFromCtx(_0xf67a37)||'')['toString']()[_0x22b319(0x21b)](),_0x1a2194=(_0x5a03ac||_0x439c4b||'')[_0x22b319(0x2af)](/\r?\n/)[-0x72d+-0x824+-0x1*-0xf51][_0x22b319(0x21b)]();if(!_0x1a2194)return;const _0x4e5e6c=/^antidelete\s+status(?:\s+(on|off|show))?$/i[_0x22b319(0x209)](_0x1a2194);if(!_0x4e5e6c)return;const _0x682240=(_0x4e5e6c[0x16df*0x1+-0x5d*0x1f+-0xb9b]||'show')[_0x22b319(0x320)+'e'](),_0x2a97dd=getBotJid();if(!_0x2a97dd){warn('['+name+(_0x22b319(0x26f)+_0x22b319(0x25c)+_0x22b319(0x234)+_0x22b319(0x2fa)+_0x22b319(0x31c)));return;}if(_0x682240===_0x22b319(0x2e4)){const _0x40a3af=await isEnabled(),_0x33def0=_0x22b319(0x233)+_0x22b319(0x2b2)+'\x20'+(_0x40a3af?'ON':_0x22b319(0x22e))+(_0x22b319(0x24c)+'es\x20dir:\x20')+DATA_DIR,_0x4b1d71=await(botRef?.['sock']?.[_0x22b319(0x302)+'e']?botRef[_0x22b319(0x1fc)][_0x22b319(0x302)+'e'](_0x2a97dd,{'text':_0x33def0}):botRef[_0x22b319(0x302)+'e'](_0x2a97dd,{'text':_0x33def0}));trackSent(_0x4b1d71);return;}if(_0x682240==='on'||_0x682240===_0x22b319(0x319)){const _0x57c41d=_0x682240==='on'?'1':'0',_0x3b8f11=await setPref(_0x22b319(0x29e),_0x57c41d),_0x5a674c=_0x3b8f11?'✔️\x20antidele'+_0x22b319(0x21f)+'set\x20to\x20'+_0x682240['toUpperCas'+'e']():_0x22b319(0x317)+_0x22b319(0x216)+_0x22b319(0x2d4)+_0x22b319(0x240),_0x487149=await(botRef?.[_0x22b319(0x1fc)]?.['sendMessag'+'e']?botRef[_0x22b319(0x1fc)][_0x22b319(0x302)+'e'](_0x2a97dd,{'text':_0x5a674c}):botRef[_0x22b319(0x302)+'e'](_0x2a97dd,{'text':_0x5a674c}));trackSent(_0x487149);return;}}catch(_0x4ed8d9){warn('['+name+(_0x22b319(0x26f)+_0x22b319(0x235))+(_0x4ed8d9?.[_0x22b319(0x2c6)]||_0x4ed8d9));}}export async function initialize(_0x1d8355){const _0x1e08e0=_0x2c6cd6;if(!_0x1d8355)throw new Error(_0x1e08e0(0x25a)+'overy.init'+'ialize\x20req'+'uires\x20bot\x20'+'instance');botRef=_0x1d8355,ensureDataDir(),await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x1e08e0(0x294)+'psert','handler':rawMessagesUpsertHandler,'moduleName':name}),cleanupInterval=setInterval(()=>sweepExpired()[_0x1e08e0(0x282)](()=>{}),DEFAULTS[_0x1e08e0(0x274)+_0x1e08e0(0x262)]);try{await sweepExpired();}catch(_0x50e315){}info('['+name+(_0x1e08e0(0x2ad)+_0x1e08e0(0x228)+_0x1e08e0(0x2d2))+DATA_DIR+(_0x1e08e0(0x20e)+'S=')+DEFAULTS[_0x1e08e0(0x274)+_0x1e08e0(0x262)]+'\x20KEEP_SEC='+DEFAULTS['KEEP_SECON'+'DS']);}export async function cleanup(){const _0x5b959d=_0x2c6cd6;try{stopManagedListener(name,_0x5b959d(0x294)+_0x5b959d(0x260));}catch(_0x5ec726){warn('['+name+(_0x5b959d(0x207)+'stopManage'+_0x5b959d(0x2f1)+_0x5b959d(0x1f9))+(_0x5ec726?.[_0x5b959d(0x2c6)]||_0x5ec726));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x5b33ea){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds[_0x5b959d(0x200)]===_0x5b959d(0x26e))respondedMsgIds[_0x5b959d(0x200)]();_baileysHelpers=null;}function _0x3e16(_0x2cb8bf,_0x40e2da){const _0x2adc76=_0x2f1d();return _0x3e16=function(_0x479fc5,_0x367193){_0x479fc5=_0x479fc5-(-0x5f2+-0x5b0*0x3+0x18d8*0x1);let _0x3c32e8=_0x2adc76[_0x479fc5];return _0x3c32e8;},_0x3e16(_0x2cb8bf,_0x40e2da);}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};