const _0x2fc8c4=_0xa855;(function(_0x13b235,_0x3ab49d){const _0x5b407c=_0xa855,_0x2efe35=_0x13b235();while(!![]){try{const _0x426faf=-parseInt(_0x5b407c(0x110))/(0x24ac+-0x1*0xc82+-0x1829)*(parseInt(_0x5b407c(0x195))/(0x398*-0x8+-0x1*-0x1b83+0x1*0x13f))+parseInt(_0x5b407c(0x98))/(-0x11d5+-0x293*0x3+0x1991)+-parseInt(_0x5b407c(0xae))/(0x1e26+-0x1c3e+-0x1e4)*(-parseInt(_0x5b407c(0x19b))/(0x19d3+-0x1*-0x943+-0x2311))+-parseInt(_0x5b407c(0x1da))/(0x49*-0x7f+-0x1a6c+0x3ea9)+parseInt(_0x5b407c(0x1c3))/(0x942+-0x118d*-0x1+0x1*-0x1ac8)*(parseInt(_0x5b407c(0x1a1))/(0x2ac+0xd31+-0xfd5))+-parseInt(_0x5b407c(0x169))/(0x2cc*0x8+-0xa73+-0xbe4)+parseInt(_0x5b407c(0x168))/(0x1*-0x242e+-0xa44+0x19*0x1dc);if(_0x426faf===_0x3ab49d)break;else _0x2efe35['push'](_0x2efe35['shift']());}catch(_0x355a15){_0x2efe35['push'](_0x2efe35['shift']());}}}(_0x5a2d,0x18fbb+-0x85437+0xe8f97));import _0x4c15dd from'fs';import _0x53c3b2 from'path';import{mkdirSync}from'fs';import{rm as _0x11e07b}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';function _0x5a2d(){const _0x13609b=['\x20available','.\x20Falling\x20',']\x20onMessag','iled:\x20','adcast','\x0a\x20\x20\x20\x20\x20\x20\x20me','eply','writeFile','message_js','unlinkSync','contextInf','ound','luded.valu','STATUS_REC','eletion\x20fo','instance','Recovered\x20','\x20failed:\x20','slice','d()\x20return','message\x20er','AsBuffer\x20f','status','age','documentMe','existsSync','4WyRsbZ',']\x20readFile','document','sendMessag','\x20\x20\x20display','status_rec','2245GJMCGT','\x20after\x20suc','ue\x20FROM\x20',']\x20removed\x20','TRIM_KEEP','toLowerCas','6280lVtCOB','ed\x20empty','\x20?,\x20?,\x20?,\x20','video','ed.updated','LIMIT','YTES_WARN','ssage_json','uires\x20bot\x20','\x20bytes','e\x20error:\x20','show','EXISTS\x20','\x20status','essage\x20ava','\x20but\x20file\x20','d_at)\x20VALU','set\x20to\x20','UPDATE\x20SET','\x20FROM\x20','RESPONDED_','mentionedJ','empty\x20buff','message',':\x20file\x20mis',']\x20cleanup\x20',']\x20raw\x20per-','mById\x20fail','MAX_DOWNLO','image',']\x20fetchIte','expires_at','\x0a\x20\x20\x20\x20\x20\x20\x20pa',']\x20deletion','7553qJBxqH','led:\x20','stringify','messages','SELECT\x20val','value',']\x20upload\x20a',']\x20download','te\x20status\x20','exec','.jpg','DELETE\x20FRO','key\x20TEXT\x20P','ON\x20CONFLIC',']\x20DB\x20saved','readdirSyn',']\x20ensureDa','clear','\x20handle\x20fa','essage_jso','basename','\x20for\x20statu','audioMessa','3616884SvQLNO','DOWNLOAD_B','ARN','bType','taDir\x20erro','\x20(no\x20file_','aileys','t\x20INTEGER\x20','remoteJid','isDirector','VALUES\x20(?,','ed\x20for\x20','emById\x20fai','extendedTe','failed:\x20','IN\x20(','mime,\x20file','\x20\x20);','created_at','tus\x20','2501421vlzTnQ','msg_ts','messages.u','downloadCo','videoMessa','has','stickerMes','OVERY_KEEP','.png','tmp',']\x20saveItem','\x20value=exc','?)\x0a\x20\x20\x20\x20\x20\x20\x20','data','RIMARY\x20KEY','\x20\x20\x20\x20\x20\x20\x20upd','resolve','ROM\x20','\x20is\x20large:','\x0a\x20\x20\x20\x20\x20\x20\x20(i','ssibleDele','_KEEP','3316RMKomr','conversati','❌\x20Failed\x20t','ER\x20DEFAULT','estamp','overed\x20sta','\x20\x20\x20\x20create','_at=exclud','\x20->\x20','image/','veredToBot','caption',']\x20no\x20paylo','e_path\x20FRO','NOT\x20NULL,\x0a','ULT\x20\x27\x27\x0a\x20\x20\x20','s(es)','\x20removed\x20(','isBuffer','\x20->\x20sent','ilable','sing\x20for\x20','d\x20deleted\x20','h\x20for\x20','zed.\x20DATA_','path)',']\x20sendReco','\x20bytes)','\x20=\x20?','\x20WHERE\x20id\x20','catch','bParameter','ailed\x20for\x20','now',']\x20quoted\x20d','LE\x20IF\x20NOT\x20',':\x20getBotJi','tus','file_path',']\x20cleaned\x20','\x200,\x0a\x20\x20\x20\x20\x20\x20','function','mimetype','join','\x20failed\x20fo','Message','get','.tmp-','ad\x20maker\x20f','_name\x20TEXT','key',']\x20file\x20mis','NUP_INTERV','ONDED_TRIM','INSERT\x20INT','✔️\x20antidele','@g.us','video/',']\x20expired\x20','OVERY_DIR',']\x20recovere','ES\x20(?,\x20?,\x20','ires_at,\x20m','\x0aSaved\x20fil','e,\x20updated','no\x20resend)','overy.init','\x20DEFAULT\x20\x27','\x20returned\x20','add','IMARY\x20KEY,','mime','ed:\x20','delete\x20sta','cwd','ror:\x20','OVERY_RESP','d_at\x20INTEG','revoke','n)\x0a\x20\x20\x20\x20\x20\x20\x20','audio/','off',']\x20handlePo','run','r:\x20','messageStu','o\x20send\x20rec','TEGER\x20DEFA','TO\x20','ssage','antidelete','e:\x20getBotJ','atus\x20','toString','true','us\x20','extname','aved\x20statu','503555DdRYRw','\x20entry\x20wit','REPLACE\x20IN','all','participan','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','isArray','fromMe','\x20expires_a','startsWith','ue,\x20update','SELECT\x20fil','saved\x20stat','protocolMe','oke\x20for\x20st','object','OVERY','lay_name,\x20','AD_BYTES_W','_SECONDS','psert','status\x20','o\x20set\x20anti','2.3.2','te\x20status:','endsWith','sock','pant,\x20disp','\x20file_path','sage','ed\x20file\x20fo','.ogg','CREATE\x20TAB','string','status@bro','\x20);',']\x20payload\x20','from','imageMessa','map','.mp4',']\x20getConfi',']\x20getPref\x20','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','promises','DATA_SUBPA','ttempt\x20fai','error:\x20','filter','overy_pref','ed_at,\x20exp','ULT\x200,\x0a\x20\x20\x20','\x20expired\x20s','stopManage',']\x20sent\x20sav','OVERY_MAX_','\x20error\x20for','size','es\x20dir:\x20','=\x20?','floor','dListener\x20','rticipant\x20','TERVAL_MS','\x0a\x20\x20\x20\x20\x20\x20\x20fi',']\x20initiali','AL_MS','OVERY_CLEA','or\x20','KEEP_SECON','split','essage\x20not','messageTim','o\x20import\x20B',':\x20no\x20sendM','ONDED_LIMI','ved\x20copy\x20f','.pdf','\x20WHERE\x20key','DEFAULT\x200,','display_na','back\x20to\x20de','length','xtMessage','_ts,\x20creat',']\x20deleteIt','enabled','cessful\x20re','3841710zZKDMu','2848887lXfDYp','XT,\x0a\x20\x20\x20\x20\x20\x20','trim','id\x20TEXT\x20PR','sticker','push','includes','ired\x20error','tion\x20error','PROJECT_RO',',\x20?)','ntentFromM','rmdirSync','audio','overy_item','text',',\x0a\x20\x20\x20\x20\x20\x20\x20v','ialize\x20req'];_0x5a2d=function(){return _0x13609b;};return _0x5a2d();}import{getConfig}from'../utils/config.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x2fc8c4(0x19a)+'overy';export const version=_0x2fc8c4(0x127);export const priority=0x13fc+-0x1*-0xe3+-0x1471;export const commands=[_0x2fc8c4(0x108)+_0x2fc8c4(0x1ae)];export const configKeys=[_0x2fc8c4(0x172)+'OT',_0x2fc8c4(0x188)+_0x2fc8c4(0xe9),'STATUS_REC'+'OVERY_CLEA'+_0x2fc8c4(0xe2)+_0x2fc8c4(0x152),_0x2fc8c4(0x188)+_0x2fc8c4(0x9f)+_0x2fc8c4(0x123),_0x2fc8c4(0x188)+'OVERY_RESP'+_0x2fc8c4(0x15b)+'T',_0x2fc8c4(0x188)+_0x2fc8c4(0xfa)+_0x2fc8c4(0xe3)+_0x2fc8c4(0xad),_0x2fc8c4(0x188)+_0x2fc8c4(0x147)+_0x2fc8c4(0x1db)+'YTES_WARN'];let CFG={};try{CFG=typeof getConfig===_0x2fc8c4(0xd7)?getConfig()||{}:{};}catch(_0x22926e){warn('['+name+(_0x2fc8c4(0x139)+'g()\x20threw:'+'\x20')+(_0x22926e?.[_0x2fc8c4(0x1b8)]||_0x22926e)+(_0x2fc8c4(0x17c)+_0x2fc8c4(0x161)+'faults.')),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x53c3b2[_0x2fc8c4(0xd9)](_0x2fc8c4(0xa5),_0x2fc8c4(0x191)),'CLEANUP_INTERVAL_MS':(-0xd*-0x2ce+-0xac7+-0x1997)*(0x1dd8+0xbe6*0x1+-0x2982)*(0xc86*-0x1+0x8ab*0x2+-0x4*0x125)*(-0x28f*-0xc+0x18*-0x85+-0xe54),'KEEP_SECONDS':(0x1ca6+-0x14de+-0x6*0x148)*(-0x1*0x1422+0x1*-0xc09+0x2067)*(-0x3*0xc0b+0x15f1+-0x1a*-0x8e),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(0x1fac+0x26a1+0x1*-0x4643)*(0x2c+0x1745*-0x1+0x1*0x1b19)*(0xbf1+0xdc3+-0x15b4)};function toPositiveInt(_0xf16b29,_0x252d6d){const _0x2ada00=_0x2fc8c4,_0x5ae943=Number(_0xf16b29);if(!Number['isFinite'](_0x5ae943)||_0x5ae943<=0x1*0x1eff+-0x1994+0x13*-0x49)return _0x252d6d;return Math[_0x2ada00(0x14c)](_0x5ae943);}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0xe9)]===_0x2fc8c4(0x131)&&CFG['STATUS_REC'+_0x2fc8c4(0xe9)][_0x2fc8c4(0x16b)]()?CFG['STATUS_REC'+_0x2fc8c4(0xe9)]:FALLBACKS[_0x2fc8c4(0x13d)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG['STATUS_REC'+_0x2fc8c4(0x153)+'NUP_INTERV'+'AL_MS']??(CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)]&&CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)]['CLEANUP_IN'+_0x2fc8c4(0x14f)]),FALLBACKS['CLEANUP_IN'+_0x2fc8c4(0x14f)]),'KEEP_SECONDS':toPositiveInt(CFG[_0x2fc8c4(0x188)+'OVERY_KEEP'+'_SECONDS']??(CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)]&&CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)][_0x2fc8c4(0x155)+'DS']),FALLBACKS['KEEP_SECON'+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0xfa)+'ONDED_LIMI'+'T']??(CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)]&&CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)][_0x2fc8c4(0x1b5)+_0x2fc8c4(0x1a6)]),FALLBACKS[_0x2fc8c4(0x1b5)+_0x2fc8c4(0x1a6)]),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG['STATUS_REC'+_0x2fc8c4(0xfa)+_0x2fc8c4(0xe3)+'_KEEP']??(CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)]&&CFG['STATUS_REC'+_0x2fc8c4(0x120)][_0x2fc8c4(0x1b5)+_0x2fc8c4(0x19f)]),FALLBACKS[_0x2fc8c4(0x1b5)+'TRIM_KEEP']),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x147)+_0x2fc8c4(0x1db)+_0x2fc8c4(0x1a7)]??(CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)]&&CFG[_0x2fc8c4(0x188)+_0x2fc8c4(0x120)][_0x2fc8c4(0x1bd)+_0x2fc8c4(0x122)+_0x2fc8c4(0x1dc)]),FALLBACKS[_0x2fc8c4(0x1bd)+'AD_BYTES_W'+_0x2fc8c4(0x1dc)])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE='status_rec'+_0x2fc8c4(0x141)+'s',ITEMS_TABLE=_0x2fc8c4(0x19a)+_0x2fc8c4(0x177)+'s';let respondedMsgIds=new Set();function trackSent(_0x29ef37){const _0x28854c=_0x2fc8c4;try{const _0x2d88af=_0x29ef37?.['key']?.['id']||_0x29ef37?.['id']||_0x29ef37?.['messages']&&_0x29ef37[_0x28854c(0x1c6)][-0x35*0x5a+-0x1472+0x2714]?.[_0x28854c(0xe0)]?.['id']||Array[_0x28854c(0x116)](_0x29ef37)&&_0x29ef37[0x1*0x13ed+0x250f*-0x1+0x1122]?.['key']?.['id']||null;if(!_0x2d88af)return;respondedMsgIds[_0x28854c(0xf3)](String(_0x2d88af));if(respondedMsgIds[_0x28854c(0x149)]>DEFAULTS[_0x28854c(0x1b5)+_0x28854c(0x1a6)]){const _0x3d1a14=Array[_0x28854c(0x135)](respondedMsgIds);respondedMsgIds=new Set(_0x3d1a14[_0x28854c(0x18d)](-DEFAULTS[_0x28854c(0x1b5)+_0x28854c(0x19f)]));}}catch(_0x1dfe94){}}function isOurSentId(_0x130239){const _0x59e8b8=_0x2fc8c4;return _0x130239&&respondedMsgIds[_0x59e8b8(0x9d)](String(_0x130239));}async function getBaileysHelpers(){const _0x1e6c3d=_0x2fc8c4;if(_baileysHelpers)return _baileysHelpers;try{const _0x1857be=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x1857be['downloadCo'+_0x1e6c3d(0x174)+'essage']||_0x1857be['default']?.[_0x1e6c3d(0x9b)+'ntentFromM'+'essage']};if(!_baileysHelpers[_0x1e6c3d(0x9b)+_0x1e6c3d(0x174)+'essage'])throw new Error(_0x1e6c3d(0x9b)+_0x1e6c3d(0x174)+_0x1e6c3d(0x157)+_0x1e6c3d(0x17b));return _baileysHelpers;}catch(_0x7f6f13){error(_0x7f6f13,'['+name+(']\x20failed\x20t'+_0x1e6c3d(0x159)+_0x1e6c3d(0x1e0)));throw _0x7f6f13;}}async function streamToBuffer(_0x37c3cd){const _0x429e95=_0x2fc8c4,_0x2bd4a3=[];for await(const _0x2a9bff of _0x37c3cd)_0x2bd4a3[_0x429e95(0x16e)](Buffer[_0x429e95(0xc0)](_0x2a9bff)?_0x2a9bff:Buffer[_0x429e95(0x135)](_0x2a9bff));return Buffer['concat'](_0x2bd4a3);}function ensureDataDir(){const _0x4be35d=_0x2fc8c4;try{const _0x2d709a=CFG||{},_0x1d5288=_0x2d709a[_0x4be35d(0x172)+'OT']&&typeof _0x2d709a[_0x4be35d(0x172)+'OT']===_0x4be35d(0x131)?_0x2d709a[_0x4be35d(0x172)+'OT']:process[_0x4be35d(0xf8)](),_0x305755=typeof DEFAULTS['DATA_SUBPA'+'TH']===_0x4be35d(0x131)&&DEFAULTS['DATA_SUBPA'+'TH'][_0x4be35d(0x16b)]()?DEFAULTS['DATA_SUBPA'+'TH']:null;DATA_DIR=_0x305755&&typeof _0x305755==='string'&&_0x305755['trim']()?_0x53c3b2['isAbsolute'](_0x305755)?_0x305755:_0x53c3b2[_0x4be35d(0xa8)](_0x1d5288,_0x305755):_0x53c3b2[_0x4be35d(0xa8)](_0x1d5288,FALLBACKS['DATA_SUBPA'+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0x4016f8=_0x53c3b2['resolve'](_0x1d5288,_0x4be35d(0xa5),'status',_0x4be35d(0xa1));if(_0x4c15dd[_0x4be35d(0x194)](_0x4016f8)&&_0x4c15dd['statSync'](_0x4016f8)[_0x4be35d(0x1e3)+'y']()){const _0x12d4b8=_0x4c15dd[_0x4be35d(0x1d2)+'c'](_0x4016f8)[_0x4be35d(0x140)](Boolean);for(const _0x552dfb of _0x12d4b8){const _0x45e3c4=_0x53c3b2[_0x4be35d(0xd9)](_0x4016f8,_0x552dfb),_0x2b6ef3=_0x53c3b2[_0x4be35d(0xd9)](DATA_DIR,_0x552dfb);try{if(!_0x4c15dd[_0x4be35d(0x194)](_0x2b6ef3))_0x4c15dd['renameSync'](_0x45e3c4,_0x2b6ef3);else _0x4c15dd[_0x4be35d(0x184)](_0x45e3c4);}catch(_0x59c41f){}}try{const _0x3fc951=_0x4c15dd[_0x4be35d(0x1d2)+'c'](_0x4016f8);if(!_0x3fc951||_0x3fc951[_0x4be35d(0x162)]===0x818+0x660+-0xe78)_0x4c15dd[_0x4be35d(0x175)](_0x4016f8);}catch(_0x2bbb98){}}}catch(_0x1aa1f0){}}catch(_0x5df3d3){warn('['+name+(_0x4be35d(0x1d3)+_0x4be35d(0x1de)+_0x4be35d(0x102))+(_0x5df3d3?.[_0x4be35d(0x1b8)]||_0x5df3d3)),DATA_DIR=_0x53c3b2[_0x4be35d(0xa8)](process['cwd'](),FALLBACKS[_0x4be35d(0x13d)+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x1c8bf7){}}}async function ensureTables(){const _0x25c690=_0x2fc8c4;await db[_0x25c690(0x1cc)](_0x25c690(0x130)+_0x25c690(0xd1)+_0x25c690(0x1ad)+PREFS_TABLE+(_0x25c690(0x115)+_0x25c690(0x1cf)+_0x25c690(0xa6)+_0x25c690(0x179)+'alue\x20TEXT\x20'+_0x25c690(0xbc)+_0x25c690(0xa7)+'ated_at\x20IN'+'TEGER\x20DEFA'+'ULT\x200\x0a\x20\x20\x20\x20'+_0x25c690(0x133))),await db['exec'](_0x25c690(0x130)+_0x25c690(0xd1)+_0x25c690(0x1ad)+ITEMS_TABLE+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x25c690(0x16c)+_0x25c690(0xf4)+_0x25c690(0x1c1)+_0x25c690(0x14e)+'TEXT,\x0a\x20\x20\x20\x20'+_0x25c690(0x199)+_0x25c690(0xdf)+_0x25c690(0xf1)+_0x25c690(0x13b)+'mime\x20TEXT,'+_0x25c690(0x150)+'le_path\x20TE'+_0x25c690(0x16a)+'\x20msg_ts\x20IN'+_0x25c690(0x105)+_0x25c690(0x143)+_0x25c690(0xb4)+_0x25c690(0xfb)+_0x25c690(0xb1)+_0x25c690(0xd6)+_0x25c690(0x118)+_0x25c690(0x1e1)+_0x25c690(0x15f)+_0x25c690(0x180)+_0x25c690(0x1a8)+'\x20TEXT\x20DEFA'+_0x25c690(0xbd)+_0x25c690(0x95)));}async function getPref(_0x2571bb){const _0x391f82=_0x2fc8c4;try{const _0x95cefa=await db[_0x391f82(0xdc)](_0x391f82(0x1c7)+_0x391f82(0x19d)+PREFS_TABLE+(_0x391f82(0x15e)+_0x391f82(0xca)),[_0x2571bb]);return _0x95cefa?_0x95cefa[_0x391f82(0x1c8)]:null;}catch(_0x41fdb7){return warn('['+name+(_0x391f82(0x13a)+_0x391f82(0x13f))+(_0x41fdb7?.[_0x391f82(0x1b8)]||_0x41fdb7)),null;}}async function setPref(_0x373629,_0x3640cc){const _0x47a739=_0x2fc8c4;try{const _0xf8d4c3=Math[_0x47a739(0x14c)](Date[_0x47a739(0xcf)]()/(-0x830+-0xace+0x16e6));return await db[_0x47a739(0x101)](_0x47a739(0xe4)+'O\x20'+PREFS_TABLE+('\x20(key,\x20val'+_0x47a739(0x11a)+_0x47a739(0x1b1)+_0x47a739(0xeb)+_0x47a739(0xa4)+_0x47a739(0x1d0)+'T(key)\x20DO\x20'+_0x47a739(0x1b3)+_0x47a739(0xa3)+_0x47a739(0x187)+_0x47a739(0xee)+_0x47a739(0xb5)+_0x47a739(0x1a5)+'_at;'),[_0x373629,String(_0x3640cc),_0xf8d4c3]),!![];}catch(_0xd103d6){return warn('['+name+(']\x20setPref\x20'+_0x47a739(0x92))+(_0xd103d6?.[_0x47a739(0x1b8)]||_0xd103d6)),![];}}async function saveItem(_0x3ea2d9){const _0x137aea=_0x2fc8c4;try{const _0x17b956=Math[_0x137aea(0x14c)](Date[_0x137aea(0xcf)]()/(0x15f6+-0x2*0x9fa+0x1e6)),_0x13ea08=Number(_0x3ea2d9[_0x137aea(0x1c0)]||_0x17b956+DEFAULTS['KEEP_SECON'+'DS']);return await db[_0x137aea(0x101)]('INSERT\x20OR\x20'+_0x137aea(0x112)+_0x137aea(0x106)+ITEMS_TABLE+(_0x137aea(0xab)+'d,\x20partici'+_0x137aea(0x12b)+_0x137aea(0x121)+_0x137aea(0x94)+'_path,\x20msg'+_0x137aea(0x164)+_0x137aea(0x142)+_0x137aea(0xec)+_0x137aea(0x1d6)+_0x137aea(0xfd)+_0x137aea(0x1e4)+_0x137aea(0x1a3)+'?,\x20?,\x20?,\x20?'+_0x137aea(0x173)),[_0x3ea2d9['id'],_0x3ea2d9[_0x137aea(0x114)+'t']||'',_0x3ea2d9[_0x137aea(0x160)+'me']||'',_0x3ea2d9[_0x137aea(0xf5)]||'',_0x3ea2d9[_0x137aea(0xd4)]||'',Number(_0x3ea2d9[_0x137aea(0x99)]||0x828*0x3+0x3dc+-0x1c54),Number(_0x3ea2d9[_0x137aea(0x96)]||Math[_0x137aea(0x14c)](Date['now']()/(-0x11b5+-0x85a+0x1df7))),Number(_0x13ea08),_0x3ea2d9[_0x137aea(0x183)+'on']?_0x3ea2d9[_0x137aea(0x183)+'on']:'']),!![];}catch(_0x59175f){return warn('['+name+(_0x137aea(0xa2)+_0x137aea(0x18c))+(_0x59175f?.[_0x137aea(0x1b8)]||_0x59175f)),![];}}async function fetchItemById(_0x49bc5c){const _0x40e6e3=_0x2fc8c4;try{const _0x5dd01b=await db[_0x40e6e3(0xdc)]('SELECT\x20*\x20F'+_0x40e6e3(0xa9)+ITEMS_TABLE+(_0x40e6e3(0xcb)+_0x40e6e3(0x14b)),[_0x49bc5c]);return _0x5dd01b||null;}catch(_0x54e0b7){return warn('['+name+(_0x40e6e3(0x1bf)+_0x40e6e3(0x1bc)+_0x40e6e3(0xf6))+(_0x54e0b7?.[_0x40e6e3(0x1b8)]||_0x54e0b7)),null;}}async function deleteItemById(_0x300b7a){const _0x51260f=_0x2fc8c4;try{const _0x4143ba=await db[_0x51260f(0xdc)](_0x51260f(0x11b)+_0x51260f(0xbb)+'M\x20'+ITEMS_TABLE+(_0x51260f(0xcb)+'=\x20?'),[_0x300b7a]);if(_0x4143ba?.[_0x51260f(0xd4)])try{await _0x11e07b(_0x4143ba[_0x51260f(0xd4)])['catch'](()=>{});}catch(_0x3a4cdb){}await db[_0x51260f(0x101)]('DELETE\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x51260f(0xcb)+_0x51260f(0x14b)),[_0x300b7a]),info('['+name+(_0x51260f(0x19e)+'saved\x20stat'+'us\x20')+_0x300b7a);}catch(_0xeca66c){warn('['+name+(_0x51260f(0x165)+_0x51260f(0x1e6)+_0x51260f(0x1c4))+(_0xeca66c?.[_0x51260f(0x1b8)]||_0xeca66c));}}async function sweepExpired(){const _0x393c87=_0x2fc8c4;try{const _0x5dedb7=Math[_0x393c87(0x14c)](Date[_0x393c87(0xcf)]()/(-0x77*0x2+0x43*-0x2e+0x21c*0x8)),_0x445271=await db[_0x393c87(0x113)]('SELECT\x20id,'+_0x393c87(0x12c)+_0x393c87(0x1b4)+ITEMS_TABLE+('\x20WHERE\x20exp'+'ires_at\x20<='+'\x20?'),[_0x5dedb7]);if(!_0x445271||_0x445271[_0x393c87(0x162)]===-0x1*0x1d03+-0x551+-0xd*-0x2a4)return;for(const _0x4a10b1 of _0x445271){try{if(_0x4a10b1['file_path'])await _0x11e07b(_0x4a10b1[_0x393c87(0xd4)])[_0x393c87(0xcc)](()=>{});}catch(_0x1786de){}}const _0x294f69=_0x445271[_0x393c87(0x137)](_0x3db49e=>_0x3db49e['id']);if(_0x294f69['length']){const _0x273f0d=_0x294f69[_0x393c87(0x137)](()=>'?')['join'](',');await db[_0x393c87(0x101)](_0x393c87(0x1ce)+'M\x20'+ITEMS_TABLE+('\x20WHERE\x20id\x20'+_0x393c87(0x93))+_0x273f0d+')',_0x294f69),info('['+name+_0x393c87(0xd5)+_0x294f69[_0x393c87(0x162)]+(_0x393c87(0x144)+_0x393c87(0x10f)+_0x393c87(0xbe)));}}catch(_0x5d31bc){warn('['+name+(']\x20sweepExp'+_0x393c87(0x170)+':\x20')+(_0x5d31bc?.['message']||_0x5d31bc));}}function filenameForId(_0x351ebe,_0x1ea77f){const _0x4a32a8=_0x2fc8c4,_0x2fdf46={'image/jpeg':_0x4a32a8(0x1cd),'image/png':_0x4a32a8(0xa0),'video/mp4':_0x4a32a8(0x138),'image/webp':'.webp','audio/ogg':_0x4a32a8(0x12f),'audio/mpeg':'.mp3','application/pdf':_0x4a32a8(0x15d)},_0x49ba32=_0x1ea77f&&_0x2fdf46[_0x1ea77f]?_0x2fdf46[_0x1ea77f]:_0x53c3b2[_0x4a32a8(0x10e)](_0x351ebe)||'';return''+_0x351ebe+_0x49ba32;}async function readFileAsBuffer(_0x3576bd){const _0xfc3921=_0x2fc8c4;try{return await _0x4c15dd[_0xfc3921(0x13c)]['readFile'](_0x3576bd);}catch(_0x4e0e27){return warn('['+name+(_0xfc3921(0x196)+_0xfc3921(0x190)+_0xfc3921(0xce))+_0x3576bd+':\x20'+(_0x4e0e27?.[_0xfc3921(0x1b8)]||_0x4e0e27)),null;}}function buildPayloadFromSaved(_0x2d3789){const _0x151ff5=_0x2fc8c4;if(!_0x2d3789||!_0x2d3789[_0x151ff5(0xd4)])return null;const _0x2a455d=_0x2d3789[_0x151ff5(0xd4)],_0x114585=(_0x2d3789[_0x151ff5(0xf5)]||'')[_0x151ff5(0x1a0)+'e']();return async function(){const _0x33bb3e=_0x151ff5,_0x266fa6=await readFileAsBuffer(_0x2a455d);if(!_0x266fa6)return null;const _0x2f4cfb=(_0x2d3789[_0x33bb3e(0x160)+'me']?_0x2d3789[_0x33bb3e(0x160)+'me']+'\x20-\x20':'')+(_0x33bb3e(0x18b)+_0x33bb3e(0x191));if(_0x114585[_0x33bb3e(0x119)](_0x33bb3e(0xb7)))return{'image':_0x266fa6,'caption':_0x2f4cfb,'mimetype':_0x114585};if(_0x114585[_0x33bb3e(0x119)](_0x33bb3e(0xe7)))return{'video':_0x266fa6,'caption':_0x2f4cfb,'mimetype':_0x114585};if(_0x114585['startsWith'](_0x33bb3e(0xfe)))return{'audio':_0x266fa6,'ptt':![],'mimetype':_0x114585};return{'document':_0x266fa6,'fileName':_0x53c3b2[_0x33bb3e(0x1d7)](_0x2a455d)||''+_0x2d3789['id'],'caption':_0x2f4cfb,'mimetype':_0x114585||undefined};};}async function sendRecoveredToBot(_0x5ae71d){const _0x5aca6b=_0x2fc8c4;if(!_0x5ae71d)return![];const _0x3e7f9d=getBotJid();if(!_0x3e7f9d)return warn('['+name+(_0x5aca6b(0xc8)+_0x5aca6b(0xb8)+_0x5aca6b(0xd2)+_0x5aca6b(0x18e)+_0x5aca6b(0x1a2))),![];if(!_0x5ae71d[_0x5aca6b(0xd4)]||!_0x4c15dd[_0x5aca6b(0x194)](_0x5ae71d[_0x5aca6b(0xd4)]))return warn('['+name+(_0x5aca6b(0xc8)+'veredToBot'+_0x5aca6b(0x1b9)+'sing\x20for\x20')+_0x5ae71d['id']+_0x5aca6b(0xb6)+_0x5ae71d[_0x5aca6b(0xd4)]),![];const _0x1164ea=buildPayloadFromSaved(_0x5ae71d);if(!_0x1164ea)return warn('['+name+(_0x5aca6b(0xba)+_0x5aca6b(0xde)+_0x5aca6b(0x154))+_0x5ae71d['id']),![];try{const _0xb6ad5e=await _0x1164ea();if(!_0xb6ad5e)return warn('['+name+(_0x5aca6b(0x134)+'build\x20fail'+_0x5aca6b(0x1e5))+_0x5ae71d['id']),![];if(typeof _0xb6ad5e===_0x5aca6b(0x11f)&&_0xb6ad5e!==null){_0xb6ad5e[_0x5aca6b(0x185)+'o']=_0xb6ad5e[_0x5aca6b(0x185)+'o']||{};if(_0x5ae71d[_0x5aca6b(0x114)+'t'])_0xb6ad5e[_0x5aca6b(0x185)+'o'][_0x5aca6b(0x1b6)+'id']=[_0x5ae71d[_0x5aca6b(0x114)+'t']];}let _0x356baa=null;if(botRef&&botRef[_0x5aca6b(0x12a)]&&typeof botRef[_0x5aca6b(0x12a)]['sendMessag'+'e']===_0x5aca6b(0xd7))_0x356baa=await botRef[_0x5aca6b(0x12a)]['sendMessag'+'e'](_0x3e7f9d,_0xb6ad5e);else{if(botRef&&typeof botRef[_0x5aca6b(0x198)+'e']===_0x5aca6b(0xd7))_0x356baa=await botRef[_0x5aca6b(0x198)+'e'](_0x3e7f9d,_0xb6ad5e);else return warn('['+name+(_0x5aca6b(0xc8)+_0x5aca6b(0xb8)+_0x5aca6b(0x15a)+_0x5aca6b(0x1af)+_0x5aca6b(0xc2))),![];}return trackSent(_0x356baa),info('['+name+(_0x5aca6b(0x146)+_0x5aca6b(0x12e)+'r\x20')+_0x5ae71d['id']+'\x20->\x20'+_0x3e7f9d),!![];}catch(_0x4aab6f){return warn('['+name+(_0x5aca6b(0xc8)+_0x5aca6b(0xb8)+_0x5aca6b(0x148)+'\x20')+_0x5ae71d['id']+':\x20'+(_0x4aab6f?.['message']||_0x4aab6f)),![];}}async function isEnabled(){const _0x534cb0=_0x2fc8c4,_0x229f86=await getPref(_0x534cb0(0x166));return _0x229f86==='1'||_0x229f86===_0x534cb0(0x10c);}async function handleStatusUpload(_0x59323e){const _0x3b8a4f=_0x2fc8c4;try{if(!_0x59323e||!_0x59323e[_0x3b8a4f(0xe0)])return;const _0x12f86d=String(_0x59323e[_0x3b8a4f(0xe0)][_0x3b8a4f(0x1e2)]||'')[_0x3b8a4f(0x1a0)+'e']();if(_0x12f86d!==_0x3b8a4f(0x132)+_0x3b8a4f(0x17f))return;const _0x4f6593=String(_0x59323e[_0x3b8a4f(0xe0)]['id']||'');if(!_0x4f6593)return;if(!await isEnabled())return;const _0x52d232=await fetchItemById(_0x4f6593);if(_0x52d232)return;const _0x12a5da=_0x59323e['message']||{};let _0x1850cc=null;if(_0x12a5da['imageMessa'+'ge'])_0x1850cc='image';else{if(_0x12a5da['videoMessa'+'ge'])_0x1850cc='video';else{if(_0x12a5da[_0x3b8a4f(0x1d9)+'ge'])_0x1850cc=_0x3b8a4f(0x176);else{if(_0x12a5da[_0x3b8a4f(0x193)+_0x3b8a4f(0x107)])_0x1850cc=_0x3b8a4f(0x197);else{if(_0x12a5da[_0x3b8a4f(0x9e)+_0x3b8a4f(0x12d)])_0x1850cc=_0x3b8a4f(0x16d);}}}}if(!_0x1850cc)return;const _0x25216b=_0x1850cc===_0x3b8a4f(0x1be)?_0x3b8a4f(0x1be):_0x1850cc===_0x3b8a4f(0x1a4)?_0x3b8a4f(0x1a4):_0x1850cc==='audio'?_0x3b8a4f(0x176):_0x3b8a4f(0x197),_0x1f9210=_0x59323e['key'][_0x3b8a4f(0x114)+'t']||'',_0x10fd7a=_0x59323e['pushName']||'',_0x566f6e=_0x1f9210?_0x1f9210['split']('@')[0x1529+-0x5da+0x1*-0xf4f]:_0x10fd7a||'';let _0x15e396='',_0x211dee='';try{const _0x2bd617=_0x59323e['message'][_0x25216b+_0x3b8a4f(0xdb)]||_0x59323e[_0x3b8a4f(0x1b8)];_0x211dee=_0x2bd617&&_0x2bd617[_0x3b8a4f(0xd8)]?_0x2bd617[_0x3b8a4f(0xd8)]:'';const {downloadContentFromMessage:_0x1b25d3}=await getBaileysHelpers(),_0x5a0c84=await _0x1b25d3(_0x2bd617,_0x25216b),_0x2fba13=await streamToBuffer(_0x5a0c84);if(!_0x2fba13||!Buffer[_0x3b8a4f(0xc0)](_0x2fba13)||_0x2fba13['length']===0x1d*0x17+-0x1076+0xddb)warn('['+name+(']\x20download'+_0x3b8a4f(0xf2)+_0x3b8a4f(0x1b7)+'er\x20for\x20sta'+_0x3b8a4f(0x97))+_0x4f6593),_0x15e396='';else{const _0x3a87b8=filenameForId(_0x4f6593,_0x211dee);_0x15e396=_0x53c3b2[_0x3b8a4f(0xd9)](DATA_DIR,_0x3a87b8);const _0x406d28=_0x15e396+_0x3b8a4f(0xdd)+Date[_0x3b8a4f(0xcf)]();await _0x4c15dd[_0x3b8a4f(0x13c)][_0x3b8a4f(0x182)](_0x406d28,_0x2fba13),await _0x4c15dd['promises']['rename'](_0x406d28,_0x15e396),info('['+name+(']\x20saved\x20st'+_0x3b8a4f(0x10a))+_0x4f6593+_0x3b8a4f(0xb6)+_0x15e396+'\x20('+_0x2fba13[_0x3b8a4f(0x162)]+_0x3b8a4f(0xc9)),_0x2fba13[_0x3b8a4f(0x162)]>DEFAULTS[_0x3b8a4f(0x1bd)+'AD_BYTES_W'+'ARN']&&warn('['+name+(_0x3b8a4f(0x1ca)+_0x3b8a4f(0x12e)+'r\x20')+_0x4f6593+(_0x3b8a4f(0xaa)+'\x20')+_0x2fba13[_0x3b8a4f(0x162)]+_0x3b8a4f(0x1aa));}}catch(_0x51cac5){warn('['+name+(_0x3b8a4f(0x1ca)+_0x3b8a4f(0xda)+'r\x20status\x20')+_0x4f6593+':\x20'+(_0x51cac5?.[_0x3b8a4f(0x1b8)]||_0x51cac5)),_0x15e396='';}const _0x32ac35=Math[_0x3b8a4f(0x14c)](Date[_0x3b8a4f(0xcf)]()/(0x52d*-0x5+-0x1fc1+-0x1*-0x3d8a)),_0x363c08={'id':_0x4f6593,'participant':_0x1f9210,'display_name':_0x566f6e,'mime':_0x211dee,'file_path':_0x15e396,'msg_ts':Number(_0x59323e[_0x3b8a4f(0x158)+_0x3b8a4f(0xb2)]||_0x32ac35),'created_at':_0x32ac35,'expires_at':_0x32ac35+DEFAULTS[_0x3b8a4f(0x155)+'DS'],'message_json':JSON[_0x3b8a4f(0x1c5)](_0x59323e)};await saveItem(_0x363c08);if(_0x15e396)info('['+name+(_0x3b8a4f(0x1d1)+_0x3b8a4f(0x111)+'h\x20file_pat'+_0x3b8a4f(0xc5))+_0x4f6593);else info('['+name+(_0x3b8a4f(0x1d1)+'\x20entry\x20for'+'\x20')+_0x4f6593+(_0x3b8a4f(0x1df)+_0x3b8a4f(0xc7)));}catch(_0x4f4df7){warn('['+name+(']\x20handleSt'+'atusUpload'+'\x20error:\x20')+(_0x4f4df7?.[_0x3b8a4f(0x1b8)]||_0x4f4df7));}}async function handlePossibleDeletion(_0x4b922d){const _0x2df758=_0x2fc8c4;try{if(!_0x4b922d||!_0x4b922d[_0x2df758(0x1b8)])return;if(!await isEnabled())return;const _0xea0da2=Math['floor'](Date['now']()/(0xf5c+0xd*-0x2de+0x19d2)),_0xd476f3=_0x4b922d['message']['protocolMe'+_0x2df758(0x107)];if(_0xd476f3&&_0xd476f3['key']){const _0x466136=_0xd476f3[_0x2df758(0xe0)]||{},_0x14de41=String(_0x466136[_0x2df758(0x1e2)]||'')[_0x2df758(0x1a0)+'e']();if(_0x14de41===_0x2df758(0x132)+_0x2df758(0x17f)){const _0x2175c7=String(_0x466136['id']||'');if(!_0x2175c7)return;const _0x130539=await fetchItemById(_0x2175c7);if(!_0x130539){warn('['+name+(_0x2df758(0x1c2)+_0x2df758(0x1d8)+'s\x20')+_0x2175c7+('\x20but\x20no\x20sa'+'ved\x20copy\x20f'+_0x2df758(0x186)));return;}if(Number(_0x130539[_0x2df758(0x1c0)]||0x166f*0x1+-0x5e*-0x49+-0x9d9*0x5)<=_0xea0da2){await deleteItemById(_0x2175c7),info('['+name+(_0x2df758(0xe8)+'saved\x20stat'+_0x2df758(0x10d))+_0x2175c7+(_0x2df758(0xbf)+_0x2df758(0xef)));return;}const _0x30a3cc=await sendRecoveredToBot(_0x130539);_0x30a3cc?(info('['+name+(_0x2df758(0xea)+'d\x20deleted\x20'+_0x2df758(0x125))+_0x2175c7+_0x2df758(0xc1)),await deleteItemById(_0x2175c7),info('['+name+(_0x2df758(0x19e)+_0x2df758(0x11c)+_0x2df758(0x10d))+_0x2175c7+('\x20after\x20suc'+_0x2df758(0x167)+'send'))):warn('['+name+(']\x20failed\x20t'+_0x2df758(0x104)+_0x2df758(0xb3)+_0x2df758(0x97))+_0x2175c7);return;}}if((_0x4b922d[_0x2df758(0x103)+_0x2df758(0x1dd)]||_0x4b922d['message']?.['messageStu'+_0x2df758(0x1dd)])&&Array[_0x2df758(0x116)](_0x4b922d[_0x2df758(0x1b8)]?.[_0x2df758(0x103)+_0x2df758(0xcd)+'s'])){const _0x1f4ed1=_0x4b922d['message'][_0x2df758(0x103)+'bParameter'+'s'];if(_0x1f4ed1[_0x2df758(0x162)]>-0x72c+0x4b1*-0x4+0x19f1&&String(_0x1f4ed1[0x2b*-0x76+-0xde7+0x1*0x21b9])[_0x2df758(0x1a0)+'e']()[_0x2df758(0x16f)](_0x2df758(0xfc))){for(let _0xac67b=0x1b04+-0x539*0x3+-0xb58*0x1;_0xac67b<_0x1f4ed1[_0x2df758(0x162)];_0xac67b++){const _0x1fff54=String(_0x1f4ed1[_0xac67b]||'');if(!_0x1fff54)continue;const _0x581d02=await fetchItemById(_0x1fff54);if(!_0x581d02){warn('['+name+(']\x20stub\x20rev'+_0x2df758(0x11e)+'atus\x20')+_0x1fff54+('\x20but\x20no\x20sa'+_0x2df758(0x15c)+_0x2df758(0x186)));continue;}if(Number(_0x581d02['expires_at']||-0x1b29+0x13b8+0x17d*0x5)<=_0xea0da2){await deleteItemById(_0x1fff54),info('['+name+(_0x2df758(0xe8)+_0x2df758(0x11c)+_0x2df758(0x10d))+_0x1fff54+('\x20removed\x20('+'no\x20resend)'));continue;}if(!_0x581d02[_0x2df758(0xd4)]||!_0x4c15dd[_0x2df758(0x194)](_0x581d02[_0x2df758(0xd4)])){warn('['+name+(_0x2df758(0xe1)+_0x2df758(0xc3))+_0x1fff54+':\x20'+_0x581d02[_0x2df758(0xd4)]);continue;}const _0x5f40c1=await sendRecoveredToBot(_0x581d02);_0x5f40c1?(info('['+name+(_0x2df758(0xea)+'d\x20deleted\x20'+_0x2df758(0x125))+_0x1fff54+'\x20->\x20sent'),await deleteItemById(_0x1fff54),info('['+name+(_0x2df758(0x19e)+_0x2df758(0x11c)+_0x2df758(0x10d))+_0x1fff54+(_0x2df758(0x19c)+_0x2df758(0x167)+'send'))):warn('['+name+(']\x20failed\x20t'+_0x2df758(0x104)+'overed\x20sta'+_0x2df758(0x97))+_0x1fff54);}return;}}const _0x49a2cf=_0x4b922d[_0x2df758(0x1b8)]?.[_0x2df758(0x1e7)+_0x2df758(0x163)]?.[_0x2df758(0x185)+'o']?.['quotedMess'+_0x2df758(0x192)];if(_0x49a2cf&&_0x49a2cf[_0x2df758(0x11d)+_0x2df758(0x107)]&&_0x49a2cf[_0x2df758(0x11d)+_0x2df758(0x107)][_0x2df758(0xe0)]){const _0x3fba70=_0x49a2cf[_0x2df758(0x11d)+_0x2df758(0x107)][_0x2df758(0xe0)];if(String(_0x3fba70[_0x2df758(0x1e2)]||'')[_0x2df758(0x1a0)+'e']()==='status@bro'+_0x2df758(0x17f)){const _0x157b24=String(_0x3fba70['id']||'');if(!_0x157b24)return;const _0x1473e9=await fetchItemById(_0x157b24);if(!_0x1473e9)return;if(Number(_0x1473e9['expires_at']||-0xe1d+-0xf55+0x2*0xeb9)<=_0xea0da2){await deleteItemById(_0x157b24),info('['+name+(_0x2df758(0xe8)+_0x2df758(0x11c)+_0x2df758(0x10d))+_0x157b24+(_0x2df758(0xbf)+_0x2df758(0xef)));return;}if(!_0x1473e9[_0x2df758(0xd4)]||!_0x4c15dd[_0x2df758(0x194)](_0x1473e9[_0x2df758(0xd4)])){warn('['+name+(_0x2df758(0xd0)+_0x2df758(0x189)+'r\x20')+_0x157b24+(_0x2df758(0x1b0)+'missing\x20at'+'\x20')+_0x1473e9[_0x2df758(0xd4)]);return;}const _0x2cd2c8=await sendRecoveredToBot(_0x1473e9);_0x2cd2c8?(info('['+name+(_0x2df758(0xea)+_0x2df758(0xc4)+'status\x20')+_0x157b24+_0x2df758(0xc1)),await deleteItemById(_0x157b24),info('['+name+(_0x2df758(0x19e)+_0x2df758(0x11c)+_0x2df758(0x10d))+_0x157b24+(_0x2df758(0x19c)+_0x2df758(0x167)+'send'))):warn('['+name+(']\x20failed\x20t'+_0x2df758(0x104)+_0x2df758(0xb3)+_0x2df758(0x97))+_0x157b24);return;}}}catch(_0x152f4d){warn('['+name+(_0x2df758(0x100)+_0x2df758(0xac)+_0x2df758(0x171)+':\x20')+(_0x152f4d?.[_0x2df758(0x1b8)]||_0x152f4d));}}function _0xa855(_0x5ecde5,_0xff4c03){const _0x481402=_0x5a2d();return _0xa855=function(_0x30c55c,_0x14c633){_0x30c55c=_0x30c55c-(-0x2513*0x1+-0x24dd*-0x1+0x5*0x28);let _0x304b45=_0x481402[_0x30c55c];return _0x304b45;},_0xa855(_0x5ecde5,_0xff4c03);}async function rawMessagesUpsertHandler({messages:_0x3025e6}){const _0x44afce=_0x2fc8c4;if(!Array[_0x44afce(0x116)](_0x3025e6))return;if(!await isEnabled())return;for(const _0x544d8e of _0x3025e6){try{if(!_0x544d8e||!_0x544d8e['key'])continue;if(isOurSentId(_0x544d8e[_0x44afce(0xe0)]?.['id']))continue;if(_0x544d8e['key'][_0x44afce(0x117)])continue;const _0x1d2dc4=String(_0x544d8e[_0x44afce(0xe0)][_0x44afce(0x1e2)]||'')[_0x44afce(0x1a0)+'e']();if(_0x1d2dc4==='status@bro'+'adcast'){await handleStatusUpload(_0x544d8e)['catch'](_0x1f32c3=>warn('['+name+(_0x44afce(0x1c9)+_0x44afce(0x13e)+_0x44afce(0x1c4))+(_0x1f32c3?.['message']||_0x1f32c3))),await handlePossibleDeletion(_0x544d8e)[_0x44afce(0xcc)](_0x3bc715=>warn('['+name+(_0x44afce(0x1c2)+'\x20handle\x20fa'+_0x44afce(0x17e))+(_0x3bc715?.[_0x44afce(0x1b8)]||_0x3bc715)));continue;}await handlePossibleDeletion(_0x544d8e)[_0x44afce(0xcc)](_0x442c12=>warn('['+name+(_0x44afce(0x1c2)+_0x44afce(0x1d5)+'iled:\x20')+(_0x442c12?.[_0x44afce(0x1b8)]||_0x442c12)));}catch(_0x34e38c){warn('['+name+(_0x44afce(0x1bb)+_0x44afce(0x18f)+_0x44afce(0xf9))+(_0x34e38c?.['message']||_0x34e38c));}}}function getMessageTextFromCtx(_0xc6dc2e){const _0x4798ac=_0x2fc8c4;if(!_0xc6dc2e||!_0xc6dc2e[_0x4798ac(0x1b8)])return'';const _0x1b8f07=_0xc6dc2e[_0x4798ac(0x1b8)];if(_0x1b8f07[_0x4798ac(0xaf)+'on'])return _0x1b8f07[_0x4798ac(0xaf)+'on'];if(_0x1b8f07[_0x4798ac(0x1e7)+_0x4798ac(0x163)]?.[_0x4798ac(0x178)])return _0x1b8f07[_0x4798ac(0x1e7)+'xtMessage'][_0x4798ac(0x178)];if(_0x1b8f07[_0x4798ac(0x136)+'ge']?.[_0x4798ac(0xb9)])return _0x1b8f07[_0x4798ac(0x136)+'ge'][_0x4798ac(0xb9)];if(_0x1b8f07['videoMessa'+'ge']?.[_0x4798ac(0xb9)])return _0x1b8f07[_0x4798ac(0x9c)+'ge'][_0x4798ac(0xb9)];return'';}export async function onMessage(_0x363cd9){const _0x424e92=_0x2fc8c4;try{if(!_0x363cd9||!_0x363cd9[_0x424e92(0xe0)]||!_0x363cd9[_0x424e92(0x1b8)])return;const _0x45e40b=_0x363cd9[_0x424e92(0xe0)][_0x424e92(0x1e2)];if(typeof _0x45e40b==='string'&&_0x45e40b[_0x424e92(0x129)](_0x424e92(0xe6)))return;if(!_0x363cd9[_0x424e92(0xe0)][_0x424e92(0x117)])return;if(_0x363cd9[_0x424e92(0xe0)]['id']&&isOurSentId(_0x363cd9['key']['id']))return;const _0x2fb7de=typeof _0x363cd9['text']==='string'&&_0x363cd9[_0x424e92(0x178)][_0x424e92(0x16b)]()[_0x424e92(0x162)]?_0x363cd9[_0x424e92(0x178)]['trim']():'',_0x2d9157=(getMessageTextFromCtx(_0x363cd9)||'')[_0x424e92(0x10b)]()[_0x424e92(0x16b)](),_0x294e95=(_0x2fb7de||_0x2d9157||'')[_0x424e92(0x156)](/\r?\n/)[-0x2276+-0x161e+0x3894][_0x424e92(0x16b)]();if(!_0x294e95)return;const _0x206c68=/^antidelete\s+status(?:\s+(on|off|show))?$/i[_0x424e92(0x1cc)](_0x294e95);if(!_0x206c68)return;const _0xf97e06=(_0x206c68[-0x15d3+0xfbb+0x619]||_0x424e92(0x1ac))['toLowerCas'+'e'](),_0x19f0f9=getBotJid();if(!_0x19f0f9){warn('['+name+(_0x424e92(0x17d)+_0x424e92(0x109)+'id()\x20empty'+',\x20cannot\x20r'+_0x424e92(0x181)));return;}if(_0xf97e06===_0x424e92(0x1ac)){const _0x2c6fb7=await isEnabled(),_0x10935e='✔️\x20antidele'+_0x424e92(0x128)+'\x20'+(_0x2c6fb7?'ON':'OFF')+(_0x424e92(0xed)+_0x424e92(0x14a))+DATA_DIR,_0x25948f=await(botRef?.[_0x424e92(0x12a)]?.['sendMessag'+'e']?botRef[_0x424e92(0x12a)][_0x424e92(0x198)+'e'](_0x19f0f9,{'text':_0x10935e}):botRef[_0x424e92(0x198)+'e'](_0x19f0f9,{'text':_0x10935e}));trackSent(_0x25948f);return;}if(_0xf97e06==='on'||_0xf97e06===_0x424e92(0xff)){const _0x1d4068=_0xf97e06==='on'?'1':'0',_0x22a616=await setPref(_0x424e92(0x166),_0x1d4068),_0xfdaf56=_0x22a616?_0x424e92(0xe5)+_0x424e92(0x1cb)+_0x424e92(0x1b2)+_0xf97e06['toUpperCas'+'e']():_0x424e92(0xb0)+_0x424e92(0x126)+_0x424e92(0xf7)+_0x424e92(0xd3),_0x50ec37=await(botRef?.[_0x424e92(0x12a)]?.['sendMessag'+'e']?botRef[_0x424e92(0x12a)][_0x424e92(0x198)+'e'](_0x19f0f9,{'text':_0xfdaf56}):botRef[_0x424e92(0x198)+'e'](_0x19f0f9,{'text':_0xfdaf56}));trackSent(_0x50ec37);return;}}catch(_0x16b189){warn('['+name+(']\x20onMessag'+_0x424e92(0x1ab))+(_0x16b189?.[_0x424e92(0x1b8)]||_0x16b189));}}export async function initialize(_0x15750a){const _0x5e4d52=_0x2fc8c4;if(!_0x15750a)throw new Error(_0x5e4d52(0x19a)+_0x5e4d52(0xf0)+_0x5e4d52(0x17a)+_0x5e4d52(0x1a9)+_0x5e4d52(0x18a));botRef=_0x15750a,ensureDataDir(),await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x5e4d52(0x9a)+'psert','handler':rawMessagesUpsertHandler,'moduleName':name}),cleanupInterval=setInterval(()=>sweepExpired()[_0x5e4d52(0xcc)](()=>{}),DEFAULTS['CLEANUP_IN'+_0x5e4d52(0x14f)]);try{await sweepExpired();}catch(_0x98bee4){}info('['+name+(_0x5e4d52(0x151)+_0x5e4d52(0xc6)+'DIR=')+DATA_DIR+('\x20CLEANUP_M'+'S=')+DEFAULTS['CLEANUP_IN'+_0x5e4d52(0x14f)]+'\x20KEEP_SEC='+DEFAULTS[_0x5e4d52(0x155)+'DS']);}export async function cleanup(){const _0x4ca263=_0x2fc8c4;try{stopManagedListener(name,'messages.u'+_0x4ca263(0x124));}catch(_0x3c0f61){warn('['+name+(_0x4ca263(0x1ba)+_0x4ca263(0x145)+_0x4ca263(0x14d)+'error:\x20')+(_0x3c0f61?.['message']||_0x3c0f61));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x2cf318){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds[_0x4ca263(0x1d4)]===_0x4ca263(0xd7))respondedMsgIds['clear']();_baileysHelpers=null;}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};