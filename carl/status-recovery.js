const _0x40a34b=_0x32e9;(function(_0x21f30c,_0x1f77fd){const _0x4e46e0=_0x32e9,_0x2a9770=_0x21f30c();while(!![]){try{const _0x3924f=-parseInt(_0x4e46e0(0x294))/(-0x2617+-0x6*-0x659+-0x1*-0x2)+-parseInt(_0x4e46e0(0x218))/(-0x1*0x11c7+0xc*-0x19+0x1*0x12f5)*(-parseInt(_0x4e46e0(0x293))/(-0x16d1*0x1+0x224*-0x6+0x23ac))+parseInt(_0x4e46e0(0x270))/(-0x11d5+0x3*0x1fc+0xbe5)+-parseInt(_0x4e46e0(0x26e))/(0x54a+0x1fa+-0x35*0x23)*(parseInt(_0x4e46e0(0x1f6))/(-0x6dc+-0x130f*-0x2+-0x1f3c))+-parseInt(_0x4e46e0(0x2d5))/(-0x1*-0x11c4+0x2*0x8a8+-0x9*0x3e5)*(parseInt(_0x4e46e0(0x237))/(-0x178a+0x22ef+0xb5d*-0x1))+parseInt(_0x4e46e0(0x2ec))/(-0x12b4*-0x2+0x1aa6+0x1*-0x4005)+parseInt(_0x4e46e0(0x229))/(-0x1ee+-0x111c+0x1314)*(parseInt(_0x4e46e0(0x20f))/(0x1*-0x1e81+0x181d+0x66f));if(_0x3924f===_0x1f77fd)break;else _0x2a9770['push'](_0x2a9770['shift']());}catch(_0x1c80ad){_0x2a9770['push'](_0x2a9770['shift']());}}}(_0x3bff,0x1251d4+0xc6b9*-0xd+0x43351));import _0x236d47 from'fs';import _0x339442 from'path';import{mkdirSync}from'fs';import{rm as _0x37e99d}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x40a34b(0x240)+_0x40a34b(0x2ce);export const version='3.0.0';export const priority=-0x2185+-0x2214+0x4407;export const commands=['antidelete'+_0x40a34b(0x23e)];export const configKeys=['PROJECT_RO'+'OT','STATUS_REC'+_0x40a34b(0x1dd),_0x40a34b(0x2a7)+_0x40a34b(0x1c7)+'NUP_INTERV'+'AL_MS',_0x40a34b(0x2a7)+_0x40a34b(0x2da)+_0x40a34b(0x22d),_0x40a34b(0x2a7)+_0x40a34b(0x2fb)+_0x40a34b(0x2fc)+'T',_0x40a34b(0x2a7)+'OVERY_RESP'+_0x40a34b(0x27f)+'_KEEP','STATUS_REC'+'OVERY_MAX_'+_0x40a34b(0x2b7)+_0x40a34b(0x29d)];let CFG={};try{CFG=typeof getConfig===_0x40a34b(0x2d0)?getConfig()||{}:{};}catch(_0x1db732){warn('['+name+(']\x20getConfi'+'g()\x20threw:'+'\x20')+(_0x1db732?.[_0x40a34b(0x236)]||_0x1db732)+('.\x20Falling\x20'+_0x40a34b(0x2f3)+_0x40a34b(0x287))),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x339442[_0x40a34b(0x1bd)](_0x40a34b(0x263),_0x40a34b(0x25c)),'CLEANUP_INTERVAL_MS':(0x5*-0x775+0x519*-0x1+-0x1*-0x2a7a)*(-0x1779+0xbe3+0x11*0xb2)*(0x1ac8+-0x935*-0x1+-0x23c1)*(0x13b*0xd+-0x56+-0xbc1),'KEEP_SECONDS':(-0x1*-0xf+-0x1*-0xc9b+0x2*-0x649)*(-0x1*-0x20e3+-0x10e5+0x2*-0x7e1)*(0x5*-0x211+-0xabd+0x154e),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(-0x1*0x533+-0x1ecf+0x2*0x1206)*(-0x14de+-0x1fbe+0x2*0x1c4e)*(0xd37+-0x19e*0xf+0xf0b)};function toPositiveInt(_0x561371,_0x34b264){const _0x3d8af0=_0x40a34b,_0x469797=Number(_0x561371);if(!Number[_0x3d8af0(0x1cc)](_0x469797)||_0x469797<=0x1c*-0xd2+-0x9*0x143+-0x1*-0x2253)return _0x34b264;return Math[_0x3d8af0(0x1b7)](_0x469797);}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0x40a34b(0x2a7)+_0x40a34b(0x1dd)]===_0x40a34b(0x2d7)&&CFG[_0x40a34b(0x2a7)+_0x40a34b(0x1dd)][_0x40a34b(0x1c8)]()?CFG[_0x40a34b(0x2a7)+_0x40a34b(0x1dd)]:FALLBACKS[_0x40a34b(0x1de)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG[_0x40a34b(0x2a7)+_0x40a34b(0x1c7)+'NUP_INTERV'+_0x40a34b(0x226)]??(CFG[_0x40a34b(0x2a7)+_0x40a34b(0x295)]&&CFG[_0x40a34b(0x2a7)+_0x40a34b(0x295)]['CLEANUP_IN'+_0x40a34b(0x1c9)]),FALLBACKS[_0x40a34b(0x24b)+'TERVAL_MS']),'KEEP_SECONDS':toPositiveInt(CFG[_0x40a34b(0x2a7)+_0x40a34b(0x2da)+_0x40a34b(0x22d)]??(CFG['STATUS_REC'+_0x40a34b(0x295)]&&CFG[_0x40a34b(0x2a7)+_0x40a34b(0x295)][_0x40a34b(0x2d1)+'DS']),FALLBACKS[_0x40a34b(0x2d1)+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x40a34b(0x2a7)+'OVERY_RESP'+_0x40a34b(0x2fc)+'T']??(CFG['STATUS_REC'+_0x40a34b(0x295)]&&CFG[_0x40a34b(0x2a7)+'OVERY'][_0x40a34b(0x1ff)+'LIMIT']),FALLBACKS['RESPONDED_'+_0x40a34b(0x272)]),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG[_0x40a34b(0x2a7)+_0x40a34b(0x2fb)+_0x40a34b(0x27f)+'_KEEP']??(CFG[_0x40a34b(0x2a7)+_0x40a34b(0x295)]&&CFG[_0x40a34b(0x2a7)+_0x40a34b(0x295)][_0x40a34b(0x1ff)+'TRIM_KEEP']),FALLBACKS[_0x40a34b(0x1ff)+_0x40a34b(0x29f)]),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG['STATUS_REC'+_0x40a34b(0x213)+_0x40a34b(0x2b7)+'YTES_WARN']??(CFG['STATUS_REC'+'OVERY']&&CFG['STATUS_REC'+_0x40a34b(0x295)][_0x40a34b(0x28e)+'AD_BYTES_W'+'ARN']),FALLBACKS[_0x40a34b(0x28e)+'AD_BYTES_W'+_0x40a34b(0x245)])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE=_0x40a34b(0x240)+'overy_pref'+'s',ITEMS_TABLE=_0x40a34b(0x240)+_0x40a34b(0x25e)+'s';let respondedMsgIds=new Set();function trackSent(_0x583305){const _0xab4a75=_0x40a34b;try{const _0x42d1fd=_0x583305?.[_0xab4a75(0x2ad)]?.['id']||_0x583305?.['id']||_0x583305?.[_0xab4a75(0x1b5)]&&_0x583305['messages'][0xcbf+0x2*-0x7dc+0x2f9]?.[_0xab4a75(0x2ad)]?.['id']||Array[_0xab4a75(0x27a)](_0x583305)&&_0x583305[-0x103+-0x2315+0x2418]?.['key']?.['id']||null;if(!_0x42d1fd)return;respondedMsgIds[_0xab4a75(0x290)](String(_0x42d1fd));if(respondedMsgIds[_0xab4a75(0x206)]>DEFAULTS['RESPONDED_'+'LIMIT']){const _0x52bccf=Array[_0xab4a75(0x2a2)](respondedMsgIds);respondedMsgIds=new Set(_0x52bccf[_0xab4a75(0x2de)](-DEFAULTS[_0xab4a75(0x1ff)+_0xab4a75(0x29f)]));}}catch(_0x464f93){}}function isOurSentId(_0x17e15f){return _0x17e15f&&respondedMsgIds['has'](String(_0x17e15f));}async function getBaileysHelpers(){const _0x1b6cfc=_0x40a34b;if(_baileysHelpers)return _baileysHelpers;try{const _0x1e5d9d=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x1e5d9d[_0x1b6cfc(0x248)+_0x1b6cfc(0x2db)+_0x1b6cfc(0x277)]||_0x1e5d9d[_0x1b6cfc(0x269)]?.[_0x1b6cfc(0x248)+'ntentFromM'+_0x1b6cfc(0x277)]};if(!_baileysHelpers[_0x1b6cfc(0x248)+_0x1b6cfc(0x2db)+'essage'])throw new Error(_0x1b6cfc(0x248)+_0x1b6cfc(0x2db)+_0x1b6cfc(0x23b)+_0x1b6cfc(0x1ca));return _baileysHelpers;}catch(_0x4d8449){error(_0x4d8449,'['+name+(_0x1b6cfc(0x2ab)+'o\x20import\x20B'+_0x1b6cfc(0x254)));throw _0x4d8449;}}async function streamToBuffer(_0x11e0b3){const _0x2531d7=_0x40a34b,_0x3e9ff5=[];for await(const _0xf52e6 of _0x11e0b3)_0x3e9ff5[_0x2531d7(0x2bf)](Buffer['isBuffer'](_0xf52e6)?_0xf52e6:Buffer[_0x2531d7(0x2a2)](_0xf52e6));return Buffer['concat'](_0x3e9ff5);}function ensureDataDir(){const _0x3b9e4f=_0x40a34b;try{const _0x1841ee=CFG||{},_0x13f4f2=_0x1841ee[_0x3b9e4f(0x1b4)+'OT']&&typeof _0x1841ee['PROJECT_RO'+'OT']===_0x3b9e4f(0x2d7)?_0x1841ee[_0x3b9e4f(0x1b4)+'OT']:process[_0x3b9e4f(0x2c8)](),_0x214424=typeof DEFAULTS[_0x3b9e4f(0x1de)+'TH']==='string'&&DEFAULTS[_0x3b9e4f(0x1de)+'TH'][_0x3b9e4f(0x1c8)]()?DEFAULTS[_0x3b9e4f(0x1de)+'TH']:null;DATA_DIR=_0x214424&&typeof _0x214424===_0x3b9e4f(0x2d7)&&_0x214424[_0x3b9e4f(0x1c8)]()?_0x339442[_0x3b9e4f(0x26b)](_0x214424)?_0x214424:_0x339442['resolve'](_0x13f4f2,_0x214424):_0x339442['resolve'](_0x13f4f2,FALLBACKS[_0x3b9e4f(0x1de)+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0x558d7c=_0x339442[_0x3b9e4f(0x22c)](_0x13f4f2,'data',_0x3b9e4f(0x25c),'tmp');if(_0x236d47[_0x3b9e4f(0x2b2)](_0x558d7c)&&_0x236d47[_0x3b9e4f(0x2c5)](_0x558d7c)[_0x3b9e4f(0x2f9)+'y']()){const _0x569591=_0x236d47[_0x3b9e4f(0x2a1)+'c'](_0x558d7c)[_0x3b9e4f(0x253)](Boolean);for(const _0x4771d8 of _0x569591){const _0x1ca041=_0x339442[_0x3b9e4f(0x1bd)](_0x558d7c,_0x4771d8),_0x33b386=_0x339442['join'](DATA_DIR,_0x4771d8);try{if(!_0x236d47[_0x3b9e4f(0x2b2)](_0x33b386))_0x236d47[_0x3b9e4f(0x1cb)](_0x1ca041,_0x33b386);else _0x236d47[_0x3b9e4f(0x20d)](_0x1ca041);}catch(_0x1f34e5){}}try{const _0x4f1ad8=_0x236d47['readdirSyn'+'c'](_0x558d7c);if(!_0x4f1ad8||_0x4f1ad8[_0x3b9e4f(0x205)]===-0xc3d+0x757*-0x1+-0x166*-0xe)_0x236d47['rmdirSync'](_0x558d7c);}catch(_0xd5fafa){}}}catch(_0x51ebae){}}catch(_0x4450dd){warn('['+name+(']\x20ensureDa'+_0x3b9e4f(0x23f)+_0x3b9e4f(0x230))+(_0x4450dd?.[_0x3b9e4f(0x236)]||_0x4450dd)),DATA_DIR=_0x339442['resolve'](process['cwd'](),FALLBACKS[_0x3b9e4f(0x1de)+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x88da61){}}}async function ensureTables(){const _0x197f95=_0x40a34b;await db[_0x197f95(0x2d3)](_0x197f95(0x1d0)+'LE\x20IF\x20NOT\x20'+'EXISTS\x20'+PREFS_TABLE+(_0x197f95(0x235)+_0x197f95(0x296)+'PRIMARY\x20KE'+_0x197f95(0x2af)+_0x197f95(0x280)+_0x197f95(0x1c3)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x197f95(0x1d3)+_0x197f95(0x25a)+_0x197f95(0x24e)+_0x197f95(0x2c7))),await db['exec']('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+'EXISTS\x20'+ITEMS_TABLE+(_0x197f95(0x235)+_0x197f95(0x217)+_0x197f95(0x204)+_0x197f95(0x234)+'participan'+_0x197f95(0x26f)+_0x197f95(0x250)+_0x197f95(0x292)+_0x197f95(0x266)+_0x197f95(0x2a0)+'\x20\x20\x20\x20mime\x20T'+_0x197f95(0x22a)+_0x197f95(0x1d2)+_0x197f95(0x2c2)+_0x197f95(0x1c6)+_0x197f95(0x268)+_0x197f95(0x2ba)+_0x197f95(0x2a3)+_0x197f95(0x257)+_0x197f95(0x2e3)+_0x197f95(0x26a)+_0x197f95(0x1eb)+'xpires_at\x20'+_0x197f95(0x1d7)+'FAULT\x200,\x0a\x20'+_0x197f95(0x22f)+_0x197f95(0x28a)+_0x197f95(0x298)+_0x197f95(0x252)+_0x197f95(0x27b)));}function _0x32e9(_0x2009f9,_0x3a316b){const _0x23b878=_0x3bff();return _0x32e9=function(_0x6c7023,_0x618433){_0x6c7023=_0x6c7023-(0x1*0xb3b+0x1*-0x2f+-0x95b);let _0x7531ad=_0x23b878[_0x6c7023];return _0x7531ad;},_0x32e9(_0x2009f9,_0x3a316b);}async function getPref(_0x2b64dc){const _0x3c0358=_0x40a34b;try{const _0x1a7d00=await db['get']('SELECT\x20val'+_0x3c0358(0x2fe)+PREFS_TABLE+(_0x3c0358(0x2e0)+_0x3c0358(0x1c2)),[_0x2b64dc]);return _0x1a7d00?_0x1a7d00[_0x3c0358(0x279)]:null;}catch(_0x319359){return warn('['+name+(_0x3c0358(0x210)+_0x3c0358(0x1e6))+(_0x319359?.[_0x3c0358(0x236)]||_0x319359)),null;}}async function setPref(_0x45056d,_0x668b77){const _0x3076d6=_0x40a34b;try{const _0x7d142f=Math[_0x3076d6(0x1b7)](Date[_0x3076d6(0x2f6)]()/(-0x1*-0x1981+0xd05+-0xb8a*0x3));return await db[_0x3076d6(0x2b6)]('INSERT\x20INT'+'O\x20'+PREFS_TABLE+('\x20(key,\x20val'+_0x3076d6(0x2aa)+_0x3076d6(0x1b1)+_0x3076d6(0x2c1)+_0x3076d6(0x2d6)+_0x3076d6(0x1d8)+'CT(key)\x20DO'+_0x3076d6(0x23c)+_0x3076d6(0x224)+_0x3076d6(0x238)+_0x3076d6(0x2aa)+_0x3076d6(0x211)+_0x3076d6(0x28f)+'d_at;'),[_0x45056d,String(_0x668b77),_0x7d142f]),!![];}catch(_0x64100){return warn('['+name+(_0x3076d6(0x1fd)+_0x3076d6(0x214))+(_0x64100?.[_0x3076d6(0x236)]||_0x64100)),![];}}async function saveItem(_0x2a0e33){const _0x1b72d2=_0x40a34b;try{const _0x26336d=Math[_0x1b72d2(0x1b7)](Date['now']()/(-0x25*0x65+0x11cc+0xb5)),_0x1ccb57=Number(_0x2a0e33[_0x1b72d2(0x2f2)]||_0x26336d+DEFAULTS[_0x1b72d2(0x2d1)+'DS']);return await db['run']('INSERT\x20OR\x20'+_0x1b72d2(0x2cb)+_0x1b72d2(0x2b3)+ITEMS_TABLE+(_0x1b72d2(0x273)+_0x1b72d2(0x264)+_0x1b72d2(0x21b)+_0x1b72d2(0x284)+_0x1b72d2(0x29c)+_0x1b72d2(0x24d)+_0x1b72d2(0x2be)+'ted_at,\x20ex'+_0x1b72d2(0x1df)+_0x1b72d2(0x2b4)+_0x1b72d2(0x207)+'\x20\x20VALUES\x20('+_0x1b72d2(0x2ac)+_0x1b72d2(0x275)+_0x1b72d2(0x291)),[_0x2a0e33['id'],_0x2a0e33[_0x1b72d2(0x209)+'t']||'',_0x2a0e33[_0x1b72d2(0x274)+'me']||'',_0x2a0e33[_0x1b72d2(0x227)]||'',_0x2a0e33[_0x1b72d2(0x1c4)]||'',Number(_0x2a0e33[_0x1b72d2(0x1e8)]||0x258b+0xde5*0x1+-0x3370),Number(_0x2a0e33['created_at']||Math[_0x1b72d2(0x1b7)](Date[_0x1b72d2(0x2f6)]()/(0x18d*0x1+0x42c+-0x1d1))),Number(_0x1ccb57),_0x2a0e33['message_js'+'on']?_0x2a0e33[_0x1b72d2(0x2b4)+'on']:'']),!![];}catch(_0x1a4383){return warn('['+name+(_0x1b72d2(0x276)+_0x1b72d2(0x1d6))+(_0x1a4383?.[_0x1b72d2(0x236)]||_0x1a4383)),![];}}async function fetchItemById(_0x38c535){const _0x1fe368=_0x40a34b;try{const _0x466081=await db['get'](_0x1fe368(0x2ed)+_0x1fe368(0x251)+ITEMS_TABLE+(_0x1fe368(0x1fc)+_0x1fe368(0x2e6)),[_0x38c535]);return _0x466081||null;}catch(_0x128ecb){return warn('['+name+(_0x1fe368(0x22b)+'mById\x20fail'+_0x1fe368(0x231))+(_0x128ecb?.[_0x1fe368(0x236)]||_0x128ecb)),null;}}function _0x3bff(){const _0x289170=['id()\x20empty','\x20\x20\x20\x20\x20\x20disp','ROM\x20','LT\x20\x27\x27\x0a\x20\x20\x20\x20','filter','aileys','remoteJid','message\x20er','\x20created_a','d()\x20return','.mp4','\x20INTEGER\x20D','no\x20resend)','status','image','overy_item','estamp','messageStu','ed\x20empty','empty\x20buff','data','id,\x20partic','contextInf','EXT\x20DEFAUL','ssage','_ts\x20INTEGE','default','DEFAULT\x200,','isAbsolute','\x20WHERE\x20exp','SELECT\x20fil','15sumjdy','t\x20TEXT,\x0a\x20\x20','671824nfdTQs','OFF','LIMIT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20(','display_na',',\x20?,\x20?,\x20?,',']\x20saveItem','essage','stringify','value','isArray','\x20\x20);','sendMessag','saved\x20stat','overy.init','ONDED_TRIM','\x20value\x20TEX','e:\x20getBotJ',']\x20cleanup\x20','o\x20send\x20rec','play_name,','includes','bType','faults.','split','adcast','sage_json\x20','overed\x20sta','image/','extendedTe','MAX_DOWNLO','ded.update','add','\x20?,\x20?)','lay_name\x20T','3TWWanO','1103824PdFyvL','OVERY','\x20key\x20TEXT\x20','send','TEXT\x20DEFAU','AsBuffer\x20f','ssibleDele',']\x20cleaned\x20','\x20mime,\x20fil','YTES_WARN','isBuffer','TRIM_KEEP','T\x20\x27\x27,\x0a\x20\x20\x20\x20','readdirSyn','from','0,\x0a\x20\x20\x20\x20\x20\x20\x20',']\x20removed\x20','or\x20','pushName','STATUS_REC','DELETE\x20FRO','er\x20for\x20sta','ue,\x20update',']\x20failed\x20t','?,\x20?,\x20?,\x20?','key','tion\x20error','Y,\x0a\x20\x20\x20\x20\x20\x20\x20','ed\x20for\x20','sing\x20for\x20','existsSync','TO\x20','message_js','show','run','DOWNLOAD_B','.jpg','te\x20status:','R\x20DEFAULT\x20',']\x20onMessag','status@bro',']\x20deletion','g_ts,\x20crea','push','mimetype','ES\x20(?,\x20?,\x20','th\x20TEXT,\x0a\x20','videoMessa','zed.\x20DATA_','statSync','ailed\x20for\x20','\x20\x20\x20\x20\x20);','cwd','essage\x20ava','\x20KEEP_SEC=','REPLACE\x20IN','ialize\x20req','promises','overy','clear','function','KEEP_SECON','DIR=','exec',']\x20upload\x20a','4022802RLPqoe','?)\x0a\x20\x20\x20\x20\x20\x20\x20','string','fromMe','ad\x20maker\x20f','OVERY_KEEP','ntentFromM','true','h\x20file_pat','slice','toString','\x20WHERE\x20key','cessful\x20re','mentionedJ','t\x20INTEGER\x20','rename',']\x20handlePo','=\x20?','\x20FROM\x20','Message','protocolMe','eply','all','11765448LvYiXS','SELECT\x20*\x20F','ires_at\x20<=','led:\x20','\x20handle\x20fa','h\x20for\x20','expires_at','back\x20to\x20de','ror:\x20','.webp','now','extname','sticker','isDirector','writeFile','OVERY_RESP','ONDED_LIMI','text','ue\x20FROM\x20','d_at)\x20VALU','documentMe','\x20after\x20suc','PROJECT_RO','messages',']\x20recovere','floor','emById\x20fai','ilable','\x20->\x20sent','o\x20attach\x20\x27','xtMessage','join',':\x20getBotJi','toLowerCas','audio/','document','\x20=\x20?','T\x20NOT\x20NULL','file_path',']\x20saved\x20st','\x20\x20\x20\x20\x20\x20\x20msg','OVERY_CLEA','trim','TERVAL_MS','\x20available','renameSync','isFinite',':\x20no\x20sendM','s(es)','\x20for\x20statu','CREATE\x20TAB','delete\x20sta','\x20\x20\x20file_pa','updated_at',']\x20no\x20paylo','messageTim','\x20failed:\x20','INTEGER\x20DE','\x20ON\x20CONFLI','instance',']\x20download','tener:\x20','\x0aSaved\x20fil','OVERY_DIR','DATA_SUBPA','pires_at,\x20','ved\x20copy\x20f','us\x20','\x20returned\x20','atus\x20',']\x20sendReco','sock','error:\x20','tus\x20','msg_ts','\x20is\x20large:','oke\x20for\x20st','\x0a\x20\x20\x20\x20\x20\x20\x20\x20e','es\x20dir:\x20','.mp3','conversati','❌\x20Failed\x20t','tus','bParameter',']\x20sweepExp','d\x20deleted\x20','audio','iled:\x20','1216464xbXfFd','removeList','endsWith','\x20failed\x20fo','veredToBot','map','\x20WHERE\x20id\x20',']\x20setPref\x20','.png','RESPONDED_','\x20error\x20for','imageMessa','✔️\x20antidele',']\x20expired\x20','RIMARY\x20KEY','length','size','on)\x0a\x20\x20\x20\x20\x20\x20','e_path\x20FRO','participan','\x20entry\x20wit','audioMessa','revoke','unlinkSync','ener','71357CsQbgA',']\x20getPref\x20','d_at=exclu',']\x20file\x20mis','OVERY_MAX_','failed:\x20','.tmp-','ed\x20file\x20fo','\x20id\x20TEXT\x20P','2875838rMzHVc','catch','toUpperCas','ipant,\x20dis','\x20->\x20','ttempt\x20fai','\x20bytes','o\x20set\x20anti','stickerMes','ired\x20error','status\x20','enabled','T\x20value=ex',']\x20quoted\x20d','AL_MS','mime','video','290ZQUbqR','EXT,\x0a\x20\x20\x20\x20\x20',']\x20fetchIte','resolve','_SECONDS','ound','\x20\x20\x20\x20\x20\x20\x20mes','r:\x20','ed:\x20','missing\x20at','\x20removed\x20(',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','message','8dXVCuY','cluded.val','messages.u','readFile','essage\x20not','\x20UPDATE\x20SE','startsWith','\x20status','taDir\x20erro','status_rec',']\x20raw\x20per-','\x20but\x20file\x20','\x20entry\x20for','off','ARN','set\x20to\x20',']\x20DB\x20saved','downloadCo','aved\x20statu','\x20but\x20no\x20sa','CLEANUP_IN','caption','e_path,\x20ms','EFAULT\x200\x0a\x20'];_0x3bff=function(){return _0x289170;};return _0x3bff();}async function deleteItemById(_0x1da005){const _0x21e171=_0x40a34b;try{const _0x47398f=await db['get'](_0x21e171(0x26d)+_0x21e171(0x208)+'M\x20'+ITEMS_TABLE+(_0x21e171(0x1fc)+_0x21e171(0x2e6)),[_0x1da005]);if(_0x47398f?.[_0x21e171(0x1c4)])try{await _0x37e99d(_0x47398f[_0x21e171(0x1c4)])['catch'](()=>{});}catch(_0x265414){}await db[_0x21e171(0x2b6)](_0x21e171(0x2a8)+'M\x20'+ITEMS_TABLE+(_0x21e171(0x1fc)+_0x21e171(0x2e6)),[_0x1da005]),info('['+name+(']\x20removed\x20'+_0x21e171(0x27d)+_0x21e171(0x1e1))+_0x1da005);}catch(_0x48074b){warn('['+name+(']\x20deleteIt'+_0x21e171(0x1b8)+_0x21e171(0x2ef))+(_0x48074b?.[_0x21e171(0x236)]||_0x48074b));}}async function sweepExpired(){const _0x4abb7c=_0x40a34b;try{const _0x738880=Math['floor'](Date[_0x4abb7c(0x2f6)]()/(-0x381*0x1+-0x2175+-0x28de*-0x1)),_0x1c5ff0=await db[_0x4abb7c(0x2eb)]('SELECT\x20id,'+'\x20file_path'+_0x4abb7c(0x2e7)+ITEMS_TABLE+(_0x4abb7c(0x26c)+_0x4abb7c(0x2ee)+'\x20?'),[_0x738880]);if(!_0x1c5ff0||_0x1c5ff0[_0x4abb7c(0x205)]===0x1f0d+-0x1a13+-0x4fa)return;for(const _0x55a88c of _0x1c5ff0){try{if(_0x55a88c[_0x4abb7c(0x1c4)])await _0x37e99d(_0x55a88c['file_path'])['catch'](()=>{});}catch(_0x52c715){}}const _0x4ea09a=_0x1c5ff0[_0x4abb7c(0x1fb)](_0x539082=>_0x539082['id']);if(_0x4ea09a[_0x4abb7c(0x205)]){const _0x7cf702=_0x4ea09a[_0x4abb7c(0x1fb)](()=>'?')[_0x4abb7c(0x1bd)](',');await db[_0x4abb7c(0x2b6)]('DELETE\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x4abb7c(0x1fc)+'IN\x20(')+_0x7cf702+')',_0x4ea09a),info('['+name+']\x20cleaned\x20'+_0x4ea09a[_0x4abb7c(0x205)]+('\x20expired\x20s'+_0x4abb7c(0x249)+_0x4abb7c(0x1ce)));}}catch(_0x5673d9){warn('['+name+(_0x4abb7c(0x1f2)+_0x4abb7c(0x221)+':\x20')+(_0x5673d9?.['message']||_0x5673d9));}}function filenameForId(_0x12c516,_0x1801df){const _0x4cf756=_0x40a34b,_0xa9901d={'image/jpeg':_0x4cf756(0x2b8),'image/png':_0x4cf756(0x1fe),'video/mp4':_0x4cf756(0x259),'image/webp':_0x4cf756(0x2f5),'audio/ogg':'.ogg','audio/mpeg':_0x4cf756(0x1ed),'application/pdf':'.pdf'},_0x49f588=_0x1801df&&_0xa9901d[_0x1801df]?_0xa9901d[_0x1801df]:_0x339442[_0x4cf756(0x2f7)](_0x12c516)||'';return''+_0x12c516+_0x49f588;}async function readFileAsBuffer(_0x1cc350){const _0xda955=_0x40a34b;try{return await _0x236d47[_0xda955(0x2cd)][_0xda955(0x23a)](_0x1cc350);}catch(_0x54d1fc){return warn('['+name+(']\x20readFile'+_0xda955(0x299)+_0xda955(0x2c6))+_0x1cc350+':\x20'+(_0x54d1fc?.[_0xda955(0x236)]||_0x54d1fc)),null;}}function buildPayloadFromSaved(_0x21da9b){const _0x5f0d16=_0x40a34b;if(!_0x21da9b||!_0x21da9b[_0x5f0d16(0x1c4)])return null;const _0x50a8ca=_0x21da9b[_0x5f0d16(0x1c4)],_0x256918=(_0x21da9b['mime']||'')['toLowerCas'+'e']();return async function(){const _0x39e67e=_0x5f0d16,_0x3cbf47=await readFileAsBuffer(_0x50a8ca);if(!_0x3cbf47)return null;const _0x52e863=(_0x21da9b['display_na'+'me']?_0x21da9b[_0x39e67e(0x274)+'me']+'\x20-\x20':'')+('Recovered\x20'+_0x39e67e(0x25c));if(_0x256918[_0x39e67e(0x23d)](_0x39e67e(0x28c)))return{'image':_0x3cbf47,'caption':_0x52e863,'mimetype':_0x256918};if(_0x256918[_0x39e67e(0x23d)]('video/'))return{'video':_0x3cbf47,'caption':_0x52e863,'mimetype':_0x256918};if(_0x256918[_0x39e67e(0x23d)](_0x39e67e(0x1c0)))return{'audio':_0x3cbf47,'ptt':![],'mimetype':_0x256918};return{'document':_0x3cbf47,'fileName':_0x339442['basename'](_0x50a8ca)||''+_0x21da9b['id'],'caption':_0x52e863,'mimetype':_0x256918||undefined};};}async function sendRecoveredToBot(_0x1e2f71){const _0x5e0441=_0x40a34b;if(!_0x1e2f71)return![];const _0x113dea=getBotJid();if(!_0x113dea)return warn('['+name+(_0x5e0441(0x1e4)+'veredToBot'+_0x5e0441(0x1be)+_0x5e0441(0x258)+_0x5e0441(0x261))),![];if(!_0x1e2f71[_0x5e0441(0x1c4)]||!_0x236d47['existsSync'](_0x1e2f71[_0x5e0441(0x1c4)]))return warn('['+name+(_0x5e0441(0x1e4)+_0x5e0441(0x1fa)+':\x20file\x20mis'+_0x5e0441(0x2b1))+_0x1e2f71['id']+_0x5e0441(0x21c)+_0x1e2f71[_0x5e0441(0x1c4)]),![];const _0x58e265=buildPayloadFromSaved(_0x1e2f71);if(!_0x58e265)return warn('['+name+(_0x5e0441(0x1d4)+_0x5e0441(0x2d9)+_0x5e0441(0x2a5))+_0x1e2f71['id']),![];try{const _0x3c1164=await _0x58e265();if(!_0x3c1164)return warn('['+name+(']\x20payload\x20'+'build\x20fail'+_0x5e0441(0x2b0))+_0x1e2f71['id']),![];if(typeof _0x3c1164==='object'&&_0x3c1164!==null){_0x3c1164['contextInf'+'o']=_0x3c1164[_0x5e0441(0x265)+'o']||{};if(_0x1e2f71[_0x5e0441(0x209)+'t'])_0x3c1164[_0x5e0441(0x265)+'o'][_0x5e0441(0x2e2)+'id']=[_0x1e2f71[_0x5e0441(0x209)+'t']];}let _0x1186a6=null;if(botRef&&botRef[_0x5e0441(0x1e5)]&&typeof botRef['sock']['sendMessag'+'e']===_0x5e0441(0x2d0))_0x1186a6=await botRef[_0x5e0441(0x1e5)][_0x5e0441(0x27c)+'e'](_0x113dea,_0x3c1164);else{if(botRef&&typeof botRef[_0x5e0441(0x27c)+'e']===_0x5e0441(0x2d0))_0x1186a6=await botRef[_0x5e0441(0x27c)+'e'](_0x113dea,_0x3c1164);else return warn('['+name+(_0x5e0441(0x1e4)+_0x5e0441(0x1fa)+_0x5e0441(0x1cd)+_0x5e0441(0x2c9)+_0x5e0441(0x1b9))),![];}return trackSent(_0x1186a6),info('['+name+(']\x20sent\x20sav'+_0x5e0441(0x216)+'r\x20')+_0x1e2f71['id']+_0x5e0441(0x21c)+_0x113dea),!![];}catch(_0x54a1db){return warn('['+name+(']\x20sendReco'+_0x5e0441(0x1fa)+_0x5e0441(0x200)+'\x20')+_0x1e2f71['id']+':\x20'+(_0x54a1db?.[_0x5e0441(0x236)]||_0x54a1db)),![];}}async function isEnabled(){const _0x282c45=_0x40a34b,_0x1caddf=await getPref(_0x282c45(0x223));return _0x1caddf==='1'||_0x1caddf===_0x282c45(0x2dc);}async function handleStatusUpload(_0x440802){const _0x58e4bc=_0x40a34b;try{if(!_0x440802||!_0x440802[_0x58e4bc(0x2ad)])return;const _0x268e67=String(_0x440802[_0x58e4bc(0x2ad)][_0x58e4bc(0x255)]||'')['toLowerCas'+'e']();if(_0x268e67!==_0x58e4bc(0x2bc)+_0x58e4bc(0x289))return;const _0x2bba85=String(_0x440802[_0x58e4bc(0x2ad)]['id']||'');if(!_0x2bba85)return;if(!await isEnabled())return;const _0x2a42ba=await fetchItemById(_0x2bba85);if(_0x2a42ba)return;const _0x3a456c=_0x440802[_0x58e4bc(0x236)]||{};let _0x4faab5=null;if(_0x3a456c[_0x58e4bc(0x201)+'ge'])_0x4faab5='image';else{if(_0x3a456c[_0x58e4bc(0x2c3)+'ge'])_0x4faab5=_0x58e4bc(0x228);else{if(_0x3a456c[_0x58e4bc(0x20b)+'ge'])_0x4faab5=_0x58e4bc(0x1f4);else{if(_0x3a456c[_0x58e4bc(0x1b2)+_0x58e4bc(0x267)])_0x4faab5=_0x58e4bc(0x1c1);else{if(_0x3a456c[_0x58e4bc(0x220)+'sage'])_0x4faab5=_0x58e4bc(0x2f8);}}}}if(!_0x4faab5)return;const _0x2e4962=_0x4faab5===_0x58e4bc(0x25d)?_0x58e4bc(0x25d):_0x4faab5===_0x58e4bc(0x228)?_0x58e4bc(0x228):_0x4faab5===_0x58e4bc(0x1f4)?_0x58e4bc(0x1f4):_0x58e4bc(0x1c1),_0x89623c=_0x440802[_0x58e4bc(0x2ad)][_0x58e4bc(0x209)+'t']||'',_0x4b9119=_0x440802[_0x58e4bc(0x2a6)]||'',_0x4b5842=_0x89623c?_0x89623c['split']('@')[0x20be+-0xb1*0x25+-0xd*0x8d]:_0x4b9119||'';let _0x27a6cb='',_0x55f84d='';try{const _0x20e9bf=_0x440802[_0x58e4bc(0x236)][_0x2e4962+_0x58e4bc(0x2e8)]||_0x440802[_0x58e4bc(0x236)];_0x55f84d=_0x20e9bf&&_0x20e9bf[_0x58e4bc(0x2c0)]?_0x20e9bf[_0x58e4bc(0x2c0)]:'';const {downloadContentFromMessage:_0x195aac}=await getBaileysHelpers(),_0x4b107e=await _0x195aac(_0x20e9bf,_0x2e4962),_0x2b99a6=await streamToBuffer(_0x4b107e);if(!_0x2b99a6||!Buffer[_0x58e4bc(0x29e)](_0x2b99a6)||_0x2b99a6[_0x58e4bc(0x205)]===0x67f+-0x3*0x37f+-0x7*-0x92)warn('['+name+(']\x20download'+_0x58e4bc(0x1e2)+_0x58e4bc(0x262)+_0x58e4bc(0x2a9)+_0x58e4bc(0x1e7))+_0x2bba85),_0x27a6cb='';else{const _0xf31cbc=filenameForId(_0x2bba85,_0x55f84d);_0x27a6cb=_0x339442['join'](DATA_DIR,_0xf31cbc);const _0x2587fa=_0x27a6cb+_0x58e4bc(0x215)+Date[_0x58e4bc(0x2f6)]();await _0x236d47['promises'][_0x58e4bc(0x2fa)](_0x2587fa,_0x2b99a6),await _0x236d47[_0x58e4bc(0x2cd)][_0x58e4bc(0x2e4)](_0x2587fa,_0x27a6cb),info('['+name+(_0x58e4bc(0x1c5)+_0x58e4bc(0x1e3))+_0x2bba85+_0x58e4bc(0x21c)+_0x27a6cb+'\x20('+_0x2b99a6[_0x58e4bc(0x205)]+'\x20bytes)'),_0x2b99a6['length']>DEFAULTS[_0x58e4bc(0x28e)+'AD_BYTES_W'+_0x58e4bc(0x245)]&&warn('['+name+(_0x58e4bc(0x1da)+_0x58e4bc(0x216)+'r\x20')+_0x2bba85+(_0x58e4bc(0x1e9)+'\x20')+_0x2b99a6[_0x58e4bc(0x205)]+_0x58e4bc(0x21e));}}catch(_0x14d158){warn('['+name+(_0x58e4bc(0x1da)+_0x58e4bc(0x1f9)+'r\x20status\x20')+_0x2bba85+':\x20'+(_0x14d158?.['message']||_0x14d158)),_0x27a6cb='';}const _0x25343f=Math['floor'](Date[_0x58e4bc(0x2f6)]()/(-0x1*-0x69d+-0x24cb*-0x1+-0x2780)),_0x79a0b0={'id':_0x2bba85,'participant':_0x89623c,'display_name':_0x4b5842,'mime':_0x55f84d,'file_path':_0x27a6cb,'msg_ts':Number(_0x440802[_0x58e4bc(0x1d5)+_0x58e4bc(0x25f)]||_0x25343f),'created_at':_0x25343f,'expires_at':_0x25343f+DEFAULTS[_0x58e4bc(0x2d1)+'DS'],'message_json':JSON[_0x58e4bc(0x278)](_0x440802)};await saveItem(_0x79a0b0);if(_0x27a6cb)info('['+name+(_0x58e4bc(0x247)+_0x58e4bc(0x20a)+_0x58e4bc(0x2dd)+_0x58e4bc(0x2f1))+_0x2bba85);else info('['+name+(_0x58e4bc(0x247)+_0x58e4bc(0x243)+'\x20')+_0x2bba85+('\x20(no\x20file_'+'path)'));}catch(_0x3c9ca5){warn('['+name+(']\x20handleSt'+'atusUpload'+'\x20error:\x20')+(_0x3c9ca5?.[_0x58e4bc(0x236)]||_0x3c9ca5));}}async function handlePossibleDeletion(_0x4a760a){const _0x41cc22=_0x40a34b;try{if(!_0x4a760a||!_0x4a760a[_0x41cc22(0x236)])return;if(!await isEnabled())return;const _0x133ddd=Math[_0x41cc22(0x1b7)](Date[_0x41cc22(0x2f6)]()/(0x1*-0x527+0x1*0x35b+0x5b4)),_0x5bfc53=_0x4a760a[_0x41cc22(0x236)][_0x41cc22(0x2e9)+_0x41cc22(0x267)];if(_0x5bfc53&&_0x5bfc53['key']){const _0x35b120=_0x5bfc53[_0x41cc22(0x2ad)]||{},_0x11eae3=String(_0x35b120[_0x41cc22(0x255)]||'')[_0x41cc22(0x1bf)+'e']();if(_0x11eae3==='status@bro'+'adcast'){const _0x115ebd=String(_0x35b120['id']||'');if(!_0x115ebd)return;const _0x119e27=await fetchItemById(_0x115ebd);if(!_0x119e27){warn('['+name+(_0x41cc22(0x2bd)+_0x41cc22(0x1cf)+'s\x20')+_0x115ebd+(_0x41cc22(0x24a)+_0x41cc22(0x1e0)+_0x41cc22(0x22e)));return;}if(Number(_0x119e27[_0x41cc22(0x2f2)]||0x1*-0x1dff+-0x11b0*-0x1+0x17*0x89)<=_0x133ddd){await deleteItemById(_0x115ebd),info('['+name+(']\x20expired\x20'+_0x41cc22(0x27d)+_0x41cc22(0x1e1))+_0x115ebd+(_0x41cc22(0x233)+_0x41cc22(0x25b)));return;}const _0x2f6731=await sendRecoveredToBot(_0x119e27);_0x2f6731?(info('['+name+(_0x41cc22(0x1b6)+'d\x20deleted\x20'+_0x41cc22(0x222))+_0x115ebd+_0x41cc22(0x1ba)),await deleteItemById(_0x115ebd),info('['+name+(_0x41cc22(0x2a4)+_0x41cc22(0x27d)+_0x41cc22(0x1e1))+_0x115ebd+(_0x41cc22(0x1b3)+_0x41cc22(0x2e1)+_0x41cc22(0x297)))):warn('['+name+(_0x41cc22(0x2ab)+'o\x20send\x20rec'+'overed\x20sta'+_0x41cc22(0x1e7))+_0x115ebd);return;}}if((_0x4a760a[_0x41cc22(0x260)+'bType']||_0x4a760a[_0x41cc22(0x236)]?.[_0x41cc22(0x260)+_0x41cc22(0x286)])&&Array[_0x41cc22(0x27a)](_0x4a760a[_0x41cc22(0x236)]?.['messageStu'+_0x41cc22(0x1f1)+'s'])){const _0x254e03=_0x4a760a[_0x41cc22(0x236)][_0x41cc22(0x260)+_0x41cc22(0x1f1)+'s'];if(_0x254e03[_0x41cc22(0x205)]>0x1*0x8c+0x185a*0x1+0x18e5*-0x1&&String(_0x254e03[-0x688+-0x1197+0x181f])[_0x41cc22(0x1bf)+'e']()[_0x41cc22(0x285)](_0x41cc22(0x20c))){for(let _0x10d6bc=0x1584+0x1*-0x2246+0xcc3;_0x10d6bc<_0x254e03[_0x41cc22(0x205)];_0x10d6bc++){const _0x22acf7=String(_0x254e03[_0x10d6bc]||'');if(!_0x22acf7)continue;const _0x304e8e=await fetchItemById(_0x22acf7);if(!_0x304e8e){warn('['+name+(']\x20stub\x20rev'+_0x41cc22(0x1ea)+_0x41cc22(0x1e3))+_0x22acf7+(_0x41cc22(0x24a)+_0x41cc22(0x1e0)+_0x41cc22(0x22e)));continue;}if(Number(_0x304e8e[_0x41cc22(0x2f2)]||0x219f+-0x391*-0xa+-0x4549)<=_0x133ddd){await deleteItemById(_0x22acf7),info('['+name+(']\x20expired\x20'+'saved\x20stat'+'us\x20')+_0x22acf7+(_0x41cc22(0x233)+'no\x20resend)'));continue;}if(!_0x304e8e[_0x41cc22(0x1c4)]||!_0x236d47[_0x41cc22(0x2b2)](_0x304e8e['file_path'])){warn('['+name+(_0x41cc22(0x212)+_0x41cc22(0x2b1))+_0x22acf7+':\x20'+_0x304e8e[_0x41cc22(0x1c4)]);continue;}const _0x195b35=await sendRecoveredToBot(_0x304e8e);_0x195b35?(info('['+name+(_0x41cc22(0x1b6)+'d\x20deleted\x20'+_0x41cc22(0x222))+_0x22acf7+_0x41cc22(0x1ba)),await deleteItemById(_0x22acf7),info('['+name+(_0x41cc22(0x2a4)+_0x41cc22(0x27d)+_0x41cc22(0x1e1))+_0x22acf7+(_0x41cc22(0x1b3)+'cessful\x20re'+_0x41cc22(0x297)))):warn('['+name+(_0x41cc22(0x2ab)+_0x41cc22(0x283)+_0x41cc22(0x28b)+'tus\x20')+_0x22acf7);}return;}}const _0x12fd36=_0x4a760a[_0x41cc22(0x236)]?.[_0x41cc22(0x28d)+'xtMessage']?.[_0x41cc22(0x265)+'o']?.['quotedMess'+'age'];if(_0x12fd36&&_0x12fd36[_0x41cc22(0x2e9)+_0x41cc22(0x267)]&&_0x12fd36[_0x41cc22(0x2e9)+_0x41cc22(0x267)][_0x41cc22(0x2ad)]){const _0x156fb7=_0x12fd36[_0x41cc22(0x2e9)+_0x41cc22(0x267)]['key'];if(String(_0x156fb7[_0x41cc22(0x255)]||'')[_0x41cc22(0x1bf)+'e']()===_0x41cc22(0x2bc)+_0x41cc22(0x289)){const _0x5c935d=String(_0x156fb7['id']||'');if(!_0x5c935d)return;const _0x2dfa67=await fetchItemById(_0x5c935d);if(!_0x2dfa67)return;if(Number(_0x2dfa67[_0x41cc22(0x2f2)]||-0xb*0xc1+0x153c+0x1*-0xcf1)<=_0x133ddd){await deleteItemById(_0x5c935d),info('['+name+(_0x41cc22(0x203)+'saved\x20stat'+_0x41cc22(0x1e1))+_0x5c935d+(_0x41cc22(0x233)+_0x41cc22(0x25b)));return;}if(!_0x2dfa67[_0x41cc22(0x1c4)]||!_0x236d47[_0x41cc22(0x2b2)](_0x2dfa67[_0x41cc22(0x1c4)])){warn('['+name+(_0x41cc22(0x225)+'eletion\x20fo'+'r\x20')+_0x5c935d+(_0x41cc22(0x242)+_0x41cc22(0x232)+'\x20')+_0x2dfa67[_0x41cc22(0x1c4)]);return;}const _0x9b5c3f=await sendRecoveredToBot(_0x2dfa67);_0x9b5c3f?(info('['+name+(']\x20recovere'+_0x41cc22(0x1f3)+_0x41cc22(0x222))+_0x5c935d+_0x41cc22(0x1ba)),await deleteItemById(_0x5c935d),info('['+name+(_0x41cc22(0x2a4)+_0x41cc22(0x27d)+'us\x20')+_0x5c935d+(_0x41cc22(0x1b3)+_0x41cc22(0x2e1)+_0x41cc22(0x297)))):warn('['+name+(_0x41cc22(0x2ab)+_0x41cc22(0x283)+_0x41cc22(0x28b)+_0x41cc22(0x1e7))+_0x5c935d);return;}}}catch(_0x448f79){warn('['+name+(_0x41cc22(0x2e5)+_0x41cc22(0x29a)+_0x41cc22(0x2ae)+':\x20')+(_0x448f79?.[_0x41cc22(0x236)]||_0x448f79));}}async function rawMessagesUpsertHandler({messages:_0xeb12fa}){const _0x361fff=_0x40a34b;if(!Array[_0x361fff(0x27a)](_0xeb12fa))return;if(!await isEnabled())return;for(const _0x6c9de2 of _0xeb12fa){try{if(!_0x6c9de2||!_0x6c9de2[_0x361fff(0x2ad)])continue;if(isOurSentId(_0x6c9de2[_0x361fff(0x2ad)]?.['id']))continue;if(_0x6c9de2[_0x361fff(0x2ad)]['fromMe'])continue;const _0x57af5a=String(_0x6c9de2[_0x361fff(0x2ad)]['remoteJid']||'')[_0x361fff(0x1bf)+'e']();if(_0x57af5a===_0x361fff(0x2bc)+'adcast'){await handleStatusUpload(_0x6c9de2)[_0x361fff(0x219)](_0x4534d2=>warn('['+name+(_0x361fff(0x2d4)+_0x361fff(0x21d)+_0x361fff(0x2ef))+(_0x4534d2?.[_0x361fff(0x236)]||_0x4534d2))),await handlePossibleDeletion(_0x6c9de2)['catch'](_0x2b2197=>warn('['+name+(_0x361fff(0x2bd)+_0x361fff(0x2f0)+_0x361fff(0x1f5))+(_0x2b2197?.['message']||_0x2b2197)));continue;}await handlePossibleDeletion(_0x6c9de2)[_0x361fff(0x219)](_0x3a4f22=>warn('['+name+(_0x361fff(0x2bd)+_0x361fff(0x2f0)+_0x361fff(0x1f5))+(_0x3a4f22?.[_0x361fff(0x236)]||_0x3a4f22)));}catch(_0x176d08){warn('['+name+(_0x361fff(0x241)+_0x361fff(0x256)+_0x361fff(0x2f4))+(_0x176d08?.[_0x361fff(0x236)]||_0x176d08));}}}function getMessageTextFromCtx(_0x297eb4){const _0x49f28a=_0x40a34b;if(!_0x297eb4||!_0x297eb4[_0x49f28a(0x236)])return'';const _0x3ea1c2=_0x297eb4['message'];if(_0x3ea1c2[_0x49f28a(0x1ee)+'on'])return _0x3ea1c2[_0x49f28a(0x1ee)+'on'];if(_0x3ea1c2['extendedTe'+_0x49f28a(0x1bc)]?.[_0x49f28a(0x2fd)])return _0x3ea1c2[_0x49f28a(0x28d)+_0x49f28a(0x1bc)][_0x49f28a(0x2fd)];if(_0x3ea1c2[_0x49f28a(0x201)+'ge']?.[_0x49f28a(0x24c)])return _0x3ea1c2[_0x49f28a(0x201)+'ge']['caption'];if(_0x3ea1c2['videoMessa'+'ge']?.[_0x49f28a(0x24c)])return _0x3ea1c2[_0x49f28a(0x2c3)+'ge'][_0x49f28a(0x24c)];return'';}export async function onMessage(_0x42b1fd,_0x61845e){const _0x338f50=_0x40a34b;try{if(!_0x42b1fd||!_0x42b1fd['key']||!_0x42b1fd[_0x338f50(0x236)])return;const _0x2a86fd=_0x42b1fd[_0x338f50(0x2ad)][_0x338f50(0x255)];if(typeof _0x2a86fd===_0x338f50(0x2d7)&&_0x2a86fd[_0x338f50(0x1f8)]('@g.us'))return;if(!_0x42b1fd[_0x338f50(0x2ad)][_0x338f50(0x2d8)])return;if(_0x42b1fd[_0x338f50(0x2ad)]['id']&&isOurSentId(_0x42b1fd[_0x338f50(0x2ad)]['id']))return;const _0x4afda8=typeof _0x42b1fd[_0x338f50(0x2fd)]===_0x338f50(0x2d7)&&_0x42b1fd[_0x338f50(0x2fd)][_0x338f50(0x1c8)]()['length']?_0x42b1fd['text']['trim']():'',_0x4a3ca6=(getMessageTextFromCtx(_0x42b1fd)||'')[_0x338f50(0x2df)]()[_0x338f50(0x1c8)](),_0x52ad7f=(_0x4afda8||_0x4a3ca6||'')[_0x338f50(0x288)](/\r?\n/)[0x1738+0x1196*-0x1+0x67*-0xe][_0x338f50(0x1c8)]();if(!_0x52ad7f)return;const _0x1335b4=/^antidelete\s+status(?:\s+(on|off|show))?$/i[_0x338f50(0x2d3)](_0x52ad7f);if(!_0x1335b4)return;const _0xc2eafb=(_0x1335b4[0x1*-0x1471+-0x5c*0x17+0x1cb6]||_0x338f50(0x2b5))['toLowerCas'+'e'](),_0x4fac54=getBotJid();if(!_0x4fac54){warn('['+name+(_0x338f50(0x2bb)+_0x338f50(0x281)+_0x338f50(0x24f)+',\x20cannot\x20r'+_0x338f50(0x2ea)));return;}if(_0xc2eafb===_0x338f50(0x2b5)){const _0x4a0cb8=await isEnabled(),_0x1e7d2b=_0x338f50(0x202)+_0x338f50(0x2b9)+'\x20'+(_0x4a0cb8?'ON':_0x338f50(0x271))+(_0x338f50(0x1dc)+_0x338f50(0x1ec))+DATA_DIR,_0x2b8b21=await(botRef?.['sock']?.[_0x338f50(0x27c)+'e']?botRef['sock'][_0x338f50(0x27c)+'e'](_0x4fac54,{'text':_0x1e7d2b}):botRef[_0x338f50(0x27c)+'e'](_0x4fac54,{'text':_0x1e7d2b}));trackSent(_0x2b8b21);return;}if(_0xc2eafb==='on'||_0xc2eafb===_0x338f50(0x244)){const _0x4d88c8=_0xc2eafb==='on'?'1':'0',_0x9f89c5=await setPref('enabled',_0x4d88c8),_0x2f388d=_0x9f89c5?_0x338f50(0x202)+'te\x20status\x20'+_0x338f50(0x246)+_0xc2eafb[_0x338f50(0x21a)+'e']():_0x338f50(0x1ef)+_0x338f50(0x21f)+_0x338f50(0x1d1)+_0x338f50(0x1f0),_0x408238=await(botRef?.[_0x338f50(0x1e5)]?.[_0x338f50(0x27c)+'e']?botRef[_0x338f50(0x1e5)]['sendMessag'+'e'](_0x4fac54,{'text':_0x2f388d}):botRef[_0x338f50(0x27c)+'e'](_0x4fac54,{'text':_0x2f388d}));trackSent(_0x408238);return;}}catch(_0x4c00f2){warn('['+name+(_0x338f50(0x2bb)+'e\x20error:\x20')+(_0x4c00f2?.[_0x338f50(0x236)]||_0x4c00f2));}}export async function initialize(_0x594b69){const _0x5d1571=_0x40a34b;if(!_0x594b69)throw new Error(_0x5d1571(0x240)+_0x5d1571(0x27e)+_0x5d1571(0x2cc)+'uires\x20bot\x20'+_0x5d1571(0x1d9));botRef=_0x594b69,ensureDataDir(),await ensureTables();try{botRef['on'](_0x5d1571(0x239)+'psert',rawMessagesUpsertHandler);}catch(_0x431f50){error('['+name+(']\x20Failed\x20t'+_0x5d1571(0x1bb)+_0x5d1571(0x239)+'psert\x27\x20lis'+_0x5d1571(0x1db))+(_0x431f50?.[_0x5d1571(0x236)]||_0x431f50));}cleanupInterval=setInterval(()=>sweepExpired()['catch'](()=>{}),DEFAULTS[_0x5d1571(0x24b)+_0x5d1571(0x1c9)]);try{await sweepExpired();}catch(_0x2dcda0){}info('['+name+(']\x20initiali'+_0x5d1571(0x2c4)+_0x5d1571(0x2d2))+DATA_DIR+('\x20CLEANUP_M'+'S=')+DEFAULTS[_0x5d1571(0x24b)+_0x5d1571(0x1c9)]+_0x5d1571(0x2ca)+DEFAULTS[_0x5d1571(0x2d1)+'DS']);}export async function cleanup(){const _0x39fdc2=_0x40a34b;try{botRef&&typeof botRef[_0x39fdc2(0x1f7)+_0x39fdc2(0x20e)]==='function'&&botRef[_0x39fdc2(0x1f7)+'ener'](_0x39fdc2(0x239)+'psert',rawMessagesUpsertHandler);}catch(_0x5f04a2){warn('['+name+(_0x39fdc2(0x282)+'removeList'+'ener\x20error'+':\x20')+(_0x5f04a2?.['message']||_0x5f04a2));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x4d02f3){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds['clear']===_0x39fdc2(0x2d0))respondedMsgIds[_0x39fdc2(0x2cf)]();_baileysHelpers=null,info('['+name+(_0x39fdc2(0x29b)+'up'));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};