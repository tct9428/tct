const _0x322c70=_0x4f0b;(function(_0x5d3bf5,_0x3c2cb2){const _0x29526e=_0x4f0b,_0x4f58eb=_0x5d3bf5();while(!![]){try{const _0x3d8011=parseInt(_0x29526e(0x24a))/(-0x15dc+-0x1a25+0x5*0x99a)*(parseInt(_0x29526e(0x2e8))/(0xd*0x80+0x109c+-0x171a))+-parseInt(_0x29526e(0x1fa))/(-0x3d*-0x45+0x1394+-0x2*0x1201)*(parseInt(_0x29526e(0x2c3))/(-0x65*0x3f+-0x1*0x20ba+-0x1333*-0x3))+parseInt(_0x29526e(0x28f))/(-0x21fc+-0x3*-0x5f8+0x1019)+parseInt(_0x29526e(0x334))/(-0x21da+-0x151e+0x36fe)*(-parseInt(_0x29526e(0x20b))/(-0x1c00+0x4ed+0x171a))+parseInt(_0x29526e(0x20d))/(0xc85+-0x14cf+0x852)*(parseInt(_0x29526e(0x27b))/(0xde9*-0x1+0x1e7a+-0x1088))+parseInt(_0x29526e(0x20e))/(0x1*-0xa21+-0x21b5+-0xd8*-0x34)*(parseInt(_0x29526e(0x2dd))/(-0x247f*0x1+-0x1569+-0x5*-0xb97))+-parseInt(_0x29526e(0x2e4))/(-0x193f+-0x11*-0xe2+0xa49)*(parseInt(_0x29526e(0x235))/(-0x1b6d+-0x19bd+0x3537));if(_0x3d8011===_0x3c2cb2)break;else _0x4f58eb['push'](_0x4f58eb['shift']());}catch(_0x303578){_0x4f58eb['push'](_0x4f58eb['shift']());}}}(_0x1d05,-0x1*0x10b223+-0x46ca0*0x5+0x336a50));import _0x2cca2b from'fs';function _0x4f0b(_0x289e2c,_0x217cff){_0x289e2c=_0x289e2c-(0x21f+0x2*-0xd3d+-0xb6*-0x25);const _0x543f8d=_0x1d05();let _0x5369a5=_0x543f8d[_0x289e2c];return _0x5369a5;}import _0x13d83d from'path';import{mkdirSync}from'fs';import{rm as _0x29c0b8}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x322c70(0x1f8)+_0x322c70(0x2f0);export const version=_0x322c70(0x2cf);export const priority=-0x7f*-0x3b+-0x20*0x7f+-0xcf7;export const commands=[_0x322c70(0x2b2)+_0x322c70(0x300)];export const configKeys=[_0x322c70(0x25a)+'OT',_0x322c70(0x33b)+_0x322c70(0x243),_0x322c70(0x33b)+'OVERY_CLEA'+'NUP_INTERV'+'AL_MS',_0x322c70(0x33b)+_0x322c70(0x330)+_0x322c70(0x274),_0x322c70(0x33b)+_0x322c70(0x236)+_0x322c70(0x222)+'T',_0x322c70(0x33b)+_0x322c70(0x236)+'ONDED_TRIM'+_0x322c70(0x2df),_0x322c70(0x33b)+'OVERY_MAX_'+_0x322c70(0x30f)+'YTES_WARN'];let CFG={};try{CFG=typeof getConfig===_0x322c70(0x290)?getConfig()||{}:{};}catch(_0x56c253){warn('['+name+(']\x20getConfi'+_0x322c70(0x286)+'\x20')+(_0x56c253?.[_0x322c70(0x2f5)]||_0x56c253)+(_0x322c70(0x304)+_0x322c70(0x1f5)+_0x322c70(0x229))),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x13d83d[_0x322c70(0x29d)](_0x322c70(0x282),_0x322c70(0x294)),'CLEANUP_INTERVAL_MS':(0x1*-0x1281+-0x53*-0x3e+-0x37*0x7)*(-0x21bf+0x86b+0x1990)*(0x7*0x42a+0x19*-0x64+-0x13*0x102)*(0x2*-0xa63+0x181d+-0x1d*-0x5),'KEEP_SECONDS':(-0x210d+0x22a8+-0x183)*(0x1*-0x399+0x807+0x3*-0x166)*(0x8e2+-0x1d84+-0x14de*-0x1),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(0x2f7+-0x245e+0x2171)*(-0x24d7+0x9e5*-0x1+-0x4*-0xcaf)*(0x1a5d+-0xcd0+0x1e9*-0x5)};function _0x1d05(){const _0x3b4f48=['.tmp-','tus\x20','extendedTe','\x20error:\x20','enabled',']\x20expired\x20','\x20FROM\x20','AsBuffer\x20f','11516461nyYvXu','t\x20TEXT,\x0a\x20\x20','_KEEP','ilable','value','messageTim','\x20entry\x20for','2076pIyVgL','promises','\x20failed\x20fo','ailed\x20for\x20','2VNKXsH','status\x20','\x20-\x20','from','\x20\x20\x20\x20\x20\x20\x20mes','SELECT\x20fil','updated_at','audio','overy','imageMessa','protocolMe','ted_at,\x20ex','statSync','message','\x20=\x20?','ed\x20empty','ded.update',']\x20deletion',']\x20onMessag','ssage','play_name,',']\x20DB\x20saved','videoMessa','EXT\x20DEFAUL','\x20status','aileys','startsWith','clear','.\x20Falling\x20','\x20after\x20suc','exec','d\x20deleted\x20','video/','\x20mime,\x20fil','ed\x20for\x20','\x20available','age','.pdf','key','DOWNLOAD_B','\x20but\x20no\x20sa','.mp4','toLowerCas','or\x20','send','quotedMess','sendMessag','?,\x20?,\x20?,\x20?','R\x20DEFAULT\x20','g_ts,\x20crea','overy_item','filter','catch','caption','\x20->\x20','adcast','\x20entry\x20wit','te\x20status:','INSERT\x20OR\x20',']\x20setPref\x20','essage','zed.\x20DATA_','TO\x20','0,\x0a\x20\x20\x20\x20\x20\x20\x20','ialize\x20req','CREATE\x20TAB','s(es)','isBuffer','veredToBot','mimetype','tus','ue,\x20update','OVERY_KEEP','TRIM_KEEP','set\x20to\x20','oke\x20for\x20st','318VMAvDS','ires_at\x20<=','OVERY_CLEA','path)','no\x20resend)','text','tion\x20error','STATUS_REC','build\x20fail',']\x20download','d_at;','.jpg','split',']\x20ensureDa','unlinkSync','\x20key\x20TEXT\x20','msg_ts','delete\x20sta','lay_name\x20T','es\x20dir:\x20','readFile',':\x20file\x20mis','all','ener','Recovered\x20','\x20failed:\x20','cwd','failed:\x20','\x20handle\x20fa','LIMIT','back\x20to\x20de','RIMARY\x20KEY','rmdirSync','status_rec','document','21mgbtFq','file_path','message\x20er','status@bro','\x0aSaved\x20fil','ed\x20file\x20fo','sock','readdirSyn','ROM\x20','\x20WHERE\x20exp','xtMessage','psert','\x0a\x20\x20\x20\x20\x20\x20\x20\x20(','overed\x20sta','\x20returned\x20',']\x20handleSt','o\x20attach\x20\x27','81333MUXQix','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','450680NrjDrm','10FKieHW',']\x20stub\x20rev','e_path,\x20ms','removeList','r:\x20','LE\x20IF\x20NOT\x20','participan','led:\x20','SELECT\x20*\x20F','e_path\x20FRO','OVERY','TERVAL_MS',']\x20saved\x20st','rename',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20\x20\x20\x20\x20\x20disp','RESPONDED_','trim','xpires_at\x20','r\x20status\x20','ONDED_LIMI','.ogg','isFinite','created_at','mentionedJ','mime','essage\x20ava','faults.','t\x20INTEGER\x20','tmp',']\x20failed\x20t','bParameter','sticker','\x20UPDATE\x20SE','KEEP_SECON','sage_json\x20','\x20->\x20sent','✔️\x20antidele','AD_BYTES_W','78858hPhvCp','OVERY_RESP','\x20\x20\x20\x20\x20);','default','toUpperCas','documentMe','ssibleDele','LT\x20\x27\x27\x0a\x20\x20\x20\x20','length','h\x20for\x20','id()\x20empty','NUP_INTERV','h\x20file_pat','d_at=exclu','OVERY_DIR','\x20\x20\x20file_pa','run','add','\x20removed\x20(','DELETE\x20FRO','MAX_DOWNLO','262981QROqGB','bType','th\x20TEXT,\x0a\x20','\x20WHERE\x20id\x20',':\x20getBotJi','stringify','T\x20NOT\x20NULL','resolve','messages.u','video','TEXT\x20DEFAU','er\x20for\x20sta','saved\x20stat','AL_MS','expires_at','sage','PROJECT_RO','includes','EXISTS\x20','renameSync','mById\x20fail','ipant,\x20dis','ror:\x20','messageStu','INSERT\x20INT','ONDED_TRIM','estamp',']\x20sendReco','remoteJid',']\x20recovere','\x20expired\x20s','INTEGER\x20DE','us\x20','ener\x20error','contextInf','slice','e:\x20getBotJ','overy_pref',']\x20saveItem','now','atus\x20',']\x20file\x20mis','_SECONDS','ARN','EFAULT\x200\x0a\x20','@g.us','eletion\x20fo','message_js','\x20error\x20for','243lEnBHK','revoke','\x20\x20);','existsSync','atusUpload','endsWith','ad\x20maker\x20f','data','uires\x20bot\x20','eply',']\x20cleaned\x20','g()\x20threw:',']\x20removed\x20','DATA_SUBPA','pushName','\x20file_path',']\x20payload\x20','OVERY_MAX_','\x20for\x20statu','T\x20\x27\x27,\x0a\x20\x20\x20\x20','4742770gYRzmi','function','iled:\x20',']\x20sent\x20sav','string','status','floor','stickerMes','emById\x20fai','ved\x20copy\x20f','CLEANUP_IN','\x20KEEP_SEC=','error:\x20','SELECT\x20id,','join','tener:\x20','Y,\x0a\x20\x20\x20\x20\x20\x20\x20','e\x20error:\x20','has','YTES_WARN','push','isArray','_ts\x20INTEGE','cessful\x20re','sing\x20for\x20',':\x20no\x20sendM','\x20CLEANUP_M','.mp3','EXT,\x0a\x20\x20\x20\x20\x20','ntentFromM','IN\x20(',']\x20quoted\x20d','map','display_na','conversati','antidelete','fromMe',']\x20upload\x20a','writeFile','\x20id\x20TEXT\x20P','aved\x20statu','d_at)\x20VALU','ired\x20error','instance','FAULT\x200,\x0a\x20','d()\x20return','❌\x20Failed\x20t','image/','image','taDir\x20erro','off',',\x20?,\x20?,\x20?,','736396YDnXdl','\x20(no\x20file_','o\x20send\x20rec','object','get','ound',']\x20deleteIt',']\x20cleanup\x20','te\x20status\x20','=\x20?','messages','show','3.0.0','\x20\x20\x20\x20\x20\x20\x20msg','downloadCo','CT(key)\x20DO','ES\x20(?,\x20?,\x20','\x20\x20VALUES\x20('];_0x1d05=function(){return _0x3b4f48;};return _0x1d05();}function toPositiveInt(_0x5884f7,_0xac858b){const _0x5586e0=_0x322c70,_0x51781b=Number(_0x5884f7);if(!Number[_0x5586e0(0x224)](_0x51781b)||_0x51781b<=-0x164c+-0xb02*-0x1+-0xb4a*-0x1)return _0xac858b;return Math['floor'](_0x51781b);}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0x322c70(0x33b)+_0x322c70(0x243)]===_0x322c70(0x293)&&CFG[_0x322c70(0x33b)+'OVERY_DIR']['trim']()?CFG[_0x322c70(0x33b)+_0x322c70(0x243)]:FALLBACKS[_0x322c70(0x288)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG[_0x322c70(0x33b)+_0x322c70(0x336)+_0x322c70(0x240)+_0x322c70(0x257)]??(CFG[_0x322c70(0x33b)+'OVERY']&&CFG[_0x322c70(0x33b)+_0x322c70(0x218)][_0x322c70(0x299)+_0x322c70(0x219)]),FALLBACKS[_0x322c70(0x299)+_0x322c70(0x219)]),'KEEP_SECONDS':toPositiveInt(CFG[_0x322c70(0x33b)+_0x322c70(0x330)+_0x322c70(0x274)]??(CFG[_0x322c70(0x33b)+_0x322c70(0x218)]&&CFG[_0x322c70(0x33b)+'OVERY'][_0x322c70(0x230)+'DS']),FALLBACKS[_0x322c70(0x230)+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x322c70(0x33b)+_0x322c70(0x236)+_0x322c70(0x222)+'T']??(CFG[_0x322c70(0x33b)+_0x322c70(0x218)]&&CFG['STATUS_REC'+_0x322c70(0x218)][_0x322c70(0x21e)+_0x322c70(0x1f4)]),FALLBACKS['RESPONDED_'+_0x322c70(0x1f4)]),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG[_0x322c70(0x33b)+_0x322c70(0x236)+_0x322c70(0x263)+_0x322c70(0x2df)]??(CFG['STATUS_REC'+_0x322c70(0x218)]&&CFG[_0x322c70(0x33b)+_0x322c70(0x218)][_0x322c70(0x21e)+_0x322c70(0x331)]),FALLBACKS[_0x322c70(0x21e)+_0x322c70(0x331)]),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG[_0x322c70(0x33b)+_0x322c70(0x28c)+_0x322c70(0x30f)+_0x322c70(0x2a2)]??(CFG['STATUS_REC'+'OVERY']&&CFG[_0x322c70(0x33b)+_0x322c70(0x218)][_0x322c70(0x249)+'AD_BYTES_W'+_0x322c70(0x275)]),FALLBACKS[_0x322c70(0x249)+_0x322c70(0x234)+_0x322c70(0x275)])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE=_0x322c70(0x1f8)+_0x322c70(0x26f)+'s',ITEMS_TABLE=_0x322c70(0x1f8)+_0x322c70(0x31a)+'s';let respondedMsgIds=new Set();function trackSent(_0x5e2736){const _0x1dbc08=_0x322c70;try{const _0x3bc7bc=_0x5e2736?.['key']?.['id']||_0x5e2736?.['id']||_0x5e2736?.[_0x1dbc08(0x2cd)]&&_0x5e2736[_0x1dbc08(0x2cd)][-0x1*-0x2043+-0x27*0x73+-0xebe]?.[_0x1dbc08(0x30e)]?.['id']||Array[_0x1dbc08(0x2a4)](_0x5e2736)&&_0x5e2736[0x37*-0x2a+0x1*0x1c17+-0x1311]?.[_0x1dbc08(0x30e)]?.['id']||null;if(!_0x3bc7bc)return;respondedMsgIds[_0x1dbc08(0x246)](String(_0x3bc7bc));if(respondedMsgIds['size']>DEFAULTS[_0x1dbc08(0x21e)+_0x1dbc08(0x1f4)]){const _0x5abcb4=Array[_0x1dbc08(0x2eb)](respondedMsgIds);respondedMsgIds=new Set(_0x5abcb4[_0x1dbc08(0x26d)](-DEFAULTS[_0x1dbc08(0x21e)+_0x1dbc08(0x331)]));}}catch(_0x4b2475){}}function isOurSentId(_0x4cf023){const _0x1c28ff=_0x322c70;return _0x4cf023&&respondedMsgIds[_0x1c28ff(0x2a1)](String(_0x4cf023));}async function getBaileysHelpers(){const _0x141d61=_0x322c70;if(_baileysHelpers)return _baileysHelpers;try{const _0xc84604=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0xc84604['downloadCo'+'ntentFromM'+_0x141d61(0x324)]||_0xc84604[_0x141d61(0x238)]?.['downloadCo'+_0x141d61(0x2ac)+_0x141d61(0x324)]};if(!_baileysHelpers[_0x141d61(0x2d1)+_0x141d61(0x2ac)+_0x141d61(0x324)])throw new Error(_0x141d61(0x2d1)+_0x141d61(0x2ac)+'essage\x20not'+_0x141d61(0x30b));return _baileysHelpers;}catch(_0x55f35d){error(_0x55f35d,'['+name+(_0x141d61(0x22c)+'o\x20import\x20B'+_0x141d61(0x301)));throw _0x55f35d;}}async function streamToBuffer(_0x1ba135){const _0xc1b18f=_0x322c70,_0x1f93da=[];for await(const _0x25cc89 of _0x1ba135)_0x1f93da[_0xc1b18f(0x2a3)](Buffer[_0xc1b18f(0x32b)](_0x25cc89)?_0x25cc89:Buffer['from'](_0x25cc89));return Buffer['concat'](_0x1f93da);}function ensureDataDir(){const _0x3c2ef1=_0x322c70;try{const _0x178786=CFG||{},_0x2ea586=_0x178786[_0x3c2ef1(0x25a)+'OT']&&typeof _0x178786[_0x3c2ef1(0x25a)+'OT']==='string'?_0x178786['PROJECT_RO'+'OT']:process[_0x3c2ef1(0x34e)](),_0x5540ab=typeof DEFAULTS[_0x3c2ef1(0x288)+'TH']===_0x3c2ef1(0x293)&&DEFAULTS[_0x3c2ef1(0x288)+'TH'][_0x3c2ef1(0x21f)]()?DEFAULTS[_0x3c2ef1(0x288)+'TH']:null;DATA_DIR=_0x5540ab&&typeof _0x5540ab===_0x3c2ef1(0x293)&&_0x5540ab[_0x3c2ef1(0x21f)]()?_0x13d83d['isAbsolute'](_0x5540ab)?_0x5540ab:_0x13d83d[_0x3c2ef1(0x251)](_0x2ea586,_0x5540ab):_0x13d83d[_0x3c2ef1(0x251)](_0x2ea586,FALLBACKS[_0x3c2ef1(0x288)+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0x2f90c1=_0x13d83d[_0x3c2ef1(0x251)](_0x2ea586,_0x3c2ef1(0x282),_0x3c2ef1(0x294),_0x3c2ef1(0x22b));if(_0x2cca2b[_0x3c2ef1(0x27e)](_0x2f90c1)&&_0x2cca2b[_0x3c2ef1(0x2f4)](_0x2f90c1)['isDirector'+'y']()){const _0x47d064=_0x2cca2b[_0x3c2ef1(0x201)+'c'](_0x2f90c1)[_0x3c2ef1(0x31b)](Boolean);for(const _0x246850 of _0x47d064){const _0x2bec7d=_0x13d83d['join'](_0x2f90c1,_0x246850),_0x153cb1=_0x13d83d['join'](DATA_DIR,_0x246850);try{if(!_0x2cca2b['existsSync'](_0x153cb1))_0x2cca2b[_0x3c2ef1(0x25d)](_0x2bec7d,_0x153cb1);else _0x2cca2b[_0x3c2ef1(0x342)](_0x2bec7d);}catch(_0x5511e2){}}try{const _0x282648=_0x2cca2b[_0x3c2ef1(0x201)+'c'](_0x2f90c1);if(!_0x282648||_0x282648[_0x3c2ef1(0x23d)]===-0x1b06+-0x1c65+0x376b)_0x2cca2b[_0x3c2ef1(0x1f7)](_0x2f90c1);}catch(_0x78ac5){}}}catch(_0x3c8283){}}catch(_0x23cfd5){warn('['+name+(_0x3c2ef1(0x341)+_0x3c2ef1(0x2c0)+_0x3c2ef1(0x212))+(_0x23cfd5?.[_0x3c2ef1(0x2f5)]||_0x23cfd5)),DATA_DIR=_0x13d83d[_0x3c2ef1(0x251)](process['cwd'](),FALLBACKS['DATA_SUBPA'+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x1ec4ca){}}}async function ensureTables(){const _0x3d80e5=_0x322c70;await db[_0x3d80e5(0x306)](_0x3d80e5(0x329)+_0x3d80e5(0x213)+_0x3d80e5(0x25c)+PREFS_TABLE+(_0x3d80e5(0x20c)+_0x3d80e5(0x343)+'PRIMARY\x20KE'+_0x3d80e5(0x29f)+'\x20value\x20TEX'+_0x3d80e5(0x250)+_0x3d80e5(0x21c)+_0x3d80e5(0x2ee)+'\x20INTEGER\x20D'+_0x3d80e5(0x276)+_0x3d80e5(0x237))),await db[_0x3d80e5(0x306)](_0x3d80e5(0x329)+_0x3d80e5(0x213)+_0x3d80e5(0x25c)+ITEMS_TABLE+(_0x3d80e5(0x20c)+_0x3d80e5(0x2b6)+_0x3d80e5(0x1f6)+_0x3d80e5(0x21c)+_0x3d80e5(0x214)+_0x3d80e5(0x2de)+_0x3d80e5(0x21d)+_0x3d80e5(0x346)+_0x3d80e5(0x2ff)+_0x3d80e5(0x28e)+'\x20\x20\x20\x20mime\x20T'+_0x3d80e5(0x2ab)+_0x3d80e5(0x244)+_0x3d80e5(0x24c)+_0x3d80e5(0x2d0)+_0x3d80e5(0x2a5)+_0x3d80e5(0x318)+_0x3d80e5(0x327)+'\x20created_a'+_0x3d80e5(0x22a)+'DEFAULT\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20e'+_0x3d80e5(0x220)+_0x3d80e5(0x269)+_0x3d80e5(0x2bb)+_0x3d80e5(0x2ec)+_0x3d80e5(0x231)+_0x3d80e5(0x254)+_0x3d80e5(0x23c)+_0x3d80e5(0x27d)));}async function getPref(_0x2c5485){const _0x481e93=_0x322c70;try{const _0x1e00d8=await db[_0x481e93(0x2c7)]('SELECT\x20val'+'ue\x20FROM\x20'+PREFS_TABLE+('\x20WHERE\x20key'+_0x481e93(0x2f6)),[_0x2c5485]);return _0x1e00d8?_0x1e00d8[_0x481e93(0x2e1)]:null;}catch(_0x1e9e60){return warn('['+name+(']\x20getPref\x20'+_0x481e93(0x29b))+(_0x1e9e60?.['message']||_0x1e9e60)),null;}}async function setPref(_0x452c7e,_0x45fbb2){const _0x3de3f3=_0x322c70;try{const _0x5c3c60=Math[_0x3de3f3(0x295)](Date[_0x3de3f3(0x271)]()/(0xbb1*0x1+-0x2217+0x1a4e));return await db[_0x3de3f3(0x245)](_0x3de3f3(0x262)+'O\x20'+PREFS_TABLE+('\x20(key,\x20val'+'ue,\x20update'+_0x3de3f3(0x2b8)+_0x3de3f3(0x2d3)+'?)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ON\x20CONFLI'+_0x3de3f3(0x2d2)+_0x3de3f3(0x22f)+'T\x20value=ex'+'cluded.val'+_0x3de3f3(0x32f)+_0x3de3f3(0x242)+_0x3de3f3(0x2f8)+_0x3de3f3(0x33e)),[_0x452c7e,String(_0x45fbb2),_0x5c3c60]),!![];}catch(_0x4a5ce3){return warn('['+name+(_0x3de3f3(0x323)+_0x3de3f3(0x34f))+(_0x4a5ce3?.[_0x3de3f3(0x2f5)]||_0x4a5ce3)),![];}}async function saveItem(_0x624062){const _0x5aa471=_0x322c70;try{const _0xe97e29=Math[_0x5aa471(0x295)](Date[_0x5aa471(0x271)]()/(0x17*-0xf5+0x71*0x27+0x8b4)),_0x576f2a=Number(_0x624062[_0x5aa471(0x258)]||_0xe97e29+DEFAULTS[_0x5aa471(0x230)+'DS']);return await db[_0x5aa471(0x245)](_0x5aa471(0x322)+'REPLACE\x20IN'+_0x5aa471(0x326)+ITEMS_TABLE+(_0x5aa471(0x206)+'id,\x20partic'+_0x5aa471(0x25f)+_0x5aa471(0x2fc)+_0x5aa471(0x309)+_0x5aa471(0x210)+_0x5aa471(0x319)+_0x5aa471(0x2f3)+'pires_at,\x20'+_0x5aa471(0x279)+'on)\x0a\x20\x20\x20\x20\x20\x20'+_0x5aa471(0x2d4)+_0x5aa471(0x317)+_0x5aa471(0x2c2)+'\x20?,\x20?)'),[_0x624062['id'],_0x624062[_0x5aa471(0x214)+'t']||'',_0x624062[_0x5aa471(0x2b0)+'me']||'',_0x624062['mime']||'',_0x624062[_0x5aa471(0x1fb)]||'',Number(_0x624062[_0x5aa471(0x344)]||-0x2656+-0x119*0xb+-0x59*-0x91),Number(_0x624062[_0x5aa471(0x225)]||Math['floor'](Date[_0x5aa471(0x271)]()/(-0x48a+-0xc66+0x536*0x4))),Number(_0x576f2a),_0x624062[_0x5aa471(0x279)+'on']?_0x624062[_0x5aa471(0x279)+'on']:'']),!![];}catch(_0x6d4ff5){return warn('['+name+(_0x5aa471(0x270)+_0x5aa471(0x34d))+(_0x6d4ff5?.[_0x5aa471(0x2f5)]||_0x6d4ff5)),![];}}async function fetchItemById(_0x53173a){const _0x13a125=_0x322c70;try{const _0x3cb6dd=await db[_0x13a125(0x2c7)](_0x13a125(0x216)+_0x13a125(0x202)+ITEMS_TABLE+(_0x13a125(0x24d)+_0x13a125(0x2cc)),[_0x53173a]);return _0x3cb6dd||null;}catch(_0xa310e8){return warn('['+name+(']\x20fetchIte'+_0x13a125(0x25e)+'ed:\x20')+(_0xa310e8?.[_0x13a125(0x2f5)]||_0xa310e8)),null;}}async function deleteItemById(_0x51a129){const _0x1068c3=_0x322c70;try{const _0x3221b9=await db[_0x1068c3(0x2c7)](_0x1068c3(0x2ed)+_0x1068c3(0x217)+'M\x20'+ITEMS_TABLE+('\x20WHERE\x20id\x20'+_0x1068c3(0x2cc)),[_0x51a129]);if(_0x3221b9?.[_0x1068c3(0x1fb)])try{await _0x29c0b8(_0x3221b9[_0x1068c3(0x1fb)])['catch'](()=>{});}catch(_0x5b54ec){}await db[_0x1068c3(0x245)](_0x1068c3(0x248)+'M\x20'+ITEMS_TABLE+(_0x1068c3(0x24d)+_0x1068c3(0x2cc)),[_0x51a129]),info('['+name+(_0x1068c3(0x287)+_0x1068c3(0x256)+_0x1068c3(0x26a))+_0x51a129);}catch(_0x59d339){warn('['+name+(_0x1068c3(0x2c9)+_0x1068c3(0x297)+_0x1068c3(0x215))+(_0x59d339?.[_0x1068c3(0x2f5)]||_0x59d339));}}async function sweepExpired(){const _0x232a51=_0x322c70;try{const _0x539461=Math[_0x232a51(0x295)](Date['now']()/(0x17*-0x1ab+-0x404+0x2b9*0x11)),_0x36f669=await db[_0x232a51(0x34a)](_0x232a51(0x29c)+_0x232a51(0x28a)+_0x232a51(0x2db)+ITEMS_TABLE+(_0x232a51(0x203)+_0x232a51(0x335)+'\x20?'),[_0x539461]);if(!_0x36f669||_0x36f669[_0x232a51(0x23d)]===-0xe*0x9d+-0x181a+0x10*0x20b)return;for(const _0x3b744c of _0x36f669){try{if(_0x3b744c[_0x232a51(0x1fb)])await _0x29c0b8(_0x3b744c[_0x232a51(0x1fb)])['catch'](()=>{});}catch(_0x4ea87e){}}const _0x1006c3=_0x36f669[_0x232a51(0x2af)](_0xade147=>_0xade147['id']);if(_0x1006c3[_0x232a51(0x23d)]){const _0x43bf64=_0x1006c3[_0x232a51(0x2af)](()=>'?')['join'](',');await db['run'](_0x232a51(0x248)+'M\x20'+ITEMS_TABLE+(_0x232a51(0x24d)+_0x232a51(0x2ad))+_0x43bf64+')',_0x1006c3),info('['+name+_0x232a51(0x285)+_0x1006c3[_0x232a51(0x23d)]+(_0x232a51(0x268)+_0x232a51(0x2b7)+_0x232a51(0x32a)));}}catch(_0x3cc364){warn('['+name+(']\x20sweepExp'+_0x232a51(0x2b9)+':\x20')+(_0x3cc364?.[_0x232a51(0x2f5)]||_0x3cc364));}}function filenameForId(_0x4857df,_0x33f849){const _0x8f21bc=_0x322c70,_0x880f0={'image/jpeg':_0x8f21bc(0x33f),'image/png':'.png','video/mp4':_0x8f21bc(0x311),'image/webp':'.webp','audio/ogg':_0x8f21bc(0x223),'audio/mpeg':_0x8f21bc(0x2aa),'application/pdf':_0x8f21bc(0x30d)},_0x5771f6=_0x33f849&&_0x880f0[_0x33f849]?_0x880f0[_0x33f849]:_0x13d83d['extname'](_0x4857df)||'';return''+_0x4857df+_0x5771f6;}async function readFileAsBuffer(_0x3a5597){const _0x2fc44e=_0x322c70;try{return await _0x2cca2b[_0x2fc44e(0x2e5)][_0x2fc44e(0x348)](_0x3a5597);}catch(_0x35806b){return warn('['+name+(']\x20readFile'+_0x2fc44e(0x2dc)+_0x2fc44e(0x2e7))+_0x3a5597+':\x20'+(_0x35806b?.[_0x2fc44e(0x2f5)]||_0x35806b)),null;}}function buildPayloadFromSaved(_0x2b920d){const _0x52c08e=_0x322c70;if(!_0x2b920d||!_0x2b920d['file_path'])return null;const _0x2ce30b=_0x2b920d['file_path'],_0x217c8e=(_0x2b920d[_0x52c08e(0x227)]||'')[_0x52c08e(0x312)+'e']();return async function(){const _0x473d3a=_0x52c08e,_0x591711=await readFileAsBuffer(_0x2ce30b);if(!_0x591711)return null;const _0x85f873=(_0x2b920d[_0x473d3a(0x2b0)+'me']?_0x2b920d[_0x473d3a(0x2b0)+'me']+_0x473d3a(0x2ea):'')+(_0x473d3a(0x34c)+_0x473d3a(0x294));if(_0x217c8e[_0x473d3a(0x302)](_0x473d3a(0x2be)))return{'image':_0x591711,'caption':_0x85f873,'mimetype':_0x217c8e};if(_0x217c8e[_0x473d3a(0x302)](_0x473d3a(0x308)))return{'video':_0x591711,'caption':_0x85f873,'mimetype':_0x217c8e};if(_0x217c8e[_0x473d3a(0x302)]('audio/'))return{'audio':_0x591711,'ptt':![],'mimetype':_0x217c8e};return{'document':_0x591711,'fileName':_0x13d83d['basename'](_0x2ce30b)||''+_0x2b920d['id'],'caption':_0x85f873,'mimetype':_0x217c8e||undefined};};}async function sendRecoveredToBot(_0x5a3d4b){const _0x22e461=_0x322c70;if(!_0x5a3d4b)return![];const _0x2c989a=getBotJid();if(!_0x2c989a)return warn('['+name+(_0x22e461(0x265)+'veredToBot'+_0x22e461(0x24e)+_0x22e461(0x2bc)+_0x22e461(0x2f7))),![];if(!_0x5a3d4b['file_path']||!_0x2cca2b['existsSync'](_0x5a3d4b[_0x22e461(0x1fb)]))return warn('['+name+(_0x22e461(0x265)+_0x22e461(0x32c)+_0x22e461(0x349)+'sing\x20for\x20')+_0x5a3d4b['id']+'\x20->\x20'+_0x5a3d4b[_0x22e461(0x1fb)]),![];const _0x1d2364=buildPayloadFromSaved(_0x5a3d4b);if(!_0x1d2364)return warn('['+name+(']\x20no\x20paylo'+_0x22e461(0x281)+_0x22e461(0x313))+_0x5a3d4b['id']),![];try{const _0x23c73b=await _0x1d2364();if(!_0x23c73b)return warn('['+name+(_0x22e461(0x28b)+_0x22e461(0x33c)+_0x22e461(0x30a))+_0x5a3d4b['id']),![];if(typeof _0x23c73b===_0x22e461(0x2c6)&&_0x23c73b!==null){_0x23c73b['contextInf'+'o']=_0x23c73b['contextInf'+'o']||{};if(_0x5a3d4b[_0x22e461(0x214)+'t'])_0x23c73b[_0x22e461(0x26c)+'o'][_0x22e461(0x226)+'id']=[_0x5a3d4b['participan'+'t']];}let _0x1fb357=null;if(botRef&&botRef[_0x22e461(0x200)]&&typeof botRef['sock'][_0x22e461(0x316)+'e']===_0x22e461(0x290))_0x1fb357=await botRef[_0x22e461(0x200)]['sendMessag'+'e'](_0x2c989a,_0x23c73b);else{if(botRef&&typeof botRef[_0x22e461(0x316)+'e']===_0x22e461(0x290))_0x1fb357=await botRef[_0x22e461(0x316)+'e'](_0x2c989a,_0x23c73b);else return warn('['+name+(_0x22e461(0x265)+_0x22e461(0x32c)+_0x22e461(0x2a8)+_0x22e461(0x228)+_0x22e461(0x2e0))),![];}return trackSent(_0x1fb357),info('['+name+(_0x22e461(0x292)+_0x22e461(0x1ff)+'r\x20')+_0x5a3d4b['id']+_0x22e461(0x31e)+_0x2c989a),!![];}catch(_0x198f91){return warn('['+name+(_0x22e461(0x265)+'veredToBot'+_0x22e461(0x27a)+'\x20')+_0x5a3d4b['id']+':\x20'+(_0x198f91?.[_0x22e461(0x2f5)]||_0x198f91)),![];}}async function isEnabled(){const _0x35097f=_0x322c70,_0x11f5c3=await getPref(_0x35097f(0x2d9));return _0x11f5c3==='1'||_0x11f5c3==='true';}async function handleStatusUpload(_0xf35f94){const _0x1f1557=_0x322c70;try{if(!_0xf35f94||!_0xf35f94[_0x1f1557(0x30e)])return;const _0x1cfdbd=String(_0xf35f94[_0x1f1557(0x30e)][_0x1f1557(0x266)]||'')[_0x1f1557(0x312)+'e']();if(_0x1cfdbd!==_0x1f1557(0x1fd)+_0x1f1557(0x31f))return;const _0x483eb5=String(_0xf35f94[_0x1f1557(0x30e)]['id']||'');if(!_0x483eb5)return;if(!await isEnabled())return;const _0xac99a2=await fetchItemById(_0x483eb5);if(_0xac99a2)return;const _0x1971dc=_0xf35f94['message']||{};let _0x4dcde0=null;if(_0x1971dc[_0x1f1557(0x2f1)+'ge'])_0x4dcde0=_0x1f1557(0x2bf);else{if(_0x1971dc[_0x1f1557(0x2fe)+'ge'])_0x4dcde0='video';else{if(_0x1971dc['audioMessa'+'ge'])_0x4dcde0=_0x1f1557(0x2ef);else{if(_0x1971dc[_0x1f1557(0x23a)+'ssage'])_0x4dcde0=_0x1f1557(0x1f9);else{if(_0x1971dc[_0x1f1557(0x296)+_0x1f1557(0x259)])_0x4dcde0=_0x1f1557(0x22e);}}}}if(!_0x4dcde0)return;const _0x3703cb=_0x4dcde0===_0x1f1557(0x2bf)?_0x1f1557(0x2bf):_0x4dcde0===_0x1f1557(0x253)?_0x1f1557(0x253):_0x4dcde0===_0x1f1557(0x2ef)?'audio':'document',_0x2a32ec=_0xf35f94['key'][_0x1f1557(0x214)+'t']||'',_0x18aab4=_0xf35f94[_0x1f1557(0x289)]||'',_0x3b163d=_0x2a32ec?_0x2a32ec['split']('@')[0xd1*-0x1+0x1e59+-0x1d88]:_0x18aab4||'';let _0x5a0dfc='',_0x176bf3='';try{const _0xa0b598=_0xf35f94[_0x1f1557(0x2f5)][_0x3703cb+'Message']||_0xf35f94[_0x1f1557(0x2f5)];_0x176bf3=_0xa0b598&&_0xa0b598['mimetype']?_0xa0b598[_0x1f1557(0x32d)]:'';const {downloadContentFromMessage:_0xbbabd3}=await getBaileysHelpers(),_0x1498d3=await _0xbbabd3(_0xa0b598,_0x3703cb),_0x39094f=await streamToBuffer(_0x1498d3);if(!_0x39094f||!Buffer['isBuffer'](_0x39094f)||_0x39094f['length']===0x1db7+0x1025*0x1+0x24b*-0x14)warn('['+name+(_0x1f1557(0x33d)+_0x1f1557(0x208)+'empty\x20buff'+_0x1f1557(0x255)+_0x1f1557(0x2d6))+_0x483eb5),_0x5a0dfc='';else{const _0x10212b=filenameForId(_0x483eb5,_0x176bf3);_0x5a0dfc=_0x13d83d[_0x1f1557(0x29d)](DATA_DIR,_0x10212b);const _0x5d860f=_0x5a0dfc+_0x1f1557(0x2d5)+Date['now']();await _0x2cca2b[_0x1f1557(0x2e5)][_0x1f1557(0x2b5)](_0x5d860f,_0x39094f),await _0x2cca2b['promises'][_0x1f1557(0x21b)](_0x5d860f,_0x5a0dfc),info('['+name+(_0x1f1557(0x21a)+'atus\x20')+_0x483eb5+_0x1f1557(0x31e)+_0x5a0dfc+'\x20('+_0x39094f['length']+'\x20bytes)'),_0x39094f[_0x1f1557(0x23d)]>DEFAULTS[_0x1f1557(0x249)+'AD_BYTES_W'+_0x1f1557(0x275)]&&warn('['+name+(_0x1f1557(0x33d)+_0x1f1557(0x1ff)+'r\x20')+_0x483eb5+('\x20is\x20large:'+'\x20')+_0x39094f[_0x1f1557(0x23d)]+'\x20bytes');}}catch(_0x4f10bc){warn('['+name+(_0x1f1557(0x33d)+_0x1f1557(0x2e6)+_0x1f1557(0x221))+_0x483eb5+':\x20'+(_0x4f10bc?.[_0x1f1557(0x2f5)]||_0x4f10bc)),_0x5a0dfc='';}const _0x458f72=Math[_0x1f1557(0x295)](Date[_0x1f1557(0x271)]()/(0x3cd*0x7+-0x6b*0x7+-0x13c6)),_0x3f9513={'id':_0x483eb5,'participant':_0x2a32ec,'display_name':_0x3b163d,'mime':_0x176bf3,'file_path':_0x5a0dfc,'msg_ts':Number(_0xf35f94[_0x1f1557(0x2e2)+_0x1f1557(0x264)]||_0x458f72),'created_at':_0x458f72,'expires_at':_0x458f72+DEFAULTS[_0x1f1557(0x230)+'DS'],'message_json':JSON[_0x1f1557(0x24f)](_0xf35f94)};await saveItem(_0x3f9513);if(_0x5a0dfc)info('['+name+(']\x20DB\x20saved'+_0x1f1557(0x320)+_0x1f1557(0x241)+_0x1f1557(0x23e))+_0x483eb5);else info('['+name+(_0x1f1557(0x2fd)+_0x1f1557(0x2e3)+'\x20')+_0x483eb5+(_0x1f1557(0x2c4)+_0x1f1557(0x337)));}catch(_0x13597a){warn('['+name+(_0x1f1557(0x209)+_0x1f1557(0x27f)+_0x1f1557(0x2d8))+(_0x13597a?.[_0x1f1557(0x2f5)]||_0x13597a));}}async function handlePossibleDeletion(_0x4cd287){const _0x7b6653=_0x322c70;try{if(!_0x4cd287||!_0x4cd287[_0x7b6653(0x2f5)])return;if(!await isEnabled())return;const _0x838d0b=Math[_0x7b6653(0x295)](Date[_0x7b6653(0x271)]()/(-0x2690+-0xd*-0x109+0x1*0x1d03)),_0x173760=_0x4cd287[_0x7b6653(0x2f5)][_0x7b6653(0x2f2)+_0x7b6653(0x2fb)];if(_0x173760&&_0x173760[_0x7b6653(0x30e)]){const _0x1ecd91=_0x173760['key']||{},_0x2772c4=String(_0x1ecd91[_0x7b6653(0x266)]||'')[_0x7b6653(0x312)+'e']();if(_0x2772c4===_0x7b6653(0x1fd)+_0x7b6653(0x31f)){const _0x4f4dd0=String(_0x1ecd91['id']||'');if(!_0x4f4dd0)return;const _0x2cc7ec=await fetchItemById(_0x4f4dd0);if(!_0x2cc7ec){warn('['+name+(_0x7b6653(0x2f9)+_0x7b6653(0x28d)+'s\x20')+_0x4f4dd0+(_0x7b6653(0x310)+_0x7b6653(0x298)+'ound'));return;}if(Number(_0x2cc7ec[_0x7b6653(0x258)]||0x1b81+0x1376+-0x2ef7)<=_0x838d0b){await deleteItemById(_0x4f4dd0),info('['+name+(_0x7b6653(0x2da)+_0x7b6653(0x256)+_0x7b6653(0x26a))+_0x4f4dd0+('\x20removed\x20('+_0x7b6653(0x338)));return;}const _0x11fe74=await sendRecoveredToBot(_0x2cc7ec);_0x11fe74?(info('['+name+(_0x7b6653(0x267)+_0x7b6653(0x307)+_0x7b6653(0x2e9))+_0x4f4dd0+'\x20->\x20sent'),await deleteItemById(_0x4f4dd0),info('['+name+(']\x20removed\x20'+_0x7b6653(0x256)+_0x7b6653(0x26a))+_0x4f4dd0+(_0x7b6653(0x305)+_0x7b6653(0x2a6)+'send'))):warn('['+name+(']\x20failed\x20t'+_0x7b6653(0x2c5)+_0x7b6653(0x207)+'tus\x20')+_0x4f4dd0);return;}}if((_0x4cd287[_0x7b6653(0x261)+_0x7b6653(0x24b)]||_0x4cd287['message']?.[_0x7b6653(0x261)+'bType'])&&Array[_0x7b6653(0x2a4)](_0x4cd287[_0x7b6653(0x2f5)]?.[_0x7b6653(0x261)+_0x7b6653(0x22d)+'s'])){const _0x5c3213=_0x4cd287[_0x7b6653(0x2f5)][_0x7b6653(0x261)+_0x7b6653(0x22d)+'s'];if(_0x5c3213['length']>-0xe9*0x1+0x1be*-0xc+-0x31e*-0x7&&String(_0x5c3213[-0x1*0x2353+0xb*-0x23+0x24d4])[_0x7b6653(0x312)+'e']()[_0x7b6653(0x25b)](_0x7b6653(0x27c))){for(let _0x53ec5e=-0x761*-0x3+-0x16*-0x1c+-0x188a;_0x53ec5e<_0x5c3213[_0x7b6653(0x23d)];_0x53ec5e++){const _0xfd0890=String(_0x5c3213[_0x53ec5e]||'');if(!_0xfd0890)continue;const _0x1f1a2c=await fetchItemById(_0xfd0890);if(!_0x1f1a2c){warn('['+name+(_0x7b6653(0x20f)+_0x7b6653(0x333)+_0x7b6653(0x272))+_0xfd0890+('\x20but\x20no\x20sa'+_0x7b6653(0x298)+_0x7b6653(0x2c8)));continue;}if(Number(_0x1f1a2c[_0x7b6653(0x258)]||0x1c23+0x3*0xdb+-0x1eb4)<=_0x838d0b){await deleteItemById(_0xfd0890),info('['+name+(_0x7b6653(0x2da)+_0x7b6653(0x256)+'us\x20')+_0xfd0890+(_0x7b6653(0x247)+_0x7b6653(0x338)));continue;}if(!_0x1f1a2c[_0x7b6653(0x1fb)]||!_0x2cca2b[_0x7b6653(0x27e)](_0x1f1a2c['file_path'])){warn('['+name+(_0x7b6653(0x273)+_0x7b6653(0x2a7))+_0xfd0890+':\x20'+_0x1f1a2c[_0x7b6653(0x1fb)]);continue;}const _0xa8016c=await sendRecoveredToBot(_0x1f1a2c);_0xa8016c?(info('['+name+(']\x20recovere'+_0x7b6653(0x307)+_0x7b6653(0x2e9))+_0xfd0890+_0x7b6653(0x232)),await deleteItemById(_0xfd0890),info('['+name+(']\x20removed\x20'+_0x7b6653(0x256)+'us\x20')+_0xfd0890+('\x20after\x20suc'+_0x7b6653(0x2a6)+'send'))):warn('['+name+(_0x7b6653(0x22c)+_0x7b6653(0x2c5)+'overed\x20sta'+_0x7b6653(0x2d6))+_0xfd0890);}return;}}const _0x1350d1=_0x4cd287[_0x7b6653(0x2f5)]?.[_0x7b6653(0x2d7)+_0x7b6653(0x204)]?.['contextInf'+'o']?.[_0x7b6653(0x315)+_0x7b6653(0x30c)];if(_0x1350d1&&_0x1350d1['protocolMe'+'ssage']&&_0x1350d1[_0x7b6653(0x2f2)+_0x7b6653(0x2fb)]['key']){const _0x22fbe9=_0x1350d1[_0x7b6653(0x2f2)+_0x7b6653(0x2fb)][_0x7b6653(0x30e)];if(String(_0x22fbe9[_0x7b6653(0x266)]||'')[_0x7b6653(0x312)+'e']()===_0x7b6653(0x1fd)+_0x7b6653(0x31f)){const _0x306edb=String(_0x22fbe9['id']||'');if(!_0x306edb)return;const _0x25cd73=await fetchItemById(_0x306edb);if(!_0x25cd73)return;if(Number(_0x25cd73['expires_at']||-0x2*0x4a9+-0x230f*0x1+0x2c61)<=_0x838d0b){await deleteItemById(_0x306edb),info('['+name+(_0x7b6653(0x2da)+_0x7b6653(0x256)+_0x7b6653(0x26a))+_0x306edb+(_0x7b6653(0x247)+'no\x20resend)'));return;}if(!_0x25cd73[_0x7b6653(0x1fb)]||!_0x2cca2b['existsSync'](_0x25cd73['file_path'])){warn('['+name+(_0x7b6653(0x2ae)+_0x7b6653(0x278)+'r\x20')+_0x306edb+('\x20but\x20file\x20'+'missing\x20at'+'\x20')+_0x25cd73[_0x7b6653(0x1fb)]);return;}const _0x1802cc=await sendRecoveredToBot(_0x25cd73);_0x1802cc?(info('['+name+(_0x7b6653(0x267)+_0x7b6653(0x307)+_0x7b6653(0x2e9))+_0x306edb+_0x7b6653(0x232)),await deleteItemById(_0x306edb),info('['+name+(_0x7b6653(0x287)+_0x7b6653(0x256)+'us\x20')+_0x306edb+(_0x7b6653(0x305)+'cessful\x20re'+_0x7b6653(0x314)))):warn('['+name+(_0x7b6653(0x22c)+'o\x20send\x20rec'+_0x7b6653(0x207)+_0x7b6653(0x2d6))+_0x306edb);return;}}}catch(_0x3c830f){warn('['+name+(']\x20handlePo'+_0x7b6653(0x23b)+_0x7b6653(0x33a)+':\x20')+(_0x3c830f?.[_0x7b6653(0x2f5)]||_0x3c830f));}}async function rawMessagesUpsertHandler({messages:_0x1d69ef}){const _0x52596f=_0x322c70;if(!Array['isArray'](_0x1d69ef))return;if(!await isEnabled())return;for(const _0x2d9610 of _0x1d69ef){try{if(!_0x2d9610||!_0x2d9610[_0x52596f(0x30e)])continue;if(isOurSentId(_0x2d9610['key']?.['id']))continue;if(_0x2d9610[_0x52596f(0x30e)][_0x52596f(0x2b3)])continue;const _0x2fe156=String(_0x2d9610[_0x52596f(0x30e)]['remoteJid']||'')[_0x52596f(0x312)+'e']();if(_0x2fe156===_0x52596f(0x1fd)+'adcast'){await handleStatusUpload(_0x2d9610)[_0x52596f(0x31c)](_0x354e83=>warn('['+name+(_0x52596f(0x2b4)+'ttempt\x20fai'+_0x52596f(0x215))+(_0x354e83?.[_0x52596f(0x2f5)]||_0x354e83))),await handlePossibleDeletion(_0x2d9610)[_0x52596f(0x31c)](_0x1c1b58=>warn('['+name+(_0x52596f(0x2f9)+_0x52596f(0x1f3)+_0x52596f(0x291))+(_0x1c1b58?.['message']||_0x1c1b58)));continue;}await handlePossibleDeletion(_0x2d9610)[_0x52596f(0x31c)](_0xca0d67=>warn('['+name+(_0x52596f(0x2f9)+_0x52596f(0x1f3)+_0x52596f(0x291))+(_0xca0d67?.[_0x52596f(0x2f5)]||_0xca0d67)));}catch(_0x1ee46f){warn('['+name+(']\x20raw\x20per-'+_0x52596f(0x1fc)+_0x52596f(0x260))+(_0x1ee46f?.[_0x52596f(0x2f5)]||_0x1ee46f));}}}function getMessageTextFromCtx(_0x840580){const _0xf4058e=_0x322c70;if(!_0x840580||!_0x840580[_0xf4058e(0x2f5)])return'';const _0x554b42=_0x840580[_0xf4058e(0x2f5)];if(_0x554b42['conversati'+'on'])return _0x554b42[_0xf4058e(0x2b1)+'on'];if(_0x554b42[_0xf4058e(0x2d7)+_0xf4058e(0x204)]?.[_0xf4058e(0x339)])return _0x554b42[_0xf4058e(0x2d7)+_0xf4058e(0x204)]['text'];if(_0x554b42['imageMessa'+'ge']?.[_0xf4058e(0x31d)])return _0x554b42[_0xf4058e(0x2f1)+'ge'][_0xf4058e(0x31d)];if(_0x554b42[_0xf4058e(0x2fe)+'ge']?.['caption'])return _0x554b42[_0xf4058e(0x2fe)+'ge'][_0xf4058e(0x31d)];return'';}export async function onMessage(_0xd669d5,_0x3549a8){const _0x5e30b2=_0x322c70;try{if(!_0xd669d5||!_0xd669d5['key']||!_0xd669d5[_0x5e30b2(0x2f5)])return;const _0x97b3be=_0xd669d5[_0x5e30b2(0x30e)]['remoteJid'];if(typeof _0x97b3be==='string'&&_0x97b3be[_0x5e30b2(0x280)](_0x5e30b2(0x277)))return;if(!_0xd669d5[_0x5e30b2(0x30e)][_0x5e30b2(0x2b3)])return;if(_0xd669d5[_0x5e30b2(0x30e)]['id']&&isOurSentId(_0xd669d5[_0x5e30b2(0x30e)]['id']))return;const _0xe24d27=typeof _0xd669d5['text']===_0x5e30b2(0x293)&&_0xd669d5[_0x5e30b2(0x339)][_0x5e30b2(0x21f)]()['length']?_0xd669d5[_0x5e30b2(0x339)]['trim']():'',_0x43a747=(getMessageTextFromCtx(_0xd669d5)||'')['toString']()[_0x5e30b2(0x21f)](),_0x310194=(_0xe24d27||_0x43a747||'')[_0x5e30b2(0x340)](/\r?\n/)[-0x1297+-0x55d+0x17f4][_0x5e30b2(0x21f)]();if(!_0x310194)return;const _0x5c896d=/^antidelete\s+status(?:\s+(on|off|show))?$/i[_0x5e30b2(0x306)](_0x310194);if(!_0x5c896d)return;const _0x323687=(_0x5c896d[0x4*0x551+-0x2b7+-0x128c]||_0x5e30b2(0x2ce))['toLowerCas'+'e'](),_0x3277fb=getBotJid();if(!_0x3277fb){warn('['+name+(_0x5e30b2(0x2fa)+_0x5e30b2(0x26e)+_0x5e30b2(0x23f)+',\x20cannot\x20r'+_0x5e30b2(0x284)));return;}if(_0x323687===_0x5e30b2(0x2ce)){const _0x500ca0=await isEnabled(),_0x4a4868=_0x5e30b2(0x233)+_0x5e30b2(0x321)+'\x20'+(_0x500ca0?'ON':'OFF')+(_0x5e30b2(0x1fe)+_0x5e30b2(0x347))+DATA_DIR,_0x105e44=await(botRef?.['sock']?.[_0x5e30b2(0x316)+'e']?botRef[_0x5e30b2(0x200)][_0x5e30b2(0x316)+'e'](_0x3277fb,{'text':_0x4a4868}):botRef[_0x5e30b2(0x316)+'e'](_0x3277fb,{'text':_0x4a4868}));trackSent(_0x105e44);return;}if(_0x323687==='on'||_0x323687===_0x5e30b2(0x2c1)){const _0xc68702=_0x323687==='on'?'1':'0',_0x5e4e55=await setPref(_0x5e30b2(0x2d9),_0xc68702),_0x160115=_0x5e4e55?_0x5e30b2(0x233)+_0x5e30b2(0x2cb)+_0x5e30b2(0x332)+_0x323687[_0x5e30b2(0x239)+'e']():_0x5e30b2(0x2bd)+'o\x20set\x20anti'+_0x5e30b2(0x345)+_0x5e30b2(0x32e),_0x44cc32=await(botRef?.[_0x5e30b2(0x200)]?.[_0x5e30b2(0x316)+'e']?botRef[_0x5e30b2(0x200)][_0x5e30b2(0x316)+'e'](_0x3277fb,{'text':_0x160115}):botRef[_0x5e30b2(0x316)+'e'](_0x3277fb,{'text':_0x160115}));trackSent(_0x44cc32);return;}}catch(_0xac90ec){warn('['+name+(_0x5e30b2(0x2fa)+_0x5e30b2(0x2a0))+(_0xac90ec?.[_0x5e30b2(0x2f5)]||_0xac90ec));}}export async function initialize(_0x4d9c5c){const _0x1867bb=_0x322c70;if(!_0x4d9c5c)throw new Error(_0x1867bb(0x1f8)+'overy.init'+_0x1867bb(0x328)+_0x1867bb(0x283)+_0x1867bb(0x2ba));botRef=_0x4d9c5c,ensureDataDir(),await ensureTables();try{botRef['on'](_0x1867bb(0x252)+_0x1867bb(0x205),rawMessagesUpsertHandler);}catch(_0x4672cb){error('['+name+(']\x20Failed\x20t'+_0x1867bb(0x20a)+_0x1867bb(0x252)+'psert\x27\x20lis'+_0x1867bb(0x29e))+(_0x4672cb?.[_0x1867bb(0x2f5)]||_0x4672cb));}cleanupInterval=setInterval(()=>sweepExpired()[_0x1867bb(0x31c)](()=>{}),DEFAULTS[_0x1867bb(0x299)+_0x1867bb(0x219)]);try{await sweepExpired();}catch(_0x5edd01){}info('['+name+(']\x20initiali'+_0x1867bb(0x325)+'DIR=')+DATA_DIR+(_0x1867bb(0x2a9)+'S=')+DEFAULTS['CLEANUP_IN'+_0x1867bb(0x219)]+_0x1867bb(0x29a)+DEFAULTS[_0x1867bb(0x230)+'DS']);}export async function cleanup(){const _0x50dc51=_0x322c70;try{botRef&&typeof botRef[_0x50dc51(0x211)+_0x50dc51(0x34b)]===_0x50dc51(0x290)&&botRef[_0x50dc51(0x211)+_0x50dc51(0x34b)](_0x50dc51(0x252)+_0x50dc51(0x205),rawMessagesUpsertHandler);}catch(_0x515b57){warn('['+name+(_0x50dc51(0x2ca)+'removeList'+_0x50dc51(0x26b)+':\x20')+(_0x515b57?.['message']||_0x515b57));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x4b4330){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds[_0x50dc51(0x303)]===_0x50dc51(0x290))respondedMsgIds[_0x50dc51(0x303)]();_baileysHelpers=null,info('['+name+(_0x50dc51(0x285)+'up'));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};