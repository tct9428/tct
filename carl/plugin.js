const _0x5b0b3d=_0x2903;(function(_0x48d6ce,_0x5591d8){const _0x5a8945=_0x2903,_0x2a0410=_0x48d6ce();while(!![]){try{const _0x3dd2f0=-parseInt(_0x5a8945(0xff))/(0x245f*0x1+-0x332*-0x2+0x1561*-0x2)+parseInt(_0x5a8945(0xda))/(-0x56c*0x4+0xaa5+0xb0d)+-parseInt(_0x5a8945(0x108))/(0x1ab1+-0x10c7*-0x2+-0x3c3c)+parseInt(_0x5a8945(0xe7))/(-0x2*0x9a4+-0x231f+-0x1*-0x366b)*(parseInt(_0x5a8945(0x127))/(-0xb03*0x1+-0x13*-0x9e+-0xb2*0x1))+-parseInt(_0x5a8945(0xb7))/(0x205e+-0x168+-0x1ef0)+parseInt(_0x5a8945(0xbc))/(0x819+-0xd*-0x2d5+-0x2ce3)*(parseInt(_0x5a8945(0xf7))/(-0x2*-0x345+-0xa61+-0x1*-0x3df))+parseInt(_0x5a8945(0x128))/(0x205c+0x22da*-0x1+0x287)*(-parseInt(_0x5a8945(0x114))/(0x25b6+0x2b+-0x25d7));if(_0x3dd2f0===_0x5591d8)break;else _0x2a0410['push'](_0x2a0410['shift']());}catch(_0x5d4a88){_0x2a0410['push'](_0x2a0410['shift']());}}}(_0x12a6,-0x17fd8f*0x1+0xee05d+0x16b490));function _0x2903(_0x4c669a,_0x31c993){const _0x189db6=_0x12a6();return _0x2903=function(_0x6e4971,_0x47169a){_0x6e4971=_0x6e4971-(0x15a5+-0x1f52+0xa4a);let _0x34116a=_0x189db6[_0x6e4971];return _0x34116a;},_0x2903(_0x4c669a,_0x31c993);}import{promises as _0x249a96}from'fs';import _0x2e6018 from'path';import{fileURLToPath}from'url';import{info,warn,error}from'../utils/logger.js';import{isSudo,listSudo,normalizeToJid,userJidFromCtx}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x5b0b3d(0xcc);export const version=_0x5b0b3d(0xc2);export const priority=0x397+-0x1291*0x1+0xf54;export const commands=[_0x5b0b3d(0xcc)];let botRef=null;const __filename=fileURLToPath(import.meta[_0x5b0b3d(0xd7)]),__dirname=_0x2e6018[_0x5b0b3d(0xde)](__filename),projectRoot=_0x2e6018[_0x5b0b3d(0x121)](__dirname,'..'),modulesDir=_0x2e6018[_0x5b0b3d(0x13f)](projectRoot,_0x5b0b3d(0x12a)),carlDir=_0x2e6018['join'](projectRoot,'carl'),snapshotPath=_0x2e6018['join'](projectRoot,'data','tmp',_0x5b0b3d(0xe8)+'on'),removedPluginsPath=_0x2e6018[_0x5b0b3d(0x13f)](projectRoot,_0x5b0b3d(0xf1),_0x5b0b3d(0xf4),_0x5b0b3d(0x111)+_0x5b0b3d(0x11f)),PROTECTED_PLUGINS=['update.js',_0x5b0b3d(0x11e),_0x5b0b3d(0x13a)+_0x5b0b3d(0x10f)],recentMessageIds=new Set();function isDuplicateMessage(_0x2e2faa){const _0x339cdd=_0x5b0b3d;if(!_0x2e2faa)return![];if(recentMessageIds[_0x339cdd(0x123)](_0x2e2faa))return!![];return recentMessageIds[_0x339cdd(0xa4)](_0x2e2faa),setTimeout(()=>recentMessageIds['delete'](_0x2e2faa),0x22ae+-0x4*-0x1eb+0xb69*-0x2),![];}async function safeSend(_0x4fc993,_0x5e04e1){const _0xe9b0ba=_0x5b0b3d;if(!_0x4fc993)return;try{const _0x40606f=botRef[_0xe9b0ba(0xb2)+'e']||botRef[_0xe9b0ba(0xcb)]?.['sendMessag'+'e'];if(_0x40606f)await _0x40606f(_0x4fc993,{'text':_0x5e04e1});}catch(_0x222914){error(_0x222914,'['+name+(_0xe9b0ba(0x13e)+_0xe9b0ba(0x12e)+_0xe9b0ba(0x120)));}}async function readJsonFile(_0x260325){const _0x32b783=_0x5b0b3d;try{const _0x210a22=await _0x249a96[_0x32b783(0x139)](_0x260325,'utf-8');return JSON[_0x32b783(0xf9)](_0x210a22);}catch(_0x1b4026){if(_0x1b4026&&_0x1b4026['code']===_0x32b783(0x132))return null;return error(_0x1b4026,'['+name+(_0x32b783(0x13e)+_0x32b783(0xd0)+_0x32b783(0x103))+_0x260325),null;}}async function writeJsonFile(_0x4c4f2c,_0x349c5d){const _0x2f6d02=_0x5b0b3d;try{return await _0x249a96[_0x2f6d02(0xed)](_0x2e6018[_0x2f6d02(0xde)](_0x4c4f2c),{'recursive':!![]}),await _0x249a96[_0x2f6d02(0x106)](_0x4c4f2c,JSON['stringify'](_0x349c5d,null,0x16f*-0xe+-0x1e76+0x328a)),!![];}catch(_0x8aa841){return error(_0x8aa841,'['+name+(_0x2f6d02(0x13e)+'o\x20write\x20JS'+_0x2f6d02(0xe6)+'\x20')+_0x4c4f2c),![];}}async function getRemovedPlugins(){const _0x425d63=_0x5b0b3d,_0xfb9fc6=await readJsonFile(removedPluginsPath);return Array[_0x425d63(0xe5)](_0xfb9fc6)?_0xfb9fc6:[];}async function updateRemovedPlugins(_0x52db6e,_0x329dac='add'){const _0x474d3c=_0x5b0b3d;let _0x5e0d50=await getRemovedPlugins();const _0x52f7e7=_0x5e0d50[_0x474d3c(0xd2)](_0x12480a=>_0x12480a[_0x474d3c(0xd9)]===_0x52db6e[_0x474d3c(0xd9)]);if(_0x329dac==='add'&&_0x52f7e7===-(0x9*0x445+-0xe59+-0x1813))_0x5e0d50['push'](_0x52db6e);else _0x329dac==='remove'&&_0x52f7e7!==-(0x2b*0x74+0x384+-0x16ff)&&_0x5e0d50[_0x474d3c(0xb1)](_0x52f7e7,0x4a7*-0x7+-0x26b2+0x4744);await writeJsonFile(removedPluginsPath,_0x5e0d50);}async function getAvailablePlugins(){const _0x155af1=_0x5b0b3d,_0x14fb07=await readJsonFile(snapshotPath);if(!_0x14fb07||!_0x14fb07[_0x155af1(0xd3)])return[];return _0x14fb07[_0x155af1(0xd3)][_0x155af1(0xc7)](_0x2a694d=>[_0x155af1(0x112),_0x155af1(0x12a)][_0x155af1(0x138)](_0x2a694d[_0x155af1(0xfc)]))[_0x155af1(0xee)](_0x519197=>({'name':String(_0x519197['name'])[_0x155af1(0x13d)](/\.js$/,''),'origin':_0x519197[_0x155af1(0xfc)],'download':_0x519197[_0x155af1(0xf3)]||null}));}async function getInstalledPlugins(){const _0x29aa75=_0x5b0b3d,_0x28df8f=new Set();try{const _0x340504=await _0x249a96[_0x29aa75(0x124)](carlDir)[_0x29aa75(0xca)](()=>[]);_0x340504[_0x29aa75(0xba)](_0x4c4230=>_0x28df8f[_0x29aa75(0xa4)](String(_0x4c4230)['replace'](_0x29aa75(0x10f),'')));const _0x150f7d=await _0x249a96[_0x29aa75(0x124)](modulesDir)[_0x29aa75(0xca)](()=>[]);_0x150f7d['forEach'](_0x494231=>_0x28df8f[_0x29aa75(0xa4)](String(_0x494231)['replace'](_0x29aa75(0x10f),'')));}catch(_0x1d9ddf){}return Array[_0x29aa75(0x137)](_0x28df8f);}async function downloadFile(_0x3bf2e0,_0x25eb72){const _0x44d9fc=_0x5b0b3d;if(!_0x3bf2e0)return error(new Error(_0x44d9fc(0x11b)+_0x44d9fc(0xb4)),'['+name+(_0x44d9fc(0x119)+_0x44d9fc(0x10c)+_0x44d9fc(0x134)+'\x20')+_0x2e6018[_0x44d9fc(0x110)](_0x25eb72)),![];try{const _0x2f1ab9=await fetch(_0x3bf2e0);if(!_0x2f1ab9['ok'])throw new Error(_0x44d9fc(0x9e)+_0x44d9fc(0xe1)+_0x2f1ab9[_0x44d9fc(0xac)]);const _0x235389=await _0x2f1ab9[_0x44d9fc(0x9d)]();return await _0x249a96['mkdir'](_0x2e6018[_0x44d9fc(0xde)](_0x25eb72),{'recursive':!![]}),await _0x249a96[_0x44d9fc(0x106)](_0x25eb72,_0x235389,'utf-8'),!![];}catch(_0x104c2d){return error(_0x104c2d,'['+name+(_0x44d9fc(0x105)+_0x44d9fc(0xb3)+'r\x20')+_0x2e6018[_0x44d9fc(0x110)](_0x25eb72)+':\x20'+_0x104c2d[_0x44d9fc(0x126)]),![];}}async function resolvePluginOrigin(_0x38f9c6,_0x3087a0=[]){const _0x17802b=_0x5b0b3d,_0x46cd06=String(_0x38f9c6||'')[_0x17802b(0xf5)+'e'](),_0x197b83=(_0x3087a0||[])['find'](_0x2e761e=>String(_0x2e761e[_0x17802b(0xd9)])[_0x17802b(0xf5)+'e']()===_0x46cd06);if(_0x197b83)return _0x197b83;const _0xbfa828=_0x2e6018[_0x17802b(0x13f)](carlDir,_0x38f9c6+_0x17802b(0x10f)),_0x4901b3=_0x2e6018['join'](modulesDir,_0x38f9c6+_0x17802b(0x10f));try{if(await _0x249a96[_0x17802b(0xaa)](_0xbfa828)[_0x17802b(0xb9)](()=>!![])[_0x17802b(0xca)](()=>![]))return{'name':_0x38f9c6,'origin':_0x17802b(0x112),'download':null};if(await _0x249a96[_0x17802b(0xaa)](_0x4901b3)['then'](()=>!![])['catch'](()=>![]))return{'name':_0x38f9c6,'origin':'modules','download':null};}catch(_0x4fecb6){}return null;}async function addPlugin(_0x4b33d9,_0x2e0cb6){const _0x408a0c=_0x5b0b3d,_0x256301=_0x2e0cb6[_0x408a0c(0x11d)](_0x41ca33=>String(_0x41ca33['name'])['toLowerCas'+'e']()===String(_0x4b33d9)[_0x408a0c(0xf5)+'e']());if(!_0x256301)return{'name':_0x4b33d9,'success':![],'error':'Not\x20in\x20ava'+_0x408a0c(0x118)+'t'};const _0x4509d0=_0x256301[_0x408a0c(0xfc)]===_0x408a0c(0x112)?carlDir:modulesDir,_0x34d2b2=_0x2e6018['join'](_0x4509d0,_0x256301['name']+_0x408a0c(0x10f)),_0x11105d=await downloadFile(_0x256301[_0x408a0c(0xf3)],_0x34d2b2);if(_0x11105d)return await updateRemovedPlugins({'name':_0x256301[_0x408a0c(0xd9)],'origin':_0x256301[_0x408a0c(0xfc)]},_0x408a0c(0x9f)),info('['+name+(_0x408a0c(0xb6)+_0x408a0c(0xf0))+_0x256301[_0x408a0c(0xd9)]+_0x408a0c(0xe2)+_0x34d2b2),{'name':_0x256301[_0x408a0c(0xd9)],'success':!![]};return{'name':_0x256301['name'],'success':![],'error':_0x408a0c(0x9e)+_0x408a0c(0xc0)};}async function removePlugin(_0x4fd3b3,_0x38b5fa){const _0x432000=_0x5b0b3d;_0x4fd3b3=String(_0x4fd3b3||'')['trim']();if(!_0x4fd3b3)return{'name':_0x4fd3b3,'success':![],'error':'Invalid\x20na'+'me'};if(PROTECTED_PLUGINS[_0x432000(0x138)](_0x4fd3b3+_0x432000(0x10f)))return{'name':_0x4fd3b3,'success':![],'error':'Protected\x20'+_0x432000(0xcc)};const _0x1bcb38=await resolvePluginOrigin(_0x4fd3b3,_0x38b5fa);if(!_0x1bcb38)return{'name':_0x4fd3b3,'success':![],'error':'Not\x20instal'+_0x432000(0xdf)};const _0x47e969=_0x1bcb38[_0x432000(0xfc)]==='carl'?carlDir:modulesDir,_0xd21e5a=_0x2e6018[_0x432000(0x13f)](_0x47e969,(_0x1bcb38['name']||_0x4fd3b3)+_0x432000(0x10f));try{return await _0x249a96[_0x432000(0xc4)](_0xd21e5a),await _0x249a96[_0x432000(0xcd)](_0xd21e5a),await updateRemovedPlugins({'name':_0x1bcb38['name']||_0x4fd3b3,'origin':_0x1bcb38['origin']},_0x432000(0xa4)),info('['+name+(_0x432000(0x115)+'plugin\x20fil'+_0x432000(0xc8))+_0xd21e5a),{'name':_0x1bcb38[_0x432000(0xd9)]||_0x4fd3b3,'success':!![]};}catch(_0x5982b5){if(_0x5982b5&&_0x5982b5[_0x432000(0xab)]===_0x432000(0x132))return{'name':_0x1bcb38[_0x432000(0xd9)]||_0x4fd3b3,'success':![],'error':_0x432000(0xeb)+'led'};return error(_0x5982b5,'['+name+(_0x432000(0xa2)+_0x432000(0xa3)+_0x432000(0xea))+_0x4fd3b3),{'name':_0x1bcb38[_0x432000(0xd9)]||_0x4fd3b3,'success':![],'error':_0x5982b5['message']||_0x432000(0xe0)+_0x432000(0xb5)};}}async function handleList(_0x5b1f80){const _0x55a10e=_0x5b0b3d,_0x5b66b0=await getAvailablePlugins();if(_0x5b66b0[_0x55a10e(0xa6)]===0x35*0x21+-0x229d+0x1bc8){await safeSend(_0x5b1f80,'⚠️\x20Could\x20no'+_0x55a10e(0x117)+_0x55a10e(0x10d)+_0x55a10e(0x102)+_0x55a10e(0xc3)+_0x55a10e(0x122)+'update`\x20fi'+_0x55a10e(0xf8));return;}const _0x59d3a3=await getRemovedPlugins(),_0x83ce99=new Set((_0x59d3a3||[])[_0x55a10e(0xee)](_0x527cb8=>String(_0x527cb8[_0x55a10e(0xd9)]))),_0x4d259f=_0x5b66b0['filter'](_0x535374=>!_0x83ce99[_0x55a10e(0x123)](_0x535374[_0x55a10e(0xd9)]))[_0x55a10e(0xee)](_0x331976=>_0x331976[_0x55a10e(0xd9)]),_0xbbec23=(_0x59d3a3||[])[_0x55a10e(0xee)](_0x23291c=>_0x23291c[_0x55a10e(0xd9)]);let _0xb146ce='📜\x20*Availab'+'le\x20Plugins'+_0x55a10e(0x107)+_0x4d259f[_0x55a10e(0xa6)]+')\x0a\x0a';_0xb146ce+=_0x4d259f[_0x55a10e(0xa6)]>0x10bb*0x1+-0x1*0x1de4+0xd29?_0x4d259f[_0x55a10e(0xee)](_0x399042=>'-\x20'+_0x399042)[_0x55a10e(0x13f)]('\x0a'):_0x55a10e(0xa8)+_0x55a10e(0xbe)+'.',_0xb146ce+='\x0a\x0a➕\x20*Avail'+_0x55a10e(0x10b)+'d*\x20('+_0xbbec23[_0x55a10e(0xa6)]+')\x0a\x0a',_0xb146ce+=_0xbbec23[_0x55a10e(0xa6)]>0x1581+0x6d3*-0x1+0x1*-0xeae?_0xbbec23[_0x55a10e(0xee)](_0x2387a5=>'-\x20'+_0x2387a5)[_0x55a10e(0x13f)]('\x0a'):_0x55a10e(0x109),await safeSend(_0x5b1f80,_0xb146ce);}function formatResults(_0x47567e,_0x9bad20){const _0x9d17f4=_0x5b0b3d,_0x4d9a12=_0x9bad20[_0x9d17f4(0xc7)](_0x551cba=>_0x551cba['success'])['map'](_0x236caa=>'✅\x20'+_0x236caa[_0x9d17f4(0xd9)]),_0x306569=_0x9bad20[_0x9d17f4(0xc7)](_0x25bdd7=>!_0x25bdd7[_0x9d17f4(0xb0)])[_0x9d17f4(0xee)](_0x463fdf=>'❌\x20'+_0x463fdf[_0x9d17f4(0xd9)]+'\x20('+_0x463fdf[_0x9d17f4(0x135)]+')');let _0x57c0f2='*'+_0x47567e+'*\x0a\x0a';if(_0x4d9a12[_0x9d17f4(0xa6)]>-0xb47+-0x3e6+0xf2d)_0x57c0f2+=_0x4d9a12[_0x9d17f4(0x13f)]('\x0a')+'\x0a\x0a';if(_0x306569[_0x9d17f4(0xa6)]>-0x2e3*0x1+0x1479+0x1*-0x1196)_0x57c0f2+=_0x306569[_0x9d17f4(0x13f)]('\x0a')+'\x0a';if(_0x4d9a12[_0x9d17f4(0xa6)]===-0x610+-0x8b*-0x1b+0x47*-0x1f&&_0x306569[_0x9d17f4(0xa6)]===-0x700+-0x22bf+0x29bf)_0x57c0f2+='No\x20matchin'+'g\x20plugins\x20'+_0x9d17f4(0xbd)+_0x9d17f4(0x130)+_0x9d17f4(0xdb);return _0x57c0f2[_0x9d17f4(0xcf)]();}async function findStoredMatchFromFindings(_0x311e49=[]){const _0x4e2f87=_0x5b0b3d;try{const _0x45b06f=await listSudo();if(!Array[_0x4e2f87(0xe5)](_0x45b06f)||_0x45b06f[_0x4e2f87(0xa6)]===0x7ae*0x5+-0x1d65+-0x1cd*0x5)return null;const _0x185247=new Set(_0x45b06f[_0x4e2f87(0xee)](String));for(const _0x12011d of _0x311e49||[]){if(!_0x12011d||typeof _0x12011d['jid']!=='string')continue;const _0x6f562=normalizeToJid(_0x12011d['jid']);if(_0x6f562&&_0x185247['has'](_0x6f562))return _0x6f562;if(_0x185247[_0x4e2f87(0x123)](_0x12011d['jid']))return _0x12011d[_0x4e2f87(0xd8)];}return null;}catch(_0xa830fa){return null;}}function _0x12a6(){const _0x1aa527=['o\x20read\x20JSO','All\x20Plugin','findIndex','files','Specify\x20pl','emove,\x20or\x20','ugins\x20to\x20r','url','jid','name','3086138lVMxXt','tion.','delete','push','dirname','led','Unknown\x20er','ailed:\x20','\x20->\x20','ge:\x20plugin','list','isArray','ON\x20file\x20to','8yQXLes','.update.js','key','\x20for\x20','Not\x20instal','@g.us','mkdir','map','endsWith','ugin\x20','data','stanzaId','download','tmp','toLowerCas',']\x20duplicat','1367928wbickC','rst.','parse','Plugin\x20Rem','tallation','origin',']\x20initiali','add|remove','432449XPYZal','\x20plugin(s)','\x20to\x20add.\x0aE','vailable\x20p','N\x20file\x20at\x20','lugin\x20add\x20',']\x20Download','writeFile','*\x20(','417366lLZGZA','None','No\x20valid\x20p','able\x20to\x20Ad','File\x20missi','\x20list\x20of\x20a','..]','.js','basename','.removed.j','carl','install','150PKzJUX',']\x20removed\x20','split','t\x20load\x20the','ilable\x20lis',']\x20download','up.','No\x20URL\x20pro','mple:\x20`plu','find','plugin.js','son','sage','resolve','ease\x20run\x20`','has','readdir','⚠️\x20Could\x20no','message','3074585ePjhcT','1137573ffMuCR','create\x20a\x20s','modules','cc,time`','\x20cc,time`','Usage:\x20plu','o\x20send\x20mes','fromMe','this\x20opera','findings','ENOENT','oval','ng\x20url\x20for','error','gin\x20remove','from','includes','readFile','sudonumber','xample:\x20`p','Run\x20`updat','replace',']\x20Failed\x20t','join','text','Download\x20f','remove','e\x20message\x20','s\x20Installa',']\x20removePl','ugin\x20error','add','\x20remove.','length','\x20<list|add','No\x20availab','Plugin\x20Ins','stat','code','status','gin\x20list.\x20','e`\x20command','participan','success','splice','sendMessag','\x20failed\x20fo','vided','ror',']\x20added\x20pl','2643630nKBzmI','|all>\x20[plu','then','forEach','lugin\x20name','42zSBLBY','found\x20for\x20','le\x20plugins','n2...]','ailed','gin\x20<list|','1.1.1','lugins.\x20Pl','access','t\x20load\x20plu','Please\x20spe','filter','e:\x20','gin1,plugi','catch','sock','plugin','unlink','all','trim'];_0x12a6=function(){return _0x1aa527;};return _0x12a6();}export function initialize(_0xc43218){const _0x2d458b=_0x5b0b3d;botRef=_0xc43218,info('['+name+(_0x2d458b(0xfd)+'zed.'));}export async function onMessage(_0x21a892){const _0x290d3c=_0x5b0b3d;try{if(!_0x21a892||!_0x21a892[_0x290d3c(0xe9)])return;const _0x229b05=_0x21a892[_0x290d3c(0xe9)]['id']||_0x21a892['key'][_0x290d3c(0xf2)]||(_0x21a892[_0x290d3c(0xe9)][_0x290d3c(0xaf)+'t']||'')+':'+_0x21a892[_0x290d3c(0xe9)]['remoteJid']+':'+_0x21a892[_0x290d3c(0xe9)][_0x290d3c(0x12f)];if(isDuplicateMessage(_0x229b05)){info('['+name+(_0x290d3c(0xf6)+_0x290d3c(0xa0)+'ignored:\x20')+_0x229b05);return;}const _0x9af8a5=_0x21a892['key']?.['remoteJid'];if(!_0x9af8a5||_0x9af8a5[_0x290d3c(0xef)](_0x290d3c(0xec)))return;const _0x3c2c41=(_0x21a892[_0x290d3c(0x9d)]||'')['trim']()['toLowerCas'+'e'](),_0x38a521=_0x3c2c41[_0x290d3c(0x116)](/\s+/)[_0x290d3c(0xc7)](Boolean),_0xdb0f96=_0x38a521[0x1d3+-0x1058+-0x3b*-0x3f];if(_0xdb0f96!==_0x290d3c(0xcc))return;const _0x43d77d=!!_0x21a892[_0x290d3c(0xe9)][_0x290d3c(0x12f)],_0x1a9c52=await isSudo(botRef,_0x21a892);if(!_0x43d77d&&!_0x1a9c52)return;let _0x2244d9=_0x43d77d?getBotJid():await findStoredMatchFromFindings(userJidFromCtx(_0x21a892)[_0x290d3c(0x131)]);if(!_0x2244d9)return;const _0x3dfa86=_0x38a521[0xf19+0xc10+0x365*-0x8],_0x2ff146=_0x38a521['slice'](0xa6b+-0x1498+0xa2f);if(!_0x3dfa86){await safeSend(_0x2244d9,_0x290d3c(0x12d)+_0x290d3c(0xc1)+_0x290d3c(0xfe)+_0x290d3c(0xb8)+_0x290d3c(0xc9)+_0x290d3c(0xbf));return;}const _0xc6ee75=await getAvailablePlugins();if(_0xc6ee75[_0x290d3c(0xa6)]===0x1*0x6ff+0xb0a+-0x1209&&[_0x290d3c(0xa4),_0x290d3c(0xce),'list'][_0x290d3c(0x138)](_0x3dfa86)){await safeSend(_0x2244d9,_0x290d3c(0x125)+_0x290d3c(0xc5)+_0x290d3c(0xad)+_0x290d3c(0x13c)+_0x290d3c(0xae)+'\x20first\x20to\x20'+_0x290d3c(0x129)+'napshot.');return;}switch(_0x3dfa86){case _0x290d3c(0xe4):await handleList(_0x2244d9);break;case _0x290d3c(0xa4):case _0x290d3c(0x113):{const _0x537516=(_0x2ff146[_0x290d3c(0x13f)]('')||'')[_0x290d3c(0x116)](',')[_0x290d3c(0xee)](_0x50269f=>_0x50269f[_0x290d3c(0xcf)]()['toLowerCas'+'e']())[_0x290d3c(0xc7)](Boolean);if(_0x537516['length']===-0x526+-0x187f+0x1*0x1da5){await safeSend(_0x2244d9,_0x290d3c(0xc6)+'cify\x20which'+_0x290d3c(0x100)+_0x290d3c(0x101)+_0x290d3c(0x13b)+_0x290d3c(0x104)+_0x290d3c(0x12b));return;}const _0x226cd3=Array[_0x290d3c(0x137)](new Set(_0x537516)),_0x24e3b6=[];for(const _0x3989b1 of _0x226cd3){_0x24e3b6[_0x290d3c(0xdd)](await addPlugin(_0x3989b1,_0xc6ee75));}await safeSend(_0x2244d9,formatResults(_0x290d3c(0xa9)+_0x290d3c(0xfb),_0x24e3b6));break;}case _0x290d3c(0x9f):case _0x290d3c(0xdc):{const _0x41c06a=_0x2ff146[_0x290d3c(0x13f)]('');if(!_0x41c06a){await safeSend(_0x2244d9,_0x290d3c(0xd4)+_0x290d3c(0xd6)+_0x290d3c(0xd5)+'\x27all\x27.\x0aExa'+_0x290d3c(0x11c)+_0x290d3c(0x136)+_0x290d3c(0x12c));return;}const _0x5cb5da=_0x41c06a[_0x290d3c(0xf5)+'e']()==='all'?(await getInstalledPlugins())[_0x290d3c(0xc7)](_0x4580bf=>!PROTECTED_PLUGINS[_0x290d3c(0x138)](_0x4580bf+_0x290d3c(0x10f))):Array['from'](new Set(_0x41c06a['split'](',')[_0x290d3c(0xee)](_0x2d3c06=>_0x2d3c06[_0x290d3c(0xcf)]()[_0x290d3c(0xf5)+'e']())[_0x290d3c(0xc7)](Boolean)));if(_0x5cb5da[_0x290d3c(0xa6)]===-0x265c+0x3b*-0x3b+0x1*0x33f5){await safeSend(_0x2244d9,_0x290d3c(0x10a)+_0x290d3c(0xbb)+'s\x20found\x20to'+_0x290d3c(0xa5));return;}const _0xbdcd70=[];for(const _0xc66efe of _0x5cb5da){_0xbdcd70['push'](await removePlugin(_0xc66efe,_0xc6ee75));}await safeSend(_0x2244d9,formatResults(_0x290d3c(0xfa)+_0x290d3c(0x133),_0xbdcd70));break;}case _0x290d3c(0xce):{const _0x42f7ec=[];for(const _0x52aa20 of _0xc6ee75){_0x42f7ec[_0x290d3c(0xdd)](await addPlugin(_0x52aa20[_0x290d3c(0xd9)],_0xc6ee75));}await safeSend(_0x2244d9,formatResults(_0x290d3c(0xd1)+_0x290d3c(0xa1)+'tion',_0x42f7ec));break;}default:await safeSend(_0x2244d9,'Invalid\x20co'+'mmand.\x20Usa'+_0x290d3c(0xe3)+_0x290d3c(0xa7)+'|remove|al'+'l>\x20[names.'+_0x290d3c(0x10e));break;}}catch(_0x519949){error(_0x519949,'['+name+(']\x20onMessag'+'e\x20error'));}}export function cleanup(){const _0x13c881=_0x5b0b3d;botRef=null,info('['+name+(']\x20cleaned\x20'+_0x13c881(0x11a)));}