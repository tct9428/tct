const _0x2db80c=_0x28d9;(function(_0x42da80,_0xa741fe){const _0x2dcc98=_0x28d9,_0x41abf3=_0x42da80();while(!![]){try{const _0x3c749b=parseInt(_0x2dcc98(0x167))/(0x3*-0x2a1+-0x1183+0x1967)+-parseInt(_0x2dcc98(0x173))/(0x14b*0x3+0x189a*0x1+-0x25*0xc5)+parseInt(_0x2dcc98(0xd7))/(0x21c0+-0x1dde+-0x3df)+-parseInt(_0x2dcc98(0x185))/(-0x1*0xe75+0x3b9*0x1+0xac0)*(-parseInt(_0x2dcc98(0x12d))/(0xb71*-0x1+-0x700+0x1276))+parseInt(_0x2dcc98(0x170))/(-0x1*0x1732+0x99a*-0x1+0x20d2)+parseInt(_0x2dcc98(0x17c))/(0x14bc+0x10ae+-0x2563*0x1)+-parseInt(_0x2dcc98(0x172))/(-0x25*-0x35+-0x2111*0x1+0x1970);if(_0x3c749b===_0xa741fe)break;else _0x41abf3['push'](_0x41abf3['shift']());}catch(_0x59d84c){_0x41abf3['push'](_0x41abf3['shift']());}}}(_0x1797,-0xae65f+-0x4*0x50f29+0x2c5087));function _0x1797(){const _0x28b030=['get','isArray','trim','string','eply\x20to\x20ow','buttonsRes','sendMessag','only):\x0a','\x20failed:\x20','error:\x20','catch','wer','hod\x20availa','ledToDb\x20er','\x27,\x27false\x27,','efault\x20ena',':\x20sendConf','no\x20column','name','o\x20mark\x20sta','\x20(\x27enabled','fromMillis','llback\x20fai',':\x20messages','selectedRo','xcluded.up','Status\x20Vie','ENABLED',':\x20ensurePr','e)\x20VALUES\x20','delete','isValid','\x27,\x20?,\x20?)\x0a\x20','ctReply',':\x20saveEnab','psert','dated_at=e','irmation\x20f','ue\x20FROM\x20st','updated_at','set','1.0.4','R\x20DEFAULT\x20','toLocaleSt','TO\x20statusv','status-vie','autoviewst','.value,\x20up','iew_prefs\x20','ailed:\x20','value','key','false','messages.u',':\x20DB\x20init\x20','efs\x20(\x0a\x20\x20\x20\x20','\x20KEY,\x0a\x20\x20\x20\x20','abled','tatus]\x20fai','NFLICT(key','tus\x20as\x20rea','o\x20insert\x20d',':\x20refreshC','toLowerCas','includes','\x20\x20\x20\x20key\x20TE','ULL,\x0a\x20\x20\x20\x20\x20','sock','Africa/Nai',':\x20readEnab','readMessag','atusview_p','bled\x20row:\x20','conversati','\x20INTEGER\x20D','wer\x0a\x0aState','remoteJid','seMessage','imageMessa',':\x20initiali','failed:\x20','\x20\x20\x20\x20\x20ON\x20CO','wer.initia','192905rgusSa','_at\x20INTEGE',',\x20updated_',':\x20ensure\x20d','participan','ring','(key,\x20valu',':\x20inner\x20lo','read','tatus]\x20dis','(\x27enabled\x27','key,\x20value','xtMessage','E\x20statusvi','DD\x20COLUMN\x20','EFAULT\x200','tatusview_','caption',':\x20no\x20sendM','selectedBu','status@bro','le_info(\x27s','ner\x20(bot\x20J','all','run','at)\x20VALUES','exec','tatus\x20on|e','DISABLED','listRespon',':\x20viewed\x20s','atus','has','led\x20to\x20dis','off','videoMessa','CONDS','>\x20show\x20sta',':\x20failed\x20t','essage\x20met','0\x0a\x20\x20\x20\x20\x20\x20);','led\x27\x20LIMIT','E\x20SET\x20valu','ttonId','led:\x20','O\x20statusvi','tusview_pr','o\x20add\x20upda','ID\x20unavail','umn','\x20\x20\x20\x20value\x20','ror:\x20','fromMe',':\x20onMessag','dConfig\x20re','floor','true','message','925253UDbDGg','led\x20to\x20ena','nfirmation','ble\x20for\x20co',':\x20cleanup\x20','REPLACE\x20IN',':\x20cleaned\x20','INSERT\x20INT','length','9838986FTdGjp','has\x20no\x20col','36946312NfEpab','359648CYbBGY','\x20?)','onfig\x20erro','\x0aTimezone:','Usage\x20(PM\x20','\x20autoviews','disable\x20\x20-','res\x20bot\x20in','tatus\x20stat','7731822rNQfNS','>\x20enable\x0a','us\x20\x20\x20\x20\x20\x20\x20-','rror:\x20','gistration','DATETIME_M','extendedTe','ED_WITH_SE','[autoviews','68feDnXX','undefined','EXISTS\x20sta','wId','able','singleSele','r:\x20','text','isCommand','adcast','ledToDb\x20fa','AUTOVIEWST','SELECT\x20val','stance','CREATE\x20TAB','bled\x20row\x20f',',\x27false\x27)','lize\x20requi','split','XT\x20PRIMARY','function','ATUS','status','ledFromDb\x20','4008678dYhrfG','\x20key=\x27enab','now'];_0x1797=function(){return _0x28b030;};return _0x1797();}import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name=_0x2db80c(0x107)+_0x2db80c(0xe5);export const version=_0x2db80c(0x103);export const priority=0x1172+-0x10ef*-0x2+-0x334b;export const configKeys=[_0x2db80c(0xca)+'ATUS'];export const commands=[_0x2db80c(0x108)+_0x2db80c(0x14c)];let botRef=null,DEFAULT_TIMEZONE=_0x2db80c(0x11e)+'robi',CFG={'AUTOVIEWSTATUS':![]},shuttingDown=![],messageHandler=null;function refreshConfig(){const _0x138db7=_0x2db80c;try{const _0x1666a3=typeof getConfig===_0x138db7(0xd3)?getConfig()||{}:{};CFG[_0x138db7(0xca)+_0x138db7(0xd4)]=typeof _0x1666a3['AUTOVIEWST'+'ATUS']!==_0x138db7(0x186)?!!_0x1666a3[_0x138db7(0xca)+_0x138db7(0xd4)]:CFG['AUTOVIEWST'+_0x138db7(0xd4)];}catch(_0x1e46f7){warn(name+(_0x138db7(0x118)+_0x138db7(0x175)+'r:\x20')+(_0x1e46f7?.[_0x138db7(0x166)]||_0x1e46f7));}}try{hotReloadConfig&&hotReloadConfig(()=>{refreshConfig();});}catch(_0x57675f){warn(name+(':\x20hotReloa'+_0x2db80c(0x163)+_0x2db80c(0x180)+_0x2db80c(0xe2))+(_0x57675f?.[_0x2db80c(0x166)]||_0x57675f));}refreshConfig();async function ensurePrefsTable(){const _0x48e549=_0x2db80c;try{let _0x30511b=[];try{const _0xaa59bd=await db[_0x48e549(0x144)]('PRAGMA\x20tab'+_0x48e549(0x142)+_0x48e549(0x13d)+'prefs\x27)');_0x30511b=(_0xaa59bd||[])['map'](_0x448f7b=>_0x448f7b[_0x48e549(0xec)]);}catch(_0x22afc1){_0x30511b=[];}if(!_0x30511b[_0x48e549(0x16f)])await db[_0x48e549(0x147)](_0x48e549(0xcd)+'LE\x20IF\x20NOT\x20'+_0x48e549(0x187)+_0x48e549(0x15b)+_0x48e549(0x111)+_0x48e549(0x11b)+_0x48e549(0xd2)+_0x48e549(0x112)+_0x48e549(0x15f)+'TEXT\x20NOT\x20N'+_0x48e549(0x11c)+'\x20\x20\x20updated'+_0x48e549(0x12e)+_0x48e549(0x104)+_0x48e549(0x155)),_0x30511b=['key','value',_0x48e549(0x101)];else{if(!_0x30511b[_0x48e549(0x11a)](_0x48e549(0x101)))try{await db[_0x48e549(0x145)]('ALTER\x20TABL'+_0x48e549(0x13a)+'ew_prefs\x20A'+_0x48e549(0x13b)+_0x48e549(0x101)+_0x48e549(0x124)+_0x48e549(0x13c));}catch(_0x2dcde6){warn(name+(':\x20failed\x20t'+_0x48e549(0x15c)+'ted_at\x20col'+'umn:\x20')+(_0x2dcde6?.[_0x48e549(0x166)]||_0x2dcde6));}}try{const _0x4c1aae=await db['get'](_0x48e549(0xcb)+_0x48e549(0x100)+'atusview_p'+'refs\x20WHERE'+'\x20key=\x27enab'+'led\x27');if(!_0x4c1aae){const _0x5e3bb3=Math['floor'](Date['now']()/(0x4ca*0x1+-0x1a86+0x669*0x4));try{await db[_0x48e549(0x145)](_0x48e549(0x16e)+_0x48e549(0x15a)+'ew_prefs\x20('+_0x48e549(0x138)+_0x48e549(0x12f)+'at)\x20VALUES'+_0x48e549(0xee)+_0x48e549(0xe8)+_0x48e549(0x174),[_0x5e3bb3]);}catch(_0x518f0e){try{await db[_0x48e549(0x145)]('INSERT\x20OR\x20'+'REPLACE\x20IN'+_0x48e549(0x106)+_0x48e549(0x10a)+_0x48e549(0x133)+_0x48e549(0xf7)+_0x48e549(0x137)+_0x48e549(0xcf));}catch(_0xc87cca){warn(name+(':\x20failed\x20t'+_0x48e549(0x117)+_0x48e549(0xe9)+_0x48e549(0x122))+(_0xc87cca?.[_0x48e549(0x166)]||_0xc87cca));}}}}catch(_0x2cf83e){warn(name+(_0x48e549(0x130)+_0x48e549(0xe9)+_0x48e549(0xce)+_0x48e549(0x10b))+(_0x2cf83e?.[_0x48e549(0x166)]||_0x2cf83e));}}catch(_0x2d2bb9){warn(name+(_0x48e549(0xf6)+'efsTable\x20e'+_0x48e549(0x17f))+(_0x2d2bb9?.[_0x48e549(0x166)]||_0x2d2bb9));throw _0x2d2bb9;}}async function readEnabledFromDb(){const _0x5237fc=_0x2db80c;try{const _0x47f1ce=await db[_0x5237fc(0xda)](_0x5237fc(0xcb)+'ue\x20FROM\x20st'+_0x5237fc(0x121)+'refs\x20WHERE'+_0x5237fc(0xd8)+_0x5237fc(0x156)+'\x201');if(!_0x47f1ce)return![];const _0x31187a=String(_0x47f1ce[_0x5237fc(0x10c)])[_0x5237fc(0x119)+'e']();return _0x31187a==='true'||_0x31187a==='1';}catch(_0x3d24bb){return warn(name+(_0x5237fc(0x11f)+_0x5237fc(0xd6)+_0x5237fc(0xe3))+(_0x3d24bb?.[_0x5237fc(0x166)]||_0x3d24bb)),![];}}async function saveEnabledToDb(_0x1be099){const _0xf55ff3=_0x2db80c;try{const _0x2f0971=_0x1be099?_0xf55ff3(0x165):_0xf55ff3(0x10e),_0x151f52=Math[_0xf55ff3(0x164)](Date[_0xf55ff3(0xd9)]()/(0xb2+-0x1c0+0x4f6));return await db[_0xf55ff3(0x145)](_0xf55ff3(0x16e)+_0xf55ff3(0x15a)+'ew_prefs\x20('+'key,\x20value'+_0xf55ff3(0x12f)+_0xf55ff3(0x146)+'\x20(\x27enabled'+_0xf55ff3(0xfa)+_0xf55ff3(0x12b)+_0xf55ff3(0x115)+')\x20DO\x20UPDAT'+_0xf55ff3(0x157)+'e=excluded'+_0xf55ff3(0x109)+_0xf55ff3(0xfe)+_0xf55ff3(0xf3)+'dated_at',[_0x2f0971,_0x151f52]),!![];}catch(_0x517d36){const _0x217df2=String(_0x517d36?.[_0xf55ff3(0x166)]||'')['toLowerCas'+'e']();if(_0x217df2['includes'](_0xf55ff3(0x171)+_0xf55ff3(0x15e))||_0x217df2[_0xf55ff3(0x11a)](_0xf55ff3(0xeb)))try{return await db[_0xf55ff3(0x145)]('INSERT\x20OR\x20'+_0xf55ff3(0x16c)+_0xf55ff3(0x106)+_0xf55ff3(0x10a)+_0xf55ff3(0x133)+_0xf55ff3(0xf7)+'(\x27enabled\x27'+',\x20?)',[_0x1be099?_0xf55ff3(0x165):_0xf55ff3(0x10e)]),!![];}catch(_0x4c94e3){return warn(name+(_0xf55ff3(0xfc)+_0xf55ff3(0xc9)+_0xf55ff3(0xf0)+_0xf55ff3(0x159))+(_0x4c94e3?.[_0xf55ff3(0x166)]||_0x4c94e3)),![];}return warn(name+(_0xf55ff3(0xfc)+_0xf55ff3(0xe7)+_0xf55ff3(0x160))+(_0x517d36?.[_0xf55ff3(0x166)]||_0x517d36)),![];}}function formatTimestamp(_0x3c5e86=Date[_0x2db80c(0xd9)](),_0x2680da=DEFAULT_TIMEZONE){const _0x4f575e=_0x2db80c;try{const _0x43ce3e=DateTime[_0x4f575e(0xef)](_0x3c5e86)['setZone'](_0x2680da);if(!_0x43ce3e[_0x4f575e(0xf9)])return new Date(_0x3c5e86)[_0x4f575e(0x105)+_0x4f575e(0x132)]();return _0x43ce3e[_0x4f575e(0x105)+_0x4f575e(0x132)](DateTime[_0x4f575e(0x181)+_0x4f575e(0x183)+_0x4f575e(0x151)])+'\x20('+_0x43ce3e['zoneName']+')';}catch(_0x5a9eba){return new Date(_0x3c5e86)[_0x4f575e(0x105)+_0x4f575e(0x132)]();}}function createMessageHandler(){return async function _0x1dd7f6(_0x1dda0d){const _0x3a3859=_0x28d9;try{if(shuttingDown)return;refreshConfig();const _0x263096=await readEnabledFromDb();if(!_0x263096)return;const {messages:_0x50b0ee}=_0x1dda0d||{};if(!Array[_0x3a3859(0xdb)](_0x50b0ee)||_0x50b0ee['length']===0x2*-0x12ff+0xf5c+-0x2*-0xb51)return;for(const _0x999cbf of _0x50b0ee){try{if(!_0x999cbf||!_0x999cbf[_0x3a3859(0x10d)])continue;const _0x5e86eb=_0x999cbf['key']['remoteJid']||_0x999cbf[_0x3a3859(0x126)]||'',_0x14b930=_0x999cbf[_0x3a3859(0x10d)][_0x3a3859(0x131)+'t']||null;if(_0x5e86eb!==_0x3a3859(0x141)+_0x3a3859(0xc8)||!_0x14b930)continue;const _0x1ae3c7=formatTimestamp(Date[_0x3a3859(0xd9)](),DEFAULT_TIMEZONE);info(name+(_0x3a3859(0x14b)+'tatus\x20from'+'\x20')+_0x14b930+'\x20at\x20'+_0x1ae3c7);try{if(typeof botRef?.['sock']?.[_0x3a3859(0x120)+'es']===_0x3a3859(0xd3))await botRef[_0x3a3859(0x11d)]['readMessag'+'es']([_0x999cbf[_0x3a3859(0x10d)]]);else{if(typeof botRef?.['sock']?.[_0x3a3859(0x135)]==='function')await botRef['sock']['read']([_0x999cbf[_0x3a3859(0x10d)]]);else typeof botRef?.['readMessag'+'es']===_0x3a3859(0xd3)&&await botRef[_0x3a3859(0x120)+'es']([_0x999cbf[_0x3a3859(0x10d)]]);}}catch(_0x1accca){warn(name+(_0x3a3859(0x153)+_0x3a3859(0xed)+_0x3a3859(0x116)+'d:\x20')+(_0x1accca?.[_0x3a3859(0x166)]||_0x1accca));}}catch(_0x265b5d){warn(name+(_0x3a3859(0x134)+'op\x20error:\x20')+(_0x265b5d?.[_0x3a3859(0x166)]||_0x265b5d));}}}catch(_0x4e4421){warn(name+(_0x3a3859(0xf1)+'.upsert\x20ha'+'ndler\x20erro'+_0x3a3859(0xc5))+(_0x4e4421?.[_0x3a3859(0x166)]||_0x4e4421));}};}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0xca5*-0x2+-0xdf0+0x2cf*-0x4)*(-0x20c2+-0x4fe+0x4*0xa6a);function markCmdProcessed(_0x5391be){const _0x1b08af=_0x2db80c;if(!_0x5391be)return;if(processedCmdKeys[_0x1b08af(0x14d)](_0x5391be))try{clearTimeout(processedCmdKeys[_0x1b08af(0xda)](_0x5391be));}catch(_0xf667d9){};const _0x32472d=setTimeout(()=>processedCmdKeys[_0x1b08af(0xf8)](_0x5391be),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x1b08af(0x102)](_0x5391be,_0x32472d);}function isCmdProcessed(_0x3c3b98){return _0x3c3b98&&processedCmdKeys['has'](_0x3c3b98);}export async function onMessage(_0x453bf0){const _0xa74c00=_0x2db80c;try{if(!_0x453bf0||!_0x453bf0[_0xa74c00(0x10d)]||!_0x453bf0[_0xa74c00(0x166)]||!_0x453bf0[_0xa74c00(0xc7)])return;if(isJidGroup(_0x453bf0[_0xa74c00(0x10d)]['remoteJid']))return;const _0x47e636=_0x453bf0[_0xa74c00(0x10d)][_0xa74c00(0x161)],_0x59edc9=await isSudo(botRef,_0x453bf0)[_0xa74c00(0xe4)](()=>![]);if(!_0x47e636&&!_0x59edc9)return;let _0x1918ba;if(_0x47e636){_0x1918ba=getBotJid();if(!_0x1918ba){warn(name+(':\x20cannot\x20r'+_0xa74c00(0xde)+_0xa74c00(0x143)+_0xa74c00(0x15d)+'able).'));return;}}else _0x1918ba=_0x453bf0[_0xa74c00(0x10d)]['remoteJid'];const _0x261425=String(_0x453bf0['key']['remoteJid']||'')+'::'+String(_0x453bf0['key']['id']||_0x453bf0[_0xa74c00(0x10d)][_0xa74c00(0x131)+'t']||'');if(isCmdProcessed(_0x261425))return;markCmdProcessed(_0x261425);const _0x55f30f=typeof _0x453bf0[_0xa74c00(0xc6)]===_0xa74c00(0xdd)&&_0x453bf0[_0xa74c00(0xc6)]['trim']()[_0xa74c00(0x16f)]?_0x453bf0[_0xa74c00(0xc6)][_0xa74c00(0xdc)]():function _0x30fc3e(_0x49ba77){const _0x1ad259=_0xa74c00;if(!_0x49ba77||!_0x49ba77[_0x1ad259(0x166)])return'';const _0x261b61=_0x49ba77[_0x1ad259(0x166)];if(_0x261b61[_0x1ad259(0x123)+'on'])return _0x261b61[_0x1ad259(0x123)+'on'];if(_0x261b61[_0x1ad259(0x182)+'xtMessage']?.[_0x1ad259(0xc6)])return _0x261b61['extendedTe'+_0x1ad259(0x139)]['text'];if(_0x261b61[_0x1ad259(0x128)+'ge']?.['caption'])return _0x261b61['imageMessa'+'ge'][_0x1ad259(0x13e)];if(_0x261b61['videoMessa'+'ge']?.[_0x1ad259(0x13e)])return _0x261b61[_0x1ad259(0x150)+'ge']['caption'];if(_0x261b61[_0x1ad259(0xdf)+'ponseMessa'+'ge']?.[_0x1ad259(0x140)+_0x1ad259(0x158)])return _0x261b61[_0x1ad259(0xdf)+'ponseMessa'+'ge']['selectedBu'+_0x1ad259(0x158)];if(_0x261b61[_0x1ad259(0x14a)+_0x1ad259(0x127)]?.['singleSele'+_0x1ad259(0xfb)]?.['selectedRo'+'wId'])return _0x261b61[_0x1ad259(0x14a)+_0x1ad259(0x127)][_0x1ad259(0x18a)+_0x1ad259(0xfb)][_0x1ad259(0xf2)+_0x1ad259(0x188)];return'';}(_0x453bf0)||'';if(!_0x55f30f)return;const _0x2aca7c=(_0x55f30f[_0xa74c00(0xd1)](/\r?\n/)[-0x17f1+0x2219+-0xa28]||'')[_0xa74c00(0xdc)](),_0x206057=_0x2aca7c[_0xa74c00(0xd1)](/\s+/),_0x373722=(_0x206057[-0x5*0x19+0x1136+-0x10b9]||'')[_0xa74c00(0x119)+'e']();if(!commands[_0xa74c00(0x11a)](_0x373722))return;const _0x3a7f58=(_0x206057[-0x1*-0x1c07+-0x15c*-0x1+-0x1d62*0x1]||'')['toLowerCas'+'e']();if(['on','enable',_0xa74c00(0x165),'1'][_0xa74c00(0x11a)](_0x3a7f58)){const _0xea219c=await saveEnabledToDb(!![]);if(_0xea219c)await sendConfirmation(_0x1918ba,'[autoviews'+'tatus]\x20ena'+'bled');else await sendConfirmation(_0x1918ba,_0xa74c00(0x184)+_0xa74c00(0x114)+_0xa74c00(0x168)+'ble');return;}if([_0xa74c00(0x14f),'disable',_0xa74c00(0x10e),'0']['includes'](_0x3a7f58)){const _0x4cb99b=await saveEnabledToDb(![]);if(_0x4cb99b)await sendConfirmation(_0x1918ba,_0xa74c00(0x184)+_0xa74c00(0x136)+_0xa74c00(0x113));else await sendConfirmation(_0x1918ba,_0xa74c00(0x184)+_0xa74c00(0x114)+_0xa74c00(0x14e)+_0xa74c00(0x189));return;}if(_0x3a7f58===_0xa74c00(0xd5)||_0x3a7f58==='state'||!_0x3a7f58){const _0x363714=await readEnabledFromDb(),_0x1da327=_0x363714?_0xa74c00(0xf5):_0xa74c00(0x149);await sendConfirmation(_0x1918ba,_0xa74c00(0xf4)+_0xa74c00(0x125)+':\x20'+_0x1da327+(_0xa74c00(0x176)+'\x20')+DEFAULT_TIMEZONE);return;}await sendConfirmation(_0x1918ba,_0xa74c00(0x177)+_0xa74c00(0xe1)+(_0xa74c00(0x178)+_0xa74c00(0x148)+'nable\x20\x20\x20\x20-'+_0xa74c00(0x17d))+(_0xa74c00(0x178)+'tatus\x20off|'+_0xa74c00(0x179)+'>\x20disable\x0a')+('\x20autoviews'+_0xa74c00(0x17b)+_0xa74c00(0x17e)+_0xa74c00(0x152)+'te'));}catch(_0x3b8bd7){warn(name+(_0xa74c00(0x162)+'e\x20error:\x20')+(_0x3b8bd7?.['message']||_0x3b8bd7));}}function _0x28d9(_0x52544c,_0x23319d){const _0x140ae6=_0x1797();return _0x28d9=function(_0x560636,_0x44fb2c){_0x560636=_0x560636-(0x235f+-0x1393+0xf07*-0x1);let _0x590682=_0x140ae6[_0x560636];return _0x590682;},_0x28d9(_0x52544c,_0x23319d);}async function sendConfirmation(_0x598644,_0x56eece){const _0x5b3dbf=_0x2db80c;try{if(!_0x598644)return;if(botRef&&botRef[_0x5b3dbf(0x11d)]&&typeof botRef[_0x5b3dbf(0x11d)][_0x5b3dbf(0xe0)+'e']===_0x5b3dbf(0xd3))await botRef[_0x5b3dbf(0x11d)][_0x5b3dbf(0xe0)+'e'](_0x598644,{'text':_0x56eece});else botRef&&typeof botRef['sendMessag'+'e']==='function'?await botRef[_0x5b3dbf(0xe0)+'e'](_0x598644,{'text':_0x56eece}):warn(name+(_0x5b3dbf(0x13f)+_0x5b3dbf(0x154)+_0x5b3dbf(0xe6)+_0x5b3dbf(0x16a)+_0x5b3dbf(0x169)));}catch(_0x20459a){warn(name+(_0x5b3dbf(0xea)+_0x5b3dbf(0xff)+'ailed:\x20')+(_0x20459a?.[_0x5b3dbf(0x166)]||_0x20459a));}}export async function initialize(_0x354cb0){const _0x1d68c3=_0x2db80c;if(!_0x354cb0)throw new Error('status-vie'+_0x1d68c3(0x12c)+_0x1d68c3(0xd0)+_0x1d68c3(0x17a)+_0x1d68c3(0xcc));botRef=_0x354cb0,shuttingDown=![],refreshConfig(),await ensurePrefsTable()[_0x1d68c3(0xe4)](_0x41ff08=>{const _0x407dee=_0x1d68c3;warn(name+(_0x407dee(0x110)+_0x407dee(0x12a))+(_0x41ff08?.['message']||_0x41ff08));}),messageHandler=createMessageHandler(),startManagedListener({'botRef':botRef,'eventName':_0x1d68c3(0x10f)+_0x1d68c3(0xfd),'handler':messageHandler,'moduleName':name}),info(name+(_0x1d68c3(0x129)+'zed.'));}export async function cleanup(){const _0x4f8cf3=_0x2db80c;try{stopManagedListener(name,_0x4f8cf3(0x10f)+_0x4f8cf3(0xfd)),shuttingDown=!![],messageHandler=null;}catch(_0x123af3){warn(name+(_0x4f8cf3(0x16b)+_0x4f8cf3(0xe3))+(_0x123af3?.['message']||_0x123af3));}finally{botRef=null,info(name+(_0x4f8cf3(0x16d)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};