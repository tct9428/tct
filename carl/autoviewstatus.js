const _0x55709c=_0x279c;(function(_0x2d41dd,_0x5a4175){const _0x4d0661=_0x279c,_0x5eb990=_0x2d41dd();while(!![]){try{const _0xbc7f57=parseInt(_0x4d0661(0x1d0))/(0x2*0xed7+0xaa4+-0x2851)*(parseInt(_0x4d0661(0x1b9))/(-0x2237*0x1+0x91e*-0x3+0x1*0x3d93))+parseInt(_0x4d0661(0x18d))/(0x1*0x321+-0x15*-0xa+0x3f0*-0x1)*(parseInt(_0x4d0661(0x227))/(0x19f8+0x162d+-0x1*0x3021))+-parseInt(_0x4d0661(0x191))/(-0x1f*0x137+0x2*-0x13f+0x282c)*(parseInt(_0x4d0661(0x1f1))/(0x1ab8+0x1f*-0xa9+0x1d*-0x37))+parseInt(_0x4d0661(0x1a5))/(-0x4e*0x51+-0x7c*-0x2c+0x365)+-parseInt(_0x4d0661(0x22c))/(0x1ea6+0x17*-0x147+-0x1*0x13d)*(parseInt(_0x4d0661(0x1b1))/(-0x251d+-0x8a0+0x2*0x16e3))+parseInt(_0x4d0661(0x24a))/(0x4*0x3ef+0x6e4+-0x1696)+parseInt(_0x4d0661(0x1b5))/(-0x16fb+-0x130f+-0x18f*-0x1b)*(-parseInt(_0x4d0661(0x1a9))/(0x1be7+-0xe0d+-0x3e*0x39));if(_0xbc7f57===_0x5a4175)break;else _0x5eb990['push'](_0x5eb990['shift']());}catch(_0x23c8fe){_0x5eb990['push'](_0x5eb990['shift']());}}}(_0x5e11,-0x1a*-0x552e+0x3599*0x33+-0xbe3d9));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name='status-vie'+'wer';export const version='1.0.4';export const priority=-0x3c2*0x1+-0x7*0x55c+0x3c1*0xb;export const configKeys=[_0x55709c(0x1be)+'ATUS'];export const commands=[_0x55709c(0x20b)+'atus'];let botRef=null,DEFAULT_TIMEZONE=_0x55709c(0x225)+_0x55709c(0x218),CFG={'AUTOVIEWSTATUS':![]},shuttingDown=![],messageHandler=null;function refreshConfig(){const _0x3bb6f2=_0x55709c;try{const _0x5adcb1=typeof getConfig===_0x3bb6f2(0x18c)?getConfig()||{}:{};CFG['AUTOVIEWST'+_0x3bb6f2(0x215)]=typeof _0x5adcb1['AUTOVIEWST'+_0x3bb6f2(0x215)]!==_0x3bb6f2(0x20e)?!!_0x5adcb1[_0x3bb6f2(0x1be)+'ATUS']:CFG[_0x3bb6f2(0x1be)+'ATUS'];}catch(_0x188f00){warn(name+(_0x3bb6f2(0x1c5)+_0x3bb6f2(0x1f4)+'r:\x20')+(_0x188f00?.[_0x3bb6f2(0x251)]||_0x188f00));}}try{hotReloadConfig&&hotReloadConfig(()=>{refreshConfig();});}catch(_0xc11d79){warn(name+(_0x55709c(0x223)+_0x55709c(0x1eb)+_0x55709c(0x242)+'\x20failed:\x20')+(_0xc11d79?.['message']||_0xc11d79));}refreshConfig();function _0x279c(_0x2bcecd,_0x28f923){const _0x73bd01=_0x5e11();return _0x279c=function(_0xbe5484,_0x2b1aad){_0xbe5484=_0xbe5484-(-0x2*0x1233+0x183+0x246f);let _0x1e6dba=_0x73bd01[_0xbe5484];return _0x1e6dba;},_0x279c(_0x2bcecd,_0x28f923);}function _0x5e11(){const _0x554e9=['ED_WITH_SE','efs\x20(\x0a\x20\x20\x20\x20','EFAULT\x200','o\x20insert\x20d','essage\x20met','value','8506250qqHFaq','selectedRo','imageMessa','off','set','at)\x20VALUES','ew_prefs\x20A','message','key','ue\x20FROM\x20st','read','function','736233ITtQhz','led\x27','status-vie','no\x20column','10RYSBsb','d:\x20','toLowerCas','catch','\x0aTimezone:','bled\x20row:\x20','dated_at','name','now','NFLICT(key','e)\x20VALUES\x20','selectedBu','all','has','disable','zed.','irmation\x20f','participan','\x20?)','E\x20statusvi','4505816RDJvFG','ledFromDb\x20','wer.initia','ner\x20(bot\x20J','132RlOgRA','ring','extendedTe',',\x27false\x27)','only):\x0a','get','dated_at=e','readMessag','9FNySKP',':\x20sendConf','psert','XT\x20PRIMARY','807862tllGyM','REPLACE\x20IN','\x20autoviews','singleSele','12hAEzux','\x20KEY,\x0a\x20\x20\x20\x20','R\x20DEFAULT\x20','adcast','tus\x20as\x20rea','AUTOVIEWST','INSERT\x20OR\x20','DATETIME_M','CREATE\x20TAB',')\x20DO\x20UPDAT','Usage\x20(PM\x20','toLocaleSt',':\x20refreshC','split','conversati','rror:\x20','\x20(\x27enabled','le_info(\x27s','e=excluded','caption','tatus]\x20fai','\x20\x20\x20\x20value\x20','sock','78063TLUEpl','CONDS','true','refs\x20WHERE','(key,\x20valu','xtMessage','able).','INSERT\x20INT','TEXT\x20NOT\x20N','bled\x20row\x20f','EXISTS\x20sta','ew_prefs\x20(','led\x20to\x20dis',',\x20updated_','remoteJid','key,\x20value','ted_at\x20col','wer\x0a\x0aState',':\x20saveEnab','buttonsRes',':\x20failed\x20t','isCommand','_at\x20INTEGE','trim','status@bro','E\x20SET\x20valu','atusview_p','dConfig\x20re','wId','ledToDb\x20fa','efault\x20ena','[autoviews',':\x20messages','1593132jDVCec','umn:\x20','videoMessa','onfig\x20erro',':\x20cleaned\x20','fromMe','includes',':\x20DB\x20init\x20','able','tatus\x20from','.upsert\x20ha','length','ULL,\x0a\x20\x20\x20\x20\x20','messages.u',',\x20?)','ctReply','res\x20bot\x20in',':\x20cannot\x20r','led\x27\x20LIMIT','isArray','ble','failed:\x20','\x27,\x20?,\x20?)\x0a\x20','tatus\x20stat','LE\x20IF\x20NOT\x20','0\x0a\x20\x20\x20\x20\x20\x20);','autoviewst','led\x20to\x20ena','floor','undefined','\x20\x20\x20\x20\x20ON\x20CO','umn','ledToDb\x20er','\x20key=\x27enab','r:\x20','prefs\x27)','ATUS','text','(\x27enabled\x27','robi','>\x20show\x20sta','tusview_pr','iew_prefs\x20','>\x20enable\x0a','state',':\x20no\x20sendM','error:\x20','tatusview_','sendMessag','tatus]\x20ena',':\x20hotReloa','false','Africa/Nai','ailed:\x20','4xizsIf','has\x20no\x20col','llback\x20fai',':\x20viewed\x20s','ponseMessa','3053552WEnJZg','run','ID\x20unavail','xcluded.up','\x27,\x27false\x27,','\x20\x20\x20\x20key\x20TE','DISABLED','TO\x20statusv','updated_at','PRAGMA\x20tab','listRespon','o\x20add\x20upda','ENABLED','O\x20statusvi','exec','efsTable\x20e','op\x20error:\x20','o\x20mark\x20sta','nable\x20\x20\x20\x20-','Status\x20Vie','seMessage','DD\x20COLUMN\x20','gistration',':\x20ensure\x20d'];_0x5e11=function(){return _0x554e9;};return _0x5e11();}async function ensurePrefsTable(){const _0x2082a5=_0x55709c;try{let _0x3696ee=[];try{const _0x5b823d=await db[_0x2082a5(0x19d)](_0x2082a5(0x235)+_0x2082a5(0x1ca)+_0x2082a5(0x220)+_0x2082a5(0x214));_0x3696ee=(_0x5b823d||[])['map'](_0x53857a=>_0x53857a[_0x2082a5(0x198)]);}catch(_0x476769){_0x3696ee=[];}if(!_0x3696ee[_0x2082a5(0x1fc)])await db[_0x2082a5(0x23a)](_0x2082a5(0x1c1)+_0x2082a5(0x209)+_0x2082a5(0x1da)+_0x2082a5(0x21a)+_0x2082a5(0x245)+_0x2082a5(0x231)+_0x2082a5(0x1b4)+_0x2082a5(0x1ba)+_0x2082a5(0x1ce)+_0x2082a5(0x1d8)+_0x2082a5(0x1fd)+'\x20\x20\x20updated'+_0x2082a5(0x1e6)+_0x2082a5(0x1bb)+_0x2082a5(0x20a)),_0x3696ee=[_0x2082a5(0x252),_0x2082a5(0x249),_0x2082a5(0x234)];else{if(!_0x3696ee['includes'](_0x2082a5(0x234)))try{await db[_0x2082a5(0x22d)]('ALTER\x20TABL'+_0x2082a5(0x1a4)+_0x2082a5(0x250)+_0x2082a5(0x241)+'updated_at'+'\x20INTEGER\x20D'+_0x2082a5(0x246));}catch(_0xec40da){warn(name+(_0x2082a5(0x1e4)+_0x2082a5(0x237)+_0x2082a5(0x1e0)+_0x2082a5(0x1f2))+(_0xec40da?.[_0x2082a5(0x251)]||_0xec40da));}}try{const _0x5f3257=await db[_0x2082a5(0x1ae)]('SELECT\x20val'+_0x2082a5(0x253)+_0x2082a5(0x1ea)+_0x2082a5(0x1d3)+'\x20key=\x27enab'+_0x2082a5(0x18e));if(!_0x5f3257){const _0x1ce82a=Math[_0x2082a5(0x20d)](Date[_0x2082a5(0x199)]()/(-0x1325*-0x1+0x231e+-0x325b));try{await db[_0x2082a5(0x22d)]('INSERT\x20INT'+_0x2082a5(0x239)+_0x2082a5(0x1db)+_0x2082a5(0x1df)+_0x2082a5(0x1dd)+_0x2082a5(0x24f)+'\x20(\x27enabled'+_0x2082a5(0x230)+_0x2082a5(0x1a3),[_0x1ce82a]);}catch(_0x50a999){try{await db['run'](_0x2082a5(0x1bf)+_0x2082a5(0x1b6)+_0x2082a5(0x233)+'iew_prefs\x20'+_0x2082a5(0x1d4)+_0x2082a5(0x19b)+_0x2082a5(0x217)+_0x2082a5(0x1ac));}catch(_0x4b6305){warn(name+(_0x2082a5(0x1e4)+_0x2082a5(0x247)+_0x2082a5(0x1ee)+_0x2082a5(0x196))+(_0x4b6305?.[_0x2082a5(0x251)]||_0x4b6305));}}}}catch(_0x5a1510){warn(name+(_0x2082a5(0x243)+'efault\x20ena'+_0x2082a5(0x1d9)+_0x2082a5(0x226))+(_0x5a1510?.['message']||_0x5a1510));}}catch(_0x581ec6){warn(name+(':\x20ensurePr'+_0x2082a5(0x23b)+_0x2082a5(0x1c8))+(_0x581ec6?.['message']||_0x581ec6));throw _0x581ec6;}}async function readEnabledFromDb(){const _0x59a57b=_0x55709c;try{const _0x2ab9e2=await db[_0x59a57b(0x1ae)]('SELECT\x20val'+_0x59a57b(0x253)+_0x59a57b(0x1ea)+_0x59a57b(0x1d3)+_0x59a57b(0x212)+_0x59a57b(0x203)+'\x201');if(!_0x2ab9e2)return![];const _0x437058=String(_0x2ab9e2['value'])[_0x59a57b(0x193)+'e']();return _0x437058===_0x59a57b(0x1d2)||_0x437058==='1';}catch(_0x42f403){return warn(name+(':\x20readEnab'+_0x59a57b(0x1a6)+'error:\x20')+(_0x42f403?.[_0x59a57b(0x251)]||_0x42f403)),![];}}async function saveEnabledToDb(_0x1e409c){const _0x464770=_0x55709c;try{const _0xd1afc0=_0x1e409c?_0x464770(0x1d2):'false',_0x1927c9=Math[_0x464770(0x20d)](Date[_0x464770(0x199)]()/(-0x86b*0x1+-0x277+0xeca));return await db[_0x464770(0x22d)](_0x464770(0x1d7)+_0x464770(0x239)+_0x464770(0x1db)+_0x464770(0x1df)+',\x20updated_'+_0x464770(0x24f)+_0x464770(0x1c9)+_0x464770(0x207)+_0x464770(0x20f)+_0x464770(0x19a)+_0x464770(0x1c2)+_0x464770(0x1e9)+_0x464770(0x1cb)+'.value,\x20up'+_0x464770(0x1af)+_0x464770(0x22f)+_0x464770(0x197),[_0xd1afc0,_0x1927c9]),!![];}catch(_0x498538){const _0x3e8717=String(_0x498538?.[_0x464770(0x251)]||'')[_0x464770(0x193)+'e']();if(_0x3e8717[_0x464770(0x1f7)](_0x464770(0x228)+_0x464770(0x210))||_0x3e8717['includes'](_0x464770(0x190)))try{return await db['run'](_0x464770(0x1bf)+'REPLACE\x20IN'+_0x464770(0x233)+_0x464770(0x21b)+_0x464770(0x1d4)+_0x464770(0x19b)+_0x464770(0x217)+_0x464770(0x1ff),[_0x1e409c?'true':_0x464770(0x224)]),!![];}catch(_0x44d370){return warn(name+(_0x464770(0x1e2)+_0x464770(0x1ed)+_0x464770(0x229)+'led:\x20')+(_0x44d370?.[_0x464770(0x251)]||_0x44d370)),![];}return warn(name+(':\x20saveEnab'+_0x464770(0x211)+'ror:\x20')+(_0x498538?.[_0x464770(0x251)]||_0x498538)),![];}}function formatTimestamp(_0x5ecfc9=Date[_0x55709c(0x199)](),_0x2041ae=DEFAULT_TIMEZONE){const _0x2cb22c=_0x55709c;try{const _0x1dc217=DateTime['fromMillis'](_0x5ecfc9)['setZone'](_0x2041ae);if(!_0x1dc217['isValid'])return new Date(_0x5ecfc9)['toLocaleSt'+_0x2cb22c(0x1aa)]();return _0x1dc217[_0x2cb22c(0x1c4)+_0x2cb22c(0x1aa)](DateTime[_0x2cb22c(0x1c0)+_0x2cb22c(0x244)+_0x2cb22c(0x1d1)])+'\x20('+_0x1dc217['zoneName']+')';}catch(_0xfb641c){return new Date(_0x5ecfc9)['toLocaleSt'+_0x2cb22c(0x1aa)]();}}function createMessageHandler(){return async function _0x2fa6d9(_0x374c35){const _0x1c96fe=_0x279c;try{if(shuttingDown)return;refreshConfig();const _0x5ab6e=await readEnabledFromDb();if(!_0x5ab6e)return;const {messages:_0x5e39e4}=_0x374c35||{};if(!Array[_0x1c96fe(0x204)](_0x5e39e4)||_0x5e39e4['length']===0x2*-0x868+-0x1*0xd69+-0xa13*-0x3)return;for(const _0x2ac8a6 of _0x5e39e4){try{if(!_0x2ac8a6||!_0x2ac8a6[_0x1c96fe(0x252)])continue;const _0x49cb94=_0x2ac8a6[_0x1c96fe(0x252)][_0x1c96fe(0x1de)]||_0x2ac8a6[_0x1c96fe(0x1de)]||'',_0x146ac7=_0x2ac8a6[_0x1c96fe(0x252)][_0x1c96fe(0x1a2)+'t']||null;if(_0x49cb94!==_0x1c96fe(0x1e8)+_0x1c96fe(0x1bc)||!_0x146ac7)continue;const _0xe82668=formatTimestamp(Date[_0x1c96fe(0x199)](),DEFAULT_TIMEZONE);info(name+(_0x1c96fe(0x22a)+_0x1c96fe(0x1fa)+'\x20')+_0x146ac7+'\x20at\x20'+_0xe82668);try{if(typeof botRef?.[_0x1c96fe(0x1cf)]?.[_0x1c96fe(0x1b0)+'es']===_0x1c96fe(0x18c))await botRef[_0x1c96fe(0x1cf)]['readMessag'+'es']([_0x2ac8a6['key']]);else{if(typeof botRef?.[_0x1c96fe(0x1cf)]?.[_0x1c96fe(0x254)]===_0x1c96fe(0x18c))await botRef[_0x1c96fe(0x1cf)][_0x1c96fe(0x254)]([_0x2ac8a6[_0x1c96fe(0x252)]]);else typeof botRef?.[_0x1c96fe(0x1b0)+'es']===_0x1c96fe(0x18c)&&await botRef[_0x1c96fe(0x1b0)+'es']([_0x2ac8a6[_0x1c96fe(0x252)]]);}}catch(_0x17ae7f){warn(name+(_0x1c96fe(0x1e4)+_0x1c96fe(0x23d)+_0x1c96fe(0x1bd)+_0x1c96fe(0x192))+(_0x17ae7f?.[_0x1c96fe(0x251)]||_0x17ae7f));}}catch(_0x3dda8d){warn(name+(':\x20inner\x20lo'+_0x1c96fe(0x23c))+(_0x3dda8d?.[_0x1c96fe(0x251)]||_0x3dda8d));}}}catch(_0x27bf32){warn(name+(_0x1c96fe(0x1f0)+_0x1c96fe(0x1fb)+'ndler\x20erro'+_0x1c96fe(0x213))+(_0x27bf32?.[_0x1c96fe(0x251)]||_0x27bf32));}};}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x149+-0xc5b*0x2+-0x3bb*-0x7)*(0x1089+-0xf9d+0x2fc);function markCmdProcessed(_0x101c68){const _0x448109=_0x55709c;if(!_0x101c68)return;if(processedCmdKeys[_0x448109(0x19e)](_0x101c68))try{clearTimeout(processedCmdKeys['get'](_0x101c68));}catch(_0x135274){};const _0x1418d6=setTimeout(()=>processedCmdKeys['delete'](_0x101c68),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x448109(0x24e)](_0x101c68,_0x1418d6);}function isCmdProcessed(_0x455829){const _0x5c96e6=_0x55709c;return _0x455829&&processedCmdKeys[_0x5c96e6(0x19e)](_0x455829);}export async function onMessage(_0x871bed){const _0x522807=_0x55709c;try{if(!_0x871bed||!_0x871bed[_0x522807(0x252)]||!_0x871bed[_0x522807(0x251)]||!_0x871bed[_0x522807(0x1e5)])return;if(isJidGroup(_0x871bed[_0x522807(0x252)][_0x522807(0x1de)]))return;const _0x48f94d=_0x871bed[_0x522807(0x252)][_0x522807(0x1f6)],_0x3ab192=await isSudo(botRef,_0x871bed)[_0x522807(0x194)](()=>![]);if(!_0x48f94d&&!_0x3ab192)return;let _0x5e18ad;if(_0x48f94d){_0x5e18ad=getBotJid();if(!_0x5e18ad){warn(name+(_0x522807(0x202)+'eply\x20to\x20ow'+_0x522807(0x1a8)+_0x522807(0x22e)+_0x522807(0x1d6)));return;}}else _0x5e18ad=_0x871bed[_0x522807(0x252)]['remoteJid'];const _0x190dcc=String(_0x871bed['key'][_0x522807(0x1de)]||'')+'::'+String(_0x871bed[_0x522807(0x252)]['id']||_0x871bed[_0x522807(0x252)]['participan'+'t']||'');if(isCmdProcessed(_0x190dcc))return;markCmdProcessed(_0x190dcc);const _0x1f1ddd=typeof _0x871bed[_0x522807(0x216)]==='string'&&_0x871bed['text']['trim']()['length']?_0x871bed[_0x522807(0x216)][_0x522807(0x1e7)]():function _0x3f329f(_0x593890){const _0x1a0eca=_0x522807;if(!_0x593890||!_0x593890[_0x1a0eca(0x251)])return'';const _0xe335c4=_0x593890[_0x1a0eca(0x251)];if(_0xe335c4['conversati'+'on'])return _0xe335c4[_0x1a0eca(0x1c7)+'on'];if(_0xe335c4[_0x1a0eca(0x1ab)+'xtMessage']?.[_0x1a0eca(0x216)])return _0xe335c4[_0x1a0eca(0x1ab)+_0x1a0eca(0x1d5)][_0x1a0eca(0x216)];if(_0xe335c4[_0x1a0eca(0x24c)+'ge']?.[_0x1a0eca(0x1cc)])return _0xe335c4[_0x1a0eca(0x24c)+'ge'][_0x1a0eca(0x1cc)];if(_0xe335c4[_0x1a0eca(0x1f3)+'ge']?.[_0x1a0eca(0x1cc)])return _0xe335c4[_0x1a0eca(0x1f3)+'ge'][_0x1a0eca(0x1cc)];if(_0xe335c4[_0x1a0eca(0x1e3)+_0x1a0eca(0x22b)+'ge']?.[_0x1a0eca(0x19c)+'ttonId'])return _0xe335c4[_0x1a0eca(0x1e3)+_0x1a0eca(0x22b)+'ge'][_0x1a0eca(0x19c)+'ttonId'];if(_0xe335c4[_0x1a0eca(0x236)+'seMessage']?.[_0x1a0eca(0x1b8)+_0x1a0eca(0x200)]?.[_0x1a0eca(0x24b)+_0x1a0eca(0x1ec)])return _0xe335c4[_0x1a0eca(0x236)+_0x1a0eca(0x240)][_0x1a0eca(0x1b8)+_0x1a0eca(0x200)][_0x1a0eca(0x24b)+_0x1a0eca(0x1ec)];return'';}(_0x871bed)||'';if(!_0x1f1ddd)return;const _0x5c9493=(_0x1f1ddd[_0x522807(0x1c6)](/\r?\n/)[-0x1a04+0x17*0x171+-0x105*0x7]||'')[_0x522807(0x1e7)](),_0x19e300=_0x5c9493['split'](/\s+/),_0x264c79=(_0x19e300[-0x571+0x1723*0x1+0x11b2*-0x1]||'')[_0x522807(0x193)+'e']();if(!commands[_0x522807(0x1f7)](_0x264c79))return;const _0x2e6bd5=(_0x19e300[-0x1*0x1ac9+-0x1*-0x1019+0xab1]||'')[_0x522807(0x193)+'e']();if(['on','enable',_0x522807(0x1d2),'1'][_0x522807(0x1f7)](_0x2e6bd5)){const _0x3358ed=await saveEnabledToDb(!![]);if(_0x3358ed)await sendConfirmation(_0x5e18ad,_0x522807(0x1ef)+_0x522807(0x222)+'bled');else await sendConfirmation(_0x5e18ad,_0x522807(0x1ef)+_0x522807(0x1cd)+_0x522807(0x20c)+_0x522807(0x205));return;}if([_0x522807(0x24d),_0x522807(0x19f),_0x522807(0x224),'0'][_0x522807(0x1f7)](_0x2e6bd5)){const _0x2fbb8b=await saveEnabledToDb(![]);if(_0x2fbb8b)await sendConfirmation(_0x5e18ad,_0x522807(0x1ef)+'tatus]\x20dis'+'abled');else await sendConfirmation(_0x5e18ad,_0x522807(0x1ef)+_0x522807(0x1cd)+_0x522807(0x1dc)+_0x522807(0x1f9));return;}if(_0x2e6bd5==='status'||_0x2e6bd5===_0x522807(0x21d)||!_0x2e6bd5){const _0x4ce7cd=await readEnabledFromDb(),_0x4ff01f=_0x4ce7cd?_0x522807(0x238):_0x522807(0x232);await sendConfirmation(_0x5e18ad,_0x522807(0x23f)+_0x522807(0x1e1)+':\x20'+_0x4ff01f+(_0x522807(0x195)+'\x20')+DEFAULT_TIMEZONE);return;}await sendConfirmation(_0x5e18ad,_0x522807(0x1c3)+_0x522807(0x1ad)+(_0x522807(0x1b7)+'tatus\x20on|e'+_0x522807(0x23e)+_0x522807(0x21c))+(_0x522807(0x1b7)+'tatus\x20off|'+'disable\x20\x20-'+'>\x20disable\x0a')+('\x20autoviews'+_0x522807(0x208)+'us\x20\x20\x20\x20\x20\x20\x20-'+_0x522807(0x219)+'te'));}catch(_0x1a60eb){warn(name+(':\x20onMessag'+'e\x20error:\x20')+(_0x1a60eb?.[_0x522807(0x251)]||_0x1a60eb));}}async function sendConfirmation(_0x1543a2,_0x302f5d){const _0x12f4c0=_0x55709c;try{if(!_0x1543a2)return;if(botRef&&botRef[_0x12f4c0(0x1cf)]&&typeof botRef[_0x12f4c0(0x1cf)]['sendMessag'+'e']==='function')await botRef['sock']['sendMessag'+'e'](_0x1543a2,{'text':_0x302f5d});else botRef&&typeof botRef['sendMessag'+'e']===_0x12f4c0(0x18c)?await botRef[_0x12f4c0(0x221)+'e'](_0x1543a2,{'text':_0x302f5d}):warn(name+(_0x12f4c0(0x21e)+_0x12f4c0(0x248)+'hod\x20availa'+'ble\x20for\x20co'+'nfirmation'));}catch(_0x496c64){warn(name+(_0x12f4c0(0x1b2)+_0x12f4c0(0x1a1)+_0x12f4c0(0x226))+(_0x496c64?.['message']||_0x496c64));}}export async function initialize(_0x42de12){const _0x1d75f8=_0x55709c;if(!_0x42de12)throw new Error(_0x1d75f8(0x18f)+_0x1d75f8(0x1a7)+'lize\x20requi'+_0x1d75f8(0x201)+'stance');botRef=_0x42de12,shuttingDown=![],refreshConfig(),await ensurePrefsTable()[_0x1d75f8(0x194)](_0x2e5a65=>{const _0x4e1fac=_0x1d75f8;warn(name+(_0x4e1fac(0x1f8)+_0x4e1fac(0x206))+(_0x2e5a65?.[_0x4e1fac(0x251)]||_0x2e5a65));}),messageHandler=createMessageHandler(),startManagedListener({'botRef':botRef,'eventName':_0x1d75f8(0x1fe)+_0x1d75f8(0x1b3),'handler':messageHandler,'moduleName':name}),info(name+(':\x20initiali'+_0x1d75f8(0x1a0)));}export async function cleanup(){const _0x76732e=_0x55709c;try{stopManagedListener(name,_0x76732e(0x1fe)+_0x76732e(0x1b3)),shuttingDown=!![],messageHandler=null;}catch(_0xee1c50){warn(name+(':\x20cleanup\x20'+_0x76732e(0x21f))+(_0xee1c50?.['message']||_0xee1c50));}finally{botRef=null,info(name+(_0x76732e(0x1f5)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};