const _0x4946d8=_0x361f;(function(_0x1bff97,_0x1069f5){const _0x5ed350=_0x361f,_0x68cef1=_0x1bff97();while(!![]){try{const _0x1880fd=parseInt(_0x5ed350(0x27d))/(-0x2a8+0xaa9*0x3+-0x116*0x1b)+parseInt(_0x5ed350(0x27c))/(0xe49+0xe33+-0x1c7a)+parseInt(_0x5ed350(0x1d8))/(-0x111+-0x1db4+0x314*0xa)+parseInt(_0x5ed350(0x1dd))/(0x652*-0x5+-0x1ee6+-0x3e84*-0x1)+parseInt(_0x5ed350(0x1f4))/(0x1a6d+-0x1664+-0x404)+parseInt(_0x5ed350(0x265))/(0x1f9d+-0x9c4+-0x15d3*0x1)*(-parseInt(_0x5ed350(0x24a))/(0x9f3+-0x1b2a+0x113e))+-parseInt(_0x5ed350(0x26c))/(0x32*0x76+-0x1967*-0x1+0x5*-0x9af)*(parseInt(_0x5ed350(0x1f8))/(-0x1*-0x1011+-0x19cd+-0x29*-0x3d));if(_0x1880fd===_0x1069f5)break;else _0x68cef1['push'](_0x68cef1['shift']());}catch(_0x1104de){_0x68cef1['push'](_0x68cef1['shift']());}}}(_0x3f24,0x1a081e*0x1+0x9*0x242ef+-0x20f1ad));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name='autoviewst'+'atus';function _0x361f(_0x4b94b1,_0x532de9){_0x4b94b1=_0x4b94b1-(0x4*-0x62d+-0x1*0x8b5+0x2334*0x1);const _0x199650=_0x3f24();let _0x21efd6=_0x199650[_0x4b94b1];return _0x21efd6;}export const version=_0x4946d8(0x278);export const priority=0x2*-0x90e+-0xb44+-0x5e1*-0x5;export const configKeys=[_0x4946d8(0x28e)+'ATUS'];export const commands=[_0x4946d8(0x20e)+_0x4946d8(0x288)];let botRef=null,DEFAULT_TIMEZONE=_0x4946d8(0x272)+_0x4946d8(0x22c),CFG={'AUTOVIEWSTATUS':![]},shuttingDown=![];function refreshConfig(){const _0x49e67f=_0x4946d8;try{const _0x13e28b=typeof getConfig==='function'?getConfig()||{}:{};CFG[_0x49e67f(0x28e)+_0x49e67f(0x203)]=typeof _0x13e28b[_0x49e67f(0x28e)+_0x49e67f(0x203)]!==_0x49e67f(0x266)?!!_0x13e28b[_0x49e67f(0x28e)+_0x49e67f(0x203)]:CFG[_0x49e67f(0x28e)+_0x49e67f(0x203)];}catch(_0x51e2fc){warn(name+(_0x49e67f(0x222)+_0x49e67f(0x1f1)+'r:\x20')+(_0x51e2fc?.[_0x49e67f(0x1f0)]||_0x51e2fc));}}try{hotReloadConfig&&hotReloadConfig(()=>{refreshConfig();});}catch(_0x5d9885){warn(name+(_0x4946d8(0x217)+_0x4946d8(0x24c)+_0x4946d8(0x249)+_0x4946d8(0x22d))+(_0x5d9885?.[_0x4946d8(0x1f0)]||_0x5d9885));}refreshConfig();async function ensurePrefsTable(){const _0x4a8069=_0x4946d8;try{let _0x5ddf3c=[];try{const _0x176529=await db[_0x4a8069(0x26b)](_0x4a8069(0x1d3)+_0x4a8069(0x289)+_0x4a8069(0x1ff)+_0x4a8069(0x1e1));_0x5ddf3c=(_0x176529||[])[_0x4a8069(0x23a)](_0x342784=>_0x342784[_0x4a8069(0x20b)]);}catch(_0x7097d6){_0x5ddf3c=[];}if(!_0x5ddf3c[_0x4a8069(0x1f5)])await db[_0x4a8069(0x1d2)](_0x4a8069(0x1d0)+'LE\x20IF\x20NOT\x20'+_0x4a8069(0x277)+_0x4a8069(0x213)+'efs\x20(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20key\x20TE'+_0x4a8069(0x282)+_0x4a8069(0x1fa)+'\x20\x20\x20\x20value\x20'+_0x4a8069(0x25f)+_0x4a8069(0x220)+'\x20\x20\x20updated'+_0x4a8069(0x28c)+_0x4a8069(0x214)+_0x4a8069(0x23d)),_0x5ddf3c=[_0x4a8069(0x27e),_0x4a8069(0x1fd),_0x4a8069(0x231)];else{if(!_0x5ddf3c[_0x4a8069(0x25b)](_0x4a8069(0x231)))try{await db[_0x4a8069(0x201)](_0x4a8069(0x238)+_0x4a8069(0x1ce)+_0x4a8069(0x209)+'DD\x20COLUMN\x20'+_0x4a8069(0x231)+_0x4a8069(0x223)+'EFAULT\x200');}catch(_0x4c136c){warn(name+(_0x4a8069(0x24b)+_0x4a8069(0x248)+_0x4a8069(0x28f)+'umn:\x20')+(_0x4c136c?.[_0x4a8069(0x1f0)]||_0x4c136c));}}try{const _0x3c93b9=await db[_0x4a8069(0x22f)]('SELECT\x20val'+_0x4a8069(0x1ee)+_0x4a8069(0x224)+_0x4a8069(0x21d)+'\x20key=\x27enab'+_0x4a8069(0x1cf));if(!_0x3c93b9){const _0x561199=Math[_0x4a8069(0x1d6)](Date[_0x4a8069(0x1cc)]()/(0x2563+0xbf0+-0x2d6b));try{await db[_0x4a8069(0x201)](_0x4a8069(0x211)+_0x4a8069(0x1f7)+_0x4a8069(0x1cb)+_0x4a8069(0x271)+',\x20updated_'+_0x4a8069(0x252)+'\x20(\x27enabled'+'\x27,\x27false\x27,'+'\x20?)',[_0x561199]);}catch(_0x1a66d0){try{await db[_0x4a8069(0x201)](_0x4a8069(0x210)+_0x4a8069(0x256)+_0x4a8069(0x21b)+'iew_prefs\x20'+_0x4a8069(0x216)+_0x4a8069(0x1ea)+_0x4a8069(0x258)+_0x4a8069(0x281));}catch(_0x33f179){warn(name+(':\x20failed\x20t'+'o\x20insert\x20d'+_0x4a8069(0x24f)+_0x4a8069(0x247))+(_0x33f179?.[_0x4a8069(0x1f0)]||_0x33f179));}}}}catch(_0x5bde92){warn(name+(_0x4a8069(0x1d9)+_0x4a8069(0x24f)+_0x4a8069(0x259)+_0x4a8069(0x215))+(_0x5bde92?.['message']||_0x5bde92));}}catch(_0x470940){warn(name+(_0x4a8069(0x268)+_0x4a8069(0x24d)+_0x4a8069(0x1d4))+(_0x470940?.[_0x4a8069(0x1f0)]||_0x470940));throw _0x470940;}}async function readEnabledFromDb(){const _0x4a245e=_0x4946d8;try{const _0x12fc87=await db[_0x4a245e(0x22f)](_0x4a245e(0x239)+_0x4a245e(0x1ee)+'atusview_p'+_0x4a245e(0x21d)+_0x4a245e(0x235)+_0x4a245e(0x1e9)+'\x201');if(!_0x12fc87)return![];const _0x1984a1=String(_0x12fc87[_0x4a245e(0x1fd)])['toLowerCas'+'e']();return _0x1984a1===_0x4a245e(0x1f3)||_0x1984a1==='1';}catch(_0x1765e0){return warn(name+(_0x4a245e(0x21e)+_0x4a245e(0x1e7)+_0x4a245e(0x1f2))+(_0x1765e0?.[_0x4a245e(0x1f0)]||_0x1765e0)),![];}}async function saveEnabledToDb(_0x4d2a74){const _0xa65b4a=_0x4946d8;try{const _0xb88ae9=_0x4d2a74?_0xa65b4a(0x1f3):_0xa65b4a(0x1cd),_0x40e205=Math[_0xa65b4a(0x1d6)](Date[_0xa65b4a(0x1cc)]()/(-0x1514+0x591+-0x679*-0x3));return await db['run'](_0xa65b4a(0x211)+_0xa65b4a(0x1f7)+_0xa65b4a(0x1cb)+'key,\x20value'+_0xa65b4a(0x241)+_0xa65b4a(0x252)+_0xa65b4a(0x1eb)+_0xa65b4a(0x261)+'\x20\x20\x20\x20\x20ON\x20CO'+'NFLICT(key'+_0xa65b4a(0x276)+'E\x20SET\x20valu'+_0xa65b4a(0x246)+_0xa65b4a(0x1e0)+_0xa65b4a(0x245)+_0xa65b4a(0x284)+_0xa65b4a(0x243),[_0xb88ae9,_0x40e205]),!![];}catch(_0x58da3b){const _0x461a67=String(_0x58da3b?.['message']||'')['toLowerCas'+'e']();if(_0x461a67[_0xa65b4a(0x25b)](_0xa65b4a(0x275)+_0xa65b4a(0x250))||_0x461a67[_0xa65b4a(0x25b)](_0xa65b4a(0x26e)))try{return await db[_0xa65b4a(0x201)](_0xa65b4a(0x210)+'REPLACE\x20IN'+_0xa65b4a(0x21b)+'iew_prefs\x20'+'(key,\x20valu'+_0xa65b4a(0x1ea)+_0xa65b4a(0x258)+_0xa65b4a(0x229),[_0x4d2a74?_0xa65b4a(0x1f3):_0xa65b4a(0x1cd)]),!![];}catch(_0xf93af7){return warn(name+(_0xa65b4a(0x287)+_0xa65b4a(0x25a)+_0xa65b4a(0x23c)+_0xa65b4a(0x1e5))+(_0xf93af7?.['message']||_0xf93af7)),![];}return warn(name+(_0xa65b4a(0x287)+_0xa65b4a(0x283)+_0xa65b4a(0x267))+(_0x58da3b?.[_0xa65b4a(0x1f0)]||_0x58da3b)),![];}}function formatTimestamp(_0x589a6f=Date[_0x4946d8(0x1cc)](),_0xe03558=DEFAULT_TIMEZONE){const _0x3770a6=_0x4946d8;try{const _0x62a653=DateTime[_0x3770a6(0x232)](_0x589a6f)[_0x3770a6(0x230)](_0xe03558);if(!_0x62a653[_0x3770a6(0x233)])return new Date(_0x589a6f)['toLocaleSt'+_0x3770a6(0x22e)]();return _0x62a653[_0x3770a6(0x285)+_0x3770a6(0x22e)](DateTime['DATETIME_M'+_0x3770a6(0x27b)+_0x3770a6(0x206)])+'\x20('+_0x62a653['zoneName']+')';}catch(_0x4dfbc1){return new Date(_0x589a6f)[_0x3770a6(0x285)+_0x3770a6(0x22e)]();}}async function onStatus(_0x251845){const _0x24e7d2=_0x4946d8;try{if(shuttingDown||!_0x251845||!_0x251845['key'])return;refreshConfig();const _0x2f4348=await readEnabledFromDb();if(!_0x2f4348)return;const _0x1de66f=_0x251845['key'][_0x24e7d2(0x227)+'t']||_0x251845['sender'];if(!_0x1de66f){warn(name+(':\x20received'+'\x20status\x20ev'+_0x24e7d2(0x240)+_0x24e7d2(0x251)+_0x24e7d2(0x20c)));return;}const _0x29ef80=formatTimestamp(Date[_0x24e7d2(0x1cc)](),DEFAULT_TIMEZONE);info(name+(_0x24e7d2(0x244)+'tatus\x20from'+'\x20')+_0x1de66f+'\x20at\x20'+_0x29ef80);try{const _0x506d2e=botRef?.[_0x24e7d2(0x280)]||botRef;typeof _0x506d2e?.['readMessag'+'es']===_0x24e7d2(0x207)?await _0x506d2e[_0x24e7d2(0x28a)+'es']([_0x251845[_0x24e7d2(0x27e)]]):warn(name+(':\x20readMess'+_0x24e7d2(0x21f)+_0x24e7d2(0x28b)+_0x24e7d2(0x202)+'k'));}catch(_0x583681){warn(name+(_0x24e7d2(0x24b)+_0x24e7d2(0x22a)+_0x24e7d2(0x242)+_0x24e7d2(0x1e2))+(_0x583681?.[_0x24e7d2(0x1f0)]||_0x583681));}}catch(_0x38da6a){warn(name+(':\x20onStatus'+'\x20handler\x20e'+'rror:\x20')+(_0x38da6a?.[_0x24e7d2(0x1f0)]||_0x38da6a));}}function _0x3f24(){const _0x299608=['EXISTS\x20sta','2.0.0',']\x20disabled','extendedTe','ED_WITH_SE','2336856DXqaoE','1035022ATJsGj','key','o\x20attach\x20\x27','sock',',\x27false\x27)','XT\x20PRIMARY','ledToDb\x20er','xcluded.up','toLocaleSt','ponseMessa',':\x20saveEnab','atus','le_info(\x27s','readMessag','ion\x20not\x20fo','_at\x20INTEGE','stener:\x20','AUTOVIEWST','ted_at\x20col','state','conversati','ew_prefs\x20(','now','false','E\x20statusvi','led\x27','CREATE\x20TAB','caption','exec','PRAGMA\x20tab','rror:\x20','o\x20enable','floor',':\x20initiali','3182373FgUXlM',':\x20ensure\x20d','stening\x20fo','ble\x20for\x20co','wId','193980QLfvCb',':\x20DB\x20init\x20','has','.value,\x20up','prefs\x27)','d:\x20','listRespon','\x20off|disab','led:\x20',':\x20no\x20sendM','ledFromDb\x20','failed:\x20','led\x27\x20LIMIT','e)\x20VALUES\x20','\x20(\x27enabled','✅\x20ENABLED','fromMe','ue\x20FROM\x20st','able).','message','onfig\x20erro','error:\x20','true','4217210MuzKMQ','length','text','O\x20statusvi','2124KZbPiI','videoMessa','\x20KEY,\x0a\x20\x20\x20\x20',':\x20cleanup\x20','status','value','trim','tatusview_','remoteJid','run','und\x20on\x20soc','ATUS','le\x20\x20->\x20dis','split','CONDS','function','selectedRo','ew_prefs\x20A','o\x20disable','name','ant',']\x20failed\x20t','autoviewst','off','INSERT\x20OR\x20','INSERT\x20INT','sendMessag','tusview_pr','R\x20DEFAULT\x20','ailed:\x20','(key,\x20valu',':\x20hotReloa','singleSele','\x0aTimezone:','isCommand','TO\x20statusv','r\x20\x27status\x27','refs\x20WHERE',':\x20readEnab','ages\x20funct','ULL,\x0a\x20\x20\x20\x20\x20','ID\x20unavail',':\x20refreshC','\x20INTEGER\x20D','atusview_p','\x20status\x20\x20\x20',':\x20onMessag','participan','status\x27\x20li',',\x20?)','o\x20mark\x20sta','\x20on|enable','robi','\x20failed:\x20','ring','get','setZone','updated_at','fromMillis','isValid','selectedBu','\x20key=\x27enab','removeList','seMessage','ALTER\x20TABL','SELECT\x20val','map','ble\x0a','llback\x20fai','0\x0a\x20\x20\x20\x20\x20\x20);','ener','\x20\x20\x20\x20->\x20ena','ent\x20with\x20n',',\x20updated_','tus\x20as\x20rea','dated_at',':\x20viewed\x20s','dated_at=e','e=excluded','bled\x20row:\x20','o\x20add\x20upda','gistration','7vcICpk',':\x20failed\x20t','dConfig\x20re','efsTable\x20e','buttonsRes','efault\x20ena','umn','o\x20particip','at)\x20VALUES','essage\x20met','hod\x20availa','w\x20state','REPLACE\x20IN','zed\x20and\x20li','(\x27enabled\x27','bled\x20row\x20f','ledToDb\x20fa','includes',':\x20cleaned\x20','xtMessage','ner\x20(bot\x20J','TEXT\x20NOT\x20N','ttonId','\x27,\x20?,\x20?)\x0a\x20','toLowerCas','ctReply','eply\x20to\x20ow','1174548yueNhT','undefined','ror:\x20',':\x20ensurePr','wer\x0a\x0aState','catch','all','104392jZaFXE','able\x0a','no\x20column','imageMessa','\x20\x20\x20\x20->\x20sho','key,\x20value','Africa/Nai','\x20bot\x20insta','irmation\x20f','has\x20no\x20col',')\x20DO\x20UPDAT'];_0x3f24=function(){return _0x299608;};return _0x3f24();}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0xb23+-0x9*0x1fd+0xd*0x23e)*(0x9d*-0x27+-0x101*0x1e+0x39f1);function markCmdProcessed(_0x223a61){const _0x448ebd=_0x4946d8;if(!_0x223a61)return;if(processedCmdKeys[_0x448ebd(0x1df)](_0x223a61))try{clearTimeout(processedCmdKeys[_0x448ebd(0x22f)](_0x223a61));}catch(_0x225208){};const _0xd6180a=setTimeout(()=>processedCmdKeys['delete'](_0x223a61),CMD_DEDUPE_TTL_MS);processedCmdKeys['set'](_0x223a61,_0xd6180a);}function isCmdProcessed(_0x43c647){const _0x120b21=_0x4946d8;return _0x43c647&&processedCmdKeys[_0x120b21(0x1df)](_0x43c647);}export async function onMessage(_0x3ad067,_0x1d35f5){const _0x477e7a=_0x4946d8;try{if(!_0x3ad067||!_0x3ad067[_0x477e7a(0x27e)]||!_0x3ad067[_0x477e7a(0x1f0)]||!_0x3ad067[_0x477e7a(0x21a)])return;if(isJidGroup(_0x3ad067[_0x477e7a(0x27e)][_0x477e7a(0x200)]))return;const _0x39f30a=_0x3ad067[_0x477e7a(0x27e)][_0x477e7a(0x1ed)],_0x55a427=await isSudo(botRef,_0x3ad067)['catch'](()=>![]);if(!_0x39f30a&&!_0x55a427)return;let _0x1de82f;if(_0x39f30a){_0x1de82f=getBotJid();if(!_0x1de82f){warn(name+(':\x20cannot\x20r'+_0x477e7a(0x264)+_0x477e7a(0x25e)+_0x477e7a(0x221)+_0x477e7a(0x1ef)));return;}}else _0x1de82f=_0x3ad067[_0x477e7a(0x27e)][_0x477e7a(0x200)];const _0x42b217=String(_0x3ad067[_0x477e7a(0x27e)][_0x477e7a(0x200)]||'')+'::'+String(_0x3ad067[_0x477e7a(0x27e)]['id']||_0x3ad067['key'][_0x477e7a(0x227)+'t']||'');if(isCmdProcessed(_0x42b217))return;markCmdProcessed(_0x42b217);const _0x475126=typeof _0x3ad067[_0x477e7a(0x1f6)]==='string'&&_0x3ad067[_0x477e7a(0x1f6)][_0x477e7a(0x1fe)]()[_0x477e7a(0x1f5)]?_0x3ad067[_0x477e7a(0x1f6)][_0x477e7a(0x1fe)]():function _0x3d5d41(_0x43e130){const _0xc83ae2=_0x477e7a;if(!_0x43e130||!_0x43e130[_0xc83ae2(0x1f0)])return'';const _0x4873ce=_0x43e130[_0xc83ae2(0x1f0)];if(_0x4873ce[_0xc83ae2(0x291)+'on'])return _0x4873ce[_0xc83ae2(0x291)+'on'];if(_0x4873ce['extendedTe'+'xtMessage']?.[_0xc83ae2(0x1f6)])return _0x4873ce[_0xc83ae2(0x27a)+_0xc83ae2(0x25d)]['text'];if(_0x4873ce[_0xc83ae2(0x26f)+'ge']?.[_0xc83ae2(0x1d1)])return _0x4873ce[_0xc83ae2(0x26f)+'ge'][_0xc83ae2(0x1d1)];if(_0x4873ce[_0xc83ae2(0x1f9)+'ge']?.[_0xc83ae2(0x1d1)])return _0x4873ce['videoMessa'+'ge'][_0xc83ae2(0x1d1)];if(_0x4873ce['buttonsRes'+_0xc83ae2(0x286)+'ge']?.[_0xc83ae2(0x234)+_0xc83ae2(0x260)])return _0x4873ce[_0xc83ae2(0x24e)+_0xc83ae2(0x286)+'ge'][_0xc83ae2(0x234)+_0xc83ae2(0x260)];if(_0x4873ce[_0xc83ae2(0x1e3)+_0xc83ae2(0x237)]?.[_0xc83ae2(0x218)+_0xc83ae2(0x263)]?.['selectedRo'+_0xc83ae2(0x1dc)])return _0x4873ce[_0xc83ae2(0x1e3)+_0xc83ae2(0x237)][_0xc83ae2(0x218)+_0xc83ae2(0x263)][_0xc83ae2(0x208)+_0xc83ae2(0x1dc)];return'';}(_0x3ad067)||'';if(!_0x475126)return;const _0xb525ab=(_0x475126[_0x477e7a(0x205)](/\r?\n/)[-0x1fe1*-0x1+-0xa01+-0xc8*0x1c]||'')[_0x477e7a(0x1fe)](),_0x39d18c=_0xb525ab[_0x477e7a(0x205)](/\s+/),_0x137537=(_0x39d18c[0x7e0+0x1*-0x1849+-0x1*-0x1069]||'')[_0x477e7a(0x262)+'e']();if(!commands[_0x477e7a(0x25b)](_0x137537))return;const _0x329716=(_0x39d18c[0x34c*0x1+0x1253*0x1+-0x159e]||'')['toLowerCas'+'e']();if(['on','enable',_0x477e7a(0x1f3),'1'][_0x477e7a(0x25b)](_0x329716)){const _0x44465d=await saveEnabledToDb(!![]);if(_0x44465d)await sendConfirmation(_0x1de82f,'['+name+']\x20enabled');else await sendConfirmation(_0x1de82f,'['+name+(_0x477e7a(0x20d)+_0x477e7a(0x1d5)));return;}if([_0x477e7a(0x20f),'disable','false','0'][_0x477e7a(0x25b)](_0x329716)){const _0x4855fe=await saveEnabledToDb(![]);if(_0x4855fe)await sendConfirmation(_0x1de82f,'['+name+_0x477e7a(0x279));else await sendConfirmation(_0x1de82f,'['+name+(']\x20failed\x20t'+_0x477e7a(0x20a)));return;}if(_0x329716==='status'||_0x329716===_0x477e7a(0x290)||!_0x329716){const _0x5dd069=await readEnabledFromDb(),_0xded173=_0x5dd069?_0x477e7a(0x1ec):'❌\x20DISABLED';await sendConfirmation(_0x1de82f,'Status\x20Vie'+_0x477e7a(0x269)+':\x20'+_0xded173+(_0x477e7a(0x219)+'\x20')+DEFAULT_TIMEZONE);return;}await sendConfirmation(_0x1de82f,'Usage\x20(PM\x20'+'only):\x0a'+('\x20'+_0x137537+(_0x477e7a(0x22b)+_0x477e7a(0x23f)+_0x477e7a(0x23b)))+('\x20'+_0x137537+(_0x477e7a(0x1e4)+_0x477e7a(0x204)+_0x477e7a(0x26d)))+('\x20'+_0x137537+(_0x477e7a(0x225)+_0x477e7a(0x270)+_0x477e7a(0x255))));}catch(_0x2edb9b){warn(name+(_0x477e7a(0x226)+'e\x20error:\x20')+(_0x2edb9b?.['message']||_0x2edb9b));}}async function sendConfirmation(_0x1b98db,_0x474a14){const _0x4736d4=_0x4946d8;try{if(!_0x1b98db)return;if(botRef&&botRef[_0x4736d4(0x280)]&&typeof botRef['sock'][_0x4736d4(0x212)+'e']===_0x4736d4(0x207))await botRef[_0x4736d4(0x280)][_0x4736d4(0x212)+'e'](_0x1b98db,{'text':_0x474a14});else botRef&&typeof botRef[_0x4736d4(0x212)+'e']===_0x4736d4(0x207)?await botRef[_0x4736d4(0x212)+'e'](_0x1b98db,{'text':_0x474a14}):warn(name+(_0x4736d4(0x1e6)+_0x4736d4(0x253)+_0x4736d4(0x254)+_0x4736d4(0x1db)+'nfirmation'));}catch(_0x5af378){warn(name+(':\x20sendConf'+_0x4736d4(0x274)+'ailed:\x20')+(_0x5af378?.[_0x4736d4(0x1f0)]||_0x5af378));}}export async function initialize(_0x273eb0){const _0x2acb14=_0x4946d8;if(!_0x273eb0)throw new Error(name+('.initializ'+'e\x20requires'+_0x2acb14(0x273)+'nce'));botRef=_0x273eb0,shuttingDown=![],refreshConfig(),await ensurePrefsTable()[_0x2acb14(0x26a)](_0x5b9b93=>{const _0x31eca1=_0x2acb14;warn(name+(_0x31eca1(0x1de)+_0x31eca1(0x1e8))+(_0x5b9b93?.[_0x31eca1(0x1f0)]||_0x5b9b93));});try{botRef['on']('status',onStatus);}catch(_0x596de7){error(name+(_0x2acb14(0x24b)+_0x2acb14(0x27f)+_0x2acb14(0x228)+_0x2acb14(0x28d))+(_0x596de7?.['message']||_0x596de7));}info(name+(_0x2acb14(0x1d7)+_0x2acb14(0x257)+_0x2acb14(0x1da)+_0x2acb14(0x21c)+'\x20events.'));}export async function cleanup(){const _0x5937c5=_0x4946d8;try{botRef&&typeof botRef['removeList'+_0x5937c5(0x23e)]===_0x5937c5(0x207)&&botRef[_0x5937c5(0x236)+_0x5937c5(0x23e)](_0x5937c5(0x1fc),onStatus),shuttingDown=!![];}catch(_0x20decc){warn(name+(_0x5937c5(0x1fb)+'error:\x20')+(_0x20decc?.['message']||_0x20decc));}finally{botRef=null,info(name+(_0x5937c5(0x25c)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};