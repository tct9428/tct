const _0x3ec192=_0x4977;function _0x4977(_0x3e703a,_0x3fd578){const _0x579917=_0x3034();return _0x4977=function(_0x23b014,_0x2b9911){_0x23b014=_0x23b014-(-0x1ec7+-0x7*0x33b+0x3728);let _0x428578=_0x579917[_0x23b014];return _0x428578;},_0x4977(_0x3e703a,_0x3fd578);}(function(_0x2ff188,_0x397edc){const _0x528c19=_0x4977,_0x843842=_0x2ff188();while(!![]){try{const _0x11c971=-parseInt(_0x528c19(0x274))/(-0x8ef*-0x1+-0x1532+0xc44)+parseInt(_0x528c19(0x1fe))/(0x826+0x1f4f*-0x1+-0x172b*-0x1)+-parseInt(_0x528c19(0x1dc))/(-0x15d*0xe+-0x1d*-0xbb+-0x216)+parseInt(_0x528c19(0x256))/(0x86*-0x11+0x4f*-0x6a+0x29a0)*(parseInt(_0x528c19(0x227))/(-0x26c3*-0x1+-0x4fe+-0x21c0))+-parseInt(_0x528c19(0x285))/(-0x1f*0xa3+0x24a0+-0x3*0x59f)+-parseInt(_0x528c19(0x1fc))/(0x1c4c+-0x1258+-0x9ed)*(parseInt(_0x528c19(0x213))/(-0x550+-0x1*0xf6a+0x14c2))+parseInt(_0x528c19(0x229))/(-0xf12+-0xf98+0x1eb3);if(_0x11c971===_0x397edc)break;else _0x843842['push'](_0x843842['shift']());}catch(_0x294450){_0x843842['push'](_0x843842['shift']());}}}(_0x3034,0x1b75d+-0x331f7+0x455fe));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name=_0x3ec192(0x235)+'wer';export const version='1.0.4';export const priority=-0x35a+0x7b7*0x2+-0x1*0xc0f;function _0x3034(){const _0x2e3c3e=['ew_prefs\x20A','umn:\x20','fromMillis','selectedBu',':\x20DB\x20init\x20','imageMessa','DATETIME_M','dated_at=e','trim','floor','dConfig\x20re','atusview_p','7cRNKgb','0\x0a\x20\x20\x20\x20\x20\x20);','466456eyJjTT','led\x20to\x20dis','(key,\x20valu','tatusview_','REPLACE\x20IN','key','status@bro','psert','name','ULL,\x0a\x20\x20\x20\x20\x20',':\x20onMessag','led:\x20','disable\x20\x20-','led\x20to\x20ena','tus\x20as\x20rea','autoviewst','ue\x20FROM\x20st','EFAULT\x200',':\x20messages',':\x20no\x20sendM','\x20\x20\x20\x20key\x20TE','1764632JtfEvd',':\x20cleanup\x20','includes','off','readMessag','robi','key,\x20value',':\x20cannot\x20r','refs\x20WHERE','videoMessa','lize\x20requi','wer\x0a\x0aState','atus','us\x20\x20\x20\x20\x20\x20\x20-','e)\x20VALUES\x20','o\x20insert\x20d','o\x20add\x20upda','\x27,\x20?,\x20?)\x0a\x20','get','at)\x20VALUES','23105xUGPaY','toLowerCas','3521574EuairA','led\x27','INSERT\x20OR\x20','stance','ring','Africa/Nai','seMessage','eply\x20to\x20ow','ledToDb\x20fa','\x20?)','Status\x20Vie','ttonId','status-vie','Usage\x20(PM\x20','singleSele','dated_at','set','bled\x20row:\x20','e=excluded','tatus]\x20fai','\x27,\x27false\x27,','conversati','EXISTS\x20sta','tatus]\x20ena','bled','\x20autoviews','zed.','AUTOVIEWST','onfig\x20erro',':\x20initiali','\x20\x20\x20\x20value\x20','run','xcluded.up','length',')\x20DO\x20UPDAT','LE\x20IF\x20NOT\x20','.upsert\x20ha','DD\x20COLUMN\x20','\x20at\x20','enable','message','E\x20SET\x20valu','ledFromDb\x20','has','gistration','188OHIRMI','remoteJid','ID\x20unavail','op\x20error:\x20','participan','\x20\x20\x20updated','e\x20error:\x20','\x20(\x27enabled','tatus\x20off|','string','ATUS','>\x20show\x20sta','\x20key=\x27enab','\x20failed:\x20','state','TEXT\x20NOT\x20N','CONDS','efault\x20ena','led\x27\x20LIMIT','wer.initia','r:\x20','able).','CREATE\x20TAB','.value,\x20up','text','false','listRespon','TO\x20statusv','tatus]\x20dis',':\x20readEnab','88981TaaQzw','hod\x20availa','isValid','ctReply','ble',':\x20saveEnab','setZone','undefined','only):\x0a','failed:\x20','_at\x20INTEGE','selectedRo','prefs\x27)','O\x20statusvi',',\x20updated_','ew_prefs\x20(','\x0aTimezone:','867012sUQzGn','iew_prefs\x20','able','ted_at\x20col','status','has\x20no\x20col','error:\x20','sock','ENABLED','SELECT\x20val','[autoviews','ror:\x20','isCommand','all','tatus\x20on|e','ponseMessa','zoneName','E\x20statusvi','ailed:\x20','INSERT\x20INT','essage\x20met','extendedTe','caption','split','llback\x20fai','function','true','no\x20column',':\x20ensurePr','\x20INTEGER\x20D',':\x20inner\x20lo','wId',':\x20ensure\x20d','ED_WITH_SE','601209vmuToh','updated_at',':\x20cleaned\x20','PRAGMA\x20tab','irmation\x20f','tusview_pr','sendMessag','toLocaleSt','xtMessage','(\x27enabled\x27','abled','efsTable\x20e','delete','nable\x20\x20\x20\x20-','nfirmation','\x20KEY,\x0a\x20\x20\x20\x20',':\x20hotReloa','read','exec','now'];_0x3034=function(){return _0x2e3c3e;};return _0x3034();}export const configKeys=[_0x3ec192(0x244)+_0x3ec192(0x260)];export const commands=[_0x3ec192(0x20d)+_0x3ec192(0x21f)];let botRef=null,DEFAULT_TIMEZONE=_0x3ec192(0x22e)+_0x3ec192(0x218),CFG={'AUTOVIEWSTATUS':![]},shuttingDown=![],messageHandler=null;function refreshConfig(){const _0x20f46d=_0x3ec192;try{const _0x3af3dd=typeof getConfig===_0x20f46d(0x1d3)?getConfig()||{}:{};CFG[_0x20f46d(0x244)+'ATUS']=typeof _0x3af3dd[_0x20f46d(0x244)+_0x20f46d(0x260)]!==_0x20f46d(0x27b)?!!_0x3af3dd[_0x20f46d(0x244)+_0x20f46d(0x260)]:CFG[_0x20f46d(0x244)+_0x20f46d(0x260)];}catch(_0xf9fed3){warn(name+(':\x20refreshC'+_0x20f46d(0x245)+_0x20f46d(0x26a))+(_0xf9fed3?.[_0x20f46d(0x251)]||_0xf9fed3));}}try{hotReloadConfig&&hotReloadConfig(()=>{refreshConfig();});}catch(_0x107fb5){warn(name+(_0x3ec192(0x1ec)+_0x3ec192(0x1fa)+_0x3ec192(0x255)+_0x3ec192(0x263))+(_0x107fb5?.[_0x3ec192(0x251)]||_0x107fb5));}refreshConfig();async function ensurePrefsTable(){const _0x424a43=_0x3ec192;try{let _0x80ae6=[];try{const _0x15d84a=await db[_0x424a43(0x1c7)](_0x424a43(0x1df)+'le_info(\x27s'+_0x424a43(0x201)+_0x424a43(0x280));_0x80ae6=(_0x15d84a||[])['map'](_0x698bc8=>_0x698bc8[_0x424a43(0x206)]);}catch(_0x48a824){_0x80ae6=[];}if(!_0x80ae6['length'])await db[_0x424a43(0x1ee)](_0x424a43(0x26c)+_0x424a43(0x24c)+_0x424a43(0x23f)+_0x424a43(0x1e1)+'efs\x20(\x0a\x20\x20\x20\x20'+_0x424a43(0x212)+'XT\x20PRIMARY'+_0x424a43(0x1eb)+_0x424a43(0x247)+_0x424a43(0x265)+_0x424a43(0x207)+_0x424a43(0x25b)+_0x424a43(0x27e)+'R\x20DEFAULT\x20'+_0x424a43(0x1fd)),_0x80ae6=[_0x424a43(0x203),'value','updated_at'];else{if(!_0x80ae6[_0x424a43(0x215)](_0x424a43(0x1dd)))try{await db[_0x424a43(0x248)]('ALTER\x20TABL'+_0x424a43(0x1cb)+_0x424a43(0x1f0)+_0x424a43(0x24e)+_0x424a43(0x1dd)+_0x424a43(0x1d7)+_0x424a43(0x20f));}catch(_0x47539c){warn(name+(':\x20failed\x20t'+_0x424a43(0x223)+_0x424a43(0x288)+_0x424a43(0x1f1))+(_0x47539c?.[_0x424a43(0x251)]||_0x47539c));}}try{const _0x779332=await db[_0x424a43(0x225)](_0x424a43(0x28e)+_0x424a43(0x20e)+_0x424a43(0x1fb)+'refs\x20WHERE'+_0x424a43(0x262)+_0x424a43(0x22a));if(!_0x779332){const _0x25fecf=Math[_0x424a43(0x1f9)](Date[_0x424a43(0x1ef)]()/(0x5*0x628+-0x1d87*-0x1+0x12cd*-0x3));try{await db[_0x424a43(0x248)](_0x424a43(0x1cd)+_0x424a43(0x281)+_0x424a43(0x283)+_0x424a43(0x219)+_0x424a43(0x282)+_0x424a43(0x226)+_0x424a43(0x25d)+_0x424a43(0x23d)+_0x424a43(0x232),[_0x25fecf]);}catch(_0x41b057){try{await db[_0x424a43(0x248)](_0x424a43(0x22b)+_0x424a43(0x202)+'TO\x20statusv'+_0x424a43(0x286)+_0x424a43(0x200)+_0x424a43(0x221)+_0x424a43(0x1e5)+',\x27false\x27)');}catch(_0x3ba2d2){warn(name+(':\x20failed\x20t'+_0x424a43(0x222)+'efault\x20ena'+_0x424a43(0x23a))+(_0x3ba2d2?.[_0x424a43(0x251)]||_0x3ba2d2));}}}}catch(_0x5d1290){warn(name+(_0x424a43(0x1da)+_0x424a43(0x267)+'bled\x20row\x20f'+_0x424a43(0x1cc))+(_0x5d1290?.[_0x424a43(0x251)]||_0x5d1290));}}catch(_0x1b7675){warn(name+(_0x424a43(0x1d6)+_0x424a43(0x1e7)+'rror:\x20')+(_0x1b7675?.[_0x424a43(0x251)]||_0x1b7675));throw _0x1b7675;}}async function readEnabledFromDb(){const _0x5acb55=_0x3ec192;try{const _0x556ef8=await db[_0x5acb55(0x225)](_0x5acb55(0x28e)+'ue\x20FROM\x20st'+_0x5acb55(0x1fb)+_0x5acb55(0x21b)+_0x5acb55(0x262)+_0x5acb55(0x268)+'\x201');if(!_0x556ef8)return![];const _0x34d1cc=String(_0x556ef8['value'])[_0x5acb55(0x228)+'e']();return _0x34d1cc==='true'||_0x34d1cc==='1';}catch(_0x39f663){return warn(name+(_0x5acb55(0x273)+_0x5acb55(0x253)+_0x5acb55(0x28b))+(_0x39f663?.['message']||_0x39f663)),![];}}async function saveEnabledToDb(_0x34fd47){const _0x75ac9f=_0x3ec192;try{const _0x176488=_0x34fd47?_0x75ac9f(0x1d4):'false',_0x3a11aa=Math['floor'](Date[_0x75ac9f(0x1ef)]()/(0x1b31*0x1+0x95d+0x4aa*-0x7));return await db['run'](_0x75ac9f(0x1cd)+_0x75ac9f(0x281)+_0x75ac9f(0x283)+_0x75ac9f(0x219)+',\x20updated_'+_0x75ac9f(0x226)+_0x75ac9f(0x25d)+_0x75ac9f(0x224)+'\x20\x20\x20\x20\x20ON\x20CO'+'NFLICT(key'+_0x75ac9f(0x24b)+_0x75ac9f(0x252)+_0x75ac9f(0x23b)+_0x75ac9f(0x26d)+_0x75ac9f(0x1f7)+_0x75ac9f(0x249)+_0x75ac9f(0x238),[_0x176488,_0x3a11aa]),!![];}catch(_0x5c27f0){const _0x5cc03c=String(_0x5c27f0?.[_0x75ac9f(0x251)]||'')[_0x75ac9f(0x228)+'e']();if(_0x5cc03c['includes'](_0x75ac9f(0x28a)+'umn')||_0x5cc03c[_0x75ac9f(0x215)](_0x75ac9f(0x1d5)))try{return await db[_0x75ac9f(0x248)](_0x75ac9f(0x22b)+_0x75ac9f(0x202)+_0x75ac9f(0x271)+_0x75ac9f(0x286)+'(key,\x20valu'+_0x75ac9f(0x221)+_0x75ac9f(0x1e5)+',\x20?)',[_0x34fd47?_0x75ac9f(0x1d4):'false']),!![];}catch(_0x18e1bf){return warn(name+(_0x75ac9f(0x279)+_0x75ac9f(0x231)+_0x75ac9f(0x1d2)+_0x75ac9f(0x209))+(_0x18e1bf?.[_0x75ac9f(0x251)]||_0x18e1bf)),![];}return warn(name+(_0x75ac9f(0x279)+'ledToDb\x20er'+_0x75ac9f(0x1c5))+(_0x5c27f0?.[_0x75ac9f(0x251)]||_0x5c27f0)),![];}}function formatTimestamp(_0x3da460=Date[_0x3ec192(0x1ef)](),_0x2f55c6=DEFAULT_TIMEZONE){const _0x4da4f3=_0x3ec192;try{const _0x3587b3=DateTime[_0x4da4f3(0x1f2)](_0x3da460)[_0x4da4f3(0x27a)](_0x2f55c6);if(!_0x3587b3[_0x4da4f3(0x276)])return new Date(_0x3da460)[_0x4da4f3(0x1e3)+_0x4da4f3(0x22d)]();return _0x3587b3[_0x4da4f3(0x1e3)+'ring'](DateTime[_0x4da4f3(0x1f6)+_0x4da4f3(0x1db)+_0x4da4f3(0x266)])+'\x20('+_0x3587b3[_0x4da4f3(0x1ca)]+')';}catch(_0x513fdc){return new Date(_0x3da460)[_0x4da4f3(0x1e3)+_0x4da4f3(0x22d)]();}}function createMessageHandler(){return async function _0x55f6ac(_0x23649a){const _0x150e33=_0x4977;try{if(shuttingDown)return;refreshConfig();const _0x3f5b54=await readEnabledFromDb();if(!_0x3f5b54)return;const {messages:_0x3de4a9}=_0x23649a||{};if(!Array['isArray'](_0x3de4a9)||_0x3de4a9[_0x150e33(0x24a)]===0x128c+0xb7*0x29+-0x2fdb)return;for(const _0x108265 of _0x3de4a9){try{if(!_0x108265||!_0x108265[_0x150e33(0x203)])continue;const _0x4b405e=_0x108265[_0x150e33(0x203)][_0x150e33(0x257)]||_0x108265[_0x150e33(0x257)]||'',_0x331176=_0x108265['key'][_0x150e33(0x25a)+'t']||null;if(_0x4b405e!==_0x150e33(0x204)+'adcast'||!_0x331176)continue;const _0x2ae971=formatTimestamp(Date[_0x150e33(0x1ef)](),DEFAULT_TIMEZONE);info(name+(':\x20viewed\x20s'+'tatus\x20from'+'\x20')+_0x331176+_0x150e33(0x24f)+_0x2ae971);try{if(typeof botRef?.[_0x150e33(0x28c)]?.['readMessag'+'es']===_0x150e33(0x1d3))await botRef[_0x150e33(0x28c)][_0x150e33(0x217)+'es']([_0x108265[_0x150e33(0x203)]]);else{if(typeof botRef?.[_0x150e33(0x28c)]?.[_0x150e33(0x1ed)]==='function')await botRef[_0x150e33(0x28c)]['read']([_0x108265[_0x150e33(0x203)]]);else typeof botRef?.[_0x150e33(0x217)+'es']==='function'&&await botRef[_0x150e33(0x217)+'es']([_0x108265[_0x150e33(0x203)]]);}}catch(_0x8d5c33){warn(name+(':\x20failed\x20t'+'o\x20mark\x20sta'+_0x150e33(0x20c)+'d:\x20')+(_0x8d5c33?.[_0x150e33(0x251)]||_0x8d5c33));}}catch(_0xbef7a){warn(name+(_0x150e33(0x1d8)+_0x150e33(0x259))+(_0xbef7a?.[_0x150e33(0x251)]||_0xbef7a));}}}catch(_0x23c8ed){warn(name+(_0x150e33(0x210)+_0x150e33(0x24d)+'ndler\x20erro'+_0x150e33(0x26a))+(_0x23c8ed?.[_0x150e33(0x251)]||_0x23c8ed));}};}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(0x840+-0x218e+-0x196c*-0x1)*(-0x1*-0x241+-0x925+0xacc);function markCmdProcessed(_0x575c09){const _0x2f4eb2=_0x3ec192;if(!_0x575c09)return;if(processedCmdKeys['has'](_0x575c09))try{clearTimeout(processedCmdKeys['get'](_0x575c09));}catch(_0x22cbff){};const _0x57a616=setTimeout(()=>processedCmdKeys[_0x2f4eb2(0x1e8)](_0x575c09),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x2f4eb2(0x239)](_0x575c09,_0x57a616);}function isCmdProcessed(_0x3be599){const _0x4ebfe6=_0x3ec192;return _0x3be599&&processedCmdKeys[_0x4ebfe6(0x254)](_0x3be599);}export async function onMessage(_0xacfe49){const _0x14838c=_0x3ec192;try{if(!_0xacfe49||!_0xacfe49['key']||!_0xacfe49[_0x14838c(0x251)]||!_0xacfe49[_0x14838c(0x1c6)])return;if(isJidGroup(_0xacfe49[_0x14838c(0x203)][_0x14838c(0x257)]))return;const _0x42d2fa=_0xacfe49['key']['fromMe'],_0x42cbd4=await isSudo(botRef,_0xacfe49)['catch'](()=>![]);if(!_0x42d2fa&&!_0x42cbd4)return;let _0x2d5a18;if(_0x42d2fa){_0x2d5a18=getBotJid();if(!_0x2d5a18){warn(name+(_0x14838c(0x21a)+_0x14838c(0x230)+'ner\x20(bot\x20J'+_0x14838c(0x258)+_0x14838c(0x26b)));return;}}else _0x2d5a18=_0xacfe49[_0x14838c(0x203)][_0x14838c(0x257)];const _0x564d60=String(_0xacfe49[_0x14838c(0x203)][_0x14838c(0x257)]||'')+'::'+String(_0xacfe49[_0x14838c(0x203)]['id']||_0xacfe49[_0x14838c(0x203)][_0x14838c(0x25a)+'t']||'');if(isCmdProcessed(_0x564d60))return;markCmdProcessed(_0x564d60);const _0x2e74df=typeof _0xacfe49['text']===_0x14838c(0x25f)&&_0xacfe49[_0x14838c(0x26e)][_0x14838c(0x1f8)]()['length']?_0xacfe49[_0x14838c(0x26e)]['trim']():function _0x3c9072(_0x5a2acd){const _0x5bcfda=_0x14838c;if(!_0x5a2acd||!_0x5a2acd[_0x5bcfda(0x251)])return'';const _0x4d9afd=_0x5a2acd['message'];if(_0x4d9afd[_0x5bcfda(0x23e)+'on'])return _0x4d9afd[_0x5bcfda(0x23e)+'on'];if(_0x4d9afd[_0x5bcfda(0x1cf)+_0x5bcfda(0x1e4)]?.['text'])return _0x4d9afd['extendedTe'+'xtMessage'][_0x5bcfda(0x26e)];if(_0x4d9afd[_0x5bcfda(0x1f5)+'ge']?.['caption'])return _0x4d9afd['imageMessa'+'ge'][_0x5bcfda(0x1d0)];if(_0x4d9afd[_0x5bcfda(0x21c)+'ge']?.[_0x5bcfda(0x1d0)])return _0x4d9afd[_0x5bcfda(0x21c)+'ge'][_0x5bcfda(0x1d0)];if(_0x4d9afd['buttonsRes'+_0x5bcfda(0x1c9)+'ge']?.[_0x5bcfda(0x1f3)+_0x5bcfda(0x234)])return _0x4d9afd['buttonsRes'+_0x5bcfda(0x1c9)+'ge']['selectedBu'+_0x5bcfda(0x234)];if(_0x4d9afd[_0x5bcfda(0x270)+_0x5bcfda(0x22f)]?.['singleSele'+'ctReply']?.[_0x5bcfda(0x27f)+_0x5bcfda(0x1d9)])return _0x4d9afd[_0x5bcfda(0x270)+_0x5bcfda(0x22f)][_0x5bcfda(0x237)+_0x5bcfda(0x277)][_0x5bcfda(0x27f)+_0x5bcfda(0x1d9)];return'';}(_0xacfe49)||'';if(!_0x2e74df)return;const _0x2d6e1a=(_0x2e74df[_0x14838c(0x1d1)](/\r?\n/)[-0x27*0x5f+-0xc2d*-0x1+0x2*0x126]||'')[_0x14838c(0x1f8)](),_0xe8c83=_0x2d6e1a[_0x14838c(0x1d1)](/\s+/),_0x27a916=(_0xe8c83[-0xaa8*-0x2+-0x2396+0xe46]||'')[_0x14838c(0x228)+'e']();if(!commands[_0x14838c(0x215)](_0x27a916))return;const _0x415c14=(_0xe8c83[-0x730+-0x5be+0xcef]||'')['toLowerCas'+'e']();if(['on',_0x14838c(0x250),_0x14838c(0x1d4),'1'][_0x14838c(0x215)](_0x415c14)){const _0x4bface=await saveEnabledToDb(!![]);if(_0x4bface)await sendConfirmation(_0x2d5a18,_0x14838c(0x1c4)+_0x14838c(0x240)+_0x14838c(0x241));else await sendConfirmation(_0x2d5a18,'[autoviews'+_0x14838c(0x23c)+_0x14838c(0x20b)+_0x14838c(0x278));return;}if([_0x14838c(0x216),'disable',_0x14838c(0x26f),'0']['includes'](_0x415c14)){const _0x888d7a=await saveEnabledToDb(![]);if(_0x888d7a)await sendConfirmation(_0x2d5a18,_0x14838c(0x1c4)+_0x14838c(0x272)+_0x14838c(0x1e6));else await sendConfirmation(_0x2d5a18,_0x14838c(0x1c4)+_0x14838c(0x23c)+_0x14838c(0x1ff)+_0x14838c(0x287));return;}if(_0x415c14===_0x14838c(0x289)||_0x415c14===_0x14838c(0x264)||!_0x415c14){const _0x15ac62=await readEnabledFromDb(),_0x4c1a66=_0x15ac62?_0x14838c(0x28d):'DISABLED';await sendConfirmation(_0x2d5a18,_0x14838c(0x233)+_0x14838c(0x21e)+':\x20'+_0x4c1a66+(_0x14838c(0x284)+'\x20')+DEFAULT_TIMEZONE);return;}await sendConfirmation(_0x2d5a18,_0x14838c(0x236)+_0x14838c(0x27c)+('\x20autoviews'+_0x14838c(0x1c8)+_0x14838c(0x1e9)+'>\x20enable\x0a')+(_0x14838c(0x242)+_0x14838c(0x25e)+_0x14838c(0x20a)+'>\x20disable\x0a')+(_0x14838c(0x242)+'tatus\x20stat'+_0x14838c(0x220)+_0x14838c(0x261)+'te'));}catch(_0x3c2bc9){warn(name+(_0x14838c(0x208)+_0x14838c(0x25c))+(_0x3c2bc9?.[_0x14838c(0x251)]||_0x3c2bc9));}}async function sendConfirmation(_0x589c8e,_0x2d8956){const _0x221414=_0x3ec192;try{if(!_0x589c8e)return;if(botRef&&botRef[_0x221414(0x28c)]&&typeof botRef[_0x221414(0x28c)][_0x221414(0x1e2)+'e']===_0x221414(0x1d3))await botRef[_0x221414(0x28c)][_0x221414(0x1e2)+'e'](_0x589c8e,{'text':_0x2d8956});else botRef&&typeof botRef[_0x221414(0x1e2)+'e']===_0x221414(0x1d3)?await botRef[_0x221414(0x1e2)+'e'](_0x589c8e,{'text':_0x2d8956}):warn(name+(_0x221414(0x211)+_0x221414(0x1ce)+_0x221414(0x275)+'ble\x20for\x20co'+_0x221414(0x1ea)));}catch(_0x1af69b){warn(name+(':\x20sendConf'+_0x221414(0x1e0)+_0x221414(0x1cc))+(_0x1af69b?.[_0x221414(0x251)]||_0x1af69b));}}export async function initialize(_0x27cd83){const _0x496592=_0x3ec192;if(!_0x27cd83)throw new Error(_0x496592(0x235)+_0x496592(0x269)+_0x496592(0x21d)+'res\x20bot\x20in'+_0x496592(0x22c));botRef=_0x27cd83,shuttingDown=![],refreshConfig(),await ensurePrefsTable()['catch'](_0x5ffc1d=>{const _0x102fbd=_0x496592;warn(name+(_0x102fbd(0x1f4)+_0x102fbd(0x27d))+(_0x5ffc1d?.[_0x102fbd(0x251)]||_0x5ffc1d));}),messageHandler=createMessageHandler(),startManagedListener({'botRef':botRef,'eventName':'messages.u'+_0x496592(0x205),'handler':messageHandler,'moduleName':name}),info(name+(_0x496592(0x246)+_0x496592(0x243)));}export async function cleanup(){const _0x28fedf=_0x3ec192;try{stopManagedListener(name,'messages.u'+_0x28fedf(0x205)),shuttingDown=!![],messageHandler=null;}catch(_0x344153){warn(name+(_0x28fedf(0x214)+_0x28fedf(0x28b))+(_0x344153?.[_0x28fedf(0x251)]||_0x344153));}finally{botRef=null,info(name+(_0x28fedf(0x1de)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};