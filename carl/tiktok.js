const _0x1ef2e7=_0x27ae;(function(_0x17bda0,_0x5c5c34){const _0x3e3f59=_0x27ae,_0xa284ad=_0x17bda0();while(!![]){try{const _0x42c999=parseInt(_0x3e3f59(0xb2))/(0x1*0x1da+0x6*0x416+0x18d*-0x11)+parseInt(_0x3e3f59(0xab))/(-0x3*0x526+0x179e+-0x82a)+-parseInt(_0x3e3f59(0xe1))/(0x7c4+-0x2398+0x1bd7)*(-parseInt(_0x3e3f59(0xc5))/(-0x35d+-0x12*0x115+0x16db*0x1))+-parseInt(_0x3e3f59(0xc1))/(0x1909+-0x29*-0x6b+-0x6d*0x63)*(parseInt(_0x3e3f59(0xa7))/(-0x17f+0x2419+-0x2294))+parseInt(_0x3e3f59(0xb5))/(0x2e5+0xa50+-0xd2e)+-parseInt(_0x3e3f59(0xd5))/(-0x1766+0x70f*-0x2+-0x1*-0x258c)+parseInt(_0x3e3f59(0xdc))/(0x9ba+-0x23*-0x8b+-0x1cb2)*(parseInt(_0x3e3f59(0xbb))/(0xe*-0x2c0+0x360+0x232a));if(_0x42c999===_0x5c5c34)break;else _0xa284ad['push'](_0xa284ad['shift']());}catch(_0x53a77f){_0xa284ad['push'](_0xa284ad['shift']());}}}(_0x53f6,-0x41616*0x5+-0x6fd7b+0x272ec4));function _0x27ae(_0x54810b,_0x5a2c0d){_0x54810b=_0x54810b-(-0x2*0x10ed+-0x1*0x127a+0x34f6*0x1);const _0x5cc544=_0x53f6();let _0x32f882=_0x5cc544[_0x54810b];return _0x32f882;}import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';import _0x311a80 from'axios';export const name=_0x1ef2e7(0xa6)+'y';export const version=_0x1ef2e7(0xc0);export const priority=-0xc*-0x314+-0x2b*-0x10+-0x2796*0x1;function _0x53f6(){const _0x1b6f09=['tiktok_dow','o\x20download','tiktok-onl','6QOLVOF','ing,\x20pleas','key','nloadable\x20','2078442SOFDkd','message','‚ùå\x20Could\x20no','trim','Tok\x20URL.\x0a\x0a','\x20failed\x20fo','e\x20invalid.','1429134sXQPxz','iktok?url=','data','1065925NUPKXA','ected\x20erro','Link\x20may\x20b','sendMessag','has',']\x20initiali','40rZKCBP','e\x20wait...','tct','tiktok','add','1.0.0','7094655DVGjaP','toLowerCas','download/t','vide\x20a\x20Tik','484HLLiUA','error:\x20','string','remoteJid',']\x20botInsta','BK9','audio','\x0a\x0atct','split',']\x20handler\x20','url',']\x20cleaned\x20','zed\x20succes','video','get','fromMe','5959544nnieYW','ror:\x20','object','text','i.bk9.dev/','bot','result','281025OSkkBu',']\x20Download','catch','includes','r\x20occurred','4689YtIUyS','test','nload','sfully.','edMatch\x20er','\x20content.\x20','jid','content\x20at','dllink','üì•\x20Download','download_u'];_0x53f6=function(){return _0x1b6f09;};return _0x53f6();}export const commands=[_0x1ef2e7(0xbe)];let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x1b4d48=[]){const _0x476be2=_0x1ef2e7;try{const _0x12ba12=new Set((await listSudo())['map'](String));for(const _0x2f6dc9 of _0x1b4d48){if(!_0x2f6dc9?.[_0x476be2(0xe7)]||typeof _0x2f6dc9[_0x476be2(0xe7)]!==_0x476be2(0xc7))continue;const _0x312d31=normalizeToJid(_0x2f6dc9['jid']);if(_0x312d31&&_0x12ba12[_0x476be2(0xb9)](_0x312d31))return _0x312d31;if(_0x12ba12['has'](_0x2f6dc9[_0x476be2(0xe7)]))return _0x2f6dc9[_0x476be2(0xe7)];}}catch(_0x1ec90b){warn('['+name+(']\x20findStor'+_0x476be2(0xe5)+_0x476be2(0xd6))+(_0x1ec90b[_0x476be2(0xac)]||_0x1ec90b));}return null;}function extractDownloadUrl(_0x1890ef){const _0x5e7261=_0x1ef2e7;if(!_0x1890ef)return null;if(typeof _0x1890ef===_0x5e7261(0xc7)&&_0x1890ef['startsWith']('http'))return _0x1890ef;if(typeof _0x1890ef!==_0x5e7261(0xd7))return null;const _0x251db6=[_0x5e7261(0xa3)+'rl',_0x5e7261(0xcf),'HD','hd',_0x5e7261(0xe9),_0x5e7261(0xd2),_0x5e7261(0xcb),_0x5e7261(0xdb),_0x5e7261(0xca)];for(const _0x46720e of _0x251db6){if(_0x1890ef[_0x46720e]){const _0x5ee126=extractDownloadUrl(_0x1890ef[_0x46720e]);if(_0x5ee126)return _0x5ee126;}}return null;}export async function initialize(_0x35f047){const _0x3bbad2=_0x1ef2e7;botInstance=_0x35f047,info('['+name+(_0x3bbad2(0xba)+_0x3bbad2(0xd1)+_0x3bbad2(0xe4)));}export async function cleanup(){const _0x1b23b7=_0x1ef2e7;botInstance=null,respondedMsgIds['clear'](),info('['+name+(_0x1b23b7(0xd0)+'up'));}export async function onMessage(_0x1acf03){const _0x289ab3=_0x1ef2e7;if(!_0x1acf03?.[_0x289ab3(0xa9)]||!_0x1acf03['isCommand'])return;const _0x44c946=_0x1acf03[_0x289ab3(0xa9)]['id'];if(_0x44c946&&respondedMsgIds[_0x289ab3(0xb9)](_0x44c946))return;_0x44c946&&(respondedMsgIds[_0x289ab3(0xbf)](_0x44c946),setTimeout(()=>respondedMsgIds['delete'](_0x44c946),-0x139a+-0x4fcc+0xd896));const _0x592cb2=(_0x1acf03[_0x289ab3(0xd8)]||'')[_0x289ab3(0xae)](),[_0x3aaeb8,..._0x274daf]=_0x592cb2[_0x289ab3(0xcd)](/\s+/),_0xba3330=_0x3aaeb8[_0x289ab3(0xc2)+'e']();if(!commands[_0x289ab3(0xdf)](_0xba3330))return;if(!botInstance){botInstance=_0x1acf03[_0x289ab3(0xda)]||_0x1acf03['client']||null;if(!botInstance){warn('['+name+(_0x289ab3(0xc9)+'nce\x20missin'+'g.'));return;}}const _0x11cce3=getBotJid();let _0x5471bb=_0x11cce3;const _0x4add23=_0x1acf03[_0x289ab3(0xa9)][_0x289ab3(0xc8)]||'',_0x3912ce=_0x4add23['endsWith']('@g.us'),_0x132aae=Boolean(_0x1acf03[_0x289ab3(0xa9)][_0x289ab3(0xd4)]);if(!_0x132aae){if(_0x3912ce){const _0x37c07c=await isadmin(botInstance,_0x1acf03)[_0x289ab3(0xde)](()=>![]);if(!_0x37c07c)return;_0x5471bb=_0x4add23;}else{const _0x4e514b=await isSudo(botInstance,_0x1acf03)[_0x289ab3(0xde)](()=>![]);if(!_0x4e514b)return;const {findings:_0x2dc559}=userJidFromCtx(_0x1acf03),_0x2a494a=await findStoredMatchFromFindings(_0x2dc559);if(!_0x2a494a)return;_0x5471bb=_0x2a494a;}}const _0x18fa6a=_0x274daf['join']('\x20');try{await handleTikTok(_0x5471bb,_0x18fa6a,_0x1acf03);}catch(_0x2b3bc4){error(_0x2b3bc4,'['+name+(_0x289ab3(0xce)+_0x289ab3(0xc6))+(_0x2b3bc4[_0x289ab3(0xac)]||_0x2b3bc4)),await botInstance['sendMessag'+'e'](_0x5471bb,{'text':'‚ùå\x20An\x20unexp'+_0x289ab3(0xb6)+_0x289ab3(0xe0)+'.'},{'quoted':_0x1acf03['ms']});}}async function handleTikTok(_0x1bee90,_0x45dc5c,_0x1aa1b1){const _0xb0a71d=_0x1ef2e7;if(!_0x45dc5c)return botInstance['sendMessag'+'e'](_0x1bee90,{'text':'Please\x20pro'+_0xb0a71d(0xc4)+_0xb0a71d(0xaf)+_0xb0a71d(0xbd)},{'quoted':_0x1aa1b1['ms']});await botInstance[_0xb0a71d(0xb8)+'e'](_0x1bee90,{'text':_0xb0a71d(0xa2)+_0xb0a71d(0xa8)+_0xb0a71d(0xbc)},{'quoted':_0x1aa1b1['ms']});const _0x1081b7='https://ap'+_0xb0a71d(0xd9)+_0xb0a71d(0xc3)+_0xb0a71d(0xb3)+encodeURIComponent(_0x45dc5c);try{const _0xbdebdc=await _0x311a80[_0xb0a71d(0xd3)](_0x1081b7,{'timeout':0x7530}),_0x181bd3=extractDownloadUrl(_0xbdebdc[_0xb0a71d(0xb4)]);if(!_0x181bd3)return botInstance[_0xb0a71d(0xb8)+'e'](_0x1bee90,{'text':_0xb0a71d(0xad)+'t\x20find\x20dow'+_0xb0a71d(0xaa)+_0xb0a71d(0xe8)+'\x20that\x20URL.'+_0xb0a71d(0xcc)},{'quoted':_0x1aa1b1['ms']});const _0x78791e=/\.(mp4|mov)(\?.*)?$/[_0xb0a71d(0xe2)](_0x181bd3);_0x78791e?await botInstance[_0xb0a71d(0xb8)+'e'](_0x1bee90,{'video':{'url':_0x181bd3},'caption':_0xb0a71d(0xbd)},{'quoted':_0x1aa1b1['ms']}):await botInstance[_0xb0a71d(0xb8)+'e'](_0x1bee90,{'document':{'url':_0x181bd3},'fileName':_0xb0a71d(0xa4)+_0xb0a71d(0xe3),'caption':_0xb0a71d(0xbd)},{'quoted':_0x1aa1b1['ms']});}catch(_0x5d4602){error(_0x5d4602,'['+name+(_0xb0a71d(0xdd)+_0xb0a71d(0xb0)+'r\x20')+_0x45dc5c),await botInstance[_0xb0a71d(0xb8)+'e'](_0x1bee90,{'text':'‚ùå\x20Failed\x20t'+_0xb0a71d(0xa5)+_0xb0a71d(0xe6)+_0xb0a71d(0xb7)+_0xb0a71d(0xb1)+_0xb0a71d(0xcc)},{'quoted':_0x1aa1b1['ms']});}}