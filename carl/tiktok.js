const _0x4f5efd=_0x3fcf;(function(_0x33e1b2,_0x53e64b){const _0x557db5=_0x3fcf,_0x1df8d0=_0x33e1b2();while(!![]){try{const _0x238868=parseInt(_0x557db5(0x11a))/(0x1c33*0x1+0x1642+-0xc9d*0x4)+parseInt(_0x557db5(0x116))/(0x4*-0x821+-0x11*0x65+-0x79*-0x53)*(parseInt(_0x557db5(0xf6))/(0x19df+0x1059*0x1+-0x2a35))+parseInt(_0x557db5(0x117))/(-0x1*0x197a+-0x6*0x5ef+-0x2*-0x1e8c)*(-parseInt(_0x557db5(0x125))/(-0x1567+0x25f9+-0x108d*0x1))+-parseInt(_0x557db5(0x10b))/(0xdbe+0x1191+-0x1f49*0x1)*(parseInt(_0x557db5(0xf3))/(0x13cd+0xb24+0x527*-0x6))+-parseInt(_0x557db5(0x11e))/(0x3*0x2d1+-0x2190*-0x1+0x1*-0x29fb)*(-parseInt(_0x557db5(0x10e))/(-0xccc+-0x2405+-0x152*-0x25))+parseInt(_0x557db5(0x111))/(-0x3ca+0x329*0x3+-0x5a7*0x1)*(parseInt(_0x557db5(0xf8))/(-0x332+0x10e5+-0xda8))+-parseInt(_0x557db5(0x105))/(0x1044+-0x68+-0xfd0)*(-parseInt(_0x557db5(0x11d))/(-0x67*-0x1f+-0x2443+0x167*0x11));if(_0x238868===_0x53e64b)break;else _0x1df8d0['push'](_0x1df8d0['shift']());}catch(_0x1a454d){_0x1df8d0['push'](_0x1df8d0['shift']());}}}(_0x41c1,-0x4b35*-0x26+0xf7d9f+0x1252*-0xee));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';import _0x5e6a37 from'axios';function _0x41c1(){const _0x232602=['test','clear','iktok?url=','result','jid','ðŸ“¥\x20Download','\x0a\x0atct','endsWith','bot','120urtkqY','\x20failed\x20fo','text','http','toLowerCas','\x20content.\x20','48yBzZLW','e\x20invalid.','catch','36vJuykw','ror:\x20','map','18260bePLiF','fromMe','vide\x20a\x20Tik','add','data','874tGoqZr','1215700QnnTgw','trim','client','48634NWlQGJ',']\x20initiali','@g.us','14885zUyHOE','2134544KwBZTN',']\x20Download','t\x20find\x20dow','sendMessag','dllink','tiktok-onl','tct','10qHdYQK','nload','string','r\x20occurred','sfully.','split','tiktok_dow','zed\x20succes','error:\x20','e\x20wait...','âŒ\x20Failed\x20t','remoteJid','ing,\x20pleas','download_u',']\x20findStor','video','Link\x20may\x20b','includes','i.bk9.dev/','key','BK9','Tok\x20URL.\x0a\x0a','536809ncTbkD','âŒ\x20An\x20unexp','ected\x20erro','1527dlifpy','message','3025fYgAWj','âŒ\x20Could\x20no','has','audio'];_0x41c1=function(){return _0x232602;};return _0x41c1();}export const name=_0x4f5efd(0x123)+'y';export const version='1.0.0';export const priority=-0x566*-0x2+-0x1431+0x15*0x73;export const commands=['tiktok'];let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x3e0897=[]){const _0x3e3d7c=_0x4f5efd;try{const _0x1daeb2=new Set((await listSudo())[_0x3e3d7c(0x110)](String));for(const _0x52a855 of _0x3e0897){if(!_0x52a855?.[_0x3e3d7c(0x100)]||typeof _0x52a855[_0x3e3d7c(0x100)]!==_0x3e3d7c(0x127))continue;const _0x5adcbd=normalizeToJid(_0x52a855[_0x3e3d7c(0x100)]);if(_0x5adcbd&&_0x1daeb2[_0x3e3d7c(0xfa)](_0x5adcbd))return _0x5adcbd;if(_0x1daeb2[_0x3e3d7c(0xfa)](_0x52a855['jid']))return _0x52a855[_0x3e3d7c(0x100)];}}catch(_0x195745){warn('['+name+(_0x3e3d7c(0x133)+'edMatch\x20er'+_0x3e3d7c(0x10f))+(_0x195745['message']||_0x195745));}return null;}function extractDownloadUrl(_0xb3e9fa){const _0xfbf3=_0x4f5efd;if(!_0xb3e9fa)return null;if(typeof _0xb3e9fa===_0xfbf3(0x127)&&_0xb3e9fa['startsWith'](_0xfbf3(0x108)))return _0xb3e9fa;if(typeof _0xb3e9fa!=='object')return null;const _0xbae05e=[_0xfbf3(0x132)+'rl','url','HD','hd',_0xfbf3(0x122),_0xfbf3(0x134),_0xfbf3(0xfb),_0xfbf3(0xff),_0xfbf3(0xf1)];for(const _0x226121 of _0xbae05e){if(_0xb3e9fa[_0x226121]){const _0x3a5293=extractDownloadUrl(_0xb3e9fa[_0x226121]);if(_0x3a5293)return _0x3a5293;}}return null;}export async function initialize(_0x33f86f){const _0x5c4690=_0x4f5efd;botInstance=_0x33f86f,info('['+name+(_0x5c4690(0x11b)+_0x5c4690(0x12c)+_0x5c4690(0x129)));}function _0x3fcf(_0x3696b4,_0x37ed50){const _0x1de084=_0x41c1();return _0x3fcf=function(_0x3cdd64,_0x170b1c){_0x3cdd64=_0x3cdd64-(0x8*-0x1f5+-0x15ad+0x2646*0x1);let _0x464933=_0x1de084[_0x3cdd64];return _0x464933;},_0x3fcf(_0x3696b4,_0x37ed50);}export async function cleanup(){const _0x48fdb8=_0x4f5efd;botInstance=null,respondedMsgIds[_0x48fdb8(0xfd)](),info('['+name+(']\x20cleaned\x20'+'up'));}export async function onMessage(_0x49985d){const _0x5afa52=_0x4f5efd;if(!_0x49985d?.[_0x5afa52(0x138)]||!_0x49985d['isCommand'])return;const _0x4999e7=_0x49985d[_0x5afa52(0x138)]['id'];if(_0x4999e7&&respondedMsgIds['has'](_0x4999e7))return;_0x4999e7&&(respondedMsgIds[_0x5afa52(0x114)](_0x4999e7),setTimeout(()=>respondedMsgIds['delete'](_0x4999e7),0xcbee+0x17*0x67d+-0xebf9*0x1));const _0x3b5e04=(_0x49985d[_0x5afa52(0x107)]||'')[_0x5afa52(0x118)](),[_0x4d09b1,..._0x236466]=_0x3b5e04[_0x5afa52(0x12a)](/\s+/),_0x568d67=_0x4d09b1[_0x5afa52(0x109)+'e']();if(!commands[_0x5afa52(0x136)](_0x568d67))return;if(!botInstance){botInstance=_0x49985d[_0x5afa52(0x104)]||_0x49985d[_0x5afa52(0x119)]||null;if(!botInstance){warn('['+name+(']\x20botInsta'+'nce\x20missin'+'g.'));return;}}const _0xfbd6f3=getBotJid();let _0x5f11b5=_0xfbd6f3;const _0xb45aa8=_0x49985d[_0x5afa52(0x138)][_0x5afa52(0x130)]||'',_0x42edc0=_0xb45aa8[_0x5afa52(0x103)](_0x5afa52(0x11c)),_0x4b7864=Boolean(_0x49985d[_0x5afa52(0x138)][_0x5afa52(0x112)]);if(!_0x4b7864){if(_0x42edc0){const _0x3a6e28=await isadmin(botInstance,_0x49985d)[_0x5afa52(0x10d)](()=>![]);if(!_0x3a6e28)return;_0x5f11b5=_0xb45aa8;}else{const _0x3a1131=await isSudo(botInstance,_0x49985d)[_0x5afa52(0x10d)](()=>![]);if(!_0x3a1131)return;const {findings:_0x10292d}=userJidFromCtx(_0x49985d),_0x427a80=await findStoredMatchFromFindings(_0x10292d);if(!_0x427a80)return;_0x5f11b5=_0x427a80;}}const _0x237162=_0x236466['join']('\x20');try{await handleTikTok(_0x5f11b5,_0x237162,_0x49985d);}catch(_0x549599){error(_0x549599,'['+name+(']\x20handler\x20'+_0x5afa52(0x12d))+(_0x549599[_0x5afa52(0xf7)]||_0x549599)),await botInstance[_0x5afa52(0x121)+'e'](_0x5f11b5,{'text':_0x5afa52(0xf4)+_0x5afa52(0xf5)+_0x5afa52(0x128)+'.'},{'quoted':_0x49985d['ms']});}}async function handleTikTok(_0x73da24,_0x48a808,_0x5d54e2){const _0x41ecc4=_0x4f5efd;if(!_0x48a808)return botInstance[_0x41ecc4(0x121)+'e'](_0x73da24,{'text':'Please\x20pro'+_0x41ecc4(0x113)+_0x41ecc4(0xf2)+'tct'},{'quoted':_0x5d54e2['ms']});await botInstance[_0x41ecc4(0x121)+'e'](_0x73da24,{'text':_0x41ecc4(0x101)+_0x41ecc4(0x131)+_0x41ecc4(0x12e)},{'quoted':_0x5d54e2['ms']});const _0x5cec0e='https://ap'+_0x41ecc4(0x137)+'download/t'+_0x41ecc4(0xfe)+encodeURIComponent(_0x48a808);try{const _0x1ffbab=await _0x5e6a37['get'](_0x5cec0e,{'timeout':0x7530}),_0x29255f=extractDownloadUrl(_0x1ffbab[_0x41ecc4(0x115)]);if(!_0x29255f)return botInstance[_0x41ecc4(0x121)+'e'](_0x73da24,{'text':_0x41ecc4(0xf9)+_0x41ecc4(0x120)+'nloadable\x20'+'content\x20at'+'\x20that\x20URL.'+_0x41ecc4(0x102)},{'quoted':_0x5d54e2['ms']});const _0x50d433=/\.(mp4|mov)(\?.*)?$/[_0x41ecc4(0xfc)](_0x29255f);_0x50d433?await botInstance[_0x41ecc4(0x121)+'e'](_0x73da24,{'video':{'url':_0x29255f},'caption':_0x41ecc4(0x124)},{'quoted':_0x5d54e2['ms']}):await botInstance[_0x41ecc4(0x121)+'e'](_0x73da24,{'document':{'url':_0x29255f},'fileName':_0x41ecc4(0x12b)+_0x41ecc4(0x126),'caption':_0x41ecc4(0x124)},{'quoted':_0x5d54e2['ms']});}catch(_0x1e6c8a){error(_0x1e6c8a,'['+name+(_0x41ecc4(0x11f)+_0x41ecc4(0x106)+'r\x20')+_0x48a808),await botInstance[_0x41ecc4(0x121)+'e'](_0x73da24,{'text':_0x41ecc4(0x12f)+'o\x20download'+_0x41ecc4(0x10a)+_0x41ecc4(0x135)+_0x41ecc4(0x10c)+'\x0a\x0atct'},{'quoted':_0x5d54e2['ms']});}}