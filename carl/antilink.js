const _0x12af8e=_0x1c20;(function(_0x2b0a84,_0xbb1a74){const _0x513dc9=_0x1c20,_0x23c184=_0x2b0a84();while(!![]){try{const _0x2ecd50=-parseInt(_0x513dc9(0x126))/(-0x183a+-0x627+0x1e62)*(parseInt(_0x513dc9(0x170))/(0x6e3*-0x1+0x16d9+-0xff4))+-parseInt(_0x513dc9(0x1ab))/(-0x1*0x21da+0xb1d+0x16c0)*(-parseInt(_0x513dc9(0x135))/(-0x248b+0xc5+0x3fa*0x9))+-parseInt(_0x513dc9(0x136))/(0x119+-0x1*-0x27a+-0x38e)+-parseInt(_0x513dc9(0x15c))/(0xe3a+-0x2236+-0x2*-0xa01)*(parseInt(_0x513dc9(0x12a))/(-0x628+-0x97*-0x3e+-0x1e63))+-parseInt(_0x513dc9(0x11a))/(-0x5*0x96+-0xc1d*-0x2+-0x1544)+parseInt(_0x513dc9(0x18c))/(-0x227d+-0x1bb8+-0x1*-0x3e3e)*(-parseInt(_0x513dc9(0x12e))/(0xb2c+-0x20*-0xc7+-0x2402*0x1))+parseInt(_0x513dc9(0x168))/(-0x10*-0x1f4+-0xf93+0xfa2*-0x1)*(parseInt(_0x513dc9(0x138))/(0x2344+0x16a1+-0x39d9));if(_0x2ecd50===_0xbb1a74)break;else _0x23c184['push'](_0x23c184['shift']());}catch(_0x51626b){_0x23c184['push'](_0x23c184['shift']());}}}(_0x4022,-0x1276b*-0x10+0x371*0x4e9+-0x17176f));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x5e9157 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x5b129e from'linkify-it';import{createRequire}from'module';const require=createRequire(import.meta[_0x12af8e(0x1a4)]),tlds=require('tlds');export const name=_0x12af8e(0xf3);export const version=_0x12af8e(0x162);export const priority=0xfa5+0xe5e*0x2+0x2bfd*-0x1;export const commands=[_0x12af8e(0xf3),_0x12af8e(0x194)];const TABLE_SETTINGS=_0x12af8e(0x1af)+_0x12af8e(0x12c);let botRef=null,shuttingDown=![],config={};const linkify=_0x5b129e();linkify['tlds'](tlds);const processedMessageIds=new Map(),perUserWarnings=new Map();function refreshConfig(){const _0xc9638b=_0x12af8e,_0x22d3af=getConfig()||{};config={'MAX_WARNS':0x3,'REMOVE_ON_MAX':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':'🔗\x20{user},\x20'+_0xc9638b(0xd9)+_0xc9638b(0x172)+_0xc9638b(0x159)+_0xc9638b(0x130)+_0xc9638b(0xea)+'rnings}','VALIDATION_TIMEOUT_MS':0xfa0,'LOG_DELETED_LINKS':!![],'GLOBAL_CONCURRENCY':0x2,'DELETE_RETRY_COUNT':0x2,'DEDUPE_TTL_MS':0x1388,..._0x22d3af[_0xc9638b(0xee)]||{}};}function setupApi(_0x18ecf8){botRef=_0x18ecf8;}async function ensureSchema(){const _0x20ae13=_0x12af8e;try{await db[_0x20ae13(0x128)](_0x20ae13(0x10c)+'\x20\x20\x20CREATE\x20'+_0x20ae13(0x16b)+'OT\x20EXISTS\x20'+TABLE_SETTINGS+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x20ae13(0xec)+'hat_jid\x20TE'+_0x20ae13(0x19d)+_0x20ae13(0xfd)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x20ae13(0xfa)+_0x20ae13(0x17e)+_0x20ae13(0x196)+_0x20ae13(0x125)+_0x20ae13(0x192)+'list\x20TEXT\x20'+_0x20ae13(0xf1)+_0x20ae13(0x16f)+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+_0x20ae13(0x11d))),info(_0x20ae13(0x16e)+'\x20Database\x20'+_0x20ae13(0x10b)+_0x20ae13(0x133));}catch(_0x2872ac){error(_0x2872ac,_0x20ae13(0x16e)+_0x20ae13(0xe3)+_0x20ae13(0xeb)+'led');throw _0x2872ac;}}function _0x4022(){const _0x53bd7e=['mediate\x20er','👤\x20*User:*\x20','Admin\x20chec','\x20WHERE\x20key',',\x20?)\x0a\x20\x20\x20\x20\x20','sock','get','antilink\x20<','✅\x20ON','\x20for\x20','\x20Early\x20adm','WARNING_ME','639iXhtlY','\x20isCtxFrom','oUserJid','subject','\x20setGroupW','\x20\x20\x20\x20\x20\x20\x20\x20ON','\x20\x20\x20\x20\x20white','min/bot\x20me','antilinkwl','\x20(chat_jid','FAULT\x200,\x0a\x20','e\x20failed','SELECT\x20val','ON\x20CONFLIC','any\x20target','\x20WHERE\x20cha','\x20the\x20curre','XT\x20PRIMARY','split','\x20CONFLICT(','normalizeT','SEND_WARNI','l\x20Message:','clear','url','💬\x20*Chat:*\x20',',\x20whitelis','max','❌\x20OFF','text','LOG_DELETE','187257hvSnOs','elist\x20=\x20ex','ed.enabled','toLowerCas','antilink_s','k\x20<on|off|','t\x20resolve\x20','nabled\x20fai','ng\x20failed:','catch','ailed:\x20','links\x20are\x20','participan','INSERT\x20INT','imageMessa','off','_jid\x27','warning\x20in','forEach','DISABLED',',\x20enabled)','\x20schema\x20cr','all','value','\x20=\x20\x27target','whitelist','led\x20for\x20','ror:\x20','rnings\x20{wa','eation\x20fai','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','trim','ANTILINK','DEDUPE_TTL','ENABLED','DEFAULT\x20\x27[','itialized\x20','antilink','led:\x20','SELECT\x20ena','length','🔗\x20*Origina','cluded.whi','tus>\x20(use\x20','\x20\x20enabled\x20','k:\x20','replace','\x20KEY,\x0a\x20\x20\x20\x20','\x20VALUES\x20(?','match','🔗\x20Usage:\x20.','groupParti','includes','from','stringify','```','ensive).','caption','t)\x20VALUES\x20',')\x20DO\x20UPDAT','ssage\x20(def','schema\x20ens','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','E\x20SET\x20whit','\x20deleteWit','cing\x20on\x20ad','DO\x20UPDATE\x20','message',':<alias|ji','heck\x20faile','k\x20Deletion','enabled','status>\x20gp','test','findings','\x20enforceme','710320dijogy','on|off|sta','jid','\x20\x20\x20\x20\x20\x20','ailed\x20for\x20','key','nly.','MAX','*\x0a```','lt\x20connect','set','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','930702CMzdmD','age.','exec','jid|all>\x20i','1921227FjVgqD','t\x20message\x20','ettings','cipantsUpd','83770HPRFgK','\x20Applying\x20','maining\x20wa','delete','(immediate','ured.','parse','52OOZzJx','1531575dQwxeP','k\x20Status*\x0a','59064lwpHpT','resolveNam','conversati','count','endsWith','rticipant\x20','SSAGE','Unknown\x20Gr','sendMessag','lete_prefs','eleted\x20lin','run','REMOVE_ON_','_MS','DELETE_RET','in\x20check\x20f','@g.us','gp:<alias|','index','(defensive','fromMe','\x20sendWarni','sendWarnin','xtMessage','extendedTe','nt).','\x20groups\x20fo','RY_COUNT','chat_jid)\x20','oup','bled,\x20whit','🔗\x20Antilink','(?,\x20?)\x0a\x20\x20\x20','d\x20here.\x20Re','isArray','*\x0a\x0a','18oyGgQL','elist\x20FROM','status','🚫\x20*Antilin','\x20initializ','crement\x20fo','3.6.4','r\x20admin/bo','\x20setGroupE','ng\x20admin-c','D_LINKS','ids','6116XnNocr','\x20cleaned\x20u','nt\x20group\x20o','TABLE\x20IF\x20N','{user}','isCommand','[antilink]',']\x27\x0a\x20\x20\x20\x20\x20\x20\x20','2VolWZw','has','not\x20allowe','🔗\x20Could\x20no','groupMetad','Unknown','\x20getGroupS','\x20Skipping\x20','MAX_WARNS','remoteJid','remove','\x20module\x20in','\x20increment','\x20enforceIm','INTEGER\x20DE','\x20remove\x20pa'];_0x4022=function(){return _0x53bd7e;};return _0x4022();}async function getGroupSetting(_0x581b8b){const _0x407fcd=_0x12af8e;try{const _0x3d0cb1=await db['get'](_0x407fcd(0xf5)+_0x407fcd(0x156)+_0x407fcd(0x15d)+'\x20'+TABLE_SETTINGS+(_0x407fcd(0x19b)+'t_jid\x20=\x20?'),[_0x581b8b]);return{'enabled':!!_0x3d0cb1?.[_0x407fcd(0x115)],'whitelist':_0x3d0cb1?JSON[_0x407fcd(0x134)](_0x3d0cb1[_0x407fcd(0xe7)]||'[]'):[]};}catch(_0x193ee9){return warn(_0x407fcd(0x16e)+_0x407fcd(0x176)+'etting\x20err'+'or\x20for\x20'+_0x581b8b+':\x20'+(_0x193ee9?.[_0x407fcd(0x111)]||_0x193ee9)),{'enabled':![],'whitelist':[]};}}async function setGroupEnabled(_0xdc4593,_0x19c131){const _0x5d9c13=_0x12af8e;try{return await db[_0x5d9c13(0x143)](_0x5d9c13(0xdb)+'O\x20'+TABLE_SETTINGS+('\x20(chat_jid'+_0x5d9c13(0xe2)+_0x5d9c13(0xfe)+_0x5d9c13(0x184)+_0x5d9c13(0x191)+_0x5d9c13(0x19f)+_0x5d9c13(0x154)+_0x5d9c13(0x110)+'SET\x20enable'+'d\x20=\x20exclud'+_0x5d9c13(0x1ad)+';'),[_0xdc4593,_0x19c131?-0x1969+-0x2081*-0x1+-0x717:0x5*0x6c2+-0xb10+-0x16ba]),!![];}catch(_0x233266){return error(_0x233266,'[antilink]'+_0x5d9c13(0x164)+_0x5d9c13(0xd5)+_0x5d9c13(0xe8)+_0xdc4593),![];}}async function setGroupWhitelist(_0x21b9e6,_0x16138a){const _0x4fdfd7=_0x12af8e;try{const _0x3a955e=Array[_0x4fdfd7(0x103)](new Set((_0x16138a||[])['map'](String)['filter'](Boolean)));return await db[_0x4fdfd7(0x143)](_0x4fdfd7(0xdb)+'O\x20'+TABLE_SETTINGS+(_0x4fdfd7(0x195)+_0x4fdfd7(0x1a6)+_0x4fdfd7(0x108)+_0x4fdfd7(0x158)+_0x4fdfd7(0x125)+_0x4fdfd7(0x199)+'T(chat_jid'+_0x4fdfd7(0x109)+_0x4fdfd7(0x10d)+_0x4fdfd7(0x1ac)+_0x4fdfd7(0xf8)+'telist;'),[_0x21b9e6,JSON[_0x4fdfd7(0x104)](_0x3a955e)]),!![];}catch(_0x53418f){return error(_0x53418f,_0x4fdfd7(0x16e)+_0x4fdfd7(0x190)+'hitelist\x20f'+_0x4fdfd7(0x11e)+_0x21b9e6),![];}}function extractTextFromMessage(_0x3ee6ce){const _0x1c4622=_0x12af8e;if(!_0x3ee6ce||!_0x3ee6ce['message'])return'';const _0x5bc414=_0x3ee6ce[_0x1c4622(0x111)];return _0x5bc414[_0x1c4622(0x13a)+'on']||_0x5bc414[_0x1c4622(0x150)+_0x1c4622(0x14f)]?.[_0x1c4622(0x1a9)]||_0x5bc414[_0x1c4622(0xdc)+'ge']?.[_0x1c4622(0x107)]||_0x5bc414['videoMessa'+'ge']?.[_0x1c4622(0x107)]||'';}function messageContainsLinkLocal(_0x35bc7c){const _0x50c669=_0x12af8e,_0x5178eb=extractTextFromMessage(_0x35bc7c);if(!_0x5178eb)return![];const _0x3b674f=linkify[_0x50c669(0xff)](_0x5178eb);if(_0x3b674f&&_0x3b674f[_0x50c669(0xf6)]>0xa23+-0xedc+0x4b9)return!![];const _0x462193=/(?:https?:\/\/)?(?:www\.)?[a-z0-9\-]{1,63}\.(?:[a-z]{2,63})(?:[\/:\?\#\s]|$)/i;if(_0x462193[_0x50c669(0x117)](_0x5178eb))return!![];return![];}function getMessageKey(_0x3d5859){const _0x23c08d=_0x12af8e;if(!_0x3d5859?.[_0x23c08d(0x11f)]?.['id'])return null;return _0x3d5859[_0x23c08d(0x11f)][_0x23c08d(0x179)]+':'+_0x3d5859[_0x23c08d(0x11f)]['id'];}async function isCtxFromAdmin(_0x4029ae){const _0x59c454=_0x12af8e;try{if(!_0x4029ae)return![];if(_0x4029ae[_0x59c454(0x11f)]?.[_0x59c454(0x14c)])return!![];return!!await isadmin(botRef,_0x4029ae);}catch(_0x31290e){return warn(_0x59c454(0x16e)+_0x59c454(0x18d)+_0x59c454(0x182)+'k\x20failed:\x20'+(_0x31290e?.[_0x59c454(0x111)]||_0x31290e)),!![];}}async function deleteWithRetry(_0x3220f7){const _0x5bc566=_0x12af8e,_0x14e31b=Math[_0x5bc566(0x1a7)](0x24f4+-0x5*0x569+-0x2*0x4f3,config[_0x5bc566(0x146)+_0x5bc566(0x153)]||-0x12cc+0x3bd+0xf10),_0x502c77=_0x3220f7[_0x5bc566(0x11f)]?.['remoteJid'];if(!_0x502c77)return![];for(let _0x5eea5c=0x3*0xb4f+0x1050+-0xa0c*0x5;_0x5eea5c<=_0x14e31b;_0x5eea5c++){try{const _0x2285c2=botRef?.['sock']||botRef;return await _0x2285c2[_0x5bc566(0x140)+'e'](_0x502c77,{'delete':_0x3220f7[_0x5bc566(0x11f)]}),!![];}catch(_0x337086){if(_0x5eea5c<_0x14e31b){await new Promise(_0x2e2f8c=>setTimeout(_0x2e2f8c,(0x20af+0x8a6+-0x2829)*_0x5eea5c));continue;}return warn(_0x5bc566(0x16e)+_0x5bc566(0x10e)+'hRetry\x20fai'+_0x5bc566(0xf4)+(_0x337086?.[_0x5bc566(0x111)]||_0x337086)),![];}}return![];}async function getLogTargetJid(){const _0x595556=_0x12af8e;try{const _0x3975df=await db[_0x595556(0x186)](_0x595556(0x198)+'ue\x20FROM\x20de'+_0x595556(0x141)+_0x595556(0x183)+_0x595556(0xe6)+_0x595556(0xde));return _0x3975df?.[_0x595556(0xe5)]||getBotJid();}catch(_0x3bf096){return getBotJid();}}async function forwardDeletedLink(_0x394bf2){const _0x266d5e=_0x12af8e;if(!config[_0x266d5e(0x1aa)+_0x266d5e(0x166)])return;try{if(await isCtxFromAdmin(_0x394bf2))return;const _0x2974b6=await getLogTargetJid();if(!_0x2974b6)return;const _0x3de8c6=_0x394bf2['key']?.[_0x266d5e(0xda)+'t']||_0x394bf2[_0x266d5e(0x11f)]?.[_0x266d5e(0x179)]||_0x266d5e(0x175),_0x38da37=_0x394bf2[_0x266d5e(0x11f)]?.[_0x266d5e(0x179)],_0xcd32ea=extractTextFromMessage(_0x394bf2);let _0x2d2e27='PM';try{if(_0x38da37&&_0x38da37[_0x266d5e(0x13c)](_0x266d5e(0x148))){const _0x519b60=await(botRef?.[_0x266d5e(0x185)]||botRef)[_0x266d5e(0x174)+'ata'](_0x38da37);_0x2d2e27=_0x519b60[_0x266d5e(0x18f)];}}catch(_0x4cc4fe){_0x2d2e27=_0x266d5e(0x13f)+_0x266d5e(0x155);}const _0x44d5bb=_0x266d5e(0x15f)+_0x266d5e(0x114)+_0x266d5e(0x15b)+(_0x266d5e(0x181)+'@'+String(_0x3de8c6)[_0x266d5e(0x19e)]('@')[-0x1c90*0x1+0x1*0x622+0x12*0x13f]+'\x0a')+(_0x266d5e(0x1a5)+_0x2d2e27+'\x20('+_0x38da37+')\x0a')+(_0x266d5e(0xf7)+_0x266d5e(0x1a2)+_0x266d5e(0x122)+_0xcd32ea+_0x266d5e(0x105));await(botRef?.[_0x266d5e(0x185)]||botRef)[_0x266d5e(0x140)+'e'](_0x2974b6,{'text':_0x44d5bb,'mentions':[_0x3de8c6]});}catch(_0x507c1a){warn(_0x266d5e(0x16e)+'\x20Failed\x20to'+'\x20forward\x20d'+_0x266d5e(0x142)+_0x266d5e(0xfb)+_0x507c1a[_0x266d5e(0x111)]);}}function userKey(_0x1985e0,_0x3fba49){return _0x1985e0+'::'+_0x3fba49;}async function incrementWarningAndMaybeRemove(_0x4743d3){const _0x221f28=_0x12af8e;try{if(await isCtxFromAdmin(_0x4743d3))return info(_0x221f28(0x16e)+_0x221f28(0x177)+_0x221f28(0xdf)+_0x221f28(0x161)+_0x221f28(0x163)+_0x221f28(0x12b)+_0x221f28(0x14b)+').'),{'count':0x0,'removed':![]};const _0xeb31b4=_0x4743d3['key']?.[_0x221f28(0x179)],_0x29aea1=_0x4743d3[_0x221f28(0x11f)]?.[_0x221f28(0xda)+'t']||_0x4743d3[_0x221f28(0x11f)]?.[_0x221f28(0x179)]||'';if(!_0xeb31b4||!_0x29aea1)return{'count':0x0,'removed':![]};const _0x3244fe=userKey(_0xeb31b4,_0x29aea1),_0x4a3899=perUserWarnings['get'](_0x3244fe)||{'count':0x0};_0x4a3899[_0x221f28(0x13b)]++,perUserWarnings[_0x221f28(0x124)](_0x3244fe,_0x4a3899);if(config[_0x221f28(0x144)+_0x221f28(0x121)]&&_0x4a3899['count']>=config[_0x221f28(0x178)]){const _0x1dff09=botRef?.[_0x221f28(0x185)]||botRef;try{await _0x1dff09[_0x221f28(0x101)+_0x221f28(0x12d)+'ate'](_0xeb31b4,[_0x29aea1],_0x221f28(0x17a));}catch(_0x48238d){warn(_0x221f28(0x16e)+'\x20Could\x20not'+_0x221f28(0x17f)+_0x221f28(0x13d)+_0x29aea1+':\x20'+(_0x48238d?.[_0x221f28(0x111)]||_0x48238d));}return perUserWarnings[_0x221f28(0x131)](_0x3244fe),{'count':_0x4a3899[_0x221f28(0x13b)],'removed':!![]};}return{'count':_0x4a3899['count'],'removed':![]};}catch(_0x16d2d4){return warn(_0x221f28(0x16e)+_0x221f28(0x17c)+'Warning\x20er'+_0x221f28(0xe9)+(_0x16d2d4?.[_0x221f28(0x111)]||_0x16d2d4)),{'count':0x0,'removed':![]};}}async function sendWarning(_0x569f66,_0x46e03f){const _0x5b50d6=_0x12af8e;try{if(await isCtxFromAdmin(_0x569f66)){info('[antilink]'+_0x5b50d6(0x177)+_0x5b50d6(0x14e)+'g\x20for\x20admi'+'n/bot\x20mess'+_0x5b50d6(0x127));return;}}catch(_0x977557){warn('[antilink]'+_0x5b50d6(0x14d)+_0x5b50d6(0x165)+_0x5b50d6(0x113)+'d:\x20'+(_0x977557?.[_0x5b50d6(0x111)]||_0x977557));return;}if(!config[_0x5b50d6(0x1a1)+'NG'])return;try{const _0x345486=_0x569f66[_0x5b50d6(0x11f)]?.[_0x5b50d6(0xda)+'t']||_0x569f66[_0x5b50d6(0x11f)]?.['remoteJid']||'',_0xb1278a=Math[_0x5b50d6(0x1a7)](0x8bf+-0x5f5*0x3+0x920,config['MAX_WARNS']-_0x46e03f),_0xfeb292=config[_0x5b50d6(0x18b)+_0x5b50d6(0x13e)][_0x5b50d6(0xfc)](_0x5b50d6(0x16c),'@'+_0x345486[_0x5b50d6(0x19e)]('@')[0x10*-0x1b4+-0x11a5+0x2ce5])['replace']('{warnings}',String(_0xb1278a)),_0x4e1f2f=_0x569f66[_0x5b50d6(0x11f)]['remoteJid'],_0x2597e9=botRef?.['sock']||botRef;await _0x2597e9[_0x5b50d6(0x140)+'e'](_0x4e1f2f,{'text':_0xfeb292,'mentions':[_0x345486]});}catch(_0xce1370){warn('[antilink]'+_0x5b50d6(0x14d)+_0x5b50d6(0xd6)+'\x20'+(_0xce1370?.[_0x5b50d6(0x111)]||_0xce1370));}}async function enforceImmediate(_0x381815){const _0x25c9a=_0x12af8e;try{const _0x5c1808=getMessageKey(_0x381815);if(!_0x5c1808)return;if(processedMessageIds['has'](_0x5c1808))return;processedMessageIds[_0x25c9a(0x124)](_0x5c1808,setTimeout(()=>processedMessageIds[_0x25c9a(0x131)](_0x5c1808),config[_0x25c9a(0xef)+_0x25c9a(0x145)]||0x1*0xf07+0xb7b*-0x1+0xffc));if(await isCtxFromAdmin(_0x381815)){info('[antilink]'+'\x20Not\x20enfor'+_0x25c9a(0x10f)+_0x25c9a(0x193)+_0x25c9a(0x10a)+_0x25c9a(0x106));return;}const _0x50f8b4=await deleteWithRetry(_0x381815);if(!_0x50f8b4)return;await forwardDeletedLink(_0x381815);const {count:_0x16062b,removed:_0x3ba4af}=await incrementWarningAndMaybeRemove(_0x381815);!_0x3ba4af&&await sendWarning(_0x381815,_0x16062b);}catch(_0x310fdd){warn(_0x25c9a(0x16e)+_0x25c9a(0x17d)+_0x25c9a(0x180)+'ror:\x20'+(_0x310fdd?.[_0x25c9a(0x111)]||_0x310fdd));}}function splitRestForGp(_0x30cddf){const _0x454cf5=_0x12af8e;if(!_0x30cddf)return{'left':'','gp':null};const _0x427807=_0x30cddf[_0x454cf5(0xff)](/\bgp[:\s]+(.+)$/i);if(_0x427807)return{'left':_0x30cddf['slice'](-0x9ef*-0x1+0x97*-0xa+0x1*-0x409,_0x427807[_0x454cf5(0x14a)])[_0x454cf5(0xed)](),'gp':_0x427807[0x1*-0xab7+0xe0*-0x13+-0x1f4*-0xe][_0x454cf5(0xed)]()};return{'left':_0x30cddf[_0x454cf5(0xed)](),'gp':null};}async function resolveTargetsForGroupAdmin(_0x3af419){const _0x121d30=_0x12af8e,_0x58662c=await getDefault(_0x3af419)[_0x121d30(0xd7)](()=>null);if(!_0x58662c)return[];const _0x59ae2a=Array[_0x121d30(0x15a)](_0x58662c)?_0x58662c:[_0x58662c];let _0x25bc1c=[];for(const _0x1d76be of _0x59ae2a){const _0x20255c=await getConnection(_0x1d76be)[_0x121d30(0xd7)](()=>null);if(Array[_0x121d30(0x15a)](_0x20255c))_0x25bc1c['push'](..._0x20255c);else{if(_0x20255c)_0x25bc1c['push'](String(_0x20255c));}}return Array[_0x121d30(0x103)](new Set(_0x25bc1c));}function _0x1c20(_0x16f634,_0x214650){const _0x1f4bf0=_0x4022();return _0x1c20=function(_0x5ce909,_0x2b056e){_0x5ce909=_0x5ce909-(-0x155b+-0x16b9+0x2ce9);let _0x42c7d7=_0x1f4bf0[_0x5ce909];return _0x42c7d7;},_0x1c20(_0x16f634,_0x214650);}async function resolveTargetsForSudo(_0x1252ac){const _0x413496=_0x12af8e;if(!_0x1252ac)return[];if(_0x1252ac[_0x413496(0x1ae)+'e']()===_0x413496(0xe4))return await _0x5e9157['getUniqueJ'+_0x413496(0x167)]();const _0x95c0cb=await _0x5e9157[_0x413496(0x139)+'e'](_0x1252ac);if(_0x95c0cb)return[_0x95c0cb];if(_0x1252ac[_0x413496(0x102)]('@'))return[_0x5e9157[_0x413496(0x1a0)+_0x413496(0x18e)](_0x1252ac)];return[];}async function findStoredMatchFromFindings(_0x3aa6fa=[]){const _0x174397=_0x12af8e;try{const _0x3d7fae=await listSudo();if(!_0x3d7fae?.[_0x174397(0xf6)])return null;const _0x2da41d=new Set(_0x3d7fae['map'](String));for(const _0x177b0f of _0x3aa6fa||[]){if(_0x177b0f?.[_0x174397(0x11c)]&&_0x2da41d[_0x174397(0x171)](normalizeToJid(_0x177b0f['jid'])))return normalizeToJid(_0x177b0f[_0x174397(0x11c)]);}return null;}catch(_0x2d1c13){return null;}}export async function initialize(_0x457c9e){const _0x29c44a=_0x12af8e;try{setupApi(_0x457c9e),await ensureSchema(),refreshConfig(),shuttingDown=![],info('[antilink]'+_0x29c44a(0x17b)+_0x29c44a(0xf2)+_0x29c44a(0x132)+_0x29c44a(0x119)+_0x29c44a(0x151));}catch(_0xfc7e10){error(_0xfc7e10,_0x29c44a(0x16e)+_0x29c44a(0x160)+_0x29c44a(0x197));throw _0xfc7e10;}}export async function onMessage(_0x3876b){const _0x3ef2df=_0x12af8e;if(!_0x3876b?.[_0x3ef2df(0x11f)]?.['remoteJid']||!_0x3876b[_0x3ef2df(0x111)]||shuttingDown)return;const _0x778162=_0x3876b[_0x3ef2df(0x11f)][_0x3ef2df(0x179)],_0x13603f=_0x778162[_0x3ef2df(0x13c)]('@g.us'),_0x267858=_0x3876b[_0x3ef2df(0x11f)][_0x3ef2df(0xda)+'t']||_0x3876b[_0x3ef2df(0x11f)]['remoteJid'],_0x173436=extractTextFromMessage(_0x3876b),_0x200d2e=(_0x3876b[_0x3ef2df(0x1a9)]||_0x173436)[_0x3ef2df(0xed)](),_0x11c27a=_0x3876b[_0x3ef2df(0x16d)]&&_0x200d2e?_0x200d2e[_0x3ef2df(0x19e)](/\s+/)[0x1662+0x2*0xcb3+0x5f9*-0x8][_0x3ef2df(0x1ae)+'e']()[_0x3ef2df(0xfc)]('/',''):null;if(_0x3876b[_0x3ef2df(0x16d)]&&commands[_0x3ef2df(0x102)](_0x11c27a)){let _0x13bb60=_0x778162,_0x2b733e=![],_0x9dbf04=![];if(_0x13603f){if(await isadmin(botRef,_0x3876b))_0x2b733e=!![];}else{if(_0x3876b['key'][_0x3ef2df(0x14c)])_0x2b733e=!![],_0x9dbf04=!![],_0x13bb60=getBotJid()||_0x778162;else{if(await isSudo(botRef,_0x3876b)){_0x2b733e=!![],_0x9dbf04=!![];const _0x38a8a9=await userJidFromCtx(_0x3876b)||{'findings':[]};_0x13bb60=await findStoredMatchFromFindings(_0x38a8a9[_0x3ef2df(0x118)])||_0x778162;}}}if(!_0x2b733e)return;if(_0x11c27a===_0x3ef2df(0xf3)){const _0x5f14f2=_0x200d2e[_0x3ef2df(0xfc)](new RegExp('^/?'+_0x11c27a+'\x5cb','i'),'')[_0x3ef2df(0xed)](),{left:_0x32a0c2,gp:_0xb91dc3}=splitRestForGp(_0x5f14f2),_0x5e6cae=_0x32a0c2[_0x3ef2df(0x19e)](/[, ]+/)[-0x1c*0x2+0xe84+-0xf*0xf4]?.[_0x3ef2df(0x1ae)+'e']();if(!_0x5e6cae||!['on','off',_0x3ef2df(0x15e)][_0x3ef2df(0x102)](_0x5e6cae))return(botRef?.['sock']||botRef)['sendMessag'+'e'](_0x13bb60,{'text':_0x3ef2df(0x100)+_0x3ef2df(0x187)+_0x3ef2df(0x11b)+_0x3ef2df(0xf9)+_0x3ef2df(0x149)+_0x3ef2df(0x129)+'n\x20PM).'});let _0x258a59=[];const _0x117173=(_0x267858||'')['split']('@')[0xf3d+-0x8ee+-0x64f];if(_0x9dbf04){if(!_0xb91dc3)return(botRef?.['sock']||botRef)[_0x3ef2df(0x140)+'e'](_0x13bb60,{'text':'🔗\x20PM\x20Usage'+':\x20.antilin'+_0x3ef2df(0x1b0)+_0x3ef2df(0x116)+_0x3ef2df(0x112)+'d|all>'});_0x258a59=await resolveTargetsForSudo(_0xb91dc3);if(!_0x258a59[_0x3ef2df(0xf6)])return(botRef?.[_0x3ef2df(0x185)]||botRef)[_0x3ef2df(0x140)+'e'](_0x13bb60,{'text':_0x3ef2df(0x173)+_0x3ef2df(0x1b1)+_0x3ef2df(0x19a)+_0x3ef2df(0x152)+'r\x20\x27'+_0xb91dc3+'\x27.'});}else _0x258a59=await resolveTargetsForGroupAdmin(_0x117173),!_0x258a59[_0x3ef2df(0xf6)]&&(_0x258a59=[_0x778162],await(botRef?.['sock']||botRef)[_0x3ef2df(0x140)+'e'](_0x13bb60,{'text':'🔗\x20No\x20defau'+_0x3ef2df(0x123)+'ion\x20found.'+_0x3ef2df(0x12f)+'command\x20to'+_0x3ef2df(0x19c)+_0x3ef2df(0x16a)+_0x3ef2df(0x120)}));if(_0x5e6cae==='on'||_0x5e6cae===_0x3ef2df(0xdd)){const _0x1e3c62=_0x5e6cae==='on';let _0x4b6476=-0xe*0x296+0x11*0x1c7+0x5fd*0x1;for(const _0x2331f7 of _0x258a59){await setGroupEnabled(_0x2331f7,_0x1e3c62)&&_0x4b6476++;}await(botRef?.[_0x3ef2df(0x185)]||botRef)['sendMessag'+'e'](_0x13bb60,{'text':_0x3ef2df(0x157)+'\x20'+(_0x1e3c62?_0x3ef2df(0xf0):_0x3ef2df(0xe1))+_0x3ef2df(0x189)+_0x4b6476+'/'+_0x258a59[_0x3ef2df(0xf6)]+'\x20group(s).'});}else{if(_0x5e6cae===_0x3ef2df(0x15e)){let _0x370f15='🔗\x20*Antilin'+_0x3ef2df(0x137)+'\x0a';for(const _0x5f5d7a of _0x258a59){const {enabled:_0x2f9054}=await getGroupSetting(_0x5f5d7a);_0x370f15+=_0x5f5d7a+':\x20'+(_0x2f9054?_0x3ef2df(0x188):_0x3ef2df(0x1a8))+'\x0a';}await(botRef?.[_0x3ef2df(0x185)]||botRef)['sendMessag'+'e'](_0x13bb60,{'text':_0x370f15});}}}return;}try{if(_0x13603f){if(_0x3876b['key'][_0x3ef2df(0x14c)])return;if(await isadmin(botRef,_0x3876b))return;}else{if(_0x3876b[_0x3ef2df(0x11f)][_0x3ef2df(0x14c)])return;}}catch(_0x40194f){warn(_0x3ef2df(0x16e)+_0x3ef2df(0x18a)+_0x3ef2df(0x147)+_0x3ef2df(0xd8)+(_0x40194f?.['message']||_0x40194f));return;}if(_0x13603f){const _0x52f438=await getGroupSetting(_0x778162);if(!_0x52f438['enabled'])return;const _0x710f04=extractTextFromMessage(_0x3876b);let _0x5773b8=![];for(const _0x34e88f of _0x52f438[_0x3ef2df(0xe7)]){if(_0x34e88f[_0x3ef2df(0x102)]('@')&&_0x34e88f===_0x267858){_0x5773b8=!![];break;}if(!_0x34e88f[_0x3ef2df(0x102)]('@')&&_0x710f04[_0x3ef2df(0x102)](_0x34e88f)){_0x5773b8=!![];break;}}if(_0x5773b8)return;messageContainsLinkLocal(_0x3876b)&&await enforceImmediate(_0x3876b);}}export async function cleanup(){const _0x24cdd2=_0x12af8e;shuttingDown=!![],processedMessageIds[_0x24cdd2(0xe0)](_0x5e6bd9=>clearTimeout(_0x5e6bd9)),processedMessageIds[_0x24cdd2(0x1a3)](),perUserWarnings['clear'](),botRef=null,info(_0x24cdd2(0x16e)+_0x24cdd2(0x169)+'p.');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};