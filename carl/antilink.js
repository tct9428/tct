const _0x16c2ff=_0x5dab;(function(_0x47e113,_0x4b7f9a){const _0x10d65c=_0x5dab,_0x51d95f=_0x47e113();while(!![]){try{const _0x4bf6f3=-parseInt(_0x10d65c(0x27b))/(-0x1e7*0xd+0x2557+-0xc9b)+-parseInt(_0x10d65c(0x275))/(0xfea*0x2+0x17*0x179+0x1*-0x41b1)+-parseInt(_0x10d65c(0x299))/(-0x1ec5*0x1+-0x1*0x5c6+0x248e)+-parseInt(_0x10d65c(0x2ba))/(-0x7*0x503+0xdb7+0x7*0x30e)*(-parseInt(_0x10d65c(0x20e))/(-0x1*-0x20ef+0xdd9+-0x2ec3))+-parseInt(_0x10d65c(0x210))/(-0x1db1+0x87*0x23+0xb42)+-parseInt(_0x10d65c(0x276))/(-0x4*0x4f7+-0x17b7+0x2b9a)+parseInt(_0x10d65c(0x216))/(0x210c+-0x1c92+0x2*-0x239)*(parseInt(_0x10d65c(0x24f))/(-0x3d*0x4b+0x823+0x9c5));if(_0x4bf6f3===_0x4b7f9a)break;else _0x51d95f['push'](_0x51d95f['shift']());}catch(_0x192a5e){_0x51d95f['push'](_0x51d95f['shift']());}}}(_0x33a0,0xe2*-0xe38+-0x134d*-0x107+0x23*0x2e8d));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';function _0x33a0(){const _0x575cc0=['\x20sendWarni','E\x20SET\x20whit','videoMessa','💬\x20*Chat:*\x20','count','bled,\x20whit','\x20Applying\x20','RY_COUNT','SET\x20enable','DELETE_RET','\x20schema\x20cr','isCommand','extendedTe','cipantsUpd','ate','r\x20admin/bo','sendWarnin','\x20groups\x20fo','ettings','resolveNam','d\x20=\x20exclud','key','MAX_WARNS','e\x20failed','\x20cleaned\x20u','DISABLED','map','from','6849eNbkjk','antilinkwl','maining\x20wa','eleted\x20lin','toLowerCas','\x20WHERE\x20cha','index','\x20remove\x20pa','run','status','get','*\x0a\x0a','remoteJid','match','tus>\x20(use\x20','\x20isCtxFrom','\x20group(s).','[antilink]','\x20\x20\x20CREATE\x20','getUniqueJ','\x20WHERE\x20key','ng\x20failed:',',\x20whitelis','participan','DO\x20UPDATE\x20','✅\x20ON','LOG_DELETE','WARNING_ME','t_jid\x20=\x20?','\x20getGroupS','has','led','ng\x20admin-c','\x20\x20\x20\x20\x20);\x0a\x20\x20','xtMessage','led:\x20','oUserJid','endsWith','1203156IblbPn','6389957OhZDeG','k\x20Status*\x0a','replace','isArray','forEach','1658651brnZgT','ids','d\x20here.\x20Re','\x20forward\x20d','sock','delete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','min/bot\x20me','led\x20for\x20','\x20(chat_jid',':\x20.antilin','enabled','split',':<alias|ji','catch','antilink','antilink\x20<','push','REMOVE_ON_','\x20enforceme','ENABLED','OT\x20EXISTS\x20','stringify',')\x20DO\x20UPDAT','url','hitelist\x20f','findings','eation\x20fai','🔗\x20Antilink','conversati','4451616wJyiYY','SEND_WARNI','D_LINKS','hat_jid\x20TE','Warning\x20er','cluded.whi','filter','nt).','DEFAULT\x20\x27[','any\x20target','k:\x20','ailed\x20for\x20','k\x20Deletion','g\x20for\x20admi','INSERT\x20INT','fromMe','t\x20message\x20','(?,\x20?)\x0a\x20\x20\x20','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','cing\x20on\x20ad','🚫\x20*Antilin','includes','ed.enabled','etting\x20err','set','l\x20Message:','message','antilink_s','d|all>','t)\x20VALUES\x20','heck\x20faile','```','ailed:\x20','48228BdiOzf','🔗\x20No\x20defau','nt\x20group\x20o','mediate\x20er','(immediate','lete_prefs','❌\x20OFF','tlds','\x20Skipping\x20','*\x0a```','INTEGER\x20DE','length','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20KEY,\x0a\x20\x20\x20\x20','rnings}','Admin\x20chec','slice','DEDUPE_TTL','\x20setGroupW','trim','XT\x20PRIMARY','nly.','parse','SSAGE','chat_jid)\x20','schema\x20ens','_MS','ON\x20CONFLIC','test','ssage\x20(def','\x20Early\x20adm','🔗\x20{user},\x20','\x20initializ','elist\x20FROM','value','status>\x20gp','r\x20\x27','nabled\x20fai','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','ror:\x20','\x20\x20\x20\x20\x20\x20','460XjGazN','(defensive','10480836vuQQop','max','ured.',',\x20enabled)','sendMessag','FAULT\x200,\x0a\x20','65056UesDpv','\x20CONFLICT(','k\x20failed:\x20','\x20\x20\x20\x20\x20\x20\x20\x20ON','groupMetad','itialized\x20','gp:<alias|','jid','{warnings}','\x20the\x20curre','t\x20resolve\x20','age.','\x20enforceIm','whitelist','or\x20for\x20','\x20Failed\x20to','command\x20to','\x20=\x20\x27target','caption','k\x20<on|off|','n/bot\x20mess','crement\x20fo','all','normalizeT','clear','@g.us',',\x20?)\x0a\x20\x20\x20\x20\x20','oup','Unknown'];_0x33a0=function(){return _0x575cc0;};return _0x33a0();}import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x7998f1 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x2ef387 from'linkify-it';import{createRequire}from'module';const require=createRequire(import.meta[_0x16c2ff(0x293)]),tlds=require('tlds');export const name='antilink';export const version='3.6.4';export const priority=-0xe1+0xb14+-0x9cf;export const commands=[_0x16c2ff(0x28a),_0x16c2ff(0x250)];const TABLE_SETTINGS=_0x16c2ff(0x2b4)+_0x16c2ff(0x245);let botRef=null,shuttingDown=![],config={};const linkify=_0x2ef387();linkify[_0x16c2ff(0x1ec)](tlds);const processedMessageIds=new Map(),perUserWarnings=new Map();function refreshConfig(){const _0x4477b7=_0x16c2ff,_0x18db7a=getConfig()||{};config={'MAX_WARNS':0x3,'REMOVE_ON_MAX':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x4477b7(0x204)+'links\x20are\x20'+'not\x20allowe'+_0x4477b7(0x27d)+_0x4477b7(0x251)+'rnings\x20{wa'+_0x4477b7(0x1f3),'VALIDATION_TIMEOUT_MS':0xfa0,'LOG_DELETED_LINKS':!![],'GLOBAL_CONCURRENCY':0x2,'DELETE_RETRY_COUNT':0x2,'DEDUPE_TTL_MS':0x1388,..._0x18db7a['ANTILINK']||{}};}function setupApi(_0x369470){botRef=_0x369470;}async function ensureSchema(){const _0x4a7db9=_0x16c2ff;try{await db['exec'](_0x4a7db9(0x281)+_0x4a7db9(0x261)+'TABLE\x20IF\x20N'+_0x4a7db9(0x290)+TABLE_SETTINGS+(_0x4a7db9(0x2ab)+_0x4a7db9(0x20b)+_0x4a7db9(0x29c)+_0x4a7db9(0x1f9)+_0x4a7db9(0x1f2)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20enabled\x20'+_0x4a7db9(0x1ef)+_0x4a7db9(0x215)+_0x4a7db9(0x1f1)+'\x20\x20\x20\x20\x20white'+'list\x20TEXT\x20'+_0x4a7db9(0x2a1)+']\x27\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x4a7db9(0x270)+_0x4a7db9(0x20d))),info(_0x4a7db9(0x260)+'\x20Database\x20'+_0x4a7db9(0x1fe)+_0x4a7db9(0x212));}catch(_0xeea9b0){error(_0xeea9b0,_0x4a7db9(0x260)+_0x4a7db9(0x23d)+_0x4a7db9(0x296)+_0x4a7db9(0x26e));throw _0xeea9b0;}}async function getGroupSetting(_0x15037f){const _0x271b97=_0x16c2ff;try{const _0x5d874e=await db['get']('SELECT\x20ena'+_0x271b97(0x238)+_0x271b97(0x206)+'\x20'+TABLE_SETTINGS+(_0x271b97(0x254)+_0x271b97(0x26b)),[_0x15037f]);return{'enabled':!!_0x5d874e?.[_0x271b97(0x286)],'whitelist':_0x5d874e?JSON[_0x271b97(0x1fb)](_0x5d874e[_0x271b97(0x223)]||'[]'):[]};}catch(_0x27991f){return warn(_0x271b97(0x260)+_0x271b97(0x26c)+_0x271b97(0x2b0)+_0x271b97(0x224)+_0x15037f+':\x20'+(_0x27991f?.['message']||_0x27991f)),{'enabled':![],'whitelist':[]};}}function _0x5dab(_0x27df90,_0x3e0bb3){const _0x2e9d45=_0x33a0();return _0x5dab=function(_0x3d35a3,_0x580513){_0x3d35a3=_0x3d35a3-(0x741*0x1+0x6d*-0x4b+-0xb*-0x26b);let _0x13b80f=_0x2e9d45[_0x3d35a3];return _0x13b80f;},_0x5dab(_0x27df90,_0x3e0bb3);}async function setGroupEnabled(_0x2a592a,_0x47e9ed){const _0x5f5510=_0x16c2ff;try{return await db[_0x5f5510(0x257)]('INSERT\x20INT'+'O\x20'+TABLE_SETTINGS+(_0x5f5510(0x284)+_0x5f5510(0x213)+'\x20VALUES\x20(?'+_0x5f5510(0x230)+_0x5f5510(0x219)+_0x5f5510(0x217)+_0x5f5510(0x1fd)+_0x5f5510(0x267)+_0x5f5510(0x23b)+_0x5f5510(0x247)+_0x5f5510(0x2af)+';'),[_0x2a592a,_0x47e9ed?0xd4f*0x2+-0x2001+-0x114*-0x5:0x801+-0x12b*-0x1+-0x92c]),!![];}catch(_0x4dedca){return error(_0x4dedca,_0x5f5510(0x260)+'\x20setGroupE'+_0x5f5510(0x20a)+_0x5f5510(0x283)+_0x2a592a),![];}}async function setGroupWhitelist(_0x3f7d6d,_0x12b96f){const _0x2e7470=_0x16c2ff;try{const _0x2a90d5=Array[_0x2e7470(0x24e)](new Set((_0x12b96f||[])[_0x2e7470(0x24d)](String)[_0x2e7470(0x29f)](Boolean)));return await db[_0x2e7470(0x257)](_0x2e7470(0x2a7)+'O\x20'+TABLE_SETTINGS+(_0x2e7470(0x284)+_0x2e7470(0x265)+_0x2e7470(0x2b6)+_0x2e7470(0x2aa)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2e7470(0x200)+'T(chat_jid'+_0x2e7470(0x292)+_0x2e7470(0x234)+'elist\x20=\x20ex'+_0x2e7470(0x29e)+'telist;'),[_0x3f7d6d,JSON[_0x2e7470(0x291)](_0x2a90d5)]),!![];}catch(_0x14c48c){return error(_0x14c48c,_0x2e7470(0x260)+_0x2e7470(0x1f7)+_0x2e7470(0x294)+_0x2e7470(0x2a4)+_0x3f7d6d),![];}}function extractTextFromMessage(_0xcf4fd5){const _0x39f515=_0x16c2ff;if(!_0xcf4fd5||!_0xcf4fd5[_0x39f515(0x2b3)])return'';const _0x38afa9=_0xcf4fd5[_0x39f515(0x2b3)];return _0x38afa9[_0x39f515(0x298)+'on']||_0x38afa9[_0x39f515(0x23f)+_0x39f515(0x271)]?.['text']||_0x38afa9['imageMessa'+'ge']?.['caption']||_0x38afa9[_0x39f515(0x235)+'ge']?.[_0x39f515(0x228)]||'';}function messageContainsLinkLocal(_0x2dc7f1){const _0x2f39f6=_0x16c2ff,_0x43bf8e=extractTextFromMessage(_0x2dc7f1);if(!_0x43bf8e)return![];const _0x455d43=linkify[_0x2f39f6(0x25c)](_0x43bf8e);if(_0x455d43&&_0x455d43['length']>0x1*-0x877+-0x1*0x5c6+0xe3d)return!![];const _0xa08e2=/(?:https?:\/\/)?(?:www\.)?[a-z0-9\-]{1,63}\.(?:[a-z]{2,63})(?:[\/:\?\#\s]|$)/i;if(_0xa08e2[_0x2f39f6(0x201)](_0x43bf8e))return!![];return![];}function getMessageKey(_0x1e12d9){const _0x535ccc=_0x16c2ff;if(!_0x1e12d9?.['key']?.['id'])return null;return _0x1e12d9[_0x535ccc(0x248)][_0x535ccc(0x25b)]+':'+_0x1e12d9[_0x535ccc(0x248)]['id'];}async function isCtxFromAdmin(_0x5dc1bb){const _0x17d58a=_0x16c2ff;try{if(!_0x5dc1bb)return![];if(_0x5dc1bb[_0x17d58a(0x248)]?.['fromMe'])return!![];return!!await isadmin(botRef,_0x5dc1bb);}catch(_0x14c5c7){return warn('[antilink]'+_0x17d58a(0x25e)+_0x17d58a(0x1f4)+_0x17d58a(0x218)+(_0x14c5c7?.['message']||_0x14c5c7)),!![];}}async function deleteWithRetry(_0x1ce010){const _0x4e9806=_0x16c2ff,_0x287cc8=Math[_0x4e9806(0x211)](-0x1*0x527+0xf8e+-0x2*0x533,config[_0x4e9806(0x23c)+_0x4e9806(0x23a)]||-0x17d*0x19+0x1*-0xb35+-0x1*-0x306b),_0x1b0bb5=_0x1ce010[_0x4e9806(0x248)]?.[_0x4e9806(0x25b)];if(!_0x1b0bb5)return![];for(let _0x23e19a=0x205*-0x7+-0x11*-0x17d+-0xb29;_0x23e19a<=_0x287cc8;_0x23e19a++){try{const _0x17275b=botRef?.[_0x4e9806(0x27f)]||botRef;return await _0x17275b[_0x4e9806(0x214)+'e'](_0x1b0bb5,{'delete':_0x1ce010[_0x4e9806(0x248)]}),!![];}catch(_0x8ff8c2){if(_0x23e19a<_0x287cc8){await new Promise(_0x1f8b8d=>setTimeout(_0x1f8b8d,(0x197*-0xb+-0x3f5*0x2+0x1a93)*_0x23e19a));continue;}return warn(_0x4e9806(0x260)+'\x20deleteWit'+'hRetry\x20fai'+_0x4e9806(0x272)+(_0x8ff8c2?.[_0x4e9806(0x2b3)]||_0x8ff8c2)),![];}}return![];}async function getLogTargetJid(){const _0x151f06=_0x16c2ff;try{const _0x151d13=await db[_0x151f06(0x259)]('SELECT\x20val'+'ue\x20FROM\x20de'+_0x151f06(0x2bf)+_0x151f06(0x263)+_0x151f06(0x227)+'_jid\x27');return _0x151d13?.[_0x151f06(0x207)]||getBotJid();}catch(_0x1c8fd9){return getBotJid();}}async function forwardDeletedLink(_0x1e2366){const _0x36107d=_0x16c2ff;if(!config[_0x36107d(0x269)+_0x36107d(0x29b)])return;try{if(await isCtxFromAdmin(_0x1e2366))return;const _0x4ef2b2=await getLogTargetJid();if(!_0x4ef2b2)return;const _0x285b8f=_0x1e2366[_0x36107d(0x248)]?.[_0x36107d(0x266)+'t']||_0x1e2366[_0x36107d(0x248)]?.[_0x36107d(0x25b)]||_0x36107d(0x232),_0x520bdf=_0x1e2366[_0x36107d(0x248)]?.[_0x36107d(0x25b)],_0x5593bf=extractTextFromMessage(_0x1e2366);let _0xfeda02='PM';try{if(_0x520bdf&&_0x520bdf[_0x36107d(0x274)](_0x36107d(0x22f))){const _0x34482f=await(botRef?.[_0x36107d(0x27f)]||botRef)[_0x36107d(0x21a)+'ata'](_0x520bdf);_0xfeda02=_0x34482f['subject'];}}catch(_0x3ec694){_0xfeda02='Unknown\x20Gr'+_0x36107d(0x231);}const _0x2afcdd=_0x36107d(0x2ad)+_0x36107d(0x2a5)+_0x36107d(0x25a)+('👤\x20*User:*\x20'+'@'+String(_0x285b8f)[_0x36107d(0x287)]('@')[0xef*-0x18+0x1461+0x207]+'\x0a')+(_0x36107d(0x236)+_0xfeda02+'\x20('+_0x520bdf+')\x0a')+('🔗\x20*Origina'+_0x36107d(0x2b2)+_0x36107d(0x1ee)+_0x5593bf+_0x36107d(0x2b8));await(botRef?.[_0x36107d(0x27f)]||botRef)[_0x36107d(0x214)+'e'](_0x4ef2b2,{'text':_0x2afcdd,'mentions':[_0x285b8f]});}catch(_0x2f11ed){warn(_0x36107d(0x260)+_0x36107d(0x225)+_0x36107d(0x27e)+_0x36107d(0x252)+_0x36107d(0x2a3)+_0x2f11ed[_0x36107d(0x2b3)]);}}function userKey(_0x10aae2,_0x554855){return _0x10aae2+'::'+_0x554855;}async function incrementWarningAndMaybeRemove(_0x5cd744){const _0x2bfe63=_0x16c2ff;try{if(await isCtxFromAdmin(_0x5cd744))return info('[antilink]'+_0x2bfe63(0x1ed)+'warning\x20in'+_0x2bfe63(0x22b)+_0x2bfe63(0x242)+_0x2bfe63(0x2a9)+_0x2bfe63(0x20f)+').'),{'count':0x0,'removed':![]};const _0x1b14d8=_0x5cd744[_0x2bfe63(0x248)]?.[_0x2bfe63(0x25b)],_0xf62ebd=_0x5cd744[_0x2bfe63(0x248)]?.[_0x2bfe63(0x266)+'t']||_0x5cd744['key']?.[_0x2bfe63(0x25b)]||'';if(!_0x1b14d8||!_0xf62ebd)return{'count':0x0,'removed':![]};const _0x36b02d=userKey(_0x1b14d8,_0xf62ebd),_0x413271=perUserWarnings['get'](_0x36b02d)||{'count':0x0};_0x413271[_0x2bfe63(0x237)]++,perUserWarnings[_0x2bfe63(0x2b1)](_0x36b02d,_0x413271);if(config[_0x2bfe63(0x28d)+'MAX']&&_0x413271[_0x2bfe63(0x237)]>=config[_0x2bfe63(0x249)]){const _0x3853f5=botRef?.[_0x2bfe63(0x27f)]||botRef;try{await _0x3853f5['groupParti'+_0x2bfe63(0x240)+_0x2bfe63(0x241)](_0x1b14d8,[_0xf62ebd],'remove');}catch(_0x42828d){warn('[antilink]'+'\x20Could\x20not'+_0x2bfe63(0x256)+'rticipant\x20'+_0xf62ebd+':\x20'+(_0x42828d?.['message']||_0x42828d));}return perUserWarnings[_0x2bfe63(0x280)](_0x36b02d),{'count':_0x413271[_0x2bfe63(0x237)],'removed':!![]};}return{'count':_0x413271[_0x2bfe63(0x237)],'removed':![]};}catch(_0x48e5ba){return warn('[antilink]'+'\x20increment'+_0x2bfe63(0x29d)+_0x2bfe63(0x20c)+(_0x48e5ba?.[_0x2bfe63(0x2b3)]||_0x48e5ba)),{'count':0x0,'removed':![]};}}async function sendWarning(_0x262ad0,_0x38ff02){const _0x460db3=_0x16c2ff;try{if(await isCtxFromAdmin(_0x262ad0)){info(_0x460db3(0x260)+_0x460db3(0x1ed)+_0x460db3(0x243)+_0x460db3(0x2a6)+_0x460db3(0x22a)+_0x460db3(0x221));return;}}catch(_0x33e5dc){warn(_0x460db3(0x260)+'\x20sendWarni'+_0x460db3(0x26f)+_0x460db3(0x2b7)+'d:\x20'+(_0x33e5dc?.[_0x460db3(0x2b3)]||_0x33e5dc));return;}if(!config[_0x460db3(0x29a)+'NG'])return;try{const _0x41891a=_0x262ad0[_0x460db3(0x248)]?.[_0x460db3(0x266)+'t']||_0x262ad0[_0x460db3(0x248)]?.[_0x460db3(0x25b)]||'',_0x383578=Math[_0x460db3(0x211)](0x1e6+0x8d1+-0xab7,config['MAX_WARNS']-_0x38ff02),_0x4c12ac=config[_0x460db3(0x26a)+_0x460db3(0x1fc)]['replace']('{user}','@'+_0x41891a[_0x460db3(0x287)]('@')[0x17ea+0x2*-0x9f1+0x81*-0x8])['replace'](_0x460db3(0x21e),String(_0x383578)),_0x34406a=_0x262ad0[_0x460db3(0x248)]['remoteJid'],_0x6b45a6=botRef?.['sock']||botRef;await _0x6b45a6[_0x460db3(0x214)+'e'](_0x34406a,{'text':_0x4c12ac,'mentions':[_0x41891a]});}catch(_0x2df323){warn(_0x460db3(0x260)+_0x460db3(0x233)+_0x460db3(0x264)+'\x20'+(_0x2df323?.[_0x460db3(0x2b3)]||_0x2df323));}}async function enforceImmediate(_0x470e32){const _0x490498=_0x16c2ff;try{const _0x3f4a86=getMessageKey(_0x470e32);if(!_0x3f4a86)return;if(processedMessageIds['has'](_0x3f4a86))return;processedMessageIds[_0x490498(0x2b1)](_0x3f4a86,setTimeout(()=>processedMessageIds[_0x490498(0x280)](_0x3f4a86),config[_0x490498(0x1f6)+_0x490498(0x1ff)]||-0x253+0x1b05+-0x52a));if(await isCtxFromAdmin(_0x470e32)){info('[antilink]'+'\x20Not\x20enfor'+_0x490498(0x2ac)+_0x490498(0x282)+_0x490498(0x202)+'ensive).');return;}const _0x15bceb=await deleteWithRetry(_0x470e32);if(!_0x15bceb)return;await forwardDeletedLink(_0x470e32);const {count:_0x3dd782,removed:_0x3bd3c3}=await incrementWarningAndMaybeRemove(_0x470e32);!_0x3bd3c3&&await sendWarning(_0x470e32,_0x3dd782);}catch(_0x4c6e6f){warn(_0x490498(0x260)+_0x490498(0x222)+_0x490498(0x2bd)+_0x490498(0x20c)+(_0x4c6e6f?.[_0x490498(0x2b3)]||_0x4c6e6f));}}function splitRestForGp(_0x533293){const _0x5160f2=_0x16c2ff;if(!_0x533293)return{'left':'','gp':null};const _0x235a28=_0x533293[_0x5160f2(0x25c)](/\bgp[:\s]+(.+)$/i);if(_0x235a28)return{'left':_0x533293[_0x5160f2(0x1f5)](0x1*-0xb89+0x6b8+-0x1*-0x4d1,_0x235a28[_0x5160f2(0x255)])[_0x5160f2(0x1f8)](),'gp':_0x235a28[-0x3b8*-0x3+0x649+-0x1170]['trim']()};return{'left':_0x533293[_0x5160f2(0x1f8)](),'gp':null};}async function resolveTargetsForGroupAdmin(_0x2fe13c){const _0x53980e=_0x16c2ff,_0xfd9fac=await getDefault(_0x2fe13c)[_0x53980e(0x289)](()=>null);if(!_0xfd9fac)return[];const _0x5b560d=Array['isArray'](_0xfd9fac)?_0xfd9fac:[_0xfd9fac];let _0x69c9f1=[];for(const _0x2aa62a of _0x5b560d){const _0x4d7beb=await getConnection(_0x2aa62a)['catch'](()=>null);if(Array[_0x53980e(0x279)](_0x4d7beb))_0x69c9f1[_0x53980e(0x28c)](..._0x4d7beb);else{if(_0x4d7beb)_0x69c9f1[_0x53980e(0x28c)](String(_0x4d7beb));}}return Array[_0x53980e(0x24e)](new Set(_0x69c9f1));}async function resolveTargetsForSudo(_0x360397){const _0x7fee1f=_0x16c2ff;if(!_0x360397)return[];if(_0x360397[_0x7fee1f(0x253)+'e']()===_0x7fee1f(0x22c))return await _0x7998f1[_0x7fee1f(0x262)+_0x7fee1f(0x27c)]();const _0xc29ad1=await _0x7998f1[_0x7fee1f(0x246)+'e'](_0x360397);if(_0xc29ad1)return[_0xc29ad1];if(_0x360397['includes']('@'))return[_0x7998f1[_0x7fee1f(0x22d)+_0x7fee1f(0x273)](_0x360397)];return[];}async function findStoredMatchFromFindings(_0x2b26eb=[]){const _0x15b589=_0x16c2ff;try{const _0x591e70=await listSudo();if(!_0x591e70?.['length'])return null;const _0x2a73c7=new Set(_0x591e70[_0x15b589(0x24d)](String));for(const _0x2ef369 of _0x2b26eb||[]){if(_0x2ef369?.[_0x15b589(0x21d)]&&_0x2a73c7[_0x15b589(0x26d)](normalizeToJid(_0x2ef369[_0x15b589(0x21d)])))return normalizeToJid(_0x2ef369[_0x15b589(0x21d)]);}return null;}catch(_0x21e26c){return null;}}export async function initialize(_0x2c2e97){const _0x1c6201=_0x16c2ff;try{setupApi(_0x2c2e97),await ensureSchema(),refreshConfig(),shuttingDown=![],info('[antilink]'+'\x20module\x20in'+_0x1c6201(0x21b)+_0x1c6201(0x2be)+_0x1c6201(0x28e)+_0x1c6201(0x2a0));}catch(_0x367c7f){error(_0x367c7f,_0x1c6201(0x260)+_0x1c6201(0x205)+_0x1c6201(0x24a));throw _0x367c7f;}}export async function onMessage(_0xc07b74){const _0x2672ab=_0x16c2ff;if(!_0xc07b74?.[_0x2672ab(0x248)]?.[_0x2672ab(0x25b)]||!_0xc07b74[_0x2672ab(0x2b3)]||shuttingDown)return;const _0x36c66d=_0xc07b74[_0x2672ab(0x248)]['remoteJid'],_0x2874fc=_0x36c66d[_0x2672ab(0x274)](_0x2672ab(0x22f)),_0x236717=_0xc07b74['key'][_0x2672ab(0x266)+'t']||_0xc07b74[_0x2672ab(0x248)][_0x2672ab(0x25b)],_0x4aedf5=extractTextFromMessage(_0xc07b74),_0x4f8492=(_0xc07b74['text']||_0x4aedf5)['trim'](),_0x5c816f=_0xc07b74['isCommand']&&_0x4f8492?_0x4f8492[_0x2672ab(0x287)](/\s+/)[0x2*-0xb1+-0x1fcb*-0x1+-0x1e69]['toLowerCas'+'e']()['replace']('/',''):null;if(_0xc07b74[_0x2672ab(0x23e)]&&commands['includes'](_0x5c816f)){let _0x2635a3=_0x36c66d,_0x5e368f=![],_0xf03113=![];if(_0x2874fc){if(await isadmin(botRef,_0xc07b74))_0x5e368f=!![];}else{if(_0xc07b74['key']['fromMe'])_0x5e368f=!![],_0xf03113=!![],_0x2635a3=getBotJid()||_0x36c66d;else{if(await isSudo(botRef,_0xc07b74)){_0x5e368f=!![],_0xf03113=!![];const _0x92d924=await userJidFromCtx(_0xc07b74)||{'findings':[]};_0x2635a3=await findStoredMatchFromFindings(_0x92d924[_0x2672ab(0x295)])||_0x36c66d;}}}if(!_0x5e368f)return;if(_0x5c816f==='antilink'){const _0x535ca2=_0x4f8492[_0x2672ab(0x278)](new RegExp('^/?'+_0x5c816f+'\x5cb','i'),'')[_0x2672ab(0x1f8)](),{left:_0x190967,gp:_0x2b66c5}=splitRestForGp(_0x535ca2),_0x4a0975=_0x190967[_0x2672ab(0x287)](/[, ]+/)[0x1188+0x35d+0x1*-0x14e5]?.[_0x2672ab(0x253)+'e']();if(!_0x4a0975||!['on','off',_0x2672ab(0x258)][_0x2672ab(0x2ae)](_0x4a0975))return(botRef?.[_0x2672ab(0x27f)]||botRef)['sendMessag'+'e'](_0x2635a3,{'text':'🔗\x20Usage:\x20.'+_0x2672ab(0x28b)+'on|off|sta'+_0x2672ab(0x25d)+_0x2672ab(0x21c)+'jid|all>\x20i'+'n\x20PM).'});let _0x407e19=[];const _0x1be86f=(_0x236717||'')[_0x2672ab(0x287)]('@')[-0x1379+-0x826+0x1b9f];if(_0xf03113){if(!_0x2b66c5)return(botRef?.[_0x2672ab(0x27f)]||botRef)[_0x2672ab(0x214)+'e'](_0x2635a3,{'text':'🔗\x20PM\x20Usage'+_0x2672ab(0x285)+_0x2672ab(0x229)+_0x2672ab(0x208)+_0x2672ab(0x288)+_0x2672ab(0x2b5)});_0x407e19=await resolveTargetsForSudo(_0x2b66c5);if(!_0x407e19[_0x2672ab(0x1f0)])return(botRef?.['sock']||botRef)[_0x2672ab(0x214)+'e'](_0x2635a3,{'text':'🔗\x20Could\x20no'+_0x2672ab(0x220)+_0x2672ab(0x2a2)+_0x2672ab(0x244)+_0x2672ab(0x209)+_0x2b66c5+'\x27.'});}else _0x407e19=await resolveTargetsForGroupAdmin(_0x1be86f),!_0x407e19['length']&&(_0x407e19=[_0x36c66d],await(botRef?.[_0x2672ab(0x27f)]||botRef)[_0x2672ab(0x214)+'e'](_0x2635a3,{'text':_0x2672ab(0x2bb)+'lt\x20connect'+'ion\x20found.'+_0x2672ab(0x239)+_0x2672ab(0x226)+_0x2672ab(0x21f)+_0x2672ab(0x2bc)+_0x2672ab(0x1fa)}));if(_0x4a0975==='on'||_0x4a0975==='off'){const _0x21f62d=_0x4a0975==='on';let _0x534fa3=0x12+0x5*0x235+-0xb1b;for(const _0x113c7e of _0x407e19){await setGroupEnabled(_0x113c7e,_0x21f62d)&&_0x534fa3++;}await(botRef?.['sock']||botRef)[_0x2672ab(0x214)+'e'](_0x2635a3,{'text':_0x2672ab(0x297)+'\x20'+(_0x21f62d?_0x2672ab(0x28f):_0x2672ab(0x24c))+'\x20for\x20'+_0x534fa3+'/'+_0x407e19[_0x2672ab(0x1f0)]+_0x2672ab(0x25f)});}else{if(_0x4a0975==='status'){let _0x13f39c='🔗\x20*Antilin'+_0x2672ab(0x277)+'\x0a';for(const _0x127e5e of _0x407e19){const {enabled:_0x4f23de}=await getGroupSetting(_0x127e5e);_0x13f39c+=_0x127e5e+':\x20'+(_0x4f23de?_0x2672ab(0x268):_0x2672ab(0x1eb))+'\x0a';}await(botRef?.[_0x2672ab(0x27f)]||botRef)[_0x2672ab(0x214)+'e'](_0x2635a3,{'text':_0x13f39c});}}}return;}try{if(_0x2874fc){if(_0xc07b74['key'][_0x2672ab(0x2a8)])return;if(await isadmin(botRef,_0xc07b74))return;}else{if(_0xc07b74['key'][_0x2672ab(0x2a8)])return;}}catch(_0x47a34f){warn(_0x2672ab(0x260)+_0x2672ab(0x203)+'in\x20check\x20f'+_0x2672ab(0x2b9)+(_0x47a34f?.[_0x2672ab(0x2b3)]||_0x47a34f));return;}if(_0x2874fc){const _0xe82ae9=await getGroupSetting(_0x36c66d);if(!_0xe82ae9['enabled'])return;const _0x13efed=extractTextFromMessage(_0xc07b74);let _0x1f5d42=![];for(const _0x5bdbca of _0xe82ae9['whitelist']){if(_0x5bdbca['includes']('@')&&_0x5bdbca===_0x236717){_0x1f5d42=!![];break;}if(!_0x5bdbca['includes']('@')&&_0x13efed[_0x2672ab(0x2ae)](_0x5bdbca)){_0x1f5d42=!![];break;}}if(_0x1f5d42)return;messageContainsLinkLocal(_0xc07b74)&&await enforceImmediate(_0xc07b74);}}export async function cleanup(){const _0x45ccc5=_0x16c2ff;shuttingDown=!![],processedMessageIds[_0x45ccc5(0x27a)](_0xa6b597=>clearTimeout(_0xa6b597)),processedMessageIds[_0x45ccc5(0x22e)](),perUserWarnings[_0x45ccc5(0x22e)](),botRef=null,info(_0x45ccc5(0x260)+_0x45ccc5(0x24b)+'p.');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};