const _0xed4ebe=_0x184a;(function(_0x400d19,_0xb20562){const _0x2dd098=_0x184a,_0x4c3657=_0x400d19();while(!![]){try{const _0x59ac6f=-parseInt(_0x2dd098(0x15b))/(-0x38*-0xb2+0xad5*-0x3+-0x670)+parseInt(_0x2dd098(0x137))/(-0x1396+0xe3e+0x55a)+parseInt(_0x2dd098(0x129))/(-0x5f2*-0x1+0x123f*-0x1+0xc50)+-parseInt(_0x2dd098(0x115))/(-0x1347+0x9b7*0x4+-0x1*0x1391)*(parseInt(_0x2dd098(0xc7))/(0x1*-0x995+0x86a+0x130))+parseInt(_0x2dd098(0x92))/(-0x1249*0x1+-0x231a+0x3569)*(-parseInt(_0x2dd098(0x107))/(-0x1*0x23d+0x4*0x968+-0x1f*0x124))+parseInt(_0x2dd098(0x159))/(-0x626+0x1c*0x141+-0x2*0xe77)*(-parseInt(_0x2dd098(0xac))/(0x45b*0x5+-0x1e6b+0x8ad))+-parseInt(_0x2dd098(0x143))/(0x1e53+-0x1786*0x1+-0x6c3)*(-parseInt(_0x2dd098(0xaf))/(-0x1434+0x4c0*0x1+-0xf7f*-0x1));if(_0x59ac6f===_0xb20562)break;else _0x4c3657['push'](_0x4c3657['shift']());}catch(_0x4b605b){_0x4c3657['push'](_0x4c3657['shift']());}}}(_0x4956,0x352b1+-0xc6e2*0x4+0x1a176));import{info,warn,error,debug}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x53c80c from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x24eeea from'linkify-it';import{createRequire}from'module';const require=createRequire(import.meta[_0xed4ebe(0x127)]),tlds=require('tlds');export const name='antilink';export const version='3.7.0';export const priority=0x1edc+0x6*-0x632+0x6b4;export const commands=['antilink','antilinkwl'];const TABLE_SETTINGS='antilink_s'+_0xed4ebe(0x9d);let botRef=null,shuttingDown=![],config={};const linkify=_0x24eeea();linkify[_0xed4ebe(0x11d)](tlds);const processedMessageIds=new Map(),perUserWarnings=new Map();function refreshConfig(){const _0x262015=_0xed4ebe,_0x38acec=getConfig()||{};config={'MAX_WARNS':0x3,'REMOVE_ON_MAX':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x262015(0xa5)+'links\x20are\x20'+_0x262015(0x155)+_0x262015(0x109)+_0x262015(0xde)+_0x262015(0xff)+_0x262015(0x11e),'VALIDATION_TIMEOUT_MS':0xfa0,'LOG_DELETED_LINKS':!![],'GLOBAL_CONCURRENCY':0x2,'DELETE_RETRY_COUNT':0x2,'DEDUPE_TTL_MS':0x1388,..._0x38acec[_0x262015(0xb1)]||{}};}function setupApi(_0x43b81d){botRef=_0x43b81d;}async function ensureSchema(){const _0x187e98=_0xed4ebe;try{await db[_0x187e98(0x11a)](_0x187e98(0xec)+'\x20\x20\x20CREATE\x20'+_0x187e98(0x10f)+'OT\x20EXISTS\x20'+TABLE_SETTINGS+(_0x187e98(0xb5)+_0x187e98(0x165)+_0x187e98(0x164)+'XT\x20PRIMARY'+_0x187e98(0x131)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x187e98(0x13c)+_0x187e98(0x103)+'FAULT\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20white'+_0x187e98(0xd9)+_0x187e98(0xd8)+']\x27\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x187e98(0x10d)+_0x187e98(0x96))),info(_0x187e98(0x140)+'\x20Database\x20'+_0x187e98(0xc9)+_0x187e98(0xa1));}catch(_0x185f55){error(_0x185f55,'[antilink]'+'\x20schema\x20cr'+_0x187e98(0x100)+'led');throw _0x185f55;}}function _0x184a(_0x17b763,_0x4e8067){const _0x555a92=_0x4956();return _0x184a=function(_0x2515d5,_0x2221cb){_0x2515d5=_0x2515d5-(-0x3e*0x7c+-0x2*-0xcb4+0x1*0x530);let _0x312abc=_0x555a92[_0x2515d5];return _0x312abc;},_0x184a(_0x17b763,_0x4e8067);}async function getGroupSetting(_0x4dc6a4){const _0x3e942c=_0xed4ebe;try{const _0xdfce98=await db[_0x3e942c(0x132)](_0x3e942c(0x14e)+'bled,\x20whit'+_0x3e942c(0x168)+'\x20'+TABLE_SETTINGS+(_0x3e942c(0xc3)+_0x3e942c(0x135)),[_0x4dc6a4]);return{'enabled':!!_0xdfce98?.[_0x3e942c(0xd7)],'whitelist':_0xdfce98?JSON[_0x3e942c(0xc4)](_0xdfce98['whitelist']||'[]'):[]};}catch(_0x41df1e){return warn(_0x3e942c(0x140)+_0x3e942c(0xb0)+_0x3e942c(0x93)+_0x3e942c(0x15a)+_0x4dc6a4+':\x20'+(_0x41df1e?.[_0x3e942c(0x151)]||_0x41df1e)),{'enabled':![],'whitelist':[]};}}async function setGroupEnabled(_0x7259cf,_0x5f1238){const _0x4a2302=_0xed4ebe;try{return await db['run'](_0x4a2302(0x150)+'O\x20'+TABLE_SETTINGS+(_0x4a2302(0x139)+',\x20enabled)'+_0x4a2302(0xf0)+_0x4a2302(0x153)+'\x20\x20\x20\x20\x20\x20\x20\x20ON'+_0x4a2302(0x94)+_0x4a2302(0xa8)+'DO\x20UPDATE\x20'+'SET\x20enable'+_0x4a2302(0xdc)+'ed.enabled'+';'),[_0x7259cf,_0x5f1238?-0x1338+0x1d9*0xc+-0x2f3:-0xb6*0x15+-0x76*0x3+-0x57*-0x30]),!![];}catch(_0x5d9d77){return error(_0x5d9d77,_0x4a2302(0x140)+_0x4a2302(0x113)+'nabled\x20fai'+_0x4a2302(0xdf)+_0x7259cf),![];}}async function setGroupWhitelist(_0x5ded17,_0x90dbbf){const _0x417c55=_0xed4ebe;try{const _0x59dc94=Array[_0x417c55(0x158)](new Set((_0x90dbbf||[])[_0x417c55(0x9e)](String)[_0x417c55(0x152)](Boolean)));return await db['run'](_0x417c55(0x150)+'O\x20'+TABLE_SETTINGS+('\x20(chat_jid'+_0x417c55(0x9c)+_0x417c55(0x97)+'(?,\x20?)\x0a\x20\x20\x20'+_0x417c55(0x10c)+_0x417c55(0x166)+'T(chat_jid'+')\x20DO\x20UPDAT'+_0x417c55(0x14d)+'elist\x20=\x20ex'+_0x417c55(0xb2)+_0x417c55(0x12c)),[_0x5ded17,JSON[_0x417c55(0x13f)](_0x59dc94)]),!![];}catch(_0x366eca){return error(_0x366eca,_0x417c55(0x140)+_0x417c55(0x160)+_0x417c55(0x15e)+_0x417c55(0x110)+_0x5ded17),![];}}function extractTextFromMessage(_0x25f8f5){const _0x9067a0=_0xed4ebe;if(!_0x25f8f5||!_0x25f8f5[_0x9067a0(0x151)])return'';const _0x414e80=_0x25f8f5['message'];return _0x414e80[_0x9067a0(0x12f)+'on']||_0x414e80[_0x9067a0(0x106)+_0x9067a0(0x14b)]?.[_0x9067a0(0x149)]||_0x414e80['imageMessa'+'ge']?.['caption']||_0x414e80[_0x9067a0(0xc5)+'ge']?.[_0x9067a0(0xef)]||'';}function messageContainsLinkLocal(_0x568537){const _0x28d042=_0xed4ebe,_0x1e5a8a=extractTextFromMessage(_0x568537);if(!_0x1e5a8a)return![];const _0x4052c0=linkify[_0x28d042(0xf5)](_0x1e5a8a);if(_0x4052c0&&_0x4052c0[_0x28d042(0xae)]>0x135+0x124f+-0x1384)return!![];const _0x5d96fb=/(?:https?:\/\/)?(?:www\.)?[a-z0-9\-]{1,63}\.(?:[a-z]{2,63})(?:[\/:\?\#\s]|$)/i;if(_0x5d96fb['test'](_0x1e5a8a))return!![];return![];}function getMessageKey(_0x3a0f31){const _0x300592=_0xed4ebe;if(!_0x3a0f31?.[_0x300592(0xd5)]?.['id'])return null;return _0x3a0f31[_0x300592(0xd5)][_0x300592(0x162)]+':'+_0x3a0f31[_0x300592(0xd5)]['id'];}async function deleteWithRetry(_0x9b4bca){const _0x2257e6=_0xed4ebe,_0x43e196=Math[_0x2257e6(0xe7)](0xb3*0x35+0x113+-0x2621,config[_0x2257e6(0x167)+_0x2257e6(0xe6)]||0x29b*0x1+0x13*-0x7+-0x215),_0x3a8c88=_0x9b4bca[_0x2257e6(0xd5)]?.[_0x2257e6(0x162)];if(!_0x3a8c88)return![];for(let _0x5b58f0=0x2ec*0x4+-0x1f32+0x1383;_0x5b58f0<=_0x43e196;_0x5b58f0++){try{const _0x5ac99a=botRef?.['sock']||botRef;return await _0x5ac99a[_0x2257e6(0xc0)+'e'](_0x3a8c88,{'delete':_0x9b4bca[_0x2257e6(0xd5)]}),!![];}catch(_0x42700e){if(_0x5b58f0<_0x43e196){await new Promise(_0x4f60a1=>setTimeout(_0x4f60a1,(-0x1*0x751+-0x2369+0x2be6)*_0x5b58f0));continue;}return warn(_0x2257e6(0x140)+'\x20deleteWit'+_0x2257e6(0xe8)+_0x2257e6(0x157)+(_0x42700e?.['message']||_0x42700e)),![];}}return![];}async function getLogTargetJid(){const _0x47068e=_0xed4ebe;try{const _0x3942c3=await db[_0x47068e(0x132)](_0x47068e(0x104)+_0x47068e(0xa9)+_0x47068e(0xad)+_0x47068e(0xc1)+_0x47068e(0x120)+'_jid\x27');return _0x3942c3?.['value']||getBotJid();}catch(_0x4383e5){return getBotJid();}}async function forwardDeletedLink(_0x13488a,_0x256cd7){const _0x564cd8=_0xed4ebe;if(!config[_0x564cd8(0xa2)+_0x564cd8(0xdd)])return;try{if(_0x256cd7[_0x564cd8(0x10e)])return;const _0x3a8768=await getLogTargetJid();if(!_0x3a8768)return;const _0x2008ff=_0x13488a[_0x564cd8(0xd5)]?.[_0x564cd8(0x134)+'t']||_0x13488a[_0x564cd8(0xd5)]?.['remoteJid']||_0x564cd8(0x14c),_0x492eb3=_0x13488a[_0x564cd8(0xd5)]?.['remoteJid'],_0x37548a=extractTextFromMessage(_0x13488a);let _0xbe4949='PM';try{if(_0x492eb3&&_0x492eb3['endsWith']('@g.us')){const _0x323dac=await(botRef?.[_0x564cd8(0xa4)]||botRef)[_0x564cd8(0x10b)+_0x564cd8(0x90)](_0x492eb3);_0xbe4949=_0x323dac[_0x564cd8(0xfe)];}}catch(_0x437d9a){_0xbe4949='Unknown\x20Gr'+_0x564cd8(0x141);}const _0x4b346c='ðŸš«\x20*Antilin'+'k\x20Deletion'+_0x564cd8(0xd0)+('ðŸ‘¤\x20*User:*\x20'+'@'+String(_0x2008ff)['split']('@')[-0xed4+0x10bb+0x1e7*-0x1]+'\x0a')+(_0x564cd8(0xa0)+_0xbe4949+'\x20('+_0x492eb3+')\x0a')+(_0x564cd8(0xc8)+'l\x20Message:'+_0x564cd8(0x13b)+_0x37548a+_0x564cd8(0xf2));await(botRef?.[_0x564cd8(0xa4)]||botRef)[_0x564cd8(0xc0)+'e'](_0x3a8768,{'text':_0x4b346c,'mentions':[_0x2008ff]});}catch(_0x53c59e){warn(_0x564cd8(0x140)+'\x20Failed\x20to'+_0x564cd8(0x142)+_0x564cd8(0xd3)+_0x564cd8(0x12d)+_0x53c59e[_0x564cd8(0x151)]);}}function userKey(_0x59f833,_0x2bc130){return _0x59f833+'::'+_0x2bc130;}async function incrementWarningAndMaybeRemove(_0x488e52,_0x3eb3b0){const _0x6517dd=_0xed4ebe;try{if(_0x488e52['key'][_0x6517dd(0xba)]||_0x3eb3b0['isAdmin'])return info(_0x6517dd(0x140)+'\x20Skipping\x20'+_0x6517dd(0x126)+'crement\x20fo'+_0x6517dd(0x117)+_0x6517dd(0x138)+_0x6517dd(0x101)+_0x6517dd(0xe2)+_0x6517dd(0xeb)),{'count':0x0,'removed':![]};const _0x72a698=_0x488e52[_0x6517dd(0xd5)]?.[_0x6517dd(0x162)],_0x37969d=_0x488e52[_0x6517dd(0xd5)]?.[_0x6517dd(0x134)+'t']||_0x488e52[_0x6517dd(0xd5)]?.[_0x6517dd(0x162)]||'';if(!_0x72a698||!_0x37969d)return{'count':0x0,'removed':![]};const _0x547084=userKey(_0x72a698,_0x37969d),_0x2fe265=perUserWarnings[_0x6517dd(0x132)](_0x547084)||{'count':0x0};_0x2fe265[_0x6517dd(0x146)]++,perUserWarnings[_0x6517dd(0xd2)](_0x547084,_0x2fe265);if(config['REMOVE_ON_'+_0x6517dd(0x12e)]&&_0x2fe265[_0x6517dd(0x146)]>=config[_0x6517dd(0x125)]){const _0x1175ab=botRef?.[_0x6517dd(0xa4)]||botRef;try{await _0x1175ab[_0x6517dd(0xf3)+_0x6517dd(0xa3)+_0x6517dd(0x114)](_0x72a698,[_0x37969d],_0x6517dd(0xb9));}catch(_0x117676){warn(_0x6517dd(0x140)+_0x6517dd(0xe5)+_0x6517dd(0x10a)+'rticipant\x20'+_0x37969d+':\x20'+(_0x117676?.[_0x6517dd(0x151)]||_0x117676));}return perUserWarnings[_0x6517dd(0x102)](_0x547084),{'count':_0x2fe265[_0x6517dd(0x146)],'removed':!![]};}return{'count':_0x2fe265['count'],'removed':![]};}catch(_0x32073c){return warn(_0x6517dd(0x140)+_0x6517dd(0xf7)+_0x6517dd(0xbb)+'ror:\x20'+(_0x32073c?.[_0x6517dd(0x151)]||_0x32073c)),{'count':0x0,'removed':![]};}}async function sendWarning(_0x4556c4,_0xdf27e,_0x441bc9){const _0x255078=_0xed4ebe;if(_0xdf27e[_0x255078(0x10e)]){info(_0x255078(0x140)+_0x255078(0x121)+_0x255078(0xbf)+_0x255078(0x116)+_0x255078(0xb6)+_0x255078(0x11c));return;}if(!config[_0x255078(0x128)+'NG'])return;try{const _0x44c55d=_0x4556c4[_0x255078(0xd5)]?.['participan'+'t']||_0x4556c4[_0x255078(0xd5)]?.[_0x255078(0x162)]||'',_0x220e20=Math[_0x255078(0xe7)](0x253f+-0xaef+0x10*-0x1a5,config[_0x255078(0x125)]-_0x441bc9),_0x43522c=config['WARNING_ME'+_0x255078(0x12a)][_0x255078(0xfd)](_0x255078(0xa6),'@'+_0x44c55d[_0x255078(0x111)]('@')[-0x1277+-0xf94+0x220b])[_0x255078(0xfd)](_0x255078(0x95),String(_0x220e20)),_0x281c84=_0x4556c4[_0x255078(0xd5)][_0x255078(0x162)],_0x2c4f74=botRef?.[_0x255078(0xa4)]||botRef;await _0x2c4f74['sendMessag'+'e'](_0x281c84,{'text':_0x43522c,'mentions':[_0x44c55d]});}catch(_0x5ccf5a){warn(_0x255078(0x140)+_0x255078(0x124)+_0x255078(0x147)+'\x20'+(_0x5ccf5a?.[_0x255078(0x151)]||_0x5ccf5a));}}async function enforceImmediate(_0x3b0966,_0x41e3d6){const _0x16b5f5=_0xed4ebe;try{const _0x5e19ef=getMessageKey(_0x3b0966);if(!_0x5e19ef)return;if(processedMessageIds['has'](_0x5e19ef))return;processedMessageIds[_0x16b5f5(0xd2)](_0x5e19ef,setTimeout(()=>processedMessageIds['delete'](_0x5e19ef),config[_0x16b5f5(0xf8)+'_MS']||0x21c4+-0x482*-0x5+-0x621*0x6));if(_0x3b0966['key'][_0x16b5f5(0xba)]||_0x41e3d6[_0x16b5f5(0x10e)]){info(_0x16b5f5(0x140)+'\x20Not\x20enfor'+_0x16b5f5(0xbd)+_0x16b5f5(0xf9)+_0x16b5f5(0xd4)+_0x16b5f5(0xe2)+_0x16b5f5(0x119)+_0x16b5f5(0xd1)+_0x16b5f5(0x154));return;}const _0x21b6f3=await deleteWithRetry(_0x3b0966);if(!_0x21b6f3){info(_0x16b5f5(0x140)+_0x16b5f5(0xb7)+_0x16b5f5(0x12b)+_0x16b5f5(0x9b)+_0x16b5f5(0x148)+_0x16b5f5(0x136)+_0x16b5f5(0x99));return;}await forwardDeletedLink(_0x3b0966,_0x41e3d6);const {count:_0x3db7b9,removed:_0xad02ad}=await incrementWarningAndMaybeRemove(_0x3b0966,_0x41e3d6);!_0xad02ad&&await sendWarning(_0x3b0966,_0x41e3d6,_0x3db7b9);}catch(_0x3fe6e3){warn(_0x16b5f5(0x140)+'\x20enforceIm'+_0x16b5f5(0xf1)+'ror:\x20'+(_0x3fe6e3?.[_0x16b5f5(0x151)]||_0x3fe6e3));}}function splitRestForGp(_0x33f722){const _0x2fc78a=_0xed4ebe;if(!_0x33f722)return{'left':'','gp':null};const _0x85555c=_0x33f722[_0x2fc78a(0xf5)](/\bgp[:\s]+(.+)$/i);if(_0x85555c)return{'left':_0x33f722[_0x2fc78a(0x144)](0xd61+0x1132+-0x1e93,_0x85555c['index'])['trim'](),'gp':_0x85555c[0x13*0x3f+-0x8*0x3c4+0x9*0x2d4][_0x2fc78a(0x91)]()};return{'left':_0x33f722['trim'](),'gp':null};}async function resolveTargetsForGroupAdmin(_0x377ed9){const _0x41a6af=_0xed4ebe,_0x3cd060=await getDefault(_0x377ed9)[_0x41a6af(0xcf)](()=>null);if(!_0x3cd060)return[];const _0x303de4=Array[_0x41a6af(0x9a)](_0x3cd060)?_0x3cd060:[_0x3cd060];let _0x3ec152=[];for(const _0x1288bf of _0x303de4){const _0x1ceafe=await getConnection(_0x1288bf)[_0x41a6af(0xcf)](()=>null);if(Array[_0x41a6af(0x9a)](_0x1ceafe))_0x3ec152[_0x41a6af(0xcc)](..._0x1ceafe);else{if(_0x1ceafe)_0x3ec152[_0x41a6af(0xcc)](String(_0x1ceafe));}}return Array[_0x41a6af(0x158)](new Set(_0x3ec152));}async function resolveTargetsForSudo(_0x1b7f15){const _0x5e8bd7=_0xed4ebe;if(!_0x1b7f15)return[];if(_0x1b7f15['toLowerCas'+'e']()===_0x5e8bd7(0xb8))return await _0x53c80c['getUniqueJ'+_0x5e8bd7(0x156)]();const _0x52ca20=await _0x53c80c[_0x5e8bd7(0xe1)+'e'](_0x1b7f15);if(_0x52ca20)return[_0x52ca20];if(_0x1b7f15[_0x5e8bd7(0xe4)]('@'))return[_0x53c80c[_0x5e8bd7(0x118)+'oUserJid'](_0x1b7f15)];return[];}function _0x4956(){const _0x1db3f7=['DISABLED','caption','\x20VALUES\x20(?','mediate\x20er','```','groupParti','\x20enforceme','match','off','\x20increment','DEDUPE_TTL','min/bot\x20me','n:\x20','t\x20resolve\x20',':\x20.antilin','replace','subject','rnings\x20{wa','eation\x20fai','(final\x20def','delete','INTEGER\x20DE','SELECT\x20val','n\x20PM).','extendedTe','618163wmVPvZ','ENABLED','d\x20here.\x20Re','\x20remove\x20pa','groupMetad','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20\x20\x20\x20\x20);\x0a\x20\x20','isAdmin','TABLE\x20IF\x20N','ailed\x20for\x20','split','antilink\x20<','\x20setGroupE','ate','292KQAvXC','g\x20for\x20admi','r\x20admin/bo','normalizeT','ck\x20in\x20enfo','exec','antilink','age.','tlds','rnings}','any\x20target','\x20=\x20\x27target','\x20Skipping\x20','\x20received\x20','ðŸ”—\x20*Antilin','\x20sendWarni','MAX_WARNS','warning\x20in','url','SEND_WARNI','478569pOocff','SSAGE','failed\x20(li','telist;','k:\x20','MAX','conversati','isCommand','\x20KEY,\x0a\x20\x20\x20\x20','get','\x20Early\x20adm','participan','t_jid\x20=\x20?','ping\x20enfor','355050FBFHgn','t\x20message\x20','\x20(chat_jid','e\x20failed','*\x0a```','\x20\x20enabled\x20','lt\x20connect','âŒ\x20OFF','stringify','[antilink]','oup','\x20forward\x20d','40kHdmuV','slice','status>\x20gp','count','ng\x20failed:','rms),\x20stop','text','nt\x20group\x20o','xtMessage','Unknown','E\x20SET\x20whit','SELECT\x20ena','nly.','INSERT\x20INT','message','filter',',\x20?)\x0a\x20\x20\x20\x20\x20','te).','not\x20allowe','ids','led:\x20','from','32480pIpdFh','or\x20for\x20','95351kLQecL','\x20groups\x20fo','ion\x20found.','hitelist\x20f','@g.us','\x20setGroupW','findings','remoteJid','call\x20witho','hat_jid\x20TE','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','ON\x20CONFLIC','DELETE_RET','elist\x20FROM','ata','trim','6pjueCK','etting\x20err','\x20CONFLICT(','{warnings}','\x20\x20\x20\x20\x20\x20','t)\x20VALUES\x20','^/?','cement.','isArray','kely\x20no\x20pe',',\x20whitelis','ettings','map','ðŸ”—\x20Could\x20no','ðŸ’¬\x20*Chat:*\x20','ured.','LOG_DELETE','cipantsUpd','sock','ðŸ”—\x20{user},\x20','{user}','ailed:\x20','chat_jid)\x20','ue\x20FROM\x20de','enforcemen','\x20module\x20in','45gbcZhg','lete_prefs','length','89793iQKUUG','\x20getGroupS','ANTILINK','cluded.whi','whitelist','ðŸ”—\x20Antilink','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','n/bot\x20mess','\x20Deletion\x20','all','remove','fromMe','Warning\x20er','ut\x20meta\x20ob','cing\x20on\x20ad','status','sendWarnin','sendMessag','\x20WHERE\x20key','toLowerCas','\x20WHERE\x20cha','parse','videoMessa','command\x20to','3065CpberU','ðŸ”—\x20*Origina','schema\x20ens','ping.','k\x20<on|off|','push','jid','clear','catch','*\x0a\x0a','rceImmedia','set','eleted\x20lin','ssage\x20(def','key','d|all>','enabled','DEFAULT\x20\x27[','list\x20TEXT\x20',':<alias|ji','has','d\x20=\x20exclud','D_LINKS','maining\x20wa','led\x20for\x20','on|off|sta','resolveNam','ensive\x20che','k\x20Status*\x0a','includes','\x20Could\x20not','RY_COUNT','max','hRetry\x20fai','(immediate','ject.\x20Skip','ck).','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','endsWith'];_0x4956=function(){return _0x1db3f7;};return _0x4956();}async function findStoredMatchFromFindings(_0x2f6182=[]){const _0x7b8326=_0xed4ebe;try{const _0x11dd95=await listSudo();if(!_0x11dd95?.[_0x7b8326(0xae)])return null;const _0x461ffc=new Set(_0x11dd95[_0x7b8326(0x9e)](String));for(const _0x304b29 of _0x2f6182||[]){if(_0x304b29?.[_0x7b8326(0xcd)]&&_0x461ffc[_0x7b8326(0xdb)](normalizeToJid(_0x304b29['jid'])))return normalizeToJid(_0x304b29[_0x7b8326(0xcd)]);}return null;}catch(_0x52b361){return null;}}export async function initialize(_0x21d97e){const _0x2bbe7b=_0xed4ebe;try{setupApi(_0x21d97e),await ensureSchema(),refreshConfig(),shuttingDown=![],info(_0x2bbe7b(0x140)+_0x2bbe7b(0xab)+'itialized\x20'+_0x2bbe7b(0xe9)+_0x2bbe7b(0xf4)+'nt).');}catch(_0x2faeed){error(_0x2faeed,'[antilink]'+'\x20initializ'+_0x2bbe7b(0x13a));throw _0x2faeed;}}export async function onMessage(_0x44fc44,_0x4978df){const _0x25929e=_0xed4ebe;if(!_0x44fc44?.['key']?.[_0x25929e(0x162)]||!_0x44fc44[_0x25929e(0x151)]||shuttingDown||!_0x4978df){if(!_0x4978df)warn('[antilink]'+_0x25929e(0x122)+_0x25929e(0x163)+_0x25929e(0xbc)+_0x25929e(0xea)+_0x25929e(0xca));return;}const _0x422159=_0x4978df['isAdmin'],_0x5902cd=_0x44fc44[_0x25929e(0xd5)][_0x25929e(0x162)],_0x524725=_0x5902cd[_0x25929e(0xed)](_0x25929e(0x15f)),_0xa4f27b=_0x44fc44['key'][_0x25929e(0x134)+'t']||_0x44fc44[_0x25929e(0xd5)][_0x25929e(0x162)],_0x2d0801=extractTextFromMessage(_0x44fc44),_0x73c4=(_0x44fc44['text']||_0x2d0801)[_0x25929e(0x91)](),_0xa12a04=_0x44fc44[_0x25929e(0x130)]&&_0x73c4?_0x73c4[_0x25929e(0x111)](/\s+/)[-0xcfa+0x104b*-0x2+-0xd8*-0x36]['toLowerCas'+'e']()[_0x25929e(0xfd)]('/',''):null;if(_0x44fc44[_0x25929e(0x130)]&&commands[_0x25929e(0xe4)](_0xa12a04)){let _0x4c339a=_0x5902cd,_0x22fd9c=![],_0x215991=![];if(_0x524725){if(_0x422159)_0x22fd9c=!![];}else{if(_0x44fc44[_0x25929e(0xd5)][_0x25929e(0xba)])_0x22fd9c=!![],_0x215991=!![],_0x4c339a=getBotJid()||_0x5902cd;else{if(await isSudo(botRef,_0x44fc44)){_0x22fd9c=!![],_0x215991=!![];const _0x48d305=await userJidFromCtx(_0x44fc44)||{'findings':[]};_0x4c339a=await findStoredMatchFromFindings(_0x48d305[_0x25929e(0x161)])||_0x5902cd;}}}if(!_0x22fd9c)return;if(_0xa12a04===_0x25929e(0x11b)){const _0x2ea2a4=_0x73c4[_0x25929e(0xfd)](new RegExp(_0x25929e(0x98)+_0xa12a04+'\x5cb','i'),'')[_0x25929e(0x91)](),{left:_0x265613,gp:_0x26ddc2}=splitRestForGp(_0x2ea2a4),_0x2791b5=_0x265613[_0x25929e(0x111)](/[, ]+/)[-0x3e*0x21+-0x20b*0x1+-0x1*-0xa09]?.[_0x25929e(0xc2)+'e']();if(!_0x2791b5||!['on',_0x25929e(0xf6),_0x25929e(0xbe)]['includes'](_0x2791b5))return(botRef?.[_0x25929e(0xa4)]||botRef)[_0x25929e(0xc0)+'e'](_0x4c339a,{'text':'ðŸ”—\x20Usage:\x20.'+_0x25929e(0x112)+_0x25929e(0xe0)+'tus>\x20(use\x20'+'gp:<alias|'+'jid|all>\x20i'+_0x25929e(0x105)});let _0x1ba2b7=[];const _0x11170c=(_0xa4f27b||'')[_0x25929e(0x111)]('@')[0x1*0x1062+0x6*-0xd+0x3*-0x55c];if(_0x215991){if(!_0x26ddc2)return(botRef?.[_0x25929e(0xa4)]||botRef)[_0x25929e(0xc0)+'e'](_0x4c339a,{'text':'ðŸ”—\x20PM\x20Usage'+_0x25929e(0xfc)+_0x25929e(0xcb)+_0x25929e(0x145)+_0x25929e(0xda)+_0x25929e(0xd6)});_0x1ba2b7=await resolveTargetsForSudo(_0x26ddc2);if(!_0x1ba2b7[_0x25929e(0xae)])return(botRef?.['sock']||botRef)[_0x25929e(0xc0)+'e'](_0x4c339a,{'text':_0x25929e(0x9f)+_0x25929e(0xfb)+_0x25929e(0x11f)+_0x25929e(0x15c)+'r\x20\x27'+_0x26ddc2+'\x27.'});}else _0x1ba2b7=await resolveTargetsForGroupAdmin(_0x11170c),!_0x1ba2b7[_0x25929e(0xae)]&&(_0x1ba2b7=[_0x5902cd],await(botRef?.['sock']||botRef)[_0x25929e(0xc0)+'e'](_0x4c339a,{'text':'ðŸ”—\x20No\x20defau'+_0x25929e(0x13d)+_0x25929e(0x15d)+'\x20Applying\x20'+_0x25929e(0xc6)+'\x20the\x20curre'+_0x25929e(0x14a)+_0x25929e(0x14f)}));if(_0x2791b5==='on'||_0x2791b5===_0x25929e(0xf6)){const _0x1665c4=_0x2791b5==='on';let _0x1aeb9a=0x1*-0xea9+0x7e1+-0xf8*-0x7;for(const _0x4bf81c of _0x1ba2b7){await setGroupEnabled(_0x4bf81c,_0x1665c4)&&_0x1aeb9a++;}await(botRef?.['sock']||botRef)[_0x25929e(0xc0)+'e'](_0x4c339a,{'text':_0x25929e(0xb4)+'\x20'+(_0x1665c4?_0x25929e(0x108):_0x25929e(0xee))+'\x20for\x20'+_0x1aeb9a+'/'+_0x1ba2b7[_0x25929e(0xae)]+'\x20group(s).'});}else{if(_0x2791b5===_0x25929e(0xbe)){let _0x119c11=_0x25929e(0x123)+_0x25929e(0xe3)+'\x0a';for(const _0x38877b of _0x1ba2b7){const {enabled:_0x290e6a}=await getGroupSetting(_0x38877b);_0x119c11+=_0x38877b+':\x20'+(_0x290e6a?'âœ…\x20ON':_0x25929e(0x13e))+'\x0a';}await(botRef?.[_0x25929e(0xa4)]||botRef)[_0x25929e(0xc0)+'e'](_0x4c339a,{'text':_0x119c11});}}}return;}try{if(_0x524725){if(_0x44fc44[_0x25929e(0xd5)][_0x25929e(0xba)])return;if(_0x422159){debug(_0x25929e(0x140)+'\x20Skipping\x20'+_0x25929e(0xaa)+'t\x20for\x20admi'+_0x25929e(0xfa)+_0xa4f27b);return;}}else{if(_0x44fc44[_0x25929e(0xd5)]['fromMe'])return;}}catch(_0x41e089){warn(_0x25929e(0x140)+_0x25929e(0x133)+'in\x20check\x20f'+_0x25929e(0xa7)+(_0x41e089?.['message']||_0x41e089));return;}if(_0x524725){const _0x1408f0=await getGroupSetting(_0x5902cd);if(!_0x1408f0[_0x25929e(0xd7)])return;const _0x409a84=extractTextFromMessage(_0x44fc44);let _0xcd7fa7=![];for(const _0x293733 of _0x1408f0[_0x25929e(0xb3)]){if(_0x293733['includes']('@')&&_0x293733===_0xa4f27b){_0xcd7fa7=!![];break;}if(!_0x293733['includes']('@')&&_0x409a84[_0x25929e(0xe4)](_0x293733)){_0xcd7fa7=!![];break;}}if(_0xcd7fa7)return;messageContainsLinkLocal(_0x44fc44)&&await enforceImmediate(_0x44fc44,_0x4978df);}}export async function cleanup(){const _0x5e7be6=_0xed4ebe;shuttingDown=!![],processedMessageIds['forEach'](_0x2d84aa=>clearTimeout(_0x2d84aa)),processedMessageIds[_0x5e7be6(0xce)](),perUserWarnings[_0x5e7be6(0xce)](),botRef=null,info(_0x5e7be6(0x140)+'\x20cleaned\x20u'+'p.');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};