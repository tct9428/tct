const _0x27c043=_0x373a;function _0x373a(_0x5e59b5,_0x46be8f){const _0x15adb7=_0x5549();return _0x373a=function(_0x38e921,_0x51bf9a){_0x38e921=_0x38e921-(0x1*0x1f07+0x148d*0x1+0x1*-0x31cb);let _0x2505dc=_0x15adb7[_0x38e921];return _0x2505dc;},_0x373a(_0x5e59b5,_0x46be8f);}(function(_0x34c4d1,_0x11e373){const _0x258927=_0x373a,_0x2380f1=_0x34c4d1();while(!![]){try{const _0x2463d6=-parseInt(_0x258927(0x20b))/(0x22a8+-0x4ca+0x5*-0x5f9)*(-parseInt(_0x258927(0x21b))/(0x5a9+0x1*0xccf+-0x8b*0x22))+-parseInt(_0x258927(0x200))/(-0x1bc8+0x659*-0x5+0x3b88)+-parseInt(_0x258927(0x206))/(-0x27b+-0x112a+0x13a9)*(parseInt(_0x258927(0x215))/(-0xff8+-0x21*0x1c+-0x1d*-0xad))+-parseInt(_0x258927(0x207))/(-0x1*-0x24ac+0x1*-0x1d71+-0x735)+parseInt(_0x258927(0x1f1))/(0x25b1+0x9d9+-0x2f83)+parseInt(_0x258927(0x23b))/(-0xb06+0x1*-0x1d39+0x2847)+parseInt(_0x258927(0x1df))/(-0x1*0x158d+0x62*-0xf+0x1b54);if(_0x2463d6===_0x11e373)break;else _0x2380f1['push'](_0x2380f1['shift']());}catch(_0x7ddff3){_0x2380f1['push'](_0x2380f1['shift']());}}}(_0x5549,0x25*0xa05b+-0xab433+-0x2*0x2e2d));import{performance}from'perf_hooks';import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{isSudo,listSudo,normalizeToJid,userJidFromCtx}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x27c043(0x1ce);export const version='1.3.6-fixe'+'d';export const priority=-0x1*0x154f+-0x78e*-0x1+-0x499*-0x3;let botInstance=null;function _0x5549(){const _0x3fb046=['isArray','ndler\x20erro','\x20handler\x20e','error:\x20','finalDest\x20',':\x20could\x20no','e\x20error:\x20','roc:\x20','TIMEZONE_N','toLocaleSt','endsWith','clear','\x20pings:\x0a','asurement\x20','jid','N/A','get','@g.us','do\x20checks\x20',':\x20final\x20de','\x20to\x20send\x20p',';\x20skipping',':\x20fallback','2716784Zdztxk',':\x20hotReloa','AME','number','ping\x20stats','r:\x20',':\x20refreshC','fromMillis','ing\x20box\x20to','\x20(proc=','tmp','\x0a╰════════','gistration','message',':\x20failed\x20t','isValid','rror',':\x20initiali','nue\x20but\x20su','networkLat','ED_WITH_SE','rror:\x20','ping','type;\x20skip','dConfig\x20re','now','size','remoteJid','o\x20failed\x20f',',\x20origin=','shift','delete','ring','trim','may\x20be\x20lim',':\x20retrying','o\x20send\x20pin','ping\x20send.','heck\x20threw','32179941tHghTW','split','_bot','CONDS','length',':\x20isSudo\x20c','\x20set\x20to\x20','latency\x20me','mFindings\x20','\x20—\x20Proc:\x20','from','\x20as\x20a\x20fall','unknown','min','map','ited.','reverse','client','1714594WGoPNq','back.','fromMe','\x20origin\x20ch','failed\x20to\x20','\x20send.','function','edMatchFro','zoneName','slice','t\x20determin','has','at\x20','\x0a│\x20','Measuring\x20','2625225tTtSlu',',\x20net=',':\x20findStor','add',':\x20network\x20','toFixed','4885076cJnqiE','8293326gqrCqO','zed.','╭─❏\x20pong\x20❏','\x20failed:\x20','870ppUjcc','e\x20chatId;\x20','robi','dConfig\x20ha','\x20attemptin','string','Africa/Nai','No\x20ping\x20hi','ency','itialized;','5tNVzdz','unresolved','findings','g\x20box\x20to\x20','processLat','key','258jkdosL','\x20•\x20Net:\x20','nce\x20not\x20in','Last\x20','\x20retry\x20als','\x20(origin:\x20','stination\x20','chat','sendMessag'];_0x5549=function(){return _0x3fb046;};return _0x5549();}const lastPingAt=new Map(),PING_COOLDOWN_MS=-0x263*-0x9+0x1035*0x2+-0x1*0x2a2d,PING_HISTORY_MAX=0x12cf+-0x2660+0x13f5,pingHistory=[];let respondedMsgIds=new Set(),DEFAULT_TIMEZONE=_0x27c043(0x211)+_0x27c043(0x20d);function refreshConfig(){const _0x2bb55e=_0x27c043;try{const _0x272f10=typeof getConfig===_0x2bb55e(0x1f7)?getConfig()||{}:{};DEFAULT_TIMEZONE=_0x272f10['TIMEZONE']||_0x272f10[_0x2bb55e(0x22c)+_0x2bb55e(0x23d)]||DEFAULT_TIMEZONE,info(name+(':\x20timezone'+_0x2bb55e(0x1e5))+DEFAULT_TIMEZONE);}catch(_0x41ff38){warn(name+(_0x2bb55e(0x241)+'onfig\x20erro'+'r:\x20')+(_0x41ff38?.['message']||_0x41ff38));}}try{typeof hotReloadConfig===_0x27c043(0x1f7)&&hotReloadConfig(()=>{const _0x50e32a=_0x27c043;try{refreshConfig();}catch(_0xbae0bf){warn(name+(_0x50e32a(0x23c)+_0x50e32a(0x20e)+_0x50e32a(0x225)+_0x50e32a(0x240))+(_0xbae0bf?.[_0x50e32a(0x248)]||_0xbae0bf));}});}catch(_0x50b4be){warn(name+(_0x27c043(0x23c)+_0x27c043(0x1d0)+_0x27c043(0x247)+_0x27c043(0x20a))+(_0x50b4be?.[_0x27c043(0x248)]||_0x50b4be));}refreshConfig();function pushHistory(_0x1412db){const _0x4cfec8=_0x27c043;pingHistory['push'](_0x1412db);if(pingHistory[_0x4cfec8(0x1e3)]>PING_HISTORY_MAX)pingHistory[_0x4cfec8(0x1d6)]();}function formatTimestamp(_0x561a6b=Date['now'](),_0x4ebce6=DEFAULT_TIMEZONE){const _0x5287fd=_0x27c043;try{const _0x206704=DateTime[_0x5287fd(0x242)](_0x561a6b)['setZone'](_0x4ebce6);if(!_0x206704[_0x5287fd(0x24a)])return new Date(_0x561a6b)[_0x5287fd(0x22d)+_0x5287fd(0x1d8)]();return _0x206704[_0x5287fd(0x22d)+_0x5287fd(0x1d8)](DateTime['DATETIME_M'+_0x5287fd(0x1cc)+_0x5287fd(0x1e2)])+'\x20('+_0x206704[_0x5287fd(0x1f9)]+')';}catch(_0x42ab0c){return new Date(_0x561a6b)[_0x5287fd(0x22d)+_0x5287fd(0x1d8)]();}}function buildBox(_0x37e680,_0x120df1,_0x26378e=null){const _0x24c558=_0x27c043;if(!_0x26378e)_0x26378e=formatTimestamp(Date[_0x24c558(0x1d1)](),DEFAULT_TIMEZONE);return _0x24c558(0x209)+'═══⊷\x0a│\x20⏱\x20P'+_0x24c558(0x22b)+_0x37e680+_0x24c558(0x21c)+_0x120df1+_0x24c558(0x1fe)+_0x26378e+(_0x24c558(0x246)+'══⊷');}export async function initialize(_0x31a05f){const _0x27a541=_0x27c043;try{botInstance=_0x31a05f,refreshConfig(),info(name+(_0x27a541(0x1c9)+_0x27a541(0x208)));}catch(_0x3b5196){warn(name+('\x20initializ'+_0x27a541(0x22a))+(_0x3b5196?.[_0x27a541(0x248)]||_0x3b5196));}}async function findStoredMatchFromFindings(_0x3e83be=[]){const _0x158489=_0x27c043;try{if(!Array[_0x158489(0x224)](_0x3e83be)||_0x3e83be['length']===-0xbba+-0x294+-0x2*-0x727)return null;const _0x410322=await listSudo();if(!Array['isArray'](_0x410322)||_0x410322[_0x158489(0x1e3)]===0x1030+-0xec0+-0x17*0x10)return null;const _0xe7fd5a=new Set(_0x410322[_0x158489(0x1ed)](_0x536436=>String(_0x536436)));for(const _0x70d0ab of _0x3e83be){if(!_0x70d0ab||!_0x70d0ab[_0x158489(0x232)]||typeof _0x70d0ab[_0x158489(0x232)]!==_0x158489(0x210))continue;try{const _0x243c53=normalizeToJid(_0x70d0ab['jid']);if(_0x243c53&&_0xe7fd5a[_0x158489(0x1fc)](_0x243c53))return _0x243c53;const _0x441744=(String(_0x70d0ab[_0x158489(0x232)])[_0x158489(0x1e0)]('@')[0x1413+-0x1187+-0x28c]||'')[_0x158489(0x1e0)](':')[-0xdb9+0x160f*-0x1+-0x8*-0x479]||null;if(_0x441744)for(const _0x233fd2 of _0xe7fd5a){const _0x1d03f3=String(_0x233fd2)[_0x158489(0x1e0)]('@')[-0x5cf*0x5+0xa62+0x12a9]||null;if(_0x1d03f3&&_0x441744===_0x1d03f3)return _0x233fd2;}if(_0xe7fd5a[_0x158489(0x1fc)](_0x70d0ab[_0x158489(0x232)]))return _0x70d0ab[_0x158489(0x232)];}catch(_0x5d5852){}}return null;}catch(_0x44328f){return warn(name+(_0x158489(0x202)+_0x158489(0x1f8)+_0x158489(0x1e7)+_0x158489(0x227))+(_0x44328f?.[_0x158489(0x248)]||_0x44328f)),null;}}export async function onMessage(_0x162774){const _0xd81d28=_0x27c043;try{if(!_0x162774||!_0x162774[_0xd81d28(0x21a)])return;const _0x479d99=_0x162774['key']?.['id'];if(_0x479d99){if(respondedMsgIds[_0xd81d28(0x1fc)](_0x479d99))return;respondedMsgIds[_0xd81d28(0x203)](_0x479d99),setTimeout(()=>{const _0x705e5c=_0xd81d28;respondedMsgIds[_0x705e5c(0x1d7)](_0x479d99);},-0x3*0x6a2+0xe467+0x19df);}const _0x21e200=_0x162774[_0xd81d28(0x1d3)]||_0x162774['key']?.[_0xd81d28(0x1d3)]||'unknown';if(_0x21e200===_0xd81d28(0x1eb)){warn(name+(_0xd81d28(0x229)+_0xd81d28(0x1fb)+_0xd81d28(0x20c)+'skipping.'));return;}if(!_0x162774['isCommand'])return;const _0x155915=(_0x162774['text']||'')[_0xd81d28(0x1d9)]();if(!_0x155915)return;const _0x3d7efa=_0x155915['toLowerCas'+'e'](),_0xc2e3c6=_0x3d7efa==='ping\x20histo'+'ry'||_0x3d7efa===_0xd81d28(0x23f),_0x391ed7=_0x3d7efa===_0xd81d28(0x1ce)||_0x3d7efa['startsWith']('ping\x20');if(!_0xc2e3c6&&!_0x391ed7)return;!botInstance&&(botInstance=_0x162774['bot']||_0x162774[_0xd81d28(0x1f0)]||_0x162774[_0xd81d28(0x1e1)]||null,!botInstance&&warn(name+(':\x20botInsta'+_0xd81d28(0x21d)+_0xd81d28(0x214)+_0xd81d28(0x20f)+'g\x20to\x20conti'+_0xd81d28(0x1ca)+_0xd81d28(0x236)+_0xd81d28(0x1da)+_0xd81d28(0x1ee))));const _0xf0c150=Boolean(_0x162774[_0xd81d28(0x21a)][_0xd81d28(0x1f3)]);let _0x380177=![];try{_0x380177=Boolean(await isSudo(botInstance,_0x162774));}catch(_0x17954b){warn(name+(_0xd81d28(0x1e4)+_0xd81d28(0x1de)+':\x20')+(_0x17954b?.[_0xd81d28(0x248)]||_0x17954b)),_0x380177=![];}if(!_0xf0c150&&!_0x380177)return;const _0x2acf76=String(_0x21e200)[_0xd81d28(0x22e)](_0xd81d28(0x235)),_0x40059e=getBotJid();if(_0xc2e3c6){const _0x2495d1=_0x2acf76?_0x21e200:_0x40059e||_0x21e200;if(pingHistory['length']===-0x18dc+0x10b5*0x1+-0x827*-0x1){if(botInstance)await botInstance[_0xd81d28(0x223)+'e'](_0x2495d1,{'text':_0xd81d28(0x212)+'story\x20yet.'});return;}const _0x298e27=pingHistory[_0xd81d28(0x1fa)]()[_0xd81d28(0x1ef)]()[_0xd81d28(0x1fa)](-0x1b4+-0x4c*0x15+0x7f0,-0x91*0x35+0x1*-0x1754+-0x8d*-0x61)['map']((_0x4f74d9,_0x39e839)=>{const _0x59f346=_0xd81d28,_0x7a1aca=formatTimestamp(_0x4f74d9['ts'],DEFAULT_TIMEZONE),_0x8a52e=typeof _0x4f74d9['processLat'+_0x59f346(0x213)]==='number'?_0x4f74d9[_0x59f346(0x219)+_0x59f346(0x213)][_0x59f346(0x205)](-0x25*-0xe9+-0x1*-0xc53+-0x2*0x16ff)+'ms':_0x59f346(0x233),_0x1713c8=typeof _0x4f74d9[_0x59f346(0x1cb)+_0x59f346(0x213)]==='number'?_0x4f74d9[_0x59f346(0x1cb)+_0x59f346(0x213)][_0x59f346(0x205)](-0x59*0xb+-0x19ef+0x1dc4)+'ms':'N/A';return _0x39e839+(-0x38f+0x204+0x18c)+'.\x20'+_0x7a1aca+_0x59f346(0x1e8)+_0x8a52e+_0x59f346(0x21c)+_0x1713c8+_0x59f346(0x220)+_0x4f74d9[_0x59f346(0x222)]+')';})['join']('\x0a');if(botInstance)await botInstance[_0xd81d28(0x223)+'e'](_0x2495d1,{'text':_0xd81d28(0x21e)+Math[_0xd81d28(0x1ec)](0x22ed+-0x1a27+-0x8b2,pingHistory[_0xd81d28(0x1e3)])+_0xd81d28(0x230)+_0x298e27});return;}if(!_0x391ed7)return;const _0x2b0326=lastPingAt[_0xd81d28(0x234)](_0x21e200)||-0x2511+-0x22ff*0x1+0x4810,_0x1fd111=Date[_0xd81d28(0x1d1)]();if(_0x1fd111-_0x2b0326<PING_COOLDOWN_MS)return;lastPingAt['set'](_0x21e200,_0x1fd111),setTimeout(()=>lastPingAt[_0xd81d28(0x1d7)](_0x21e200),PING_COOLDOWN_MS+(0x192a+-0x6*-0x491+0x6*-0x8b2));let _0x331eca=null;if(_0x2acf76)_0x331eca=_0x21e200;else{if(_0xf0c150)_0x331eca=_0x40059e||_0x21e200;else{if(_0x380177){const _0x27f2da=userJidFromCtx(_0x162774),_0x4906a4=await findStoredMatchFromFindings(_0x27f2da[_0xd81d28(0x217)]);if(!_0x4906a4)return;_0x331eca=_0x4906a4;}else return;}}if(!_0x331eca){warn(name+(_0xd81d28(0x237)+_0xd81d28(0x221)+_0xd81d28(0x216)+_0xd81d28(0x239)+_0xd81d28(0x1f6)));return;}const _0x4f117c=String(_0x331eca);try{_0x331eca=String(_0x331eca);}catch(_0x29f24c){warn(name+(':\x20invalid\x20'+_0xd81d28(0x228)+_0xd81d28(0x1cf)+_0xd81d28(0x1dd)));return;}const _0x3b505e=performance['now'](),_0x2389c5=formatTimestamp(Date[_0xd81d28(0x1d1)](),DEFAULT_TIMEZONE),_0x4325ae=buildBox('tmp',_0xd81d28(0x245),_0x2389c5),_0x8448cc=performance[_0xd81d28(0x1d1)](),_0x1114fd=Number((_0x8448cc-_0x3b505e)[_0xd81d28(0x205)](0x4c4+-0x13f+-0x1*0x383));let _0x9e8a86=null;try{const _0x5d8cf8=_0xd81d28(0x1ff)+'network\x20la'+'tency...',_0x138090=performance['now'](),_0x3583cf=await botInstance[_0xd81d28(0x223)+'e'](_0x331eca,{'text':_0x5d8cf8}),_0x871813=performance['now']();_0x9e8a86=Number((_0x871813-_0x138090)[_0xd81d28(0x205)](-0x1b5a+0x12a4+0x8b8));const _0x96b446=_0x3583cf?.[_0xd81d28(0x21a)]?.['id']||_0x3583cf?.['id'];_0x96b446&&(respondedMsgIds[_0xd81d28(0x203)](_0x96b446),setTimeout(()=>respondedMsgIds[_0xd81d28(0x1d7)](_0x96b446),-0xbd18+-0x5372*0x2+-0x2*-0x1272e));}catch(_0x1eac06){warn(name+(_0xd81d28(0x204)+_0xd81d28(0x1e6)+_0xd81d28(0x231)+_0xd81d28(0x1f5))+_0x331eca+':\x20'+(_0x1eac06?.[_0xd81d28(0x248)]||_0x1eac06)),_0x9e8a86=null;}const _0x4c555c=_0x1114fd[_0xd81d28(0x205)](-0x3a2*-0x7+0xa*-0x14f+-0xc56)+'ms',_0x3e9a6e=typeof _0x9e8a86===_0xd81d28(0x23e)?_0x9e8a86[_0xd81d28(0x205)](-0x1*-0xf07+-0x1d70+0xe6b)+'ms':_0xd81d28(0x233),_0x423609=buildBox(_0x4c555c,_0x3e9a6e,_0x2389c5);try{const _0x58039e=await botInstance['sendMessag'+'e'](_0x331eca,{'text':_0x423609}),_0x3133ac=_0x58039e?.[_0xd81d28(0x21a)]?.['id']||_0x58039e?.['id'];_0x3133ac&&(respondedMsgIds[_0xd81d28(0x203)](_0x3133ac),setTimeout(()=>respondedMsgIds[_0xd81d28(0x1d7)](_0x3133ac),(0x7*-0x11c+-0x13d8+-0x283*-0xb)*(0x14590+0x1057d+-0x160ad))),info(name+(':\x20sent\x20pin'+_0xd81d28(0x218))+_0x331eca+_0xd81d28(0x244)+_0x4c555c+_0xd81d28(0x201)+_0x3e9a6e+_0xd81d28(0x1d5)+_0x21e200+')'),pushHistory({'ts':Date['now'](),'chat':_0x21e200,'processLatency':_0x1114fd,'networkLatency':_0x9e8a86});}catch(_0x2fddc2){error(_0x2fddc2,name+(_0xd81d28(0x249)+_0xd81d28(0x1dc)+_0xd81d28(0x218))+_0x331eca);if(_0x331eca!==_0x21e200)try{warn(name+(_0xd81d28(0x1db)+_0xd81d28(0x238)+_0xd81d28(0x243)+_0xd81d28(0x1f4)+_0xd81d28(0x1fd))+_0x21e200+(_0xd81d28(0x1ea)+_0xd81d28(0x1f2)));const _0x291083=await botInstance['sendMessag'+'e'](_0x21e200,{'text':_0x423609}),_0x111019=_0x291083?.[_0xd81d28(0x21a)]?.['id']||_0x291083?.['id'];if(_0x111019)respondedMsgIds[_0xd81d28(0x203)](_0x111019);pushHistory({'ts':Date[_0xd81d28(0x1d1)](),'chat':_0x21e200,'processLatency':_0x1114fd,'networkLatency':_0x9e8a86});}catch(_0x29326e){error(_0x29326e,name+(_0xd81d28(0x23a)+_0xd81d28(0x21f)+_0xd81d28(0x1d4)+'or\x20origin\x20')+_0x21e200);}}if(respondedMsgIds[_0xd81d28(0x1d2)]>-0x2168+-0x698*0x5+0x2af4*0x2){const _0x521768=Array[_0xd81d28(0x1e9)](respondedMsgIds),_0x552deb=new Set(_0x521768[_0xd81d28(0x1fa)](-(-0x4*-0xf4+0x1ce6*-0x1+0x24ce)));respondedMsgIds=_0x552deb;}}catch(_0x536e61){error(_0x536e61,name+(_0xd81d28(0x226)+_0xd81d28(0x24b)));}}export async function cleanup(){const _0x1e6ca1=_0x27c043;try{botInstance=null,lastPingAt['clear'](),pingHistory[_0x1e6ca1(0x1e3)]=-0x5*0x277+-0x1*0x2039+-0x2c8c*-0x1,respondedMsgIds['clear']&&respondedMsgIds[_0x1e6ca1(0x22f)](),info(name+('\x20cleaned\x20u'+'p'));}catch(_0x1b8a19){warn(name+('\x20cleanup\x20e'+_0x1e6ca1(0x1cd))+(_0x1b8a19?.[_0x1e6ca1(0x248)]||_0x1b8a19));}}