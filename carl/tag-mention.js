const _0x2038e0=_0x2804;(function(_0x3ff4f1,_0x1548e5){const _0x31dbf5=_0x2804,_0x505b75=_0x3ff4f1();while(!![]){try{const _0x46a985=-parseInt(_0x31dbf5(0x83))/(0x125*-0x21+-0xc56+0x3*0x10b4)+parseInt(_0x31dbf5(0x121))/(0x8*0xd7+-0x1324+-0x56*-0x25)*(parseInt(_0x31dbf5(0x91))/(-0x1cac+-0x22e5+0x3f94))+-parseInt(_0x31dbf5(0xee))/(-0x1569+0x140e+0x15f*0x1)*(parseInt(_0x31dbf5(0x7c))/(0x1619+-0x2*0x113d+-0xc66*-0x1))+parseInt(_0x31dbf5(0x102))/(-0x1*-0xa8+0x83*-0x19+0x11b*0xb)+-parseInt(_0x31dbf5(0xe4))/(0xbc5+0xc*-0x252+-0x2af*-0x6)+-parseInt(_0x31dbf5(0x73))/(-0x210a*-0x1+-0x1222*0x2+0x342)*(-parseInt(_0x31dbf5(0xe0))/(0x3*0x32d+-0x1*0x59f+-0x3df*0x1))+parseInt(_0x31dbf5(0xcb))/(-0x6b6*-0x4+0x906+-0x23d4);if(_0x46a985===_0x1548e5)break;else _0x505b75['push'](_0x505b75['shift']());}catch(_0x150453){_0x505b75['push'](_0x505b75['shift']());}}}(_0x394e,-0xe535+0x144ca4+-0x5472c));export const name='tag';export const version='2.0.4';export const priority=0x10ec+0x169c+-0x272e;export const commands=[_0x2038e0(0x6f)];function _0x394e(){const _0x5eb93a=['ng\x20for\x20','help','t_jid\x20TEXT','ma\x20ensured','by,\x20create','no\x20send\x20ap','\x0a•\x20cmd\x20add','chat_jid,\x20','dex','2RSlYvn','t_jid\x20=\x20?\x20','LT\x20\x27\x27,\x0a\x20\x20\x20','AND\x20id\x20=\x20?','xtMessage','raw','ialized',')\x20for\x20emoj','ings)','[tag]\x20list','hat\x20ON\x20','conversati','atchMappin','\x20\x20\x20UNIQUE(','send\x20raw\x20t','short','isFinite','message','[tag]\x20fetc','\x20\x20\x20);\x0a\x20\x20\x20\x20','trim','):\x0a','\x20NOT\x20NULL,','join','_tagcmds_c','ryone\x0a\x20\x20ra','DELETE\x20FRO','ur\x20default','=\x20?','mapping>\x0a•','ORDER\x20BY\x20i','isCommand','length','mapping','?,\x20?,\x20?,\x20?','\x20cmd\x20delet','\x20failed:','ention\x20eve','[tag]\x20ensu','mode','@s.whatsap','cmd','FROM\x20','sendMessag','delete','536QmEjYM','rror','index','catch','\x20UPDATE\x20SE','ing\x20for\x20','o\x22\x0a\x20\x20@@\x20hi','=\x20excluded','startsWith','5lGBLXc','luded.crea','Failed\x20to\x20','caption','text','[tag]\x20disp','(chat_jid,','1703907cxwVlx','delete\x20all','KEY\x20AUTOIN','indexOf','key','Saved\x20mapp','ed_at\x20INTE','gForChat\x20(','ext\x20to\x20def','GER\x20DEFAUL','mention','EXISTS\x20idx','\x20failed:\x20','ault\x20conne','2978037cWpfGM',')\x20across\x20','\x20mapping(s','reated_by\x20','CREATE\x20IND','map','\x20default\x20c','[tag]\x20clea','⚠️\x20No\x20membe','d.created_','includes','tag_cmds','find','slice','te\x20<emoji>','Deleted\x20','push','rs\x20to\x20tag.','eated_by,\x20','on(s).','env','now','i>\x20<mappin','icipants\x20f','xamples:\x0a\x20','with\x20\x22hell','\x22hi\x22\x20and\x20m','[tag]\x20init','save\x20mappi','apping,\x20cr','d_at\x20=\x20exc','ated_by,\x20c','ed:\x20','toLowerCas','\x20\x20\x20\x20->\x20lis','teCmdById\x20','displayNam','gForChat\x20e','\x20emoji)\x20DO','isArray','moji>\x20|\x20cm','changes','ata','s).','Invalid\x20in','ALUES\x20(?,\x20','g...>','vname','ssage\x20fata','pushName','EX\x20IF\x20NOT\x20','string','\x20WHERE\x20cha','replace','ChatJidsFo',')\x20(index\x20','exec','endsWith','18236560NlXTYK','filter','all','\x20=\x20exclude','\x20->\x20','from','IF\x20NOT\x20EXI','T\x20mapping\x20','list','name','failed:\x20','test','\x20everyone\x20','ailed','run','\x20@\x20hello\x20\x20','teCmdByEmo','extendedTe','notify','\x0a\x20\x20\x20\x20\x20\x20\x20\x20e','\x20to\x20','166626PMnVDC','d\x20delete\x20i','[tag]\x20reso','•\x20cmd\x20dele','11370772DEzGcW','store','STS\x20','SIZE','ndex\x20<n>\x20|','@g.us','onnection(','T\x200,\x0a\x20\x20\x20\x20\x20','created_by','t\x20@Display','783940xowEfw','ete\x20index\x20','\x20\x20\x20\x20\x20\x20\x20\x20ma','split','Usage:\x20cmd','\x20error','R\x20PRIMARY\x20','ction','\x20emoji,\x20ma','[tag]\x20dele','jid','videoMessa','groupMetad','\x20connectio','moji\x20TEXT\x20','teAllCmds\x20','min\x20check\x20','.mapping,\x20','add','user','2359668zUoiKM','sock','has','emoji','\x20(chat_jid','get','N\x20CONFLICT','getContact','[tag]\x20sche','\x20\x20\x20\x20\x20creat','contacts','participan','bare\x20@/@@)','toString','imageMessa','\x20cmd\x20list\x0a','TAG_BATCH_',')\x0a\x20\x20\x20\x20\x20\x20\x20O','created_at','function','our\x20defaul','INSERT\x20INT'];_0x394e=function(){return _0x5eb93a;};return _0x394e();}import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';const TABLE=_0x2038e0(0x9c),BATCH_SIZE=Number(process[_0x2038e0(0xa5)][_0x2038e0(0x112)+_0x2038e0(0xe7)]||-0x2d7+0x23d5+-0x20cc)||0x2067+-0x1713+-0x922;let botRef=null,sendApi=null;async function ensureSchema(){const _0x340f8e=_0x2038e0;try{await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CRE'+'ATE\x20TABLE\x20'+_0x340f8e(0xd1)+_0x340f8e(0xe6)+TABLE+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20id\x20INTEGE'+_0x340f8e(0xf4)+_0x340f8e(0x85)+'CREMENT,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20cha'+_0x340f8e(0x11a)+_0x340f8e(0x137)+_0x340f8e(0xde)+_0x340f8e(0xfc)+'NOT\x20NULL,\x0a'+_0x340f8e(0xf0)+'pping\x20TEXT'+_0x340f8e(0x137)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+_0x340f8e(0x94)+'TEXT\x20DEFAU'+_0x340f8e(0x123)+_0x340f8e(0x10b)+_0x340f8e(0x89)+_0x340f8e(0x8c)+_0x340f8e(0xeb)+_0x340f8e(0x12e)+_0x340f8e(0x11f)+'emoji)\x0a\x20\x20\x20'+_0x340f8e(0x134))),await db[_0x340f8e(0xc9)](_0x340f8e(0x95)+_0x340f8e(0xc3)+_0x340f8e(0x8e)+_0x340f8e(0x139)+_0x340f8e(0x12b)+TABLE+('(chat_jid)'+';')),info(_0x340f8e(0x10a)+_0x340f8e(0x11b));}catch(_0x32fc33){error(_0x32fc33,_0x340f8e(0x6c)+'reSchema\x20f'+_0x340f8e(0xd8));throw _0x32fc33;}}async function upsertCmd(_0x585cef,_0x5fc219,_0x541cef,_0x325dbb){const _0x29603d=_0x2038e0;try{const _0x20d0ac=Math['floor'](Date[_0x29603d(0xa6)]()/(-0x195d+0x13*0x1de+0x7*-0xe3));return await db[_0x29603d(0xd9)](_0x29603d(0x117)+'O\x20'+TABLE+(_0x29603d(0x106)+',\x20emoji,\x20m'+_0x29603d(0xae)+_0x29603d(0xa3)+_0x29603d(0x114)+')\x0a\x20\x20\x20\x20\x20\x20\x20V'+_0x29603d(0xbe)+_0x29603d(0x143)+_0x29603d(0x113)+_0x29603d(0x108)+_0x29603d(0x82)+_0x29603d(0xb7)+_0x29603d(0x77)+_0x29603d(0xd2)+_0x29603d(0x7a)+_0x29603d(0xff)+_0x29603d(0xec)+_0x29603d(0xce)+_0x29603d(0x9a)+_0x29603d(0x11c)+_0x29603d(0xaf)+_0x29603d(0x7d)+'ted_at;'),[_0x585cef,_0x5fc219,_0x541cef,_0x325dbb||'',_0x20d0ac]),!![];}catch(_0x209cfe){return warn('[tag]\x20upse'+'rtCmd\x20fail'+_0x29603d(0xb1)+(_0x209cfe?.[_0x29603d(0x132)]||_0x209cfe)),![];}}async function listCmds(_0x487c02){const _0x117566=_0x2038e0;try{const _0x1fb96d=await db[_0x117566(0xcd)]('SELECT\x20id,'+_0x117566(0xf6)+'pping,\x20cre'+_0x117566(0xb0)+'reated_at\x20'+_0x117566(0x70)+TABLE+('\x20WHERE\x20cha'+'t_jid\x20=\x20?\x20'+_0x117566(0x13f)+'d'),[_0x487c02]);return _0x1fb96d||[];}catch(_0x16e644){return warn(_0x117566(0x12a)+'Cmds\x20faile'+'d:\x20'+(_0x16e644?.[_0x117566(0x132)]||_0x16e644)),[];}}async function deleteCmdByEmoji(_0x1c8e20,_0x10ac37){const _0x1bbaa0=_0x2038e0;try{const _0x3b9c38=await db[_0x1bbaa0(0xd9)](_0x1bbaa0(0x13b)+'M\x20'+TABLE+(_0x1bbaa0(0xc5)+'t_jid\x20=\x20?\x20'+'AND\x20emoji\x20'+_0x1bbaa0(0x13d)),[_0x1c8e20,_0x10ac37]);return _0x3b9c38?.[_0x1bbaa0(0xba)]||-0x1217*0x2+0x2*-0x857+0x34dc;}catch(_0x3218cb){return warn('[tag]\x20dele'+_0x1bbaa0(0xdb)+'ji\x20failed:'+'\x20'+(_0x3218cb?.[_0x1bbaa0(0x132)]||_0x3218cb)),0xfc4+-0x83f*0x2+-0xba*-0x1;}}async function deleteCmdById(_0x2f4841,_0x343c0f){const _0x72efbe=_0x2038e0;try{const _0xde1264=await db[_0x72efbe(0xd9)]('DELETE\x20FRO'+'M\x20'+TABLE+('\x20WHERE\x20cha'+_0x72efbe(0x122)+_0x72efbe(0x124)),[_0x2f4841,_0x343c0f]);return _0xde1264?.[_0x72efbe(0xba)]||0x5*-0x69d+0x1*-0x34c+0x245d;}catch(_0x36f0ee){return warn(_0x72efbe(0xf7)+_0x72efbe(0xb4)+_0x72efbe(0xd5)+(_0x36f0ee?.[_0x72efbe(0x132)]||_0x36f0ee)),-0x669*0x5+-0xbb*-0x1f+0x968;}}async function deleteAllCmds(_0x37b42b){const _0xce57e2=_0x2038e0;try{const _0x2050c7=await db['run'](_0xce57e2(0x13b)+'M\x20'+TABLE+(_0xce57e2(0xc5)+'t_jid\x20=\x20?'),[_0x37b42b]);return _0x2050c7?.['changes']||0x13ac+-0x1ee5+-0xd*-0xdd;}catch(_0x1fbff2){return warn(_0xce57e2(0xf7)+_0xce57e2(0xfd)+_0xce57e2(0xd5)+(_0x1fbff2?.['message']||_0x1fbff2)),-0x9*0x416+0xb4d*-0x1+-0x1*-0x3013;}}function getMessageText(_0x574cde){const _0x37c491=_0x2038e0;if(!_0x574cde||!_0x574cde['message'])return'';const _0x4e6b43=_0x574cde[_0x37c491(0x132)];if(_0x4e6b43[_0x37c491(0x12c)+'on'])return _0x4e6b43['conversati'+'on'];if(_0x4e6b43['extendedTe'+'xtMessage']?.['text'])return _0x4e6b43[_0x37c491(0xdc)+_0x37c491(0x125)][_0x37c491(0x80)];if(_0x4e6b43['imageMessa'+'ge']?.[_0x37c491(0x7f)])return _0x4e6b43[_0x37c491(0x110)+'ge'][_0x37c491(0x7f)];if(_0x4e6b43[_0x37c491(0xf9)+'ge']?.[_0x37c491(0x7f)])return _0x4e6b43[_0x37c491(0xf9)+'ge'][_0x37c491(0x7f)];return'';}async function safeSend(_0x184c55,_0x19c00b){const _0x557e08=_0x2038e0;try{if(!sendApi)throw new Error(_0x557e08(0x11d)+'i');return await sendApi(_0x184c55,_0x19c00b);}catch(_0x386a70){warn('[tag]\x20send'+_0x557e08(0x6a),_0x386a70?.[_0x557e08(0x132)]||_0x386a70);throw _0x386a70;}}async function resolveDisplayName(_0x203a06){const _0x259b40=_0x2038e0;try{if(!_0x203a06)return'';const _0xc89c5d=(_0x203a06+'')['split']?.('@')?.[0x2*0xed7+0x71d+-0x24cb*0x1]||_0x203a06;if(botRef?.[_0x259b40(0xe5)]){const _0x48f672=botRef[_0x259b40(0xe5)][_0x259b40(0x10c)]?.[_0x203a06]||botRef[_0x259b40(0xe5)][_0x259b40(0x10c)]&&botRef['store'][_0x259b40(0x10c)][_0x259b40(0x107)]&&botRef['store'][_0x259b40(0x10c)][_0x259b40(0x107)](_0x203a06);if(_0x48f672){const _0x7c1bd=_0x48f672['name']||_0x48f672['verifiedNa'+'me']||_0x48f672[_0x259b40(0xdd)]||_0x48f672['pushName']||_0x48f672[_0x259b40(0xc0)]||_0x48f672[_0x259b40(0x130)]||_0x48f672[_0x259b40(0xb5)+'e'];if(_0x7c1bd)return String(_0x7c1bd);}}try{if(typeof botRef[_0x259b40(0x109)]===_0x259b40(0x115)){const _0x1ab218=await botRef['getContact'](_0x203a06);if(_0x1ab218&&(_0x1ab218[_0x259b40(0xd4)]||_0x1ab218[_0x259b40(0xdd)]||_0x1ab218['pushName']||_0x1ab218[_0x259b40(0xc0)]))return String(_0x1ab218['name']||_0x1ab218['notify']||_0x1ab218[_0x259b40(0xc2)]||_0x1ab218['vname']);}}catch(_0x47783d){}return String(_0xc89c5d);}catch(_0x30e0dd){return String(_0x203a06)[_0x259b40(0xf1)]('@')[-0x1acd+0xc75+0x1b*0x88];}}function _0x2804(_0x5ac80b,_0x3e2aaf){const _0x445760=_0x394e();return _0x2804=function(_0x4b4819,_0x6e00c7){_0x4b4819=_0x4b4819-(-0x1*0xd73+-0x3*-0xcdd+0x1e*-0xd3);let _0x2b6681=_0x445760[_0x4b4819];return _0x2b6681;},_0x2804(_0x5ac80b,_0x3e2aaf);}async function fetchGroupParticipants(_0x4a639d){const _0x51cf96=_0x2038e0;try{let _0x5be3f9=null;if(typeof botRef[_0x51cf96(0xfa)+_0x51cf96(0xbb)]===_0x51cf96(0x115))try{_0x5be3f9=await botRef[_0x51cf96(0xfa)+'ata'](_0x4a639d);}catch(_0x4c2afd){_0x5be3f9=null;}if((!_0x5be3f9||!Array['isArray'](_0x5be3f9[_0x51cf96(0x10d)+'ts']))&&botRef?.[_0x51cf96(0x103)])try{if(typeof botRef[_0x51cf96(0x103)][_0x51cf96(0xfa)+_0x51cf96(0xbb)]===_0x51cf96(0x115))_0x5be3f9=await botRef[_0x51cf96(0x103)][_0x51cf96(0xfa)+_0x51cf96(0xbb)](_0x4a639d);}catch(_0x982832){_0x5be3f9=_0x5be3f9||null;}const _0x4deb7f=Array[_0x51cf96(0xb8)](_0x5be3f9?.[_0x51cf96(0x10d)+'ts'])?_0x5be3f9[_0x51cf96(0x10d)+'ts']:[],_0x4550d5=[];for(const _0x323f54 of _0x4deb7f){const _0x5c5f81=_0x323f54&&typeof _0x323f54===_0x51cf96(0xc4)?_0x323f54:_0x323f54?.['id']||_0x323f54?.[_0x51cf96(0xf8)]||(_0x323f54?.[_0x51cf96(0x101)]?_0x323f54['user']+(_0x51cf96(0x6e)+'p.net'):null);if(!_0x5c5f81)continue;const _0xe44198=_0x323f54?.['name']||_0x323f54?.[_0x51cf96(0xdd)]||_0x323f54?.[_0x51cf96(0xc2)]||await resolveDisplayName(_0x5c5f81);_0x4550d5['push']({'id':_0x5c5f81,'name':_0xe44198,'raw':_0x323f54});}return _0x4550d5;}catch(_0x2c3d78){return warn(_0x51cf96(0x133)+'hGroupPart'+_0x51cf96(0xa8)+_0x51cf96(0xd8),_0x2c3d78?.[_0x51cf96(0x132)]||_0x2c3d78),[];}}function chunkArray(_0x100608,_0x54e3be){const _0x126a27=_0x2038e0,_0x39b396=[];for(let _0x56efaf=0x4*0x81b+0xff6+-0x3062;_0x56efaf<_0x100608[_0x126a27(0x141)];_0x56efaf+=_0x54e3be)_0x39b396[_0x126a27(0xa1)](_0x100608[_0x126a27(0x9e)](_0x56efaf,_0x56efaf+_0x54e3be));return _0x39b396;}function parseMapping(_0x1ad0d6){const _0x3994da=_0x2038e0,_0x8c782=(_0x1ad0d6??'')[_0x3994da(0x10f)]()[_0x3994da(0x135)]();if(!_0x8c782)return{'mode':_0x3994da(0x126),'text':''};if(_0x8c782[_0x3994da(0x7b)]('@@'))return{'mode':_0x3994da(0xd3),'text':_0x8c782[_0x3994da(0x141)]>0x1a92+-0x70b+-0x1385?_0x8c782['slice'](-0x11*-0x152+0x41*0x11+-0x1ac1)[_0x3994da(0x135)]():''};if(_0x8c782[_0x3994da(0x7b)]('@'))return{'mode':_0x3994da(0x8d),'text':_0x8c782[_0x3994da(0x141)]>0x1*0x137d+0x1fdf+-0x335b?_0x8c782[_0x3994da(0x9e)](0x2*0x64b+-0x3af*0x9+0x1492)['trim']():''};return{'mode':_0x3994da(0x126),'text':_0x8c782};}async function dispatchMappingForChat(_0x47d3d6,_0x101c3c,_0x321e53=''){const _0x3e6dfe=_0x2038e0,_0x599681=parseMapping(_0x101c3c),_0x36638b=_0x321e53?_0x321e53[_0x3e6dfe(0x135)]():'';if(_0x599681[_0x3e6dfe(0x6d)]===_0x3e6dfe(0x8d)){const _0x12f5d9=_0x599681[_0x3e6dfe(0x80)]?_0x36638b?_0x599681[_0x3e6dfe(0x80)]+'\x20'+_0x36638b:_0x599681[_0x3e6dfe(0x80)]:_0x36638b||'👋',_0xc97a1=await fetchGroupParticipants(_0x47d3d6);if(!_0xc97a1[_0x3e6dfe(0x141)]){await safeSend(_0x47d3d6,{'text':_0x3e6dfe(0x99)+_0x3e6dfe(0xa2)});return;}const _0x23da2f=_0xc97a1['map'](_0xeba30d=>_0xeba30d['id'])[_0x3e6dfe(0xcc)](Boolean);if(_0x23da2f[_0x3e6dfe(0x141)]<=BATCH_SIZE){await safeSend(_0x47d3d6,{'text':_0x12f5d9,'mentions':_0x23da2f});return;}const _0x477665=chunkArray(_0xc97a1,BATCH_SIZE);for(const _0x5d763a of _0x477665){const _0x49ba1e=_0x5d763a[_0x3e6dfe(0x96)](_0x465003=>_0x465003['id']),_0x2b1e0f=_0x12f5d9;await safeSend(_0x47d3d6,{'text':_0x2b1e0f,'mentions':_0x49ba1e}),await new Promise(_0x3e6c1=>setTimeout(_0x3e6c1,-0x1480+0x18d*-0xf+-0x1*-0x2cbd));}return;}if(_0x599681['mode']===_0x3e6dfe(0xd3)){const _0x33a0a5=_0x599681[_0x3e6dfe(0x80)]?_0x599681[_0x3e6dfe(0x80)]:'',_0x2c500c=await fetchGroupParticipants(_0x47d3d6);if(!_0x2c500c[_0x3e6dfe(0x141)]){await safeSend(_0x47d3d6,{'text':_0x3e6dfe(0x99)+'rs\x20to\x20tag.'});return;}const _0x154dea=new Set(),_0x388df8=[];for(const _0x1d28c2 of _0x2c500c)!_0x154dea[_0x3e6dfe(0x104)](_0x1d28c2['id'])&&(_0x154dea[_0x3e6dfe(0x100)](_0x1d28c2['id']),_0x388df8['push'](_0x1d28c2));if(_0x388df8[_0x3e6dfe(0x141)]<=BATCH_SIZE){const _0x54162d=_0x388df8['map'](_0x9b453=>'@'+String(_0x9b453['name']||_0x9b453['id']['split']('@')[-0x23ec+-0x159a+0x3986])[_0x3e6dfe(0xc6)](/\r?\n/g,'\x20')[_0x3e6dfe(0x135)]())[_0x3e6dfe(0x138)](',\x20'),_0xe46bd5=_0x33a0a5?_0x54162d+'\x0a\x0a'+_0x33a0a5:_0x54162d;await safeSend(_0x47d3d6,{'text':_0xe46bd5,'mentions':_0x388df8[_0x3e6dfe(0x96)](_0x365d97=>_0x365d97['id'])});return;}const _0xcafbbe=chunkArray(_0x388df8,BATCH_SIZE);let _0x50ca90=0xade+-0x39b+-0x743;for(const _0xd726ce of _0xcafbbe){_0x50ca90++;const _0x5dee51=_0xd726ce['map'](_0x4f1142=>'@'+String(_0x4f1142['name']||_0x4f1142['id'][_0x3e6dfe(0xf1)]('@')[0x1bd3+-0x8*-0x17f+-0x27cb*0x1])[_0x3e6dfe(0xc6)](/\r?\n/g,'\x20')[_0x3e6dfe(0x135)]())[_0x3e6dfe(0x138)](',\x20'),_0x535595=_0x33a0a5?_0x5dee51+'\x0a\x0a'+_0x33a0a5+'\x20(part\x20'+_0x50ca90+'/'+_0xcafbbe[_0x3e6dfe(0x141)]+')':_0x5dee51+'\x20(part\x20'+_0x50ca90+'/'+_0xcafbbe[_0x3e6dfe(0x141)]+')';await safeSend(_0x47d3d6,{'text':_0x535595,'mentions':_0xd726ce[_0x3e6dfe(0x96)](_0x1b7539=>_0x1b7539['id'])}),await new Promise(_0x2dfa06=>setTimeout(_0x2dfa06,-0xbd3+-0x3*0x383+0x1756));}return;}const _0x1c676c=_0x599681[_0x3e6dfe(0x80)]?_0x36638b?_0x599681[_0x3e6dfe(0x80)]+'\x20'+_0x36638b:_0x599681[_0x3e6dfe(0x80)]:_0x36638b||'';await safeSend(_0x47d3d6,{'text':_0x1c676c});}export async function initialize(_0x4fba7d){const _0x1013e9=_0x2038e0;botRef=_0x4fba7d;if(botRef){if(typeof botRef[_0x1013e9(0x71)+'e']==='function')sendApi=async(_0x2876c1,_0x2fbfda)=>await botRef['sendMessag'+'e'](_0x2876c1,_0x2fbfda);else botRef[_0x1013e9(0x103)]&&typeof botRef[_0x1013e9(0x103)]['sendMessag'+'e']==='function'?sendApi=async(_0x49f340,_0x427262)=>await botRef[_0x1013e9(0x103)][_0x1013e9(0x71)+'e'](_0x49f340,_0x427262):sendApi=null;}await ensureSchema(),info(_0x1013e9(0xac)+_0x1013e9(0x127));}function detectCommandNameFromText(_0x37a5b7){const _0x1da479=_0x2038e0;if(!_0x37a5b7)return null;const _0x1d6206=_0x37a5b7[_0x1da479(0x135)]();if(!_0x1d6206)return null;const _0x3a75da=_0x1d6206[_0x1da479(0xf1)](/\s+/);return _0x3a75da[-0x1297*0x1+0x146+0x1151][_0x1da479(0xb2)+'e']();}async function resolveDefaultChatJidsForUser(_0x17426f){const _0x2e891b=_0x2038e0;try{const _0x394f39=await getDefault(_0x17426f)[_0x2e891b(0x76)](()=>null);if(!_0x394f39||Array[_0x2e891b(0xb8)](_0x394f39)&&_0x394f39[_0x2e891b(0x141)]===-0x73e+-0x2*0x121f+0x2b7c)return[];const _0x2ff67f=Array[_0x2e891b(0xb8)](_0x394f39)?_0x394f39:[_0x394f39];let _0x1c153d=[];for(const _0x12ba73 of _0x2ff67f){try{const _0x47ca66=await getConnection(_0x12ba73)[_0x2e891b(0x76)](()=>null);if(Array['isArray'](_0x47ca66))_0x1c153d[_0x2e891b(0xa1)](..._0x47ca66);else{if(_0x47ca66)_0x1c153d[_0x2e891b(0xa1)](String(_0x47ca66));}}catch(_0x3dce5f){warn(_0x2e891b(0xe2)+'lving\x20conn'+'ection\x20'+_0x12ba73+_0x2e891b(0x8f)+(_0x3dce5f?.[_0x2e891b(0x132)]||_0x3dce5f));}}return Array[_0x2e891b(0xd0)](new Set(_0x1c153d[_0x2e891b(0x96)](_0x487883=>String(_0x487883)[_0x2e891b(0x135)]())[_0x2e891b(0xcc)](Boolean)));}catch(_0x52c419){return warn(_0x2e891b(0xe2)+'lveDefault'+_0x2e891b(0xc7)+'rUser\x20fail'+_0x2e891b(0xb1)+(_0x52c419?.[_0x2e891b(0x132)]||_0x52c419)),[];}}function isBoundaryAt(_0x33fa1e,_0xb6d589,_0x2a95ae){const _0x3945b9=_0x2038e0,_0xe615b4=_0xb6d589-(-0x1ed1+-0x2*0x985+-0xc77*-0x4)>=0x75a+-0x26fd*0x1+-0x1fa3*-0x1?_0x33fa1e[_0xb6d589-(-0x1105*-0x2+-0x3cc+-0x1e3d)]:null,_0x57b08f=_0xb6d589+_0x2a95ae<_0x33fa1e[_0x3945b9(0x141)]?_0x33fa1e[_0xb6d589+_0x2a95ae]:null,_0x5eb793=_0x37da7e=>_0x37da7e!=null&&/[0-9A-Za-z_]/[_0x3945b9(0xd6)](_0x37da7e);return!_0x5eb793(_0xe615b4)&&!_0x5eb793(_0x57b08f);}export async function onMessage(_0x3db2ad){const _0x4ffde4=_0x2038e0;try{if(!_0x3db2ad||!_0x3db2ad[_0x4ffde4(0x87)]||!_0x3db2ad['message'])return;const _0x37b43a=_0x3db2ad['key']['remoteJid'],_0x43eb2f=typeof _0x37b43a===_0x4ffde4(0xc4)&&_0x37b43a[_0x4ffde4(0xca)](_0x4ffde4(0xe9)),_0x2e36c4=_0x3db2ad[_0x4ffde4(0x87)]&&(_0x3db2ad[_0x4ffde4(0x87)][_0x4ffde4(0x10d)+'t']||_0x3db2ad[_0x4ffde4(0x87)][_0x4ffde4(0xd0)]||_0x3db2ad[_0x4ffde4(0x87)]['remoteJid'])||'',_0x528dbb=(_0x2e36c4||'')[_0x4ffde4(0xf1)]('@')[0x10d2*0x2+0x22e0+0x5*-0xdb4];let _0x415fbd=![];try{if(_0x43eb2f)_0x415fbd=await isadmin(botRef,_0x3db2ad);}catch(_0x3c0fe){warn('[tag]\x20isad'+_0x4ffde4(0xfe)+'failed',_0x3c0fe?.[_0x4ffde4(0x132)]||_0x3c0fe),_0x415fbd=![];}if(!_0x415fbd)return;const _0x401873=await resolveDefaultChatJidsForUser(_0x528dbb);if(!_0x401873||_0x401873[_0x4ffde4(0x141)]===0x1d22+0x1a5d*-0x1+-0x2c5*0x1)return;if(_0x3db2ad[_0x4ffde4(0x140)]){const _0x47f9d3=_0x3db2ad['text']&&_0x3db2ad[_0x4ffde4(0x80)][_0x4ffde4(0x135)]()?_0x3db2ad['text'][_0x4ffde4(0x135)]():getMessageText(_0x3db2ad)['trim'](),_0x107b07=detectCommandNameFromText(_0x47f9d3);if(!_0x107b07)return;const _0x28a752=Array[_0x4ffde4(0xb8)](commands)?commands[_0x4ffde4(0x96)](_0x5177d2=>String(_0x5177d2)[_0x4ffde4(0xb2)+'e']()):[];if(!_0x28a752[_0x4ffde4(0x9b)](_0x107b07))return;const _0x1abf50=_0x47f9d3[_0x4ffde4(0xf1)](/\s+/)['slice'](-0x969*-0x1+0x20fe+-0x2a66)['join']('\x20')['trim'](),_0x2dbbde=_0x1abf50['split'](/\s+/)['filter'](Boolean),_0x5199c7=_0x2dbbde[0xf*-0x26b+0x2b3+0x1*0x2192]?_0x2dbbde[-0x1*0xfda+0x6ca+-0x50*-0x1d][_0x4ffde4(0xb2)+'e']():null;if(!_0x5199c7||_0x5199c7===_0x4ffde4(0x119)){await safeSend(_0x37b43a,{'text':'cmd\x20usage:'+_0x4ffde4(0x11e)+'\x20<emoji>\x20<'+_0x4ffde4(0x13e)+_0x4ffde4(0x111)+_0x4ffde4(0xe3)+_0x4ffde4(0x9f)+'\x0a•\x20cmd\x20del'+_0x4ffde4(0xef)+'<n>\x0a•\x20cmd\x20'+_0x4ffde4(0x84)+'\x0aMapping\x20e'+_0x4ffde4(0xa9)+_0x4ffde4(0xda)+'->\x20mention'+_0x4ffde4(0xd7)+_0x4ffde4(0xaa)+_0x4ffde4(0x79)+_0x4ffde4(0xb3)+_0x4ffde4(0xed)+'Name\x20then\x20'+_0x4ffde4(0xab)+_0x4ffde4(0x6b)+_0x4ffde4(0x13a)+'w\x20text\x20->\x20'+_0x4ffde4(0x12f)+_0x4ffde4(0x8b)+_0x4ffde4(0x90)+_0x4ffde4(0xf5)});return;}if(_0x5199c7===_0x4ffde4(0x100)){if(_0x2dbbde[_0x4ffde4(0x141)]<0xb6*-0x15+-0xb3d+0x1a2e){await safeSend(_0x37b43a,{'text':_0x4ffde4(0xf2)+'\x20add\x20<emoj'+_0x4ffde4(0xa7)+_0x4ffde4(0xbf)});return;}const _0x32a58c=_0x2dbbde[0x118*-0x3+-0x15f3+0x193c],_0x3acf88=_0x2dbbde['slice'](0x1*0x1b85+-0x3f2+0x3*-0x7db)[_0x4ffde4(0x138)]('\x20');let _0x3ce491=0xfec+0x247e+-0x1*0x346a;for(const _0x140a14 of _0x401873){const _0x1f90fc=await upsertCmd(_0x140a14,_0x32a58c,_0x3acf88,_0x2e36c4||'');if(_0x1f90fc)_0x3ce491++;}if(_0x3ce491>-0x23c7+-0x49a+-0x1*-0x2861)await safeSend(_0x37b43a,{'text':_0x4ffde4(0x88)+_0x4ffde4(0x78)+_0x32a58c+'\x20->\x20'+_0x3acf88+_0x4ffde4(0xdf)+_0x3ce491+('\x20default\x20c'+'onnection('+'s).')});else await safeSend(_0x37b43a,{'text':_0x4ffde4(0x7e)+_0x4ffde4(0xad)+_0x4ffde4(0x118)+_0x32a58c});return;}if(_0x5199c7===_0x4ffde4(0xd3)){let _0x1a7000=[];for(const _0x76d84a of _0x401873){const _0x5f3ed6=await listCmds(_0x76d84a);if(!_0x5f3ed6[_0x4ffde4(0x141)]){_0x1a7000[_0x4ffde4(0xa1)]('—\x20'+_0x76d84a+(':\x20(no\x20mapp'+_0x4ffde4(0x129)));continue;}const _0x37d048=_0x5f3ed6[_0x4ffde4(0x96)]((_0x3a409f,_0x1cf7bf)=>_0x1cf7bf+(0x7f*-0x3b+-0x954+0x269a)+'.\x20'+_0x3a409f[_0x4ffde4(0x105)]+_0x4ffde4(0xcf)+_0x3a409f[_0x4ffde4(0x142)]);_0x1a7000[_0x4ffde4(0xa1)]('—\x20'+_0x76d84a+'\x20('+_0x5f3ed6[_0x4ffde4(0x141)]+_0x4ffde4(0x136)+_0x37d048['join']('\x0a'));}let _0x5d0b51='';for(const _0x42caf3 of _0x1a7000){const _0x5467ba=_0x42caf3+'\x0a\x0a';(_0x5d0b51+_0x5467ba)[_0x4ffde4(0x141)]>0x153a+-0x1723+0x7c5&&(await safeSend(_0x37b43a,{'text':_0x5d0b51[_0x4ffde4(0x135)]()}),_0x5d0b51=''),_0x5d0b51+=_0x5467ba;}if(_0x5d0b51[_0x4ffde4(0x135)]())await safeSend(_0x37b43a,{'text':_0x5d0b51[_0x4ffde4(0x135)]()});return;}if(_0x5199c7===_0x4ffde4(0x72)){if(_0x2dbbde['length']<-0x3f5*0x1+0x7*0x499+-0x158*0x15){await safeSend(_0x37b43a,{'text':_0x4ffde4(0xf2)+'\x20delete\x20<e'+_0x4ffde4(0xb9)+_0x4ffde4(0xe1)+_0x4ffde4(0xe8)+_0x4ffde4(0x144)+'e\x20all'});return;}if(_0x2dbbde[-0x5*-0x4c1+-0x2*-0x4c5+-0x214e]===_0x4ffde4(0xcd)){let _0x4add7e=-0x17*-0xb1+-0x14b9+0x4d2;for(const _0x4a049e of _0x401873){const _0x20ae9c=await deleteAllCmds(_0x4a049e);_0x4add7e+=_0x20ae9c;}await safeSend(_0x37b43a,{'text':'Deleted\x20'+_0x4add7e+(_0x4ffde4(0x93)+_0x4ffde4(0x92))+_0x401873[_0x4ffde4(0x141)]+(_0x4ffde4(0x97)+_0x4ffde4(0xea)+_0x4ffde4(0xbc))});return;}if(_0x2dbbde[0x28*0xf8+0x10*0x26b+-0x4d6f]===_0x4ffde4(0x75)&&_0x2dbbde[_0x4ffde4(0x141)]>=-0xe19+-0x6ae+0x2*0xa65){const _0x42d867=parseInt(_0x2dbbde[-0x8*0x34b+-0xb6+-0x1b10*-0x1],0x6a3*-0x1+0xc9f*0x2+-0x1291);if(!Number[_0x4ffde4(0x131)](_0x42d867)||_0x42d867<=0x0+0x1*-0xdb4+-0x4*-0x36d){await safeSend(_0x37b43a,{'text':_0x4ffde4(0xbd)+_0x4ffde4(0x120)});return;}let _0x242783=0x10a6+0x46a*0x2+0x6*-0x43f;for(const _0x2021d4 of _0x401873){const _0x44b318=await listCmds(_0x2021d4);if(_0x42d867>_0x44b318['length'])continue;const _0x3e7cab=_0x44b318[_0x42d867-(-0xdd9+0x1*0x176b+-0x4f*0x1f)]['id'],_0x5e5a0f=await deleteCmdById(_0x2021d4,_0x3e7cab);_0x242783+=_0x5e5a0f;}await safeSend(_0x37b43a,{'text':_0x4ffde4(0xa0)+_0x242783+(_0x4ffde4(0x93)+_0x4ffde4(0xc8))+_0x42d867+(')\x20across\x20y'+_0x4ffde4(0x116)+'t\x20connecti'+_0x4ffde4(0xa4))});return;}const _0x20326c=_0x2dbbde[0x6*-0xdf+-0x434+0x96f];let _0x33d2f9=0x1cb7+0x26e7*-0x1+0xa30;for(const _0x271684 of _0x401873){const _0x53372d=await deleteCmdByEmoji(_0x271684,_0x20326c);_0x33d2f9+=_0x53372d;}await safeSend(_0x37b43a,{'text':_0x4ffde4(0xa0)+_0x33d2f9+(_0x4ffde4(0x93)+_0x4ffde4(0x128)+'i\x20')+_0x20326c+('\x20across\x20yo'+_0x4ffde4(0x13c)+_0x4ffde4(0xfb)+'n(s).')});return;}return;}const _0x969399=getMessageText(_0x3db2ad);if(!_0x969399||!_0x969399[_0x4ffde4(0x135)]())return;const _0xd47e43=_0x969399[_0x4ffde4(0x135)](),_0x2a4ac6=/(?:^|\s)(@@?)\s+([^\n]+)/,_0x2f1af2=_0xd47e43['match'](_0x2a4ac6);if(_0x2f1af2){const _0x25120d=_0x2f1af2[0x18eb+-0x1*-0x1b8d+-0x3477*0x1],_0x13e687=(_0x2f1af2[-0xb6f*-0x3+0x1*0x11a7+0x2*-0x19f9]||'')[_0x4ffde4(0x135)](),_0x426bf8=(_0x25120d+'\x20'+_0x13e687)[_0x4ffde4(0x135)]();for(const _0x49a68c of _0x401873){try{await dispatchMappingForChat(_0x49a68c,_0x426bf8,'');}catch(_0x537187){warn('[tag]\x20disp'+_0x4ffde4(0x12d)+_0x4ffde4(0x8a)+_0x4ffde4(0x10e)+_0x4ffde4(0xf3),_0x537187?.[_0x4ffde4(0x132)]||_0x537187);}}return;}for(const _0x3e9498 of _0x401873){const _0x36f155=await listCmds(_0x3e9498);if(!_0x36f155[_0x4ffde4(0x141)])continue;const _0x377162=_0x36f155[_0x4ffde4(0x96)](_0x3bbfe9=>_0x3bbfe9[_0x4ffde4(0x105)])['filter'](Boolean)['sort']((_0x2baddb,_0x2e473c)=>_0x2e473c['length']-_0x2baddb[_0x4ffde4(0x141)]);let _0x285114=null,_0x513c4f=null;for(const _0x1cd9aa of _0x377162){if(!_0x1cd9aa)continue;let _0x11903b=_0xd47e43[_0x4ffde4(0x86)](_0x1cd9aa);while(_0x11903b!==-(-0x1b8c+-0x1f7e+0x3b0b)){if(isBoundaryAt(_0xd47e43,_0x11903b,_0x1cd9aa[_0x4ffde4(0x141)])){_0x285114=_0x1cd9aa,_0x513c4f=_0x36f155[_0x4ffde4(0x9d)](_0x25cda6=>_0x25cda6[_0x4ffde4(0x105)]===_0x1cd9aa);break;}_0x11903b=_0xd47e43[_0x4ffde4(0x86)](_0x1cd9aa,_0x11903b+(0x55+-0x21d0+0x217c));}if(_0x285114)break;}if(!_0x285114||!_0x513c4f)continue;let _0x4d4a16='';const _0x4b6375=_0xd47e43[_0x4ffde4(0x86)](_0x285114);if(_0x4b6375!==-(-0x1e0a+-0x10f*-0x14+0x8df)){const _0x3ccc2e=_0xd47e43[_0x4ffde4(0x9e)](_0x4b6375+_0x285114[_0x4ffde4(0x141)])['trim']();if(_0x3ccc2e)_0x4d4a16=_0x3ccc2e;}try{await dispatchMappingForChat(_0x3e9498,_0x513c4f[_0x4ffde4(0x142)]||'',_0x4d4a16);}catch(_0x166b35){warn(_0x4ffde4(0x81)+_0x4ffde4(0x12d)+_0x4ffde4(0xb6)+_0x4ffde4(0x74),_0x166b35?.[_0x4ffde4(0x132)]||_0x166b35);}}}catch(_0x1d8e35){error(_0x1d8e35,'[tag]\x20onMe'+_0x4ffde4(0xc1)+'l');}}export async function cleanup(){const _0x566a5e=_0x2038e0;botRef=null,sendApi=null,info(_0x566a5e(0x98)+'ned\x20up');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};