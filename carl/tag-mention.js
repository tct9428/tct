const _0x4915c0=_0x27e7;(function(_0x41b1c1,_0x37237e){const _0x46a3ca=_0x27e7,_0x425b49=_0x41b1c1();while(!![]){try{const _0x2e4461=parseInt(_0x46a3ca(0xbe))/(0x1ea7+-0x2617+0x771)+parseInt(_0x46a3ca(0x15b))/(0xf30+-0x541+-0x7*0x16b)+parseInt(_0x46a3ca(0xfa))/(-0x25c2+0xf*0x1fb+0x810)+parseInt(_0x46a3ca(0xcc))/(0xffa+0x19f+-0x1195)+parseInt(_0x46a3ca(0x114))/(0x2352+0x23c9*-0x1+0x1*0x7c)*(-parseInt(_0x46a3ca(0x14f))/(0x118b+0x5*-0xe4+-0xd11))+parseInt(_0x46a3ca(0x165))/(-0x25b7+-0xeaf+0x346d)*(-parseInt(_0x46a3ca(0xfc))/(0x253d+0x2629+-0x2*0x25af))+-parseInt(_0x46a3ca(0xd6))/(-0x17*-0x86+0x138c+0x1f8d*-0x1);if(_0x2e4461===_0x37237e)break;else _0x425b49['push'](_0x425b49['shift']());}catch(_0x3893ec){_0x425b49['push'](_0x425b49['shift']());}}}(_0x4fed,-0xf19e*-0x1+0x1*-0x67fab+0x9907c));export const name=_0x4915c0(0x130);export const version=_0x4915c0(0x149);export const priority=-0x1708+-0x7*0x283+0x28f7;export const commands=['cmd'];import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';const TABLE='tag_cmds',BATCH_SIZE=Number(process[_0x4915c0(0x148)][_0x4915c0(0x14d)+_0x4915c0(0x186)]||0x15a5+0x1*-0x74c+-0xe27)||-0x1*0x1196+0x1*-0x213b+0x3*0x1101;let botRef=null,sendApi=null;async function ensureSchema(){const _0x2eaca8=_0x4915c0;try{await db[_0x2eaca8(0xbc)]('\x0a\x20\x20\x20\x20\x20\x20CRE'+_0x2eaca8(0xec)+_0x2eaca8(0x178)+_0x2eaca8(0xe4)+TABLE+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20id\x20INTEGE'+_0x2eaca8(0xf4)+_0x2eaca8(0x134)+_0x2eaca8(0x14c)+_0x2eaca8(0xf1)+_0x2eaca8(0x17f)+_0x2eaca8(0x17e)+_0x2eaca8(0xdb)+_0x2eaca8(0x177)+_0x2eaca8(0x154)+_0x2eaca8(0xca)+_0x2eaca8(0xb0)+_0x2eaca8(0x17e)+_0x2eaca8(0xed)+'reated_by\x20'+_0x2eaca8(0x115)+'LT\x20\x27\x27,\x0a\x20\x20\x20'+_0x2eaca8(0x145)+_0x2eaca8(0xb4)+'GER\x20DEFAUL'+_0x2eaca8(0x175)+_0x2eaca8(0x103)+'chat_jid,\x20'+_0x2eaca8(0x10d)+_0x2eaca8(0x120))),await db['exec']('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+_0x2eaca8(0x142)+_0x2eaca8(0x13a)+_0x2eaca8(0xc3)+TABLE+(_0x2eaca8(0x125)+';')),info('[tag]\x20sche'+'ma\x20ensured');}catch(_0x17b634){error(_0x17b634,_0x2eaca8(0xb2)+_0x2eaca8(0xc4)+_0x2eaca8(0x15a));throw _0x17b634;}}async function upsertCmd(_0x7194ec,_0x346918,_0x32e97f,_0x107c50){const _0x5146d3=_0x4915c0;try{const _0x142aab=Math[_0x5146d3(0x15e)](Date['now']()/(0x1*0x2b3+0x153b+-0x1406));return await db[_0x5146d3(0x10f)](_0x5146d3(0xda)+'O\x20'+TABLE+(_0x5146d3(0x152)+_0x5146d3(0x160)+'apping,\x20cr'+_0x5146d3(0x187)+_0x5146d3(0x10c)+')\x0a\x20\x20\x20\x20\x20\x20\x20V'+_0x5146d3(0xcb)+'?,\x20?,\x20?,\x20?'+_0x5146d3(0xe9)+_0x5146d3(0xba)+'(chat_jid,'+_0x5146d3(0xbb)+'\x20UPDATE\x20SE'+_0x5146d3(0xf8)+'=\x20excluded'+'.mapping,\x20'+_0x5146d3(0x17b)+_0x5146d3(0x14a)+_0x5146d3(0x176)+_0x5146d3(0xfb)+_0x5146d3(0xfe)+_0x5146d3(0xb3)+'ted_at;'),[_0x7194ec,_0x346918,_0x32e97f,_0x107c50||'',_0x142aab]),!![];}catch(_0x1d9df0){return warn(_0x5146d3(0x17a)+_0x5146d3(0x10e)+_0x5146d3(0xcd)+(_0x1d9df0?.[_0x5146d3(0x13e)]||_0x1d9df0)),![];}}async function listCmds(_0x54b7bd){const _0x1c186e=_0x4915c0;try{const _0x2e4a61=await db[_0x1c186e(0x144)](_0x1c186e(0xff)+_0x1c186e(0xc0)+'pping,\x20cre'+_0x1c186e(0xbd)+'reated_at\x20'+_0x1c186e(0x158)+TABLE+('\x20WHERE\x20cha'+'t_jid\x20=\x20?\x20'+_0x1c186e(0xde)+'d'),[_0x54b7bd]);return _0x2e4a61||[];}catch(_0x16a87a){return warn(_0x1c186e(0xfd)+_0x1c186e(0x118)+'d:\x20'+(_0x16a87a?.[_0x1c186e(0x13e)]||_0x16a87a)),[];}}async function deleteCmdByEmoji(_0x563526,_0x5f435e){const _0x8e111a=_0x4915c0;try{const _0x291062=await db['run']('DELETE\x20FRO'+'M\x20'+TABLE+('\x20WHERE\x20cha'+_0x8e111a(0x18b)+_0x8e111a(0xc6)+_0x8e111a(0x135)),[_0x563526,_0x5f435e]);return _0x291062?.[_0x8e111a(0xf2)]||-0x1*-0xe3c+-0x13b2+0x576;}catch(_0x79ce9f){return warn(_0x8e111a(0x14b)+'teCmdByEmo'+_0x8e111a(0xc2)+'\x20'+(_0x79ce9f?.[_0x8e111a(0x13e)]||_0x79ce9f)),-0x2*0x12f3+-0x191*-0xc+0x131a;}}async function deleteCmdById(_0xc8f11a,_0x3946d3){const _0x2a9e66=_0x4915c0;try{const _0x2961b9=await db['run'](_0x2a9e66(0x172)+'M\x20'+TABLE+(_0x2a9e66(0x168)+_0x2a9e66(0x18b)+'AND\x20id\x20=\x20?'),[_0xc8f11a,_0x3946d3]);return _0x2961b9?.[_0x2a9e66(0xf2)]||0x5*0x3b9+0x2650+0xf7*-0x3b;}catch(_0x3d52c9){return warn('[tag]\x20dele'+_0x2a9e66(0x126)+'failed:\x20'+(_0x3d52c9?.['message']||_0x3d52c9)),0x17c7+0x5ca*-0x6+0xaf5;}}async function deleteAllCmds(_0x5c26e4){const _0x552d66=_0x4915c0;try{const _0x118f75=await db['run'](_0x552d66(0x172)+'M\x20'+TABLE+('\x20WHERE\x20cha'+_0x552d66(0x122)),[_0x5c26e4]);return _0x118f75?.[_0x552d66(0xf2)]||-0x4f0*0x3+0x1a20+-0xb50;}catch(_0x3db38a){return warn(_0x552d66(0x14b)+_0x552d66(0xb9)+_0x552d66(0x141)+(_0x3db38a?.[_0x552d66(0x13e)]||_0x3db38a)),-0x5*0x6e1+-0xec6+-0x1*-0x312b;}}function getMessageText(_0x3b7176){const _0x29c0cc=_0x4915c0;if(!_0x3b7176||!_0x3b7176['message'])return'';const _0x56f346=_0x3b7176['message'];if(_0x56f346[_0x29c0cc(0x167)+'on'])return _0x56f346[_0x29c0cc(0x167)+'on'];if(_0x56f346[_0x29c0cc(0xce)+_0x29c0cc(0xe0)]?.[_0x29c0cc(0xe1)])return _0x56f346['extendedTe'+_0x29c0cc(0xe0)][_0x29c0cc(0xe1)];if(_0x56f346[_0x29c0cc(0xd5)+'ge']?.[_0x29c0cc(0xef)])return _0x56f346[_0x29c0cc(0xd5)+'ge'][_0x29c0cc(0xef)];if(_0x56f346['videoMessa'+'ge']?.[_0x29c0cc(0xef)])return _0x56f346[_0x29c0cc(0x182)+'ge'][_0x29c0cc(0xef)];return'';}async function safeSend(_0x5f3e3d,_0x5afd1b){const _0x5660a2=_0x4915c0;try{if(!sendApi)throw new Error(_0x5660a2(0x13d)+'i');return await sendApi(_0x5f3e3d,_0x5afd1b);}catch(_0x25dd64){warn('[tag]\x20send'+_0x5660a2(0x100),_0x25dd64?.[_0x5660a2(0x13e)]||_0x25dd64);throw _0x25dd64;}}async function resolveDisplayName(_0x24cd11){const _0x286a74=_0x4915c0;try{if(!_0x24cd11)return'';const _0xfcada2=(_0x24cd11+'')[_0x286a74(0x129)]?.('@')?.[-0x792+0x206e+0x2b*-0x94]||_0x24cd11;if(botRef?.[_0x286a74(0x181)]){const _0x114c40=botRef[_0x286a74(0x181)][_0x286a74(0xb5)]?.[_0x24cd11]||botRef[_0x286a74(0x181)][_0x286a74(0xb5)]&&botRef[_0x286a74(0x181)][_0x286a74(0xb5)][_0x286a74(0x11b)]&&botRef[_0x286a74(0x181)][_0x286a74(0xb5)]['get'](_0x24cd11);if(_0x114c40){const _0x583abc=_0x114c40['name']||_0x114c40[_0x286a74(0x180)+'me']||_0x114c40[_0x286a74(0x136)]||_0x114c40[_0x286a74(0xd3)]||_0x114c40[_0x286a74(0x13b)]||_0x114c40[_0x286a74(0x185)]||_0x114c40[_0x286a74(0xc7)+'e'];if(_0x583abc)return String(_0x583abc);}}try{if(typeof botRef[_0x286a74(0x112)]==='function'){const _0x175bed=await botRef[_0x286a74(0x112)](_0x24cd11);if(_0x175bed&&(_0x175bed[_0x286a74(0x159)]||_0x175bed[_0x286a74(0x136)]||_0x175bed['pushName']||_0x175bed[_0x286a74(0x13b)]))return String(_0x175bed[_0x286a74(0x159)]||_0x175bed[_0x286a74(0x136)]||_0x175bed[_0x286a74(0xd3)]||_0x175bed[_0x286a74(0x13b)]);}}catch(_0x46daf7){}return String(_0xfcada2);}catch(_0x460bbf){return String(_0x24cd11)['split']('@')[0x4e1*-0x1+0xfde*0x1+-0xafd];}}async function fetchGroupParticipants(_0x1c8aa5){const _0x205a06=_0x4915c0;try{let _0x5ef0b6=null;if(typeof botRef['groupMetad'+_0x205a06(0x107)]===_0x205a06(0x12c))try{_0x5ef0b6=await botRef[_0x205a06(0x16a)+_0x205a06(0x107)](_0x1c8aa5);}catch(_0x2ae000){_0x5ef0b6=null;}if((!_0x5ef0b6||!Array[_0x205a06(0x11a)](_0x5ef0b6[_0x205a06(0x155)+'ts']))&&botRef?.[_0x205a06(0xeb)])try{if(typeof botRef[_0x205a06(0xeb)][_0x205a06(0x16a)+_0x205a06(0x107)]===_0x205a06(0x12c))_0x5ef0b6=await botRef[_0x205a06(0xeb)][_0x205a06(0x16a)+_0x205a06(0x107)](_0x1c8aa5);}catch(_0x13b1ea){_0x5ef0b6=_0x5ef0b6||null;}const _0x22d5bb=Array[_0x205a06(0x11a)](_0x5ef0b6?.[_0x205a06(0x155)+'ts'])?_0x5ef0b6['participan'+'ts']:[],_0x481fd4=[];for(const _0x3c703e of _0x22d5bb){const _0x544373=_0x3c703e&&typeof _0x3c703e===_0x205a06(0x161)?_0x3c703e:_0x3c703e?.['id']||_0x3c703e?.[_0x205a06(0xf7)]||(_0x3c703e?.['user']?_0x3c703e[_0x205a06(0x111)]+(_0x205a06(0x17c)+_0x205a06(0xe5)):null);if(!_0x544373)continue;const _0x559343=_0x3c703e?.['name']||_0x3c703e?.['notify']||_0x3c703e?.['pushName']||await resolveDisplayName(_0x544373);_0x481fd4[_0x205a06(0x184)]({'id':_0x544373,'name':_0x559343,'raw':_0x3c703e});}return _0x481fd4;}catch(_0x1649f7){return warn('[tag]\x20fetc'+_0x205a06(0x171)+_0x205a06(0xf5)+'ailed',_0x1649f7?.[_0x205a06(0x13e)]||_0x1649f7),[];}}function chunkArray(_0x529cdb,_0xde20b3){const _0x162c1f=_0x4915c0,_0xf939ab=[];for(let _0x542410=-0x2116+0x1*0x1b05+0x1*0x611;_0x542410<_0x529cdb[_0x162c1f(0x153)];_0x542410+=_0xde20b3)_0xf939ab[_0x162c1f(0x184)](_0x529cdb[_0x162c1f(0x14e)](_0x542410,_0x542410+_0xde20b3));return _0xf939ab;}function parseMapping(_0x3ce142){const _0x64bd3c=_0x4915c0,_0x3e1e28=(_0x3ce142??'')['toString']()['trim']();if(!_0x3e1e28)return{'mode':_0x64bd3c(0x18d),'text':''};if(_0x3e1e28[_0x64bd3c(0x16d)]('@@'))return{'mode':_0x64bd3c(0x156),'text':_0x3e1e28['length']>0x1770+-0x973*-0x1+0x1*-0x20e1?_0x3e1e28[_0x64bd3c(0x14e)](-0x126a+0x22*0xd9+0x16*-0x79)[_0x64bd3c(0xd4)]():''};if(_0x3e1e28['startsWith']('@'))return{'mode':'mention','text':_0x3e1e28['length']>0x19bd+-0x1855*0x1+-0x167?_0x3e1e28['slice'](-0x81e*0x1+-0x1*0x1fc7+0x27e6)['trim']():''};return{'mode':'raw','text':_0x3e1e28};}function _0x4fed(){const _0x3bb660=['startsWith','[tag]\x20reso','\x20delete\x20<e','d\x20delete\x20i','hGroupPart','DELETE\x20FRO','ned\x20up','from','T\x200,\x0a\x20\x20\x20\x20\x20','d.created_','moji\x20TEXT\x20','IF\x20NOT\x20EXI','gForChat\x20e','[tag]\x20upse','created_by','@s.whatsap','[tag]\x20clea','\x20NOT\x20NULL,','t_jid\x20TEXT','verifiedNa','store','videoMessa','mapping>\x0aâ€¢','push','short','SIZE','eated_by,\x20','@g.us','emoji','\x20everyone\x20','t_jid\x20=\x20?\x20','ault\x20conne','raw','isFinite','\x0aMapping\x20e','ChatJidsFo','pping\x20TEXT','):\x0a','[tag]\x20ensu','luded.crea','ed_at\x20INTE','contacts','ete\x20index\x20',')\x20across\x20y','on(s).','teAllCmds\x20','N\x20CONFLICT','\x20emoji)\x20DO','exec','ated_by,\x20c','485791NNTyxH','Saved\x20mapp','\x20emoji,\x20ma','toLowerCas','ji\x20failed:','hat\x20ON\x20','reSchema\x20f','onnection(','AND\x20emoji\x20','displayNam','\x20<emoji>\x20<',':\x20(no\x20mapp','\x20\x20\x20\x20\x20\x20\x20\x20ma','ALUES\x20(?,\x20','1148244ftqlBe','ed:\x20','extendedTe','âš ï¸\x20No\x20membe','replace','Deleted\x20','rs\x20to\x20tag.','pushName','trim','imageMessa','5219604uQaGMZ','bare\x20@/@@)','\x0aâ€¢\x20cmd\x20add','mode','INSERT\x20INT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20e','ing\x20for\x20','remoteJid','ORDER\x20BY\x20i','\x20to\x20','xtMessage','text','send\x20raw\x20t','lveDefault','STS\x20','p.net','includes','te\x20<emoji>','Usage:\x20cmd',')\x0a\x20\x20\x20\x20\x20\x20\x20O','with\x20\x22hell','sock','ATE\x20TABLE\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20c','sendMessag','caption','\x20cmd\x20delet','\x20\x20\x20\x20\x20\x20\x20cha','changes','i>\x20<mappin','R\x20PRIMARY\x20','icipants\x20f','\x20cmd\x20list\x0a','jid','T\x20mapping\x20','Name\x20then\x20','1460154qLwlEA','by,\x20create','3200656hlMjTX','[tag]\x20list','d_at\x20=\x20exc','SELECT\x20id,','\x20failed:','e\x20all','[tag]\x20init','\x20\x20\x20UNIQUE(',')\x20across\x20','rror','t\x20connecti','ata','t\x20@Display','\x20@\x20hello\x20\x20','\x20mapping(s','dex','created_at','emoji)\x0a\x20\x20\x20','rtCmd\x20fail','run','â€¢\x20cmd\x20dele','user','getContact','isCommand','15WalxfJ','TEXT\x20DEFAU','endsWith','ng\x20for\x20','Cmds\x20faile','cmd\x20usage:','isArray','get','add','ryone\x0a\x20\x20ra','w\x20text\x20->\x20','has','\x20\x20\x20);\x0a\x20\x20\x20\x20','xamples:\x0a\x20','t_jid\x20=\x20?','g...>','map','(chat_jid)','teCmdById\x20','join','\x20add\x20<emoj','split','\x22hi\x22\x20and\x20m','filter','function','\x20connectio','\x20default\x20c','atchMappin','tag','catch','mapping','ention\x20eve','KEY\x20AUTOIN','=\x20?','notify','ings)','save\x20mappi','[tag]\x20disp','_tagcmds_c','vname','test','no\x20send\x20ap','message','ssage\x20fata','mention','failed:\x20','EXISTS\x20idx','\x20error','all','\x20\x20\x20\x20\x20creat','indexOf','delete\x20all','env','2.0.4','\x20=\x20exclude','[tag]\x20dele','CREMENT,\x0a\x20','TAG_BATCH_','slice','286614fLJwxK','\x20->\x20','->\x20mention','\x20(chat_jid','length','NOT\x20NULL,\x0a','participan','list','\x20failed:\x20','FROM\x20','name','ailed','253084ouPylB','s).','rUser\x20fail','floor','<n>\x0aâ€¢\x20cmd\x20',',\x20emoji,\x20m','string','key','[tag]\x20onMe','moji>\x20|\x20cm','7SMYzHi','\x20\x20\x20\x20->\x20lis','conversati','\x20WHERE\x20cha','\x20(part\x20','groupMetad','ection\x20','ction'];_0x4fed=function(){return _0x3bb660;};return _0x4fed();}async function dispatchMappingForChat(_0x1e69f3,_0x11f91b,_0x3f1664=''){const _0x476258=_0x4915c0,_0x1475df=parseMapping(_0x11f91b),_0x11d261=_0x3f1664?_0x3f1664[_0x476258(0xd4)]():'';if(_0x1475df[_0x476258(0xd9)]===_0x476258(0x140)){const _0x27e250=_0x1475df[_0x476258(0xe1)]?_0x11d261?_0x1475df[_0x476258(0xe1)]+'\x20'+_0x11d261:_0x1475df[_0x476258(0xe1)]:_0x11d261||'ðŸ‘‹',_0x15ba1e=await fetchGroupParticipants(_0x1e69f3);if(!_0x15ba1e[_0x476258(0x153)]){await safeSend(_0x1e69f3,{'text':'âš ï¸\x20No\x20membe'+_0x476258(0xd2)});return;}const _0x15f30b=_0x15ba1e[_0x476258(0x124)](_0x4ed3d2=>_0x4ed3d2['id'])[_0x476258(0x12b)](Boolean);if(_0x15f30b['length']<=BATCH_SIZE){await safeSend(_0x1e69f3,{'text':_0x27e250,'mentions':_0x15f30b});return;}const _0x4c3412=chunkArray(_0x15ba1e,BATCH_SIZE);for(const _0x218936 of _0x4c3412){const _0x12cb49=_0x218936[_0x476258(0x124)](_0x2817ea=>_0x2817ea['id']),_0x59aae9=_0x27e250;await safeSend(_0x1e69f3,{'text':_0x59aae9,'mentions':_0x12cb49}),await new Promise(_0x14fa9b=>setTimeout(_0x14fa9b,0xa2*-0xe+-0x5ba+0x3*0x530));}return;}if(_0x1475df[_0x476258(0xd9)]===_0x476258(0x156)){const _0x4016dc=_0x1475df[_0x476258(0xe1)]?_0x1475df[_0x476258(0xe1)]:'',_0x4442ee=await fetchGroupParticipants(_0x1e69f3);if(!_0x4442ee[_0x476258(0x153)]){await safeSend(_0x1e69f3,{'text':_0x476258(0xcf)+'rs\x20to\x20tag.'});return;}const _0x39a4d2=new Set(),_0x38a522=[];for(const _0x3c9fb5 of _0x4442ee)!_0x39a4d2[_0x476258(0x11f)](_0x3c9fb5['id'])&&(_0x39a4d2[_0x476258(0x11c)](_0x3c9fb5['id']),_0x38a522[_0x476258(0x184)](_0x3c9fb5));if(_0x38a522[_0x476258(0x153)]<=BATCH_SIZE){const _0x320fae=_0x38a522[_0x476258(0x124)](_0x2b89f7=>'@'+String(_0x2b89f7[_0x476258(0x159)]||_0x2b89f7['id']['split']('@')[0xcca+-0x78e+-0x4*0x14f])[_0x476258(0xd0)](/\r?\n/g,'\x20')[_0x476258(0xd4)]())[_0x476258(0x127)](',\x20'),_0x21c89e=_0x4016dc?_0x320fae+'\x0a\x0a'+_0x4016dc:_0x320fae;await safeSend(_0x1e69f3,{'text':_0x21c89e,'mentions':_0x38a522[_0x476258(0x124)](_0x2966e3=>_0x2966e3['id'])});return;}const _0x59ac17=chunkArray(_0x38a522,BATCH_SIZE);let _0x2dbcc3=0x163b+-0xbf1+-0xa4a;for(const _0x58c8e2 of _0x59ac17){_0x2dbcc3++;const _0x89ff33=_0x58c8e2[_0x476258(0x124)](_0x488699=>'@'+String(_0x488699[_0x476258(0x159)]||_0x488699['id']['split']('@')[0x4*-0x9b+-0x1342+0x15ae])[_0x476258(0xd0)](/\r?\n/g,'\x20')[_0x476258(0xd4)]())[_0x476258(0x127)](',\x20'),_0x413086=_0x4016dc?_0x89ff33+'\x0a\x0a'+_0x4016dc+_0x476258(0x169)+_0x2dbcc3+'/'+_0x59ac17[_0x476258(0x153)]+')':_0x89ff33+_0x476258(0x169)+_0x2dbcc3+'/'+_0x59ac17[_0x476258(0x153)]+')';await safeSend(_0x1e69f3,{'text':_0x413086,'mentions':_0x58c8e2[_0x476258(0x124)](_0x1993c0=>_0x1993c0['id'])}),await new Promise(_0xefb3b6=>setTimeout(_0xefb3b6,0x223*0x12+0x1*0x3d6+0x6*-0x6e3));}return;}const _0x12ee50=_0x1475df[_0x476258(0xe1)]?_0x11d261?_0x1475df[_0x476258(0xe1)]+'\x20'+_0x11d261:_0x1475df[_0x476258(0xe1)]:_0x11d261||'';await safeSend(_0x1e69f3,{'text':_0x12ee50});}export async function initialize(_0x14d5aa){const _0x26e9b6=_0x4915c0;botRef=_0x14d5aa;if(botRef){if(typeof botRef[_0x26e9b6(0xee)+'e']===_0x26e9b6(0x12c))sendApi=async(_0x2e6b37,_0x404192)=>await botRef['sendMessag'+'e'](_0x2e6b37,_0x404192);else botRef[_0x26e9b6(0xeb)]&&typeof botRef[_0x26e9b6(0xeb)][_0x26e9b6(0xee)+'e']===_0x26e9b6(0x12c)?sendApi=async(_0x5bd536,_0x24da7b)=>await botRef[_0x26e9b6(0xeb)][_0x26e9b6(0xee)+'e'](_0x5bd536,_0x24da7b):sendApi=null;}await ensureSchema(),info(_0x26e9b6(0x102)+'ialized');}function _0x27e7(_0xb301f7,_0x2126ce){const _0x139409=_0x4fed();return _0x27e7=function(_0x1a3a9e,_0x5d914b){_0x1a3a9e=_0x1a3a9e-(-0x3*0x817+-0x2*-0x80f+-0x14*-0x71);let _0x3f2c4e=_0x139409[_0x1a3a9e];return _0x3f2c4e;},_0x27e7(_0xb301f7,_0x2126ce);}function detectCommandNameFromText(_0x373baf){const _0x17fdc7=_0x4915c0;if(!_0x373baf)return null;const _0x1c5bca=_0x373baf[_0x17fdc7(0xd4)]();if(!_0x1c5bca)return null;const _0x1605ae=_0x1c5bca[_0x17fdc7(0x129)](/\s+/);return _0x1605ae[0x10*-0x56+-0xd9a+-0x2*-0x97d][_0x17fdc7(0xc1)+'e']();}async function resolveDefaultChatJidsForUser(_0x25b94f){const _0x298447=_0x4915c0;try{const _0x16fc97=await getDefault(_0x25b94f)[_0x298447(0x131)](()=>null);if(!_0x16fc97||Array[_0x298447(0x11a)](_0x16fc97)&&_0x16fc97['length']===0x2005+0x1e7*0x9+-0x3124)return[];const _0x4cbdaf=Array['isArray'](_0x16fc97)?_0x16fc97:[_0x16fc97];let _0x5d72cb=[];for(const _0x3b02a6 of _0x4cbdaf){try{const _0x136bdf=await getConnection(_0x3b02a6)[_0x298447(0x131)](()=>null);if(Array[_0x298447(0x11a)](_0x136bdf))_0x5d72cb[_0x298447(0x184)](..._0x136bdf);else{if(_0x136bdf)_0x5d72cb['push'](String(_0x136bdf));}}catch(_0x491643){warn(_0x298447(0x16e)+'lving\x20conn'+_0x298447(0x16b)+_0x3b02a6+_0x298447(0x157)+(_0x491643?.[_0x298447(0x13e)]||_0x491643));}}return Array[_0x298447(0x174)](new Set(_0x5d72cb[_0x298447(0x124)](_0x54e235=>String(_0x54e235)['trim']())['filter'](Boolean)));}catch(_0xfd0957){return warn(_0x298447(0x16e)+_0x298447(0xe3)+_0x298447(0xaf)+_0x298447(0x15d)+'ed:\x20'+(_0xfd0957?.[_0x298447(0x13e)]||_0xfd0957)),[];}}function isBoundaryAt(_0x30b497,_0x389bf0,_0x521575){const _0x348847=_0x4915c0,_0x5de5f9=_0x389bf0-(-0x186*0x16+-0x16a9+0x63e*0x9)>=0x17*0xa4+-0x944+-0x578?_0x30b497[_0x389bf0-(0x144*0x8+-0xe4d+0x6b*0xa)]:null,_0x2db9c8=_0x389bf0+_0x521575<_0x30b497[_0x348847(0x153)]?_0x30b497[_0x389bf0+_0x521575]:null,_0x2fc244=_0x5d68d0=>_0x5d68d0!=null&&/[0-9A-Za-z_]/[_0x348847(0x13c)](_0x5d68d0);return!_0x2fc244(_0x5de5f9)&&!_0x2fc244(_0x2db9c8);}export async function onMessage(_0x1794a8){const _0x2fce4c=_0x4915c0;try{if(!_0x1794a8||!_0x1794a8[_0x2fce4c(0x162)]||!_0x1794a8[_0x2fce4c(0x13e)])return;const _0x545f11=_0x1794a8[_0x2fce4c(0x162)][_0x2fce4c(0xdd)],_0x1e1a7c=typeof _0x545f11===_0x2fce4c(0x161)&&_0x545f11[_0x2fce4c(0x116)](_0x2fce4c(0x188)),_0x43ec7c=_0x1794a8[_0x2fce4c(0x162)]&&(_0x1794a8[_0x2fce4c(0x162)]['participan'+'t']||_0x1794a8[_0x2fce4c(0x162)][_0x2fce4c(0x174)]||_0x1794a8[_0x2fce4c(0x162)][_0x2fce4c(0xdd)])||'',_0x38df12=(_0x43ec7c||'')[_0x2fce4c(0x129)]('@')[-0x2495+-0x14fd+0x1cc9*0x2];let _0x2480a0=![];try{if(_0x1e1a7c)_0x2480a0=await isadmin(botRef,_0x1794a8);}catch(_0x56f420){warn('[tag]\x20isad'+'min\x20check\x20'+'failed',_0x56f420?.[_0x2fce4c(0x13e)]||_0x56f420),_0x2480a0=![];}if(!_0x2480a0)return;const _0x4a1dc3=await resolveDefaultChatJidsForUser(_0x38df12);if(!_0x4a1dc3||_0x4a1dc3[_0x2fce4c(0x153)]===-0x1*0x1438+0x1*-0x5ab+0x8a1*0x3)return;if(_0x1794a8[_0x2fce4c(0x113)]){const _0x330937=_0x1794a8[_0x2fce4c(0xe1)]&&_0x1794a8[_0x2fce4c(0xe1)][_0x2fce4c(0xd4)]()?_0x1794a8[_0x2fce4c(0xe1)]['trim']():getMessageText(_0x1794a8)[_0x2fce4c(0xd4)](),_0x5691a7=detectCommandNameFromText(_0x330937);if(!_0x5691a7)return;const _0x3b873c=Array['isArray'](commands)?commands[_0x2fce4c(0x124)](_0x270c6b=>String(_0x270c6b)['toLowerCas'+'e']()):[];if(!_0x3b873c[_0x2fce4c(0xe6)](_0x5691a7))return;const _0x492b9d=_0x330937[_0x2fce4c(0x129)](/\s+/)[_0x2fce4c(0x14e)](-0x1fad+-0x156+0x1*0x2104)[_0x2fce4c(0x127)]('\x20')[_0x2fce4c(0xd4)](),_0x21d58c=_0x492b9d[_0x2fce4c(0x129)](/\s+/)[_0x2fce4c(0x12b)](Boolean),_0xc9765=_0x21d58c[-0x13d9+0x2457+0x2*-0x83f]?_0x21d58c[-0x1b*-0xdd+-0x1f0c+0x7bd*0x1][_0x2fce4c(0xc1)+'e']():null;if(!_0xc9765||_0xc9765==='help'){await safeSend(_0x545f11,{'text':_0x2fce4c(0x119)+_0x2fce4c(0xd8)+_0x2fce4c(0xc8)+_0x2fce4c(0x183)+_0x2fce4c(0xf6)+_0x2fce4c(0x110)+_0x2fce4c(0xe7)+'\x0aâ€¢\x20cmd\x20del'+_0x2fce4c(0xb6)+_0x2fce4c(0x15f)+_0x2fce4c(0x147)+_0x2fce4c(0xae)+_0x2fce4c(0x121)+_0x2fce4c(0x109)+_0x2fce4c(0x151)+_0x2fce4c(0x18a)+_0x2fce4c(0xea)+'o\x22\x0a\x20\x20@@\x20hi'+_0x2fce4c(0x166)+_0x2fce4c(0x108)+_0x2fce4c(0xf9)+_0x2fce4c(0x12a)+_0x2fce4c(0x133)+_0x2fce4c(0x11d)+_0x2fce4c(0x11e)+_0x2fce4c(0xe2)+'ext\x20to\x20def'+_0x2fce4c(0x18c)+_0x2fce4c(0x16c)});return;}if(_0xc9765==='add'){if(_0x21d58c['length']<0x8de+-0xc4f+0x374){await safeSend(_0x545f11,{'text':'Usage:\x20cmd'+_0x2fce4c(0x128)+_0x2fce4c(0xf3)+_0x2fce4c(0x123)});return;}const _0x2b8ef5=_0x21d58c[-0x1a87+0x71f+0x1369],_0x3817f1=_0x21d58c['slice'](0x1043+0x2*-0x7cd+0xa7*-0x1)[_0x2fce4c(0x127)]('\x20');let _0x231cf4=-0x37+-0x1b5c+-0x3*-0x931;for(const _0x4a9675 of _0x4a1dc3){const _0x3e99d0=await upsertCmd(_0x4a9675,_0x2b8ef5,_0x3817f1,_0x43ec7c||'');if(_0x3e99d0)_0x231cf4++;}if(_0x231cf4>-0x6bd*-0x3+-0xab5*-0x1+-0x1eec)await safeSend(_0x545f11,{'text':_0x2fce4c(0xbf)+_0x2fce4c(0xdc)+_0x2b8ef5+_0x2fce4c(0x150)+_0x3817f1+_0x2fce4c(0xdf)+_0x231cf4+(_0x2fce4c(0x12e)+'onnection('+_0x2fce4c(0x15c))});else await safeSend(_0x545f11,{'text':'Failed\x20to\x20'+_0x2fce4c(0x138)+_0x2fce4c(0x117)+_0x2b8ef5});return;}if(_0xc9765==='list'){let _0x7af56f=[];for(const _0x3fac3b of _0x4a1dc3){const _0xf656d2=await listCmds(_0x3fac3b);if(!_0xf656d2[_0x2fce4c(0x153)]){_0x7af56f[_0x2fce4c(0x184)]('â€”\x20'+_0x3fac3b+(_0x2fce4c(0xc9)+_0x2fce4c(0x137)));continue;}const _0x41b558=_0xf656d2[_0x2fce4c(0x124)]((_0x4df63d,_0x2f711e)=>_0x2f711e+(0x1*0x47+-0x2f3*0x5+0x1*0xe79)+'.\x20'+_0x4df63d['emoji']+_0x2fce4c(0x150)+_0x4df63d[_0x2fce4c(0x132)]);_0x7af56f[_0x2fce4c(0x184)]('â€”\x20'+_0x3fac3b+'\x20('+_0xf656d2[_0x2fce4c(0x153)]+_0x2fce4c(0xb1)+_0x41b558['join']('\x0a'));}let _0x589a78='';for(const _0x150dd4 of _0x7af56f){const _0x9faeb6=_0x150dd4+'\x0a\x0a';(_0x589a78+_0x9faeb6)[_0x2fce4c(0x153)]>0x13*-0x1a5+-0x1*0x111a+0x3635*0x1&&(await safeSend(_0x545f11,{'text':_0x589a78[_0x2fce4c(0xd4)]()}),_0x589a78=''),_0x589a78+=_0x9faeb6;}if(_0x589a78[_0x2fce4c(0xd4)]())await safeSend(_0x545f11,{'text':_0x589a78[_0x2fce4c(0xd4)]()});return;}if(_0xc9765==='delete'){if(_0x21d58c[_0x2fce4c(0x153)]<0x1a4+0x207c+-0x1*0x221e){await safeSend(_0x545f11,{'text':_0x2fce4c(0xe8)+_0x2fce4c(0x16f)+_0x2fce4c(0x164)+_0x2fce4c(0x170)+'ndex\x20<n>\x20|'+_0x2fce4c(0xf0)+_0x2fce4c(0x101)});return;}if(_0x21d58c[-0x24*0x2e+0x101*0xe+-0x3*0x287]===_0x2fce4c(0x144)){let _0x17ef70=0xe*-0x276+-0x965+0x2bd9;for(const _0x2aa0f8 of _0x4a1dc3){const _0x39c371=await deleteAllCmds(_0x2aa0f8);_0x17ef70+=_0x39c371;}await safeSend(_0x545f11,{'text':'Deleted\x20'+_0x17ef70+('\x20mapping(s'+_0x2fce4c(0x104))+_0x4a1dc3[_0x2fce4c(0x153)]+(_0x2fce4c(0x12e)+_0x2fce4c(0xc5)+_0x2fce4c(0x15c))});return;}if(_0x21d58c[-0x1*0x25cf+-0x3*-0x552+-0x1*-0x15da]==='index'&&_0x21d58c[_0x2fce4c(0x153)]>=-0x1aa+-0x95c+0xb09){const _0x24684d=parseInt(_0x21d58c[-0x4*0x6c6+0xe3*-0x11+-0xe0f*-0x3],-0x4*-0x45f+-0x1*-0x98b+-0x3*0x8ff);if(!Number[_0x2fce4c(0xad)](_0x24684d)||_0x24684d<=-0x63*-0x3b+-0x1*-0x5d1+-0x5ba*0x5){await safeSend(_0x545f11,{'text':'Invalid\x20in'+_0x2fce4c(0x10b)});return;}let _0x409c66=0x1717+-0x4e*0x59+-0x1*-0x407;for(const _0x38839b of _0x4a1dc3){const _0x4d84cc=await listCmds(_0x38839b);if(_0x24684d>_0x4d84cc[_0x2fce4c(0x153)])continue;const _0xe723c1=_0x4d84cc[_0x24684d-(-0x1f8d+0x12c5+-0xcc9*-0x1)]['id'],_0x16f054=await deleteCmdById(_0x38839b,_0xe723c1);_0x409c66+=_0x16f054;}await safeSend(_0x545f11,{'text':_0x2fce4c(0xd1)+_0x409c66+(_0x2fce4c(0x10a)+')\x20(index\x20')+_0x24684d+(_0x2fce4c(0xb7)+'our\x20defaul'+_0x2fce4c(0x106)+_0x2fce4c(0xb8))});return;}const _0x59be97=_0x21d58c[0x269a+0x1c47+-0x42e0];let _0x225b6a=-0x4a7+-0xdc6+0x126d;for(const _0x26c27a of _0x4a1dc3){const _0x18cfa1=await deleteCmdByEmoji(_0x26c27a,_0x59be97);_0x225b6a+=_0x18cfa1;}await safeSend(_0x545f11,{'text':_0x2fce4c(0xd1)+_0x225b6a+(_0x2fce4c(0x10a)+')\x20for\x20emoj'+'i\x20')+_0x59be97+('\x20across\x20yo'+'ur\x20default'+_0x2fce4c(0x12d)+'n(s).')});return;}return;}const _0x133790=getMessageText(_0x1794a8);if(!_0x133790||!_0x133790['trim']())return;const _0x17ba79=_0x133790['trim'](),_0x260e87=/(?:^|\s)(@@?)\s+([^\n]+)/,_0x454c24=_0x17ba79['match'](_0x260e87);if(_0x454c24){const _0x6c8129=_0x454c24[0xe73+-0x883*-0x1+-0x16f5*0x1],_0x38f69d=(_0x454c24[-0x25ef+-0x263d+0x4c2e]||'')[_0x2fce4c(0xd4)](),_0x949924=(_0x6c8129+'\x20'+_0x38f69d)[_0x2fce4c(0xd4)]();for(const _0x3dae7b of _0x4a1dc3){try{await dispatchMappingForChat(_0x3dae7b,_0x949924,'');}catch(_0x322039){warn(_0x2fce4c(0x139)+_0x2fce4c(0x12f)+'gForChat\x20('+_0x2fce4c(0xd7)+_0x2fce4c(0x143),_0x322039?.['message']||_0x322039);}}return;}for(const _0x4e3bb2 of _0x4a1dc3){const _0x2dba66=await listCmds(_0x4e3bb2);if(!_0x2dba66[_0x2fce4c(0x153)])continue;const _0x3862fd=_0x2dba66['map'](_0x12f345=>_0x12f345[_0x2fce4c(0x189)])[_0x2fce4c(0x12b)](Boolean)['sort']((_0x4d2b3a,_0x2a5627)=>_0x2a5627[_0x2fce4c(0x153)]-_0x4d2b3a['length']);let _0x1baf91=null,_0x296c63=null;for(const _0x5e2aa4 of _0x3862fd){if(!_0x5e2aa4)continue;let _0x337f7e=_0x17ba79[_0x2fce4c(0x146)](_0x5e2aa4);while(_0x337f7e!==-(0x3b0+0x1*0x57b+0x2e*-0x33)){if(isBoundaryAt(_0x17ba79,_0x337f7e,_0x5e2aa4['length'])){_0x1baf91=_0x5e2aa4,_0x296c63=_0x2dba66['find'](_0x5cf241=>_0x5cf241['emoji']===_0x5e2aa4);break;}_0x337f7e=_0x17ba79[_0x2fce4c(0x146)](_0x5e2aa4,_0x337f7e+(-0x11c*-0x4+0x1324+-0x163*0x11));}if(_0x1baf91)break;}if(!_0x1baf91||!_0x296c63)continue;let _0x4ad805='';const _0x3c6590=_0x17ba79['indexOf'](_0x1baf91);if(_0x3c6590!==-(0x1638+0x949+-0x1f80)){const _0x481acf=_0x17ba79['slice'](_0x3c6590+_0x1baf91['length'])['trim']();if(_0x481acf)_0x4ad805=_0x481acf;}try{await dispatchMappingForChat(_0x4e3bb2,_0x296c63[_0x2fce4c(0x132)]||'',_0x4ad805);}catch(_0xa70b6f){warn(_0x2fce4c(0x139)+'atchMappin'+_0x2fce4c(0x179)+_0x2fce4c(0x105),_0xa70b6f?.['message']||_0xa70b6f);}}}catch(_0x3c5cd8){error(_0x3c5cd8,_0x2fce4c(0x163)+_0x2fce4c(0x13f)+'l');}}export async function cleanup(){const _0xe02de=_0x4915c0;botRef=null,sendApi=null,info(_0xe02de(0x17d)+_0xe02de(0x173));}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};