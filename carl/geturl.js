const _0x156f45=_0xe666;(function(_0x3eb5fd,_0x339045){const _0x4841a8=_0xe666,_0x5d0d64=_0x3eb5fd();while(!![]){try{const _0x2e9d55=parseInt(_0x4841a8(0x110))/(0x1cb*-0x15+-0x1d55*-0x1+0x853)+-parseInt(_0x4841a8(0x10c))/(0xf*0x269+0xf8b*0x2+-0x433b)*(parseInt(_0x4841a8(0x15b))/(0x1*-0x1cdc+0xf13+0x4*0x373))+parseInt(_0x4841a8(0x151))/(0x80c*-0x3+0x922*0x1+0x281*0x6)*(parseInt(_0x4841a8(0x112))/(-0x3a0+-0xb*-0x13+-0x1*-0x2d4))+parseInt(_0x4841a8(0x15a))/(-0xbd5*0x3+-0xd0+0x2455)+-parseInt(_0x4841a8(0x111))/(-0x7a4+0x1650+-0xea5)*(-parseInt(_0x4841a8(0x11b))/(-0x5*-0x1a9+-0xb79+0x334))+parseInt(_0x4841a8(0x15e))/(0x334*-0xb+0x2a7*0x4+0x18a9)+parseInt(_0x4841a8(0x10f))/(0xd4*0x2+0x163b+0x37*-0x6f)*(-parseInt(_0x4841a8(0x12e))/(0x14db+0xf74*0x2+0x2*-0x19dc));if(_0x2e9d55===_0x339045)break;else _0x5d0d64['push'](_0x5d0d64['shift']());}catch(_0x3d7a5d){_0x5d0d64['push'](_0x5d0d64['shift']());}}}(_0x3251,0x157054+0x1*0xb024a+-0x15b974));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{downloadContentFromMessage}from'@whiskeysockets/baileys';import _0x50b7b1 from'fs-extra';import _0x264618 from'path';import{v2 as _0x534cc5}from'cloudinary';function _0xe666(_0x2410ca,_0x381865){const _0x20d107=_0x3251();return _0xe666=function(_0x44b8b8,_0x257432){_0x44b8b8=_0x44b8b8-(-0xda*-0x2b+0x1*-0x133+0x1*-0x2276);let _0x5b8409=_0x20d107[_0x44b8b8];return _0x5b8409;},_0xe666(_0x2410ca,_0x381865);}import{fileURLToPath}from'url';export const name=_0x156f45(0x152);export const version=_0x156f45(0x106);export const priority=-0xc2f+-0x2*-0x89e+-0x1*0x503;let botInstance=null,respondedMsgIds=new Set();const __filename=fileURLToPath(import.meta[_0x156f45(0x152)]),__dirname=_0x264618['dirname'](__filename),config=getConfig();function _0x3251(){const _0x40794b=['unlink','type.\x20Repl','add','rror','writeFile','uploader','exists','dio,\x20or\x20do','ne.','rror:\x20','xtMessage','whatsapp_u','isCommand','edMatch\x20er','üö®\x20The\x20vide','fromMe','\x20URL:\x0a','CLOUDINARY','55956ZtWpqA','url','t\x20determin','for\x20messag','\x20to\x20','Cloudinary','50MB).\x20Ple','the\x20.env','image,\x20vid','2601408arBVcn','4443MGZqXF','stination\x20','ror:\x20','1884015borRow','concat','push','temp_','_API_SECRE','o\x20is\x20too\x20l','se\x20try\x20aga','audioMessa','edia.\x20Plea','jid','‚ö†\x20Unsuppor','\x20cleanup\x20e','age','mimetype','\x20smaller\x20o','quoted','mp3','fileLength','üé•\x20Video\x20UR','text','üñºÔ∏è\x20Image\x20UR','e\x20final\x20de','1.0.1','document','\x20Upload\x20Er','string','trim','üìå\x20Reply\x20to','1148TWEIOJ','\x20an\x20image,','ed\x20and\x20sen','4190TtwCkK','881942KQqpzV','20531eqpkVx','205UyfQXL','ted\x20media\x20','\x20cleaned\x20u','ploads','documentMe','now','split','message','has','976ennmSJ','data','bin','config','sendMessag','üîä\x20Audio\x20UR','audio','cument\x20to\x20','L:\x0a','ssage','contextInf','arge\x20(max\x20','ocessing\x20m','y\x20with\x20an\x20','quotedMess','\x20video,\x20au','zed.','videoMessa','error','23716yuZzTx','toLowerCas',':\x20botInsta','imageMessa','_API_KEY','L\x20(MP3):\x0a','key','client','‚úÖ\x20File\x20URL','ully\x20creat','üìÑ\x20Document',':\x20successf','bot','ase\x20send\x20a','startsWith','secure_url','pi\x20key\x20in\x20'];_0x3251=function(){return _0x40794b;};return _0x3251();}_0x534cc5[_0x156f45(0x11e)]({'cloud_name':config[_0x156f45(0x150)+'_CLOUD_NAM'+'E'],'api_key':config[_0x156f45(0x150)+_0x156f45(0x132)],'api_secret':config[_0x156f45(0x150)+_0x156f45(0x162)+'T'],'secure':!![]});async function streamToBuffer(_0x280e37){return new Promise((_0x2c41c2,_0x28bda7)=>{const _0x7e5fec=_0xe666,_0x2eb88a=[];_0x280e37['on'](_0x7e5fec(0x11c),_0x4561d8=>_0x2eb88a[_0x7e5fec(0x160)](_0x4561d8)),_0x280e37['on']('end',()=>_0x2c41c2(Buffer[_0x7e5fec(0x15f)](_0x2eb88a))),_0x280e37['on'](_0x7e5fec(0x12d),_0x28bda7);});}async function downloadMedia(_0x558eee,_0x40e162){const _0x47b45b=_0x156f45,_0x499086=await downloadContentFromMessage(_0x558eee,_0x40e162),_0x1b27c4=await streamToBuffer(_0x499086),_0x122b50=_0x40e162==='audio'?_0x47b45b(0x100):_0x558eee[_0x47b45b(0xfd)][_0x47b45b(0x118)]('/')[-0x19*0xf+0xf88+0xb4*-0x14]?.[_0x47b45b(0x118)](';')[0x13c+0x1889+0x897*-0x3]||_0x47b45b(0x11d),_0x3ec24f=_0x264618['join'](__dirname,_0x47b45b(0x161)+Date[_0x47b45b(0x117)]()+'.'+_0x122b50);return await _0x50b7b1[_0x47b45b(0x143)](_0x3ec24f,_0x1b27c4),_0x3ec24f;}async function uploadToCloudinary(_0x34a3b5,_0x46f5de){const _0x32e63d=_0x156f45;try{const _0x43082c={'resource_type':_0x46f5de==='video'?'video':'auto','folder':_0x32e63d(0x14a)+_0x32e63d(0x115)},_0x3b405b=await _0x534cc5[_0x32e63d(0x144)]['upload'](_0x34a3b5,_0x43082c);return _0x3b405b[_0x32e63d(0x13d)]['replace'](/^https?:\/\//,'');}catch(_0x3ff6ac){throw new Error(_0x32e63d(0x156)+_0x32e63d(0x108)+_0x32e63d(0x15d)+_0x3ff6ac[_0x32e63d(0x119)]);}}async function findStoredMatchFromFindings(_0x13fa0c=[]){const _0x40f284=_0x156f45;try{const _0x13fa44=await listSudo(),_0x42c207=new Set(_0x13fa44['map'](String));for(const _0x324be9 of _0x13fa0c){if(!_0x324be9||typeof _0x324be9[_0x40f284(0xf9)]!==_0x40f284(0x109))continue;const _0x5c1f92=normalizeToJid(_0x324be9['jid']);if(_0x5c1f92&&_0x42c207[_0x40f284(0x11a)](_0x5c1f92))return _0x5c1f92;if(_0x42c207[_0x40f284(0x11a)](_0x324be9[_0x40f284(0xf9)]))return _0x324be9[_0x40f284(0xf9)];}return null;}catch(_0x7e2226){return warn(name+(':\x20findStor'+_0x40f284(0x14c)+_0x40f284(0x15d))+(_0x7e2226?.[_0x40f284(0x119)]||_0x7e2226)),null;}}export async function initialize(_0xeaea85){const _0xa3f42d=_0x156f45;botInstance=_0xeaea85,info(name+(':\x20initiali'+_0xa3f42d(0x12b)));}export async function onMessage(_0x55ee2){const _0x214706=_0x156f45;if(!_0x55ee2?.[_0x214706(0x134)]||!_0x55ee2[_0x214706(0x14b)])return;const _0x363664=_0x55ee2['key']['id'];if(_0x363664&&respondedMsgIds[_0x214706(0x11a)](_0x363664))return;if(_0x363664)respondedMsgIds[_0x214706(0x141)](_0x363664);const _0x5ec61d=(_0x55ee2[_0x214706(0x103)]||'')[_0x214706(0x10a)]();if(!_0x5ec61d[_0x214706(0x12f)+'e']()[_0x214706(0x13c)](_0x214706(0x152)))return;if(!botInstance)botInstance=_0x55ee2[_0x214706(0x13a)]||_0x55ee2[_0x214706(0x135)];if(!botInstance){warn(name+(_0x214706(0x130)+'nce\x20missin'+'g'));return;}const _0x25bae9=getBotJid();let _0x4168a1;if(_0x55ee2[_0x214706(0x134)][_0x214706(0x14e)])_0x4168a1=_0x25bae9;else{const _0x1289c3=await isSudo(botInstance,_0x55ee2)['catch'](()=>![]);if(!_0x1289c3)return;const {findings:_0x249088}=userJidFromCtx(_0x55ee2),_0x100c3d=await findStoredMatchFromFindings(_0x249088);if(!_0x100c3d)return;_0x4168a1=_0x100c3d;}if(!_0x4168a1){warn(name+(':\x20Could\x20no'+_0x214706(0x153)+_0x214706(0x105)+_0x214706(0x15c)+_0x214706(0x154)+'e.'));return;}const _0x264e39=_0x55ee2[_0x214706(0x119)]?.['extendedTe'+_0x214706(0x149)]?.[_0x214706(0x125)+'o']?.[_0x214706(0x129)+_0x214706(0xfc)]||_0x55ee2[_0x214706(0xff)]||null;if(!_0x264e39){await botInstance[_0x214706(0x11f)+'e'](_0x4168a1,{'text':_0x214706(0x10b)+_0x214706(0x10d)+_0x214706(0x12a)+_0x214706(0x146)+_0x214706(0x122)+'get\x20a\x20URL.'});return;}let _0xc3a1f9,_0x1fbee6;try{if(_0x264e39[_0x214706(0x12c)+'ge']){const _0x58c6e9=_0x264e39[_0x214706(0x12c)+'ge'][_0x214706(0x101)];if(_0x58c6e9>(-0x6*0x1ec+-0x71b+0x12d5)*(-0x4b*0x47+0x2c*-0x14+0x1c3d)*(-0x3*-0x107+-0x36f*-0x4+-0xcd1)){await botInstance[_0x214706(0x11f)+'e'](_0x4168a1,{'text':_0x214706(0x14d)+_0x214706(0xf5)+_0x214706(0x126)+_0x214706(0x157)+_0x214706(0x13b)+_0x214706(0xfe)+_0x214706(0x147)});return;}_0xc3a1f9=await downloadMedia(_0x264e39[_0x214706(0x12c)+'ge'],'video'),_0x1fbee6='video';}else{if(_0x264e39[_0x214706(0x131)+'ge'])_0xc3a1f9=await downloadMedia(_0x264e39[_0x214706(0x131)+'ge'],'image'),_0x1fbee6='image';else{if(_0x264e39[_0x214706(0xf7)+'ge'])_0xc3a1f9=await downloadMedia(_0x264e39['audioMessa'+'ge'],_0x214706(0x121)),_0x1fbee6=_0x214706(0x121);else{if(_0x264e39[_0x214706(0x116)+_0x214706(0x124)])_0xc3a1f9=await downloadMedia(_0x264e39[_0x214706(0x116)+_0x214706(0x124)],_0x214706(0x107)),_0x1fbee6='document';else{await botInstance[_0x214706(0x11f)+'e'](_0x4168a1,{'text':_0x214706(0xfa)+_0x214706(0x113)+_0x214706(0x140)+_0x214706(0x128)+_0x214706(0x159)+'eo,\x20audio,'+'\x20or\x20docume'+'nt.'});return;}}}}const _0x117e3e=await uploadToCloudinary(_0xc3a1f9,_0x1fbee6);await _0x50b7b1[_0x214706(0x13f)](_0xc3a1f9);const _0x3b8270={'image':_0x214706(0x104)+_0x214706(0x123)+_0x117e3e,'video':_0x214706(0x102)+_0x214706(0x123)+_0x117e3e,'audio':_0x214706(0x120)+_0x214706(0x133)+_0x117e3e,'document':_0x214706(0x138)+_0x214706(0x14f)+_0x117e3e},_0x970409=_0x3b8270[_0x1fbee6]||_0x214706(0x136)+':\x0a'+_0x117e3e;await botInstance[_0x214706(0x11f)+'e'](_0x4168a1,{'text':_0x970409}),info(name+(_0x214706(0x139)+_0x214706(0x137)+_0x214706(0x10e)+'t\x20URL\x20for\x20'+'a\x20')+_0x1fbee6+_0x214706(0x155)+_0x4168a1);}catch(_0x15ed86){error(_0x15ed86,name+('\x20handler\x20e'+_0x214706(0x142))),_0xc3a1f9&&await _0x50b7b1[_0x214706(0x145)](_0xc3a1f9)&&await _0x50b7b1['unlink'](_0xc3a1f9),await botInstance[_0x214706(0x11f)+'e'](_0x4168a1,{'text':'‚ùå\x20Error\x20pr'+_0x214706(0x127)+_0x214706(0xf8)+_0x214706(0xf6)+'in.\x20add\x20cl'+'oudinary\x20a'+_0x214706(0x13e)+_0x214706(0x158)});}}export async function cleanup(){const _0x575605=_0x156f45;try{botInstance=null,respondedMsgIds['clear'](),info(name+(_0x575605(0x114)+'p'));}catch(_0x671bbb){warn(name+(_0x575605(0xfb)+_0x575605(0x148))+(_0x671bbb?.['message']||_0x671bbb));}}