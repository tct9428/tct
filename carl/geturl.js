function _0xf8df(){const _0x4e7af7=['154756tBCWgy','map','se\x20try\x20aga','video','8hYNlps','push','nce\x20missin','929523mXBUpP','the\x20.env','type.\x20Repl','string','secure_url','📄\x20Document','\x20an\x20image,','50MB).\x20Ple','exists','age','\x20cleaned\x20u','document',':\x20initiali','toLowerCas','1010xpLpSK','startsWith','L:\x0a','end','unlink','isCommand','pi\x20key\x20in\x20','_API_KEY','dio,\x20or\x20do','_API_SECRE','mp3','key','imageMessa','documentMe','14GqvxEH','cument\x20to\x20','url','fileLength','_CLOUD_NAM','\x20Upload\x20Er','58872cuIBsL','whatsapp_u','🔊\x20Audio\x20UR','1.0.1',':\x20Could\x20no','\x20smaller\x20o','writeFile','bot','message','\x20or\x20docume','audio','audioMessa','join','40YVZvrx','t\x20URL\x20for\x20','has','rror:\x20','xtMessage','ror:\x20','videoMessa','quoted','🎥\x20Video\x20UR','clear','CLOUDINARY','for\x20messag','stination\x20','now','sendMessag','✅\x20File\x20URL','ully\x20creat','202791OghyNc','concat','jid',':\x20botInsta','split','ne.','upload','🖼️\x20Image\x20UR','ocessing\x20m','nt.','text',':\x20findStor','o\x20is\x20too\x20l','⚠\x20Unsuppor','dirname','config','\x20to\x20','ase\x20send\x20a','99002fBYdfM','arge\x20(max\x20','temp_','\x20video,\x20au','in.\x20add\x20cl','get\x20a\x20URL.','424098YEgJKp','300414RGPNAb','ploads','\x20URL:\x0a','oudinary\x20a','client','L\x20(MP3):\x0a','trim','❌\x20Error\x20pr','bin','ed\x20and\x20sen','ssage','image,\x20vid'];_0xf8df=function(){return _0x4e7af7;};return _0xf8df();}const _0x1ae5cc=_0x3e67;(function(_0x3302f0,_0x5a2501){const _0x3f71de=_0x3e67,_0x105764=_0x3302f0();while(!![]){try{const _0x1ce15d=parseInt(_0x3f71de(0x1fd))/(-0x6ea+0x24a3+-0x1db8)+parseInt(_0x3f71de(0x20f))/(0xfd6+-0x41*0x5+-0xe8f)+parseInt(_0x3f71de(0x229))/(-0x1551+0x20e5+-0xb91)+parseInt(_0x3f71de(0x222))/(-0xfb0+0x15e8+-0x634)*(parseInt(_0x3f71de(0x258))/(0x1fa1+0xddb+-0x2d77))+parseInt(_0x3f71de(0x216))/(-0x1031+0x3*-0x5c1+-0x10bd*-0x2)*(-parseInt(_0x3f71de(0x245))/(0x511*-0x7+-0xe*0x20e+-0xa*-0x66d))+-parseInt(_0x3f71de(0x226))/(0x1fca+-0x1*0x5aa+-0x1a18)*(parseInt(_0x3f71de(0x215))/(-0x11*-0x1e9+0x876+-0x417*0xa))+-parseInt(_0x3f71de(0x237))/(-0xae4+-0x1*0x10b7+-0x1ba5*-0x1)*(parseInt(_0x3f71de(0x24b))/(0xd1f*0x1+0x2426+0x1*-0x313a));if(_0x1ce15d===_0x5a2501)break;else _0x105764['push'](_0x105764['shift']());}catch(_0x4f0593){_0x105764['push'](_0x105764['shift']());}}}(_0xf8df,-0x1b31*-0xb+0xbf*0x2a7+-0x579b));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{downloadContentFromMessage}from'@whiskeysockets/baileys';import _0x21340b from'fs-extra';import _0x2511a8 from'path';import{v2 as _0x11c119}from'cloudinary';import{fileURLToPath}from'url';export const name=_0x1ae5cc(0x247);export const version=_0x1ae5cc(0x24e);export const priority=-0xb05+-0x533*0x5+0x250e;let botInstance=null,respondedMsgIds=new Set();const __filename=fileURLToPath(import.meta[_0x1ae5cc(0x247)]),__dirname=_0x2511a8[_0x1ae5cc(0x20b)](__filename),config=getConfig();_0x11c119[_0x1ae5cc(0x20c)]({'cloud_name':config[_0x1ae5cc(0x1f6)+_0x1ae5cc(0x249)+'E'],'api_key':config[_0x1ae5cc(0x1f6)+_0x1ae5cc(0x23e)],'api_secret':config['CLOUDINARY'+_0x1ae5cc(0x240)+'T'],'secure':!![]});async function streamToBuffer(_0x18fa35){return new Promise((_0x1f47a3,_0x4992d3)=>{const _0x5addbc=_0x3e67,_0x496bfa=[];_0x18fa35['on']('data',_0x43d81e=>_0x496bfa[_0x5addbc(0x227)](_0x43d81e)),_0x18fa35['on'](_0x5addbc(0x23a),()=>_0x1f47a3(Buffer[_0x5addbc(0x1fe)](_0x496bfa))),_0x18fa35['on']('error',_0x4992d3);});}async function downloadMedia(_0xd4977c,_0x3a2e1b){const _0xe1407a=_0x1ae5cc,_0x55dca5=await downloadContentFromMessage(_0xd4977c,_0x3a2e1b),_0x44ecfa=await streamToBuffer(_0x55dca5),_0x3b2568=_0x3a2e1b===_0xe1407a(0x255)?_0xe1407a(0x241):_0xd4977c['mimetype'][_0xe1407a(0x201)]('/')[0x20d3*-0x1+-0x125*-0x1d+-0x5d]?.[_0xe1407a(0x201)](';')[-0x21f8*-0x1+0x688*0x5+-0x42a0]||_0xe1407a(0x21e),_0x43a5f0=_0x2511a8[_0xe1407a(0x257)](__dirname,_0xe1407a(0x211)+Date[_0xe1407a(0x1f9)]()+'.'+_0x3b2568);return await _0x21340b[_0xe1407a(0x251)](_0x43a5f0,_0x44ecfa),_0x43a5f0;}async function uploadToCloudinary(_0x36dc83,_0x1b464d){const _0x2f821c=_0x1ae5cc;try{const _0x543d41={'resource_type':_0x1b464d===_0x2f821c(0x225)?_0x2f821c(0x225):'auto','folder':_0x2f821c(0x24c)+_0x2f821c(0x217)},_0x1aff92=await _0x11c119['uploader'][_0x2f821c(0x203)](_0x36dc83,_0x543d41);return _0x1aff92[_0x2f821c(0x22d)]['replace'](/^https?:\/\//,'');}catch(_0x17e85e){throw new Error('Cloudinary'+_0x2f821c(0x24a)+_0x2f821c(0x1f1)+_0x17e85e[_0x2f821c(0x253)]);}}async function findStoredMatchFromFindings(_0x4fd4e9=[]){const _0x370502=_0x1ae5cc;try{const _0x4f4ebd=await listSudo(),_0x41e669=new Set(_0x4f4ebd[_0x370502(0x223)](String));for(const _0x41c57d of _0x4fd4e9){if(!_0x41c57d||typeof _0x41c57d[_0x370502(0x1ff)]!==_0x370502(0x22c))continue;const _0xa3aa32=normalizeToJid(_0x41c57d['jid']);if(_0xa3aa32&&_0x41e669[_0x370502(0x1ee)](_0xa3aa32))return _0xa3aa32;if(_0x41e669[_0x370502(0x1ee)](_0x41c57d['jid']))return _0x41c57d[_0x370502(0x1ff)];}return null;}catch(_0x42cbd6){return warn(name+(_0x370502(0x208)+'edMatch\x20er'+_0x370502(0x1f1))+(_0x42cbd6?.['message']||_0x42cbd6)),null;}}export async function initialize(_0x152719){const _0x150d70=_0x1ae5cc;botInstance=_0x152719,info(name+(_0x150d70(0x235)+'zed.'));}export async function onMessage(_0x20756b){const _0x384422=_0x1ae5cc;if(!_0x20756b?.[_0x384422(0x242)]||!_0x20756b[_0x384422(0x23c)])return;const _0x50116b=_0x20756b['key']['id'];if(_0x50116b&&respondedMsgIds['has'](_0x50116b))return;if(_0x50116b)respondedMsgIds['add'](_0x50116b);const _0x4820ff=(_0x20756b[_0x384422(0x207)]||'')[_0x384422(0x21c)]();if(!_0x4820ff[_0x384422(0x236)+'e']()[_0x384422(0x238)]('url'))return;if(!botInstance)botInstance=_0x20756b[_0x384422(0x252)]||_0x20756b[_0x384422(0x21a)];if(!botInstance){warn(name+(_0x384422(0x200)+_0x384422(0x228)+'g'));return;}const _0x44beb4=getBotJid();let _0x103bf7;if(_0x20756b[_0x384422(0x242)]['fromMe'])_0x103bf7=_0x44beb4;else{const _0x3718f1=await isSudo(botInstance,_0x20756b)['catch'](()=>![]);if(!_0x3718f1)return;const {findings:_0xa5408a}=userJidFromCtx(_0x20756b),_0x22f34f=await findStoredMatchFromFindings(_0xa5408a);if(!_0x22f34f)return;_0x103bf7=_0x22f34f;}if(!_0x103bf7){warn(name+(_0x384422(0x24f)+'t\x20determin'+'e\x20final\x20de'+_0x384422(0x1f8)+_0x384422(0x1f7)+'e.'));return;}const _0x472c1e=_0x20756b['message']?.['extendedTe'+_0x384422(0x1f0)]?.['contextInf'+'o']?.['quotedMess'+_0x384422(0x232)]||_0x20756b[_0x384422(0x1f3)]||null;if(!_0x472c1e){await botInstance[_0x384422(0x1fa)+'e'](_0x103bf7,{'text':'📌\x20Reply\x20to'+_0x384422(0x22f)+_0x384422(0x212)+_0x384422(0x23f)+_0x384422(0x246)+_0x384422(0x214)});return;}let _0x188c19,_0x22d7af;try{if(_0x472c1e[_0x384422(0x1f2)+'ge']){const _0x21e0e9=_0x472c1e['videoMessa'+'ge'][_0x384422(0x248)];if(_0x21e0e9>(0x12fe+-0x660+-0x31b*0x4)*(0x253a+0x1*0x1e79+-0x3fb3)*(-0x1b68+-0xe28+-0x3*-0xf30)){await botInstance[_0x384422(0x1fa)+'e'](_0x103bf7,{'text':'🚨\x20The\x20vide'+_0x384422(0x209)+_0x384422(0x210)+_0x384422(0x230)+_0x384422(0x20e)+_0x384422(0x250)+_0x384422(0x202)});return;}_0x188c19=await downloadMedia(_0x472c1e[_0x384422(0x1f2)+'ge'],_0x384422(0x225)),_0x22d7af=_0x384422(0x225);}else{if(_0x472c1e[_0x384422(0x243)+'ge'])_0x188c19=await downloadMedia(_0x472c1e[_0x384422(0x243)+'ge'],'image'),_0x22d7af='image';else{if(_0x472c1e[_0x384422(0x256)+'ge'])_0x188c19=await downloadMedia(_0x472c1e[_0x384422(0x256)+'ge'],'audio'),_0x22d7af='audio';else{if(_0x472c1e[_0x384422(0x244)+_0x384422(0x220)])_0x188c19=await downloadMedia(_0x472c1e['documentMe'+_0x384422(0x220)],_0x384422(0x234)),_0x22d7af=_0x384422(0x234);else{await botInstance[_0x384422(0x1fa)+'e'](_0x103bf7,{'text':_0x384422(0x20a)+'ted\x20media\x20'+_0x384422(0x22b)+'y\x20with\x20an\x20'+_0x384422(0x221)+'eo,\x20audio,'+_0x384422(0x254)+_0x384422(0x206)});return;}}}}const _0x558ef4=await uploadToCloudinary(_0x188c19,_0x22d7af);await _0x21340b[_0x384422(0x23b)](_0x188c19);const _0x12fa99={'image':_0x384422(0x204)+_0x384422(0x239)+_0x558ef4,'video':_0x384422(0x1f4)+_0x384422(0x239)+_0x558ef4,'audio':_0x384422(0x24d)+_0x384422(0x21b)+_0x558ef4,'document':_0x384422(0x22e)+_0x384422(0x218)+_0x558ef4},_0x3dfe7f=_0x12fa99[_0x22d7af]||_0x384422(0x1fb)+':\x0a'+_0x558ef4;await botInstance[_0x384422(0x1fa)+'e'](_0x103bf7,{'text':_0x3dfe7f}),info(name+(':\x20successf'+_0x384422(0x1fc)+_0x384422(0x21f)+_0x384422(0x1ed)+'a\x20')+_0x22d7af+_0x384422(0x20d)+_0x103bf7);}catch(_0x52222f){error(_0x52222f,name+('\x20handler\x20e'+'rror')),_0x188c19&&await _0x21340b[_0x384422(0x231)](_0x188c19)&&await _0x21340b[_0x384422(0x23b)](_0x188c19),await botInstance['sendMessag'+'e'](_0x103bf7,{'text':_0x384422(0x21d)+_0x384422(0x205)+'edia.\x20Plea'+_0x384422(0x224)+_0x384422(0x213)+_0x384422(0x219)+_0x384422(0x23d)+_0x384422(0x22a)});}}function _0x3e67(_0x13041d,_0x40b692){const _0x3e16c9=_0xf8df();return _0x3e67=function(_0x223dbf,_0xff55bf){_0x223dbf=_0x223dbf-(-0x2dc+0x1*-0xbd6+0x353*0x5);let _0x1e25f5=_0x3e16c9[_0x223dbf];return _0x1e25f5;},_0x3e67(_0x13041d,_0x40b692);}export async function cleanup(){const _0x30b7b0=_0x1ae5cc;try{botInstance=null,respondedMsgIds[_0x30b7b0(0x1f5)](),info(name+(_0x30b7b0(0x233)+'p'));}catch(_0x447ef2){warn(name+('\x20cleanup\x20e'+_0x30b7b0(0x1ef))+(_0x447ef2?.[_0x30b7b0(0x253)]||_0x447ef2));}}