const _0xfd39d2=_0x48e8;(function(_0x523c88,_0x431b68){const _0x32b83c=_0x48e8,_0x85a64=_0x523c88();while(!![]){try{const _0x47bd99=-parseInt(_0x32b83c(0x1b4))/(0xb96+-0x3*0x75e+0xa85)*(-parseInt(_0x32b83c(0x1c5))/(0xae0+-0x56e*0x2+-0x1*0x2))+parseInt(_0x32b83c(0x1b5))/(-0x6*-0x476+-0xcb9*-0x2+-0x3433)*(-parseInt(_0x32b83c(0x160))/(0x2102+0x12e*0x2+0x2*-0x11ad))+-parseInt(_0x32b83c(0x188))/(-0x1a74+-0xd9+0xda9*0x2)+parseInt(_0x32b83c(0x1b2))/(0xa4a*0x3+-0x41a+0x1e9*-0xe)*(parseInt(_0x32b83c(0x161))/(-0x2704+-0x1b1*0x9+0x3644))+parseInt(_0x32b83c(0x1b7))/(0x226b+0x338+-0x259b)*(-parseInt(_0x32b83c(0x157))/(0x434*0x4+-0x1dd*0x1+-0x53*0x2e))+parseInt(_0x32b83c(0x19d))/(0x146*-0x1+0x181e+-0x16ce)+parseInt(_0x32b83c(0x189))/(0x11d8+-0x2*0x10ab+0xf89*0x1)*(parseInt(_0x32b83c(0x177))/(-0x4d6*0x1+-0x1554+0x1a36));if(_0x47bd99===_0x431b68)break;else _0x85a64['push'](_0x85a64['shift']());}catch(_0xc8616e){_0x85a64['push'](_0x85a64['shift']());}}}(_0x38ed,-0x1*0x6821e+0xabf54+-0x3b7e8*-0x1));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{downloadContentFromMessage}from'@whiskeysockets/baileys';import _0x39e6e0 from'fs-extra';import _0x5a7c34 from'path';import{v2 as _0x350d13}from'cloudinary';import{fileURLToPath}from'url';export const name=_0xfd39d2(0x198);export const version='1.0.1';export const priority=-0x1*-0x1bd2+-0x1*-0x22e5+-0x5*0xc89;let botInstance=null,respondedMsgIds=new Set();const __filename=fileURLToPath(import.meta.url),__dirname=_0x5a7c34[_0xfd39d2(0x1a5)](__filename),config=getConfig();function _0x38ed(){const _0x2337fd=['1152jmWnzS','‚ö†\x20Unsuppor','üñºÔ∏è\x20Image\x20UR','now','add','trim','Cloudinary','upload','edia.\x20Plea','1358636YfzqzW','5745187KIMmZg','ted\x20media\x20','string','ed\x20and\x20sen','key','ror:\x20','data','writeFile','type.\x20Repl','quotedMess','xtMessage','image,\x20vid','üìÑ\x20Document','L:\x0a',':\x20Could\x20no','ploads','join','exists','startsWith','uploader','nt.','ssage','1544688tVyiIf','\x20an\x20image,',':\x20initiali','videoMessa','toLowerCas','\x20cleaned\x20u','arge\x20(max\x20','error','has','üìå\x20Reply\x20to','image','temp_','L\x20(MP3):\x0a','fromMe','nce\x20missin','dio,\x20or\x20do','map','4554930PvXFzL','22eEwRlm','stination\x20','split','push','cument\x20to\x20','message','oudinary\x20a','t\x20URL\x20for\x20','bin','üö®\x20The\x20vide','unlink','audioMessa','ne.','audio','\x20or\x20docume','url','_API_SECRE','se\x20try\x20aga','concat','edMatch\x20er','3624870ybFRsm','\x20video,\x20au','üîä\x20Audio\x20UR','bot','\x20handler\x20e','mimetype','text','secure_url','dirname','replace','clear','\x20Upload\x20Er','jid','_CLOUD_NAM','fileLength','\x20cleanup\x20e','pi\x20key\x20in\x20','for\x20messag',':\x20successf','catch','mp3','6dVQMFI','ocessing\x20m','1dqAcIK','3GOHQUI','CLOUDINARY','41512LlrRey','50MB).\x20Ple','\x20smaller\x20o','rror','whatsapp_u','documentMe','extendedTe','_API_KEY','eo,\x20audio,','o\x20is\x20too\x20l','quoted','t\x20determin','get\x20a\x20URL.','sendMessag','1991326gIyPHS','ully\x20creat','isCommand','\x20URL:\x0a',':\x20botInsta','client','‚úÖ\x20File\x20URL','document'];_0x38ed=function(){return _0x2337fd;};return _0x38ed();}_0x350d13['config']({'cloud_name':config['CLOUDINARY'+_0xfd39d2(0x1aa)+'E'],'api_key':config[_0xfd39d2(0x1b6)+_0xfd39d2(0x1be)],'api_secret':config[_0xfd39d2(0x1b6)+_0xfd39d2(0x199)+'T'],'secure':!![]});async function streamToBuffer(_0x30ecaa){return new Promise((_0x433796,_0x1ff797)=>{const _0xf2d215=_0x48e8,_0x14c8c6=[];_0x30ecaa['on'](_0xf2d215(0x167),_0x57aa5e=>_0x14c8c6[_0xf2d215(0x18c)](_0x57aa5e)),_0x30ecaa['on']('end',()=>_0x433796(Buffer[_0xf2d215(0x19b)](_0x14c8c6))),_0x30ecaa['on'](_0xf2d215(0x17e),_0x1ff797);});}function _0x48e8(_0x48a3ba,_0x43a659){_0x48a3ba=_0x48a3ba-(0xef9*0x2+-0x1c1f+-0x7f);const _0x5e2283=_0x38ed();let _0x587cf9=_0x5e2283[_0x48a3ba];return _0x587cf9;}async function downloadMedia(_0x105539,_0xb50e57){const _0x549aa9=_0xfd39d2,_0x1f2f92=await downloadContentFromMessage(_0x105539,_0xb50e57),_0x262249=await streamToBuffer(_0x1f2f92),_0x51c86c=_0xb50e57===_0x549aa9(0x196)?_0x549aa9(0x1b1):_0x105539[_0x549aa9(0x1a2)][_0x549aa9(0x18b)]('/')[0xca2+-0x171*0x3+0x427*-0x2]?.['split'](';')[0xc07*-0x3+-0xe3d+0x10c6*0x3]||_0x549aa9(0x191),_0x50da44=_0x5a7c34[_0x549aa9(0x171)](__dirname,_0x549aa9(0x182)+Date[_0x549aa9(0x15a)]()+'.'+_0x51c86c);return await _0x39e6e0[_0x549aa9(0x168)](_0x50da44,_0x262249),_0x50da44;}async function uploadToCloudinary(_0xf06d64,_0x3304fb){const _0x4eacb0=_0xfd39d2;try{const _0x2b2ca6={'resource_type':_0x3304fb==='video'?'video':'auto','folder':_0x4eacb0(0x1bb)+_0x4eacb0(0x170)},_0x1b03e2=await _0x350d13[_0x4eacb0(0x174)][_0x4eacb0(0x15e)](_0xf06d64,_0x2b2ca6);return _0x1b03e2[_0x4eacb0(0x1a4)][_0x4eacb0(0x1a6)](/^https?:\/\//,'');}catch(_0x1169ef){throw new Error(_0x4eacb0(0x15d)+_0x4eacb0(0x1a8)+_0x4eacb0(0x166)+_0x1169ef[_0x4eacb0(0x18e)]);}}async function findStoredMatchFromFindings(_0x1592d5=[]){const _0x584020=_0xfd39d2;try{const _0x209df9=await listSudo(),_0x2a9aa8=new Set(_0x209df9[_0x584020(0x187)](String));for(const _0x3d5c7b of _0x1592d5){if(!_0x3d5c7b||typeof _0x3d5c7b[_0x584020(0x1a9)]!==_0x584020(0x163))continue;const _0x51ea3b=normalizeToJid(_0x3d5c7b[_0x584020(0x1a9)]);if(_0x51ea3b&&_0x2a9aa8[_0x584020(0x17f)](_0x51ea3b))return _0x51ea3b;if(_0x2a9aa8[_0x584020(0x17f)](_0x3d5c7b[_0x584020(0x1a9)]))return _0x3d5c7b[_0x584020(0x1a9)];}return null;}catch(_0x712d3){return warn(name+(':\x20findStor'+_0x584020(0x19c)+_0x584020(0x166))+(_0x712d3?.[_0x584020(0x18e)]||_0x712d3)),null;}}export async function initialize(_0xe0dfc0){const _0x23446d=_0xfd39d2;botInstance=_0xe0dfc0,info(name+(_0x23446d(0x179)+'zed.'));}export async function onMessage(_0x44d88d){const _0x30e68e=_0xfd39d2;if(!_0x44d88d?.[_0x30e68e(0x165)]||!_0x44d88d[_0x30e68e(0x1c7)])return;const _0x2a1aeb=_0x44d88d[_0x30e68e(0x165)]['id'];if(_0x2a1aeb&&respondedMsgIds[_0x30e68e(0x17f)](_0x2a1aeb))return;if(_0x2a1aeb)respondedMsgIds[_0x30e68e(0x15b)](_0x2a1aeb);const _0x5846ab=(_0x44d88d[_0x30e68e(0x1a3)]||'')[_0x30e68e(0x15c)]();if(!_0x5846ab[_0x30e68e(0x17b)+'e']()[_0x30e68e(0x173)](_0x30e68e(0x198)))return;if(!botInstance)botInstance=_0x44d88d[_0x30e68e(0x1a0)]||_0x44d88d[_0x30e68e(0x154)];if(!botInstance){warn(name+(_0x30e68e(0x1c9)+_0x30e68e(0x185)+'g'));return;}const _0x42ec42=getBotJid();let _0x27deb8;if(_0x44d88d[_0x30e68e(0x165)][_0x30e68e(0x184)])_0x27deb8=_0x42ec42;else{const _0x57caa1=await isSudo(botInstance,_0x44d88d)[_0x30e68e(0x1b0)](()=>![]);if(!_0x57caa1)return;const {findings:_0x3b9a21}=userJidFromCtx(_0x44d88d),_0x3aaf66=await findStoredMatchFromFindings(_0x3b9a21);if(!_0x3aaf66)return;_0x27deb8=_0x3aaf66;}if(!_0x27deb8){warn(name+(_0x30e68e(0x16f)+_0x30e68e(0x1c2)+'e\x20final\x20de'+_0x30e68e(0x18a)+_0x30e68e(0x1ae)+'e.'));return;}const _0x54c002=_0x44d88d[_0x30e68e(0x18e)]?.[_0x30e68e(0x1bd)+_0x30e68e(0x16b)]?.['contextInf'+'o']?.[_0x30e68e(0x16a)+'age']||_0x44d88d[_0x30e68e(0x1c1)]||null;if(!_0x54c002){await botInstance[_0x30e68e(0x1c4)+'e'](_0x27deb8,{'text':_0x30e68e(0x180)+_0x30e68e(0x178)+_0x30e68e(0x19e)+_0x30e68e(0x186)+_0x30e68e(0x18d)+_0x30e68e(0x1c3)});return;}let _0x229814,_0x5b0223;try{if(_0x54c002['videoMessa'+'ge']){const _0x38a023=_0x54c002[_0x30e68e(0x17a)+'ge'][_0x30e68e(0x1ab)];if(_0x38a023>(-0x1d2d+-0x57a+-0x1*-0x22d9)*(-0x122c+0x22f4+-0x664*0x2)*(-0x1dec+0x5b5+-0x1*-0x1c37)){await botInstance['sendMessag'+'e'](_0x27deb8,{'text':_0x30e68e(0x192)+_0x30e68e(0x1c0)+_0x30e68e(0x17d)+_0x30e68e(0x1b8)+'ase\x20send\x20a'+_0x30e68e(0x1b9)+_0x30e68e(0x195)});return;}_0x229814=await downloadMedia(_0x54c002[_0x30e68e(0x17a)+'ge'],'video'),_0x5b0223='video';}else{if(_0x54c002['imageMessa'+'ge'])_0x229814=await downloadMedia(_0x54c002['imageMessa'+'ge'],'image'),_0x5b0223=_0x30e68e(0x181);else{if(_0x54c002[_0x30e68e(0x194)+'ge'])_0x229814=await downloadMedia(_0x54c002[_0x30e68e(0x194)+'ge'],_0x30e68e(0x196)),_0x5b0223=_0x30e68e(0x196);else{if(_0x54c002[_0x30e68e(0x1bc)+_0x30e68e(0x176)])_0x229814=await downloadMedia(_0x54c002[_0x30e68e(0x1bc)+'ssage'],_0x30e68e(0x156)),_0x5b0223=_0x30e68e(0x156);else{await botInstance['sendMessag'+'e'](_0x27deb8,{'text':_0x30e68e(0x158)+_0x30e68e(0x162)+_0x30e68e(0x169)+'y\x20with\x20an\x20'+_0x30e68e(0x16c)+_0x30e68e(0x1bf)+_0x30e68e(0x197)+_0x30e68e(0x175)});return;}}}}const _0x78be0d=await uploadToCloudinary(_0x229814,_0x5b0223);await _0x39e6e0[_0x30e68e(0x193)](_0x229814);const _0x1142dc={'image':_0x30e68e(0x159)+_0x30e68e(0x16e)+_0x78be0d,'video':'üé•\x20Video\x20UR'+_0x30e68e(0x16e)+_0x78be0d,'audio':_0x30e68e(0x19f)+_0x30e68e(0x183)+_0x78be0d,'document':_0x30e68e(0x16d)+_0x30e68e(0x1c8)+_0x78be0d},_0x176074=_0x1142dc[_0x5b0223]||_0x30e68e(0x155)+':\x0a'+_0x78be0d;await botInstance[_0x30e68e(0x1c4)+'e'](_0x27deb8,{'text':_0x176074}),info(name+(_0x30e68e(0x1af)+_0x30e68e(0x1c6)+_0x30e68e(0x164)+_0x30e68e(0x190)+'a\x20')+_0x5b0223+'\x20to\x20'+_0x27deb8);}catch(_0x476eb4){error(_0x476eb4,name+(_0x30e68e(0x1a1)+_0x30e68e(0x1ba))),_0x229814&&await _0x39e6e0[_0x30e68e(0x172)](_0x229814)&&await _0x39e6e0[_0x30e68e(0x193)](_0x229814),await botInstance['sendMessag'+'e'](_0x27deb8,{'text':'‚ùå\x20Error\x20pr'+_0x30e68e(0x1b3)+_0x30e68e(0x15f)+_0x30e68e(0x19a)+'in.\x20add\x20cl'+_0x30e68e(0x18f)+_0x30e68e(0x1ad)+'the\x20.env'});}}export async function cleanup(){const _0xdf4fe1=_0xfd39d2;try{botInstance=null,respondedMsgIds[_0xdf4fe1(0x1a7)](),info(name+(_0xdf4fe1(0x17c)+'p'));}catch(_0x38efab){warn(name+(_0xdf4fe1(0x1ac)+'rror:\x20')+(_0x38efab?.['message']||_0x38efab));}}